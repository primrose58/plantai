(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function sN(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var my={exports:{}},Au={};var Ew;function aN(){if(Ew)return Au;Ew=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:r,type:n,key:c,ref:s!==void 0?s:null,props:o}}return Au.Fragment=e,Au.jsx=t,Au.jsxs=t,Au}var Tw;function oN(){return Tw||(Tw=1,my.exports=aN()),my.exports}var b=oN(),gy={exports:{}},ze={};var Sw;function lN(){if(Sw)return ze;Sw=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function w(F){return F===null||typeof F!="object"?null:(F=v&&F[v]||F["@@iterator"],typeof F=="function"?F:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,P={};function V(F,Y,ie){this.props=F,this.context=Y,this.refs=P,this.updater=ie||T}V.prototype.isReactComponent={},V.prototype.setState=function(F,Y){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Y,"setState")},V.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function H(){}H.prototype=V.prototype;function B(F,Y,ie){this.props=F,this.context=Y,this.refs=P,this.updater=ie||T}var q=B.prototype=new H;q.constructor=B,N(q,V.prototype),q.isPureReactComponent=!0;var K=Array.isArray;function z(){}var O={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function S(F,Y,ie){var Z=ie.ref;return{$$typeof:r,type:F,key:Y,ref:Z!==void 0?Z:null,props:ie}}function I(F,Y){return S(F.type,Y,F.props)}function C(F){return typeof F=="object"&&F!==null&&F.$$typeof===r}function L(F){var Y={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ie){return Y[ie]})}var k=/\/+/g;function G(F,Y){return typeof F=="object"&&F!==null&&F.key!=null?L(""+F.key):Y.toString(36)}function ne(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(z,z):(F.status="pending",F.then(function(Y){F.status==="pending"&&(F.status="fulfilled",F.value=Y)},function(Y){F.status==="pending"&&(F.status="rejected",F.reason=Y)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function M(F,Y,ie,Z,X){var pe=typeof F;(pe==="undefined"||pe==="boolean")&&(F=null);var Ee=!1;if(F===null)Ee=!0;else switch(pe){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(F.$$typeof){case r:case e:Ee=!0;break;case g:return Ee=F._init,M(Ee(F._payload),Y,ie,Z,X)}}if(Ee)return X=X(F),Ee=Z===""?"."+G(F,0):Z,K(X)?(ie="",Ee!=null&&(ie=Ee.replace(k,"$&/")+"/"),M(X,Y,ie,"",function($e){return $e})):X!=null&&(C(X)&&(X=I(X,ie+(X.key==null||F&&F.key===X.key?"":(""+X.key).replace(k,"$&/")+"/")+Ee)),Y.push(X)),1;Ee=0;var Ie=Z===""?".":Z+":";if(K(F))for(var Re=0;Re<F.length;Re++)Z=F[Re],pe=Ie+G(Z,Re),Ee+=M(Z,Y,ie,pe,X);else if(Re=w(F),typeof Re=="function")for(F=Re.call(F),Re=0;!(Z=F.next()).done;)Z=Z.value,pe=Ie+G(Z,Re++),Ee+=M(Z,Y,ie,pe,X);else if(pe==="object"){if(typeof F.then=="function")return M(ne(F),Y,ie,Z,X);throw Y=String(F),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function D(F,Y,ie){if(F==null)return F;var Z=[],X=0;return M(F,Z,"","",function(pe){return Y.call(ie,pe,X++)}),Z}function te(F){if(F._status===-1){var Y=F._result;Y=Y(),Y.then(function(ie){(F._status===0||F._status===-1)&&(F._status=1,F._result=ie)},function(ie){(F._status===0||F._status===-1)&&(F._status=2,F._result=ie)}),F._status===-1&&(F._status=0,F._result=Y)}if(F._status===1)return F._result.default;throw F._result}var W=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},ee={map:D,forEach:function(F,Y,ie){D(F,function(){Y.apply(this,arguments)},ie)},count:function(F){var Y=0;return D(F,function(){Y++}),Y},toArray:function(F){return D(F,function(Y){return Y})||[]},only:function(F){if(!C(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return ze.Activity=y,ze.Children=ee,ze.Component=V,ze.Fragment=t,ze.Profiler=s,ze.PureComponent=B,ze.StrictMode=n,ze.Suspense=d,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,ze.__COMPILER_RUNTIME={__proto__:null,c:function(F){return O.H.useMemoCache(F)}},ze.cache=function(F){return function(){return F.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(F,Y,ie){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var Z=N({},F.props),X=F.key;if(Y!=null)for(pe in Y.key!==void 0&&(X=""+Y.key),Y)!x.call(Y,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&Y.ref===void 0||(Z[pe]=Y[pe]);var pe=arguments.length-2;if(pe===1)Z.children=ie;else if(1<pe){for(var Ee=Array(pe),Ie=0;Ie<pe;Ie++)Ee[Ie]=arguments[Ie+2];Z.children=Ee}return S(F.type,X,Z)},ze.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:o,_context:F},F},ze.createElement=function(F,Y,ie){var Z,X={},pe=null;if(Y!=null)for(Z in Y.key!==void 0&&(pe=""+Y.key),Y)x.call(Y,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(X[Z]=Y[Z]);var Ee=arguments.length-2;if(Ee===1)X.children=ie;else if(1<Ee){for(var Ie=Array(Ee),Re=0;Re<Ee;Re++)Ie[Re]=arguments[Re+2];X.children=Ie}if(F&&F.defaultProps)for(Z in Ee=F.defaultProps,Ee)X[Z]===void 0&&(X[Z]=Ee[Z]);return S(F,pe,X)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(F){return{$$typeof:u,render:F}},ze.isValidElement=C,ze.lazy=function(F){return{$$typeof:g,_payload:{_status:-1,_result:F},_init:te}},ze.memo=function(F,Y){return{$$typeof:f,type:F,compare:Y===void 0?null:Y}},ze.startTransition=function(F){var Y=O.T,ie={};O.T=ie;try{var Z=F(),X=O.S;X!==null&&X(ie,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(z,W)}catch(pe){W(pe)}finally{Y!==null&&ie.types!==null&&(Y.types=ie.types),O.T=Y}},ze.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},ze.use=function(F){return O.H.use(F)},ze.useActionState=function(F,Y,ie){return O.H.useActionState(F,Y,ie)},ze.useCallback=function(F,Y){return O.H.useCallback(F,Y)},ze.useContext=function(F){return O.H.useContext(F)},ze.useDebugValue=function(){},ze.useDeferredValue=function(F,Y){return O.H.useDeferredValue(F,Y)},ze.useEffect=function(F,Y){return O.H.useEffect(F,Y)},ze.useEffectEvent=function(F){return O.H.useEffectEvent(F)},ze.useId=function(){return O.H.useId()},ze.useImperativeHandle=function(F,Y,ie){return O.H.useImperativeHandle(F,Y,ie)},ze.useInsertionEffect=function(F,Y){return O.H.useInsertionEffect(F,Y)},ze.useLayoutEffect=function(F,Y){return O.H.useLayoutEffect(F,Y)},ze.useMemo=function(F,Y){return O.H.useMemo(F,Y)},ze.useOptimistic=function(F,Y){return O.H.useOptimistic(F,Y)},ze.useReducer=function(F,Y,ie){return O.H.useReducer(F,Y,ie)},ze.useRef=function(F){return O.H.useRef(F)},ze.useState=function(F){return O.H.useState(F)},ze.useSyncExternalStore=function(F,Y,ie){return O.H.useSyncExternalStore(F,Y,ie)},ze.useTransition=function(){return O.H.useTransition()},ze.version="19.2.3",ze}var Aw;function Om(){return Aw||(Aw=1,gy.exports=lN()),gy.exports}var $=Om();const BT=sN($);var py={exports:{}},Iu={},yy={exports:{}},_y={};var Iw;function cN(){return Iw||(Iw=1,(function(r){function e(M,D){var te=M.length;M.push(D);e:for(;0<te;){var W=te-1>>>1,ee=M[W];if(0<s(ee,D))M[W]=D,M[te]=ee,te=W;else break e}}function t(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var D=M[0],te=M.pop();if(te!==D){M[0]=te;e:for(var W=0,ee=M.length,F=ee>>>1;W<F;){var Y=2*(W+1)-1,ie=M[Y],Z=Y+1,X=M[Z];if(0>s(ie,te))Z<ee&&0>s(X,ie)?(M[W]=X,M[Z]=te,W=Z):(M[W]=ie,M[Y]=te,W=Y);else if(Z<ee&&0>s(X,te))M[W]=X,M[Z]=te,W=Z;else break e}}return D}function s(M,D){var te=M.sortIndex-D.sortIndex;return te!==0?te:M.id-D.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var d=[],f=[],g=1,y=null,v=3,w=!1,T=!1,N=!1,P=!1,V=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function q(M){for(var D=t(f);D!==null;){if(D.callback===null)n(f);else if(D.startTime<=M)n(f),D.sortIndex=D.expirationTime,e(d,D);else break;D=t(f)}}function K(M){if(N=!1,q(M),!T)if(t(d)!==null)T=!0,z||(z=!0,L());else{var D=t(f);D!==null&&ne(K,D.startTime-M)}}var z=!1,O=-1,x=5,S=-1;function I(){return P?!0:!(r.unstable_now()-S<x)}function C(){if(P=!1,z){var M=r.unstable_now();S=M;var D=!0;try{e:{T=!1,N&&(N=!1,H(O),O=-1),w=!0;var te=v;try{t:{for(q(M),y=t(d);y!==null&&!(y.expirationTime>M&&I());){var W=y.callback;if(typeof W=="function"){y.callback=null,v=y.priorityLevel;var ee=W(y.expirationTime<=M);if(M=r.unstable_now(),typeof ee=="function"){y.callback=ee,q(M),D=!0;break t}y===t(d)&&n(d),q(M)}else n(d);y=t(d)}if(y!==null)D=!0;else{var F=t(f);F!==null&&ne(K,F.startTime-M),D=!1}}break e}finally{y=null,v=te,w=!1}D=void 0}}finally{D?L():z=!1}}}var L;if(typeof B=="function")L=function(){B(C)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,G=k.port2;k.port1.onmessage=C,L=function(){G.postMessage(null)}}else L=function(){V(C,0)};function ne(M,D){O=V(function(){M(r.unstable_now())},D)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(M){M.callback=null},r.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<M?Math.floor(1e3/M):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(M){switch(v){case 1:case 2:case 3:var D=3;break;default:D=v}var te=v;v=D;try{return M()}finally{v=te}},r.unstable_requestPaint=function(){P=!0},r.unstable_runWithPriority=function(M,D){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var te=v;v=M;try{return D()}finally{v=te}},r.unstable_scheduleCallback=function(M,D,te){var W=r.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?W+te:W):te=W,M){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=te+ee,M={id:g++,callback:D,priorityLevel:M,startTime:te,expirationTime:ee,sortIndex:-1},te>W?(M.sortIndex=te,e(f,M),t(d)===null&&M===t(f)&&(N?(H(O),O=-1):N=!0,ne(K,te-W))):(M.sortIndex=ee,e(d,M),T||w||(T=!0,z||(z=!0,L()))),M},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(M){var D=v;return function(){var te=v;v=D;try{return M.apply(this,arguments)}finally{v=te}}}})(_y)),_y}var Rw;function uN(){return Rw||(Rw=1,yy.exports=cN()),yy.exports}var vy={exports:{}},On={};var Cw;function hN(){if(Cw)return On;Cw=1;var r=Om();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:f,implementation:g}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,On.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,g)},On.flushSync=function(d){var f=c.T,g=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=f,n.p=g,n.d.f()}},On.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},On.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},On.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:w}):g==="script"&&n.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},On.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},On.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);n.d.L(d,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},On.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},On.requestFormReset=function(d){n.d.r(d)},On.unstable_batchedUpdates=function(d,f){return d(f)},On.useFormState=function(d,f,g){return c.H.useFormState(d,f,g)},On.useFormStatus=function(){return c.H.useHostTransitionStatus()},On.version="19.2.3",On}var Nw;function dN(){if(Nw)return vy.exports;Nw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),vy.exports=hN(),vy.exports}var kw;function fN(){if(kw)return Iu;kw=1;var r=uN(),e=Om(),t=dN();function n(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function c(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(n(188));return a!==i?null:i}for(var l=i,h=a;;){var p=l.return;if(p===null)break;var _=p.alternate;if(_===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===_.child){for(_=p.child;_;){if(_===l)return d(p),i;if(_===h)return d(p),a;_=_.sibling}throw Error(n(188))}if(l.return!==h.return)l=p,h=_;else{for(var A=!1,j=p.child;j;){if(j===l){A=!0,l=p,h=_;break}if(j===h){A=!0,h=p,l=_;break}j=j.sibling}if(!A){for(j=_.child;j;){if(j===l){A=!0,l=_,h=p;break}if(j===h){A=!0,h=_,l=p;break}j=j.sibling}if(!A)throw Error(n(189))}}if(l.alternate!==h)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?i:a}function g(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=g(i),a!==null)return a;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),B=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function L(i){return i===null||typeof i!="object"?null:(i=C&&i[C]||i["@@iterator"],typeof i=="function"?i:null)}var k=Symbol.for("react.client.reference");function G(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===k?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case V:return"Profiler";case P:return"StrictMode";case K:return"Suspense";case z:return"SuspenseList";case S:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case T:return"Portal";case B:return i.displayName||"Context";case H:return(i._context.displayName||"Context")+".Consumer";case q:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case O:return a=i.displayName||null,a!==null?a:G(i.type)||"Memo";case x:a=i._payload,i=i._init;try{return G(i(a))}catch{}}return null}var ne=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},W=[],ee=-1;function F(i){return{current:i}}function Y(i){0>ee||(i.current=W[ee],W[ee]=null,ee--)}function ie(i,a){ee++,W[ee]=i.current,i.current=a}var Z=F(null),X=F(null),pe=F(null),Ee=F(null);function Ie(i,a){switch(ie(pe,a),ie(X,i),ie(Z,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?G1(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=G1(a),i=K1(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Y(Z),ie(Z,i)}function Re(){Y(Z),Y(X),Y(pe)}function $e(i){i.memoizedState!==null&&ie(Ee,i);var a=Z.current,l=K1(a,i.type);a!==l&&(ie(X,i),ie(Z,l))}function Qe(i){X.current===i&&(Y(Z),Y(X)),Ee.current===i&&(Y(Ee),xu._currentValue=te)}var rt,Dt;function gt(i){if(rt===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);rt=a&&a[1]||"",Dt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rt+i+Dt}var We=!1;function yt(i,a){if(!i||We)return"";We=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(he){var ce=he}Reflect.construct(i,[],ge)}else{try{ge.call()}catch(he){ce=he}i.call(ge.prototype)}}else{try{throw Error()}catch(he){ce=he}(ge=i())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(he){if(he&&ce&&typeof he.stack=="string")return[he.stack,ce.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=h.DetermineComponentFrameRoot(),A=_[0],j=_[1];if(A&&j){var Q=A.split(`
`),le=j.split(`
`);for(p=h=0;h<Q.length&&!Q[h].includes("DetermineComponentFrameRoot");)h++;for(;p<le.length&&!le[p].includes("DetermineComponentFrameRoot");)p++;if(h===Q.length||p===le.length)for(h=Q.length-1,p=le.length-1;1<=h&&0<=p&&Q[h]!==le[p];)p--;for(;1<=h&&0<=p;h--,p--)if(Q[h]!==le[p]){if(h!==1||p!==1)do if(h--,p--,0>p||Q[h]!==le[p]){var fe=`
`+Q[h].replace(" at new "," at ");return i.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",i.displayName)),fe}while(1<=h&&0<=p);break}}}finally{We=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?gt(l):""}function ot(i,a){switch(i.tag){case 26:case 27:case 5:return gt(i.type);case 16:return gt("Lazy");case 13:return i.child!==a&&a!==null?gt("Suspense Fallback"):gt("Suspense");case 19:return gt("SuspenseList");case 0:case 15:return yt(i.type,!1);case 11:return yt(i.type.render,!1);case 1:return yt(i.type,!0);case 31:return gt("Activity");default:return""}}function lt(i){try{var a="",l=null;do a+=ot(i,l),l=i,i=i.return;while(i);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Ge=Object.prototype.hasOwnProperty,ye=r.unstable_scheduleCallback,Te=r.unstable_cancelCallback,Be=r.unstable_shouldYield,Oe=r.unstable_requestPaint,xe=r.unstable_now,it=r.unstable_getCurrentPriorityLevel,pt=r.unstable_ImmediatePriority,Fn=r.unstable_UserBlockingPriority,ht=r.unstable_NormalPriority,Hn=r.unstable_LowPriority,Ft=r.unstable_IdlePriority,kn=r.log,wn=r.unstable_setDisableYieldValue,Kt=null,St=null;function Zt(i){if(typeof kn=="function"&&wn(i),St&&typeof St.setStrictMode=="function")try{St.setStrictMode(Kt,i)}catch{}}var Ot=Math.clz32?Math.clz32:Ma,Wo=Math.log,ai=Math.LN2;function Ma(i){return i>>>=0,i===0?32:31-(Wo(i)/ai|0)|0}var Dn=256,qi=262144,_t=4194304;function hn(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function xn(i,a,l){var h=i.pendingLanes;if(h===0)return 0;var p=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var j=h&134217727;return j!==0?(h=j&~_,h!==0?p=hn(h):(A&=j,A!==0?p=hn(A):l||(l=j&~i,l!==0&&(p=hn(l))))):(j=h&~_,j!==0?p=hn(j):A!==0?p=hn(A):l||(l=h&~i,l!==0&&(p=hn(l)))),p===0?0:a!==0&&a!==p&&(a&_)===0&&(_=p&-p,l=a&-a,_>=l||_===32&&(l&4194048)!==0)?a:p}function En(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Xo(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Er(){var i=_t;return _t<<=1,(_t&62914560)===0&&(_t=4194304),i}function pn(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Pa(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function vg(i,a,l,h,p,_){var A=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var j=i.entanglements,Q=i.expirationTimes,le=i.hiddenUpdates;for(l=A&~l;0<l;){var fe=31-Ot(l),ge=1<<fe;j[fe]=0,Q[fe]=-1;var ce=le[fe];if(ce!==null)for(le[fe]=null,fe=0;fe<ce.length;fe++){var he=ce[fe];he!==null&&(he.lane&=-536870913)}l&=~ge}h!==0&&La(i,h,0),_!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~a))}function La(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var h=31-Ot(a);i.entangledLanes|=a,i.entanglements[h]=i.entanglements[h]|1073741824|l&261930}function Ic(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var h=31-Ot(l),p=1<<h;p&a|i[h]&a&&(i[h]|=a),l&=~p}}function Rc(i,a){var l=a&-a;return l=(l&42)!==0?1:Va(l),(l&(i.suspendedLanes|a))!==0?0:l}function Va(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function $i(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function $h(){var i=D.p;return i!==0?i:(i=window.event,i===void 0?32:pw(i.type))}function zr(i,a){var l=D.p;try{return D.p=i,a()}finally{D.p=l}}var Br=Math.random().toString(36).slice(2),en="__reactFiber$"+Br,yn="__reactProps$"+Br,oi="__reactContainer$"+Br,Jo="__reactEvents$"+Br,bg="__reactListeners$"+Br,Gh="__reactHandles$"+Br,Kh="__reactResources$"+Br,li="__reactMarker$"+Br;function Zo(i){delete i[en],delete i[yn],delete i[Jo],delete i[bg],delete i[Gh]}function ci(i){var a=i[en];if(a)return a;for(var l=i.parentNode;l;){if(a=l[oi]||l[en]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=ew(i);i!==null;){if(l=i[en])return l;i=ew(i)}return a}i=l,l=i.parentNode}return null}function Tr(i){if(i=i[en]||i[oi]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function or(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(n(33))}function ui(i){var a=i[Kh];return a||(a=i[Kh]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function tn(i){i[li]=!0}var Cc=new Set,Nc={};function hi(i,a){di(i,a),di(i+"Capture",a)}function di(i,a){for(Nc[i]=a,i=0;i<a.length;i++)Cc.add(a[i])}var kc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dc={},Oc={};function Yh(i){return Ge.call(Oc,i)?!0:Ge.call(Dc,i)?!1:kc.test(i)?Oc[i]=!0:(Dc[i]=!0,!1)}function el(i,a,l){if(Yh(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function lr(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function nn(i,a,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+h)}}function _n(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Rs(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Mc(i,a,l){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var p=h.get,_=h.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return p.call(this)},set:function(A){l=""+A,_.call(this,A)}}),Object.defineProperty(i,a,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function vt(i){if(!i._valueTracker){var a=Rs(i)?"checked":"value";i._valueTracker=Mc(i,a,""+i[a])}}function ja(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return i&&(h=Rs(i)?i.checked?"true":"false":i.value),i=h,i!==l?(a.setValue(i),!0):!1}function fi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ua=/[\n"\\]/g;function Xn(i){return i.replace(Ua,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function tl(i,a,l,h,p,_,A,j){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),a!=null?A==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+_n(a)):i.value!==""+_n(a)&&(i.value=""+_n(a)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),a!=null?Pc(i,A,_n(a)):l!=null?Pc(i,A,_n(l)):h!=null&&i.removeAttribute("value"),p==null&&_!=null&&(i.defaultChecked=!!_),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?i.name=""+_n(j):i.removeAttribute("name")}function Qh(i,a,l,h,p,_,A,j){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),a!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||a!=null)){vt(i);return}l=l!=null?""+_n(l):"",a=a!=null?""+_n(a):l,j||a===i.value||(i.value=a),i.defaultValue=a}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=j?i.checked:!!h,i.defaultChecked=!!h,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),vt(i)}function Pc(i,a,l){a==="number"&&fi(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Cs(i,a,l,h){if(i=i.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=a.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+_n(l),a=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}a!==null||i[p].disabled||(a=i[p])}a!==null&&(a.selected=!0)}}function Wh(i,a,l){if(a!=null&&(a=""+_n(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+_n(l):""}function Ns(i,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(n(92));if(ne(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=_n(a),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h),vt(i)}function Jn(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Xh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lc(i,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":h?i.setProperty(a,l):typeof l!="number"||l===0||Xh.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function Vc(i,a,l){if(a!=null&&typeof a!="object")throw Error(n(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var p in a)h=a[p],a.hasOwnProperty(p)&&l[p]!==h&&Lc(i,p,h)}else for(var _ in a)a.hasOwnProperty(_)&&Lc(i,_,a[_])}function nl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ks=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rl(i){return ks.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Fr(){}var jc=null;function Sr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ds=null,mi=null;function za(i){var a=Tr(i);if(a&&(i=a.stateNode)){var l=i[yn]||null;e:switch(i=a.stateNode,a.type){case"input":if(tl(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Xn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==i&&h.form===i.form){var p=h[yn]||null;if(!p)throw Error(n(90));tl(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===i.form&&ja(h)}break e;case"textarea":Wh(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Cs(i,!!l.multiple,a,!1)}}}var il=!1;function Os(i,a,l){if(il)return i(a,l);il=!0;try{var h=i(a);return h}finally{if(il=!1,(Ds!==null||mi!==null)&&($d(),Ds&&(a=Ds,i=mi,mi=Ds=null,za(a),i)))for(a=0;a<i.length;a++)za(i[a])}}function Hr(i,a){var l=i.stateNode;if(l===null)return null;var h=l[yn]||null;if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(n(231,a,typeof l));return l}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ba=!1;if(Ar)try{var At={};Object.defineProperty(At,"passive",{get:function(){Ba=!0}}),window.addEventListener("test",At,At),window.removeEventListener("test",At,At)}catch{Ba=!1}var gi=null,Uc=null,Fa=null;function zc(){if(Fa)return Fa;var i,a=Uc,l=a.length,h,p="value"in gi?gi.value:gi.textContent,_=p.length;for(i=0;i<l&&a[i]===p[i];i++);var A=l-i;for(h=1;h<=A&&a[l-h]===p[_-h];h++);return Fa=p.slice(i,1<h?1-h:void 0)}function Ha(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Gi(){return!0}function qr(){return!1}function Tn(i){function a(l,h,p,_,A){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var j in i)i.hasOwnProperty(j)&&(l=i[j],this[j]=l?l(_):_[j]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Gi:qr,this.isPropagationStopped=qr,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),a}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pi=Tn(Ki),Ms=y({},Ki,{view:0,detail:0}),Bc=Tn(Ms),Ps,sl,yi,al=y({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yi&&(yi&&i.type==="mousemove"?(Ps=i.screenX-yi.screenX,sl=i.screenY-yi.screenY):sl=Ps=0,yi=i),Ps)},movementY:function(i){return"movementY"in i?i.movementY:sl}}),Fc=Tn(al),qa=y({},al,{dataTransfer:0}),Zh=Tn(qa),ed=y({},Ms,{relatedTarget:0}),$a=Tn(ed),Hc=y({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),td=Tn(Hc),ol=y({},Ki,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),nd=Tn(ol),rd=y({},Ki,{data:0}),_i=Tn(rd),id={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ad={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function od(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=ad[i])?!!a[i]:!1}function Ls(){return od}var qn=y({},Ms,{key:function(i){if(i.key){var a=id[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Ha(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?sd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(i){return i.type==="keypress"?Ha(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ha(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ld=Tn(qn),cd=y({},al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yi=Tn(cd),m=y({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),E=Tn(m),R=y({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),U=Tn(R),ae=y({},al,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ue=Tn(ae),be=y({},Ki,{newState:0,oldState:0}),Fe=Tn(be),Yt=[9,13,27,32],dt=Ar&&"CompositionEvent"in window,Lt=null;Ar&&"documentMode"in document&&(Lt=document.documentMode);var Ir=Ar&&"TextEvent"in window&&!Lt,vi=Ar&&(!dt||Lt&&8<Lt&&11>=Lt),$r=" ",Gr=!1;function Ga(i,a){switch(i){case"keyup":return Yt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ll(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var cl=!1;function CR(i,a){switch(i){case"compositionend":return ll(a);case"keypress":return a.which!==32?null:(Gr=!0,$r);case"textInput":return i=a.data,i===$r&&Gr?null:i;default:return null}}function NR(i,a){if(cl)return i==="compositionend"||!dt&&Ga(i,a)?(i=zc(),Fa=Uc=gi=null,cl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return vi&&a.locale!=="ko"?null:a.data;default:return null}}var kR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!kR[i.type]:a==="textarea"}function iv(i,a,l,h){Ds?mi?mi.push(h):mi=[h]:Ds=h,a=Jd(a,"onChange"),0<a.length&&(l=new pi("onChange","change",null,l,h),i.push({event:l,listeners:a}))}var qc=null,$c=null;function DR(i){z1(i,0)}function ud(i){var a=or(i);if(ja(a))return i}function sv(i,a){if(i==="change")return a}var av=!1;if(Ar){var wg;if(Ar){var xg="oninput"in document;if(!xg){var ov=document.createElement("div");ov.setAttribute("oninput","return;"),xg=typeof ov.oninput=="function"}wg=xg}else wg=!1;av=wg&&(!document.documentMode||9<document.documentMode)}function lv(){qc&&(qc.detachEvent("onpropertychange",cv),$c=qc=null)}function cv(i){if(i.propertyName==="value"&&ud($c)){var a=[];iv(a,$c,i,Sr(i)),Os(DR,a)}}function OR(i,a,l){i==="focusin"?(lv(),qc=a,$c=l,qc.attachEvent("onpropertychange",cv)):i==="focusout"&&lv()}function MR(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ud($c)}function PR(i,a){if(i==="click")return ud(a)}function LR(i,a){if(i==="input"||i==="change")return ud(a)}function VR(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var cr=typeof Object.is=="function"?Object.is:VR;function Gc(i,a){if(cr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!Ge.call(a,p)||!cr(i[p],a[p]))return!1}return!0}function uv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function hv(i,a){var l=uv(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=a&&h>=a)return{node:l,offset:a-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=uv(l)}}function dv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?dv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function fv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=fi(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=fi(i.document)}return a}function Eg(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var jR=Ar&&"documentMode"in document&&11>=document.documentMode,ul=null,Tg=null,Kc=null,Sg=!1;function mv(i,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Sg||ul==null||ul!==fi(h)||(h=ul,"selectionStart"in h&&Eg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Kc&&Gc(Kc,h)||(Kc=h,h=Jd(Tg,"onSelect"),0<h.length&&(a=new pi("onSelect","select",null,a,l),i.push({event:a,listeners:h}),a.target=ul)))}function Ka(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var hl={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionrun:Ka("Transition","TransitionRun"),transitionstart:Ka("Transition","TransitionStart"),transitioncancel:Ka("Transition","TransitionCancel"),transitionend:Ka("Transition","TransitionEnd")},Ag={},gv={};Ar&&(gv=document.createElement("div").style,"AnimationEvent"in window||(delete hl.animationend.animation,delete hl.animationiteration.animation,delete hl.animationstart.animation),"TransitionEvent"in window||delete hl.transitionend.transition);function Ya(i){if(Ag[i])return Ag[i];if(!hl[i])return i;var a=hl[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in gv)return Ag[i]=a[l];return i}var pv=Ya("animationend"),yv=Ya("animationiteration"),_v=Ya("animationstart"),UR=Ya("transitionrun"),zR=Ya("transitionstart"),BR=Ya("transitioncancel"),vv=Ya("transitionend"),bv=new Map,Ig="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ig.push("scrollEnd");function Kr(i,a){bv.set(i,a),hi(a,[i])}var hd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Rr=[],dl=0,Rg=0;function dd(){for(var i=dl,a=Rg=dl=0;a<i;){var l=Rr[a];Rr[a++]=null;var h=Rr[a];Rr[a++]=null;var p=Rr[a];Rr[a++]=null;var _=Rr[a];if(Rr[a++]=null,h!==null&&p!==null){var A=h.pending;A===null?p.next=p:(p.next=A.next,A.next=p),h.pending=p}_!==0&&wv(l,p,_)}}function fd(i,a,l,h){Rr[dl++]=i,Rr[dl++]=a,Rr[dl++]=l,Rr[dl++]=h,Rg|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Cg(i,a,l,h){return fd(i,a,l,h),md(i)}function Qa(i,a){return fd(i,null,null,a),md(i)}function wv(i,a,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var p=!1,_=i.return;_!==null;)_.childLanes|=l,h=_.alternate,h!==null&&(h.childLanes|=l),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(p=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,p&&a!==null&&(p=31-Ot(l),i=_.hiddenUpdates,h=i[p],h===null?i[p]=[a]:h.push(a),a.lane=l|536870912),_):null}function md(i){if(50<gu)throw gu=0,jp=null,Error(n(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var fl={};function FR(i,a,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(i,a,l,h){return new FR(i,a,l,h)}function Ng(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Qi(i,a){var l=i.alternate;return l===null?(l=ur(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function xv(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function gd(i,a,l,h,p,_){var A=0;if(h=i,typeof i=="function")Ng(i)&&(A=1);else if(typeof i=="string")A=KC(i,l,Z.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case S:return i=ur(31,l,a,p),i.elementType=S,i.lanes=_,i;case N:return Wa(l.children,p,_,a);case P:A=8,p|=24;break;case V:return i=ur(12,l,a,p|2),i.elementType=V,i.lanes=_,i;case K:return i=ur(13,l,a,p),i.elementType=K,i.lanes=_,i;case z:return i=ur(19,l,a,p),i.elementType=z,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:A=10;break e;case H:A=9;break e;case q:A=11;break e;case O:A=14;break e;case x:A=16,h=null;break e}A=29,l=Error(n(130,i===null?"null":typeof i,"")),h=null}return a=ur(A,l,a,p),a.elementType=i,a.type=h,a.lanes=_,a}function Wa(i,a,l,h){return i=ur(7,i,h,a),i.lanes=l,i}function kg(i,a,l){return i=ur(6,i,null,a),i.lanes=l,i}function Ev(i){var a=ur(18,null,null,0);return a.stateNode=i,a}function Dg(i,a,l){return a=ur(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Tv=new WeakMap;function Cr(i,a){if(typeof i=="object"&&i!==null){var l=Tv.get(i);return l!==void 0?l:(a={value:i,source:a,stack:lt(a)},Tv.set(i,a),a)}return{value:i,source:a,stack:lt(a)}}var ml=[],gl=0,pd=null,Yc=0,Nr=[],kr=0,Vs=null,bi=1,wi="";function Wi(i,a){ml[gl++]=Yc,ml[gl++]=pd,pd=i,Yc=a}function Sv(i,a,l){Nr[kr++]=bi,Nr[kr++]=wi,Nr[kr++]=Vs,Vs=i;var h=bi;i=wi;var p=32-Ot(h)-1;h&=~(1<<p),l+=1;var _=32-Ot(a)+p;if(30<_){var A=p-p%5;_=(h&(1<<A)-1).toString(32),h>>=A,p-=A,bi=1<<32-Ot(a)+p|l<<p|h,wi=_+i}else bi=1<<_|l<<p|h,wi=i}function Og(i){i.return!==null&&(Wi(i,1),Sv(i,1,0))}function Mg(i){for(;i===pd;)pd=ml[--gl],ml[gl]=null,Yc=ml[--gl],ml[gl]=null;for(;i===Vs;)Vs=Nr[--kr],Nr[kr]=null,wi=Nr[--kr],Nr[kr]=null,bi=Nr[--kr],Nr[kr]=null}function Av(i,a){Nr[kr++]=bi,Nr[kr++]=wi,Nr[kr++]=Vs,bi=a.id,wi=a.overflow,Vs=i}var Sn=null,Mt=null,st=!1,js=null,Dr=!1,Pg=Error(n(519));function Us(i){var a=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qc(Cr(a,i)),Pg}function Iv(i){var a=i.stateNode,l=i.type,h=i.memoizedProps;switch(a[en]=i,a[yn]=h,l){case"dialog":Je("cancel",a),Je("close",a);break;case"iframe":case"object":case"embed":Je("load",a);break;case"video":case"audio":for(l=0;l<yu.length;l++)Je(yu[l],a);break;case"source":Je("error",a);break;case"img":case"image":case"link":Je("error",a),Je("load",a);break;case"details":Je("toggle",a);break;case"input":Je("invalid",a),Qh(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Je("invalid",a);break;case"textarea":Je("invalid",a),Ns(a,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||q1(a.textContent,l)?(h.popover!=null&&(Je("beforetoggle",a),Je("toggle",a)),h.onScroll!=null&&Je("scroll",a),h.onScrollEnd!=null&&Je("scrollend",a),h.onClick!=null&&(a.onclick=Fr),a=!0):a=!1,a||Us(i,!0)}function Rv(i){for(Sn=i.return;Sn;)switch(Sn.tag){case 5:case 31:case 13:Dr=!1;return;case 27:case 3:Dr=!0;return;default:Sn=Sn.return}}function pl(i){if(i!==Sn)return!1;if(!st)return Rv(i),st=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Zp(i.type,i.memoizedProps)),l=!l),l&&Mt&&Us(i),Rv(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Mt=Z1(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Mt=Z1(i)}else a===27?(a=Mt,Zs(i.type)?(i=iy,iy=null,Mt=i):Mt=a):Mt=Sn?Mr(i.stateNode.nextSibling):null;return!0}function Xa(){Mt=Sn=null,st=!1}function Lg(){var i=js;return i!==null&&(nr===null?nr=i:nr.push.apply(nr,i),js=null),i}function Qc(i){js===null?js=[i]:js.push(i)}var Vg=F(null),Ja=null,Xi=null;function zs(i,a,l){ie(Vg,a._currentValue),a._currentValue=l}function Ji(i){i._currentValue=Vg.current,Y(Vg)}function jg(i,a,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),i===l)break;i=i.return}}function Ug(i,a,l,h){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var _=p.dependencies;if(_!==null){var A=p.child;_=_.firstContext;e:for(;_!==null;){var j=_;_=p;for(var Q=0;Q<a.length;Q++)if(j.context===a[Q]){_.lanes|=l,j=_.alternate,j!==null&&(j.lanes|=l),jg(_.return,l,i),h||(A=null);break e}_=j.next}}else if(p.tag===18){if(A=p.return,A===null)throw Error(n(341));A.lanes|=l,_=A.alternate,_!==null&&(_.lanes|=l),jg(A,l,i),A=null}else A=p.child;if(A!==null)A.return=p;else for(A=p;A!==null;){if(A===i){A=null;break}if(p=A.sibling,p!==null){p.return=A.return,A=p;break}A=A.return}p=A}}function yl(i,a,l,h){i=null;for(var p=a,_=!1;p!==null;){if(!_){if((p.flags&524288)!==0)_=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var A=p.alternate;if(A===null)throw Error(n(387));if(A=A.memoizedProps,A!==null){var j=p.type;cr(p.pendingProps.value,A.value)||(i!==null?i.push(j):i=[j])}}else if(p===Ee.current){if(A=p.alternate,A===null)throw Error(n(387));A.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(xu):i=[xu])}p=p.return}i!==null&&Ug(a,i,l,h),a.flags|=262144}function yd(i){for(i=i.firstContext;i!==null;){if(!cr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Za(i){Ja=i,Xi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function An(i){return Cv(Ja,i)}function _d(i,a){return Ja===null&&Za(i),Cv(i,a)}function Cv(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Xi===null){if(i===null)throw Error(n(308));Xi=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Xi=Xi.next=a;return l}var HR=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},qR=r.unstable_scheduleCallback,$R=r.unstable_NormalPriority,rn={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zg(){return{controller:new HR,data:new Map,refCount:0}}function Wc(i){i.refCount--,i.refCount===0&&qR($R,function(){i.controller.abort()})}var Xc=null,Bg=0,_l=0,vl=null;function GR(i,a){if(Xc===null){var l=Xc=[];Bg=0,_l=qp(),vl={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Bg++,a.then(Nv,Nv),a}function Nv(){if(--Bg===0&&Xc!==null){vl!==null&&(vl.status="fulfilled");var i=Xc;Xc=null,_l=0,vl=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function KR(i,a){var l=[],h={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return i.then(function(){h.status="fulfilled",h.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(h.status="rejected",h.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),h}var kv=M.S;M.S=function(i,a){m1=xe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&GR(i,a),kv!==null&&kv(i,a)};var eo=F(null);function Fg(){var i=eo.current;return i!==null?i:Nt.pooledCache}function vd(i,a){a===null?ie(eo,eo.current):ie(eo,a.pool)}function Dv(){var i=Fg();return i===null?null:{parent:rn._currentValue,pool:i}}var bl=Error(n(460)),Hg=Error(n(474)),bd=Error(n(542)),wd={then:function(){}};function Ov(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Mv(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Fr,Fr),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Lv(i),i;default:if(typeof a.status=="string")a.then(Fr,Fr);else{if(i=Nt,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=a,i.status="pending",i.then(function(h){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=h}},function(h){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Lv(i),i}throw no=a,bl}}function to(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(no=l,bl):l}}var no=null;function Pv(){if(no===null)throw Error(n(459));var i=no;return no=null,i}function Lv(i){if(i===bl||i===bd)throw Error(n(483))}var wl=null,Jc=0;function xd(i){var a=Jc;return Jc+=1,wl===null&&(wl=[]),Mv(wl,i,a)}function Zc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Ed(i,a){throw a.$$typeof===v?Error(n(525)):(i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Vv(i){function a(re,J){if(i){var oe=re.deletions;oe===null?(re.deletions=[J],re.flags|=16):oe.push(J)}}function l(re,J){if(!i)return null;for(;J!==null;)a(re,J),J=J.sibling;return null}function h(re){for(var J=new Map;re!==null;)re.key!==null?J.set(re.key,re):J.set(re.index,re),re=re.sibling;return J}function p(re,J){return re=Qi(re,J),re.index=0,re.sibling=null,re}function _(re,J,oe){return re.index=oe,i?(oe=re.alternate,oe!==null?(oe=oe.index,oe<J?(re.flags|=67108866,J):oe):(re.flags|=67108866,J)):(re.flags|=1048576,J)}function A(re){return i&&re.alternate===null&&(re.flags|=67108866),re}function j(re,J,oe,me){return J===null||J.tag!==6?(J=kg(oe,re.mode,me),J.return=re,J):(J=p(J,oe),J.return=re,J)}function Q(re,J,oe,me){var ke=oe.type;return ke===N?fe(re,J,oe.props.children,me,oe.key):J!==null&&(J.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===x&&to(ke)===J.type)?(J=p(J,oe.props),Zc(J,oe),J.return=re,J):(J=gd(oe.type,oe.key,oe.props,null,re.mode,me),Zc(J,oe),J.return=re,J)}function le(re,J,oe,me){return J===null||J.tag!==4||J.stateNode.containerInfo!==oe.containerInfo||J.stateNode.implementation!==oe.implementation?(J=Dg(oe,re.mode,me),J.return=re,J):(J=p(J,oe.children||[]),J.return=re,J)}function fe(re,J,oe,me,ke){return J===null||J.tag!==7?(J=Wa(oe,re.mode,me,ke),J.return=re,J):(J=p(J,oe),J.return=re,J)}function ge(re,J,oe){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=kg(""+J,re.mode,oe),J.return=re,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return oe=gd(J.type,J.key,J.props,null,re.mode,oe),Zc(oe,J),oe.return=re,oe;case T:return J=Dg(J,re.mode,oe),J.return=re,J;case x:return J=to(J),ge(re,J,oe)}if(ne(J)||L(J))return J=Wa(J,re.mode,oe,null),J.return=re,J;if(typeof J.then=="function")return ge(re,xd(J),oe);if(J.$$typeof===B)return ge(re,_d(re,J),oe);Ed(re,J)}return null}function ce(re,J,oe,me){var ke=J!==null?J.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return ke!==null?null:j(re,J,""+oe,me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:return oe.key===ke?Q(re,J,oe,me):null;case T:return oe.key===ke?le(re,J,oe,me):null;case x:return oe=to(oe),ce(re,J,oe,me)}if(ne(oe)||L(oe))return ke!==null?null:fe(re,J,oe,me,null);if(typeof oe.then=="function")return ce(re,J,xd(oe),me);if(oe.$$typeof===B)return ce(re,J,_d(re,oe),me);Ed(re,oe)}return null}function he(re,J,oe,me,ke){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return re=re.get(oe)||null,j(J,re,""+me,ke);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case w:return re=re.get(me.key===null?oe:me.key)||null,Q(J,re,me,ke);case T:return re=re.get(me.key===null?oe:me.key)||null,le(J,re,me,ke);case x:return me=to(me),he(re,J,oe,me,ke)}if(ne(me)||L(me))return re=re.get(oe)||null,fe(J,re,me,ke,null);if(typeof me.then=="function")return he(re,J,oe,xd(me),ke);if(me.$$typeof===B)return he(re,J,oe,_d(J,me),ke);Ed(J,me)}return null}function Se(re,J,oe,me){for(var ke=null,ct=null,Ce=J,Ke=J=0,et=null;Ce!==null&&Ke<oe.length;Ke++){Ce.index>Ke?(et=Ce,Ce=null):et=Ce.sibling;var ut=ce(re,Ce,oe[Ke],me);if(ut===null){Ce===null&&(Ce=et);break}i&&Ce&&ut.alternate===null&&a(re,Ce),J=_(ut,J,Ke),ct===null?ke=ut:ct.sibling=ut,ct=ut,Ce=et}if(Ke===oe.length)return l(re,Ce),st&&Wi(re,Ke),ke;if(Ce===null){for(;Ke<oe.length;Ke++)Ce=ge(re,oe[Ke],me),Ce!==null&&(J=_(Ce,J,Ke),ct===null?ke=Ce:ct.sibling=Ce,ct=Ce);return st&&Wi(re,Ke),ke}for(Ce=h(Ce);Ke<oe.length;Ke++)et=he(Ce,re,Ke,oe[Ke],me),et!==null&&(i&&et.alternate!==null&&Ce.delete(et.key===null?Ke:et.key),J=_(et,J,Ke),ct===null?ke=et:ct.sibling=et,ct=et);return i&&Ce.forEach(function(ia){return a(re,ia)}),st&&Wi(re,Ke),ke}function Me(re,J,oe,me){if(oe==null)throw Error(n(151));for(var ke=null,ct=null,Ce=J,Ke=J=0,et=null,ut=oe.next();Ce!==null&&!ut.done;Ke++,ut=oe.next()){Ce.index>Ke?(et=Ce,Ce=null):et=Ce.sibling;var ia=ce(re,Ce,ut.value,me);if(ia===null){Ce===null&&(Ce=et);break}i&&Ce&&ia.alternate===null&&a(re,Ce),J=_(ia,J,Ke),ct===null?ke=ia:ct.sibling=ia,ct=ia,Ce=et}if(ut.done)return l(re,Ce),st&&Wi(re,Ke),ke;if(Ce===null){for(;!ut.done;Ke++,ut=oe.next())ut=ge(re,ut.value,me),ut!==null&&(J=_(ut,J,Ke),ct===null?ke=ut:ct.sibling=ut,ct=ut);return st&&Wi(re,Ke),ke}for(Ce=h(Ce);!ut.done;Ke++,ut=oe.next())ut=he(Ce,re,Ke,ut.value,me),ut!==null&&(i&&ut.alternate!==null&&Ce.delete(ut.key===null?Ke:ut.key),J=_(ut,J,Ke),ct===null?ke=ut:ct.sibling=ut,ct=ut);return i&&Ce.forEach(function(iN){return a(re,iN)}),st&&Wi(re,Ke),ke}function Ct(re,J,oe,me){if(typeof oe=="object"&&oe!==null&&oe.type===N&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:e:{for(var ke=oe.key;J!==null;){if(J.key===ke){if(ke=oe.type,ke===N){if(J.tag===7){l(re,J.sibling),me=p(J,oe.props.children),me.return=re,re=me;break e}}else if(J.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===x&&to(ke)===J.type){l(re,J.sibling),me=p(J,oe.props),Zc(me,oe),me.return=re,re=me;break e}l(re,J);break}else a(re,J);J=J.sibling}oe.type===N?(me=Wa(oe.props.children,re.mode,me,oe.key),me.return=re,re=me):(me=gd(oe.type,oe.key,oe.props,null,re.mode,me),Zc(me,oe),me.return=re,re=me)}return A(re);case T:e:{for(ke=oe.key;J!==null;){if(J.key===ke)if(J.tag===4&&J.stateNode.containerInfo===oe.containerInfo&&J.stateNode.implementation===oe.implementation){l(re,J.sibling),me=p(J,oe.children||[]),me.return=re,re=me;break e}else{l(re,J);break}else a(re,J);J=J.sibling}me=Dg(oe,re.mode,me),me.return=re,re=me}return A(re);case x:return oe=to(oe),Ct(re,J,oe,me)}if(ne(oe))return Se(re,J,oe,me);if(L(oe)){if(ke=L(oe),typeof ke!="function")throw Error(n(150));return oe=ke.call(oe),Me(re,J,oe,me)}if(typeof oe.then=="function")return Ct(re,J,xd(oe),me);if(oe.$$typeof===B)return Ct(re,J,_d(re,oe),me);Ed(re,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,J!==null&&J.tag===6?(l(re,J.sibling),me=p(J,oe),me.return=re,re=me):(l(re,J),me=kg(oe,re.mode,me),me.return=re,re=me),A(re)):l(re,J)}return function(re,J,oe,me){try{Jc=0;var ke=Ct(re,J,oe,me);return wl=null,ke}catch(Ce){if(Ce===bl||Ce===bd)throw Ce;var ct=ur(29,Ce,null,re.mode);return ct.lanes=me,ct.return=re,ct}finally{}}}var ro=Vv(!0),jv=Vv(!1),Bs=!1;function qg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $g(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Fs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Hs(i,a,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(ft&2)!==0){var p=h.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),h.pending=a,a=md(i),wv(i,null,l),a}return fd(i,h,a,l),md(i)}function eu(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Ic(i,l)}}function Gg(i,a){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?p=_=A:_=_.next=A,l=l.next}while(l!==null);_===null?p=_=a:_=_.next=a}else p=_=a;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:_,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Kg=!1;function tu(){if(Kg){var i=vl;if(i!==null)throw i}}function nu(i,a,l,h){Kg=!1;var p=i.updateQueue;Bs=!1;var _=p.firstBaseUpdate,A=p.lastBaseUpdate,j=p.shared.pending;if(j!==null){p.shared.pending=null;var Q=j,le=Q.next;Q.next=null,A===null?_=le:A.next=le,A=Q;var fe=i.alternate;fe!==null&&(fe=fe.updateQueue,j=fe.lastBaseUpdate,j!==A&&(j===null?fe.firstBaseUpdate=le:j.next=le,fe.lastBaseUpdate=Q))}if(_!==null){var ge=p.baseState;A=0,fe=le=Q=null,j=_;do{var ce=j.lane&-536870913,he=ce!==j.lane;if(he?(Ze&ce)===ce:(h&ce)===ce){ce!==0&&ce===_l&&(Kg=!0),fe!==null&&(fe=fe.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Se=i,Me=j;ce=a;var Ct=l;switch(Me.tag){case 1:if(Se=Me.payload,typeof Se=="function"){ge=Se.call(Ct,ge,ce);break e}ge=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Me.payload,ce=typeof Se=="function"?Se.call(Ct,ge,ce):Se,ce==null)break e;ge=y({},ge,ce);break e;case 2:Bs=!0}}ce=j.callback,ce!==null&&(i.flags|=64,he&&(i.flags|=8192),he=p.callbacks,he===null?p.callbacks=[ce]:he.push(ce))}else he={lane:ce,tag:j.tag,payload:j.payload,callback:j.callback,next:null},fe===null?(le=fe=he,Q=ge):fe=fe.next=he,A|=ce;if(j=j.next,j===null){if(j=p.shared.pending,j===null)break;he=j,j=he.next,he.next=null,p.lastBaseUpdate=he,p.shared.pending=null}}while(!0);fe===null&&(Q=ge),p.baseState=Q,p.firstBaseUpdate=le,p.lastBaseUpdate=fe,_===null&&(p.shared.lanes=0),Ys|=A,i.lanes=A,i.memoizedState=ge}}function Uv(i,a){if(typeof i!="function")throw Error(n(191,i));i.call(a)}function zv(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Uv(l[i],a)}var xl=F(null),Td=F(0);function Bv(i,a){i=os,ie(Td,i),ie(xl,a),os=i|a.baseLanes}function Yg(){ie(Td,os),ie(xl,xl.current)}function Qg(){os=Td.current,Y(xl),Y(Td)}var hr=F(null),Or=null;function qs(i){var a=i.alternate;ie(Qt,Qt.current&1),ie(hr,i),Or===null&&(a===null||xl.current!==null||a.memoizedState!==null)&&(Or=i)}function Wg(i){ie(Qt,Qt.current),ie(hr,i),Or===null&&(Or=i)}function Fv(i){i.tag===22?(ie(Qt,Qt.current),ie(hr,i),Or===null&&(Or=i)):$s()}function $s(){ie(Qt,Qt.current),ie(hr,hr.current)}function dr(i){Y(hr),Or===i&&(Or=null),Y(Qt)}var Qt=F(0);function Sd(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||ny(l)||ry(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Zi=0,He=null,It=null,sn=null,Ad=!1,El=!1,io=!1,Id=0,ru=0,Tl=null,YR=0;function Ht(){throw Error(n(321))}function Xg(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!cr(i[l],a[l]))return!1;return!0}function Jg(i,a,l,h,p,_){return Zi=_,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,M.H=i===null||i.memoizedState===null?Sb:fp,io=!1,_=l(h,p),io=!1,El&&(_=qv(a,l,h,p)),Hv(i),_}function Hv(i){M.H=au;var a=It!==null&&It.next!==null;if(Zi=0,sn=It=He=null,Ad=!1,ru=0,Tl=null,a)throw Error(n(300));i===null||an||(i=i.dependencies,i!==null&&yd(i)&&(an=!0))}function qv(i,a,l,h){He=i;var p=0;do{if(El&&(Tl=null),ru=0,El=!1,25<=p)throw Error(n(301));if(p+=1,sn=It=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}M.H=Ab,_=a(l,h)}while(El);return _}function QR(){var i=M.H,a=i.useState()[0];return a=typeof a.then=="function"?iu(a):a,i=i.useState()[0],(It!==null?It.memoizedState:null)!==i&&(He.flags|=1024),a}function Zg(){var i=Id!==0;return Id=0,i}function ep(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function tp(i){if(Ad){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Ad=!1}Zi=0,sn=It=He=null,El=!1,ru=Id=0,Tl=null}function $n(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?He.memoizedState=sn=i:sn=sn.next=i,sn}function Wt(){if(It===null){var i=He.alternate;i=i!==null?i.memoizedState:null}else i=It.next;var a=sn===null?He.memoizedState:sn.next;if(a!==null)sn=a,It=i;else{if(i===null)throw He.alternate===null?Error(n(467)):Error(n(310));It=i,i={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},sn===null?He.memoizedState=sn=i:sn=sn.next=i}return sn}function Rd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function iu(i){var a=ru;return ru+=1,Tl===null&&(Tl=[]),i=Mv(Tl,i,a),a=He,(sn===null?a.memoizedState:sn.next)===null&&(a=a.alternate,M.H=a===null||a.memoizedState===null?Sb:fp),i}function Cd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return iu(i);if(i.$$typeof===B)return An(i)}throw Error(n(438,String(i)))}function np(i){var a=null,l=He.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=He.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Rd(),He.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),h=0;h<i;h++)l[h]=I;return a.index++,l}function es(i,a){return typeof a=="function"?a(i):a}function Nd(i){var a=Wt();return rp(a,It,i)}function rp(i,a,l){var h=i.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=l;var p=i.baseQueue,_=h.pending;if(_!==null){if(p!==null){var A=p.next;p.next=_.next,_.next=A}a.baseQueue=p=_,h.pending=null}if(_=i.baseState,p===null)i.memoizedState=_;else{a=p.next;var j=A=null,Q=null,le=a,fe=!1;do{var ge=le.lane&-536870913;if(ge!==le.lane?(Ze&ge)===ge:(Zi&ge)===ge){var ce=le.revertLane;if(ce===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ge===_l&&(fe=!0);else if((Zi&ce)===ce){le=le.next,ce===_l&&(fe=!0);continue}else ge={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(j=Q=ge,A=_):Q=Q.next=ge,He.lanes|=ce,Ys|=ce;ge=le.action,io&&l(_,ge),_=le.hasEagerState?le.eagerState:l(_,ge)}else ce={lane:ge,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(j=Q=ce,A=_):Q=Q.next=ce,He.lanes|=ge,Ys|=ge;le=le.next}while(le!==null&&le!==a);if(Q===null?A=_:Q.next=j,!cr(_,i.memoizedState)&&(an=!0,fe&&(l=vl,l!==null)))throw l;i.memoizedState=_,i.baseState=A,i.baseQueue=Q,h.lastRenderedState=_}return p===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function ip(i){var a=Wt(),l=a.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,_=a.memoizedState;if(p!==null){l.pending=null;var A=p=p.next;do _=i(_,A.action),A=A.next;while(A!==p);cr(_,a.memoizedState)||(an=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),l.lastRenderedState=_}return[_,h]}function $v(i,a,l){var h=He,p=Wt(),_=st;if(_){if(l===void 0)throw Error(n(407));l=l()}else l=a();var A=!cr((It||p).memoizedState,l);if(A&&(p.memoizedState=l,an=!0),p=p.queue,op(Yv.bind(null,h,p,i),[i]),p.getSnapshot!==a||A||sn!==null&&sn.memoizedState.tag&1){if(h.flags|=2048,Sl(9,{destroy:void 0},Kv.bind(null,h,p,l,a),null),Nt===null)throw Error(n(349));_||(Zi&127)!==0||Gv(h,a,l)}return l}function Gv(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=He.updateQueue,a===null?(a=Rd(),He.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function Kv(i,a,l,h){a.value=l,a.getSnapshot=h,Qv(a)&&Wv(i)}function Yv(i,a,l){return l(function(){Qv(a)&&Wv(i)})}function Qv(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!cr(i,l)}catch{return!0}}function Wv(i){var a=Qa(i,2);a!==null&&rr(a,i,2)}function sp(i){var a=$n();if(typeof i=="function"){var l=i;if(i=l(),io){Zt(!0);try{l()}finally{Zt(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:i},a}function Xv(i,a,l,h){return i.baseState=l,rp(i,It,typeof h=="function"?h:es)}function WR(i,a,l,h,p){if(Od(i))throw Error(n(485));if(i=a.action,i!==null){var _={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};M.T!==null?l(!0):_.isTransition=!1,h(_),l=a.pending,l===null?(_.next=a.pending=_,Jv(a,_)):(_.next=l.next,a.pending=l.next=_)}}function Jv(i,a){var l=a.action,h=a.payload,p=i.state;if(a.isTransition){var _=M.T,A={};M.T=A;try{var j=l(p,h),Q=M.S;Q!==null&&Q(A,j),Zv(i,a,j)}catch(le){ap(i,a,le)}finally{_!==null&&A.types!==null&&(_.types=A.types),M.T=_}}else try{_=l(p,h),Zv(i,a,_)}catch(le){ap(i,a,le)}}function Zv(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){eb(i,a,h)},function(h){return ap(i,a,h)}):eb(i,a,l)}function eb(i,a,l){a.status="fulfilled",a.value=l,tb(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,Jv(i,l)))}function ap(i,a,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,tb(a),a=a.next;while(a!==h)}i.action=null}function tb(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function nb(i,a){return a}function rb(i,a){if(st){var l=Nt.formState;if(l!==null){e:{var h=He;if(st){if(Mt){t:{for(var p=Mt,_=Dr;p.nodeType!==8;){if(!_){p=null;break t}if(p=Mr(p.nextSibling),p===null){p=null;break t}}_=p.data,p=_==="F!"||_==="F"?p:null}if(p){Mt=Mr(p.nextSibling),h=p.data==="F!";break e}}Us(h)}h=!1}h&&(a=l[0])}}return l=$n(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nb,lastRenderedState:a},l.queue=h,l=xb.bind(null,He,h),h.dispatch=l,h=sp(!1),_=dp.bind(null,He,!1,h.queue),h=$n(),p={state:a,dispatch:null,action:i,pending:null},h.queue=p,l=WR.bind(null,He,p,_,l),p.dispatch=l,h.memoizedState=i,[a,l,!1]}function ib(i){var a=Wt();return sb(a,It,i)}function sb(i,a,l){if(a=rp(i,a,nb)[0],i=Nd(es)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=iu(a)}catch(A){throw A===bl?bd:A}else h=a;a=Wt();var p=a.queue,_=p.dispatch;return l!==a.memoizedState&&(He.flags|=2048,Sl(9,{destroy:void 0},XR.bind(null,p,l),null)),[h,_,i]}function XR(i,a){i.action=a}function ab(i){var a=Wt(),l=It;if(l!==null)return sb(a,l,i);Wt(),a=a.memoizedState,l=Wt();var h=l.queue.dispatch;return l.memoizedState=i,[a,h,!1]}function Sl(i,a,l,h){return i={tag:i,create:l,deps:h,inst:a,next:null},a=He.updateQueue,a===null&&(a=Rd(),He.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,a.lastEffect=i),i}function ob(){return Wt().memoizedState}function kd(i,a,l,h){var p=$n();He.flags|=i,p.memoizedState=Sl(1|a,{destroy:void 0},l,h===void 0?null:h)}function Dd(i,a,l,h){var p=Wt();h=h===void 0?null:h;var _=p.memoizedState.inst;It!==null&&h!==null&&Xg(h,It.memoizedState.deps)?p.memoizedState=Sl(a,_,l,h):(He.flags|=i,p.memoizedState=Sl(1|a,_,l,h))}function lb(i,a){kd(8390656,8,i,a)}function op(i,a){Dd(2048,8,i,a)}function JR(i){He.flags|=4;var a=He.updateQueue;if(a===null)a=Rd(),He.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function cb(i){var a=Wt().memoizedState;return JR({ref:a,nextImpl:i}),function(){if((ft&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}function ub(i,a){return Dd(4,2,i,a)}function hb(i,a){return Dd(4,4,i,a)}function db(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function fb(i,a,l){l=l!=null?l.concat([i]):null,Dd(4,4,db.bind(null,a,i),l)}function lp(){}function mb(i,a){var l=Wt();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&Xg(a,h[1])?h[0]:(l.memoizedState=[i,a],i)}function gb(i,a){var l=Wt();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&Xg(a,h[1]))return h[0];if(h=i(),io){Zt(!0);try{i()}finally{Zt(!1)}}return l.memoizedState=[h,a],h}function cp(i,a,l){return l===void 0||(Zi&1073741824)!==0&&(Ze&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=p1(),He.lanes|=i,Ys|=i,l)}function pb(i,a,l,h){return cr(l,a)?l:xl.current!==null?(i=cp(i,l,h),cr(i,a)||(an=!0),i):(Zi&42)===0||(Zi&1073741824)!==0&&(Ze&261930)===0?(an=!0,i.memoizedState=l):(i=p1(),He.lanes|=i,Ys|=i,a)}function yb(i,a,l,h,p){var _=D.p;D.p=_!==0&&8>_?_:8;var A=M.T,j={};M.T=j,dp(i,!1,a,l);try{var Q=p(),le=M.S;if(le!==null&&le(j,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var fe=KR(Q,h);su(i,a,fe,gr(i))}else su(i,a,h,gr(i))}catch(ge){su(i,a,{then:function(){},status:"rejected",reason:ge},gr())}finally{D.p=_,A!==null&&j.types!==null&&(A.types=j.types),M.T=A}}function ZR(){}function up(i,a,l,h){if(i.tag!==5)throw Error(n(476));var p=_b(i).queue;yb(i,p,a,te,l===null?ZR:function(){return vb(i),l(h)})}function _b(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:te},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function vb(i){var a=_b(i);a.next===null&&(a=i.alternate.memoizedState),su(i,a.next.queue,{},gr())}function hp(){return An(xu)}function bb(){return Wt().memoizedState}function wb(){return Wt().memoizedState}function eC(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=gr();i=Fs(l);var h=Hs(a,i,l);h!==null&&(rr(h,a,l),eu(h,a,l)),a={cache:zg()},i.payload=a;return}a=a.return}}function tC(i,a,l){var h=gr();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Od(i)?Eb(a,l):(l=Cg(i,a,l,h),l!==null&&(rr(l,i,h),Tb(l,a,h)))}function xb(i,a,l){var h=gr();su(i,a,l,h)}function su(i,a,l,h){var p={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Od(i))Eb(a,p);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var A=a.lastRenderedState,j=_(A,l);if(p.hasEagerState=!0,p.eagerState=j,cr(j,A))return fd(i,a,p,0),Nt===null&&dd(),!1}catch{}finally{}if(l=Cg(i,a,p,h),l!==null)return rr(l,i,h),Tb(l,a,h),!0}return!1}function dp(i,a,l,h){if(h={lane:2,revertLane:qp(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Od(i)){if(a)throw Error(n(479))}else a=Cg(i,l,h,2),a!==null&&rr(a,i,2)}function Od(i){var a=i.alternate;return i===He||a!==null&&a===He}function Eb(i,a){El=Ad=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function Tb(i,a,l){if((l&4194048)!==0){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Ic(i,l)}}var au={readContext:An,use:Cd,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};au.useEffectEvent=Ht;var Sb={readContext:An,use:Cd,useCallback:function(i,a){return $n().memoizedState=[i,a===void 0?null:a],i},useContext:An,useEffect:lb,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,kd(4194308,4,db.bind(null,a,i),l)},useLayoutEffect:function(i,a){return kd(4194308,4,i,a)},useInsertionEffect:function(i,a){kd(4,2,i,a)},useMemo:function(i,a){var l=$n();a=a===void 0?null:a;var h=i();if(io){Zt(!0);try{i()}finally{Zt(!1)}}return l.memoizedState=[h,a],h},useReducer:function(i,a,l){var h=$n();if(l!==void 0){var p=l(a);if(io){Zt(!0);try{l(a)}finally{Zt(!1)}}}else p=a;return h.memoizedState=h.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},h.queue=i,i=i.dispatch=tC.bind(null,He,i),[h.memoizedState,i]},useRef:function(i){var a=$n();return i={current:i},a.memoizedState=i},useState:function(i){i=sp(i);var a=i.queue,l=xb.bind(null,He,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:lp,useDeferredValue:function(i,a){var l=$n();return cp(l,i,a)},useTransition:function(){var i=sp(!1);return i=yb.bind(null,He,i.queue,!0,!1),$n().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var h=He,p=$n();if(st){if(l===void 0)throw Error(n(407));l=l()}else{if(l=a(),Nt===null)throw Error(n(349));(Ze&127)!==0||Gv(h,a,l)}p.memoizedState=l;var _={value:l,getSnapshot:a};return p.queue=_,lb(Yv.bind(null,h,_,i),[i]),h.flags|=2048,Sl(9,{destroy:void 0},Kv.bind(null,h,_,l,a),null),l},useId:function(){var i=$n(),a=Nt.identifierPrefix;if(st){var l=wi,h=bi;l=(h&~(1<<32-Ot(h)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Id++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=YR++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:hp,useFormState:rb,useActionState:rb,useOptimistic:function(i){var a=$n();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=dp.bind(null,He,!0,l),l.dispatch=a,[i,a]},useMemoCache:np,useCacheRefresh:function(){return $n().memoizedState=eC.bind(null,He)},useEffectEvent:function(i){var a=$n(),l={impl:i};return a.memoizedState=l,function(){if((ft&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},fp={readContext:An,use:Cd,useCallback:mb,useContext:An,useEffect:op,useImperativeHandle:fb,useInsertionEffect:ub,useLayoutEffect:hb,useMemo:gb,useReducer:Nd,useRef:ob,useState:function(){return Nd(es)},useDebugValue:lp,useDeferredValue:function(i,a){var l=Wt();return pb(l,It.memoizedState,i,a)},useTransition:function(){var i=Nd(es)[0],a=Wt().memoizedState;return[typeof i=="boolean"?i:iu(i),a]},useSyncExternalStore:$v,useId:bb,useHostTransitionStatus:hp,useFormState:ib,useActionState:ib,useOptimistic:function(i,a){var l=Wt();return Xv(l,It,i,a)},useMemoCache:np,useCacheRefresh:wb};fp.useEffectEvent=cb;var Ab={readContext:An,use:Cd,useCallback:mb,useContext:An,useEffect:op,useImperativeHandle:fb,useInsertionEffect:ub,useLayoutEffect:hb,useMemo:gb,useReducer:ip,useRef:ob,useState:function(){return ip(es)},useDebugValue:lp,useDeferredValue:function(i,a){var l=Wt();return It===null?cp(l,i,a):pb(l,It.memoizedState,i,a)},useTransition:function(){var i=ip(es)[0],a=Wt().memoizedState;return[typeof i=="boolean"?i:iu(i),a]},useSyncExternalStore:$v,useId:bb,useHostTransitionStatus:hp,useFormState:ab,useActionState:ab,useOptimistic:function(i,a){var l=Wt();return It!==null?Xv(l,It,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:np,useCacheRefresh:wb};Ab.useEffectEvent=cb;function mp(i,a,l,h){a=i.memoizedState,l=l(h,a),l=l==null?a:y({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var gp={enqueueSetState:function(i,a,l){i=i._reactInternals;var h=gr(),p=Fs(h);p.payload=a,l!=null&&(p.callback=l),a=Hs(i,p,h),a!==null&&(rr(a,i,h),eu(a,i,h))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var h=gr(),p=Fs(h);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=Hs(i,p,h),a!==null&&(rr(a,i,h),eu(a,i,h))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=gr(),h=Fs(l);h.tag=2,a!=null&&(h.callback=a),a=Hs(i,h,l),a!==null&&(rr(a,i,l),eu(a,i,l))}};function Ib(i,a,l,h,p,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,_,A):a.prototype&&a.prototype.isPureReactComponent?!Gc(l,h)||!Gc(p,_):!0}function Rb(i,a,l,h){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==i&&gp.enqueueReplaceState(a,a.state,null)}function so(i,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(i=i.defaultProps){l===a&&(l=y({},l));for(var p in i)l[p]===void 0&&(l[p]=i[p])}return l}function Cb(i){hd(i)}function Nb(i){console.error(i)}function kb(i){hd(i)}function Md(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function Db(i,a,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function pp(i,a,l){return l=Fs(l),l.tag=3,l.payload={element:null},l.callback=function(){Md(i,a)},l}function Ob(i){return i=Fs(i),i.tag=3,i}function Mb(i,a,l,h){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var _=h.value;i.payload=function(){return p(_)},i.callback=function(){Db(a,l,h)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Db(a,l,h),typeof p!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var j=h.stack;this.componentDidCatch(h.value,{componentStack:j!==null?j:""})})}function nC(i,a,l,h,p){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&yl(a,l,p,!0),l=hr.current,l!==null){switch(l.tag){case 31:case 13:return Or===null?Gd():l.alternate===null&&qt===0&&(qt=3),l.flags&=-257,l.flags|=65536,l.lanes=p,h===wd?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),Bp(i,h,p)),!1;case 22:return l.flags|=65536,h===wd?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),Bp(i,h,p)),!1}throw Error(n(435,l.tag))}return Bp(i,h,p),Gd(),!1}if(st)return a=hr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,h!==Pg&&(i=Error(n(422),{cause:h}),Qc(Cr(i,l)))):(h!==Pg&&(a=Error(n(423),{cause:h}),Qc(Cr(a,l))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,h=Cr(h,l),p=pp(i.stateNode,h,p),Gg(i,p),qt!==4&&(qt=2)),!1;var _=Error(n(520),{cause:h});if(_=Cr(_,l),mu===null?mu=[_]:mu.push(_),qt!==4&&(qt=2),a===null)return!0;h=Cr(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=p&-p,l.lanes|=i,i=pp(l.stateNode,h,i),Gg(l,i),!1;case 1:if(a=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Qs===null||!Qs.has(_))))return l.flags|=65536,p&=-p,l.lanes|=p,p=Ob(p),Mb(p,i,l,h),Gg(l,p),!1}l=l.return}while(l!==null);return!1}var yp=Error(n(461)),an=!1;function In(i,a,l,h){a.child=i===null?jv(a,null,l,h):ro(a,i.child,l,h)}function Pb(i,a,l,h,p){l=l.render;var _=a.ref;if("ref"in h){var A={};for(var j in h)j!=="ref"&&(A[j]=h[j])}else A=h;return Za(a),h=Jg(i,a,l,A,_,p),j=Zg(),i!==null&&!an?(ep(i,a,p),ts(i,a,p)):(st&&j&&Og(a),a.flags|=1,In(i,a,h,p),a.child)}function Lb(i,a,l,h,p){if(i===null){var _=l.type;return typeof _=="function"&&!Ng(_)&&_.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=_,Vb(i,a,_,h,p)):(i=gd(l.type,null,h,a,a.mode,p),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,!Sp(i,p)){var A=_.memoizedProps;if(l=l.compare,l=l!==null?l:Gc,l(A,h)&&i.ref===a.ref)return ts(i,a,p)}return a.flags|=1,i=Qi(_,h),i.ref=a.ref,i.return=a,a.child=i}function Vb(i,a,l,h,p){if(i!==null){var _=i.memoizedProps;if(Gc(_,h)&&i.ref===a.ref)if(an=!1,a.pendingProps=h=_,Sp(i,p))(i.flags&131072)!==0&&(an=!0);else return a.lanes=i.lanes,ts(i,a,p)}return _p(i,a,l,h,p)}function jb(i,a,l,h){var p=h.children,_=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,i!==null){for(h=a.child=i.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;h=p&~_}else h=0,a.child=null;return Ub(i,a,_,l,h)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&vd(a,_!==null?_.cachePool:null),_!==null?Bv(a,_):Yg(),Fv(a);else return h=a.lanes=536870912,Ub(i,a,_!==null?_.baseLanes|l:l,l,h)}else _!==null?(vd(a,_.cachePool),Bv(a,_),$s(),a.memoizedState=null):(i!==null&&vd(a,null),Yg(),$s());return In(i,a,p,l),a.child}function ou(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Ub(i,a,l,h,p){var _=Fg();return _=_===null?null:{parent:rn._currentValue,pool:_},a.memoizedState={baseLanes:l,cachePool:_},i!==null&&vd(a,null),Yg(),Fv(a),i!==null&&yl(i,a,h,!0),a.childLanes=p,null}function Pd(i,a){return a=Vd({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function zb(i,a,l){return ro(a,i.child,null,l),i=Pd(a,a.pendingProps),i.flags|=2,dr(a),a.memoizedState=null,i}function rC(i,a,l){var h=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(st){if(h.mode==="hidden")return i=Pd(a,h),a.lanes=536870912,ou(null,i);if(Wg(a),(i=Mt)?(i=J1(i,Dr),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Vs!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},l=Ev(i),l.return=a,a.child=l,Sn=a,Mt=null)):i=null,i===null)throw Us(a);return a.lanes=536870912,null}return Pd(a,h)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(Wg(a),p)if(a.flags&256)a.flags&=-257,a=zb(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(n(558));else if(an||yl(i,a,l,!1),p=(l&i.childLanes)!==0,an||p){if(h=Nt,h!==null&&(A=Rc(h,l),A!==0&&A!==_.retryLane))throw _.retryLane=A,Qa(i,A),rr(h,i,A),yp;Gd(),a=zb(i,a,l)}else i=_.treeContext,Mt=Mr(A.nextSibling),Sn=a,st=!0,js=null,Dr=!1,i!==null&&Av(a,i),a=Pd(a,h),a.flags|=4096;return a}return i=Qi(i.child,{mode:h.mode,children:h.children}),i.ref=a.ref,a.child=i,i.return=a,i}function Ld(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function _p(i,a,l,h,p){return Za(a),l=Jg(i,a,l,h,void 0,p),h=Zg(),i!==null&&!an?(ep(i,a,p),ts(i,a,p)):(st&&h&&Og(a),a.flags|=1,In(i,a,l,p),a.child)}function Bb(i,a,l,h,p,_){return Za(a),a.updateQueue=null,l=qv(a,h,l,p),Hv(i),h=Zg(),i!==null&&!an?(ep(i,a,_),ts(i,a,_)):(st&&h&&Og(a),a.flags|=1,In(i,a,l,_),a.child)}function Fb(i,a,l,h,p){if(Za(a),a.stateNode===null){var _=fl,A=l.contextType;typeof A=="object"&&A!==null&&(_=An(A)),_=new l(h,_),a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=gp,a.stateNode=_,_._reactInternals=a,_=a.stateNode,_.props=h,_.state=a.memoizedState,_.refs={},qg(a),A=l.contextType,_.context=typeof A=="object"&&A!==null?An(A):fl,_.state=a.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(mp(a,l,A,h),_.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&gp.enqueueReplaceState(_,_.state,null),nu(a,h,_,p),tu(),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(i===null){_=a.stateNode;var j=a.memoizedProps,Q=so(l,j);_.props=Q;var le=_.context,fe=l.contextType;A=fl,typeof fe=="object"&&fe!==null&&(A=An(fe));var ge=l.getDerivedStateFromProps;fe=typeof ge=="function"||typeof _.getSnapshotBeforeUpdate=="function",j=a.pendingProps!==j,fe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(j||le!==A)&&Rb(a,_,h,A),Bs=!1;var ce=a.memoizedState;_.state=ce,nu(a,h,_,p),tu(),le=a.memoizedState,j||ce!==le||Bs?(typeof ge=="function"&&(mp(a,l,ge,h),le=a.memoizedState),(Q=Bs||Ib(a,l,Q,h,ce,le,A))?(fe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(a.flags|=4194308)):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=le),_.props=h,_.state=le,_.context=A,h=Q):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{_=a.stateNode,$g(i,a),A=a.memoizedProps,fe=so(l,A),_.props=fe,ge=a.pendingProps,ce=_.context,le=l.contextType,Q=fl,typeof le=="object"&&le!==null&&(Q=An(le)),j=l.getDerivedStateFromProps,(le=typeof j=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ge||ce!==Q)&&Rb(a,_,h,Q),Bs=!1,ce=a.memoizedState,_.state=ce,nu(a,h,_,p),tu();var he=a.memoizedState;A!==ge||ce!==he||Bs||i!==null&&i.dependencies!==null&&yd(i.dependencies)?(typeof j=="function"&&(mp(a,l,j,h),he=a.memoizedState),(fe=Bs||Ib(a,l,fe,h,ce,he,Q)||i!==null&&i.dependencies!==null&&yd(i.dependencies))?(le||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,he,Q),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,he,Q)),typeof _.componentDidUpdate=="function"&&(a.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=he),_.props=h,_.state=he,_.context=Q,h=fe):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=1024),h=!1)}return _=h,Ld(i,a),h=(a.flags&128)!==0,_||h?(_=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:_.render(),a.flags|=1,i!==null&&h?(a.child=ro(a,i.child,null,p),a.child=ro(a,null,l,p)):In(i,a,l,p),a.memoizedState=_.state,i=a.child):i=ts(i,a,p),i}function Hb(i,a,l,h){return Xa(),a.flags|=256,In(i,a,l,h),a.child}var vp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bp(i){return{baseLanes:i,cachePool:Dv()}}function wp(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=mr),i}function qb(i,a,l){var h=a.pendingProps,p=!1,_=(a.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(Qt.current&2)!==0),A&&(p=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,i===null){if(st){if(p?qs(a):$s(),(i=Mt)?(i=J1(i,Dr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Vs!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},l=Ev(i),l.return=a,a.child=l,Sn=a,Mt=null)):i=null,i===null)throw Us(a);return ry(i)?a.lanes=32:a.lanes=536870912,null}var j=h.children;return h=h.fallback,p?($s(),p=a.mode,j=Vd({mode:"hidden",children:j},p),h=Wa(h,p,l,null),j.return=a,h.return=a,j.sibling=h,a.child=j,h=a.child,h.memoizedState=bp(l),h.childLanes=wp(i,A,l),a.memoizedState=vp,ou(null,h)):(qs(a),xp(a,j))}var Q=i.memoizedState;if(Q!==null&&(j=Q.dehydrated,j!==null)){if(_)a.flags&256?(qs(a),a.flags&=-257,a=Ep(i,a,l)):a.memoizedState!==null?($s(),a.child=i.child,a.flags|=128,a=null):($s(),j=h.fallback,p=a.mode,h=Vd({mode:"visible",children:h.children},p),j=Wa(j,p,l,null),j.flags|=2,h.return=a,j.return=a,h.sibling=j,a.child=h,ro(a,i.child,null,l),h=a.child,h.memoizedState=bp(l),h.childLanes=wp(i,A,l),a.memoizedState=vp,a=ou(null,h));else if(qs(a),ry(j)){if(A=j.nextSibling&&j.nextSibling.dataset,A)var le=A.dgst;A=le,h=Error(n(419)),h.stack="",h.digest=A,Qc({value:h,source:null,stack:null}),a=Ep(i,a,l)}else if(an||yl(i,a,l,!1),A=(l&i.childLanes)!==0,an||A){if(A=Nt,A!==null&&(h=Rc(A,l),h!==0&&h!==Q.retryLane))throw Q.retryLane=h,Qa(i,h),rr(A,i,h),yp;ny(j)||Gd(),a=Ep(i,a,l)}else ny(j)?(a.flags|=192,a.child=i.child,a=null):(i=Q.treeContext,Mt=Mr(j.nextSibling),Sn=a,st=!0,js=null,Dr=!1,i!==null&&Av(a,i),a=xp(a,h.children),a.flags|=4096);return a}return p?($s(),j=h.fallback,p=a.mode,Q=i.child,le=Q.sibling,h=Qi(Q,{mode:"hidden",children:h.children}),h.subtreeFlags=Q.subtreeFlags&65011712,le!==null?j=Qi(le,j):(j=Wa(j,p,l,null),j.flags|=2),j.return=a,h.return=a,h.sibling=j,a.child=h,ou(null,h),h=a.child,j=i.child.memoizedState,j===null?j=bp(l):(p=j.cachePool,p!==null?(Q=rn._currentValue,p=p.parent!==Q?{parent:Q,pool:Q}:p):p=Dv(),j={baseLanes:j.baseLanes|l,cachePool:p}),h.memoizedState=j,h.childLanes=wp(i,A,l),a.memoizedState=vp,ou(i.child,h)):(qs(a),l=i.child,i=l.sibling,l=Qi(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,i!==null&&(A=a.deletions,A===null?(a.deletions=[i],a.flags|=16):A.push(i)),a.child=l,a.memoizedState=null,l)}function xp(i,a){return a=Vd({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Vd(i,a){return i=ur(22,i,null,a),i.lanes=0,i}function Ep(i,a,l){return ro(a,i.child,null,l),i=xp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function $b(i,a,l){i.lanes|=a;var h=i.alternate;h!==null&&(h.lanes|=a),jg(i.return,a,l)}function Tp(i,a,l,h,p,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p,treeForkCount:_}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=h,A.tail=l,A.tailMode=p,A.treeForkCount=_)}function Gb(i,a,l){var h=a.pendingProps,p=h.revealOrder,_=h.tail;h=h.children;var A=Qt.current,j=(A&2)!==0;if(j?(A=A&1|2,a.flags|=128):A&=1,ie(Qt,A),In(i,a,h,l),h=st?Yc:0,!j&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&$b(i,l,a);else if(i.tag===19)$b(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(l=a.child,p=null;l!==null;)i=l.alternate,i!==null&&Sd(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),Tp(a,!1,p,l,_,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(i=p.alternate,i!==null&&Sd(i)===null){a.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Tp(a,!0,l,null,_,h);break;case"together":Tp(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function ts(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),Ys|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(yl(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,l=Qi(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Qi(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function Sp(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&yd(i)))}function iC(i,a,l){switch(a.tag){case 3:Ie(a,a.stateNode.containerInfo),zs(a,rn,i.memoizedState.cache),Xa();break;case 27:case 5:$e(a);break;case 4:Ie(a,a.stateNode.containerInfo);break;case 10:zs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Wg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(qs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?qb(i,a,l):(qs(a),i=ts(i,a,l),i!==null?i.sibling:null);qs(a);break;case 19:var p=(i.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(yl(i,a,l,!1),h=(l&a.childLanes)!==0),p){if(h)return Gb(i,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ie(Qt,Qt.current),h)break;return null;case 22:return a.lanes=0,jb(i,a,l,a.pendingProps);case 24:zs(a,rn,i.memoizedState.cache)}return ts(i,a,l)}function Kb(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)an=!0;else{if(!Sp(i,l)&&(a.flags&128)===0)return an=!1,iC(i,a,l);an=(i.flags&131072)!==0}else an=!1,st&&(a.flags&1048576)!==0&&Sv(a,Yc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(i=to(a.elementType),a.type=i,typeof i=="function")Ng(i)?(h=so(i,h),a.tag=1,a=Fb(null,a,i,h,l)):(a.tag=0,a=_p(null,a,i,h,l));else{if(i!=null){var p=i.$$typeof;if(p===q){a.tag=11,a=Pb(null,a,i,h,l);break e}else if(p===O){a.tag=14,a=Lb(null,a,i,h,l);break e}}throw a=G(i)||i,Error(n(306,a,""))}}return a;case 0:return _p(i,a,a.type,a.pendingProps,l);case 1:return h=a.type,p=so(h,a.pendingProps),Fb(i,a,h,p,l);case 3:e:{if(Ie(a,a.stateNode.containerInfo),i===null)throw Error(n(387));h=a.pendingProps;var _=a.memoizedState;p=_.element,$g(i,a),nu(a,h,null,l);var A=a.memoizedState;if(h=A.cache,zs(a,rn,h),h!==_.cache&&Ug(a,[rn],l,!0),tu(),h=A.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){a=Hb(i,a,h,l);break e}else if(h!==p){p=Cr(Error(n(424)),a),Qc(p),a=Hb(i,a,h,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Mt=Mr(i.firstChild),Sn=a,st=!0,js=null,Dr=!0,l=jv(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Xa(),h===p){a=ts(i,a,l);break e}In(i,a,h,l)}a=a.child}return a;case 26:return Ld(i,a),i===null?(l=iw(a.type,null,a.pendingProps,null))?a.memoizedState=l:st||(l=a.type,i=a.pendingProps,h=Zd(pe.current).createElement(l),h[en]=a,h[yn]=i,Rn(h,l,i),tn(h),a.stateNode=h):a.memoizedState=iw(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return $e(a),i===null&&st&&(h=a.stateNode=tw(a.type,a.pendingProps,pe.current),Sn=a,Dr=!0,p=Mt,Zs(a.type)?(iy=p,Mt=Mr(h.firstChild)):Mt=p),In(i,a,a.pendingProps.children,l),Ld(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&st&&((p=h=Mt)&&(h=MC(h,a.type,a.pendingProps,Dr),h!==null?(a.stateNode=h,Sn=a,Mt=Mr(h.firstChild),Dr=!1,p=!0):p=!1),p||Us(a)),$e(a),p=a.type,_=a.pendingProps,A=i!==null?i.memoizedProps:null,h=_.children,Zp(p,_)?h=null:A!==null&&Zp(p,A)&&(a.flags|=32),a.memoizedState!==null&&(p=Jg(i,a,QR,null,null,l),xu._currentValue=p),Ld(i,a),In(i,a,h,l),a.child;case 6:return i===null&&st&&((i=l=Mt)&&(l=PC(l,a.pendingProps,Dr),l!==null?(a.stateNode=l,Sn=a,Mt=null,i=!0):i=!1),i||Us(a)),null;case 13:return qb(i,a,l);case 4:return Ie(a,a.stateNode.containerInfo),h=a.pendingProps,i===null?a.child=ro(a,null,h,l):In(i,a,h,l),a.child;case 11:return Pb(i,a,a.type,a.pendingProps,l);case 7:return In(i,a,a.pendingProps,l),a.child;case 8:return In(i,a,a.pendingProps.children,l),a.child;case 12:return In(i,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,zs(a,a.type,h.value),In(i,a,h.children,l),a.child;case 9:return p=a.type._context,h=a.pendingProps.children,Za(a),p=An(p),h=h(p),a.flags|=1,In(i,a,h,l),a.child;case 14:return Lb(i,a,a.type,a.pendingProps,l);case 15:return Vb(i,a,a.type,a.pendingProps,l);case 19:return Gb(i,a,l);case 31:return rC(i,a,l);case 22:return jb(i,a,l,a.pendingProps);case 24:return Za(a),h=An(rn),i===null?(p=Fg(),p===null&&(p=Nt,_=zg(),p.pooledCache=_,_.refCount++,_!==null&&(p.pooledCacheLanes|=l),p=_),a.memoizedState={parent:h,cache:p},qg(a),zs(a,rn,p)):((i.lanes&l)!==0&&($g(i,a),nu(a,null,null,l),tu()),p=i.memoizedState,_=a.memoizedState,p.parent!==h?(p={parent:h,cache:h},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),zs(a,rn,h)):(h=_.cache,zs(a,rn,h),h!==p.cache&&Ug(a,[rn],l,!0))),In(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function ns(i){i.flags|=4}function Ap(i,a,l,h,p){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(b1())i.flags|=8192;else throw no=wd,Hg}else i.flags&=-16777217}function Yb(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!cw(a))if(b1())i.flags|=8192;else throw no=wd,Hg}function jd(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Er():536870912,i.lanes|=a,Cl|=a)}function lu(i,a){if(!st)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Pt(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(a)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&65011712,h|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,a}function sC(i,a,l){var h=a.pendingProps;switch(Mg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(a),null;case 1:return Pt(a),null;case 3:return l=a.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Ji(rn),Re(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(pl(a)?ns(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Lg())),Pt(a),null;case 26:var p=a.type,_=a.memoizedState;return i===null?(ns(a),_!==null?(Pt(a),Yb(a,_)):(Pt(a),Ap(a,p,null,h,l))):_?_!==i.memoizedState?(ns(a),Pt(a),Yb(a,_)):(Pt(a),a.flags&=-16777217):(i=i.memoizedProps,i!==h&&ns(a),Pt(a),Ap(a,p,i,h,l)),null;case 27:if(Qe(a),l=pe.current,p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return Pt(a),null}i=Z.current,pl(a)?Iv(a):(i=tw(p,h,l),a.stateNode=i,ns(a))}return Pt(a),null;case 5:if(Qe(a),p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return Pt(a),null}if(_=Z.current,pl(a))Iv(a);else{var A=Zd(pe.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof h.is=="string"?A.createElement("select",{is:h.is}):A.createElement("select"),h.multiple?_.multiple=!0:h.size&&(_.size=h.size);break;default:_=typeof h.is=="string"?A.createElement(p,{is:h.is}):A.createElement(p)}}_[en]=a,_[yn]=h;e:for(A=a.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break e;for(;A.sibling===null;){if(A.return===null||A.return===a)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}a.stateNode=_;e:switch(Rn(_,p,h),p){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&ns(a)}}return Pt(a),Ap(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(n(166));if(i=pe.current,pl(a)){if(i=a.stateNode,l=a.memoizedProps,h=null,p=Sn,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}i[en]=a,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||q1(i.nodeValue,l)),i||Us(a,!0)}else i=Zd(i).createTextNode(h),i[en]=a,a.stateNode=i}return Pt(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(h=pl(a),l!==null){if(i===null){if(!h)throw Error(n(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[en]=a}else Xa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pt(a),i=!1}else l=Lg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(dr(a),a):(dr(a),null);if((a.flags&128)!==0)throw Error(n(558))}return Pt(a),null;case 13:if(h=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=pl(a),h!==null&&h.dehydrated!==null){if(i===null){if(!p)throw Error(n(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[en]=a}else Xa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pt(a),p=!1}else p=Lg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(dr(a),a):(dr(a),null)}return dr(a),(a.flags&128)!==0?(a.lanes=l,a):(l=h!==null,i=i!==null&&i.memoizedState!==null,l&&(h=a.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool),_=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),_!==p&&(h.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),jd(a,a.updateQueue),Pt(a),null);case 4:return Re(),i===null&&Yp(a.stateNode.containerInfo),Pt(a),null;case 10:return Ji(a.type),Pt(a),null;case 19:if(Y(Qt),h=a.memoizedState,h===null)return Pt(a),null;if(p=(a.flags&128)!==0,_=h.rendering,_===null)if(p)lu(h,!1);else{if(qt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(_=Sd(i),_!==null){for(a.flags|=128,lu(h,!1),i=_.updateQueue,a.updateQueue=i,jd(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)xv(l,i),l=l.sibling;return ie(Qt,Qt.current&1|2),st&&Wi(a,h.treeForkCount),a.child}i=i.sibling}h.tail!==null&&xe()>Hd&&(a.flags|=128,p=!0,lu(h,!1),a.lanes=4194304)}else{if(!p)if(i=Sd(_),i!==null){if(a.flags|=128,p=!0,i=i.updateQueue,a.updateQueue=i,jd(a,i),lu(h,!0),h.tail===null&&h.tailMode==="hidden"&&!_.alternate&&!st)return Pt(a),null}else 2*xe()-h.renderingStartTime>Hd&&l!==536870912&&(a.flags|=128,p=!0,lu(h,!1),a.lanes=4194304);h.isBackwards?(_.sibling=a.child,a.child=_):(i=h.last,i!==null?i.sibling=_:a.child=_,h.last=_)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=xe(),i.sibling=null,l=Qt.current,ie(Qt,p?l&1|2:l&1),st&&Wi(a,h.treeForkCount),i):(Pt(a),null);case 22:case 23:return dr(a),Qg(),h=a.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(Pt(a),a.subtreeFlags&6&&(a.flags|=8192)):Pt(a),l=a.updateQueue,l!==null&&jd(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),i!==null&&Y(eo),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ji(rn),Pt(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function aC(i,a){switch(Mg(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ji(rn),Re(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Qe(a),null;case 31:if(a.memoizedState!==null){if(dr(a),a.alternate===null)throw Error(n(340));Xa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(dr(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Xa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Y(Qt),null;case 4:return Re(),null;case 10:return Ji(a.type),null;case 22:case 23:return dr(a),Qg(),i!==null&&Y(eo),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Ji(rn),null;case 25:return null;default:return null}}function Qb(i,a){switch(Mg(a),a.tag){case 3:Ji(rn),Re();break;case 26:case 27:case 5:Qe(a);break;case 4:Re();break;case 31:a.memoizedState!==null&&dr(a);break;case 13:dr(a);break;case 19:Y(Qt);break;case 10:Ji(a.type);break;case 22:case 23:dr(a),Qg(),i!==null&&Y(eo);break;case 24:Ji(rn)}}function cu(i,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var p=h.next;l=p;do{if((l.tag&i)===i){h=void 0;var _=l.create,A=l.inst;h=_(),A.destroy=h}l=l.next}while(l!==p)}}catch(j){wt(a,a.return,j)}}function Gs(i,a,l){try{var h=a.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var _=p.next;h=_;do{if((h.tag&i)===i){var A=h.inst,j=A.destroy;if(j!==void 0){A.destroy=void 0,p=a;var Q=l,le=j;try{le()}catch(fe){wt(p,Q,fe)}}}h=h.next}while(h!==_)}}catch(fe){wt(a,a.return,fe)}}function Wb(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{zv(a,l)}catch(h){wt(i,i.return,h)}}}function Xb(i,a,l){l.props=so(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){wt(i,a,h)}}function uu(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(p){wt(i,a,p)}}function xi(i,a){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(p){wt(i,a,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){wt(i,a,p)}else l.current=null}function Jb(i){var a=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(p){wt(i,i.return,p)}}function Ip(i,a,l){try{var h=i.stateNode;RC(h,i.type,l,a),h[yn]=a}catch(p){wt(i,i.return,p)}}function Zb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Zs(i.type)||i.tag===4}function Rp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Zb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Zs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Cp(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Fr));else if(h!==4&&(h===27&&Zs(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(Cp(i,a,l),i=i.sibling;i!==null;)Cp(i,a,l),i=i.sibling}function Ud(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(h!==4&&(h===27&&Zs(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Ud(i,a,l),i=i.sibling;i!==null;)Ud(i,a,l),i=i.sibling}function e1(i){var a=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Rn(a,h,l),a[en]=i,a[yn]=l}catch(_){wt(i,i.return,_)}}var rs=!1,on=!1,Np=!1,t1=typeof WeakSet=="function"?WeakSet:Set,vn=null;function oC(i,a){if(i=i.containerInfo,Xp=of,i=fv(i),Eg(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var A=0,j=-1,Q=-1,le=0,fe=0,ge=i,ce=null;t:for(;;){for(var he;ge!==l||p!==0&&ge.nodeType!==3||(j=A+p),ge!==_||h!==0&&ge.nodeType!==3||(Q=A+h),ge.nodeType===3&&(A+=ge.nodeValue.length),(he=ge.firstChild)!==null;)ce=ge,ge=he;for(;;){if(ge===i)break t;if(ce===l&&++le===p&&(j=A),ce===_&&++fe===h&&(Q=A),(he=ge.nextSibling)!==null)break;ge=ce,ce=ge.parentNode}ge=he}l=j===-1||Q===-1?null:{start:j,end:Q}}else l=null}l=l||{start:0,end:0}}else l=null;for(Jp={focusedElem:i,selectionRange:l},of=!1,vn=a;vn!==null;)if(a=vn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,vn=i;else for(;vn!==null;){switch(a=vn,_=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)p=i[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,l=a,p=_.memoizedProps,_=_.memoizedState,h=l.stateNode;try{var Se=so(l.type,p);i=h.getSnapshotBeforeUpdate(Se,_),h.__reactInternalSnapshotBeforeUpdate=i}catch(Me){wt(l,l.return,Me)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)ty(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":ty(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=a.sibling,i!==null){i.return=a.return,vn=i;break}vn=a.return}}function n1(i,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:ss(i,l),h&4&&cu(5,l);break;case 1:if(ss(i,l),h&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(A){wt(l,l.return,A)}else{var p=so(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(p,a,i.__reactInternalSnapshotBeforeUpdate)}catch(A){wt(l,l.return,A)}}h&64&&Wb(l),h&512&&uu(l,l.return);break;case 3:if(ss(i,l),h&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{zv(i,a)}catch(A){wt(l,l.return,A)}}break;case 27:a===null&&h&4&&e1(l);case 26:case 5:ss(i,l),a===null&&h&4&&Jb(l),h&512&&uu(l,l.return);break;case 12:ss(i,l);break;case 31:ss(i,l),h&4&&s1(i,l);break;case 13:ss(i,l),h&4&&a1(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=pC.bind(null,l),LC(i,l))));break;case 22:if(h=l.memoizedState!==null||rs,!h){a=a!==null&&a.memoizedState!==null||on,p=rs;var _=on;rs=h,(on=a)&&!_?as(i,l,(l.subtreeFlags&8772)!==0):ss(i,l),rs=p,on=_}break;case 30:break;default:ss(i,l)}}function r1(i){var a=i.alternate;a!==null&&(i.alternate=null,r1(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Zo(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Vt=null,Zn=!1;function is(i,a,l){for(l=l.child;l!==null;)i1(i,a,l),l=l.sibling}function i1(i,a,l){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(Kt,l)}catch{}switch(l.tag){case 26:on||xi(l,a),is(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:on||xi(l,a);var h=Vt,p=Zn;Zs(l.type)&&(Vt=l.stateNode,Zn=!1),is(i,a,l),vu(l.stateNode),Vt=h,Zn=p;break;case 5:on||xi(l,a);case 6:if(h=Vt,p=Zn,Vt=null,is(i,a,l),Vt=h,Zn=p,Vt!==null)if(Zn)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(l.stateNode)}catch(_){wt(l,a,_)}else try{Vt.removeChild(l.stateNode)}catch(_){wt(l,a,_)}break;case 18:Vt!==null&&(Zn?(i=Vt,W1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Vl(i)):W1(Vt,l.stateNode));break;case 4:h=Vt,p=Zn,Vt=l.stateNode.containerInfo,Zn=!0,is(i,a,l),Vt=h,Zn=p;break;case 0:case 11:case 14:case 15:Gs(2,l,a),on||Gs(4,l,a),is(i,a,l);break;case 1:on||(xi(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&Xb(l,a,h)),is(i,a,l);break;case 21:is(i,a,l);break;case 22:on=(h=on)||l.memoizedState!==null,is(i,a,l),on=h;break;default:is(i,a,l)}}function s1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Vl(i)}catch(l){wt(a,a.return,l)}}}function a1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Vl(i)}catch(l){wt(a,a.return,l)}}function lC(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new t1),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new t1),a;default:throw Error(n(435,i.tag))}}function zd(i,a){var l=lC(i);a.forEach(function(h){if(!l.has(h)){l.add(h);var p=yC.bind(null,i,h);h.then(p,p)}})}function er(i,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h],_=i,A=a,j=A;e:for(;j!==null;){switch(j.tag){case 27:if(Zs(j.type)){Vt=j.stateNode,Zn=!1;break e}break;case 5:Vt=j.stateNode,Zn=!1;break e;case 3:case 4:Vt=j.stateNode.containerInfo,Zn=!0;break e}j=j.return}if(Vt===null)throw Error(n(160));i1(_,A,p),Vt=null,Zn=!1,_=p.alternate,_!==null&&(_.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)o1(a,i),a=a.sibling}var Yr=null;function o1(i,a){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:er(a,i),tr(i),h&4&&(Gs(3,i,i.return),cu(3,i),Gs(5,i,i.return));break;case 1:er(a,i),tr(i),h&512&&(on||l===null||xi(l,l.return)),h&64&&rs&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var p=Yr;if(er(a,i),tr(i),h&512&&(on||l===null||xi(l,l.return)),h&4){var _=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,p=p.ownerDocument||p;t:switch(h){case"title":_=p.getElementsByTagName("title")[0],(!_||_[li]||_[en]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=p.createElement(h),p.head.insertBefore(_,p.querySelector("head > title"))),Rn(_,h,l),_[en]=i,tn(_),h=_;break e;case"link":var A=ow("link","href",p).get(h+(l.href||""));if(A){for(var j=0;j<A.length;j++)if(_=A[j],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(j,1);break t}}_=p.createElement(h),Rn(_,h,l),p.head.appendChild(_);break;case"meta":if(A=ow("meta","content",p).get(h+(l.content||""))){for(j=0;j<A.length;j++)if(_=A[j],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(j,1);break t}}_=p.createElement(h),Rn(_,h,l),p.head.appendChild(_);break;default:throw Error(n(468,h))}_[en]=i,tn(_),h=_}i.stateNode=h}else lw(p,i.type,i.stateNode);else i.stateNode=aw(p,h,i.memoizedProps);else _!==h?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,h===null?lw(p,i.type,i.stateNode):aw(p,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Ip(i,i.memoizedProps,l.memoizedProps)}break;case 27:er(a,i),tr(i),h&512&&(on||l===null||xi(l,l.return)),l!==null&&h&4&&Ip(i,i.memoizedProps,l.memoizedProps);break;case 5:if(er(a,i),tr(i),h&512&&(on||l===null||xi(l,l.return)),i.flags&32){p=i.stateNode;try{Jn(p,"")}catch(Se){wt(i,i.return,Se)}}h&4&&i.stateNode!=null&&(p=i.memoizedProps,Ip(i,p,l!==null?l.memoizedProps:p)),h&1024&&(Np=!0);break;case 6:if(er(a,i),tr(i),h&4){if(i.stateNode===null)throw Error(n(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(Se){wt(i,i.return,Se)}}break;case 3:if(nf=null,p=Yr,Yr=ef(a.containerInfo),er(a,i),Yr=p,tr(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Vl(a.containerInfo)}catch(Se){wt(i,i.return,Se)}Np&&(Np=!1,l1(i));break;case 4:h=Yr,Yr=ef(i.stateNode.containerInfo),er(a,i),tr(i),Yr=h;break;case 12:er(a,i),tr(i);break;case 31:er(a,i),tr(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,zd(i,h)));break;case 13:er(a,i),tr(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Fd=xe()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,zd(i,h)));break;case 22:p=i.memoizedState!==null;var Q=l!==null&&l.memoizedState!==null,le=rs,fe=on;if(rs=le||p,on=fe||Q,er(a,i),on=fe,rs=le,tr(i),h&8192)e:for(a=i.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||Q||rs||on||ao(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){Q=l=a;try{if(_=Q.stateNode,p)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{j=Q.stateNode;var ge=Q.memoizedProps.style,ce=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;j.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Se){wt(Q,Q.return,Se)}}}else if(a.tag===6){if(l===null){Q=a;try{Q.stateNode.nodeValue=p?"":Q.memoizedProps}catch(Se){wt(Q,Q.return,Se)}}}else if(a.tag===18){if(l===null){Q=a;try{var he=Q.stateNode;p?X1(he,!0):X1(Q.stateNode,!1)}catch(Se){wt(Q,Q.return,Se)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,zd(i,l))));break;case 19:er(a,i),tr(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,zd(i,h)));break;case 30:break;case 21:break;default:er(a,i),tr(i)}}function tr(i){var a=i.flags;if(a&2){try{for(var l,h=i.return;h!==null;){if(Zb(h)){l=h;break}h=h.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var p=l.stateNode,_=Rp(i);Ud(i,_,p);break;case 5:var A=l.stateNode;l.flags&32&&(Jn(A,""),l.flags&=-33);var j=Rp(i);Ud(i,j,A);break;case 3:case 4:var Q=l.stateNode.containerInfo,le=Rp(i);Cp(i,le,Q);break;default:throw Error(n(161))}}catch(fe){wt(i,i.return,fe)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function l1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;l1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function ss(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)n1(i,a.alternate,a),a=a.sibling}function ao(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Gs(4,a,a.return),ao(a);break;case 1:xi(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Xb(a,a.return,l),ao(a);break;case 27:vu(a.stateNode);case 26:case 5:xi(a,a.return),ao(a);break;case 22:a.memoizedState===null&&ao(a);break;case 30:ao(a);break;default:ao(a)}i=i.sibling}}function as(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,p=i,_=a,A=_.flags;switch(_.tag){case 0:case 11:case 15:as(p,_,l),cu(4,_);break;case 1:if(as(p,_,l),h=_,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(le){wt(h,h.return,le)}if(h=_,p=h.updateQueue,p!==null){var j=h.stateNode;try{var Q=p.shared.hiddenCallbacks;if(Q!==null)for(p.shared.hiddenCallbacks=null,p=0;p<Q.length;p++)Uv(Q[p],j)}catch(le){wt(h,h.return,le)}}l&&A&64&&Wb(_),uu(_,_.return);break;case 27:e1(_);case 26:case 5:as(p,_,l),l&&h===null&&A&4&&Jb(_),uu(_,_.return);break;case 12:as(p,_,l);break;case 31:as(p,_,l),l&&A&4&&s1(p,_);break;case 13:as(p,_,l),l&&A&4&&a1(p,_);break;case 22:_.memoizedState===null&&as(p,_,l),uu(_,_.return);break;case 30:break;default:as(p,_,l)}a=a.sibling}}function kp(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Wc(l))}function Dp(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Wc(i))}function Qr(i,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)c1(i,a,l,h),a=a.sibling}function c1(i,a,l,h){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Qr(i,a,l,h),p&2048&&cu(9,a);break;case 1:Qr(i,a,l,h);break;case 3:Qr(i,a,l,h),p&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Wc(i)));break;case 12:if(p&2048){Qr(i,a,l,h),i=a.stateNode;try{var _=a.memoizedProps,A=_.id,j=_.onPostCommit;typeof j=="function"&&j(A,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Q){wt(a,a.return,Q)}}else Qr(i,a,l,h);break;case 31:Qr(i,a,l,h);break;case 13:Qr(i,a,l,h);break;case 23:break;case 22:_=a.stateNode,A=a.alternate,a.memoizedState!==null?_._visibility&2?Qr(i,a,l,h):hu(i,a):_._visibility&2?Qr(i,a,l,h):(_._visibility|=2,Al(i,a,l,h,(a.subtreeFlags&10256)!==0||!1)),p&2048&&kp(A,a);break;case 24:Qr(i,a,l,h),p&2048&&Dp(a.alternate,a);break;default:Qr(i,a,l,h)}}function Al(i,a,l,h,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var _=i,A=a,j=l,Q=h,le=A.flags;switch(A.tag){case 0:case 11:case 15:Al(_,A,j,Q,p),cu(8,A);break;case 23:break;case 22:var fe=A.stateNode;A.memoizedState!==null?fe._visibility&2?Al(_,A,j,Q,p):hu(_,A):(fe._visibility|=2,Al(_,A,j,Q,p)),p&&le&2048&&kp(A.alternate,A);break;case 24:Al(_,A,j,Q,p),p&&le&2048&&Dp(A.alternate,A);break;default:Al(_,A,j,Q,p)}a=a.sibling}}function hu(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,h=a,p=h.flags;switch(h.tag){case 22:hu(l,h),p&2048&&kp(h.alternate,h);break;case 24:hu(l,h),p&2048&&Dp(h.alternate,h);break;default:hu(l,h)}a=a.sibling}}var du=8192;function Il(i,a,l){if(i.subtreeFlags&du)for(i=i.child;i!==null;)u1(i,a,l),i=i.sibling}function u1(i,a,l){switch(i.tag){case 26:Il(i,a,l),i.flags&du&&i.memoizedState!==null&&YC(l,Yr,i.memoizedState,i.memoizedProps);break;case 5:Il(i,a,l);break;case 3:case 4:var h=Yr;Yr=ef(i.stateNode.containerInfo),Il(i,a,l),Yr=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=du,du=16777216,Il(i,a,l),du=h):Il(i,a,l));break;default:Il(i,a,l)}}function h1(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function fu(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];vn=h,f1(h,i)}h1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)d1(i),i=i.sibling}function d1(i){switch(i.tag){case 0:case 11:case 15:fu(i),i.flags&2048&&Gs(9,i,i.return);break;case 3:fu(i);break;case 12:fu(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Bd(i)):fu(i);break;default:fu(i)}}function Bd(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];vn=h,f1(h,i)}h1(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Gs(8,a,a.return),Bd(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Bd(a));break;default:Bd(a)}i=i.sibling}}function f1(i,a){for(;vn!==null;){var l=vn;switch(l.tag){case 0:case 11:case 15:Gs(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Wc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,vn=h;else e:for(l=i;vn!==null;){h=vn;var p=h.sibling,_=h.return;if(r1(h),h===l){vn=null;break e}if(p!==null){p.return=_,vn=p;break e}vn=_}}}var cC={getCacheForType:function(i){var a=An(rn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return An(rn).controller.signal}},uC=typeof WeakMap=="function"?WeakMap:Map,ft=0,Nt=null,Xe=null,Ze=0,bt=0,fr=null,Ks=!1,Rl=!1,Op=!1,os=0,qt=0,Ys=0,oo=0,Mp=0,mr=0,Cl=0,mu=null,nr=null,Pp=!1,Fd=0,m1=0,Hd=1/0,qd=null,Qs=null,dn=0,Ws=null,Nl=null,ls=0,Lp=0,Vp=null,g1=null,gu=0,jp=null;function gr(){return(ft&2)!==0&&Ze!==0?Ze&-Ze:M.T!==null?qp():$h()}function p1(){if(mr===0)if((Ze&536870912)===0||st){var i=qi;qi<<=1,(qi&3932160)===0&&(qi=262144),mr=i}else mr=536870912;return i=hr.current,i!==null&&(i.flags|=32),mr}function rr(i,a,l){(i===Nt&&(bt===2||bt===9)||i.cancelPendingCommit!==null)&&(kl(i,0),Xs(i,Ze,mr,!1)),Pa(i,l),((ft&2)===0||i!==Nt)&&(i===Nt&&((ft&2)===0&&(oo|=l),qt===4&&Xs(i,Ze,mr,!1)),Ei(i))}function y1(i,a,l){if((ft&6)!==0)throw Error(n(327));var h=!l&&(a&127)===0&&(a&i.expiredLanes)===0||En(i,a),p=h?fC(i,a):zp(i,a,!0),_=h;do{if(p===0){Rl&&!h&&Xs(i,a,0,!1);break}else{if(l=i.current.alternate,_&&!hC(l)){p=zp(i,a,!1),_=!1;continue}if(p===2){if(_=a,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var j=i;p=mu;var Q=j.current.memoizedState.isDehydrated;if(Q&&(kl(j,A).flags|=256),A=zp(j,A,!1),A!==2){if(Op&&!Q){j.errorRecoveryDisabledLanes|=_,oo|=_,p=4;break e}_=nr,nr=p,_!==null&&(nr===null?nr=_:nr.push.apply(nr,_))}p=A}if(_=!1,p!==2)continue}}if(p===1){kl(i,0),Xs(i,a,0,!0);break}e:{switch(h=i,_=p,_){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:Xs(h,a,mr,!Ks);break e;case 2:nr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(p=Fd+300-xe(),10<p)){if(Xs(h,a,mr,!Ks),xn(h,0,!0)!==0)break e;ls=a,h.timeoutHandle=Y1(_1.bind(null,h,l,nr,qd,Pp,a,mr,oo,Cl,Ks,_,"Throttled",-0,0),p);break e}_1(h,l,nr,qd,Pp,a,mr,oo,Cl,Ks,_,null,-0,0)}}break}while(!0);Ei(i)}function _1(i,a,l,h,p,_,A,j,Q,le,fe,ge,ce,he){if(i.timeoutHandle=-1,ge=a.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fr},u1(a,_,ge);var Se=(_&62914560)===_?Fd-xe():(_&4194048)===_?m1-xe():0;if(Se=QC(ge,Se),Se!==null){ls=_,i.cancelPendingCommit=Se(A1.bind(null,i,a,_,l,h,p,A,j,Q,fe,ge,null,ce,he)),Xs(i,_,A,!le);return}}A1(i,a,_,l,h,p,A,j,Q)}function hC(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var p=l[h],_=p.getSnapshot;p=p.value;try{if(!cr(_(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Xs(i,a,l,h){a&=~Mp,a&=~oo,i.suspendedLanes|=a,i.pingedLanes&=~a,h&&(i.warmLanes|=a),h=i.expirationTimes;for(var p=a;0<p;){var _=31-Ot(p),A=1<<_;h[_]=-1,p&=~A}l!==0&&La(i,l,a)}function $d(){return(ft&6)===0?(pu(0),!1):!0}function Up(){if(Xe!==null){if(bt===0)var i=Xe.return;else i=Xe,Xi=Ja=null,tp(i),wl=null,Jc=0,i=Xe;for(;i!==null;)Qb(i.alternate,i),i=i.return;Xe=null}}function kl(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,kC(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),ls=0,Up(),Nt=i,Xe=l=Qi(i.current,null),Ze=a,bt=0,fr=null,Ks=!1,Rl=En(i,a),Op=!1,Cl=mr=Mp=oo=Ys=qt=0,nr=mu=null,Pp=!1,(a&8)!==0&&(a|=a&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=a;0<h;){var p=31-Ot(h),_=1<<p;a|=i[p],h&=~_}return os=a,dd(),l}function v1(i,a){He=null,M.H=au,a===bl||a===bd?(a=Pv(),bt=3):a===Hg?(a=Pv(),bt=4):bt=a===yp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,fr=a,Xe===null&&(qt=1,Md(i,Cr(a,i.current)))}function b1(){var i=hr.current;return i===null?!0:(Ze&4194048)===Ze?Or===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?i===Or:!1}function w1(){var i=M.H;return M.H=au,i===null?au:i}function x1(){var i=M.A;return M.A=cC,i}function Gd(){qt=4,Ks||(Ze&4194048)!==Ze&&hr.current!==null||(Rl=!0),(Ys&134217727)===0&&(oo&134217727)===0||Nt===null||Xs(Nt,Ze,mr,!1)}function zp(i,a,l){var h=ft;ft|=2;var p=w1(),_=x1();(Nt!==i||Ze!==a)&&(qd=null,kl(i,a)),a=!1;var A=qt;e:do try{if(bt!==0&&Xe!==null){var j=Xe,Q=fr;switch(bt){case 8:Up(),A=6;break e;case 3:case 2:case 9:case 6:hr.current===null&&(a=!0);var le=bt;if(bt=0,fr=null,Dl(i,j,Q,le),l&&Rl){A=0;break e}break;default:le=bt,bt=0,fr=null,Dl(i,j,Q,le)}}dC(),A=qt;break}catch(fe){v1(i,fe)}while(!0);return a&&i.shellSuspendCounter++,Xi=Ja=null,ft=h,M.H=p,M.A=_,Xe===null&&(Nt=null,Ze=0,dd()),A}function dC(){for(;Xe!==null;)E1(Xe)}function fC(i,a){var l=ft;ft|=2;var h=w1(),p=x1();Nt!==i||Ze!==a?(qd=null,Hd=xe()+500,kl(i,a)):Rl=En(i,a);e:do try{if(bt!==0&&Xe!==null){a=Xe;var _=fr;t:switch(bt){case 1:bt=0,fr=null,Dl(i,a,_,1);break;case 2:case 9:if(Ov(_)){bt=0,fr=null,T1(a);break}a=function(){bt!==2&&bt!==9||Nt!==i||(bt=7),Ei(i)},_.then(a,a);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:Ov(_)?(bt=0,fr=null,T1(a)):(bt=0,fr=null,Dl(i,a,_,7));break;case 5:var A=null;switch(Xe.tag){case 26:A=Xe.memoizedState;case 5:case 27:var j=Xe;if(A?cw(A):j.stateNode.complete){bt=0,fr=null;var Q=j.sibling;if(Q!==null)Xe=Q;else{var le=j.return;le!==null?(Xe=le,Kd(le)):Xe=null}break t}}bt=0,fr=null,Dl(i,a,_,5);break;case 6:bt=0,fr=null,Dl(i,a,_,6);break;case 8:Up(),qt=6;break e;default:throw Error(n(462))}}mC();break}catch(fe){v1(i,fe)}while(!0);return Xi=Ja=null,M.H=h,M.A=p,ft=l,Xe!==null?0:(Nt=null,Ze=0,dd(),qt)}function mC(){for(;Xe!==null&&!Be();)E1(Xe)}function E1(i){var a=Kb(i.alternate,i,os);i.memoizedProps=i.pendingProps,a===null?Kd(i):Xe=a}function T1(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=Bb(l,a,a.pendingProps,a.type,void 0,Ze);break;case 11:a=Bb(l,a,a.pendingProps,a.type.render,a.ref,Ze);break;case 5:tp(a);default:Qb(l,a),a=Xe=xv(a,os),a=Kb(l,a,os)}i.memoizedProps=i.pendingProps,a===null?Kd(i):Xe=a}function Dl(i,a,l,h){Xi=Ja=null,tp(a),wl=null,Jc=0;var p=a.return;try{if(nC(i,p,a,l,Ze)){qt=1,Md(i,Cr(l,i.current)),Xe=null;return}}catch(_){if(p!==null)throw Xe=p,_;qt=1,Md(i,Cr(l,i.current)),Xe=null;return}a.flags&32768?(st||h===1?i=!0:Rl||(Ze&536870912)!==0?i=!1:(Ks=i=!0,(h===2||h===9||h===3||h===6)&&(h=hr.current,h!==null&&h.tag===13&&(h.flags|=16384))),S1(a,i)):Kd(a)}function Kd(i){var a=i;do{if((a.flags&32768)!==0){S1(a,Ks);return}i=a.return;var l=sC(a.alternate,a,os);if(l!==null){Xe=l;return}if(a=a.sibling,a!==null){Xe=a;return}Xe=a=i}while(a!==null);qt===0&&(qt=5)}function S1(i,a){do{var l=aC(i.alternate,i);if(l!==null){l.flags&=32767,Xe=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){Xe=i;return}Xe=i=l}while(i!==null);qt=6,Xe=null}function A1(i,a,l,h,p,_,A,j,Q){i.cancelPendingCommit=null;do Yd();while(dn!==0);if((ft&6)!==0)throw Error(n(327));if(a!==null){if(a===i.current)throw Error(n(177));if(_=a.lanes|a.childLanes,_|=Rg,vg(i,l,_,A,j,Q),i===Nt&&(Xe=Nt=null,Ze=0),Nl=a,Ws=i,ls=l,Lp=_,Vp=p,g1=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,_C(ht,function(){return k1(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=M.T,M.T=null,p=D.p,D.p=2,A=ft,ft|=4;try{oC(i,a,l)}finally{ft=A,D.p=p,M.T=h}}dn=1,I1(),R1(),C1()}}function I1(){if(dn===1){dn=0;var i=Ws,a=Nl,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=M.T,M.T=null;var h=D.p;D.p=2;var p=ft;ft|=4;try{o1(a,i);var _=Jp,A=fv(i.containerInfo),j=_.focusedElem,Q=_.selectionRange;if(A!==j&&j&&j.ownerDocument&&dv(j.ownerDocument.documentElement,j)){if(Q!==null&&Eg(j)){var le=Q.start,fe=Q.end;if(fe===void 0&&(fe=le),"selectionStart"in j)j.selectionStart=le,j.selectionEnd=Math.min(fe,j.value.length);else{var ge=j.ownerDocument||document,ce=ge&&ge.defaultView||window;if(ce.getSelection){var he=ce.getSelection(),Se=j.textContent.length,Me=Math.min(Q.start,Se),Ct=Q.end===void 0?Me:Math.min(Q.end,Se);!he.extend&&Me>Ct&&(A=Ct,Ct=Me,Me=A);var re=hv(j,Me),J=hv(j,Ct);if(re&&J&&(he.rangeCount!==1||he.anchorNode!==re.node||he.anchorOffset!==re.offset||he.focusNode!==J.node||he.focusOffset!==J.offset)){var oe=ge.createRange();oe.setStart(re.node,re.offset),he.removeAllRanges(),Me>Ct?(he.addRange(oe),he.extend(J.node,J.offset)):(oe.setEnd(J.node,J.offset),he.addRange(oe))}}}}for(ge=[],he=j;he=he.parentNode;)he.nodeType===1&&ge.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<ge.length;j++){var me=ge[j];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}of=!!Xp,Jp=Xp=null}finally{ft=p,D.p=h,M.T=l}}i.current=a,dn=2}}function R1(){if(dn===2){dn=0;var i=Ws,a=Nl,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=M.T,M.T=null;var h=D.p;D.p=2;var p=ft;ft|=4;try{n1(i,a.alternate,a)}finally{ft=p,D.p=h,M.T=l}}dn=3}}function C1(){if(dn===4||dn===3){dn=0,Oe();var i=Ws,a=Nl,l=ls,h=g1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?dn=5:(dn=0,Nl=Ws=null,N1(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(Qs=null),$i(l),a=a.stateNode,St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(Kt,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=M.T,p=D.p,D.p=2,M.T=null;try{for(var _=i.onRecoverableError,A=0;A<h.length;A++){var j=h[A];_(j.value,{componentStack:j.stack})}}finally{M.T=a,D.p=p}}(ls&3)!==0&&Yd(),Ei(i),p=i.pendingLanes,(l&261930)!==0&&(p&42)!==0?i===jp?gu++:(gu=0,jp=i):gu=0,pu(0)}}function N1(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Wc(a)))}function Yd(){return I1(),R1(),C1(),k1()}function k1(){if(dn!==5)return!1;var i=Ws,a=Lp;Lp=0;var l=$i(ls),h=M.T,p=D.p;try{D.p=32>l?32:l,M.T=null,l=Vp,Vp=null;var _=Ws,A=ls;if(dn=0,Nl=Ws=null,ls=0,(ft&6)!==0)throw Error(n(331));var j=ft;if(ft|=4,d1(_.current),c1(_,_.current,A,l),ft=j,pu(0,!1),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(Kt,_)}catch{}return!0}finally{D.p=p,M.T=h,N1(i,a)}}function D1(i,a,l){a=Cr(l,a),a=pp(i.stateNode,a,2),i=Hs(i,a,2),i!==null&&(Pa(i,2),Ei(i))}function wt(i,a,l){if(i.tag===3)D1(i,i,l);else for(;a!==null;){if(a.tag===3){D1(a,i,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Qs===null||!Qs.has(h))){i=Cr(l,i),l=Ob(2),h=Hs(a,l,2),h!==null&&(Mb(l,h,a,i),Pa(h,2),Ei(h));break}}a=a.return}}function Bp(i,a,l){var h=i.pingCache;if(h===null){h=i.pingCache=new uC;var p=new Set;h.set(a,p)}else p=h.get(a),p===void 0&&(p=new Set,h.set(a,p));p.has(l)||(Op=!0,p.add(l),i=gC.bind(null,i,a,l),a.then(i,i))}function gC(i,a,l){var h=i.pingCache;h!==null&&h.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Nt===i&&(Ze&l)===l&&(qt===4||qt===3&&(Ze&62914560)===Ze&&300>xe()-Fd?(ft&2)===0&&kl(i,0):Mp|=l,Cl===Ze&&(Cl=0)),Ei(i)}function O1(i,a){a===0&&(a=Er()),i=Qa(i,a),i!==null&&(Pa(i,a),Ei(i))}function pC(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),O1(i,l)}function yC(i,a){var l=0;switch(i.tag){case 31:case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(a),O1(i,l)}function _C(i,a){return ye(i,a)}var Qd=null,Ol=null,Fp=!1,Wd=!1,Hp=!1,Js=0;function Ei(i){i!==Ol&&i.next===null&&(Ol===null?Qd=Ol=i:Ol=Ol.next=i),Wd=!0,Fp||(Fp=!0,bC())}function pu(i,a){if(!Hp&&Wd){Hp=!0;do for(var l=!1,h=Qd;h!==null;){if(i!==0){var p=h.pendingLanes;if(p===0)var _=0;else{var A=h.suspendedLanes,j=h.pingedLanes;_=(1<<31-Ot(42|i)+1)-1,_&=p&~(A&~j),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,V1(h,_))}else _=Ze,_=xn(h,h===Nt?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(_&3)===0||En(h,_)||(l=!0,V1(h,_));h=h.next}while(l);Hp=!1}}function vC(){M1()}function M1(){Wd=Fp=!1;var i=0;Js!==0&&NC()&&(i=Js);for(var a=xe(),l=null,h=Qd;h!==null;){var p=h.next,_=P1(h,a);_===0?(h.next=null,l===null?Qd=p:l.next=p,p===null&&(Ol=l)):(l=h,(i!==0||(_&3)!==0)&&(Wd=!0)),h=p}dn!==0&&dn!==5||pu(i),Js!==0&&(Js=0)}function P1(i,a){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-Ot(_),j=1<<A,Q=p[A];Q===-1?((j&l)===0||(j&h)!==0)&&(p[A]=Xo(j,a)):Q<=a&&(i.expiredLanes|=j),_&=~j}if(a=Nt,l=Ze,l=xn(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===a&&(bt===2||bt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Te(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||En(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(h!==null&&Te(h),$i(l)){case 2:case 8:l=Fn;break;case 32:l=ht;break;case 268435456:l=Ft;break;default:l=ht}return h=L1.bind(null,i),l=ye(l,h),i.callbackPriority=a,i.callbackNode=l,a}return h!==null&&h!==null&&Te(h),i.callbackPriority=2,i.callbackNode=null,2}function L1(i,a){if(dn!==0&&dn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Yd()&&i.callbackNode!==l)return null;var h=Ze;return h=xn(i,i===Nt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(y1(i,h,a),P1(i,xe()),i.callbackNode!=null&&i.callbackNode===l?L1.bind(null,i):null)}function V1(i,a){if(Yd())return null;y1(i,a,!0)}function bC(){DC(function(){(ft&6)!==0?ye(pt,vC):M1()})}function qp(){if(Js===0){var i=_l;i===0&&(i=Dn,Dn<<=1,(Dn&261888)===0&&(Dn=256)),Js=i}return Js}function j1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:rl(""+i)}function U1(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function wC(i,a,l,h,p){if(a==="submit"&&l&&l.stateNode===p){var _=j1((p[yn]||null).action),A=h.submitter;A&&(a=(a=A[yn]||null)?j1(a.formAction):A.getAttribute("formAction"),a!==null&&(_=a,A=null));var j=new pi("action","action",null,h,p);i.push({event:j,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Js!==0){var Q=A?U1(p,A):new FormData(p);up(l,{pending:!0,data:Q,method:p.method,action:_},null,Q)}}else typeof _=="function"&&(j.preventDefault(),Q=A?U1(p,A):new FormData(p),up(l,{pending:!0,data:Q,method:p.method,action:_},_,Q))},currentTarget:p}]})}}for(var $p=0;$p<Ig.length;$p++){var Gp=Ig[$p],xC=Gp.toLowerCase(),EC=Gp[0].toUpperCase()+Gp.slice(1);Kr(xC,"on"+EC)}Kr(pv,"onAnimationEnd"),Kr(yv,"onAnimationIteration"),Kr(_v,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(UR,"onTransitionRun"),Kr(zR,"onTransitionStart"),Kr(BR,"onTransitionCancel"),Kr(vv,"onTransitionEnd"),di("onMouseEnter",["mouseout","mouseover"]),di("onMouseLeave",["mouseout","mouseover"]),di("onPointerEnter",["pointerout","pointerover"]),di("onPointerLeave",["pointerout","pointerover"]),hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hi("onBeforeInput",["compositionend","keypress","textInput","paste"]),hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yu));function z1(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var _=void 0;if(a)for(var A=h.length-1;0<=A;A--){var j=h[A],Q=j.instance,le=j.currentTarget;if(j=j.listener,Q!==_&&p.isPropagationStopped())break e;_=j,p.currentTarget=le;try{_(p)}catch(fe){hd(fe)}p.currentTarget=null,_=Q}else for(A=0;A<h.length;A++){if(j=h[A],Q=j.instance,le=j.currentTarget,j=j.listener,Q!==_&&p.isPropagationStopped())break e;_=j,p.currentTarget=le;try{_(p)}catch(fe){hd(fe)}p.currentTarget=null,_=Q}}}}function Je(i,a){var l=a[Jo];l===void 0&&(l=a[Jo]=new Set);var h=i+"__bubble";l.has(h)||(B1(a,i,2,!1),l.add(h))}function Kp(i,a,l){var h=0;a&&(h|=4),B1(l,i,h,a)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Yp(i){if(!i[Xd]){i[Xd]=!0,Cc.forEach(function(l){l!=="selectionchange"&&(TC.has(l)||Kp(l,!1,i),Kp(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Xd]||(a[Xd]=!0,Kp("selectionchange",!1,a))}}function B1(i,a,l,h){switch(pw(a)){case 2:var p=JC;break;case 8:p=ZC;break;default:p=cy}l=p.bind(null,a,l,i),p=void 0,!Ba||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(a,l,{capture:!0,passive:p}):i.addEventListener(a,l,!0):p!==void 0?i.addEventListener(a,l,{passive:p}):i.addEventListener(a,l,!1)}function Qp(i,a,l,h,p){var _=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var A=h.tag;if(A===3||A===4){var j=h.stateNode.containerInfo;if(j===p)break;if(A===4)for(A=h.return;A!==null;){var Q=A.tag;if((Q===3||Q===4)&&A.stateNode.containerInfo===p)return;A=A.return}for(;j!==null;){if(A=ci(j),A===null)return;if(Q=A.tag,Q===5||Q===6||Q===26||Q===27){h=_=A;continue e}j=j.parentNode}}h=h.return}Os(function(){var le=_,fe=Sr(l),ge=[];e:{var ce=bv.get(i);if(ce!==void 0){var he=pi,Se=i;switch(i){case"keypress":if(Ha(l)===0)break e;case"keydown":case"keyup":he=ld;break;case"focusin":Se="focus",he=$a;break;case"focusout":Se="blur",he=$a;break;case"beforeblur":case"afterblur":he=$a;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Fc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Zh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=E;break;case pv:case yv:case _v:he=td;break;case vv:he=U;break;case"scroll":case"scrollend":he=Bc;break;case"wheel":he=ue;break;case"copy":case"cut":case"paste":he=nd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Yi;break;case"toggle":case"beforetoggle":he=Fe}var Me=(a&4)!==0,Ct=!Me&&(i==="scroll"||i==="scrollend"),re=Me?ce!==null?ce+"Capture":null:ce;Me=[];for(var J=le,oe;J!==null;){var me=J;if(oe=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||oe===null||re===null||(me=Hr(J,re),me!=null&&Me.push(_u(J,me,oe))),Ct)break;J=J.return}0<Me.length&&(ce=new he(ce,Se,null,l,fe),ge.push({event:ce,listeners:Me}))}}if((a&7)===0){e:{if(ce=i==="mouseover"||i==="pointerover",he=i==="mouseout"||i==="pointerout",ce&&l!==jc&&(Se=l.relatedTarget||l.fromElement)&&(ci(Se)||Se[oi]))break e;if((he||ce)&&(ce=fe.window===fe?fe:(ce=fe.ownerDocument)?ce.defaultView||ce.parentWindow:window,he?(Se=l.relatedTarget||l.toElement,he=le,Se=Se?ci(Se):null,Se!==null&&(Ct=o(Se),Me=Se.tag,Se!==Ct||Me!==5&&Me!==27&&Me!==6)&&(Se=null)):(he=null,Se=le),he!==Se)){if(Me=Fc,me="onMouseLeave",re="onMouseEnter",J="mouse",(i==="pointerout"||i==="pointerover")&&(Me=Yi,me="onPointerLeave",re="onPointerEnter",J="pointer"),Ct=he==null?ce:or(he),oe=Se==null?ce:or(Se),ce=new Me(me,J+"leave",he,l,fe),ce.target=Ct,ce.relatedTarget=oe,me=null,ci(fe)===le&&(Me=new Me(re,J+"enter",Se,l,fe),Me.target=oe,Me.relatedTarget=Ct,me=Me),Ct=me,he&&Se)t:{for(Me=SC,re=he,J=Se,oe=0,me=re;me;me=Me(me))oe++;me=0;for(var ke=J;ke;ke=Me(ke))me++;for(;0<oe-me;)re=Me(re),oe--;for(;0<me-oe;)J=Me(J),me--;for(;oe--;){if(re===J||J!==null&&re===J.alternate){Me=re;break t}re=Me(re),J=Me(J)}Me=null}else Me=null;he!==null&&F1(ge,ce,he,Me,!1),Se!==null&&Ct!==null&&F1(ge,Ct,Se,Me,!0)}}e:{if(ce=le?or(le):window,he=ce.nodeName&&ce.nodeName.toLowerCase(),he==="select"||he==="input"&&ce.type==="file")var ct=sv;else if(rv(ce))if(av)ct=LR;else{ct=MR;var Ce=OR}else he=ce.nodeName,!he||he.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?le&&nl(le.elementType)&&(ct=sv):ct=PR;if(ct&&(ct=ct(i,le))){iv(ge,ct,l,fe);break e}Ce&&Ce(i,ce,le),i==="focusout"&&le&&ce.type==="number"&&le.memoizedProps.value!=null&&Pc(ce,"number",ce.value)}switch(Ce=le?or(le):window,i){case"focusin":(rv(Ce)||Ce.contentEditable==="true")&&(ul=Ce,Tg=le,Kc=null);break;case"focusout":Kc=Tg=ul=null;break;case"mousedown":Sg=!0;break;case"contextmenu":case"mouseup":case"dragend":Sg=!1,mv(ge,l,fe);break;case"selectionchange":if(jR)break;case"keydown":case"keyup":mv(ge,l,fe)}var Ke;if(dt)e:{switch(i){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else cl?Ga(i,l)&&(et="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(et="onCompositionStart");et&&(vi&&l.locale!=="ko"&&(cl||et!=="onCompositionStart"?et==="onCompositionEnd"&&cl&&(Ke=zc()):(gi=fe,Uc="value"in gi?gi.value:gi.textContent,cl=!0)),Ce=Jd(le,et),0<Ce.length&&(et=new _i(et,i,null,l,fe),ge.push({event:et,listeners:Ce}),Ke?et.data=Ke:(Ke=ll(l),Ke!==null&&(et.data=Ke)))),(Ke=Ir?CR(i,l):NR(i,l))&&(et=Jd(le,"onBeforeInput"),0<et.length&&(Ce=new _i("onBeforeInput","beforeinput",null,l,fe),ge.push({event:Ce,listeners:et}),Ce.data=Ke)),wC(ge,i,le,l,fe)}z1(ge,a)})}function _u(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Jd(i,a){for(var l=a+"Capture",h=[];i!==null;){var p=i,_=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||_===null||(p=Hr(i,l),p!=null&&h.unshift(_u(i,p,_)),p=Hr(i,a),p!=null&&h.push(_u(i,p,_))),i.tag===3)return h;i=i.return}return[]}function SC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function F1(i,a,l,h,p){for(var _=a._reactName,A=[];l!==null&&l!==h;){var j=l,Q=j.alternate,le=j.stateNode;if(j=j.tag,Q!==null&&Q===h)break;j!==5&&j!==26&&j!==27||le===null||(Q=le,p?(le=Hr(l,_),le!=null&&A.unshift(_u(l,le,Q))):p||(le=Hr(l,_),le!=null&&A.push(_u(l,le,Q)))),l=l.return}A.length!==0&&i.push({event:a,listeners:A})}var AC=/\r\n?/g,IC=/\u0000|\uFFFD/g;function H1(i){return(typeof i=="string"?i:""+i).replace(AC,`
`).replace(IC,"")}function q1(i,a){return a=H1(a),H1(i)===a}function Rt(i,a,l,h,p,_){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Jn(i,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Jn(i,""+h);break;case"className":lr(i,"class",h);break;case"tabIndex":lr(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":lr(i,l,h);break;case"style":Vc(i,h,_);break;case"data":if(a!=="object"){lr(i,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=rl(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(a!=="input"&&Rt(i,a,"name",p.name,p,null),Rt(i,a,"formEncType",p.formEncType,p,null),Rt(i,a,"formMethod",p.formMethod,p,null),Rt(i,a,"formTarget",p.formTarget,p,null)):(Rt(i,a,"encType",p.encType,p,null),Rt(i,a,"method",p.method,p,null),Rt(i,a,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=rl(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=Fr);break;case"onScroll":h!=null&&Je("scroll",i);break;case"onScrollEnd":h!=null&&Je("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=rl(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":Je("beforetoggle",i),Je("toggle",i),el(i,"popover",h);break;case"xlinkActuate":nn(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":nn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":nn(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":nn(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":nn(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":nn(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":nn(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":nn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":nn(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":el(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Jh.get(l)||l,el(i,l,h))}}function Wp(i,a,l,h,p,_){switch(l){case"style":Vc(i,h,_);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"children":typeof h=="string"?Jn(i,h):(typeof h=="number"||typeof h=="bigint")&&Jn(i,""+h);break;case"onScroll":h!=null&&Je("scroll",i);break;case"onScrollEnd":h!=null&&Je("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Fr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),_=i[yn]||null,_=_!=null?_[l]:null,typeof _=="function"&&i.removeEventListener(a,_,p),typeof h=="function")){typeof _!="function"&&_!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,h,p);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):el(i,l,h)}}}function Rn(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",i),Je("load",i);var h=!1,p=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var A=l[_];if(A!=null)switch(_){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:Rt(i,a,_,A,l,null)}}p&&Rt(i,a,"srcSet",l.srcSet,l,null),h&&Rt(i,a,"src",l.src,l,null);return;case"input":Je("invalid",i);var j=_=A=p=null,Q=null,le=null;for(h in l)if(l.hasOwnProperty(h)){var fe=l[h];if(fe!=null)switch(h){case"name":p=fe;break;case"type":A=fe;break;case"checked":Q=fe;break;case"defaultChecked":le=fe;break;case"value":_=fe;break;case"defaultValue":j=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(n(137,a));break;default:Rt(i,a,h,fe,l,null)}}Qh(i,_,j,Q,le,A,p,!1);return;case"select":Je("invalid",i),h=A=_=null;for(p in l)if(l.hasOwnProperty(p)&&(j=l[p],j!=null))switch(p){case"value":_=j;break;case"defaultValue":A=j;break;case"multiple":h=j;default:Rt(i,a,p,j,l,null)}a=_,l=A,i.multiple=!!h,a!=null?Cs(i,!!h,a,!1):l!=null&&Cs(i,!!h,l,!0);return;case"textarea":Je("invalid",i),_=p=h=null;for(A in l)if(l.hasOwnProperty(A)&&(j=l[A],j!=null))switch(A){case"value":h=j;break;case"defaultValue":p=j;break;case"children":_=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(n(91));break;default:Rt(i,a,A,j,l,null)}Ns(i,h,p,_);return;case"option":for(Q in l)if(l.hasOwnProperty(Q)&&(h=l[Q],h!=null))switch(Q){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Rt(i,a,Q,h,l,null)}return;case"dialog":Je("beforetoggle",i),Je("toggle",i),Je("cancel",i),Je("close",i);break;case"iframe":case"object":Je("load",i);break;case"video":case"audio":for(h=0;h<yu.length;h++)Je(yu[h],i);break;case"image":Je("error",i),Je("load",i);break;case"details":Je("toggle",i);break;case"embed":case"source":case"link":Je("error",i),Je("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in l)if(l.hasOwnProperty(le)&&(h=l[le],h!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:Rt(i,a,le,h,l,null)}return;default:if(nl(a)){for(fe in l)l.hasOwnProperty(fe)&&(h=l[fe],h!==void 0&&Wp(i,a,fe,h,l,void 0));return}}for(j in l)l.hasOwnProperty(j)&&(h=l[j],h!=null&&Rt(i,a,j,h,l,null))}function RC(i,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,_=null,A=null,j=null,Q=null,le=null,fe=null;for(he in l){var ge=l[he];if(l.hasOwnProperty(he)&&ge!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":Q=ge;default:h.hasOwnProperty(he)||Rt(i,a,he,null,h,ge)}}for(var ce in h){var he=h[ce];if(ge=l[ce],h.hasOwnProperty(ce)&&(he!=null||ge!=null))switch(ce){case"type":_=he;break;case"name":p=he;break;case"checked":le=he;break;case"defaultChecked":fe=he;break;case"value":A=he;break;case"defaultValue":j=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(n(137,a));break;default:he!==ge&&Rt(i,a,ce,he,h,ge)}}tl(i,A,j,Q,le,fe,_,p);return;case"select":he=A=j=ce=null;for(_ in l)if(Q=l[_],l.hasOwnProperty(_)&&Q!=null)switch(_){case"value":break;case"multiple":he=Q;default:h.hasOwnProperty(_)||Rt(i,a,_,null,h,Q)}for(p in h)if(_=h[p],Q=l[p],h.hasOwnProperty(p)&&(_!=null||Q!=null))switch(p){case"value":ce=_;break;case"defaultValue":j=_;break;case"multiple":A=_;default:_!==Q&&Rt(i,a,p,_,h,Q)}a=j,l=A,h=he,ce!=null?Cs(i,!!l,ce,!1):!!h!=!!l&&(a!=null?Cs(i,!!l,a,!0):Cs(i,!!l,l?[]:"",!1));return;case"textarea":he=ce=null;for(j in l)if(p=l[j],l.hasOwnProperty(j)&&p!=null&&!h.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:Rt(i,a,j,null,h,p)}for(A in h)if(p=h[A],_=l[A],h.hasOwnProperty(A)&&(p!=null||_!=null))switch(A){case"value":ce=p;break;case"defaultValue":he=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(n(91));break;default:p!==_&&Rt(i,a,A,p,h,_)}Wh(i,ce,he);return;case"option":for(var Se in l)if(ce=l[Se],l.hasOwnProperty(Se)&&ce!=null&&!h.hasOwnProperty(Se))switch(Se){case"selected":i.selected=!1;break;default:Rt(i,a,Se,null,h,ce)}for(Q in h)if(ce=h[Q],he=l[Q],h.hasOwnProperty(Q)&&ce!==he&&(ce!=null||he!=null))switch(Q){case"selected":i.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:Rt(i,a,Q,ce,h,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in l)ce=l[Me],l.hasOwnProperty(Me)&&ce!=null&&!h.hasOwnProperty(Me)&&Rt(i,a,Me,null,h,ce);for(le in h)if(ce=h[le],he=l[le],h.hasOwnProperty(le)&&ce!==he&&(ce!=null||he!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(n(137,a));break;default:Rt(i,a,le,ce,h,he)}return;default:if(nl(a)){for(var Ct in l)ce=l[Ct],l.hasOwnProperty(Ct)&&ce!==void 0&&!h.hasOwnProperty(Ct)&&Wp(i,a,Ct,void 0,h,ce);for(fe in h)ce=h[fe],he=l[fe],!h.hasOwnProperty(fe)||ce===he||ce===void 0&&he===void 0||Wp(i,a,fe,ce,h,he);return}}for(var re in l)ce=l[re],l.hasOwnProperty(re)&&ce!=null&&!h.hasOwnProperty(re)&&Rt(i,a,re,null,h,ce);for(ge in h)ce=h[ge],he=l[ge],!h.hasOwnProperty(ge)||ce===he||ce==null&&he==null||Rt(i,a,ge,ce,h,he)}function $1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function CC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var p=l[h],_=p.transferSize,A=p.initiatorType,j=p.duration;if(_&&j&&$1(A)){for(A=0,j=p.responseEnd,h+=1;h<l.length;h++){var Q=l[h],le=Q.startTime;if(le>j)break;var fe=Q.transferSize,ge=Q.initiatorType;fe&&$1(ge)&&(Q=Q.responseEnd,A+=fe*(Q<j?1:(j-le)/(Q-le)))}if(--h,a+=8*(_+A)/(p.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Xp=null,Jp=null;function Zd(i){return i.nodeType===9?i:i.ownerDocument}function G1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function K1(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Zp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var ey=null;function NC(){var i=window.event;return i&&i.type==="popstate"?i===ey?!1:(ey=i,!0):(ey=null,!1)}var Y1=typeof setTimeout=="function"?setTimeout:void 0,kC=typeof clearTimeout=="function"?clearTimeout:void 0,Q1=typeof Promise=="function"?Promise:void 0,DC=typeof queueMicrotask=="function"?queueMicrotask:typeof Q1<"u"?function(i){return Q1.resolve(null).then(i).catch(OC)}:Y1;function OC(i){setTimeout(function(){throw i})}function Zs(i){return i==="head"}function W1(i,a){var l=a,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(h===0){i.removeChild(p),Vl(a);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")vu(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,vu(l);for(var _=l.firstChild;_;){var A=_.nextSibling,j=_.nodeName;_[li]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=A}}else l==="body"&&vu(i.ownerDocument.body);l=p}while(l);Vl(a)}function X1(i,a){var l=i;i=0;do{var h=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=h}while(l)}function ty(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ty(l),Zo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function MC(i,a,l,h){for(;i.nodeType===1;){var p=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[li])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var _=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Mr(i.nextSibling),i===null)break}return null}function PC(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Mr(i.nextSibling),i===null))return null;return i}function J1(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Mr(i.nextSibling),i===null))return null;return i}function ny(i){return i.data==="$?"||i.data==="$~"}function ry(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function LC(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Mr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var iy=null;function Z1(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return Mr(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function ew(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function tw(i,a,l){switch(a=Zd(l),i){case"html":if(i=a.documentElement,!i)throw Error(n(452));return i;case"head":if(i=a.head,!i)throw Error(n(453));return i;case"body":if(i=a.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function vu(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Zo(i)}var Pr=new Map,nw=new Set;function ef(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var cs=D.d;D.d={f:VC,r:jC,D:UC,C:zC,L:BC,m:FC,X:qC,S:HC,M:$C};function VC(){var i=cs.f(),a=$d();return i||a}function jC(i){var a=Tr(i);a!==null&&a.tag===5&&a.type==="form"?vb(a):cs.r(i)}var Ml=typeof document>"u"?null:document;function rw(i,a,l){var h=Ml;if(h&&typeof a=="string"&&a){var p=Xn(a);p='link[rel="'+i+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),nw.has(p)||(nw.add(p),i={rel:i,crossOrigin:l,href:a},h.querySelector(p)===null&&(a=h.createElement("link"),Rn(a,"link",i),tn(a),h.head.appendChild(a)))}}function UC(i){cs.D(i),rw("dns-prefetch",i,null)}function zC(i,a){cs.C(i,a),rw("preconnect",i,a)}function BC(i,a,l){cs.L(i,a,l);var h=Ml;if(h&&i&&a){var p='link[rel="preload"][as="'+Xn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Xn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Xn(l.imageSizes)+'"]')):p+='[href="'+Xn(i)+'"]';var _=p;switch(a){case"style":_=Pl(i);break;case"script":_=Ll(i)}Pr.has(_)||(i=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Pr.set(_,i),h.querySelector(p)!==null||a==="style"&&h.querySelector(bu(_))||a==="script"&&h.querySelector(wu(_))||(a=h.createElement("link"),Rn(a,"link",i),tn(a),h.head.appendChild(a)))}}function FC(i,a){cs.m(i,a);var l=Ml;if(l&&i){var h=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Xn(h)+'"][href="'+Xn(i)+'"]',_=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ll(i)}if(!Pr.has(_)&&(i=y({rel:"modulepreload",href:i},a),Pr.set(_,i),l.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(wu(_)))return}h=l.createElement("link"),Rn(h,"link",i),tn(h),l.head.appendChild(h)}}}function HC(i,a,l){cs.S(i,a,l);var h=Ml;if(h&&i){var p=ui(h).hoistableStyles,_=Pl(i);a=a||"default";var A=p.get(_);if(!A){var j={loading:0,preload:null};if(A=h.querySelector(bu(_)))j.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Pr.get(_))&&sy(i,l);var Q=A=h.createElement("link");tn(Q),Rn(Q,"link",i),Q._p=new Promise(function(le,fe){Q.onload=le,Q.onerror=fe}),Q.addEventListener("load",function(){j.loading|=1}),Q.addEventListener("error",function(){j.loading|=2}),j.loading|=4,tf(A,a,h)}A={type:"stylesheet",instance:A,count:1,state:j},p.set(_,A)}}}function qC(i,a){cs.X(i,a);var l=Ml;if(l&&i){var h=ui(l).hoistableScripts,p=Ll(i),_=h.get(p);_||(_=l.querySelector(wu(p)),_||(i=y({src:i,async:!0},a),(a=Pr.get(p))&&ay(i,a),_=l.createElement("script"),tn(_),Rn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(p,_))}}function $C(i,a){cs.M(i,a);var l=Ml;if(l&&i){var h=ui(l).hoistableScripts,p=Ll(i),_=h.get(p);_||(_=l.querySelector(wu(p)),_||(i=y({src:i,async:!0,type:"module"},a),(a=Pr.get(p))&&ay(i,a),_=l.createElement("script"),tn(_),Rn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(p,_))}}function iw(i,a,l,h){var p=(p=pe.current)?ef(p):null;if(!p)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Pl(l.href),l=ui(p).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Pl(l.href);var _=ui(p).hoistableStyles,A=_.get(i);if(A||(p=p.ownerDocument||p,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=p.querySelector(bu(i)))&&!_._p&&(A.instance=_,A.state.loading=5),Pr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Pr.set(i,l),_||GC(p,i,l,A.state))),a&&h===null)throw Error(n(528,""));return A}if(a&&h!==null)throw Error(n(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ll(l),l=ui(p).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Pl(i){return'href="'+Xn(i)+'"'}function bu(i){return'link[rel="stylesheet"]['+i+"]"}function sw(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function GC(i,a,l,h){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=i.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Rn(a,"link",l),tn(a),i.head.appendChild(a))}function Ll(i){return'[src="'+Xn(i)+'"]'}function wu(i){return"script[async]"+i}function aw(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=i.querySelector('style[data-href~="'+Xn(l.href)+'"]');if(h)return a.instance=h,tn(h),h;var p=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),tn(h),Rn(h,"style",p),tf(h,l.precedence,i),a.instance=h;case"stylesheet":p=Pl(l.href);var _=i.querySelector(bu(p));if(_)return a.state.loading|=4,a.instance=_,tn(_),_;h=sw(l),(p=Pr.get(p))&&sy(h,p),_=(i.ownerDocument||i).createElement("link"),tn(_);var A=_;return A._p=new Promise(function(j,Q){A.onload=j,A.onerror=Q}),Rn(_,"link",h),a.state.loading|=4,tf(_,l.precedence,i),a.instance=_;case"script":return _=Ll(l.src),(p=i.querySelector(wu(_)))?(a.instance=p,tn(p),p):(h=l,(p=Pr.get(_))&&(h=y({},l),ay(h,p)),i=i.ownerDocument||i,p=i.createElement("script"),tn(p),Rn(p,"link",h),i.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,tf(h,l.precedence,i));return a.instance}function tf(i,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,_=p,A=0;A<h.length;A++){var j=h[A];if(j.dataset.precedence===a)_=j;else if(_!==p)break}_?_.parentNode.insertBefore(i,_.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function sy(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function ay(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var nf=null;function ow(i,a,l){if(nf===null){var h=new Map,p=nf=new Map;p.set(l,h)}else p=nf,h=p.get(l),h||(h=new Map,p.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),p=0;p<l.length;p++){var _=l[p];if(!(_[li]||_[en]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(a)||"";A=i+A;var j=h.get(A);j?j.push(_):h.set(A,[_])}}return h}function lw(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function KC(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function cw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function YC(i,a,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Pl(h.href),_=a.querySelector(bu(p));if(_){a=_._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=rf.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=_,tn(_);return}_=a.ownerDocument||a,h=sw(h),(p=Pr.get(p))&&sy(h,p),_=_.createElement("link"),tn(_);var A=_;A._p=new Promise(function(j,Q){A.onload=j,A.onerror=Q}),Rn(_,"link",h),l.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=rf.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var oy=0;function QC(i,a){return i.stylesheets&&i.count===0&&af(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var h=setTimeout(function(){if(i.stylesheets&&af(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+a);0<i.imgBytes&&oy===0&&(oy=62500*CC());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&af(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>oy?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(p)}}:null}function rf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)af(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var sf=null;function af(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,sf=new Map,a.forEach(WC,i),sf=null,rf.call(i))}function WC(i,a){if(!(a.state.loading&4)){var l=sf.get(i);if(l)var h=l.get(null);else{l=new Map,sf.set(i,l);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<p.length;_++){var A=p[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),h=A)}h&&l.set(null,h)}p=a.instance,A=p.getAttribute("data-precedence"),_=l.get(A)||h,_===h&&l.set(null,p),l.set(A,p),this.count++,h=rf.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),_?_.parentNode.insertBefore(p,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),a.state.loading|=4}}var xu={$$typeof:B,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function XC(i,a,l,h,p,_,A,j,Q){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pn(0),this.hiddenUpdates=pn(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function uw(i,a,l,h,p,_,A,j,Q,le,fe,ge){return i=new XC(i,a,l,A,Q,le,fe,ge,j),a=1,_===!0&&(a|=24),_=ur(3,null,null,a),i.current=_,_.stateNode=i,a=zg(),a.refCount++,i.pooledCache=a,a.refCount++,_.memoizedState={element:h,isDehydrated:l,cache:a},qg(_),i}function hw(i){return i?(i=fl,i):fl}function dw(i,a,l,h,p,_){p=hw(p),h.context===null?h.context=p:h.pendingContext=p,h=Fs(a),h.payload={element:l},_=_===void 0?null:_,_!==null&&(h.callback=_),l=Hs(i,h,a),l!==null&&(rr(l,i,a),eu(l,i,a))}function fw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function ly(i,a){fw(i,a),(i=i.alternate)&&fw(i,a)}function mw(i){if(i.tag===13||i.tag===31){var a=Qa(i,67108864);a!==null&&rr(a,i,67108864),ly(i,67108864)}}function gw(i){if(i.tag===13||i.tag===31){var a=gr();a=Va(a);var l=Qa(i,a);l!==null&&rr(l,i,a),ly(i,a)}}var of=!0;function JC(i,a,l,h){var p=M.T;M.T=null;var _=D.p;try{D.p=2,cy(i,a,l,h)}finally{D.p=_,M.T=p}}function ZC(i,a,l,h){var p=M.T;M.T=null;var _=D.p;try{D.p=8,cy(i,a,l,h)}finally{D.p=_,M.T=p}}function cy(i,a,l,h){if(of){var p=uy(h);if(p===null)Qp(i,a,h,lf,l),yw(i,h);else if(tN(p,i,a,l,h))h.stopPropagation();else if(yw(i,h),a&4&&-1<eN.indexOf(i)){for(;p!==null;){var _=Tr(p);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=hn(_.pendingLanes);if(A!==0){var j=_;for(j.pendingLanes|=2,j.entangledLanes|=2;A;){var Q=1<<31-Ot(A);j.entanglements[1]|=Q,A&=~Q}Ei(_),(ft&6)===0&&(Hd=xe()+500,pu(0))}}break;case 31:case 13:j=Qa(_,2),j!==null&&rr(j,_,2),$d(),ly(_,2)}if(_=uy(h),_===null&&Qp(i,a,h,lf,l),_===p)break;p=_}p!==null&&h.stopPropagation()}else Qp(i,a,h,null,l)}}function uy(i){return i=Sr(i),hy(i)}var lf=null;function hy(i){if(lf=null,i=ci(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=c(a),i!==null)return i;i=null}else if(l===31){if(i=u(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return lf=i,null}function pw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(it()){case pt:return 2;case Fn:return 8;case ht:case Hn:return 32;case Ft:return 268435456;default:return 32}default:return 32}}var dy=!1,ea=null,ta=null,na=null,Eu=new Map,Tu=new Map,ra=[],eN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yw(i,a){switch(i){case"focusin":case"focusout":ea=null;break;case"dragenter":case"dragleave":ta=null;break;case"mouseover":case"mouseout":na=null;break;case"pointerover":case"pointerout":Eu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tu.delete(a.pointerId)}}function Su(i,a,l,h,p,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:_,targetContainers:[p]},a!==null&&(a=Tr(a),a!==null&&mw(a)),i):(i.eventSystemFlags|=h,a=i.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),i)}function tN(i,a,l,h,p){switch(a){case"focusin":return ea=Su(ea,i,a,l,h,p),!0;case"dragenter":return ta=Su(ta,i,a,l,h,p),!0;case"mouseover":return na=Su(na,i,a,l,h,p),!0;case"pointerover":var _=p.pointerId;return Eu.set(_,Su(Eu.get(_)||null,i,a,l,h,p)),!0;case"gotpointercapture":return _=p.pointerId,Tu.set(_,Su(Tu.get(_)||null,i,a,l,h,p)),!0}return!1}function _w(i){var a=ci(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){i.blockedOn=a,zr(i.priority,function(){gw(l)});return}}else if(a===31){if(a=u(l),a!==null){i.blockedOn=a,zr(i.priority,function(){gw(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function cf(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=uy(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);jc=h,l.target.dispatchEvent(h),jc=null}else return a=Tr(l),a!==null&&mw(a),i.blockedOn=l,!1;a.shift()}return!0}function vw(i,a,l){cf(i)&&l.delete(a)}function nN(){dy=!1,ea!==null&&cf(ea)&&(ea=null),ta!==null&&cf(ta)&&(ta=null),na!==null&&cf(na)&&(na=null),Eu.forEach(vw),Tu.forEach(vw)}function uf(i,a){i.blockedOn===a&&(i.blockedOn=null,dy||(dy=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,nN)))}var hf=null;function bw(i){hf!==i&&(hf=i,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){hf===i&&(hf=null);for(var a=0;a<i.length;a+=3){var l=i[a],h=i[a+1],p=i[a+2];if(typeof h!="function"){if(hy(h||l)===null)continue;break}var _=Tr(l);_!==null&&(i.splice(a,3),a-=3,up(_,{pending:!0,data:p,method:l.method,action:h},h,p))}}))}function Vl(i){function a(Q){return uf(Q,i)}ea!==null&&uf(ea,i),ta!==null&&uf(ta,i),na!==null&&uf(na,i),Eu.forEach(a),Tu.forEach(a);for(var l=0;l<ra.length;l++){var h=ra[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<ra.length&&(l=ra[0],l.blockedOn===null);)_w(l),l.blockedOn===null&&ra.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var p=l[h],_=l[h+1],A=p[yn]||null;if(typeof _=="function")A||bw(l);else if(A){var j=null;if(_&&_.hasAttribute("formAction")){if(p=_,A=_[yn]||null)j=A.formAction;else if(hy(p)!==null)continue}else j=A.action;typeof j=="function"?l[h+1]=j:(l.splice(h,3),h-=3),bw(l)}}}function ww(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return p=A})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function fy(i){this._internalRoot=i}df.prototype.render=fy.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));var l=a.current,h=gr();dw(l,h,i,a,null,null)},df.prototype.unmount=fy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;dw(i.current,2,null,i,null,null),$d(),a[oi]=null}};function df(i){this._internalRoot=i}df.prototype.unstable_scheduleHydration=function(i){if(i){var a=$h();i={blockedOn:null,target:i,priority:a};for(var l=0;l<ra.length&&a!==0&&a<ra[l].priority;l++);ra.splice(l,0,i),l===0&&_w(i)}};var xw=e.version;if(xw!=="19.2.3")throw Error(n(527,xw,"19.2.3"));D.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(a),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var rN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{Kt=ff.inject(rN),St=ff}catch{}}return Iu.createRoot=function(i,a){if(!s(i))throw Error(n(299));var l=!1,h="",p=Cb,_=Nb,A=kb;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError)),a=uw(i,1,!1,null,null,l,h,null,p,_,A,ww),i[oi]=a.current,Yp(i),new fy(a)},Iu.hydrateRoot=function(i,a,l){if(!s(i))throw Error(n(299));var h=!1,p="",_=Cb,A=Nb,j=kb,Q=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(j=l.onRecoverableError),l.formState!==void 0&&(Q=l.formState)),a=uw(i,1,!0,a,l??null,h,p,Q,_,A,j,ww),a.context=hw(null),l=a.current,h=gr(),h=Va(h),p=Fs(h),p.callback=null,Hs(l,p,h),l=h,a.current.lanes=l,Pa(a,l),Ei(a),i[oi]=a.current,Yp(i),new df(a)},Iu.version="19.2.3",Iu}var Dw;function mN(){if(Dw)return py.exports;Dw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),py.exports=fN(),py.exports}var gN=mN();var Ow="popstate";function pN(r={}){function e(s,o){let{pathname:c="/",search:u="",hash:d=""}=Ho(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),qy("",{pathname:c,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let c=s.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");u=f===-1?d:d.slice(0,f)}return u+"#"+(typeof o=="string"?o:nh(o))}function n(s,o){Ur(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return _N(e,t,n,r)}function Bt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Ur(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yN(){return Math.random().toString(36).substring(2,10)}function Mw(r,e){return{usr:r.state,key:r.key,idx:e}}function qy(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Ho(e):e,state:t,key:e&&e.key||n||yN()}}function nh({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Ho(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function _N(r,e,t,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,c=s.history,u="POP",d=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let P=g(),V=P==null?null:P-f;f=P,d&&d({action:u,location:N.location,delta:V})}function v(P,V){u="PUSH";let H=qy(N.location,P,V);t&&t(H,P),f=g()+1;let B=Mw(H,f),q=N.createHref(H);try{c.pushState(B,"",q)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;s.location.assign(q)}o&&d&&d({action:u,location:N.location,delta:1})}function w(P,V){u="REPLACE";let H=qy(N.location,P,V);t&&t(H,P),f=g();let B=Mw(H,f),q=N.createHref(H);c.replaceState(B,"",q),o&&d&&d({action:u,location:N.location,delta:0})}function T(P){return vN(P)}let N={get action(){return u},get location(){return r(s,c)},listen(P){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Ow,y),d=P,()=>{s.removeEventListener(Ow,y),d=null}},createHref(P){return e(s,P)},createURL:T,encodeLocation(P){let V=T(P);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:v,replace:w,go(P){return c.go(P)}};return N}function vN(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Bt(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:nh(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function FT(r,e,t="/"){return bN(r,e,t,!1)}function bN(r,e,t,n){let s=typeof e=="string"?Ho(e):e,o=ps(s.pathname||"/",t);if(o==null)return null;let c=HT(r);wN(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=DN(o);u=NN(c[d],f,n)}return u}function HT(r,e=[],t=[],n="",s=!1){let o=(c,u,d=s,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&d)return;Bt(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let y=ms([n,g.relativePath]),v=t.concat(g);c.children&&c.children.length>0&&(Bt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),HT(c.children,e,v,y,d)),!(c.path==null&&!c.index)&&e.push({path:y,score:RN(y,c.index),routesMeta:v})};return r.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let d of qT(c.path))o(c,u,!0,d)}),e}function qT(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let c=qT(n.join("/")),u=[];return u.push(...c.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...c),u.map(d=>r.startsWith("/")&&d===""?"/":d)}function wN(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:CN(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var xN=/^:[\w-]+$/,EN=3,TN=2,SN=1,AN=10,IN=-2,Pw=r=>r==="*";function RN(r,e){let t=r.split("/"),n=t.length;return t.some(Pw)&&(n+=IN),e&&(n+=TN),t.filter(s=>!Pw(s)).reduce((s,o)=>s+(xN.test(o)?EN:o===""?SN:AN),n)}function CN(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function NN(r,e,t=!1){let{routesMeta:n}=r,s={},o="/",c=[];for(let u=0;u<n.length;++u){let d=n[u],f=u===n.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=Yf({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),v=d.route;if(!y&&f&&t&&!n[n.length-1].route.index&&(y=Yf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:ms([o,y.pathname]),pathnameBase:VN(ms([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=ms([o,y.pathnameBase]))}return c}function Yf(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=kN(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((f,{paramName:g,isOptional:y},v)=>{if(g==="*"){let T=u[v]||"";c=o.slice(0,o.length-T.length).replace(/(.)\/+$/,"$1")}const w=u[v];return y&&!w?f[g]=void 0:f[g]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:r}}function kN(r,e=!1,t=!0){Ur(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function DN(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ur(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function ps(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}var ON=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,MN=r=>ON.test(r);function PN(r,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?Ho(r):r,o;if(t)if(MN(t))o=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Ur(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?o=Lw(t.substring(1),"/"):o=Lw(t,e)}else o=e;return{pathname:o,search:jN(n),hash:UN(s)}}function Lw(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function by(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LN(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $T(r){let e=LN(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function GT(r,e,t,n=!1){let s;typeof r=="string"?s=Ho(r):(s={...r},Bt(!s.pathname||!s.pathname.includes("?"),by("?","pathname","search",s)),Bt(!s.pathname||!s.pathname.includes("#"),by("#","pathname","hash",s)),Bt(!s.search||!s.search.includes("#"),by("#","search","hash",s)));let o=r===""||s.pathname==="",c=o?"/":s.pathname,u;if(c==null)u=t;else{let y=e.length-1;if(!n&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let d=PN(s,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var ms=r=>r.join("/").replace(/\/\/+/g,"/"),VN=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),jN=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,UN=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function zN(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function BN(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var KT=["POST","PUT","PATCH","DELETE"];new Set(KT);var FN=["GET",...KT];new Set(FN);var bc=$.createContext(null);bc.displayName="DataRouter";var Mm=$.createContext(null);Mm.displayName="DataRouterState";$.createContext(!1);var YT=$.createContext({isTransitioning:!1});YT.displayName="ViewTransition";var HN=$.createContext(new Map);HN.displayName="Fetchers";var qN=$.createContext(null);qN.displayName="Await";var ri=$.createContext(null);ri.displayName="Navigation";var Th=$.createContext(null);Th.displayName="Location";var ii=$.createContext({outlet:null,matches:[],isDataRoute:!1});ii.displayName="Route";var M0=$.createContext(null);M0.displayName="RouteError";function $N(r,{relative:e}={}){Bt(Sh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=$.useContext(ri),{hash:s,pathname:o,search:c}=Ah(r,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:ms([t,o])),n.createHref({pathname:u,search:c,hash:s})}function Sh(){return $.useContext(Th)!=null}function xr(){return Bt(Sh(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(Th).location}var QT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function WT(r){$.useContext(ri).static||$.useLayoutEffect(r)}function Es(){let{isDataRoute:r}=$.useContext(ii);return r?ak():GN()}function GN(){Bt(Sh(),"useNavigate() may be used only in the context of a <Router> component.");let r=$.useContext(bc),{basename:e,navigator:t}=$.useContext(ri),{matches:n}=$.useContext(ii),{pathname:s}=xr(),o=JSON.stringify($T(n)),c=$.useRef(!1);return WT(()=>{c.current=!0}),$.useCallback((d,f={})=>{if(Ur(c.current,QT),!c.current)return;if(typeof d=="number"){t.go(d);return}let g=GT(d,JSON.parse(o),s,f.relative==="path");r==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ms([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,s,r])}var KN=$.createContext(null);function YN(r){let e=$.useContext(ii).outlet;return $.useMemo(()=>e&&$.createElement(KN.Provider,{value:r},e),[e,r])}function XT(){let{matches:r}=$.useContext(ii),e=r[r.length-1];return e?e.params:{}}function Ah(r,{relative:e}={}){let{matches:t}=$.useContext(ii),{pathname:n}=xr(),s=JSON.stringify($T(t));return $.useMemo(()=>GT(r,JSON.parse(s),n,e==="path"),[r,s,n,e])}function QN(r,e){return JT(r,e)}function JT(r,e,t,n,s){Bt(Sh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=$.useContext(ri),{matches:c}=$.useContext(ii),u=c[c.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let H=y&&y.path||"";ZT(f,!y||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let v=xr(),w;if(e){let H=typeof e=="string"?Ho(e):e;Bt(g==="/"||H.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${H.pathname}" was given in the \`location\` prop.`),w=H}else w=v;let T=w.pathname||"/",N=T;if(g!=="/"){let H=g.replace(/^\//,"").split("/");N="/"+T.replace(/^\//,"").split("/").slice(H.length).join("/")}let P=FT(r,{pathname:N});Ur(y||P!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Ur(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=ek(P&&P.map(H=>Object.assign({},H,{params:Object.assign({},d,H.params),pathname:ms([g,o.encodeLocation?o.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?g:ms([g,o.encodeLocation?o.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),c,t,n,s);return e&&V?$.createElement(Th.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},V):V}function WN(){let r=sk(),e=zN(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=$.createElement($.Fragment,null,$.createElement("p",null," Hey developer "),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:o},"ErrorBoundary")," or"," ",$.createElement("code",{style:o},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:s},t):null,c)}var XN=$.createElement(WN,null),JN=class extends $.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?$.createElement(ii.Provider,{value:this.props.routeContext},$.createElement(M0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZN({routeContext:r,match:e,children:t}){let n=$.useContext(bc);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(ii.Provider,{value:r},t)}function ek(r,e=[],t=null,n=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,c=t?.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);Bt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,d=-1;if(t)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:v,errors:w}=t,T=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||T){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=t&&n?(g,y)=>{n(g,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:BN(t.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,v)=>{let w,T=!1,N=null,P=null;t&&(w=c&&y.route.id?c[y.route.id]:void 0,N=y.route.errorElement||XN,u&&(d<0&&v===0?(ZT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,P=null):d===v&&(T=!0,P=y.route.hydrateFallbackElement||null)));let V=e.concat(o.slice(0,v+1)),H=()=>{let B;return w?B=N:T?B=P:y.route.Component?B=$.createElement(y.route.Component,null):y.route.element?B=y.route.element:B=g,$.createElement(ZN,{match:y,routeContext:{outlet:g,matches:V,isDataRoute:t!=null},children:B})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?$.createElement(JN,{location:t.location,revalidation:t.revalidation,component:N,error:w,children:H(),routeContext:{outlet:null,matches:V,isDataRoute:!0},onError:f}):H()},null)}function P0(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tk(r){let e=$.useContext(bc);return Bt(e,P0(r)),e}function nk(r){let e=$.useContext(Mm);return Bt(e,P0(r)),e}function rk(r){let e=$.useContext(ii);return Bt(e,P0(r)),e}function L0(r){let e=rk(r),t=e.matches[e.matches.length-1];return Bt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function ik(){return L0("useRouteId")}function sk(){let r=$.useContext(M0),e=nk("useRouteError"),t=L0("useRouteError");return r!==void 0?r:e.errors?.[t]}function ak(){let{router:r}=tk("useNavigate"),e=L0("useNavigate"),t=$.useRef(!1);return WT(()=>{t.current=!0}),$.useCallback(async(s,o={})=>{Ur(t.current,QT),t.current&&(typeof s=="number"?await r.navigate(s):await r.navigate(s,{fromRouteId:e,...o}))},[r,e])}var Vw={};function ZT(r,e,t){!e&&!Vw[r]&&(Vw[r]=!0,Ur(!1,t))}$.memo(ok);function ok({routes:r,future:e,state:t,unstable_onError:n}){return JT(r,void 0,t,n,e)}function lk(r){return YN(r.context)}function Wr(r){Bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ck({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:o=!1,unstable_useTransitions:c}){Bt(!Sh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),d=$.useMemo(()=>({basename:u,navigator:s,static:o,unstable_useTransitions:c,future:{}}),[u,s,o,c]);typeof t=="string"&&(t=Ho(t));let{pathname:f="/",search:g="",hash:y="",state:v=null,key:w="default"}=t,T=$.useMemo(()=>{let N=ps(f,u);return N==null?null:{location:{pathname:N,search:g,hash:y,state:v,key:w},navigationType:n}},[u,f,g,y,v,w,n]);return Ur(T!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:$.createElement(ri.Provider,{value:d},$.createElement(Th.Provider,{children:e,value:T}))}function uk({children:r,location:e}){return QN($y(r),e)}function $y(r,e=[]){let t=[];return $.Children.forEach(r,(n,s)=>{if(!$.isValidElement(n))return;let o=[...e,s];if(n.type===$.Fragment){t.push.apply(t,$y(n.props.children,o));return}Bt(n.type===Wr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Bt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=$y(n.props.children,o)),t.push(c)}),t}var If="get",Rf="application/x-www-form-urlencoded";function Pm(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function hk(r){return Pm(r)&&r.tagName.toLowerCase()==="button"}function dk(r){return Pm(r)&&r.tagName.toLowerCase()==="form"}function fk(r){return Pm(r)&&r.tagName.toLowerCase()==="input"}function mk(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function gk(r,e){return r.button===0&&(!e||e==="_self")&&!mk(r)}var mf=null;function pk(){if(mf===null)try{new FormData(document.createElement("form"),0),mf=!1}catch{mf=!0}return mf}var yk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wy(r){return r!=null&&!yk.has(r)?(Ur(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rf}"`),null):r}function _k(r,e){let t,n,s,o,c;if(dk(r)){let u=r.getAttribute("action");n=u?ps(u,e):null,t=r.getAttribute("method")||If,s=wy(r.getAttribute("enctype"))||Rf,o=new FormData(r)}else if(hk(r)||fk(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||u.getAttribute("action");if(n=d?ps(d,e):null,t=r.getAttribute("formmethod")||u.getAttribute("method")||If,s=wy(r.getAttribute("formenctype"))||wy(u.getAttribute("enctype"))||Rf,o=new FormData(u,r),!pk()){let{name:f,type:g,value:y}=r;if(g==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,y)}}else{if(Pm(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=If,n=null,s=Rf,c=r}return o&&s==="text/plain"&&(c=o,o=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function V0(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function vk(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&ps(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function bk(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wk(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function xk(r,e,t){let n=await Promise.all(r.map(async s=>{let o=e.routes[s.route.id];if(o){let c=await bk(o,t);return c.links?c.links():[]}return[]}));return Ak(n.flat(1).filter(wk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function jw(r,e,t,n,s,o){let c=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,u=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>c(d,f)||u(d,f)):o==="data"?e.filter((d,f)=>{let g=n.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function Ek(r,e,{includeHydrateFallback:t}={}){return Tk(r.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function Tk(r){return[...new Set(r)]}function Sk(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function Ak(r,e){let t=new Set;return new Set(e),r.reduce((n,s)=>{let o=JSON.stringify(Sk(s));return t.has(o)||(t.add(o),n.push({key:o,link:s})),n},[])}function eS(){let r=$.useContext(bc);return V0(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Ik(){let r=$.useContext(Mm);return V0(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var j0=$.createContext(void 0);j0.displayName="FrameworkContext";function tS(){let r=$.useContext(j0);return V0(r,"You must render this element inside a <HydratedRouter> element"),r}function Rk(r,e){let t=$.useContext(j0),[n,s]=$.useState(!1),[o,c]=$.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=e,v=$.useRef(null);$.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let N=V=>{V.forEach(H=>{c(H.isIntersecting)})},P=new IntersectionObserver(N,{threshold:.5});return v.current&&P.observe(v.current),()=>{P.disconnect()}}},[r]),$.useEffect(()=>{if(n){let N=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(N)}}},[n]);let w=()=>{s(!0)},T=()=>{s(!1),c(!1)};return t?r!=="intent"?[o,v,{}]:[o,v,{onFocus:Ru(u,w),onBlur:Ru(d,T),onMouseEnter:Ru(f,w),onMouseLeave:Ru(g,T),onTouchStart:Ru(y,w)}]:[!1,v,{}]}function Ru(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function Ck({page:r,...e}){let{router:t}=eS(),n=$.useMemo(()=>FT(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?$.createElement(kk,{page:r,matches:n,...e}):null}function Nk(r){let{manifest:e,routeModules:t}=tS(),[n,s]=$.useState([]);return $.useEffect(()=>{let o=!1;return xk(r,e,t).then(c=>{o||s(c)}),()=>{o=!0}},[r,e,t]),n}function kk({page:r,matches:e,...t}){let n=xr(),{manifest:s,routeModules:o}=tS(),{basename:c}=eS(),{loaderData:u,matches:d}=Ik(),f=$.useMemo(()=>jw(r,e,d,s,n,"data"),[r,e,d,s,n]),g=$.useMemo(()=>jw(r,e,d,s,n,"assets"),[r,e,d,s,n]),y=$.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let T=new Set,N=!1;if(e.forEach(V=>{let H=s.routes[V.route.id];!H||!H.hasLoader||(!f.some(B=>B.route.id===V.route.id)&&V.route.id in u&&o[V.route.id]?.shouldRevalidate||H.hasClientLoader?N=!0:T.add(V.route.id))}),T.size===0)return[];let P=vk(r,c,"data");return N&&T.size>0&&P.searchParams.set("_routes",e.filter(V=>T.has(V.route.id)).map(V=>V.route.id).join(",")),[P.pathname+P.search]},[c,u,n,s,f,e,r,o]),v=$.useMemo(()=>Ek(g,s),[g,s]),w=Nk(g);return $.createElement($.Fragment,null,y.map(T=>$.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...t})),v.map(T=>$.createElement("link",{key:T,rel:"modulepreload",href:T,...t})),w.map(({key:T,link:N})=>$.createElement("link",{key:T,nonce:t.nonce,...N})))}function Dk(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var nS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nS&&(window.__reactRouterVersion="7.10.1")}catch{}function Ok({basename:r,children:e,unstable_useTransitions:t,window:n}){let s=$.useRef();s.current==null&&(s.current=pN({window:n,v5Compat:!0}));let o=s.current,[c,u]=$.useState({action:o.action,location:o.location}),d=$.useCallback(f=>{t===!1?u(f):$.startTransition(()=>u(f))},[t]);return $.useLayoutEffect(()=>o.listen(d),[o,d]),$.createElement(ck,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:t===!0})}var rS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zr=$.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:o,replace:c,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,...v},w){let{basename:T,unstable_useTransitions:N}=$.useContext(ri),P=typeof f=="string"&&rS.test(f),V,H=!1;if(typeof f=="string"&&P&&(V=f,nS))try{let I=new URL(window.location.href),C=f.startsWith("//")?new URL(I.protocol+f):new URL(f),L=ps(C.pathname,T);C.origin===I.origin&&L!=null?f=L+C.search+C.hash:H=!0}catch{Ur(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=$N(f,{relative:s}),[q,K,z]=Rk(n,v),O=Vk(f,{replace:c,state:u,target:d,preventScrollReset:g,relative:s,viewTransition:y,unstable_useTransitions:N});function x(I){e&&e(I),I.defaultPrevented||O(I)}let S=$.createElement("a",{...v,...z,href:V||B,onClick:H||o?e:x,ref:Dk(w,K),target:d,"data-discover":!P&&t==="render"?"true":void 0});return q&&!P?$.createElement($.Fragment,null,S,$.createElement(Ck,{page:B})):S});Zr.displayName="Link";var Mk=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:o,to:c,viewTransition:u,children:d,...f},g){let y=Ah(c,{relative:f.relative}),v=xr(),w=$.useContext(Mm),{navigator:T,basename:N}=$.useContext(ri),P=w!=null&&Fk(y)&&u===!0,V=T.encodeLocation?T.encodeLocation(y).pathname:y.pathname,H=v.pathname,B=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(H=H.toLowerCase(),B=B?B.toLowerCase():null,V=V.toLowerCase()),B&&N&&(B=ps(B,N)||B);const q=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let K=H===V||!s&&H.startsWith(V)&&H.charAt(q)==="/",z=B!=null&&(B===V||!s&&B.startsWith(V)&&B.charAt(V.length)==="/"),O={isActive:K,isPending:z,isTransitioning:P},x=K?e:void 0,S;typeof n=="function"?S=n(O):S=[n,K?"active":null,z?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let I=typeof o=="function"?o(O):o;return $.createElement(Zr,{...f,"aria-current":x,className:S,ref:g,style:I,to:c,viewTransition:u},typeof d=="function"?d(O):d)});Mk.displayName="NavLink";var Pk=$.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:o,method:c=If,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,...v},w)=>{let{unstable_useTransitions:T}=$.useContext(ri),N=zk(),P=Bk(u,{relative:f}),V=c.toLowerCase()==="get"?"get":"post",H=typeof u=="string"&&rS.test(u),B=q=>{if(d&&d(q),q.defaultPrevented)return;q.preventDefault();let K=q.nativeEvent.submitter,z=K?.getAttribute("formmethod")||c,O=()=>N(K||q.currentTarget,{fetcherKey:e,method:z,navigate:t,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:y});T&&t!==!1?$.startTransition(()=>O()):O()};return $.createElement("form",{ref:w,method:V,action:P,onSubmit:n?d:B,...v,"data-discover":!H&&r==="render"?"true":void 0})});Pk.displayName="Form";function Lk(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iS(r){let e=$.useContext(bc);return Bt(e,Lk(r)),e}function Vk(r,{target:e,replace:t,state:n,preventScrollReset:s,relative:o,viewTransition:c,unstable_useTransitions:u}={}){let d=Es(),f=xr(),g=Ah(r,{relative:o});return $.useCallback(y=>{if(gk(y,e)){y.preventDefault();let v=t!==void 0?t:nh(f)===nh(g),w=()=>d(r,{replace:v,state:n,preventScrollReset:s,relative:o,viewTransition:c});u?$.startTransition(()=>w()):w()}},[f,d,g,t,n,e,r,s,o,c,u])}var jk=0,Uk=()=>`__${String(++jk)}__`;function zk(){let{router:r}=iS("useSubmit"),{basename:e}=$.useContext(ri),t=ik(),n=r.fetch,s=r.navigate;return $.useCallback(async(o,c={})=>{let{action:u,method:d,encType:f,formData:g,body:y}=_k(o,e);if(c.navigate===!1){let v=c.fetcherKey||Uk();await n(v,t,c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,flushSync:c.flushSync})}else await s(c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,s,e,t])}function Bk(r,{relative:e}={}){let{basename:t}=$.useContext(ri),n=$.useContext(ii);Bt(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...Ah(r||".",{relative:e})},c=xr();if(r==null){o.search=c.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!r||r===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:ms([t,o.pathname])),nh(o)}function Fk(r,{relative:e}={}){let t=$.useContext(YT);Bt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=iS("useViewTransitionState"),s=Ah(r,{relative:e});if(!t.isTransitioning)return!1;let o=ps(t.currentLocation.pathname,n)||t.currentLocation.pathname,c=ps(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Yf(s.pathname,c)!=null||Yf(s.pathname,o)!=null}const Ve=r=>typeof r=="string",Cu=()=>{let r,e;const t=new Promise((n,s)=>{r=n,e=s});return t.resolve=r,t.reject=e,t},Uw=r=>r==null?"":""+r,Hk=(r,e,t)=>{r.forEach(n=>{e[n]&&(t[n]=e[n])})},qk=/###/g,zw=r=>r&&r.indexOf("###")>-1?r.replace(qk,"."):r,Bw=r=>!r||Ve(r),Hu=(r,e,t)=>{const n=Ve(e)?e.split("."):e;let s=0;for(;s<n.length-1;){if(Bw(r))return{};const o=zw(n[s]);!r[o]&&t&&(r[o]=new t),Object.prototype.hasOwnProperty.call(r,o)?r=r[o]:r={},++s}return Bw(r)?{}:{obj:r,k:zw(n[s])}},Fw=(r,e,t)=>{const{obj:n,k:s}=Hu(r,e,Object);if(n!==void 0||e.length===1){n[s]=t;return}let o=e[e.length-1],c=e.slice(0,e.length-1),u=Hu(r,c,Object);for(;u.obj===void 0&&c.length;)o=`${c[c.length-1]}.${o}`,c=c.slice(0,c.length-1),u=Hu(r,c,Object),u?.obj&&typeof u.obj[`${u.k}.${o}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${o}`]=t},$k=(r,e,t,n)=>{const{obj:s,k:o}=Hu(r,e,Object);s[o]=s[o]||[],s[o].push(t)},Qf=(r,e)=>{const{obj:t,k:n}=Hu(r,e);if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n]},Gk=(r,e,t)=>{const n=Qf(r,t);return n!==void 0?n:Qf(e,t)},sS=(r,e,t)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in r?Ve(r[n])||r[n]instanceof String||Ve(e[n])||e[n]instanceof String?t&&(r[n]=e[n]):sS(r[n],e[n],t):r[n]=e[n]);return r},jl=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Kk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Yk=r=>Ve(r)?r.replace(/[&<>"'\/]/g,e=>Kk[e]):r;class Qk{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const Wk=[" ",",","?","!",";"],Xk=new Qk(20),Jk=(r,e,t)=>{e=e||"",t=t||"";const n=Wk.filter(c=>e.indexOf(c)<0&&t.indexOf(c)<0);if(n.length===0)return!0;const s=Xk.getRegExp(`(${n.map(c=>c==="?"?"\\?":c).join("|")})`);let o=!s.test(r);if(!o){const c=r.indexOf(t);c>0&&!s.test(r.substring(0,c))&&(o=!0)}return o},Gy=(r,e,t=".")=>{if(!r)return;if(r[e])return Object.prototype.hasOwnProperty.call(r,e)?r[e]:void 0;const n=e.split(t);let s=r;for(let o=0;o<n.length;){if(!s||typeof s!="object")return;let c,u="";for(let d=o;d<n.length;++d)if(d!==o&&(u+=t),u+=n[d],c=s[u],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&d<n.length-1)continue;o+=d-o+1;break}s=c}return s},rh=r=>r?.replace("_","-"),Zk={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){console?.[r]?.apply?.(console,e)}};let eD=class Ky{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Zk,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,s){return s&&!this.debug?null:(Ve(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Ky(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Ky(this.logger,e)}};var Ri=new eD;class Lm{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(t)||0;this.observers[n].set(t,s+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,o])=>{for(let c=0;c<o;c++)s(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,o])=>{for(let c=0;c<o;c++)s.apply(s,[e,...t])})}}class Hw extends Lm{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,s={}){const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,c=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;e.indexOf(".")>-1?u=e.split("."):(u=[e,t],n&&(Array.isArray(n)?u.push(...n):Ve(n)&&o?u.push(...n.split(o)):u.push(n)));const d=Qf(this.data,u);return!d&&!t&&!n&&e.indexOf(".")>-1&&(e=u[0],t=u[1],n=u.slice(2).join(".")),d||!c||!Ve(n)?d:Gy(this.data?.[e]?.[t],n,o)}addResource(e,t,n,s,o={silent:!1}){const c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let u=[e,t];n&&(u=u.concat(c?n.split(c):n)),e.indexOf(".")>-1&&(u=e.split("."),s=t,t=u[1]),this.addNamespaces(t),Fw(this.data,u,s),o.silent||this.emit("added",e,t,n,s)}addResources(e,t,n,s={silent:!1}){for(const o in n)(Ve(n[o])||Array.isArray(n[o]))&&this.addResource(e,t,o,n[o],{silent:!0});s.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,s,o,c={silent:!1,skipCopy:!1}){let u=[e,t];e.indexOf(".")>-1&&(u=e.split("."),s=n,n=t,t=u[1]),this.addNamespaces(t);let d=Qf(this.data,u)||{};c.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?sS(d,n,o):d={...d,...n},Fw(this.data,u,d),c.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var aS={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,n,s){return r.forEach(o=>{e=this.processors[o]?.process(e,t,n,s)??e}),e}};const oS=Symbol("i18next/PATH_KEY");function tD(){const r=[],e=Object.create(null);let t;return e.get=(n,s)=>(t?.revoke?.(),s===oS?r:(r.push(s),t=Proxy.revocable(n,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function Yy(r,e){const{[oS]:t}=r(tD());return t.join(e?.keySeparator??".")}const qw={},xy=r=>!Ve(r)&&typeof r!="boolean"&&typeof r!="number";class Wf extends Lm{constructor(e,t={}){super(),Hk(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ri.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const n={...t};if(e==null)return!1;const s=this.resolve(e,n);if(s?.res===void 0)return!1;const o=xy(s.res);return!(n.returnObjects===!1&&o)}extractFromKey(e,t){let n=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const c=n&&e.indexOf(n)>-1,u=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Jk(e,n,s);if(c&&!u){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:Ve(o)?[o]:o};const f=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(f[0])>-1)&&(o=f.shift()),e=f.join(s)}return{key:e,namespaces:Ve(o)?[o]:o}}translate(e,t,n){let s=typeof t=="object"?{...t}:t;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=Yy(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const o=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,c=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:u,namespaces:d}=this.extractFromKey(e[e.length-1],s),f=d[d.length-1];let g=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;g===void 0&&(g=":");const y=s.lng||this.language,v=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y?.toLowerCase()==="cimode")return v?o?{res:`${f}${g}${u}`,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(s)}:`${f}${g}${u}`:o?{res:u,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(s)}:u;const w=this.resolve(e,s);let T=w?.res;const N=w?.usedKey||u,P=w?.exactUsedKey||u,V=["[object Number]","[object Function]","[object RegExp]"],H=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,B=!this.i18nFormat||this.i18nFormat.handleAsObject,q=s.count!==void 0&&!Ve(s.count),K=Wf.hasDefaultValue(s),z=q?this.pluralResolver.getSuffix(y,s.count,s):"",O=s.ordinal&&q?this.pluralResolver.getSuffix(y,s.count,{ordinal:!1}):"",x=q&&!s.ordinal&&s.count===0,S=x&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${z}`]||s[`defaultValue${O}`]||s.defaultValue;let I=T;B&&!T&&K&&(I=S);const C=xy(I),L=Object.prototype.toString.apply(I);if(B&&I&&C&&V.indexOf(L)<0&&!(Ve(H)&&Array.isArray(I))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const k=this.options.returnedObjectHandler?this.options.returnedObjectHandler(N,I,{...s,ns:d}):`key '${u} (${this.language})' returned an object instead of string.`;return o?(w.res=k,w.usedParams=this.getUsedParamsDetails(s),w):k}if(c){const k=Array.isArray(I),G=k?[]:{},ne=k?P:N;for(const M in I)if(Object.prototype.hasOwnProperty.call(I,M)){const D=`${ne}${c}${M}`;K&&!T?G[M]=this.translate(D,{...s,defaultValue:xy(S)?S[M]:void 0,joinArrays:!1,ns:d}):G[M]=this.translate(D,{...s,joinArrays:!1,ns:d}),G[M]===D&&(G[M]=I[M])}T=G}}else if(B&&Ve(H)&&Array.isArray(T))T=T.join(H),T&&(T=this.extendTranslation(T,e,s,n));else{let k=!1,G=!1;!this.isValidLookup(T)&&K&&(k=!0,T=S),this.isValidLookup(T)||(G=!0,T=u);const M=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&G?void 0:T,D=K&&S!==T&&this.options.updateMissing;if(G||k||D){if(this.logger.log(D?"updateKey":"missingKey",y,f,u,D?S:T),c){const F=this.resolve(u,{...s,keySeparator:!1});F&&F.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let te=[];const W=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&W&&W[0])for(let F=0;F<W.length;F++)te.push(W[F]);else this.options.saveMissingTo==="all"?te=this.languageUtils.toResolveHierarchy(s.lng||this.language):te.push(s.lng||this.language);const ee=(F,Y,ie)=>{const Z=K&&ie!==T?ie:M;this.options.missingKeyHandler?this.options.missingKeyHandler(F,f,Y,Z,D,s):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(F,f,Y,Z,D,s),this.emit("missingKey",F,f,Y,T)};this.options.saveMissing&&(this.options.saveMissingPlurals&&q?te.forEach(F=>{const Y=this.pluralResolver.getSuffixes(F,s);x&&s[`defaultValue${this.options.pluralSeparator}zero`]&&Y.indexOf(`${this.options.pluralSeparator}zero`)<0&&Y.push(`${this.options.pluralSeparator}zero`),Y.forEach(ie=>{ee([F],u+ie,s[`defaultValue${ie}`]||S)})}):ee(te,u,S))}T=this.extendTranslation(T,e,s,w,n),G&&T===u&&this.options.appendNamespaceToMissingKey&&(T=`${f}${g}${u}`),(G||k)&&this.options.parseMissingKeyHandler&&(T=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}${g}${u}`:u,k?T:void 0,s))}return o?(w.res=T,w.usedParams=this.getUsedParamsDetails(s),w):T}extendTranslation(e,t,n,s,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=Ve(e)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(d){const y=e.match(this.interpolator.nestingRegexp);f=y&&y.length}let g=n.replace&&!Ve(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,n.lng||this.language||s.usedLng,n),d){const y=e.match(this.interpolator.nestingRegexp),v=y&&y.length;f<v&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,(...y)=>o?.[0]===y[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${t[0]}`),null):this.translate(...y,t),n)),n.interpolation&&this.interpolator.reset()}const c=n.postProcess||this.options.postProcess,u=Ve(c)?[c]:c;return e!=null&&u?.length&&n.applyPostProcessor!==!1&&(e=aS.handle(u,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,t={}){let n,s,o,c,u;return Ve(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(n))return;const f=this.extractFromKey(d,t),g=f.key;s=g;let y=f.namespaces;this.options.fallbackNS&&(y=y.concat(this.options.fallbackNS));const v=t.count!==void 0&&!Ve(t.count),w=v&&!t.ordinal&&t.count===0,T=t.context!==void 0&&(Ve(t.context)||typeof t.context=="number")&&t.context!=="",N=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);y.forEach(P=>{this.isValidLookup(n)||(u=P,!qw[`${N[0]}-${P}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(u)&&(qw[`${N[0]}-${P}`]=!0,this.logger.warn(`key "${s}" for languages "${N.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),N.forEach(V=>{if(this.isValidLookup(n))return;c=V;const H=[g];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(H,g,V,P,t);else{let q;v&&(q=this.pluralResolver.getSuffix(V,t.count,t));const K=`${this.options.pluralSeparator}zero`,z=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(t.ordinal&&q.indexOf(z)===0&&H.push(g+q.replace(z,this.options.pluralSeparator)),H.push(g+q),w&&H.push(g+K)),T){const O=`${g}${this.options.contextSeparator||"_"}${t.context}`;H.push(O),v&&(t.ordinal&&q.indexOf(z)===0&&H.push(O+q.replace(z,this.options.pluralSeparator)),H.push(O+q),w&&H.push(O+K))}}let B;for(;B=H.pop();)this.isValidLookup(n)||(o=B,n=this.getResource(V,P,B,t))}))})}),{res:n,usedKey:s,exactUsedKey:o,usedLng:c,usedNS:u}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,n,s={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,n,s):this.resourceStore.getResource(e,t,n,s)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Ve(e.replace);let s=n?e.replace:e;if(n&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const o of t)delete s[o]}return s}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&e[n]!==void 0)return!0;return!1}}class $w{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ri.create("languageUtils")}getScriptPartFromCode(e){if(e=rh(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=rh(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Ve(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(n=>{if(t)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(t=s)}),!t&&this.options.supportedLngs&&e.forEach(n=>{if(t)return;const s=this.getScriptPartFromCode(n);if(this.isSupportedCode(s))return t=s;const o=this.getLanguagePartFromCode(n);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(c=>{if(c===o)return c;if(!(c.indexOf("-")<0&&o.indexOf("-")<0)&&(c.indexOf("-")>0&&o.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===o||c.indexOf(o)===0&&o.length>1))return c})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Ve(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),s=[],o=c=>{c&&(this.isSupportedCode(c)?s.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return Ve(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):Ve(e)&&o(this.formatLanguageCode(e)),n.forEach(c=>{s.indexOf(c)<0&&o(this.formatLanguageCode(c))}),s}}const Gw={zero:0,one:1,two:2,few:3,many:4,other:5},Kw={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class nD{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Ri.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const n=rh(e==="dev"?"en":e),s=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:n,type:s});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let c;try{c=new Intl.PluralRules(n,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Kw;if(!e.match(/-|_/))return Kw;const d=this.languageUtils.getLanguagePartFromCode(e);c=this.getRule(d,t)}return this.pluralRulesCache[o]=c,c}needsPlural(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(s=>`${t}${s}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((s,o)=>Gw[s]-Gw[o]).map(s=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,t,n={}){const s=this.getRule(e,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const Yw=(r,e,t,n=".",s=!0)=>{let o=Gk(r,e,t);return!o&&s&&Ve(t)&&(o=Gy(r,t,n),o===void 0&&(o=Gy(e,t,n))),o},Ey=r=>r.replace(/\$/g,"$$$$");class Qw{constructor(e={}){this.logger=Ri.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:s,prefix:o,prefixEscaped:c,suffix:u,suffixEscaped:d,formatSeparator:f,unescapeSuffix:g,unescapePrefix:y,nestingPrefix:v,nestingPrefixEscaped:w,nestingSuffix:T,nestingSuffixEscaped:N,nestingOptionsSeparator:P,maxReplaces:V,alwaysFormat:H}=e.interpolation;this.escape=t!==void 0?t:Yk,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=o?jl(o):c||"{{",this.suffix=u?jl(u):d||"}}",this.formatSeparator=f||",",this.unescapePrefix=g?"":y||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=v?jl(v):w||jl("$t("),this.nestingSuffix=T?jl(T):N||jl(")"),this.nestingOptionsSeparator=P||",",this.maxReplaces=V||1e3,this.alwaysFormat=H!==void 0?H:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,n)=>t?.source===n?(t.lastIndex=0,t):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,n,s){let o,c,u;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=w=>{if(w.indexOf(this.formatSeparator)<0){const V=Yw(t,d,w,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(V,void 0,n,{...s,...t,interpolationkey:w}):V}const T=w.split(this.formatSeparator),N=T.shift().trim(),P=T.join(this.formatSeparator).trim();return this.format(Yw(t,d,N,this.options.keySeparator,this.options.ignoreJSONStructure),P,n,{...s,...t,interpolationkey:N})};this.resetRegExp();const g=s?.missingInterpolationHandler||this.options.missingInterpolationHandler,y=s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:w=>Ey(w)},{regex:this.regexp,safeValue:w=>this.escapeValue?Ey(this.escape(w)):Ey(w)}].forEach(w=>{for(u=0;o=w.regex.exec(e);){const T=o[1].trim();if(c=f(T),c===void 0)if(typeof g=="function"){const P=g(e,o,s);c=Ve(P)?P:""}else if(s&&Object.prototype.hasOwnProperty.call(s,T))c="";else if(y){c=o[0];continue}else this.logger.warn(`missed to pass in variable ${T} for interpolating ${e}`),c="";else!Ve(c)&&!this.useRawValueToEscape&&(c=Uw(c));const N=w.safeValue(c);if(e=e.replace(o[0],N),y?(w.regex.lastIndex+=c.length,w.regex.lastIndex-=o[0].length):w.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),e}nest(e,t,n={}){let s,o,c;const u=(d,f)=>{const g=this.nestingOptionsSeparator;if(d.indexOf(g)<0)return d;const y=d.split(new RegExp(`${g}[ ]*{`));let v=`{${y[1]}`;d=y[0],v=this.interpolate(v,c);const w=v.match(/'/g),T=v.match(/"/g);((w?.length??0)%2===0&&!T||T.length%2!==0)&&(v=v.replace(/'/g,'"'));try{c=JSON.parse(v),f&&(c={...f,...c})}catch(N){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,N),`${d}${g}${v}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,d};for(;s=this.nestingRegexp.exec(e);){let d=[];c={...n},c=c.replace&&!Ve(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;const f=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(f!==-1&&(d=s[1].slice(f).split(this.formatSeparator).map(g=>g.trim()).filter(Boolean),s[1]=s[1].slice(0,f)),o=t(u.call(this,s[1].trim(),c),c),o&&s[0]===e&&!Ve(o))return o;Ve(o)||(o=Uw(o)),o||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),o=""),d.length&&(o=d.reduce((g,y)=>this.format(g,y,n.lng,{...n,interpolationkey:s[1].trim()}),o.trim())),e=e.replace(s[0],o),this.regexp.lastIndex=0}return e}}const rD=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const n=r.split("(");e=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);e==="currency"&&s.indexOf(":")<0?t.currency||(t.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?t.range||(t.range=s.trim()):s.split(";").forEach(c=>{if(c){const[u,...d]=c.split(":"),f=d.join(":").trim().replace(/^'+|'+$/g,""),g=u.trim();t[g]||(t[g]=f),f==="false"&&(t[g]=!1),f==="true"&&(t[g]=!0),isNaN(f)||(t[g]=parseInt(f,10))}})}return{formatName:e,formatOptions:t}},Ww=r=>{const e={};return(t,n,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o={...o,[s.interpolationkey]:void 0});const c=n+JSON.stringify(o);let u=e[c];return u||(u=r(rh(n),s),e[c]=u),u(t)}},iD=r=>(e,t,n)=>r(rh(t),n)(e);class sD{constructor(e={}){this.logger=Ri.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?Ww:iD;this.formats={number:n((s,o)=>{const c=new Intl.NumberFormat(s,{...o});return u=>c.format(u)}),currency:n((s,o)=>{const c=new Intl.NumberFormat(s,{...o,style:"currency"});return u=>c.format(u)}),datetime:n((s,o)=>{const c=new Intl.DateTimeFormat(s,{...o});return u=>c.format(u)}),relativetime:n((s,o)=>{const c=new Intl.RelativeTimeFormat(s,{...o});return u=>c.format(u,o.range||"day")}),list:n((s,o)=>{const c=new Intl.ListFormat(s,{...o});return u=>c.format(u)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Ww(t)}format(e,t,n,s={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(u=>u.indexOf(")")>-1)){const u=o.findIndex(d=>d.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,u)].join(this.formatSeparator)}return o.reduce((u,d)=>{const{formatName:f,formatOptions:g}=rD(d);if(this.formats[f]){let y=u;try{const v=s?.formatParams?.[s.interpolationkey]||{},w=v.locale||v.lng||s.locale||s.lng||n;y=this.formats[f](u,w,{...g,...s,...v})}catch(v){this.logger.warn(v)}return y}else this.logger.warn(`there was no format function for ${f}`);return u},e)}}const aD=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class oD extends Lm{constructor(e,t,n,s={}){super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=Ri.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,s.backend,s)}queueLoad(e,t,n,s){const o={},c={},u={},d={};return e.forEach(f=>{let g=!0;t.forEach(y=>{const v=`${f}|${y}`;!n.reload&&this.store.hasResourceBundle(f,y)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?c[v]===void 0&&(c[v]=!0):(this.state[v]=1,g=!1,c[v]===void 0&&(c[v]=!0),o[v]===void 0&&(o[v]=!0),d[y]===void 0&&(d[y]=!0)))}),g||(u[f]=!0)}),(Object.keys(o).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(o),pending:Object.keys(c),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(d)}}loaded(e,t,n){const s=e.split("|"),o=s[0],c=s[1];t&&this.emit("failedLoading",o,c,t),!t&&n&&this.store.addResourceBundle(o,c,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const u={};this.queue.forEach(d=>{$k(d.loaded,[o],c),aD(d,e),t&&d.errors.push(t),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(f=>{u[f]||(u[f]={});const g=d.loaded[f];g.length&&g.forEach(y=>{u[f][y]===void 0&&(u[f][y]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(d=>!d.done)}read(e,t,n,s=0,o=this.retryTimeout,c){if(!e.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:s,wait:o,callback:c});return}this.readingCalls++;const u=(f,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const y=this.waitingReads.shift();this.read(y.lng,y.ns,y.fcName,y.tried,y.wait,y.callback)}if(f&&g&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,s+1,o*2,c)},o);return}c(f,g)},d=this.backend[n].bind(this.backend);if(d.length===2){try{const f=d(e,t);f&&typeof f.then=="function"?f.then(g=>u(null,g)).catch(u):u(null,f)}catch(f){u(f)}return}return d(e,t,u)}prepareLoading(e,t,n={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Ve(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ve(t)&&(t=[t]);const o=this.queueLoad(e,t,n,s);if(!o.toLoad.length)return o.pending.length||s(),null;o.toLoad.forEach(c=>{this.loadOne(c)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){const n=e.split("|"),s=n[0],o=n[1];this.read(s,o,"read",void 0,void 0,(c,u)=>{c&&this.logger.warn(`${t}loading namespace ${o} for language ${s} failed`,c),!c&&u&&this.logger.log(`${t}loaded namespace ${o} for language ${s}`,u),this.loaded(e,c,u)})}saveMissing(e,t,n,s,o,c={},u=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const d={...c,isUpdate:o},f=this.backend.create.bind(this.backend);if(f.length<6)try{let g;f.length===5?g=f(e,t,n,s,d):g=f(e,t,n,s),g&&typeof g.then=="function"?g.then(y=>u(null,y)).catch(u):u(null,g)}catch(g){u(g)}else f(e,t,n,s,u,d)}!e||!e[0]||this.store.addResource(e[0],t,n,s)}}}const Xw=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),Ve(r[1])&&(e.defaultValue=r[1]),Ve(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(n=>{e[n]=t[n]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Jw=r=>(Ve(r.ns)&&(r.ns=[r.ns]),Ve(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),Ve(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs?.indexOf?.("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r),gf=()=>{},lD=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};class qu extends Lm{constructor(e={},t){if(super(),this.options=Jw(e),this.services={},this.logger=Ri,this.modules={external:[]},lD(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Ve(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=Xw();this.options={...n,...this.options,...Jw(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=n.overloadTranslationOptionHandler);const s=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?Ri.init(s(this.modules.logger),this.options):Ri.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:f=sD;const g=new $w(this.options);this.store=new Hw(this.options.resources,this.options);const y=this.services;y.logger=Ri,y.resourceStore=this.store,y.languageUtils=g,y.pluralResolver=new nD(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),f&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(y.formatter=s(f),y.formatter.init&&y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new Qw(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new oD(s(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",(w,...T)=>{this.emit(w,...T)}),this.modules.languageDetector&&(y.languageDetector=s(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=s(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new Wf(this.services,this.options),this.translator.on("*",(w,...T)=>{this.emit(w,...T)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,t||(t=gf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=(...g)=>this.store[f](...g)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=(...g)=>(this.store[f](...g),this)});const u=Cu(),d=()=>{const f=(g,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(y),t(g,y)};if(this.languages&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),u}loadResources(e,t=gf){let n=t;const s=Ve(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(s?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const o=[],c=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(f=>{f!=="cimode"&&o.indexOf(f)<0&&o.push(f)})};s?c(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),this.options.preload?.forEach?.(u=>c(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(u)})}else n(null)}reloadResources(e,t,n){const s=Cu();return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=gf),this.services.backendConnector.reload(e,t,o=>{s.resolve(),n(o)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&aS.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const n=Cu();this.emit("languageChanging",e);const s=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},o=(u,d)=>{d?this.isLanguageChangingTo===e&&(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,n.resolve((...f)=>this.t(...f)),t&&t(u,(...f)=>this.t(...f))},c=u=>{!e&&!u&&this.services.languageDetector&&(u=[]);const d=Ve(u)?u:u&&u[0],f=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(Ve(u)?[u]:u);f&&(this.language||s(f),this.translator.language||this.translator.changeLanguage(f),this.services.languageDetector?.cacheUserLanguage?.(f)),this.loadResources(f,g=>{o(g,f)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),n}getFixedT(e,t,n){const s=(o,c,...u)=>{let d;typeof c!="object"?d=this.options.overloadTranslationOptionHandler([o,c].concat(u)):d={...c},d.lng=d.lng||s.lng,d.lngs=d.lngs||s.lngs,d.ns=d.ns||s.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||n||s.keyPrefix);const f=this.options.keySeparator||".";let g;return d.keyPrefix&&Array.isArray(o)?g=o.map(y=>(typeof y=="function"&&(y=Yy(y,{...this.options,...c})),`${d.keyPrefix}${f}${y}`)):(typeof o=="function"&&(o=Yy(o,{...this.options,...c})),g=d.keyPrefix?`${d.keyPrefix}${f}${o}`:o),this.t(g,d)};return Ve(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=n,s}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const c=(u,d)=>{const f=this.services.backendConnector.state[`${u}|${d}`];return f===-1||f===0||f===2};if(t.precheck){const u=t.precheck(this,c);if(u!==void 0)return u}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(n,e)&&(!s||c(o,e)))}loadNamespaces(e,t){const n=Cu();return this.options.ns?(Ve(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),t&&t(s)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=Cu();Ve(e)&&(e=[e]);const s=this.options.preload||[],o=e.filter(c=>s.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return o.length?(this.options.preload=s.concat(o),this.loadResources(c=>{n.resolve(),t&&t(c)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const s=new Intl.Locale(e);if(s&&s.getTextInfo){const o=s.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new $w(Xw());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const n=new qu(e,t);return n.createInstance=qu.createInstance,n}cloneInstance(e={},t=gf){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},o=new qu(s);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(u=>{o[u]=this[u]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n){const u=Object.keys(this.store.data).reduce((d,f)=>(d[f]={...this.store.data[f]},d[f]=Object.keys(d[f]).reduce((g,y)=>(g[y]={...d[f][y]},g),d[f]),d),{});o.store=new Hw(u,s),o.services.resourceStore=o.store}return e.interpolation&&(o.services.interpolator=new Qw(s)),o.translator=new Wf(o.services,s),o.translator.on("*",(u,...d)=>{o.emit(u,...d)}),o.init(s,t),o.translator.options=s,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Wn=qu.createInstance();Wn.createInstance;Wn.dir;Wn.init;Wn.loadResources;Wn.reloadResources;Wn.use;Wn.changeLanguage;Wn.getFixedT;Wn.t;Wn.exists;Wn.setDefaultNamespace;Wn.hasLoadedNamespace;Wn.loadNamespaces;Wn.loadLanguages;const cD=(r,e,t,n)=>{const s=[t,{code:e,...n||{}}];if(r?.services?.logger?.forward)return r.services.logger.forward(s,"warn","react-i18next::",!0);Io(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),r?.services?.logger?.warn?r.services.logger.warn(...s):console?.warn&&console.warn(...s)},Zw={},lS=(r,e,t,n)=>{Io(t)&&Zw[t]||(Io(t)&&(Zw[t]=new Date),cD(r,e,t,n))},cS=(r,e)=>()=>{if(r.isInitialized)e();else{const t=()=>{setTimeout(()=>{r.off("initialized",t)},0),e()};r.on("initialized",t)}},Qy=(r,e,t)=>{r.loadNamespaces(e,cS(r,t))},ex=(r,e,t,n)=>{if(Io(t)&&(t=[t]),r.options.preload&&r.options.preload.indexOf(e)>-1)return Qy(r,t,n);t.forEach(s=>{r.options.ns.indexOf(s)<0&&r.options.ns.push(s)}),r.loadLanguages(e,cS(r,n))},uD=(r,e,t={})=>!e.languages||!e.languages.length?(lS(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(r,{lng:t.lng,precheck:(n,s)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!s(n.isLanguageChangingTo,r))return!1}}),Io=r=>typeof r=="string",hD=r=>typeof r=="object"&&r!==null,dD=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,fD={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},mD=r=>fD[r],gD=r=>r.replace(dD,mD);let Wy={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:gD,transDefaultProps:void 0};const pD=(r={})=>{Wy={...Wy,...r}},yD=()=>Wy;let uS;const _D=r=>{uS=r},vD=()=>uS,bD={type:"3rdParty",init(r){pD(r.options.react),_D(r)}},wD=$.createContext();class xD{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Ty={exports:{}},Sy={};var tx;function ED(){if(tx)return Sy;tx=1;var r=Om();function e(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,s=r.useEffect,o=r.useLayoutEffect,c=r.useDebugValue;function u(y,v){var w=v(),T=n({inst:{value:w,getSnapshot:v}}),N=T[0].inst,P=T[1];return o(function(){N.value=w,N.getSnapshot=v,d(N)&&P({inst:N})},[y,w,v]),s(function(){return d(N)&&P({inst:N}),y(function(){d(N)&&P({inst:N})})},[y]),c(w),w}function d(y){var v=y.getSnapshot;y=y.value;try{var w=v();return!t(y,w)}catch{return!0}}function f(y,v){return v()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Sy.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:g,Sy}var nx;function TD(){return nx||(nx=1,Ty.exports=ED()),Ty.exports}var SD=TD();const AD=(r,e)=>Io(e)?e:hD(e)&&Io(e.defaultValue)?e.defaultValue:Array.isArray(r)?r[r.length-1]:r,ID={t:AD,ready:!1},RD=()=>()=>{},Bn=(r,e={})=>{const{i18n:t}=e,{i18n:n,defaultNS:s}=$.useContext(wD)||{},o=t||n||vD();o&&!o.reportNamespaces&&(o.reportNamespaces=new xD),o||lS(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const c=$.useMemo(()=>({...yD(),...o?.options?.react,...e}),[o,e]),{useSuspense:u,keyPrefix:d}=c,f=s||o?.options?.defaultNS,g=Io(f)?[f]:f||["translation"],y=$.useMemo(()=>g,g);o?.reportNamespaces?.addUsedNamespaces?.(y);const v=$.useRef(0),w=$.useCallback(S=>{if(!o)return RD;const{bindI18n:I,bindI18nStore:C}=c,L=()=>{v.current+=1,S()};return I&&o.on(I,L),C&&o.store.on(C,L),()=>{I&&I.split(" ").forEach(k=>o.off(k,L)),C&&C.split(" ").forEach(k=>o.store.off(k,L))}},[o,c]),T=$.useRef(),N=$.useCallback(()=>{if(!o)return ID;const S=!!(o.isInitialized||o.initializedStoreOnce)&&y.every(ne=>uD(ne,o,c)),I=e.lng||o.language,C=v.current,L=T.current;if(L&&L.ready===S&&L.lng===I&&L.keyPrefix===d&&L.revision===C)return L;const G={t:o.getFixedT(I,c.nsMode==="fallback"?y:y[0],d),ready:S,lng:I,keyPrefix:d,revision:C};return T.current=G,G},[o,y,d,c,e.lng]),[P,V]=$.useState(0),{t:H,ready:B}=SD.useSyncExternalStore(w,N,N);$.useEffect(()=>{if(o&&!B&&!u){const S=()=>V(I=>I+1);e.lng?ex(o,e.lng,y,S):Qy(o,y,S)}},[o,e.lng,y,B,u,P]);const q=o||{},K=$.useRef(null),z=$.useRef(),O=S=>{const I=Object.getOwnPropertyDescriptors(S);I.__original&&delete I.__original;const C=Object.create(Object.getPrototypeOf(S),I);if(!Object.prototype.hasOwnProperty.call(C,"__original"))try{Object.defineProperty(C,"__original",{value:S,writable:!1,enumerable:!1,configurable:!1})}catch{}return C},x=$.useMemo(()=>{const S=q,I=S?.language;let C=S;S&&(K.current&&K.current.__original===S?z.current!==I?(C=O(S),K.current=C,z.current=I):C=K.current:(C=O(S),K.current=C,z.current=I));const L=[H,C,B];return L.t=H,L.i18n=C,L.ready=B,L},[H,q,B,q.resolvedLanguage,q.language,q.languages]);if(o&&u&&!B)throw new Promise(S=>{const I=()=>S();e.lng?ex(o,e.lng,y,I):Qy(o,y,I)});return x},CD=()=>{};var rx={};const hS=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},ND=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const o=r[t++];e[n++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=r[t++],c=r[t++],u=r[t++],d=((s&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const o=r[t++],c=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},dS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const o=r[s],c=s+1<r.length,u=c?r[s+1]:0,d=s+2<r.length,f=d?r[s+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,w=f&63;d||(w=64,c||(v=64)),n.push(t[g],t[y],t[v],t[w])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(hS(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):ND(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const o=t[r.charAt(s++)],u=s<r.length?t[r.charAt(s)]:0;++s;const f=s<r.length?t[r.charAt(s)]:64;++s;const y=s<r.length?t[r.charAt(s)]:64;if(++s,o==null||u==null||f==null||y==null)throw new kD;const v=o<<2|u>>4;if(n.push(v),f!==64){const w=u<<4&240|f>>2;if(n.push(w),y!==64){const T=f<<6&192|y;n.push(T)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class kD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DD=function(r){const e=hS(r);return dS.encodeByteArray(e,!0)},Xf=function(r){return DD(r).replace(/\./g,"")},fS=function(r){try{return dS.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function mS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const OD=()=>mS().__FIREBASE_DEFAULTS__,MD=()=>{if(typeof process>"u"||typeof rx>"u")return;const r=rx.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},PD=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&fS(r[1]);return e&&JSON.parse(e)},Vm=()=>{try{return CD()||OD()||MD()||PD()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},gS=r=>Vm()?.emulatorHosts?.[r],pS=r=>{const e=gS(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},yS=()=>Vm()?.config,_S=r=>Vm()?.[`_${r}`];class LD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}function qo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function U0(r){return(await fetch(r,{credentials:"include"})).ok}function vS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,o=r.sub||r.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Xf(JSON.stringify(t)),Xf(JSON.stringify(c)),""].join(".")}const $u={};function VD(){const r={prod:[],emulator:[]};for(const e of Object.keys($u))$u[e]?r.emulator.push(e):r.prod.push(e);return r}function jD(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let ix=!1;function z0(r,e){if(typeof window>"u"||typeof document>"u"||!qo(window.location.host)||$u[r]===e||$u[r]||ix)return;$u[r]=e;function t(v){return`__firebase__banner__${v}`}const n="__firebase__banner",o=VD().prod.length>0;function c(){const v=document.getElementById(n);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{ix=!0,c()},v}function g(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=jD(n),w=t("text"),T=document.getElementById(w)||document.createElement("span"),N=t("learnmore"),P=document.getElementById(N)||document.createElement("a"),V=t("preprendIcon"),H=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const B=v.element;u(B),g(P,N);const q=f();d(H,V),B.append(H,T,P,q),document.body.appendChild(B)}o?(T.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function bS(){const r=Vm()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BD(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function FD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HD(){const r=mn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function wS(){return!bS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xS(){return!bS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function ES(){try{return typeof indexedDB=="object"}catch{return!1}}function qD(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const $D="FirebaseError";class Bi extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=$D,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ih.prototype.create)}}class Ih{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?GD(o,n):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new Bi(s,u,n)}}function GD(r,e){return r.replace(KD,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const KD=/\{\$([^}]+)}/g;function YD(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ys(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const o=r[s],c=e[s];if(sx(o)&&sx(c)){if(!ys(o,c))return!1}else if(o!==c)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function sx(r){return r!==null&&typeof r=="object"}function Rh(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Lu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,o]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Vu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function QD(r,e){const t=new WD(r,e);return t.subscribe.bind(t)}class WD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");XD(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=Ay),s.error===void 0&&(s.error=Ay),s.complete===void 0&&(s.complete=Ay);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XD(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Ay(){}function Jt(r){return r&&r._delegate?r._delegate:r}class xa{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const co="[DEFAULT]";class JD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new LD;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(e4(e))try{this.getOrInitializeService({instanceIdentifier:co})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});n.resolve(o)}catch{}}}}clearInstance(e=co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=co){return this.instances.has(e)}getOptions(e=co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);n===u&&c.resolve(s)}return s}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const o=this.instances.get(n);return o&&e(o,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:ZD(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=co){return this.component?this.component.multipleInstances?e:co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZD(r){return r===co?void 0:r}function e4(r){return r.instantiationMode==="EAGER"}class t4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new JD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var tt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(tt||(tt={}));const n4={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},r4=tt.INFO,i4={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},s4=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=i4[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class B0{constructor(e){this.name=e,this._logLevel=r4,this._logHandler=s4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?n4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const a4=(r,e)=>e.some(t=>r instanceof t);let ax,ox;function o4(){return ax||(ax=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function l4(){return ox||(ox=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TS=new WeakMap,Xy=new WeakMap,SS=new WeakMap,Iy=new WeakMap,F0=new WeakMap;function c4(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",o),r.removeEventListener("error",c)},o=()=>{t(pa(r.result)),s()},c=()=>{n(r.error),s()};r.addEventListener("success",o),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&TS.set(t,r)}).catch(()=>{}),F0.set(e,r),e}function u4(r){if(Xy.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",c),r.removeEventListener("abort",c)},o=()=>{t(),s()},c=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",o),r.addEventListener("error",c),r.addEventListener("abort",c)});Xy.set(r,e)}let Jy={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Xy.get(r);if(e==="objectStoreNames")return r.objectStoreNames||SS.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pa(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function h4(r){Jy=r(Jy)}function d4(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Ry(this),e,...t);return SS.set(n,e.sort?e.sort():[e]),pa(n)}:l4().includes(r)?function(...e){return r.apply(Ry(this),e),pa(TS.get(this))}:function(...e){return pa(r.apply(Ry(this),e))}}function f4(r){return typeof r=="function"?d4(r):(r instanceof IDBTransaction&&u4(r),a4(r,o4())?new Proxy(r,Jy):r)}function pa(r){if(r instanceof IDBRequest)return c4(r);if(Iy.has(r))return Iy.get(r);const e=f4(r);return e!==r&&(Iy.set(r,e),F0.set(e,r)),e}const Ry=r=>F0.get(r);function m4(r,e,{blocked:t,upgrade:n,blocking:s,terminated:o}={}){const c=indexedDB.open(r,e),u=pa(c);return n&&c.addEventListener("upgradeneeded",d=>{n(pa(c.result),d.oldVersion,d.newVersion,pa(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const g4=["get","getKey","getAll","getAllKeys","count"],p4=["put","add","delete","clear"],Cy=new Map;function lx(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Cy.get(e))return Cy.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=p4.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||g4.includes(t)))return;const o=async function(c,...u){const d=this.transaction(c,s?"readwrite":"readonly");let f=d.store;return n&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),s&&d.done]))[0]};return Cy.set(e,o),o}h4(r=>({...r,get:(e,t,n)=>lx(e,t)||r.get(e,t,n),has:(e,t)=>!!lx(e,t)||r.has(e,t)}));class y4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_4(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function _4(r){return r.getComponent()?.type==="VERSION"}const Zy="@firebase/app",cx="0.14.6";const _s=new B0("@firebase/app"),v4="@firebase/app-compat",b4="@firebase/analytics-compat",w4="@firebase/analytics",x4="@firebase/app-check-compat",E4="@firebase/app-check",T4="@firebase/auth",S4="@firebase/auth-compat",A4="@firebase/database",I4="@firebase/data-connect",R4="@firebase/database-compat",C4="@firebase/functions",N4="@firebase/functions-compat",k4="@firebase/installations",D4="@firebase/installations-compat",O4="@firebase/messaging",M4="@firebase/messaging-compat",P4="@firebase/performance",L4="@firebase/performance-compat",V4="@firebase/remote-config",j4="@firebase/remote-config-compat",U4="@firebase/storage",z4="@firebase/storage-compat",B4="@firebase/firestore",F4="@firebase/ai",H4="@firebase/firestore-compat",q4="firebase",$4="12.6.0";const e0="[DEFAULT]",G4={[Zy]:"fire-core",[v4]:"fire-core-compat",[w4]:"fire-analytics",[b4]:"fire-analytics-compat",[E4]:"fire-app-check",[x4]:"fire-app-check-compat",[T4]:"fire-auth",[S4]:"fire-auth-compat",[A4]:"fire-rtdb",[I4]:"fire-data-connect",[R4]:"fire-rtdb-compat",[C4]:"fire-fn",[N4]:"fire-fn-compat",[k4]:"fire-iid",[D4]:"fire-iid-compat",[O4]:"fire-fcm",[M4]:"fire-fcm-compat",[P4]:"fire-perf",[L4]:"fire-perf-compat",[V4]:"fire-rc",[j4]:"fire-rc-compat",[U4]:"fire-gcs",[z4]:"fire-gcs-compat",[B4]:"fire-fst",[H4]:"fire-fst-compat",[F4]:"fire-vertex","fire-js":"fire-js",[q4]:"fire-js-all"};const Jf=new Map,K4=new Map,t0=new Map;function ux(r,e){try{r.container.addComponent(e)}catch(t){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Ro(r){const e=r.name;if(t0.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;t0.set(e,r);for(const t of Jf.values())ux(t,r);for(const t of K4.values())ux(t,r);return!0}function jm(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function yr(r){return r==null?!1:r.settings!==void 0}const Y4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ya=new Ih("app","Firebase",Y4);class Q4{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new xa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ya.create("app-deleted",{appName:this._name})}}const $o=$4;function AS(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:e0,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw ya.create("bad-app-name",{appName:String(s)});if(t||(t=yS()),!t)throw ya.create("no-options");const o=Jf.get(s);if(o){if(ys(t,o.options)&&ys(n,o.config))return o;throw ya.create("duplicate-app",{appName:s})}const c=new t4(s);for(const d of t0.values())c.addComponent(d);const u=new Q4(t,n,c);return Jf.set(s,u),u}function H0(r=e0){const e=Jf.get(r);if(!e&&r===e0&&yS())return AS();if(!e)throw ya.create("no-app",{appName:r});return e}function ki(r,e,t){let n=G4[r]??r;t&&(n+=`-${t}`);const s=n.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${n}" with version "${e}":`];s&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(c.join(" "));return}Ro(new xa(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const W4="firebase-heartbeat-database",X4=1,ih="firebase-heartbeat-store";let Ny=null;function IS(){return Ny||(Ny=m4(W4,X4,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ih)}catch(t){console.warn(t)}}}}).catch(r=>{throw ya.create("idb-open",{originalErrorMessage:r.message})})),Ny}async function J4(r){try{const t=(await IS()).transaction(ih),n=await t.objectStore(ih).get(RS(r));return await t.done,n}catch(e){if(e instanceof Bi)_s.warn(e.message);else{const t=ya.create("idb-get",{originalErrorMessage:e?.message});_s.warn(t.message)}}}async function hx(r,e){try{const n=(await IS()).transaction(ih,"readwrite");await n.objectStore(ih).put(e,RS(r)),await n.done}catch(t){if(t instanceof Bi)_s.warn(t.message);else{const n=ya.create("idb-set",{originalErrorMessage:t?.message});_s.warn(n.message)}}}function RS(r){return`${r.name}!${r.options.appId}`}const Z4=1024,eO=30;class tO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rO(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=dx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>eO){const s=iO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_s.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=dx(),{heartbeatsToSend:t,unsentEntries:n}=nO(this._heartbeatsCache.heartbeats),s=Xf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return _s.warn(e),""}}}function dx(){return new Date().toISOString().substring(0,10)}function nO(r,e=Z4){const t=[];let n=r.slice();for(const s of r){const o=t.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),fx(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),fx(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class rO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ES()?qD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await J4(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return hx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return hx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function fx(r){return Xf(JSON.stringify({version:2,heartbeats:r})).length}function iO(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}function sO(r){Ro(new xa("platform-logger",e=>new y4(e),"PRIVATE")),Ro(new xa("heartbeat",e=>new tO(e),"PRIVATE")),ki(Zy,cx,r),ki(Zy,cx,"esm2020"),ki("fire-js","")}sO("");var aO="firebase",oO="12.6.0";ki(aO,oO,"app");function CS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lO=CS,NS=new Ih("auth","Firebase",CS());const Zf=new B0("@firebase/auth");function cO(r,...e){Zf.logLevel<=tt.WARN&&Zf.warn(`Auth (${$o}): ${r}`,...e)}function Cf(r,...e){Zf.logLevel<=tt.ERROR&&Zf.error(`Auth (${$o}): ${r}`,...e)}function ni(r,...e){throw q0(r,...e)}function Di(r,...e){return q0(r,...e)}function kS(r,e,t){const n={...lO(),[e]:t};return new Ih("auth","Firebase",n).create(e,{appName:r.name})}function gs(r){return kS(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function q0(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return NS.create(r,...e)}function Le(r,e,...t){if(!r)throw q0(e,...t)}function hs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Cf(e),new Error(e)}function vs(r,e){r||hs(e)}function n0(){return typeof self<"u"&&self.location?.href||""}function uO(){return mx()==="http:"||mx()==="https:"}function mx(){return typeof self<"u"&&self.location?.protocol||null}function hO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uO()||BD()||"connection"in navigator)?navigator.onLine:!0}function dO(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Ch{constructor(e,t){this.shortDelay=e,this.longDelay=t,vs(t>e,"Short delay should be less than long delay!"),this.isMobile=UD()||FD()}get(){return hO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function $0(r,e){vs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class DS{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const mO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gO=new Ch(3e4,6e4);function Ts(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Fi(r,e,t,n,s={}){return OS(r,s,async()=>{let o={},c={};n&&(e==="GET"?c=n:o={body:JSON.stringify(n)});const u=Rh({key:r.config.apiKey,...c}).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const f={method:e,headers:d,...o};return zD()||(f.referrerPolicy="no-referrer"),r.emulatorConfig&&qo(r.emulatorConfig.host)&&(f.credentials="include"),DS.fetch()(await MS(r,r.config.apiHost,t,u),f)})}async function OS(r,e,t){r._canInitEmulator=!1;const n={...fO,...e};try{const s=new yO(r),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw pf(r,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw pf(r,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw pf(r,"email-already-in-use",c);if(d==="USER_DISABLED")throw pf(r,"user-disabled",c);const g=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw kS(r,g,f);ni(r,g)}}catch(s){if(s instanceof Bi)throw s;ni(r,"network-request-failed",{message:String(s)})}}async function Nh(r,e,t,n,s={}){const o=await Fi(r,e,t,n,s);return"mfaPendingCredential"in o&&ni(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function MS(r,e,t,n){const s=`${e}${t}?${n}`,o=r,c=o.config.emulator?$0(r.config,s):`${r.config.apiScheme}://${s}`;return mO.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function pO(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Di(this.auth,"network-request-failed")),gO.get())})}}function pf(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=Di(r,e,n);return s.customData._tokenResponse=t,s}function gx(r){return r!==void 0&&r.enterprise!==void 0}class _O{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return pO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vO(r,e){return Fi(r,"GET","/v2/recaptchaConfig",Ts(r,e))}async function bO(r,e){return Fi(r,"POST","/v1/accounts:delete",e)}async function em(r,e){return Fi(r,"POST","/v1/accounts:lookup",e)}function Gu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wO(r,e=!1){const t=Jt(r),n=await t.getIdToken(e),s=G0(n);Le(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:n,authTime:Gu(ky(s.auth_time)),issuedAtTime:Gu(ky(s.iat)),expirationTime:Gu(ky(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function ky(r){return Number(r)*1e3}function G0(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Cf("JWT malformed, contained fewer than 3 sections"),null;try{const s=fS(t);return s?JSON.parse(s):(Cf("Failed to decode base64 JWT payload"),null)}catch(s){return Cf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function px(r){const e=G0(r);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function sc(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Bi&&xO(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function xO({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class EO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class r0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gu(this.lastLoginAt),this.creationTime=Gu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function tm(r){const e=r.auth,t=await r.getIdToken(),n=await sc(r,em(e,{idToken:t}));Le(n?.users.length,e,"internal-error");const s=n.users[0];r._notifyReloadListener(s);const o=s.providerUserInfo?.length?PS(s.providerUserInfo):[],c=SO(r.providerData,o),u=r.isAnonymous,d=!(r.email&&s.passwordHash)&&!c?.length,f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new r0(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(r,g)}async function TO(r){const e=Jt(r);await tm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SO(r,e){return[...r.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function PS(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function AO(r,e){const t=await OS(r,{},async()=>{const n=Rh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=r.config,c=await MS(r,s,"/v1/token",`key=${o}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:n};return r.emulatorConfig&&qo(r.emulatorConfig.host)&&(d.credentials="include"),DS.fetch()(c,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function IO(r,e){return Fi(r,"POST","/v2/accounts:revokeToken",Ts(r,e))}class Zl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):px(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const t=px(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:o}=await AO(e,t);this.updateTokensAndExpiration(n,s,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:o}=t,c=new Zl;return n&&(Le(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),s&&(Le(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(Le(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zl,this.toJSON())}_performRefresh(){return hs("not implemented")}}function sa(r,e){Le(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ei{constructor({uid:e,auth:t,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new EO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new r0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await sc(this,this.stsTokenManager.getToken(this.auth,e));return Le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return wO(this,e)}reload(){return TO(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ei({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await tm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yr(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await sc(this,bO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:w,providerData:T,stsTokenManager:N}=t;Le(y&&N,e,"internal-error");const P=Zl.fromJSON(this.name,N);Le(typeof y=="string",e,"internal-error"),sa(n,e.name),sa(s,e.name),Le(typeof v=="boolean",e,"internal-error"),Le(typeof w=="boolean",e,"internal-error"),sa(o,e.name),sa(c,e.name),sa(u,e.name),sa(d,e.name),sa(f,e.name),sa(g,e.name);const V=new ei({uid:y,auth:e,email:s,emailVerified:v,displayName:n,isAnonymous:w,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:P,createdAt:f,lastLoginAt:g});return T&&Array.isArray(T)&&(V.providerData=T.map(H=>({...H}))),d&&(V._redirectEventId=d),V}static async _fromIdTokenResponse(e,t,n=!1){const s=new Zl;s.updateFromServerResponse(t);const o=new ei({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await tm(o),o}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];Le(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?PS(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,u=new Zl;u.updateFromIdToken(n);const d=new ei({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new r0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}const yx=new Map;function ds(r){vs(r instanceof Function,"Expected a class definition");let e=yx.get(r);return e?(vs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,yx.set(r,e),e)}class LS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}LS.type="NONE";const _x=LS;function Nf(r,e,t){return`firebase:${r}:${e}:${t}`}class ec{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:o}=this.auth;this.fullUserKey=Nf(this.userKey,s.apiKey,o),this.fullPersistenceKey=Nf("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await em(this.auth,{idToken:e}).catch(()=>{});return t?ei._fromGetAccountInfoResponse(this.auth,t,e):null}return ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new ec(ds(_x),e,n);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||ds(_x);const c=Nf(n,e.config.apiKey,e.name);let u=null;for(const f of t)try{const g=await f._get(c);if(g){let y;if(typeof g=="string"){const v=await em(e,{idToken:g}).catch(()=>{});if(!v)break;y=await ei._fromGetAccountInfoResponse(e,v,g)}else y=ei._fromJSON(e,g);f!==o&&(u=y),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new ec(o,e,n):(o=d[0],u&&await o._set(c,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new ec(o,e,n))}}function vx(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FS(e))return"Blackberry";if(HS(e))return"Webos";if(jS(e))return"Safari";if((e.includes("chrome/")||US(e))&&!e.includes("edge/"))return"Chrome";if(BS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if(n?.length===2)return n[1]}return"Other"}function VS(r=mn()){return/firefox\//i.test(r)}function jS(r=mn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function US(r=mn()){return/crios\//i.test(r)}function zS(r=mn()){return/iemobile/i.test(r)}function BS(r=mn()){return/android/i.test(r)}function FS(r=mn()){return/blackberry/i.test(r)}function HS(r=mn()){return/webos/i.test(r)}function K0(r=mn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function RO(r=mn()){return K0(r)&&!!window.navigator?.standalone}function CO(){return HD()&&document.documentMode===10}function qS(r=mn()){return K0(r)||BS(r)||HS(r)||FS(r)||/windows phone/i.test(r)||zS(r)}function $S(r,e=[]){let t;switch(r){case"Browser":t=vx(mn());break;case"Worker":t=`${vx(mn())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$o}/${n}`}class NO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=o=>new Promise((c,u)=>{try{const d=e(o);c(d)}catch(d){u(d)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function kO(r,e={}){return Fi(r,"GET","/v2/passwordPolicy",Ts(r,e))}const DO=6;class OO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??DO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class MO{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bx(this),this.idTokenSubscription=new bx(this),this.beforeStateQueue=new NO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ds(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ec.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await em(this,{idToken:e}),n=await ei._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(yr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=n?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(n=u.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await tm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yr(this.app))return Promise.reject(gs(this));const t=e?Jt(e):null;return t&&Le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yr(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yr(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kO(this),t=new OO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ih("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await IO(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ds(e)||this._popupRedirectResolver;Le(t,this,"argument-error"),this.redirectPersistenceManager=await ec.create(this,[ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,s);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$S(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&cO(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Go(r){return Jt(r)}class bx{constructor(e){this.auth=e,this.observer=null,this.addObserver=QD(t=>this.observer=t)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Um={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PO(r){Um=r}function GS(r){return Um.loadJS(r)}function LO(){return Um.recaptchaEnterpriseScript}function VO(){return Um.gapiScript}function jO(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class UO{constructor(){this.enterprise=new zO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class zO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const BO="recaptcha-enterprise",KS="NO_RECAPTCHA";class FO{constructor(e){this.type=BO,this.auth=Go(e)}async verify(e="verify",t=!1){async function n(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{vO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new _O(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(d=>{u(d)})})}function s(o,c,u){const d=window.grecaptcha;gx(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(KS)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new UO().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{n(this.auth).then(u=>{if(!t&&gx(window.grecaptcha))s(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=LO();d.length!==0&&(d+=u),GS(d).then(()=>{s(u,o,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function wx(r,e,t,n=!1,s=!1){const o=new FO(r);let c;if(s)c=KS;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function i0(r,e,t,n,s){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await wx(r,e,t,t==="getOobCode");return n(r,o)}else return n(r,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await wx(r,e,t,t==="getOobCode");return n(r,c)}else return Promise.reject(o)})}function HO(r,e){const t=jm(r,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(ys(o,e??{}))return s;ni(s,"already-initialized")}return t.initialize({options:e})}function qO(r,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(ds);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e?.popupRedirectResolver)}function $O(r,e,t){const n=Go(r);Le(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,o=YS(e),{host:c,port:u}=GO(e),d=u===null?"":`:${u}`,f={url:`${o}//${c}${d}/`},g=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Le(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Le(ys(f,n.config.emulator)&&ys(g,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=f,n.emulatorConfig=g,n.settings.appVerificationDisabledForTesting=!0,qo(c)?(U0(`${o}//${c}${d}`),z0("Auth",!0)):KO()}function YS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function GO(r){const e=YS(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const o=s[1];return{host:o,port:xx(n.substr(o.length+1))}}else{const[o,c]=n.split(":");return{host:o,port:xx(c)}}}function xx(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function KO(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class Y0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,t){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}async function YO(r,e){return Fi(r,"POST","/v1/accounts:signUp",e)}async function QO(r,e){return Nh(r,"POST","/v1/accounts:signInWithPassword",Ts(r,e))}async function WO(r,e){return Fi(r,"POST","/v1/accounts:sendOobCode",Ts(r,e))}async function XO(r,e){return WO(r,e)}async function JO(r,e){return Nh(r,"POST","/v1/accounts:signInWithEmailLink",Ts(r,e))}async function ZO(r,e){return Nh(r,"POST","/v1/accounts:signInWithEmailLink",Ts(r,e))}class sh extends Y0{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new sh(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new sh(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return i0(e,t,"signInWithPassword",QO);case"emailLink":return JO(e,{email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return i0(e,n,"signUpPassword",YO);case"emailLink":return ZO(e,{idToken:t,email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function tc(r,e){return Nh(r,"POST","/v1/accounts:signInWithIdp",Ts(r,e))}const eM="http://localhost";class Co extends Y0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Co(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ni("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...o}=t;if(!n||!s)return null;const c=new Co(n,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return tc(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,tc(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tc(e,t)}buildRequest(){const e={requestUri:eM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Rh(t)}return e}}function tM(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nM(r){const e=Lu(Vu(r)).link,t=e?Lu(Vu(e)).deep_link_id:null,n=Lu(Vu(r)).deep_link_id;return(n?Lu(Vu(n)).link:null)||n||t||e||r}class Q0{constructor(e){const t=Lu(Vu(e)),n=t.apiKey??null,s=t.oobCode??null,o=tM(t.mode??null);Le(n&&s&&o,"argument-error"),this.apiKey=n,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=nM(e);try{return new Q0(t)}catch{return null}}}class wc{constructor(){this.providerId=wc.PROVIDER_ID}static credential(e,t){return sh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Q0.parseLink(t);return Le(n,"argument-error"),sh._fromEmailAndCode(e,n.code,n.tenantId)}}wc.PROVIDER_ID="password";wc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class QS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class kh extends QS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ha extends kh{constructor(){super("facebook.com")}static credential(e){return Co._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.FACEBOOK_SIGN_IN_METHOD="facebook.com";ha.PROVIDER_ID="facebook.com";class us extends kh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Co._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return us.credential(t,n)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";class da extends kh{constructor(){super("github.com")}static credential(e){return Co._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return da.credential(e.oauthAccessToken)}catch{return null}}}da.GITHUB_SIGN_IN_METHOD="github.com";da.PROVIDER_ID="github.com";class fa extends kh{constructor(){super("twitter.com")}static credential(e,t){return Co._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return fa.credential(t,n)}catch{return null}}}fa.TWITTER_SIGN_IN_METHOD="twitter.com";fa.PROVIDER_ID="twitter.com";async function rM(r,e){return Nh(r,"POST","/v1/accounts:signUp",Ts(r,e))}class No{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const o=await ei._fromIdTokenResponse(e,n,s),c=Ex(n);return new No({user:o,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=Ex(n);return new No({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function Ex(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class nm extends Bi{constructor(e,t,n,s){super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,nm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new nm(e,t,n,s)}}function WS(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?nm._fromErrorAndOperation(r,o,e,n):o})}async function iM(r,e,t=!1){const n=await sc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return No._forOperation(r,"link",n)}async function sM(r,e,t=!1){const{auth:n}=r;if(yr(n.app))return Promise.reject(gs(n));const s="reauthenticate";try{const o=await sc(r,WS(n,s,e,r),t);Le(o.idToken,n,"internal-error");const c=G0(o.idToken);Le(c,n,"internal-error");const{sub:u}=c;return Le(r.uid===u,n,"user-mismatch"),No._forOperation(r,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&ni(n,"user-mismatch"),o}}async function XS(r,e,t=!1){if(yr(r.app))return Promise.reject(gs(r));const n="signIn",s=await WS(r,n,e),o=await No._fromIdTokenResponse(r,n,s);return t||await r._updateCurrentUser(o.user),o}async function aM(r,e){return XS(Go(r),e)}async function JS(r){const e=Go(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function oM(r,e,t){if(yr(r.app))return Promise.reject(gs(r));const n=Go(r),c=await i0(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rM).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&JS(r),d}),u=await No._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(u.user),u}function Tx(r,e,t){return yr(r.app)?Promise.reject(gs(r)):aM(Jt(r),wc.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&JS(r),n})}async function ZS(r,e){const t=Jt(r),s={requestType:"VERIFY_EMAIL",idToken:await r.getIdToken()},{email:o}=await XO(t.auth,s);o!==r.email&&await r.reload()}async function lM(r,e){return Fi(r,"POST","/v1/accounts:update",e)}async function eA(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=Jt(r),o={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await sc(n,lM(n.auth,o));n.displayName=c.displayName||null,n.photoURL=c.photoUrl||null;const u=n.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=n.displayName,u.photoURL=n.photoURL),await n._updateTokensIfNecessary(c)}function cM(r,e,t,n){return Jt(r).onIdTokenChanged(e,t,n)}function uM(r,e,t){return Jt(r).beforeAuthStateChanged(e,t)}function hM(r,e,t,n){return Jt(r).onAuthStateChanged(e,t,n)}const rm="__sak";class tA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rm,"1"),this.storage.removeItem(rm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const dM=1e3,fM=10;class nA extends tA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(n);!t&&this.localCache[n]===c||this.notifyListeners(n,c)},o=this.storage.getItem(n);CO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,fM):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},dM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}nA.type="LOCAL";const mM=nA;class rA extends tA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}rA.type="SESSION";const iA=rA;function gM(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class zm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new zm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:o}=t.data,c=this.handlersMap[s];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const u=Array.from(c).map(async f=>f(t.origin,o)),d=await gM(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zm.receivers=[];function W0(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}class pM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((u,d)=>{const f=W0("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},n);c={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Oi(){return window}function yM(r){Oi().location.href=r}function sA(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function _M(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vM(){return navigator?.serviceWorker?.controller||null}function bM(){return sA()?self:null}const aA="firebaseLocalStorageDb",wM=1,im="firebaseLocalStorage",oA="fbase_key";class Dh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bm(r,e){return r.transaction([im],e?"readwrite":"readonly").objectStore(im)}function xM(){const r=indexedDB.deleteDatabase(aA);return new Dh(r).toPromise()}function s0(){const r=indexedDB.open(aA,wM);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(im,{keyPath:oA})}catch(s){t(s)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(im)?e(n):(n.close(),await xM(),e(await s0()))})})}async function Sx(r,e,t){const n=Bm(r,!0).put({[oA]:e,value:t});return new Dh(n).toPromise()}async function EM(r,e){const t=Bm(r,!1).get(e),n=await new Dh(t).toPromise();return n===void 0?null:n.value}function Ax(r,e){const t=Bm(r,!0).delete(e);return new Dh(t).toPromise()}const TM=800,SM=3;class lA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await s0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>SM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zm._getInstance(bM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _M(),!this.activeServiceWorker)return;this.sender=new pM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await s0();return await Sx(e,rm,"1"),await Ax(e,rm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sx(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>EM(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ax(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Bm(s,!1).getAll();return new Dh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lA.type="LOCAL";const AM=lA;new Ch(3e4,6e4);function IM(r,e){return e?ds(e):(Le(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class X0 extends Y0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function RM(r){return XS(r.auth,new X0(r),r.bypassAuthState)}function CM(r){const{auth:e,user:t}=r;return Le(t,e,"internal-error"),sM(t,new X0(r),r.bypassAuthState)}async function NM(r){const{auth:e,user:t}=r;return Le(t,e,"internal-error"),iM(t,new X0(r),r.bypassAuthState)}class cA{constructor(e,t,n,s,o=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RM;case"linkViaPopup":case"linkViaRedirect":return NM;case"reauthViaPopup":case"reauthViaRedirect":return CM;default:ni(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const kM=new Ch(2e3,1e4);class Xl extends cA{constructor(e,t,n,s,o){super(e,t,s,o),this.provider=n,this.authWindow=null,this.pollId=null,Xl.currentPopupAction&&Xl.currentPopupAction.cancel(),Xl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const e=W0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kM.get())};e()}}Xl.currentPopupAction=null;const DM="pendingRedirect",kf=new Map;class OM extends cA{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=kf.get(this.auth._key());if(!e){try{const n=await MM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}kf.set(this.auth._key(),e)}return this.bypassAuthState||kf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MM(r,e){const t=VM(e),n=LM(r);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function PM(r,e){kf.set(r._key(),e)}function LM(r){return ds(r._redirectPersistence)}function VM(r){return Nf(DM,r.config.apiKey,r.name)}async function jM(r,e,t=!1){if(yr(r.app))return Promise.reject(gs(r));const n=Go(r),s=IM(n,e),c=await new OM(n,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}const UM=600*1e3;class zM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!uA(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Di(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ix(e))}saveEventToCache(e){this.cachedEventUids.add(Ix(e)),this.lastProcessedEventTime=Date.now()}}function Ix(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function uA({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function BM(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uA(r);default:return!1}}async function FM(r,e={}){return Fi(r,"GET","/v1/projects",e)}const HM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qM=/^https?/;async function $M(r){if(r.config.emulator)return;const{authorizedDomains:e}=await FM(r);for(const t of e)try{if(GM(t))return}catch{}ni(r,"unauthorized-domain")}function GM(r){const e=n0(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===n}if(!qM.test(t))return!1;if(HM.test(r))return n===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}const KM=new Ch(3e4,6e4);function Rx(){const r=Oi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function YM(r){return new Promise((e,t)=>{function n(){Rx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Rx(),t(Di(r,"network-request-failed"))},timeout:KM.get()})}if(Oi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Oi().gapi?.load)n();else{const s=jO("iframefcb");return Oi()[s]=()=>{gapi.load?n():t(Di(r,"network-request-failed"))},GS(`${VO()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw Df=null,e})}let Df=null;function QM(r){return Df=Df||YM(r),Df}const WM=new Ch(5e3,15e3),XM="__/auth/iframe",JM="emulator/auth/iframe",ZM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t5(r){const e=r.config;Le(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?$0(e,JM):`https://${r.config.authDomain}/${XM}`,n={apiKey:e.apiKey,appName:r.name,v:$o},s=e5.get(r.config.apiHost);s&&(n.eid=s);const o=r._getFrameworks();return o.length&&(n.fw=o.join(",")),`${t}?${Rh(n).slice(1)}`}async function n5(r){const e=await QM(r),t=Oi().gapi;return Le(t,r,"internal-error"),e.open({where:document.body,url:t5(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZM,dontclear:!0},n=>new Promise(async(s,o)=>{await n.restyle({setHideOnLeave:!1});const c=Di(r,"network-request-failed"),u=Oi().setTimeout(()=>{o(c)},WM.get());function d(){Oi().clearTimeout(u),s(n)}n.ping(d).then(d,()=>{o(c)})}))}const r5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},i5=500,s5=600,a5="_blank",o5="http://localhost";class Cx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l5(r,e,t,n=i5,s=s5){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const d={...r5,width:n.toString(),height:s.toString(),top:o,left:c},f=mn().toLowerCase();t&&(u=US(f)?a5:t),VS(f)&&(e=e||o5,d.scrollbars="yes");const g=Object.entries(d).reduce((v,[w,T])=>`${v}${w}=${T},`,"");if(RO(f)&&u!=="_self")return c5(e||"",u),new Cx(null);const y=window.open(e||"",u,g);Le(y,r,"popup-blocked");try{y.focus()}catch{}return new Cx(y)}function c5(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}const u5="__/auth/handler",h5="emulator/auth/handler",d5=encodeURIComponent("fac");async function Nx(r,e,t,n,s,o){Le(r.config.authDomain,r,"auth-domain-config-required"),Le(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:$o,eventId:s};if(e instanceof QS){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",YD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof kh){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}r.tenantId&&(c.tid=r.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await r._getAppCheckToken(),f=d?`#${d5}=${encodeURIComponent(d)}`:"";return`${f5(r)}?${Rh(u).slice(1)}${f}`}function f5({config:r}){return r.emulator?$0(r,h5):`https://${r.authDomain}/${u5}`}const Dy="webStorageSupport";class m5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iA,this._completeRedirectFn=jM,this._overrideRedirectResult=PM}async _openPopup(e,t,n,s){vs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Nx(e,t,n,n0(),s);return l5(e,o,W0())}async _openRedirect(e,t,n,s){await this._originValidation(e);const o=await Nx(e,t,n,n0(),s);return yM(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(vs(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await n5(e),n=new zM(e);return t.register("authEvent",s=>(Le(s?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Dy,{type:Dy},s=>{const o=s?.[0]?.[Dy];o!==void 0&&t(!!o),ni(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$M(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qS()||jS()||K0()}}const g5=m5;var kx="@firebase/auth",Dx="1.11.1";class p5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function y5(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _5(r){Ro(new xa("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=n.options;Le(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:c,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$S(r)},f=new MO(n,s,o,d);return qO(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ro(new xa("auth-internal",e=>{const t=Go(e.getProvider("auth").getImmediate());return(n=>new p5(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(kx,Dx,y5(r)),ki(kx,Dx,"esm2020")}const v5=300,b5=_S("authIdTokenMaxAge")||v5;let Ox=null;const w5=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>b5)return;const s=t?.token;Ox!==s&&(Ox=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function x5(r=H0()){const e=jm(r,"auth");if(e.isInitialized())return e.getImmediate();const t=HO(r,{popupRedirectResolver:g5,persistence:[AM,mM,iA]}),n=_S("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const c=w5(o.toString());uM(t,c,()=>c(t.currentUser)),cM(t,u=>c(u))}}const s=gS("auth");return s&&$O(t,`http://${s}`),t}function E5(){return document.getElementsByTagName("head")?.[0]??document}PO({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=s=>{const o=Di("internal-error");o.customData=s,t(o)},n.type="text/javascript",n.charset="UTF-8",E5().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_5("Browser");var Mx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _a,hA;(function(){var r;function e(O,x){function S(){}S.prototype=x.prototype,O.F=x.prototype,O.prototype=new S,O.prototype.constructor=O,O.D=function(I,C,L){for(var k=Array(arguments.length-2),G=2;G<arguments.length;G++)k[G-2]=arguments[G];return x.prototype[C].apply(I,k)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(O,x,S){S||(S=0);const I=Array(16);if(typeof x=="string")for(var C=0;C<16;++C)I[C]=x.charCodeAt(S++)|x.charCodeAt(S++)<<8|x.charCodeAt(S++)<<16|x.charCodeAt(S++)<<24;else for(C=0;C<16;++C)I[C]=x[S++]|x[S++]<<8|x[S++]<<16|x[S++]<<24;x=O.g[0],S=O.g[1],C=O.g[2];let L=O.g[3],k;k=x+(L^S&(C^L))+I[0]+3614090360&4294967295,x=S+(k<<7&4294967295|k>>>25),k=L+(C^x&(S^C))+I[1]+3905402710&4294967295,L=x+(k<<12&4294967295|k>>>20),k=C+(S^L&(x^S))+I[2]+606105819&4294967295,C=L+(k<<17&4294967295|k>>>15),k=S+(x^C&(L^x))+I[3]+3250441966&4294967295,S=C+(k<<22&4294967295|k>>>10),k=x+(L^S&(C^L))+I[4]+4118548399&4294967295,x=S+(k<<7&4294967295|k>>>25),k=L+(C^x&(S^C))+I[5]+1200080426&4294967295,L=x+(k<<12&4294967295|k>>>20),k=C+(S^L&(x^S))+I[6]+2821735955&4294967295,C=L+(k<<17&4294967295|k>>>15),k=S+(x^C&(L^x))+I[7]+4249261313&4294967295,S=C+(k<<22&4294967295|k>>>10),k=x+(L^S&(C^L))+I[8]+1770035416&4294967295,x=S+(k<<7&4294967295|k>>>25),k=L+(C^x&(S^C))+I[9]+2336552879&4294967295,L=x+(k<<12&4294967295|k>>>20),k=C+(S^L&(x^S))+I[10]+4294925233&4294967295,C=L+(k<<17&4294967295|k>>>15),k=S+(x^C&(L^x))+I[11]+2304563134&4294967295,S=C+(k<<22&4294967295|k>>>10),k=x+(L^S&(C^L))+I[12]+1804603682&4294967295,x=S+(k<<7&4294967295|k>>>25),k=L+(C^x&(S^C))+I[13]+4254626195&4294967295,L=x+(k<<12&4294967295|k>>>20),k=C+(S^L&(x^S))+I[14]+2792965006&4294967295,C=L+(k<<17&4294967295|k>>>15),k=S+(x^C&(L^x))+I[15]+1236535329&4294967295,S=C+(k<<22&4294967295|k>>>10),k=x+(C^L&(S^C))+I[1]+4129170786&4294967295,x=S+(k<<5&4294967295|k>>>27),k=L+(S^C&(x^S))+I[6]+3225465664&4294967295,L=x+(k<<9&4294967295|k>>>23),k=C+(x^S&(L^x))+I[11]+643717713&4294967295,C=L+(k<<14&4294967295|k>>>18),k=S+(L^x&(C^L))+I[0]+3921069994&4294967295,S=C+(k<<20&4294967295|k>>>12),k=x+(C^L&(S^C))+I[5]+3593408605&4294967295,x=S+(k<<5&4294967295|k>>>27),k=L+(S^C&(x^S))+I[10]+38016083&4294967295,L=x+(k<<9&4294967295|k>>>23),k=C+(x^S&(L^x))+I[15]+3634488961&4294967295,C=L+(k<<14&4294967295|k>>>18),k=S+(L^x&(C^L))+I[4]+3889429448&4294967295,S=C+(k<<20&4294967295|k>>>12),k=x+(C^L&(S^C))+I[9]+568446438&4294967295,x=S+(k<<5&4294967295|k>>>27),k=L+(S^C&(x^S))+I[14]+3275163606&4294967295,L=x+(k<<9&4294967295|k>>>23),k=C+(x^S&(L^x))+I[3]+4107603335&4294967295,C=L+(k<<14&4294967295|k>>>18),k=S+(L^x&(C^L))+I[8]+1163531501&4294967295,S=C+(k<<20&4294967295|k>>>12),k=x+(C^L&(S^C))+I[13]+2850285829&4294967295,x=S+(k<<5&4294967295|k>>>27),k=L+(S^C&(x^S))+I[2]+4243563512&4294967295,L=x+(k<<9&4294967295|k>>>23),k=C+(x^S&(L^x))+I[7]+1735328473&4294967295,C=L+(k<<14&4294967295|k>>>18),k=S+(L^x&(C^L))+I[12]+2368359562&4294967295,S=C+(k<<20&4294967295|k>>>12),k=x+(S^C^L)+I[5]+4294588738&4294967295,x=S+(k<<4&4294967295|k>>>28),k=L+(x^S^C)+I[8]+2272392833&4294967295,L=x+(k<<11&4294967295|k>>>21),k=C+(L^x^S)+I[11]+1839030562&4294967295,C=L+(k<<16&4294967295|k>>>16),k=S+(C^L^x)+I[14]+4259657740&4294967295,S=C+(k<<23&4294967295|k>>>9),k=x+(S^C^L)+I[1]+2763975236&4294967295,x=S+(k<<4&4294967295|k>>>28),k=L+(x^S^C)+I[4]+1272893353&4294967295,L=x+(k<<11&4294967295|k>>>21),k=C+(L^x^S)+I[7]+4139469664&4294967295,C=L+(k<<16&4294967295|k>>>16),k=S+(C^L^x)+I[10]+3200236656&4294967295,S=C+(k<<23&4294967295|k>>>9),k=x+(S^C^L)+I[13]+681279174&4294967295,x=S+(k<<4&4294967295|k>>>28),k=L+(x^S^C)+I[0]+3936430074&4294967295,L=x+(k<<11&4294967295|k>>>21),k=C+(L^x^S)+I[3]+3572445317&4294967295,C=L+(k<<16&4294967295|k>>>16),k=S+(C^L^x)+I[6]+76029189&4294967295,S=C+(k<<23&4294967295|k>>>9),k=x+(S^C^L)+I[9]+3654602809&4294967295,x=S+(k<<4&4294967295|k>>>28),k=L+(x^S^C)+I[12]+3873151461&4294967295,L=x+(k<<11&4294967295|k>>>21),k=C+(L^x^S)+I[15]+530742520&4294967295,C=L+(k<<16&4294967295|k>>>16),k=S+(C^L^x)+I[2]+3299628645&4294967295,S=C+(k<<23&4294967295|k>>>9),k=x+(C^(S|~L))+I[0]+4096336452&4294967295,x=S+(k<<6&4294967295|k>>>26),k=L+(S^(x|~C))+I[7]+1126891415&4294967295,L=x+(k<<10&4294967295|k>>>22),k=C+(x^(L|~S))+I[14]+2878612391&4294967295,C=L+(k<<15&4294967295|k>>>17),k=S+(L^(C|~x))+I[5]+4237533241&4294967295,S=C+(k<<21&4294967295|k>>>11),k=x+(C^(S|~L))+I[12]+1700485571&4294967295,x=S+(k<<6&4294967295|k>>>26),k=L+(S^(x|~C))+I[3]+2399980690&4294967295,L=x+(k<<10&4294967295|k>>>22),k=C+(x^(L|~S))+I[10]+4293915773&4294967295,C=L+(k<<15&4294967295|k>>>17),k=S+(L^(C|~x))+I[1]+2240044497&4294967295,S=C+(k<<21&4294967295|k>>>11),k=x+(C^(S|~L))+I[8]+1873313359&4294967295,x=S+(k<<6&4294967295|k>>>26),k=L+(S^(x|~C))+I[15]+4264355552&4294967295,L=x+(k<<10&4294967295|k>>>22),k=C+(x^(L|~S))+I[6]+2734768916&4294967295,C=L+(k<<15&4294967295|k>>>17),k=S+(L^(C|~x))+I[13]+1309151649&4294967295,S=C+(k<<21&4294967295|k>>>11),k=x+(C^(S|~L))+I[4]+4149444226&4294967295,x=S+(k<<6&4294967295|k>>>26),k=L+(S^(x|~C))+I[11]+3174756917&4294967295,L=x+(k<<10&4294967295|k>>>22),k=C+(x^(L|~S))+I[2]+718787259&4294967295,C=L+(k<<15&4294967295|k>>>17),k=S+(L^(C|~x))+I[9]+3951481745&4294967295,O.g[0]=O.g[0]+x&4294967295,O.g[1]=O.g[1]+(C+(k<<21&4294967295|k>>>11))&4294967295,O.g[2]=O.g[2]+C&4294967295,O.g[3]=O.g[3]+L&4294967295}n.prototype.v=function(O,x){x===void 0&&(x=O.length);const S=x-this.blockSize,I=this.C;let C=this.h,L=0;for(;L<x;){if(C==0)for(;L<=S;)s(this,O,L),L+=this.blockSize;if(typeof O=="string"){for(;L<x;)if(I[C++]=O.charCodeAt(L++),C==this.blockSize){s(this,I),C=0;break}}else for(;L<x;)if(I[C++]=O[L++],C==this.blockSize){s(this,I),C=0;break}}this.h=C,this.o+=x},n.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var x=1;x<O.length-8;++x)O[x]=0;x=this.o*8;for(var S=O.length-8;S<O.length;++S)O[S]=x&255,x/=256;for(this.v(O),O=Array(16),x=0,S=0;S<4;++S)for(let I=0;I<32;I+=8)O[x++]=this.g[S]>>>I&255;return O};function o(O,x){var S=u;return Object.prototype.hasOwnProperty.call(S,O)?S[O]:S[O]=x(O)}function c(O,x){this.h=x;const S=[];let I=!0;for(let C=O.length-1;C>=0;C--){const L=O[C]|0;I&&L==x||(S[C]=L,I=!1)}this.g=S}var u={};function d(O){return-128<=O&&O<128?o(O,function(x){return new c([x|0],x<0?-1:0)}):new c([O|0],O<0?-1:0)}function f(O){if(isNaN(O)||!isFinite(O))return y;if(O<0)return P(f(-O));const x=[];let S=1;for(let I=0;O>=S;I++)x[I]=O/S|0,S*=4294967296;return new c(x,0)}function g(O,x){if(O.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(O.charAt(0)=="-")return P(g(O.substring(1),x));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=f(Math.pow(x,8));let I=y;for(let L=0;L<O.length;L+=8){var C=Math.min(8,O.length-L);const k=parseInt(O.substring(L,L+C),x);C<8?(C=f(Math.pow(x,C)),I=I.j(C).add(f(k))):(I=I.j(S),I=I.add(f(k)))}return I}var y=d(0),v=d(1),w=d(16777216);r=c.prototype,r.m=function(){if(N(this))return-P(this).m();let O=0,x=1;for(let S=0;S<this.g.length;S++){const I=this.i(S);O+=(I>=0?I:4294967296+I)*x,x*=4294967296}return O},r.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(T(this))return"0";if(N(this))return"-"+P(this).toString(O);const x=f(Math.pow(O,6));var S=this;let I="";for(;;){const C=q(S,x).g;S=V(S,C.j(x));let L=((S.g.length>0?S.g[0]:S.h)>>>0).toString(O);if(S=C,T(S))return L+I;for(;L.length<6;)L="0"+L;I=L+I}},r.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function T(O){if(O.h!=0)return!1;for(let x=0;x<O.g.length;x++)if(O.g[x]!=0)return!1;return!0}function N(O){return O.h==-1}r.l=function(O){return O=V(this,O),N(O)?-1:T(O)?0:1};function P(O){const x=O.g.length,S=[];for(let I=0;I<x;I++)S[I]=~O.g[I];return new c(S,~O.h).add(v)}r.abs=function(){return N(this)?P(this):this},r.add=function(O){const x=Math.max(this.g.length,O.g.length),S=[];let I=0;for(let C=0;C<=x;C++){let L=I+(this.i(C)&65535)+(O.i(C)&65535),k=(L>>>16)+(this.i(C)>>>16)+(O.i(C)>>>16);I=k>>>16,L&=65535,k&=65535,S[C]=k<<16|L}return new c(S,S[S.length-1]&-2147483648?-1:0)};function V(O,x){return O.add(P(x))}r.j=function(O){if(T(this)||T(O))return y;if(N(this))return N(O)?P(this).j(P(O)):P(P(this).j(O));if(N(O))return P(this.j(P(O)));if(this.l(w)<0&&O.l(w)<0)return f(this.m()*O.m());const x=this.g.length+O.g.length,S=[];for(var I=0;I<2*x;I++)S[I]=0;for(I=0;I<this.g.length;I++)for(let C=0;C<O.g.length;C++){const L=this.i(I)>>>16,k=this.i(I)&65535,G=O.i(C)>>>16,ne=O.i(C)&65535;S[2*I+2*C]+=k*ne,H(S,2*I+2*C),S[2*I+2*C+1]+=L*ne,H(S,2*I+2*C+1),S[2*I+2*C+1]+=k*G,H(S,2*I+2*C+1),S[2*I+2*C+2]+=L*G,H(S,2*I+2*C+2)}for(O=0;O<x;O++)S[O]=S[2*O+1]<<16|S[2*O];for(O=x;O<2*x;O++)S[O]=0;return new c(S,0)};function H(O,x){for(;(O[x]&65535)!=O[x];)O[x+1]+=O[x]>>>16,O[x]&=65535,x++}function B(O,x){this.g=O,this.h=x}function q(O,x){if(T(x))throw Error("division by zero");if(T(O))return new B(y,y);if(N(O))return x=q(P(O),x),new B(P(x.g),P(x.h));if(N(x))return x=q(O,P(x)),new B(P(x.g),x.h);if(O.g.length>30){if(N(O)||N(x))throw Error("slowDivide_ only works with positive integers.");for(var S=v,I=x;I.l(O)<=0;)S=K(S),I=K(I);var C=z(S,1),L=z(I,1);for(I=z(I,2),S=z(S,2);!T(I);){var k=L.add(I);k.l(O)<=0&&(C=C.add(S),L=k),I=z(I,1),S=z(S,1)}return x=V(O,C.j(x)),new B(C,x)}for(C=y;O.l(x)>=0;){for(S=Math.max(1,Math.floor(O.m()/x.m())),I=Math.ceil(Math.log(S)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),L=f(S),k=L.j(x);N(k)||k.l(O)>0;)S-=I,L=f(S),k=L.j(x);T(L)&&(L=v),C=C.add(L),O=V(O,k)}return new B(C,O)}r.B=function(O){return q(this,O).h},r.and=function(O){const x=Math.max(this.g.length,O.g.length),S=[];for(let I=0;I<x;I++)S[I]=this.i(I)&O.i(I);return new c(S,this.h&O.h)},r.or=function(O){const x=Math.max(this.g.length,O.g.length),S=[];for(let I=0;I<x;I++)S[I]=this.i(I)|O.i(I);return new c(S,this.h|O.h)},r.xor=function(O){const x=Math.max(this.g.length,O.g.length),S=[];for(let I=0;I<x;I++)S[I]=this.i(I)^O.i(I);return new c(S,this.h^O.h)};function K(O){const x=O.g.length+1,S=[];for(let I=0;I<x;I++)S[I]=O.i(I)<<1|O.i(I-1)>>>31;return new c(S,O.h)}function z(O,x){const S=x>>5;x%=32;const I=O.g.length-S,C=[];for(let L=0;L<I;L++)C[L]=x>0?O.i(L+S)>>>x|O.i(L+S+1)<<32-x:O.i(L+S);return new c(C,O.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,hA=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,_a=c}).apply(typeof Mx<"u"?Mx:typeof self<"u"?self:typeof window<"u"?window:{});var yf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var dA,ju,fA,Of,a0,mA,gA,pA;(function(){var r,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof yf=="object"&&yf];for(var E=0;E<m.length;++E){var R=m[E];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var n=t(this);function s(m,E){if(E)e:{var R=n;m=m.split(".");for(var U=0;U<m.length-1;U++){var ae=m[U];if(!(ae in R))break e;R=R[ae]}m=m[m.length-1],U=R[m],E=E(U),E!=U&&E!=null&&e(R,m,{configurable:!0,writable:!0,value:E})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(E){var R=[],U;for(U in E)Object.prototype.hasOwnProperty.call(E,U)&&R.push([U,E[U]]);return R}});var o=o||{},c=this||self;function u(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function d(m,E,R){return m.call.apply(m.bind,arguments)}function f(m,E,R){return f=d,f.apply(null,arguments)}function g(m,E){var R=Array.prototype.slice.call(arguments,1);return function(){var U=R.slice();return U.push.apply(U,arguments),m.apply(this,U)}}function y(m,E){function R(){}R.prototype=E.prototype,m.Z=E.prototype,m.prototype=new R,m.prototype.constructor=m,m.Ob=function(U,ae,ue){for(var be=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)be[Fe-2]=arguments[Fe];return E.prototype[ae].apply(U,be)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const E=m.length;if(E>0){const R=Array(E);for(let U=0;U<E;U++)R[U]=m[U];return R}return[]}function T(m,E){for(let U=1;U<arguments.length;U++){const ae=arguments[U];var R=typeof ae;if(R=R!="object"?R:ae?Array.isArray(ae)?"array":R:"null",R=="array"||R=="object"&&typeof ae.length=="number"){R=m.length||0;const ue=ae.length||0;m.length=R+ue;for(let be=0;be<ue;be++)m[R+be]=ae[be]}else m.push(ae)}}class N{constructor(E,R){this.i=E,this.j=R,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function P(m){c.setTimeout(()=>{throw m},0)}function V(){var m=O;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class H{constructor(){this.h=this.g=null}add(E,R){const U=B.get();U.set(E,R),this.h?this.h.next=U:this.g=U,this.h=U}}var B=new N(()=>new q,m=>m.reset());class q{constructor(){this.next=this.g=this.h=null}set(E,R){this.h=E,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let K,z=!1,O=new H,x=()=>{const m=Promise.resolve(void 0);K=()=>{m.then(S)}};function S(){for(var m;m=V();){try{m.h.call(m.g)}catch(R){P(R)}var E=B;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}z=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const R=()=>{};c.addEventListener("test",R,E),c.removeEventListener("test",R,E)}catch{}return m})();function k(m){return/^[\s\xa0]*$/.test(m)}function G(m,E){C.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}y(G,C),G.prototype.init=function(m,E){const R=this.type=m.type,U=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(R=="mouseover"?E=m.fromElement:R=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ne="closure_listenable_"+(Math.random()*1e6|0),M=0;function D(m,E,R,U,ae){this.listener=m,this.proxy=null,this.src=E,this.type=R,this.capture=!!U,this.ha=ae,this.key=++M,this.da=this.fa=!1}function te(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function W(m,E,R){for(const U in m)E.call(R,m[U],U,m)}function ee(m,E){for(const R in m)E.call(void 0,m[R],R,m)}function F(m){const E={};for(const R in m)E[R]=m[R];return E}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(m,E){let R,U;for(let ae=1;ae<arguments.length;ae++){U=arguments[ae];for(R in U)m[R]=U[R];for(let ue=0;ue<Y.length;ue++)R=Y[ue],Object.prototype.hasOwnProperty.call(U,R)&&(m[R]=U[R])}}function Z(m){this.src=m,this.g={},this.h=0}Z.prototype.add=function(m,E,R,U,ae){const ue=m.toString();m=this.g[ue],m||(m=this.g[ue]=[],this.h++);const be=pe(m,E,U,ae);return be>-1?(E=m[be],R||(E.fa=!1)):(E=new D(E,this.src,ue,!!U,ae),E.fa=R,m.push(E)),E};function X(m,E){const R=E.type;if(R in m.g){var U=m.g[R],ae=Array.prototype.indexOf.call(U,E,void 0),ue;(ue=ae>=0)&&Array.prototype.splice.call(U,ae,1),ue&&(te(E),m.g[R].length==0&&(delete m.g[R],m.h--))}}function pe(m,E,R,U){for(let ae=0;ae<m.length;++ae){const ue=m[ae];if(!ue.da&&ue.listener==E&&ue.capture==!!R&&ue.ha==U)return ae}return-1}var Ee="closure_lm_"+(Math.random()*1e6|0),Ie={};function Re(m,E,R,U,ae){if(Array.isArray(E)){for(let ue=0;ue<E.length;ue++)Re(m,E[ue],R,U,ae);return null}return R=lt(R),m&&m[ne]?m.J(E,R,u(U)?!!U.capture:!1,ae):$e(m,E,R,!1,U,ae)}function $e(m,E,R,U,ae,ue){if(!E)throw Error("Invalid event type");const be=u(ae)?!!ae.capture:!!ae;let Fe=yt(m);if(Fe||(m[Ee]=Fe=new Z(m)),R=Fe.add(E,R,U,be,ue),R.proxy)return R;if(U=Qe(),R.proxy=U,U.src=m,U.listener=R,m.addEventListener)L||(ae=be),ae===void 0&&(ae=!1),m.addEventListener(E.toString(),U,ae);else if(m.attachEvent)m.attachEvent(gt(E.toString()),U);else if(m.addListener&&m.removeListener)m.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Qe(){function m(R){return E.call(m.src,m.listener,R)}const E=We;return m}function rt(m,E,R,U,ae){if(Array.isArray(E))for(var ue=0;ue<E.length;ue++)rt(m,E[ue],R,U,ae);else U=u(U)?!!U.capture:!!U,R=lt(R),m&&m[ne]?(m=m.i,ue=String(E).toString(),ue in m.g&&(E=m.g[ue],R=pe(E,R,U,ae),R>-1&&(te(E[R]),Array.prototype.splice.call(E,R,1),E.length==0&&(delete m.g[ue],m.h--)))):m&&(m=yt(m))&&(E=m.g[E.toString()],m=-1,E&&(m=pe(E,R,U,ae)),(R=m>-1?E[m]:null)&&Dt(R))}function Dt(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[ne])X(E.i,m);else{var R=m.type,U=m.proxy;E.removeEventListener?E.removeEventListener(R,U,m.capture):E.detachEvent?E.detachEvent(gt(R),U):E.addListener&&E.removeListener&&E.removeListener(U),(R=yt(E))?(X(R,m),R.h==0&&(R.src=null,E[Ee]=null)):te(m)}}}function gt(m){return m in Ie?Ie[m]:Ie[m]="on"+m}function We(m,E){if(m.da)m=!0;else{E=new G(E,this);const R=m.listener,U=m.ha||m.src;m.fa&&Dt(m),m=R.call(U,E)}return m}function yt(m){return m=m[Ee],m instanceof Z?m:null}var ot="__closure_events_fn_"+(Math.random()*1e9>>>0);function lt(m){return typeof m=="function"?m:(m[ot]||(m[ot]=function(E){return m.handleEvent(E)}),m[ot])}function Ge(){I.call(this),this.i=new Z(this),this.M=this,this.G=null}y(Ge,I),Ge.prototype[ne]=!0,Ge.prototype.removeEventListener=function(m,E,R,U){rt(this,m,E,R,U)};function ye(m,E){var R,U=m.G;if(U)for(R=[];U;U=U.G)R.push(U);if(m=m.M,U=E.type||E,typeof E=="string")E=new C(E,m);else if(E instanceof C)E.target=E.target||m;else{var ae=E;E=new C(U,m),ie(E,ae)}ae=!0;let ue,be;if(R)for(be=R.length-1;be>=0;be--)ue=E.g=R[be],ae=Te(ue,U,!0,E)&&ae;if(ue=E.g=m,ae=Te(ue,U,!0,E)&&ae,ae=Te(ue,U,!1,E)&&ae,R)for(be=0;be<R.length;be++)ue=E.g=R[be],ae=Te(ue,U,!1,E)&&ae}Ge.prototype.N=function(){if(Ge.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const R=m.g[E];for(let U=0;U<R.length;U++)te(R[U]);delete m.g[E],m.h--}}this.G=null},Ge.prototype.J=function(m,E,R,U){return this.i.add(String(m),E,!1,R,U)},Ge.prototype.K=function(m,E,R,U){return this.i.add(String(m),E,!0,R,U)};function Te(m,E,R,U){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let ae=!0;for(let ue=0;ue<E.length;++ue){const be=E[ue];if(be&&!be.da&&be.capture==R){const Fe=be.listener,Yt=be.ha||be.src;be.fa&&X(m.i,be),ae=Fe.call(Yt,U)!==!1&&ae}}return ae&&!U.defaultPrevented}function Be(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:c.setTimeout(m,E||0)}function Oe(m){m.g=Be(()=>{m.g=null,m.i&&(m.i=!1,Oe(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class xe extends I{constructor(E,R){super(),this.m=E,this.l=R,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Oe(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function it(m){I.call(this),this.h=m,this.g={}}y(it,I);var pt=[];function Fn(m){W(m.g,function(E,R){this.g.hasOwnProperty(R)&&Dt(E)},m),m.g={}}it.prototype.N=function(){it.Z.N.call(this),Fn(this)},it.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ht=c.JSON.stringify,Hn=c.JSON.parse,Ft=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function kn(){}function wn(){}var Kt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function St(){C.call(this,"d")}y(St,C);function Zt(){C.call(this,"c")}y(Zt,C);var Ot={},Wo=null;function ai(){return Wo=Wo||new Ge}Ot.Ia="serverreachability";function Ma(m){C.call(this,Ot.Ia,m)}y(Ma,C);function Dn(m){const E=ai();ye(E,new Ma(E))}Ot.STAT_EVENT="statevent";function qi(m,E){C.call(this,Ot.STAT_EVENT,m),this.stat=E}y(qi,C);function _t(m){const E=ai();ye(E,new qi(E,m))}Ot.Ja="timingevent";function hn(m,E){C.call(this,Ot.Ja,m),this.size=E}y(hn,C);function xn(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},E)}function En(){this.g=!0}En.prototype.ua=function(){this.g=!1};function Xo(m,E,R,U,ae,ue){m.info(function(){if(m.g)if(ue){var be="",Fe=ue.split("&");for(let dt=0;dt<Fe.length;dt++){var Yt=Fe[dt].split("=");if(Yt.length>1){const Lt=Yt[0];Yt=Yt[1];const Ir=Lt.split("_");be=Ir.length>=2&&Ir[1]=="type"?be+(Lt+"="+Yt+"&"):be+(Lt+"=redacted&")}}}else be=null;else be=ue;return"XMLHTTP REQ ("+U+") [attempt "+ae+"]: "+E+`
`+R+`
`+be})}function Er(m,E,R,U,ae,ue,be){m.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+ae+"]: "+E+`
`+R+`
`+ue+" "+be})}function pn(m,E,R,U){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+vg(m,R)+(U?" "+U:"")})}function Pa(m,E){m.info(function(){return"TIMEOUT: "+E})}En.prototype.info=function(){};function vg(m,E){if(!m.g)return E;if(!E)return null;try{const ue=JSON.parse(E);if(ue){for(m=0;m<ue.length;m++)if(Array.isArray(ue[m])){var R=ue[m];if(!(R.length<2)){var U=R[1];if(Array.isArray(U)&&!(U.length<1)){var ae=U[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let be=1;be<U.length;be++)U[be]=""}}}}return ht(ue)}catch{return E}}var La={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ic={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Rc;function Va(){}y(Va,kn),Va.prototype.g=function(){return new XMLHttpRequest},Rc=new Va;function $i(m){return encodeURIComponent(String(m))}function $h(m){var E=1;m=m.split(":");const R=[];for(;E>0&&m.length;)R.push(m.shift()),E--;return m.length&&R.push(m.join(":")),R}function zr(m,E,R,U){this.j=m,this.i=E,this.l=R,this.S=U||1,this.V=new it(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Br}function Br(){this.i=null,this.g="",this.h=!1}var en={},yn={};function oi(m,E,R){m.M=1,m.A=ja(nn(E)),m.u=R,m.R=!0,Jo(m,null)}function Jo(m,E){m.F=Date.now(),li(m),m.B=nn(m.A);var R=m.B,U=m.S;Array.isArray(U)||(U=[String(U)]),nl(R.i,"t",U),m.C=0,R=m.j.L,m.h=new Br,m.g=ad(m.j,R?E:null,!m.u),m.P>0&&(m.O=new xe(f(m.Y,m,m.g),m.P)),E=m.V,R=m.g,U=m.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(pt[0]=ae.toString()),ae=pt);for(let ue=0;ue<ae.length;ue++){const be=Re(R,ae[ue],U||E.handleEvent,!1,E.h||E);if(!be)break;E.g[be.key]=be}E=m.J?F(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),Dn(),Xo(m.i,m.v,m.B,m.l,m.S,m.u)}zr.prototype.ba=function(m){m=m.target;const E=this.O;E&&qr(m)==3?E.j():this.Y(m)},zr.prototype.Y=function(m){try{if(m==this.g)e:{const Fe=qr(this.g),Yt=this.g.ya(),dt=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||Tn(this.g)))){this.K||Fe!=4||Yt==7||(Yt==8||dt<=0?Dn(3):Dn(2)),ci(this);var E=this.g.ca();this.X=E;var R=bg(this);if(this.o=E==200,Er(this.i,this.v,this.B,this.l,this.S,Fe,E),this.o){if(this.U&&!this.L){t:{if(this.g){var U,ae=this.g;if((U=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(U)){var ue=U;break t}}ue=null}if(m=ue)pn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ui(this,m);else{this.o=!1,this.m=3,_t(12),or(this),Tr(this);break e}}if(this.R){m=!0;let Lt;for(;!this.K&&this.C<R.length;)if(Lt=Kh(this,R),Lt==yn){Fe==4&&(this.m=4,_t(14),m=!1),pn(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==en){this.m=4,_t(15),pn(this.i,this.l,R,"[Invalid Chunk]"),m=!1;break}else pn(this.i,this.l,Lt,null),ui(this,Lt);if(Gh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||R.length!=0||this.h.h||(this.m=1,_t(16),m=!1),this.o=this.o&&m,!m)pn(this.i,this.l,R,"[Invalid Chunked Response]"),or(this),Tr(this);else if(R.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),Hc(be),be.P=!0,_t(11))}}else pn(this.i,this.l,R,null),ui(this,R);Fe==4&&or(this),this.o&&!this.K&&(Fe==4?nd(this.j,this):(this.o=!1,li(this)))}else Ki(this.g),E==400&&R.indexOf("Unknown SID")>0?(this.m=3,_t(12)):(this.m=0,_t(13)),or(this),Tr(this)}}}catch{}finally{}};function bg(m){if(!Gh(m))return m.g.la();const E=Tn(m.g);if(E==="")return"";let R="";const U=E.length,ae=qr(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return or(m),Tr(m),"";m.h.i=new c.TextDecoder}for(let ue=0;ue<U;ue++)m.h.h=!0,R+=m.h.i.decode(E[ue],{stream:!(ae&&ue==U-1)});return E.length=0,m.h.g+=R,m.C=0,m.h.g}function Gh(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Kh(m,E){var R=m.C,U=E.indexOf(`
`,R);return U==-1?yn:(R=Number(E.substring(R,U)),isNaN(R)?en:(U+=1,U+R>E.length?yn:(E=E.slice(U,U+R),m.C=U+R,E)))}zr.prototype.cancel=function(){this.K=!0,or(this)};function li(m){m.T=Date.now()+m.H,Zo(m,m.H)}function Zo(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=xn(f(m.aa,m),E)}function ci(m){m.D&&(c.clearTimeout(m.D),m.D=null)}zr.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Pa(this.i,this.B),this.M!=2&&(Dn(),_t(17)),or(this),this.m=2,Tr(this)):Zo(this,this.T-m)};function Tr(m){m.j.I==0||m.K||nd(m.j,m)}function or(m){ci(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,Fn(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function ui(m,E){try{var R=m.j;if(R.I!=0&&(R.g==m||di(R.h,m))){if(!m.L&&di(R.h,m)&&R.I==3){try{var U=R.Ba.g.parse(E)}catch{U=null}if(Array.isArray(U)&&U.length==3){var ae=U;if(ae[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<m.F)ol(R),Ps(R);else break e;$a(R),_t(18)}}else R.xa=ae[1],0<R.xa-R.K&&ae[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=xn(f(R.Va,R),6e3));hi(R.h)<=1&&R.ta&&(R.ta=void 0)}else _i(R,11)}else if((m.L||R.g==m)&&ol(R),!k(E))for(ae=R.Ba.g.parse(E),E=0;E<ae.length;E++){let dt=ae[E];const Lt=dt[0];if(!(Lt<=R.K))if(R.K=Lt,dt=dt[1],R.I==2)if(dt[0]=="c"){R.M=dt[1],R.ba=dt[2];const Ir=dt[3];Ir!=null&&(R.ka=Ir,R.j.info("VER="+R.ka));const vi=dt[4];vi!=null&&(R.za=vi,R.j.info("SVER="+R.za));const $r=dt[5];$r!=null&&typeof $r=="number"&&$r>0&&(U=1.5*$r,R.O=U,R.j.info("backChannelRequestTimeoutMs_="+U)),U=R;const Gr=m.g;if(Gr){const Ga=Gr.g?Gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ga){var ue=U.h;ue.g||Ga.indexOf("spdy")==-1&&Ga.indexOf("quic")==-1&&Ga.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(kc(ue,ue.h),ue.h=null))}if(U.G){const ll=Gr.g?Gr.g.getResponseHeader("X-HTTP-Session-Id"):null;ll&&(U.wa=ll,vt(U.J,U.G,ll))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-m.F,R.j.info("Handshake RTT: "+R.T+"ms")),U=R;var be=m;if(U.na=sd(U,U.L?U.ba:null,U.W),be.L){Dc(U.h,be);var Fe=be,Yt=U.O;Yt&&(Fe.H=Yt),Fe.D&&(ci(Fe),li(Fe)),U.g=be}else ed(U);R.i.length>0&&yi(R)}else dt[0]!="stop"&&dt[0]!="close"||_i(R,7);else R.I==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?_i(R,7):Bc(R):dt[0]!="noop"&&R.l&&R.l.qa(dt),R.A=0)}}Dn(4)}catch{}}var tn=class{constructor(m,E){this.g=m,this.map=E}};function Cc(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Nc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function hi(m){return m.h?1:m.g?m.g.size:0}function di(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function kc(m,E){m.g?m.g.add(E):m.h=E}function Dc(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Cc.prototype.cancel=function(){if(this.i=Oc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Oc(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const R of m.g.values())E=E.concat(R.G);return E}return w(m.i)}var Yh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function el(m,E){if(m){m=m.split("&");for(let R=0;R<m.length;R++){const U=m[R].indexOf("=");let ae,ue=null;U>=0?(ae=m[R].substring(0,U),ue=m[R].substring(U+1)):ae=m[R],E(ae,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function lr(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof lr?(this.l=m.l,_n(this,m.j),this.o=m.o,this.g=m.g,Rs(this,m.u),this.h=m.h,Mc(this,Jh(m.i)),this.m=m.m):m&&(E=String(m).match(Yh))?(this.l=!1,_n(this,E[1]||"",!0),this.o=fi(E[2]||""),this.g=fi(E[3]||"",!0),Rs(this,E[4]),this.h=fi(E[5]||"",!0),Mc(this,E[6]||"",!0),this.m=fi(E[7]||"")):(this.l=!1,this.i=new Ns(null,this.l))}lr.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(Ua(E,tl,!0),":");var R=this.g;return(R||E=="file")&&(m.push("//"),(E=this.o)&&m.push(Ua(E,tl,!0),"@"),m.push($i(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&m.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&m.push("/"),m.push(Ua(R,R.charAt(0)=="/"?Pc:Qh,!0))),(R=this.i.toString())&&m.push("?",R),(R=this.m)&&m.push("#",Ua(R,Wh)),m.join("")},lr.prototype.resolve=function(m){const E=nn(this);let R=!!m.j;R?_n(E,m.j):R=!!m.o,R?E.o=m.o:R=!!m.g,R?E.g=m.g:R=m.u!=null;var U=m.h;if(R)Rs(E,m.u);else if(R=!!m.h){if(U.charAt(0)!="/")if(this.g&&!this.h)U="/"+U;else{var ae=E.h.lastIndexOf("/");ae!=-1&&(U=E.h.slice(0,ae+1)+U)}if(ae=U,ae==".."||ae==".")U="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){U=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const ue=[];for(let be=0;be<ae.length;){const Fe=ae[be++];Fe=="."?U&&be==ae.length&&ue.push(""):Fe==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),U&&be==ae.length&&ue.push("")):(ue.push(Fe),U=!0)}U=ue.join("/")}else U=ae}return R?E.h=U:R=m.i.toString()!=="",R?Mc(E,Jh(m.i)):R=!!m.m,R&&(E.m=m.m),E};function nn(m){return new lr(m)}function _n(m,E,R){m.j=R?fi(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function Rs(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function Mc(m,E,R){E instanceof Ns?(m.i=E,rl(m.i,m.l)):(R||(E=Ua(E,Cs)),m.i=new Ns(E,m.l))}function vt(m,E,R){m.i.set(E,R)}function ja(m){return vt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function fi(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ua(m,E,R){return typeof m=="string"?(m=encodeURI(m).replace(E,Xn),R&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Xn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var tl=/[#\/\?@]/g,Qh=/[#\?:]/g,Pc=/[#\?]/g,Cs=/[#\?@]/g,Wh=/#/g;function Ns(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function Jn(m){m.g||(m.g=new Map,m.h=0,m.i&&el(m.i,function(E,R){m.add(decodeURIComponent(E.replace(/\+/g," ")),R)}))}r=Ns.prototype,r.add=function(m,E){Jn(this),this.i=null,m=ks(this,m);let R=this.g.get(m);return R||this.g.set(m,R=[]),R.push(E),this.h+=1,this};function Xh(m,E){Jn(m),E=ks(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function Lc(m,E){return Jn(m),E=ks(m,E),m.g.has(E)}r.forEach=function(m,E){Jn(this),this.g.forEach(function(R,U){R.forEach(function(ae){m.call(E,ae,U,this)},this)},this)};function Vc(m,E){Jn(m);let R=[];if(typeof E=="string")Lc(m,E)&&(R=R.concat(m.g.get(ks(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)R=R.concat(m[E]);return R}r.set=function(m,E){return Jn(this),this.i=null,m=ks(this,m),Lc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},r.get=function(m,E){return m?(m=Vc(this,m),m.length>0?String(m[0]):E):E};function nl(m,E,R){Xh(m,E),R.length>0&&(m.i=null,m.g.set(ks(m,E),w(R)),m.h+=R.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let U=0;U<E.length;U++){var R=E[U];const ae=$i(R);R=Vc(this,R);for(let ue=0;ue<R.length;ue++){let be=ae;R[ue]!==""&&(be+="="+$i(R[ue])),m.push(be)}}return this.i=m.join("&")};function Jh(m){const E=new Ns;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function ks(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function rl(m,E){E&&!m.j&&(Jn(m),m.i=null,m.g.forEach(function(R,U){const ae=U.toLowerCase();U!=ae&&(Xh(this,U),nl(this,ae,R))},m)),m.j=E}function Fr(m,E){const R=new En;if(c.Image){const U=new Image;U.onload=g(Sr,R,"TestLoadImage: loaded",!0,E,U),U.onerror=g(Sr,R,"TestLoadImage: error",!1,E,U),U.onabort=g(Sr,R,"TestLoadImage: abort",!1,E,U),U.ontimeout=g(Sr,R,"TestLoadImage: timeout",!1,E,U),c.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=m}else E(!1)}function jc(m,E){const R=new En,U=new AbortController,ae=setTimeout(()=>{U.abort(),Sr(R,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:U.signal}).then(ue=>{clearTimeout(ae),ue.ok?Sr(R,"TestPingServer: ok",!0,E):Sr(R,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(ae),Sr(R,"TestPingServer: error",!1,E)})}function Sr(m,E,R,U,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),U(R)}catch{}}function Ds(){this.g=new Ft}function mi(m){this.i=m.Sb||null,this.h=m.ab||!1}y(mi,kn),mi.prototype.g=function(){return new za(this.i,this.h)};function za(m,E){Ge.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(za,Ge),r=za.prototype,r.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,Hr(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||c).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Os(this)),this.readyState=0},r.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Hr(this)),this.g&&(this.readyState=3,Hr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;il(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function il(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}r.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Os(this):Hr(this),this.readyState==3&&il(this)}},r.Oa=function(m){this.g&&(this.response=this.responseText=m,Os(this))},r.Na=function(m){this.g&&(this.response=m,Os(this))},r.ga=function(){this.g&&Os(this)};function Os(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Hr(m)}r.setRequestHeader=function(m,E){this.A.append(m,E)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var R=E.next();!R.done;)R=R.value,m.push(R[0]+": "+R[1]),R=E.next();return m.join(`\r
`)};function Hr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(za.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Ar(m){let E="";return W(m,function(R,U){E+=U,E+=":",E+=R,E+=`\r
`}),E}function Ba(m,E,R){e:{for(U in R){var U=!1;break e}U=!0}U||(R=Ar(R),typeof m=="string"?R!=null&&$i(R):vt(m,E,R))}function At(m){Ge.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(At,Ge);var gi=/^https?$/i,Uc=["POST","PUT"];r=At.prototype,r.Fa=function(m){this.H=m},r.ea=function(m,E,R,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Rc.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(ue){Fa(this,ue);return}if(m=R||"",R=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var ae in U)R.set(ae,U[ae]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ue of U.keys())R.set(ue,U.get(ue));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(R.keys()).find(ue=>ue.toLowerCase()=="content-type"),ae=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Uc,E,void 0)>=0)||U||ae||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,be]of R)this.g.setRequestHeader(ue,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ue){Fa(this,ue)}};function Fa(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,zc(m),Gi(m)}function zc(m){m.A||(m.A=!0,ye(m,"complete"),ye(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,ye(this,"complete"),ye(this,"abort"),Gi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),At.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Ha(this):this.Xa())},r.Xa=function(){Ha(this)};function Ha(m){if(m.h&&typeof o<"u"){if(m.v&&qr(m)==4)setTimeout(m.Ca.bind(m),0);else if(ye(m,"readystatechange"),qr(m)==4){m.h=!1;try{const ue=m.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var R;if(!(R=E)){var U;if(U=ue===0){let be=String(m.D).match(Yh)[1]||null;!be&&c.self&&c.self.location&&(be=c.self.location.protocol.slice(0,-1)),U=!gi.test(be?be.toLowerCase():"")}R=U}if(R)ye(m,"complete"),ye(m,"success");else{m.o=6;try{var ae=qr(m)>2?m.g.statusText:""}catch{ae=""}m.l=ae+" ["+m.ca()+"]",zc(m)}}finally{Gi(m)}}}}function Gi(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const R=m.g;m.g=null,E||ye(m,"ready");try{R.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function qr(m){return m.g?m.g.readyState:0}r.ca=function(){try{return qr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),Hn(E)}};function Tn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Ki(m){const E={};m=(m.g&&qr(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<m.length;U++){if(k(m[U]))continue;var R=$h(m[U]);const ae=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const ue=E[ae]||[];E[ae]=ue,ue.push(R)}ee(E,function(U){return U.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(m,E,R){return R&&R.internalChannelParams&&R.internalChannelParams[m]||E}function Ms(m){this.za=0,this.i=[],this.j=new En,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pi("baseRetryDelayMs",5e3,m),this.Za=pi("retryDelaySeedMs",1e4,m),this.Ta=pi("forwardChannelMaxRetries",2,m),this.va=pi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Cc(m&&m.concurrentRequestLimit),this.Ba=new Ds,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ms.prototype,r.ka=8,r.I=1,r.connect=function(m,E,R,U){_t(0),this.W=m,this.H=E||{},R&&U!==void 0&&(this.H.OSID=R,this.H.OAID=U),this.F=this.X,this.J=sd(this,null,this.W),yi(this)};function Bc(m){if(sl(m),m.I==3){var E=m.V++,R=nn(m.J);if(vt(R,"SID",m.M),vt(R,"RID",E),vt(R,"TYPE","terminate"),qa(m,R),E=new zr(m,m.j,E),E.M=2,E.A=ja(nn(R)),R=!1,c.navigator&&c.navigator.sendBeacon)try{R=c.navigator.sendBeacon(E.A.toString(),"")}catch{}!R&&c.Image&&(new Image().src=E.A,R=!0),R||(E.g=ad(E.j,null),E.g.ea(E.A)),E.F=Date.now(),li(E)}id(m)}function Ps(m){m.g&&(Hc(m),m.g.cancel(),m.g=null)}function sl(m){Ps(m),m.v&&(c.clearTimeout(m.v),m.v=null),ol(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function yi(m){if(!Nc(m.h)&&!m.m){m.m=!0;var E=m.Ea;K||x(),z||(K(),z=!0),O.add(E,m),m.D=0}}function al(m,E){return hi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=xn(f(m.Ea,m,E),rd(m,m.D)),m.D++,!0)}r.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const ae=new zr(this,this.j,m);let ue=this.o;if(this.U&&(ue?(ue=F(ue),ie(ue,this.U)):ue=this.U),this.u!==null||this.R||(ae.J=ue,ue=null),this.S)e:{for(var E=0,R=0;R<this.i.length;R++){t:{var U=this.i[R];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(E+=U,E>4096){E=R;break e}if(E===4096||R===this.i.length-1){E=R+1;break e}}E=1e3}else E=1e3;E=Zh(this,ae,E),R=nn(this.J),vt(R,"RID",m),vt(R,"CVER",22),this.G&&vt(R,"X-HTTP-Session-Id",this.G),qa(this,R),ue&&(this.R?E="headers="+$i(Ar(ue))+"&"+E:this.u&&Ba(R,this.u,ue)),kc(this.h,ae),this.Ra&&vt(R,"TYPE","init"),this.S?(vt(R,"$req",E),vt(R,"SID","null"),ae.U=!0,oi(ae,R,null)):oi(ae,R,E),this.I=2}}else this.I==3&&(m?Fc(this,m):this.i.length==0||Nc(this.h)||Fc(this))};function Fc(m,E){var R;E?R=E.l:R=m.V++;const U=nn(m.J);vt(U,"SID",m.M),vt(U,"RID",R),vt(U,"AID",m.K),qa(m,U),m.u&&m.o&&Ba(U,m.u,m.o),R=new zr(m,m.j,R,m.D+1),m.u===null&&(R.J=m.o),E&&(m.i=E.G.concat(m.i)),E=Zh(m,R,1e3),R.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),kc(m.h,R),oi(R,U,E)}function qa(m,E){m.H&&W(m.H,function(R,U){vt(E,U,R)}),m.l&&W({},function(R,U){vt(E,U,R)})}function Zh(m,E,R){R=Math.min(m.i.length,R);const U=m.l?f(m.l.Ka,m.l,m):null;e:{var ae=m.i;let Fe=-1;for(;;){const Yt=["count="+R];Fe==-1?R>0?(Fe=ae[0].g,Yt.push("ofs="+Fe)):Fe=0:Yt.push("ofs="+Fe);let dt=!0;for(let Lt=0;Lt<R;Lt++){var ue=ae[Lt].g;const Ir=ae[Lt].map;if(ue-=Fe,ue<0)Fe=Math.max(0,ae[Lt].g-100),dt=!1;else try{ue="req"+ue+"_"||"";try{var be=Ir instanceof Map?Ir:Object.entries(Ir);for(const[vi,$r]of be){let Gr=$r;u($r)&&(Gr=ht($r)),Yt.push(ue+vi+"="+encodeURIComponent(Gr))}}catch(vi){throw Yt.push(ue+"type="+encodeURIComponent("_badmap")),vi}}catch{U&&U(Ir)}}if(dt){be=Yt.join("&");break e}}be=void 0}return m=m.i.splice(0,R),E.G=m,be}function ed(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;K||x(),z||(K(),z=!0),O.add(E,m),m.A=0}}function $a(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=xn(f(m.Da,m),rd(m,m.A)),m.A++,!0)}r.Da=function(){if(this.v=null,td(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=xn(f(this.Wa,this),m)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_t(10),Ps(this),td(this))};function Hc(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function td(m){m.g=new zr(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=nn(m.na);vt(E,"RID","rpc"),vt(E,"SID",m.M),vt(E,"AID",m.K),vt(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&vt(E,"TO",m.ia),vt(E,"TYPE","xmlhttp"),qa(m,E),m.u&&m.o&&Ba(E,m.u,m.o),m.O&&(m.g.H=m.O);var R=m.g;m=m.ba,R.M=1,R.A=ja(nn(E)),R.u=null,R.R=!0,Jo(R,m)}r.Va=function(){this.C!=null&&(this.C=null,Ps(this),$a(this),_t(19))};function ol(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function nd(m,E){var R=null;if(m.g==E){ol(m),Hc(m),m.g=null;var U=2}else if(di(m.h,E))R=E.G,Dc(m.h,E),U=1;else return;if(m.I!=0){if(E.o)if(U==1){R=E.u?E.u.length:0,E=Date.now()-E.F;var ae=m.D;U=ai(),ye(U,new hn(U,R)),yi(m)}else ed(m);else if(ae=E.m,ae==3||ae==0&&E.X>0||!(U==1&&al(m,E)||U==2&&$a(m)))switch(R&&R.length>0&&(E=m.h,E.i=E.i.concat(R)),ae){case 1:_i(m,5);break;case 4:_i(m,10);break;case 3:_i(m,6);break;default:_i(m,2)}}}function rd(m,E){let R=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(R*=2),R*E}function _i(m,E){if(m.j.info("Error code "+E),E==2){var R=f(m.bb,m),U=m.Ua;const ae=!U;U=new lr(U||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||_n(U,"https"),ja(U),ae?Fr(U.toString(),R):jc(U.toString(),R)}else _t(2);m.I=0,m.l&&m.l.pa(E),id(m),sl(m)}r.bb=function(m){m?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function id(m){if(m.I=0,m.ja=[],m.l){const E=Oc(m.h);(E.length!=0||m.i.length!=0)&&(T(m.ja,E),T(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function sd(m,E,R){var U=R instanceof lr?nn(R):new lr(R);if(U.g!="")E&&(U.g=E+"."+U.g),Rs(U,U.u);else{var ae=c.location;U=ae.protocol,E=E?E+"."+ae.hostname:ae.hostname,ae=+ae.port;const ue=new lr(null);U&&_n(ue,U),E&&(ue.g=E),ae&&Rs(ue,ae),R&&(ue.h=R),U=ue}return R=m.G,E=m.wa,R&&E&&vt(U,R,E),vt(U,"VER",m.ka),qa(m,U),U}function ad(m,E,R){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new At(new mi({ab:R})):new At(m.ma),E.Fa(m.L),E}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function od(){}r=od.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ls(){}Ls.prototype.g=function(m,E){return new qn(m,E)};function qn(m,E){Ge.call(this),this.g=new Ms(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!k(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!k(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Yi(this)}y(qn,Ge),qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){Bc(this.g)},qn.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var R={};R.__data__=m,m=R}else this.v&&(R={},R.__data__=ht(m),m=R);E.i.push(new tn(E.Ya++,m)),E.I==3&&yi(E)},qn.prototype.N=function(){this.g.l=null,delete this.j,Bc(this.g),delete this.g,qn.Z.N.call(this)};function ld(m){St.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const R in E){m=R;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}y(ld,St);function cd(){Zt.call(this),this.status=1}y(cd,Zt);function Yi(m){this.g=m}y(Yi,od),Yi.prototype.ra=function(){ye(this.g,"a")},Yi.prototype.qa=function(m){ye(this.g,new ld(m))},Yi.prototype.pa=function(m){ye(this.g,new cd)},Yi.prototype.oa=function(){ye(this.g,"b")},Ls.prototype.createWebChannel=Ls.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,pA=function(){return new Ls},gA=function(){return ai()},mA=Ot,a0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},La.NO_ERROR=0,La.TIMEOUT=8,La.HTTP_ERROR=6,Of=La,Ic.COMPLETE="complete",fA=Ic,wn.EventType=Kt,Kt.OPEN="a",Kt.CLOSE="b",Kt.ERROR="c",Kt.MESSAGE="d",Ge.prototype.listen=Ge.prototype.J,ju=wn,At.prototype.listenOnce=At.prototype.K,At.prototype.getLastError=At.prototype.Ha,At.prototype.getLastErrorCode=At.prototype.ya,At.prototype.getStatus=At.prototype.ca,At.prototype.getResponseJson=At.prototype.La,At.prototype.getResponseText=At.prototype.la,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Fa,dA=At}).apply(typeof yf<"u"?yf:typeof self<"u"?self:typeof window<"u"?window:{});const Px="@firebase/firestore",Lx="4.9.2";let Cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");let xc="12.3.0";const ko=new B0("@firebase/firestore");function Gl(){return ko.logLevel}function _e(r,...e){if(ko.logLevel<=tt.DEBUG){const t=e.map(J0);ko.debug(`Firestore (${xc}): ${r}`,...t)}}function Kn(r,...e){if(ko.logLevel<=tt.ERROR){const t=e.map(J0);ko.error(`Firestore (${xc}): ${r}`,...t)}}function Do(r,...e){if(ko.logLevel<=tt.WARN){const t=e.map(J0);ko.warn(`Firestore (${xc}): ${r}`,...t)}}function J0(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Ae(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,yA(r,n,t)}function yA(r,e,t){let n=`FIRESTORE (${xc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Kn(n),new Error(n)}function Ne(r,e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,r||yA(e,s,n)}function Ue(r,e){return r}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Bi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class _A{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class T5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cn.UNAUTHENTICATED)))}shutdown(){}}class S5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class A5{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ne(this.o===void 0,42304);let n=this.i;const s=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let o=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Mi,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Mi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ne(typeof n.accessToken=="string",31837,{l:n}),new _A(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class I5{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class R5{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new I5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Vx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ne(this.o===void 0,3512);const n=o=>{o.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,_e("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>n(o)))};const s=o=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Vx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ne(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Vx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function N5(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}class Z0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=N5(40);for(let o=0;o<s.length;++o)n.length<20&&s[o]<t&&(n+=e.charAt(s[o]%62))}return n}}function je(r,e){return r<e?-1:r>e?1:0}function o0(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const s=r.charAt(n),o=e.charAt(n);if(s!==o)return Oy(s)===Oy(o)?je(s,o):Oy(s)?1:-1}return je(r.length,e.length)}const k5=55296,D5=57343;function Oy(r){const e=r.charCodeAt(0);return e>=k5&&e<=D5}function ac(r,e,t){return r.length===e.length&&r.every(((n,s)=>t(n,e[s])))}function vA(r){return r+"\0"}const jx="__name__";class Ti{constructor(e,t,n){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&Ae(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Ti.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ti?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const o=Ti.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return je(e.length,t.length)}static compareSegments(e,t){const n=Ti.isNumericId(e),s=Ti.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?Ti.extractNumericId(e).compare(Ti.extractNumericId(t)):o0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _a.fromString(e.substring(4,e.length-2))}}class mt extends Ti{construct(e,t,n){return new mt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ve(de.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((s=>s.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const O5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends Ti{construct(e,t,n){return new zt(e,t,n)}static isValidIdentifier(e){return O5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jx}static keyField(){return new zt([jx])}static fromServerFormat(e){const t=[];let n="",s=0;const o=()=>{if(n.length===0)throw new ve(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new ve(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ve(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(n+=u,s++):(o(),s++)}if(o(),c)throw new ve(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(t)}static emptyPath(){return new zt([])}}class we{constructor(e){this.path=e}static fromPath(e){return new we(mt.fromString(e))}static fromName(e){return new we(mt.fromString(e).popFirst(5))}static empty(){return new we(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new mt(e.slice()))}}function bA(r,e,t){if(!t)throw new ve(de.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function M5(r,e,t,n){if(e===!0&&n===!0)throw new ve(de.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ux(r){if(!we.isDocumentKey(r))throw new ve(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function zx(r){if(we.isDocumentKey(r))throw new ve(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function wA(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Fm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function Yn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ve(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fm(r);throw new ve(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function cn(r,e){const t={typeString:r};return e&&(t.value=e),t}function Oh(r,e){if(!wA(r))throw new ve(de.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const s=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const c=r[n];if(s&&typeof c!==s){t=`JSON field '${n}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${n}' field to equal '${o.value}'`;break}}if(t)throw new ve(de.INVALID_ARGUMENT,t);return!0}const Bx=-62135596800,Fx=1e6;class xt{static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Fx);return new xt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Bx)throw new ve(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fx}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oh(e,xt._jsonSchema))return new xt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Bx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xt._jsonSchemaVersion="firestore/timestamp/1.0",xt._jsonSchema={type:cn("string",xt._jsonSchemaVersion),seconds:cn("number"),nanoseconds:cn("number")};class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new xt(0,0))}static max(){return new De(new xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ah=-1;class sm{constructor(e,t,n,s){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=s}}function l0(r){return r.fields.find((e=>e.kind===2))}function uo(r){return r.fields.filter((e=>e.kind!==2))}sm.UNKNOWN_ID=-1;class Mf{constructor(e,t){this.fieldPath=e,this.kind=t}}class oh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new oh(0,br.min())}}function P5(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=De.fromTimestamp(n===1e9?new xt(t+1,0):new xt(t,n));return new br(s,we.empty(),e)}function xA(r){return new br(r.readTime,r.key,ah)}class br{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new br(De.min(),we.empty(),ah)}static max(){return new br(De.max(),we.empty(),ah)}}function e_(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(r.documentKey,e.documentKey),t!==0?t:je(r.largestBatchId,e.largestBatchId))}const EA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ko(r){if(r.code!==de.FAILED_PRECONDITION||r.message!==EA)throw r;_e("LocalStore","Unexpectedly lost primary lease")}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((n,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,n)=>{t(e)}))}static reject(e){return new se(((t,n)=>{n(e)}))}static waitFor(e){return new se(((t,n)=>{let s=0,o=0,c=!1;e.forEach((u=>{++s,u.next((()=>{++o,c&&o===s&&t()}),(d=>n(d)))})),c=!0,o===s&&t()}))}static or(e){let t=se.resolve(!1);for(const n of e)t=t.next((s=>s?se.resolve(s):n()));return t}static forEach(e,t){const n=[];return e.forEach(((s,o)=>{n.push(t.call(this,s,o))})),this.waitFor(n)}static mapArray(e,t){return new se(((n,s)=>{const o=e.length,c=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next((g=>{c[f]=g,++u,u===o&&n(c)}),(g=>s(g)))}}))}static doWhile(e,t){return new se(((n,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):n()};o()}))}}const pr="SimpleDb";class Hm{static open(e,t,n,s){try{return new Hm(t,e.transaction(s,n))}catch(o){throw new Ku(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Mi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ku(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const s=t_(n.target.error);this.S.reject(new Ku(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(_e(pr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new V5(t)}}class va{static delete(e){return _e(pr,"Removing database:",e),fo(mS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!ES())return!1;if(va.F())return!0;const e=mn(),t=va.M(e),n=0<t&&t<10,s=SA(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,va.M(mn())===12.2&&Kn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(_e(pr,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const c=o.target.result;t(c)},s.onblocked=()=>{n(new Ku(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;c.name==="VersionError"?n(new ve(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?n(new ve(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):n(new Ku(e,c))},s.onupgradeneeded=o=>{_e(pr,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,s.transaction,o.oldVersion,this.version).next((()=>{_e(pr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,s){const o=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const u=Hm.open(this.db,e,o?"readonly":"readwrite",n),d=s(u).next((f=>(u.C(),f))).catch((f=>(u.abort(f),se.reject(f)))).toPromise();return d.catch((()=>{})),await u.D,d}catch(u){const d=u,f=d.name!=="FirebaseError"&&c<3;if(_e(pr,"Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function SA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class L5{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return fo(this.U.delete())}}class Ku extends ve{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ka(r){return r.name==="IndexedDbTransactionError"}class V5{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(_e(pr,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(_e(pr,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),fo(n)}add(e){return _e(pr,"ADD",this.store.name,e,e),fo(this.store.add(e))}get(e){return fo(this.store.get(e)).next((t=>(t===void 0&&(t=null),_e(pr,"GET",this.store.name,e,t),t)))}delete(e){return _e(pr,"DELETE",this.store.name,e),fo(this.store.delete(e))}count(){return _e(pr,"COUNT",this.store.name),fo(this.store.count())}J(e,t){const n=this.options(e,t),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(n.range);return new se(((c,u)=>{o.onerror=d=>{u(d.target.error)},o.onsuccess=d=>{c(d.target.result)}}))}{const o=this.cursor(n),c=[];return this.H(o,((u,d)=>{c.push(d)})).next((()=>c))}}Y(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new se(((s,o)=>{n.onerror=c=>{o(c.target.error)},n.onsuccess=c=>{s(c.target.result)}}))}Z(e,t){_e(pr,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const s=this.cursor(n);return this.H(s,((o,c,u)=>u.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);const s=this.cursor(n);return this.H(s,t)}te(e){const t=this.cursor({});return new se(((n,s)=>{t.onerror=o=>{const c=t_(o.target.error);s(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next((u=>{u?c.continue():n()})):n()}}))}H(e,t){const n=[];return new se(((s,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const u=c.target.result;if(!u)return void s();const d=new L5(u),f=t(u.primaryKey,u.value,d);if(f instanceof se){const g=f.catch((y=>(d.done(),se.reject(y))));n.push(g)}d.isDone?s():d.G===null?u.continue():u.continue(d.G)}})).next((()=>se.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fo(r){return new se(((e,t)=>{r.onsuccess=n=>{const s=n.target.result;e(s)},r.onerror=n=>{const s=t_(n.target.error);t(s)}}))}let Hx=!1;function t_(r){const e=va.M(mn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Hx||(Hx=!0,setTimeout((()=>{throw n}),0)),n}}return r}const Yu="IndexBackfiller";class j5{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){_e(Yu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();_e(Yu,`Documents written: ${t}`)}catch(t){ka(t)?_e(Yu,"Ignoring IndexedDB error during index backfill: ",t):await Ko(t)}await this.re(6e4)}))}}class U5{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const n=new Set;let s=t,o=!0;return se.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!n.has(c))return _e(Yu,`Processing collection: ${c}`),this.oe(e,c,s).next((u=>{s-=u,n.add(c)}));o=!1})))).next((()=>t-s))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,n).next((o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(s,o))).next((u=>(_e(Yu,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>c.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((s,o)=>{const c=xA(o);e_(c,n)>0&&(n=c)})),new br(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Vr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vr.ce=-1;const bo=-1;function qm(r){return r==null}function lh(r){return r===0&&1/r==-1/0}function z5(r){return typeof r=="number"&&Number.isInteger(r)&&!lh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const am="";function Un(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=qx(e)),e=B5(r.get(t),e);return qx(e)}function B5(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const o=r.charAt(s);switch(o){case"\0":t+="";break;case am:t+="";break;default:t+=o}}return t}function qx(r){return r+am+""}function Ci(r){const e=r.length;if(Ne(e>=2,64408,{path:r}),e===2)return Ne(r.charAt(0)===am&&r.charAt(1)==="",56145,{path:r}),mt.emptyPath();const t=e-2,n=[];let s="";for(let o=0;o<e;){const c=r.indexOf(am,o);switch((c<0||c>t)&&Ae(50515,{path:r}),r.charAt(c+1)){case"":const u=r.substring(o,c);let d;s.length===0?d=u:(s+=u,d=s,s=""),n.push(d);break;case"":s+=r.substring(o,c),s+="\0";break;case"":s+=r.substring(o,c+1);break;default:Ae(61167,{path:r})}o=c+2}return new mt(n)}const ho="remoteDocuments",Mh="owner",Ul="owner",ch="mutationQueues",F5="userId",Jr="mutations",$x="batchId",_o="userMutationsIndex",Gx=["userId","batchId"];function Pf(r,e){return[r,Un(e)]}function AA(r,e,t){return[r,Un(e),t]}const H5={},oc="documentMutations",om="remoteDocumentsV14",q5=["prefixPath","collectionGroup","readTime","documentId"],Lf="documentKeyIndex",$5=["prefixPath","collectionGroup","documentId"],IA="collectionGroupIndex",G5=["collectionGroup","readTime","prefixPath","documentId"],uh="remoteDocumentGlobal",c0="remoteDocumentGlobalKey",lc="targets",RA="queryTargetsIndex",K5=["canonicalId","targetId"],cc="targetDocuments",Y5=["targetId","path"],n_="documentTargetsIndex",Q5=["path","targetId"],lm="targetGlobalKey",wo="targetGlobal",hh="collectionParents",W5=["collectionId","parent"],uc="clientMetadata",X5="clientId",$m="bundles",J5="bundleId",Gm="namedQueries",Z5="name",r_="indexConfiguration",eP="indexId",u0="collectionGroupIndex",tP="collectionGroup",Qu="indexState",nP=["indexId","uid"],CA="sequenceNumberIndex",rP=["uid","sequenceNumber"],Wu="indexEntries",iP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],NA="documentKeyIndex",sP=["indexId","uid","orderedDocumentKey"],Km="documentOverlays",aP=["userId","collectionPath","documentId"],h0="collectionPathOverlayIndex",oP=["userId","collectionPath","largestBatchId"],kA="collectionGroupOverlayIndex",lP=["userId","collectionGroup","largestBatchId"],i_="globals",cP="name",DA=[ch,Jr,oc,ho,lc,Mh,wo,cc,uc,uh,hh,$m,Gm],uP=[...DA,Km],OA=[ch,Jr,oc,om,lc,Mh,wo,cc,uc,uh,hh,$m,Gm,Km],MA=OA,s_=[...MA,r_,Qu,Wu],hP=s_,PA=[...s_,i_],dP=PA;class d0 extends TA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function gn(r,e){const t=Ue(r);return va.O(t.le,e)}function Kx(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Da(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function LA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Ut{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new Ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _f(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _f(this.root,e,this.comparator,!1)}getReverseIterator(){return new _f(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _f(this.root,e,this.comparator,!0)}}class _f{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,t,n,s,o){this.key=e,this.value=t,this.color=n??Nn.RED,this.left=s??Nn.EMPTY,this.right=o??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,o){return new Nn(e??this.key,t??this.value,n??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const o=n(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,n),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Nn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,n,s,o){return this}insert(e,t,n){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tt{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yx(this.data.getIterator())}getIteratorFrom(e){return new Yx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Tt(this.comparator);return t.data=e,t}}class Yx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function zl(r){return r.hasNext()?r.getNext():void 0}class sr{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new sr([])}unionWith(e){let t=new Tt(zt.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new sr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ac(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}class VA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new VA("Invalid base64 string: "+o):o}})(e);return new un(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o})(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const fP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(r){if(Ne(!!r,39018),typeof r=="string"){let e=0;const t=fP.exec(r);if(Ne(!!t,46558,{timestamp:r}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:jt(r.seconds),nanos:jt(r.nanos)}}function jt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ws(r){return typeof r=="string"?un.fromBase64String(r):un.fromUint8Array(r)}const jA="server_timestamp",UA="__type__",zA="__previous_value__",BA="__local_write_time__";function a_(r){return(r?.mapValue?.fields||{})[UA]?.stringValue===jA}function Ym(r){const e=r.mapValue.fields[zA];return a_(e)?Ym(e):e}function dh(r){const e=bs(r.mapValue.fields[BA].timestampValue);return new xt(e.seconds,e.nanos)}class mP{constructor(e,t,n,s,o,c,u,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const cm="(default)";class Oo{constructor(e,t){this.projectId=e,this.database=t||cm}static empty(){return new Oo("","")}get isDefaultDatabase(){return this.database===cm}isEqual(e){return e instanceof Oo&&e.projectId===this.projectId&&e.database===this.database}}const o_="__type__",FA="__max__",ga={mapValue:{fields:{__type__:{stringValue:FA}}}},l_="__vector__",hc="value",Vf={nullValue:"NULL_VALUE"};function Ea(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?a_(r)?4:HA(r)?9007199254740991:Qm(r)?10:11:Ae(28295,{value:r})}function Vi(r,e){if(r===e)return!0;const t=Ea(r);if(t!==Ea(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return dh(r).isEqual(dh(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=bs(s.timestampValue),u=bs(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(s,o){return ws(s.bytesValue).isEqual(ws(o.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(s,o){return jt(s.geoPointValue.latitude)===jt(o.geoPointValue.latitude)&&jt(s.geoPointValue.longitude)===jt(o.geoPointValue.longitude)})(r,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return jt(s.integerValue)===jt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=jt(s.doubleValue),u=jt(o.doubleValue);return c===u?lh(c)===lh(u):isNaN(c)&&isNaN(u)}return!1})(r,e);case 9:return ac(r.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return(function(s,o){const c=s.mapValue.fields||{},u=o.mapValue.fields||{};if(Kx(c)!==Kx(u))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(u[d]===void 0||!Vi(c[d],u[d])))return!1;return!0})(r,e);default:return Ae(52216,{left:r})}}function fh(r,e){return(r.values||[]).find((t=>Vi(t,e)))!==void 0}function Ta(r,e){if(r===e)return 0;const t=Ea(r),n=Ea(e);if(t!==n)return je(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(r.booleanValue,e.booleanValue);case 2:return(function(o,c){const u=jt(o.integerValue||o.doubleValue),d=jt(c.integerValue||c.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(r,e);case 3:return Qx(r.timestampValue,e.timestampValue);case 4:return Qx(dh(r),dh(e));case 5:return o0(r.stringValue,e.stringValue);case 6:return(function(o,c){const u=ws(o),d=ws(c);return u.compareTo(d)})(r.bytesValue,e.bytesValue);case 7:return(function(o,c){const u=o.split("/"),d=c.split("/");for(let f=0;f<u.length&&f<d.length;f++){const g=je(u[f],d[f]);if(g!==0)return g}return je(u.length,d.length)})(r.referenceValue,e.referenceValue);case 8:return(function(o,c){const u=je(jt(o.latitude),jt(c.latitude));return u!==0?u:je(jt(o.longitude),jt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Wx(r.arrayValue,e.arrayValue);case 10:return(function(o,c){const u=o.fields||{},d=c.fields||{},f=u[hc]?.arrayValue,g=d[hc]?.arrayValue,y=je(f?.values?.length||0,g?.values?.length||0);return y!==0?y:Wx(f,g)})(r.mapValue,e.mapValue);case 11:return(function(o,c){if(o===ga.mapValue&&c===ga.mapValue)return 0;if(o===ga.mapValue)return 1;if(c===ga.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=c.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const v=o0(d[y],g[y]);if(v!==0)return v;const w=Ta(u[d[y]],f[g[y]]);if(w!==0)return w}return je(d.length,g.length)})(r.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function Qx(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return je(r,e);const t=bs(r),n=bs(e),s=je(t.seconds,n.seconds);return s!==0?s:je(t.nanos,n.nanos)}function Wx(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const o=Ta(t[s],n[s]);if(o)return o}return je(t.length,n.length)}function dc(r){return f0(r)}function f0(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=bs(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ws(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return we.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",s=!0;for(const o of t.values||[])s?s=!1:n+=",",n+=f0(o);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const c of n)o?o=!1:s+=",",s+=`${c}:${f0(t.fields[c])}`;return s+"}"})(r.mapValue):Ae(61005,{value:r})}function jf(r){switch(Ea(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ym(r);return e?16+jf(e):16;case 5:return 2*r.stringValue.length;case 6:return ws(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((s,o)=>s+jf(o)),0)})(r.arrayValue);case 10:case 11:return(function(n){let s=0;return Da(n.fields,((o,c)=>{s+=o.length+jf(c)})),s})(r.mapValue);default:throw Ae(13486,{value:r})}}function mh(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function m0(r){return!!r&&"integerValue"in r}function gh(r){return!!r&&"arrayValue"in r}function Xx(r){return!!r&&"nullValue"in r}function Jx(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Uf(r){return!!r&&"mapValue"in r}function Qm(r){return(r?.mapValue?.fields||{})[o_]?.stringValue===l_}function Xu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Da(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Xu(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xu(r.arrayValue.values[t]);return e}return{...r}}function HA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===FA}const qA={mapValue:{fields:{[o_]:{stringValue:l_},[hc]:{arrayValue:{}}}}};function gP(r){return"nullValue"in r?Vf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?mh(Oo.empty(),we.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Qm(r)?qA:{mapValue:{}}:Ae(35942,{value:r})}function pP(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?mh(Oo.empty(),we.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?qA:"mapValue"in r?Qm(r)?{mapValue:{}}:ga:Ae(61959,{value:r})}function Zx(r,e){const t=Ta(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function eE(r,e){const t=Ta(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Uf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xu(t)}setAll(e){let t=zt.emptyPath(),n={},s=[];e.forEach(((c,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,n,s),n={},s=[],t=u.popLast()}c?n[u.lastSegment()]=Xu(c):s.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,n,s)}delete(e){const t=this.field(e.popLast());Uf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Uf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){Da(t,((s,o)=>e[s]=o));for(const s of n)delete e[s]}clone(){return new Ln(Xu(this.value))}}function $A(r){const e=[];return Da(r.fields,((t,n)=>{const s=new zt([t]);if(Uf(n)){const o=$A(n.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)})),new sr(e)}class $t{constructor(e,t,n,s,o,c,u){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(e){return new $t(e,0,De.min(),De.min(),De.min(),Ln.empty(),0)}static newFoundDocument(e,t,n,s){return new $t(e,1,t,De.min(),n,s,0)}static newNoDocument(e,t){return new $t(e,2,t,De.min(),De.min(),Ln.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,De.min(),De.min(),Ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fc{constructor(e,t){this.position=e,this.inclusive=t}}function tE(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const o=e[s],c=r.position[s];if(o.field.isKeyField()?n=we.comparator(we.fromName(c.referenceValue),t.key):n=Ta(c,t.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function nE(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Vi(r.position[t],e.position[t]))return!1;return!0}class ph{constructor(e,t="asc"){this.field=e,this.dir=t}}function yP(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class GA{}class nt extends GA{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new _P(e,t,n):t==="array-contains"?new wP(e,n):t==="in"?new JA(e,n):t==="not-in"?new xP(e,n):t==="array-contains-any"?new EP(e,n):new nt(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new vP(e,n):new bP(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ta(t,this.value)):t!==null&&Ea(this.value)===Ea(t)&&this.matchesComparison(Ta(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Et extends GA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Et(e,t)}matches(e){return mc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mc(r){return r.op==="and"}function g0(r){return r.op==="or"}function c_(r){return KA(r)&&mc(r)}function KA(r){for(const e of r.filters)if(e instanceof Et)return!1;return!0}function p0(r){if(r instanceof nt)return r.field.canonicalString()+r.op.toString()+dc(r.value);if(c_(r))return r.filters.map((e=>p0(e))).join(",");{const e=r.filters.map((t=>p0(t))).join(",");return`${r.op}(${e})`}}function YA(r,e){return r instanceof nt?(function(n,s){return s instanceof nt&&n.op===s.op&&n.field.isEqual(s.field)&&Vi(n.value,s.value)})(r,e):r instanceof Et?(function(n,s){return s instanceof Et&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((o,c,u)=>o&&YA(c,s.filters[u])),!0):!1})(r,e):void Ae(19439)}function QA(r,e){const t=r.filters.concat(e);return Et.create(t,r.op)}function WA(r){return r instanceof nt?(function(t){return`${t.field.canonicalString()} ${t.op} ${dc(t.value)}`})(r):r instanceof Et?(function(t){return t.op.toString()+" {"+t.getFilters().map(WA).join(" ,")+"}"})(r):"Filter"}class _P extends nt{constructor(e,t,n){super(e,t,n),this.key=we.fromName(n.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class vP extends nt{constructor(e,t){super(e,"in",t),this.keys=XA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class bP extends nt{constructor(e,t){super(e,"not-in",t),this.keys=XA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function XA(r,e){return(e.arrayValue?.values||[]).map((t=>we.fromName(t.referenceValue)))}class wP extends nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gh(t)&&fh(t.arrayValue,this.value)}}class JA extends nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fh(this.value.arrayValue,t)}}class xP extends nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(fh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fh(this.value.arrayValue,t)}}class EP extends nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>fh(this.value.arrayValue,n)))}}class TP{constructor(e,t=null,n=[],s=[],o=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=o,this.startAt=c,this.endAt=u,this.Te=null}}function y0(r,e=null,t=[],n=[],s=null,o=null,c=null){return new TP(r,e,t,n,s,o,c)}function Mo(r){const e=Ue(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>p0(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(o){return o.field.canonicalString()+o.dir})(n))).join(","),qm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>dc(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>dc(n))).join(",")),e.Te=t}return e.Te}function Ph(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!yP(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!YA(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!nE(r.startAt,e.startAt)&&nE(r.endAt,e.endAt)}function um(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function hm(r,e){return r.filters.filter((t=>t instanceof nt&&t.field.isEqual(e)))}function rE(r,e,t){let n=Vf,s=!0;for(const o of hm(r,e)){let c=Vf,u=!0;switch(o.op){case"<":case"<=":c=gP(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,u=!1;break;case"!=":case"not-in":c=Vf}Zx({value:n,inclusive:s},{value:c,inclusive:u})<0&&(n=c,s=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const c=t.position[o];Zx({value:n,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(n=c,s=t.inclusive);break}}return{value:n,inclusive:s}}function iE(r,e,t){let n=ga,s=!0;for(const o of hm(r,e)){let c=ga,u=!0;switch(o.op){case">=":case">":c=pP(o.value),u=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,u=!1;break;case"!=":case"not-in":c=ga}eE({value:n,inclusive:s},{value:c,inclusive:u})>0&&(n=c,s=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const c=t.position[o];eE({value:n,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(n=c,s=t.inclusive);break}}return{value:n,inclusive:s}}class Ec{constructor(e,t=null,n=[],s=[],o=null,c="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function SP(r,e,t,n,s,o,c,u){return new Ec(r,e,t,n,s,o,c,u)}function Lh(r){return new Ec(r)}function sE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function ZA(r){return r.collectionGroup!==null}function Ju(r){const e=Ue(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new Tt(zt.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new ph(o,n))})),t.has(zt.keyField().canonicalString())||e.Ie.push(new ph(zt.keyField(),n))}return e.Ie}function jr(r){const e=Ue(r);return e.Ee||(e.Ee=AP(e,Ju(r))),e.Ee}function AP(r,e){if(r.limitType==="F")return y0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new ph(s.field,o)}));const t=r.endAt?new fc(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new fc(r.startAt.position,r.startAt.inclusive):null;return y0(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function _0(r,e){const t=r.filters.concat([e]);return new Ec(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function dm(r,e,t){return new Ec(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Wm(r,e){return Ph(jr(r),jr(e))&&r.limitType===e.limitType}function e2(r){return`${Mo(jr(r))}|lt:${r.limitType}`}function Kl(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((s=>WA(s))).join(", ")}]`),qm(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>dc(s))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>dc(s))).join(",")),`Target(${n})`})(jr(r))}; limitType=${r.limitType})`}function Vh(r,e){return e.isFoundDocument()&&(function(n,s){const o=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):we.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)})(r,e)&&(function(n,s){for(const o of Ju(n))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(r,e)&&(function(n,s){for(const o of n.filters)if(!o.matches(s))return!1;return!0})(r,e)&&(function(n,s){return!(n.startAt&&!(function(c,u,d){const f=tE(c,u,d);return c.inclusive?f<=0:f<0})(n.startAt,Ju(n),s)||n.endAt&&!(function(c,u,d){const f=tE(c,u,d);return c.inclusive?f>=0:f>0})(n.endAt,Ju(n),s))})(r,e)}function IP(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function t2(r){return(e,t)=>{let n=!1;for(const s of Ju(r)){const o=RP(s,e,t);if(o!==0)return o;n=n||s.field.isKeyField()}return 0}}function RP(r,e,t){const n=r.field.isKeyField()?we.comparator(e.key,t.key):(function(o,c,u){const d=c.data.field(o),f=u.data.field(o);return d!==null&&f!==null?Ta(d,f):Ae(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Ae(19790,{direction:r.dir})}}class Ss{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,o]of n)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Da(this.inner,((t,n)=>{for(const[s,o]of n)e(s,o)}))}isEmpty(){return LA(this.inner)}size(){return this.innerSize}}const CP=new Ut(we.comparator);function vr(){return CP}const n2=new Ut(we.comparator);function Uu(...r){let e=n2;for(const t of r)e=e.insert(t.key,t);return e}function r2(r){let e=n2;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Ni(){return Zu()}function i2(){return Zu()}function Zu(){return new Ss((r=>r.toString()),((r,e)=>r.isEqual(e)))}const NP=new Ut(we.comparator),kP=new Tt(we.comparator);function Ye(...r){let e=kP;for(const t of r)e=e.add(t);return e}const DP=new Tt(je);function OP(){return DP}function u_(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lh(e)?"-0":e}}function s2(r){return{integerValue:""+r}}function MP(r,e){return z5(e)?s2(e):u_(r,e)}class Xm{constructor(){this._=void 0}}function PP(r,e,t){return r instanceof gc?(function(s,o){const c={fields:{[UA]:{stringValue:jA},[BA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&a_(o)&&(o=Ym(o)),o&&(c.fields[zA]=o),{mapValue:c}})(t,e):r instanceof Po?o2(r,e):r instanceof Lo?l2(r,e):(function(s,o){const c=a2(s,o),u=aE(c)+aE(s.Ae);return m0(c)&&m0(s.Ae)?s2(u):u_(s.serializer,u)})(r,e)}function LP(r,e,t){return r instanceof Po?o2(r,e):r instanceof Lo?l2(r,e):t}function a2(r,e){return r instanceof yh?(function(n){return m0(n)||(function(o){return!!o&&"doubleValue"in o})(n)})(e)?e:{integerValue:0}:null}class gc extends Xm{}class Po extends Xm{constructor(e){super(),this.elements=e}}function o2(r,e){const t=c2(e);for(const n of r.elements)t.some((s=>Vi(s,n)))||t.push(n);return{arrayValue:{values:t}}}class Lo extends Xm{constructor(e){super(),this.elements=e}}function l2(r,e){let t=c2(e);for(const n of r.elements)t=t.filter((s=>!Vi(s,n)));return{arrayValue:{values:t}}}class yh extends Xm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function aE(r){return jt(r.integerValue||r.doubleValue)}function c2(r){return gh(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Jm{constructor(e,t){this.field=e,this.transform=t}}function VP(r,e){return r.field.isEqual(e.field)&&(function(n,s){return n instanceof Po&&s instanceof Po||n instanceof Lo&&s instanceof Lo?ac(n.elements,s.elements,Vi):n instanceof yh&&s instanceof yh?Vi(n.Ae,s.Ae):n instanceof gc&&s instanceof gc})(r.transform,e.transform)}class jP{constructor(e,t){this.version=e,this.transformResults=t}}class jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Zm{}function u2(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new eg(r.key,jn.none()):new Tc(r.key,r.data,jn.none());{const t=r.data,n=Ln.empty();let s=new Tt(zt.comparator);for(let o of e.fields)if(!s.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?n.delete(o):n.set(o,c),s=s.add(o)}return new As(r.key,n,new sr(s.toArray()),jn.none())}}function UP(r,e,t){r instanceof Tc?(function(s,o,c){const u=s.value.clone(),d=lE(s.fieldTransforms,o,c.transformResults);u.setAll(d),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(r,e,t):r instanceof As?(function(s,o,c){if(!zf(s.precondition,o))return void o.convertToUnknownDocument(c.version);const u=lE(s.fieldTransforms,o,c.transformResults),d=o.data;d.setAll(h2(s)),d.setAll(u),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(r,e,t):(function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function eh(r,e,t,n){return r instanceof Tc?(function(o,c,u,d){if(!zf(o.precondition,c))return u;const f=o.value.clone(),g=cE(o.fieldTransforms,d,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(r,e,t,n):r instanceof As?(function(o,c,u,d){if(!zf(o.precondition,c))return u;const f=cE(o.fieldTransforms,d,c),g=c.data;return g.setAll(h2(o)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(r,e,t,n):(function(o,c,u){return zf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(r,e,t)}function zP(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),o=a2(n.transform,s||null);o!=null&&(t===null&&(t=Ln.empty()),t.set(n.field,o))}return t||null}function oE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&ac(n,s,((o,c)=>VP(o,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Tc extends Zm{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class As extends Zm{constructor(e,t,n,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function h2(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function lE(r,e,t){const n=new Map;Ne(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let s=0;s<t.length;s++){const o=r[s],c=o.transform,u=e.data.field(o.field);n.set(o.field,LP(c,u,t[s]))}return n}function cE(r,e,t){const n=new Map;for(const s of r){const o=s.transform,c=t.data.field(s.field);n.set(s.field,PP(o,c,e))}return n}class eg extends Zm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class d2 extends Zm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class h_{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&UP(o,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=eh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=eh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=i2();return this.mutations.forEach((s=>{const o=e.get(s.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=t.has(s.key)?null:u;const d=u2(c,u);d!==null&&n.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(De.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&ac(this.mutations,e.mutations,((t,n)=>oE(t,n)))&&ac(this.baseMutations,e.baseMutations,((t,n)=>oE(t,n)))}}class d_{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){Ne(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=(function(){return NP})();const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,n[c].version);return new d_(e,t,n,s)}}class f_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class BP{constructor(e,t){this.count=e,this.unchangedNames=t}}var ln,at;function FP(r){switch(r){case de.OK:return Ae(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function f2(r){if(r===void 0)return Kn("GRPC error has no .code"),de.UNKNOWN;switch(r){case ln.OK:return de.OK;case ln.CANCELLED:return de.CANCELLED;case ln.UNKNOWN:return de.UNKNOWN;case ln.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case ln.INTERNAL:return de.INTERNAL;case ln.UNAVAILABLE:return de.UNAVAILABLE;case ln.UNAUTHENTICATED:return de.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case ln.NOT_FOUND:return de.NOT_FOUND;case ln.ALREADY_EXISTS:return de.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return de.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case ln.ABORTED:return de.ABORTED;case ln.OUT_OF_RANGE:return de.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return de.UNIMPLEMENTED;case ln.DATA_LOSS:return de.DATA_LOSS;default:return Ae(39323,{code:r})}}(at=ln||(ln={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";function HP(){return new TextEncoder}const qP=new _a([4294967295,4294967295],0);function uE(r){const e=HP().encode(r),t=new hA;return t.update(e),new Uint8Array(t.digest())}function hE(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new _a([t,n],0),new _a([s,o],0)]}class m_{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new zu(`Invalid padding: ${t}`);if(n<0)throw new zu(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new zu(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new zu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=_a.fromNumber(this.ge)}ye(e,t,n){let s=e.add(t.multiply(_a.fromNumber(n)));return s.compare(qP)===1&&(s=new _a([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=uE(e),[n,s]=hE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,s,o);if(!this.we(c))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new m_(o,s,t);return n.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const t=uE(e),[n,s]=hE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,s,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class zu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tg{constructor(e,t,n,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,jh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new tg(De.min(),s,new Ut(je),vr(),Ye())}}class jh{constructor(e,t,n,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new jh(n,t,Ye(),Ye(),Ye())}}class Bf{constructor(e,t,n,s){this.be=e,this.removedTargetIds=t,this.key=n,this.De=s}}class m2{constructor(e,t){this.targetId=e,this.Ce=t}}class g2{constructor(e,t,n=un.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class dE{constructor(){this.ve=0,this.Fe=fE(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),n=Ye();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:Ae(38017,{changeType:o})}})),new jh(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=fE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ne(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $P{constructor(e){this.Ge=e,this.ze=new Map,this.je=vr(),this.Je=vf(),this.He=vf(),this.Ye=new Ut(je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,n=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(um(o))if(n===0){const c=new we(o.path);this.et(t,c,$t.newNoDocument(c,De.min()))}else Ne(n===1,20013,{expectedCount:n});else{const c=this._t(t);if(c!==n){const u=this.ut(e),d=u?this.ct(u,e,c):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:o=0}=t;let c,u;try{c=ws(n).toUint8Array()}catch(d){if(d instanceof VA)return Do("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new m_(c,s,o)}catch(d){return Do(d instanceof zu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let s=0;return n.forEach((o=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const u=this.ot(c);if(u){if(o.current&&um(u.target)){const d=new we(u.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,$t.newNoDocument(d,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let n=Ye();this.He.forEach(((o,c)=>{let u=!0;c.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const s=new tg(e,t,this.Ye,this.je,n);return this.je=vr(),this.Je=vf(),this.He=vf(),this.Ye=new Ut(je),s}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new dE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Tt(je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Tt(je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function vf(){return new Ut(we.comparator)}function fE(){return new Ut(we.comparator)}const GP={asc:"ASCENDING",desc:"DESCENDING"},KP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YP={and:"AND",or:"OR"};class QP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function v0(r,e){return r.useProto3Json||qm(e)?e:{value:e}}function pc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function p2(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function WP(r,e){return pc(r,e.toTimestamp())}function Qn(r){return Ne(!!r,49232),De.fromTimestamp((function(t){const n=bs(t);return new xt(n.seconds,n.nanos)})(r))}function g_(r,e){return b0(r,e).canonicalString()}function b0(r,e){const t=(function(s){return new mt(["projects",s.projectId,"databases",s.database])})(r).child("documents");return e===void 0?t:t.child(e)}function y2(r){const e=mt.fromString(r);return Ne(A2(e),10190,{key:e.toString()}),e}function fm(r,e){return g_(r.databaseId,e.path)}function xo(r,e){const t=y2(e);if(t.get(1)!==r.databaseId.projectId)throw new ve(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ve(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new we(b2(t))}function _2(r,e){return g_(r.databaseId,e)}function v2(r){const e=y2(r);return e.length===4?mt.emptyPath():b2(e)}function w0(r){return new mt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function b2(r){return Ne(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function mE(r,e,t){return{name:fm(r,e),fields:t.value.mapValue.fields}}function XP(r,e,t){const n=xo(r,e.name),s=Qn(e.updateTime),o=e.createTime?Qn(e.createTime):De.min(),c=new Ln({mapValue:{fields:e.fields}}),u=$t.newFoundDocument(n,s,o,c);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function JP(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ae(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Ne(g===void 0||typeof g=="string",58123),un.fromBase64String(g||"")):(Ne(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),un.fromUint8Array(g||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(f){const g=f.code===void 0?de.UNKNOWN:f2(f.code);return new ve(g,f.message||"")})(c);t=new g2(n,s,o,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=xo(r,n.document.name),o=Qn(n.document.updateTime),c=n.document.createTime?Qn(n.document.createTime):De.min(),u=new Ln({mapValue:{fields:n.document.fields}}),d=$t.newFoundDocument(s,o,c,u),f=n.targetIds||[],g=n.removedTargetIds||[];t=new Bf(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=xo(r,n.document),o=n.readTime?Qn(n.readTime):De.min(),c=$t.newNoDocument(s,o),u=n.removedTargetIds||[];t=new Bf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=xo(r,n.document),o=n.removedTargetIds||[];t=new Bf([],o,s,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:o}=n,c=new BP(s,o),u=n.targetId;t=new m2(u,c)}}return t}function mm(r,e){let t;if(e instanceof Tc)t={update:mE(r,e.key,e.value)};else if(e instanceof eg)t={delete:fm(r,e.key)};else if(e instanceof As)t={update:mE(r,e.key,e.data),updateMask:i3(e.fieldMask)};else{if(!(e instanceof d2))return Ae(16599,{Vt:e.type});t={verify:fm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(o,c){const u=c.transform;if(u instanceof gc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Po)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Lo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof yh)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw Ae(20930,{transform:c.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:WP(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ae(27497)})(r,e.precondition)),t}function x0(r,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?jn.updateTime(Qn(o.updateTime)):o.exists!==void 0?jn.exists(o.exists):jn.none()})(e.currentDocument):jn.none(),n=e.updateTransforms?e.updateTransforms.map((s=>(function(c,u){let d=null;if("setToServerValue"in u)Ne(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new gc;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];d=new Po(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];d=new Lo(g)}else"increment"in u?d=new yh(c,u.increment):Ae(16584,{proto:u});const f=zt.fromServerFormat(u.fieldPath);return new Jm(f,d)})(r,s))):[];if(e.update){e.update.name;const s=xo(r,e.update.name),o=new Ln({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(d){const f=d.fieldPaths||[];return new sr(f.map((g=>zt.fromServerFormat(g))))})(e.updateMask);return new As(s,o,c,t,n)}return new Tc(s,o,t,n)}if(e.delete){const s=xo(r,e.delete);return new eg(s,t)}if(e.verify){const s=xo(r,e.verify);return new d2(s,t)}return Ae(1463,{proto:e})}function ZP(r,e){return r&&r.length>0?(Ne(e!==void 0,14353),r.map((t=>(function(s,o){let c=s.updateTime?Qn(s.updateTime):Qn(o);return c.isEqual(De.min())&&(c=Qn(o)),new jP(c,s.transformResults||[])})(t,e)))):[]}function w2(r,e){return{documents:[_2(r,e.path)]}}function x2(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=_2(r,s);const o=(function(f){if(f.length!==0)return S2(Et.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(f){if(f.length!==0)return f.map((g=>(function(v){return{field:Yl(v.field),direction:t3(v.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=v0(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function E2(r){let e=v2(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){Ne(n===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(y){const v=T2(y);return v instanceof Et&&c_(v)?v.getFilters():[v]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((v=>(function(T){return new ph(Ql(T.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let v;return v=typeof y=="object"?y.value:y,qm(v)?null:v})(t.limit));let d=null;t.startAt&&(d=(function(y){const v=!!y.before,w=y.values||[];return new fc(w,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){const v=!y.before,w=y.values||[];return new fc(w,v)})(t.endAt)),SP(e,s,c,o,u,"F",d,f)}function e3(r,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function T2(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Ql(t.unaryFilter.field);return nt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Ql(t.unaryFilter.field);return nt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ql(t.unaryFilter.field);return nt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ql(t.unaryFilter.field);return nt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(r):r.fieldFilter!==void 0?(function(t){return nt.create(Ql(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Et.create(t.compositeFilter.filters.map((n=>T2(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(r):Ae(30097,{filter:r})}function t3(r){return GP[r]}function n3(r){return KP[r]}function r3(r){return YP[r]}function Yl(r){return{fieldPath:r.canonicalString()}}function Ql(r){return zt.fromServerFormat(r.fieldPath)}function S2(r){return r instanceof nt?(function(t){if(t.op==="=="){if(Jx(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NAN"}};if(Xx(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Jx(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NOT_NAN"}};if(Xx(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yl(t.field),op:n3(t.op),value:t.value}}})(r):r instanceof Et?(function(t){const n=t.getFilters().map((s=>S2(s)));return n.length===1?n[0]:{compositeFilter:{op:r3(t.op),filters:n}}})(r):Ae(54877,{filter:r})}function i3(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function A2(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class fs{constructor(e,t,n,s,o=De.min(),c=De.min(),u=un.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class I2{constructor(e){this.yt=e}}function s3(r,e){let t;if(e.document)t=XP(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=we.fromSegments(e.noDocument.path),s=jo(e.noDocument.readTime);t=$t.newNoDocument(n,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ae(56709);{const n=we.fromSegments(e.unknownDocument.path),s=jo(e.unknownDocument.version);t=$t.newUnknownDocument(n,s)}}return e.readTime&&t.setReadTime((function(s){const o=new xt(s[0],s[1]);return De.fromTimestamp(o)})(e.readTime)),t}function gE(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:gm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(o,c){return{name:fm(o,c.key),fields:c.data.value.mapValue.fields,updateTime:pc(o,c.version.toTimestamp()),createTime:pc(o,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:Vo(e.version)};else{if(!e.isUnknownDocument())return Ae(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:Vo(e.version)}}return n}function gm(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Vo(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jo(r){const e=new xt(r.seconds,r.nanoseconds);return De.fromTimestamp(e)}function mo(r,e){const t=(e.baseMutations||[]).map((o=>x0(r.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];c.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const n=e.mutations.map((o=>x0(r.yt,o))),s=xt.fromMillis(e.localWriteTimeMs);return new h_(e.batchId,s,t,n)}function Bu(r){const e=jo(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?jo(r.lastLimboFreeSnapshotVersion):De.min();let n;return n=(function(o){return o.documents!==void 0})(r.query)?(function(o){const c=o.documents.length;return Ne(c===1,1966,{count:c}),jr(Lh(v2(o.documents[0])))})(r.query):(function(o){return jr(E2(o))})(r.query),new fs(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,un.fromBase64String(r.resumeToken))}function R2(r,e){const t=Vo(e.snapshotVersion),n=Vo(e.lastLimboFreeSnapshotVersion);let s;s=um(e.target)?w2(r.yt,e.target):x2(r.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function C2(r){const e=E2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?dm(e,e.limit,"L"):e}function My(r,e){return new f_(e.largestBatchId,x0(r.yt,e.overlayMutation))}function pE(r,e){const t=e.path.lastSegment();return[r,Un(e.path.popLast()),t]}function yE(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:Vo(n.readTime),documentKey:Un(n.documentKey.path),largestBatchId:n.largestBatchId}}class a3{getBundleMetadata(e,t){return _E(e).get(t).next((n=>{if(n)return(function(o){return{id:o.bundleId,createTime:jo(o.createTime),version:o.version}})(n)}))}saveBundleMetadata(e,t){return _E(e).put((function(s){return{bundleId:s.id,createTime:Vo(Qn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return vE(e).get(t).next((n=>{if(n)return(function(o){return{name:o.name,query:C2(o.bundledQuery),readTime:jo(o.readTime)}})(n)}))}saveNamedQuery(e,t){return vE(e).put((function(s){return{name:s.name,readTime:Vo(Qn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function _E(r){return gn(r,$m)}function vE(r){return gn(r,Gm)}class ng{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new ng(e,n)}getOverlay(e,t){return Nu(e).get(pE(this.userId,t)).next((n=>n?My(this.serializer,n):null))}getOverlays(e,t){const n=Ni();return se.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&n.set(s,o)})))).next((()=>n))}saveOverlays(e,t,n){const s=[];return n.forEach(((o,c)=>{const u=new f_(t,c);s.push(this.St(e,u))})),se.waitFor(s)}removeOverlaysForBatchId(e,t,n){const s=new Set;t.forEach((c=>s.add(Un(c.getCollectionPath()))));const o=[];return s.forEach((c=>{const u=IDBKeyRange.bound([this.userId,c,n],[this.userId,c,n+1],!1,!0);o.push(Nu(e).Z(h0,u))})),se.waitFor(o)}getOverlaysForCollection(e,t,n){const s=Ni(),o=Un(t),c=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Nu(e).J(h0,c).next((u=>{for(const d of u){const f=My(this.serializer,d);s.set(f.getKey(),f)}return s}))}getOverlaysForCollectionGroup(e,t,n,s){const o=Ni();let c;const u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Nu(e).ee({index:kA,range:u},((d,f,g)=>{const y=My(this.serializer,f);o.size()<s||y.largestBatchId===c?(o.set(y.getKey(),y),c=y.largestBatchId):g.done()})).next((()=>o))}St(e,t){return Nu(e).put((function(s,o,c){const[u,d,f]=pE(o,c.mutation.key);return{userId:o,collectionPath:d,documentId:f,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:mm(s.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Nu(r){return gn(r,Km)}class o3{bt(e){return gn(e,i_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const n=t?.value;return n?un.fromUint8Array(n):un.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class go{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(jt(e.integerValue));else if("doubleValue"in e){const n=jt(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),lh(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=bs(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ws(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?HA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Qm(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ae(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const s of Object.keys(n))this.Ot(s,t),this.Ct(n[s],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const s=hc,o=n[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(jt(o)),this.Ot(s,t),this.Ct(n[s],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const s of n)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),we.fromName(e).path.forEach((n=>{this.Ft(t,60),this.Ut(n,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}go.Kt=new go;const Bl=255;function l3(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function bE(r){const e=64-(function(n){let s=0;for(let o=0;o<8;++o){const c=l3(255&n[o]);if(s+=c,c!==8)break}return s})(r);return Math.ceil(e/8)}class c3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),n=bE(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),n=bE(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(Bl),this.sn(255)}_n(){this.an(Bl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let s=1;s<t.length;++s)t[s]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Bl?(this.sn(Bl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Bl?(this.an(Bl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class u3{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class h3{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class ku{constructor(){this.cn=new c3,this.ln=new u3(this.cn),this.hn=new h3(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class po{constructor(e,t,n,s){this.Tn=e,this.In=t,this.En=n,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new po(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:Ff(this.En),directionalValue:Ff(this.dn),orderedDocumentKey:Ff(t),documentKey:n.path.toArray()}}Vn(e,t,n){const s=this.Rn(e,t,n);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function aa(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=wE(r.En,e.En),t!==0?t:(t=wE(r.dn,e.dn),t!==0?t:we.comparator(r.In,e.In)))}function wE(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}function Ff(r){return xS()?(function(t){let n="";for(let s=0;s<t.length;s++)n+=String.fromCharCode(t[s]);return n})(r):r}function xE(r){return typeof r!="string"?r:(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(r)}class EE{constructor(e){this.mn=new Tt(((t,n)=>zt.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const n=t;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(Ne(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=l0(e);if(t!==void 0&&!this.wn(t))return!1;const n=uo(e);let s=new Set,o=0,c=0;for(;o<n.length&&this.wn(n[o]);++o)s=s.add(n[o].fieldPath.canonicalString());if(o===n.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!s.has(u.field.canonicalString())){const d=n[o];if(!this.Sn(u,d)||!this.bn(this.fn[c++],d))return!1}++o}for(;o<n.length;++o){const u=n[o];if(c>=this.fn.length||!this.bn(this.fn[c++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new Tt(zt.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new Mf(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Mf(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Mf(n.field,n.dir==="asc"?0:1)));return new sm(sm.UNKNOWN_ID,this.collectionId,t,oh.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function N2(r){if(Ne(r instanceof nt||r instanceof Et,20012),r instanceof nt){if(r instanceof JA){const t=r.value.arrayValue?.values?.map((n=>nt.create(r.field,"==",n)))||[];return Et.create(t,"or")}return r}const e=r.filters.map((t=>N2(t)));return Et.create(e,r.op)}function d3(r){if(r.getFilters().length===0)return[];const e=S0(N2(r));return Ne(k2(e),7391),E0(e)||T0(e)?[e]:e.getFilters()}function E0(r){return r instanceof nt}function T0(r){return r instanceof Et&&c_(r)}function k2(r){return E0(r)||T0(r)||(function(t){if(t instanceof Et&&g0(t)){for(const n of t.getFilters())if(!E0(n)&&!T0(n))return!1;return!0}return!1})(r)}function S0(r){if(Ne(r instanceof nt||r instanceof Et,34018),r instanceof nt)return r;if(r.filters.length===1)return S0(r.filters[0]);const e=r.filters.map((n=>S0(n)));let t=Et.create(e,r.op);return t=pm(t),k2(t)?t:(Ne(t instanceof Et,64498),Ne(mc(t),40251),Ne(t.filters.length>1,57927),t.filters.reduce(((n,s)=>p_(n,s))))}function p_(r,e){let t;return Ne(r instanceof nt||r instanceof Et,38388),Ne(e instanceof nt||e instanceof Et,25473),t=r instanceof nt?e instanceof nt?(function(s,o){return Et.create([s,o],"and")})(r,e):TE(r,e):e instanceof nt?TE(e,r):(function(s,o){if(Ne(s.filters.length>0&&o.filters.length>0,48005),mc(s)&&mc(o))return QA(s,o.getFilters());const c=g0(s)?s:o,u=g0(s)?o:s,d=c.filters.map((f=>p_(f,u)));return Et.create(d,"or")})(r,e),pm(t)}function TE(r,e){if(mc(e))return QA(e,r.getFilters());{const t=e.filters.map((n=>p_(r,n)));return Et.create(t,"or")}}function pm(r){if(Ne(r instanceof nt||r instanceof Et,11850),r instanceof nt)return r;const e=r.getFilters();if(e.length===1)return pm(e[0]);if(KA(r))return r;const t=e.map((s=>pm(s))),n=[];return t.forEach((s=>{s instanceof nt?n.push(s):s instanceof Et&&(s.op===r.op?n.push(...s.filters):n.push(s))})),n.length===1?n[0]:Et.create(n,r.op)}class f3{constructor(){this.Cn=new y_}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(br.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(br.min())}updateCollectionGroup(e,t,n){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class y_{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new Tt(mt.comparator),o=!s.has(n);return this.index[t]=s.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Tt(mt.comparator)).toArray()}}const SE="IndexedDbIndexManager",bf=new Uint8Array(0);class m3{constructor(e,t){this.databaseId=t,this.vn=new y_,this.Fn=new Ss((n=>Mo(n)),((n,s)=>Ph(n,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:n,parent:Un(s)};return AE(e).put(o)}return se.resolve()}getCollectionParents(e,t){const n=[],s=IDBKeyRange.bound([t,""],[vA(t),""],!1,!0);return AE(e).J(s).next((o=>{for(const c of o){if(c.collectionId!==t)break;n.push(Ci(c.parent))}return n}))}addFieldIndex(e,t){const n=Du(e),s=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=n.add(s);if(t.indexState){const c=Hl(e);return o.next((u=>{c.put(yE(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const n=Du(e),s=Hl(e),o=Fl(e);return n.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Du(e),n=Fl(e),s=Hl(e);return t.Z().next((()=>n.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return se.forEach(this.Mn(t),(n=>this.getIndexType(e,n).next((s=>{if(s===0||s===1){const o=new EE(n).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const n=Fl(e);let s=!0;const o=new Map;return se.forEach(this.Mn(t),(c=>this.xn(e,c).next((u=>{s&&(s=!!u),o.set(c,u)})))).next((()=>{if(s){let c=Ye();const u=[];return se.forEach(o,((d,f)=>{_e(SE,`Using index ${(function(B){return`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map((q=>`${q.fieldPath}:${q.kind}`)).join(",")}`})(d)} to execute ${Mo(t)}`);const g=(function(B,q){const K=l0(q);if(K===void 0)return null;for(const z of hm(B,K.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null})(f,d),y=(function(B,q){const K=new Map;for(const z of uo(q))for(const O of hm(B,z.fieldPath))switch(O.op){case"==":case"in":K.set(z.fieldPath.canonicalString(),O.value);break;case"not-in":case"!=":return K.set(z.fieldPath.canonicalString(),O.value),Array.from(K.values())}return null})(f,d),v=(function(B,q){const K=[];let z=!0;for(const O of uo(q)){const x=O.kind===0?rE(B,O.fieldPath,B.startAt):iE(B,O.fieldPath,B.startAt);K.push(x.value),z&&(z=x.inclusive)}return new fc(K,z)})(f,d),w=(function(B,q){const K=[];let z=!0;for(const O of uo(q)){const x=O.kind===0?iE(B,O.fieldPath,B.endAt):rE(B,O.fieldPath,B.endAt);K.push(x.value),z&&(z=x.inclusive)}return new fc(K,z)})(f,d),T=this.On(d,f,v),N=this.On(d,f,w),P=this.Nn(d,f,y),V=this.Bn(d.indexId,g,T,v.inclusive,N,w.inclusive,P);return se.forEach(V,(H=>n.Y(H,t.limit).next((B=>{B.forEach((q=>{const K=we.fromSegments(q.documentKey);c.has(K)||(c=c.add(K),u.push(K))}))}))))})).next((()=>u))}return se.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=d3(Et.create(e.filters,"and")).map((n=>y0(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,s,o,c,u){const d=(t!=null?t.length:1)*Math.max(n.length,o.length),f=d/(t!=null?t.length:1),g=[];for(let y=0;y<d;++y){const v=t?this.Ln(t[y/f]):bf,w=this.kn(e,v,n[y%f],s),T=this.qn(e,v,o[y%f],c),N=u.map((P=>this.kn(e,v,P,!0)));g.push(...this.createRange(w,T,N))}return g}kn(e,t,n,s){const o=new po(e,we.empty(),t,n);return s?o:o.An()}qn(e,t,n,s){const o=new po(e,we.empty(),t,n);return s?o.An():o}xn(e,t){const n=new EE(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let c=null;for(const u of o)n.yn(u)&&(!c||u.fields.length>c.fields.length)&&(c=u);return c}))}getIndexType(e,t){let n=2;const s=this.Mn(t);return se.forEach(s,(o=>this.xn(e,o).next((c=>{c?n!==0&&c.fields.length<(function(d){let f=new Tt(zt.comparator),g=!1;for(const y of d.filters)for(const v of y.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?g=!0:f=f.add(v.field));for(const y of d.orderBy)y.field.isKeyField()||(f=f.add(y.field));return f.size+(g?1:0)})(o)&&(n=1):n=0})))).next((()=>(function(c){return c.limit!==null})(t)&&s.length>1&&n===2?1:n))}Qn(e,t){const n=new ku;for(const s of uo(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const c=n.Pn(s.kind);go.Kt.Dt(o,c)}return n.un()}Ln(e){const t=new ku;return go.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new ku;return go.Kt.Dt(mh(this.databaseId,t),n.Pn((function(o){const c=uo(o);return c.length===0?0:c[c.length-1].kind})(e))),n.un()}Nn(e,t,n){if(n===null)return[];let s=[];s.push(new ku);let o=0;for(const c of uo(e)){const u=n[o++];for(const d of s)if(this.Un(t,c.fieldPath)&&gh(u))s=this.Kn(s,c,u);else{const f=d.Pn(c.kind);go.Kt.Dt(u,f)}}return this.Wn(s)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const s=[...e],o=[];for(const c of n.arrayValue.values||[])for(const u of s){const d=new ku;d.seed(u.un()),go.Kt.Dt(c,d.Pn(t.kind)),o.push(d)}return o}Un(e,t){return!!e.filters.find((n=>n instanceof nt&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=Du(e),s=Hl(e);return(t?n.J(u0,IDBKeyRange.bound(t,t)):n.J()).next((o=>{const c=[];return se.forEach(o,(u=>s.get([u.indexId,this.uid]).next((d=>{c.push((function(g,y){const v=y?new oh(y.sequenceNumber,new br(jo(y.readTime),new we(Ci(y.documentKey)),y.largestBatchId)):oh.empty(),w=g.fields.map((([T,N])=>new Mf(zt.fromServerFormat(T),N)));return new sm(g.indexId,g.collectionGroup,w,v)})(u,d))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,s)=>{const o=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:je(n.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const s=Du(e),o=Hl(e);return this.Gn(e).next((c=>s.J(u0,IDBKeyRange.bound(t,t)).next((u=>se.forEach(u,(d=>o.put(yE(d.indexId,this.uid,c,n))))))))}updateIndexEntries(e,t){const n=new Map;return se.forEach(t,((s,o)=>{const c=n.get(s.collectionGroup);return(c?se.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next((u=>(n.set(s.collectionGroup,u),se.forEach(u,(d=>this.zn(e,s,d).next((f=>{const g=this.jn(o,d);return f.isEqual(g)?se.resolve():this.Jn(e,o,d,f,g)})))))))}))}Hn(e,t,n,s){return Fl(e).put(s.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,s){return Fl(e).delete(s.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const s=Fl(e);let o=new Tt(aa);return s.ee({index:NA,range:IDBKeyRange.only([n.indexId,this.uid,Ff(this.$n(n,t))])},((c,u)=>{o=o.add(new po(n.indexId,t,xE(u.arrayValue),xE(u.directionalValue)))})).next((()=>o))}jn(e,t){let n=new Tt(aa);const s=this.Qn(t,e);if(s==null)return n;const o=l0(t);if(o!=null){const c=e.data.field(o.fieldPath);if(gh(c))for(const u of c.arrayValue.values||[])n=n.add(new po(t.indexId,e.key,this.Ln(u),s))}else n=n.add(new po(t.indexId,e.key,bf,s));return n}Jn(e,t,n,s,o){_e(SE,"Updating index entries for document '%s'",t.key);const c=[];return(function(d,f,g,y,v){const w=d.getIterator(),T=f.getIterator();let N=zl(w),P=zl(T);for(;N||P;){let V=!1,H=!1;if(N&&P){const B=g(N,P);B<0?H=!0:B>0&&(V=!0)}else N!=null?H=!0:V=!0;V?(y(P),P=zl(T)):H?(v(N),N=zl(w)):(N=zl(w),P=zl(T))}})(s,o,aa,(u=>{c.push(this.Hn(e,t,n,u))}),(u=>{c.push(this.Yn(e,t,n,u))})),se.waitFor(c)}Gn(e){let t=1;return Hl(e).ee({index:CA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((c,u)=>aa(c,u))).filter(((c,u,d)=>!u||aa(c,d[u-1])!==0));const s=[];s.push(e);for(const c of n){const u=aa(c,e),d=aa(c,t);if(u===0)s[0]=e.An();else if(u>0&&d<0)s.push(c),s.push(c.An());else if(d>0)break}s.push(t);const o=[];for(let c=0;c<s.length;c+=2){if(this.Zn(s[c],s[c+1]))return[];const u=s[c].Vn(this.uid,bf,we.empty()),d=s[c+1].Vn(this.uid,bf,we.empty());o.push(IDBKeyRange.bound(u,d))}return o}Zn(e,t){return aa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(IE)}getMinOffset(e,t){return se.mapArray(this.Mn(t),(n=>this.xn(e,n).next((s=>s||Ae(44426))))).next(IE)}}function AE(r){return gn(r,hh)}function Fl(r){return gn(r,Wu)}function Du(r){return gn(r,r_)}function Hl(r){return gn(r,Qu)}function IE(r){Ne(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const s=r[n].indexState.offset;e_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new br(e.readTime,e.documentKey,t)}const RE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},D2=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function O2(r,e,t){const n=r.store(Jr),s=r.store(oc),o=[],c=IDBKeyRange.only(t.batchId);let u=0;const d=n.ee({range:c},((g,y,v)=>(u++,v.delete())));o.push(d.next((()=>{Ne(u===1,47070,{batchId:t.batchId})})));const f=[];for(const g of t.mutations){const y=AA(e,g.key.path,t.batchId);o.push(s.delete(y)),f.push(g.key)}return se.waitFor(o).next((()=>f))}function ym(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Ae(14731);e=r.noDocument}return JSON.stringify(e).length}Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(D2,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);class rg{constructor(e,t,n,s){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=s,this.Xn={}}static wt(e,t,n,s){Ne(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new rg(o,t,n,s)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return oa(e).ee({index:_o,range:n},((s,o,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,n,s){const o=Wl(e),c=oa(e);return c.add({}).next((u=>{Ne(typeof u=="number",49019);const d=new h_(u,t,n,s),f=(function(w,T,N){const P=N.baseMutations.map((H=>mm(w.yt,H))),V=N.mutations.map((H=>mm(w.yt,H)));return{userId:T,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:P,mutations:V}})(this.serializer,this.userId,d),g=[];let y=new Tt(((v,w)=>je(v.canonicalString(),w.canonicalString())));for(const v of s){const w=AA(this.userId,v.key.path,u);y=y.add(v.key.path.popLast()),g.push(c.put(f)),g.push(o.put(w,H5))}return y.forEach((v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[u]=d.keys()})),se.waitFor(g).next((()=>d))}))}lookupMutationBatch(e,t){return oa(e).get(t).next((n=>n?(Ne(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),mo(this.serializer,n)):null))}er(e,t){return this.Xn[t]?se.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const s=n.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=IDBKeyRange.lowerBound([this.userId,n]);let o=null;return oa(e).ee({index:_o,range:s},((c,u,d)=>{u.userId===this.userId&&(Ne(u.batchId>=n,47524,{tr:n}),o=mo(this.serializer,u)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=bo;return oa(e).ee({index:_o,range:t,reverse:!0},((s,o,c)=>{n=o.batchId,c.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,bo],[this.userId,Number.POSITIVE_INFINITY]);return oa(e).J(_o,t).next((n=>n.map((s=>mo(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Pf(this.userId,t.path),s=IDBKeyRange.lowerBound(n),o=[];return Wl(e).ee({range:s},((c,u,d)=>{const[f,g,y]=c,v=Ci(g);if(f===this.userId&&t.path.isEqual(v))return oa(e).get(y).next((w=>{if(!w)throw Ae(61480,{nr:c,batchId:y});Ne(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:y}),o.push(mo(this.serializer,w))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Tt(je);const s=[];return t.forEach((o=>{const c=Pf(this.userId,o.path),u=IDBKeyRange.lowerBound(c),d=Wl(e).ee({range:u},((f,g,y)=>{const[v,w,T]=f,N=Ci(w);v===this.userId&&o.path.isEqual(N)?n=n.add(T):y.done()}));s.push(d)})),se.waitFor(s).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1,o=Pf(this.userId,n),c=IDBKeyRange.lowerBound(o);let u=new Tt(je);return Wl(e).ee({range:c},((d,f,g)=>{const[y,v,w]=d,T=Ci(v);y===this.userId&&n.isPrefixOf(T)?T.length===s&&(u=u.add(w)):g.done()})).next((()=>this.rr(e,u)))}rr(e,t){const n=[],s=[];return t.forEach((o=>{s.push(oa(e).get(o).next((c=>{if(c===null)throw Ae(35274,{batchId:o});Ne(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),n.push(mo(this.serializer,c))})))})),se.waitFor(s).next((()=>n))}removeMutationBatch(e,t){return O2(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),se.forEach(n,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return se.resolve();const n=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),s=[];return Wl(e).ee({range:n},((o,c,u)=>{if(o[0]===this.userId){const d=Ci(o[1]);s.push(d)}else u.done()})).next((()=>{Ne(s.length===0,56720,{sr:s.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return M2(e,this.userId,t)}_r(e){return P2(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:bo,lastStreamToken:""}))}}function M2(r,e,t){const n=Pf(e,t.path),s=n[1],o=IDBKeyRange.lowerBound(n);let c=!1;return Wl(r).ee({range:o,X:!0},((u,d,f)=>{const[g,y,v]=u;g===e&&y===s&&(c=!0),f.done()})).next((()=>c))}function oa(r){return gn(r,Jr)}function Wl(r){return gn(r,oc)}function P2(r){return gn(r,ch)}class Uo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Uo(0)}static cr(){return new Uo(-1)}}class g3{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const n=new Uo(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>De.fromTimestamp(new xt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>ql(e).delete(t.targetId))).next((()=>this.lr(e))).next((n=>(Ne(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n))))}removeTargets(e,t,n){let s=0;const o=[];return ql(e).ee(((c,u)=>{const d=Bu(u);d.sequenceNumber<=t&&n.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>se.waitFor(o))).next((()=>s))}forEachTarget(e,t){return ql(e).ee(((n,s)=>{const o=Bu(s);t(o)}))}lr(e){return CE(e).get(lm).next((t=>(Ne(t!==null,2888),t)))}hr(e,t){return CE(e).put(lm,t)}Pr(e,t){return ql(e).put(R2(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const n=Mo(t),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let o=null;return ql(e).ee({range:s,index:RA},((c,u,d)=>{const f=Bu(u);Ph(t,f.target)&&(o=f,d.done())})).next((()=>o))}addMatchingKeys(e,t,n){const s=[],o=ma(e);return t.forEach((c=>{const u=Un(c.path);s.push(o.put({targetId:n,path:u})),s.push(this.referenceDelegate.addReference(e,n,c))})),se.waitFor(s)}removeMatchingKeys(e,t,n){const s=ma(e);return se.forEach(t,(o=>{const c=Un(o.path);return se.waitFor([s.delete([n,c]),this.referenceDelegate.removeReference(e,n,o)])}))}removeMatchingKeysForTargetId(e,t){const n=ma(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),s=ma(e);let o=Ye();return s.ee({range:n,X:!0},((c,u,d)=>{const f=Ci(c[1]),g=new we(f);o=o.add(g)})).next((()=>o))}containsKey(e,t){const n=Un(t.path),s=IDBKeyRange.bound([n],[vA(n)],!1,!0);let o=0;return ma(e).ee({index:n_,X:!0,range:s},(([c,u],d,f)=>{c!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return ql(e).get(t).next((n=>n?Bu(n):null))}}function ql(r){return gn(r,lc)}function CE(r){return gn(r,wo)}function ma(r){return gn(r,cc)}const NE="LruGarbageCollector",p3=1048576;function kE([r,e],[t,n]){const s=je(r,t);return s===0?je(e,n):s}class y3{constructor(e){this.Ir=e,this.buffer=new Tt(kE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();kE(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class L2{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){_e(NE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ka(t)?_e(NE,"Ignoring IndexedDB error during garbage collection: ",t):await Ko(t)}await this.Vr(3e5)}))}}class _3{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Vr.ce);const n=new y3(t);return this.mr.forEachTarget(e,(s=>n.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>n.Ar(s))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(RE)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,s,o,c,u,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(n=y,u=Date.now(),this.removeTargets(e,n,t)))).next((y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((y=>(f=Date.now(),Gl()<=tt.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y}))))}}function V2(r,e){return new _3(r,e)}class v3{constructor(e,t){this.db=e,this.garbageCollector=V2(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((n,s)=>t(s)))}addReference(e,t,n){return wf(e,n)}removeReference(e,t,n){return wf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return wf(e,t)}br(e,t){return(function(s,o){let c=!1;return P2(s).te((u=>M2(s,u,o).next((d=>(d&&(c=!0),se.resolve(!d)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Sr(e,((c,u)=>{if(u<=t){const d=this.br(e,c).next((f=>{if(!f)return o++,n.getEntry(e,c).next((()=>(n.removeEntry(c,De.min()),ma(e).delete((function(y){return[0,Un(y.path)]})(c)))))}));s.push(d)}})).next((()=>se.waitFor(s))).next((()=>n.apply(e))).next((()=>o))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return wf(e,t)}Sr(e,t){const n=ma(e);let s,o=Vr.ce;return n.ee({index:n_},(([c,u],{path:d,sequenceNumber:f})=>{c===0?(o!==Vr.ce&&t(new we(Ci(s)),o),o=f,s=d):o=Vr.ce})).next((()=>{o!==Vr.ce&&t(new we(Ci(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wf(r,e){return ma(r).put((function(n,s){return{targetId:0,path:Un(n.path),sequenceNumber:s}})(e,r.currentSequenceNumber))}class j2{constructor(){this.changes=new Ss((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?se.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class b3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return lo(e).put(n)}removeEntry(e,t,n){return lo(e).delete((function(o,c){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],gm(c),u[u.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=$t.newInvalidDocument(t);return lo(e).ee({index:Lf,range:IDBKeyRange.only(Ou(t))},((s,o)=>{n=this.Cr(t,o)})).next((()=>n))}vr(e,t){let n={size:0,document:$t.newInvalidDocument(t)};return lo(e).ee({index:Lf,range:IDBKeyRange.only(Ou(t))},((s,o)=>{n={document:this.Cr(t,o),size:ym(o)}})).next((()=>n))}getEntries(e,t){let n=vr();return this.Fr(e,t,((s,o)=>{const c=this.Cr(s,o);n=n.insert(s,c)})).next((()=>n))}Mr(e,t){let n=vr(),s=new Ut(we.comparator);return this.Fr(e,t,((o,c)=>{const u=this.Cr(o,c);n=n.insert(o,u),s=s.insert(o,ym(c))})).next((()=>({documents:n,Or:s})))}Fr(e,t,n){if(t.isEmpty())return se.resolve();let s=new Tt(ME);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound(Ou(s.first()),Ou(s.last())),c=s.getIterator();let u=c.getNext();return lo(e).ee({index:Lf,range:o},((d,f,g)=>{const y=we.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&ME(u,y)<0;)n(u,null),u=c.getNext();u&&u.isEqual(y)&&(n(u,f),u=c.hasNext()?c.getNext():null),u?g.j(Ou(u)):g.done()})).next((()=>{for(;u;)n(u,null),u=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,n,s,o){const c=t.path,u=[c.popLast().toArray(),c.lastSegment(),gm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lo(e).J(IDBKeyRange.bound(u,d,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let g=vr();for(const y of f){const v=this.Cr(we.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);v.isFoundDocument()&&(Vh(t,v)||s.has(v.key))&&(g=g.insert(v.key,v))}return g}))}getAllFromCollectionGroup(e,t,n,s){let o=vr();const c=OE(t,n),u=OE(t,br.max());return lo(e).ee({index:IA,range:IDBKeyRange.bound(c,u,!0)},((d,f,g)=>{const y=this.Cr(we.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(y.key,y),o.size===s&&g.done()})).next((()=>o))}newChangeBuffer(e){return new w3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return DE(e).get(c0).next((t=>(Ne(!!t,20021),t)))}Dr(e,t){return DE(e).put(c0,t)}Cr(e,t){if(t){const n=s3(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(De.min())))return n}return $t.newInvalidDocument(e)}}function U2(r){return new b3(r)}class w3 extends j2{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ss((n=>n.toString()),((n,s)=>n.isEqual(s)))}applyChanges(e){const t=[];let n=0,s=new Tt(((o,c)=>je(o.canonicalString(),c.canonicalString())));return this.changes.forEach(((o,c)=>{const u=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,u.readTime)),c.isValidDocument()){const d=gE(this.Nr.serializer,c);s=s.add(o.path.popLast());const f=ym(d);n+=f-u.size,t.push(this.Nr.addEntry(e,o,d))}else if(n-=u.size,this.trackRemovals){const d=gE(this.Nr.serializer,c.convertToNoDocument(De.min()));t.push(this.Nr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,n)),se.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((n=>(this.Br.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:n,Or:s})=>(s.forEach(((o,c)=>{this.Br.set(o,{size:c,readTime:n.get(o).readTime})})),n)))}}function DE(r){return gn(r,uh)}function lo(r){return gn(r,om)}function Ou(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function OE(r,e){const t=e.documentKey.path.toArray();return[r,gm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ME(r,e){const t=r.path.toArray(),n=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<n.length-2;++o)if(s=je(t[o],n[o]),s)return s;return s=je(t.length,n.length),s||(s=je(t[t.length-2],n[n.length-2]),s||je(t[t.length-1],n[n.length-1]))}class x3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class z2{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(n!==null&&eh(n.mutation,s,sr.empty(),xt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Ye()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Ye()){const s=Ni();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,n).next((o=>{let c=Uu();return o.forEach(((u,d)=>{c=c.insert(u,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const n=Ni();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ye())))}populateOverlays(e,t,n){const s=[];return n.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((c,u)=>{t.set(c,u)}))}))}computeViews(e,t,n,s){let o=vr();const c=Zu(),u=(function(){return Zu()})();return t.forEach(((d,f)=>{const g=n.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof As)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),eh(g.mutation,f,g.mutation.getFieldMask(),xt.now())):c.set(f.key,sr.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,g)=>c.set(f,g))),t.forEach(((f,g)=>u.set(f,new x3(g,c.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=Zu();let s=new Ut(((c,u)=>c-u)),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const u of c)u.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let g=n.get(d)||sr.empty();g=u.applyToLocalView(f,g),n.set(d,g);const y=(s.get(u.batchId)||Ye()).add(d);s=s.insert(u.batchId,y)}))})).next((()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,g=d.value,y=i2();g.forEach((v=>{if(!o.has(v)){const w=u2(t.get(v),n.get(v));w!==null&&y.set(v,w),o=o.add(v)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return se.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,s){return(function(c){return we.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ZA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next((o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-o.size):se.resolve(Ni());let u=ah,d=o;return c.next((f=>se.forEach(f,((g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?se.resolve():this.remoteDocumentCache.getEntry(e,g).next((v=>{d=d.insert(g,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,Ye()))).next((g=>({batchId:u,changes:r2(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((n=>{let s=Uu();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const o=t.collectionGroup;let c=Uu();return this.indexManager.getCollectionParents(e,o).next((u=>se.forEach(u,(d=>{const f=(function(y,v){return new Ec(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,n,s).next((g=>{g.forEach(((y,v)=>{c=c.insert(y,v)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,n,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,s)))).next((c=>{o.forEach(((d,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,$t.newInvalidDocument(g)))}));let u=Uu();return c.forEach(((d,f)=>{const g=o.get(d);g!==void 0&&eh(g.mutation,f,sr.empty(),xt.now()),Vh(t,f)&&(u=u.insert(d,f))})),u}))}}class E3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Qn(s.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:C2(s.bundledQuery),readTime:Qn(s.readTime)}})(t)),se.resolve()}}class T3{constructor(){this.overlays=new Ut(we.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ni();return se.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&n.set(s,o)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((s,o)=>{this.St(e,t,o)})),se.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(n)),se.resolve()}getOverlaysForCollection(e,t,n){const s=Ni(),o=t.length+1,c=new we(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>n&&s.set(d.getKey(),d)}return se.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let o=new Ut(((f,g)=>f-g));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>n){let g=o.get(f.largestBatchId);g===null&&(g=Ni(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=Ni(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,g)=>u.set(f,g))),!(u.size()>=s)););return se.resolve(u)}St(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const c=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new f_(t,n));let o=this.qr.get(t);o===void 0&&(o=Ye(),this.qr.set(t,o)),this.qr.set(t,o.add(n.key))}}class S3{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}class __{constructor(){this.Qr=new Tt(bn.$r),this.Ur=new Tt(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new bn(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new bn(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new we(new mt([])),n=new bn(t,e),s=new bn(t,e+1),o=[];return this.Ur.forEachInRange([n,s],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new mt([])),n=new bn(t,e),s=new bn(t,e+1);let o=Ye();return this.Ur.forEachInRange([n,s],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new bn(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class bn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||je(e.Yr,t.Yr)}static Kr(e,t){return je(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}class A3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Tt(bn.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new h_(o,t,n,s);this.mutationQueue.push(c);for(const u of s)this.Zr=this.Zr.add(new bn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.ei(n),o=s<0?0:s;return se.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?bo:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new bn(t,0),s=new bn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,s],(c=>{const u=this.Xr(c.Yr);o.push(u)})),se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Tt(je);return t.forEach((s=>{const o=new bn(s,0),c=new bn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(u=>{n=n.add(u.Yr)}))})),se.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let o=n;we.isDocumentKey(o)||(o=o.child(""));const c=new bn(new we(o),0);let u=new Tt(je);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!n.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Yr)),!0)}),c),se.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((n=>{const s=this.Xr(n);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ne(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return se.forEach(t.mutations,(s=>{const o=new bn(s.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new bn(t,0),s=this.Zr.firstAfterOrEqual(n);return se.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class I3{constructor(e){this.ri=e,this.docs=(function(){return new Ut(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),o=s?s.size:0,c=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return se.resolve(n?n.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let n=vr();return t.forEach((s=>{const o=this.docs.get(s);n=n.insert(s,o?o.document.mutableCopy():$t.newInvalidDocument(s))})),se.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let o=vr();const c=t.path,u=new we(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||e_(xA(g),n)<=0||(s.has(g.key)||Vh(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,t,n,s){Ae(9500)}ii(e,t){return se.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new R3(this)}getSize(e){return se.resolve(this.size)}}class R3 extends j2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class C3{constructor(e){this.persistence=e,this.si=new Ss((t=>Mo(t)),Ph),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new __,this.targetCount=0,this.ai=Uo.ur()}forEachTarget(e,t){return this.si.forEach(((n,s)=>t(s))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Uo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,n){let s=0;const o=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),se.waitFor(o).next((()=>s))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return se.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),se.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((c=>{o.push(s.markPotentiallyOrphaned(e,c))})),se.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return se.resolve(n)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}class v_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Vr(0),this.li=!1,this.li=!0,this.hi=new S3,this.referenceDelegate=e(this),this.Pi=new C3(this),this.indexManager=new f3,this.remoteDocumentCache=(function(s){return new I3(s)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new I2(t),this.Ii=new E3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new T3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new A3(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){_e("MemoryPersistence","Starting transaction:",e);const s=new N3(this.ci.next());return this.referenceDelegate.Ei(),n(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return se.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class N3 extends TA{constructor(e){super(),this.currentSequenceNumber=e}}class ig{constructor(e){this.persistence=e,this.Ri=new __,this.Vi=null}static mi(e){return new ig(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),se.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(n=>{const s=we.fromPath(n);return this.gi(e,s).next((o=>{o||t.removeEntry(s,De.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class _m{constructor(e,t){this.persistence=e,this.pi=new Ss((n=>Un(n.path)),((n,s)=>n.isEqual(s))),this.garbageCollector=V2(this,t)}static mi(e,t){return new _m(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((n,s)=>this.br(e,n,s).next((o=>o?se.resolve():t(s)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(c=>this.br(e,c,t).next((u=>{u||(n++,o.removeEntry(c,De.min()))})))).next((()=>o.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=jf(e.data.value)),t}br(e,t,n){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return se.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class k3{constructor(e){this.serializer=e}k(e,t,n,s){const o=new Hm("createOrUpgrade",t);n<1&&s>=1&&((function(d){d.createObjectStore(Mh)})(e),(function(d){d.createObjectStore(ch,{keyPath:F5}),d.createObjectStore(Jr,{keyPath:$x,autoIncrement:!0}).createIndex(_o,Gx,{unique:!0}),d.createObjectStore(oc)})(e),PE(e),(function(d){d.createObjectStore(ho)})(e));let c=se.resolve();return n<3&&s>=3&&(n!==0&&((function(d){d.deleteObjectStore(cc),d.deleteObjectStore(lc),d.deleteObjectStore(wo)})(e),PE(e)),c=c.next((()=>(function(d){const f=d.store(wo),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:De.min().toTimestamp(),targetCount:0};return f.put(lm,g)})(o)))),n<4&&s>=4&&(n!==0&&(c=c.next((()=>(function(d,f){return f.store(Jr).J().next((y=>{d.deleteObjectStore(Jr),d.createObjectStore(Jr,{keyPath:$x,autoIncrement:!0}).createIndex(_o,Gx,{unique:!0});const v=f.store(Jr),w=y.map((T=>v.put(T)));return se.waitFor(w)}))})(e,o)))),c=c.next((()=>{(function(d){d.createObjectStore(uc,{keyPath:X5})})(e)}))),n<5&&s>=5&&(c=c.next((()=>this.yi(o)))),n<6&&s>=6&&(c=c.next((()=>((function(d){d.createObjectStore(uh)})(e),this.wi(o))))),n<7&&s>=7&&(c=c.next((()=>this.Si(o)))),n<8&&s>=8&&(c=c.next((()=>this.bi(e,o)))),n<9&&s>=9&&(c=c.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&s>=10&&(c=c.next((()=>this.Di(o)))),n<11&&s>=11&&(c=c.next((()=>{(function(d){d.createObjectStore($m,{keyPath:J5})})(e),(function(d){d.createObjectStore(Gm,{keyPath:Z5})})(e)}))),n<12&&s>=12&&(c=c.next((()=>{(function(d){const f=d.createObjectStore(Km,{keyPath:aP});f.createIndex(h0,oP,{unique:!1}),f.createIndex(kA,lP,{unique:!1})})(e)}))),n<13&&s>=13&&(c=c.next((()=>(function(d){const f=d.createObjectStore(om,{keyPath:q5});f.createIndex(Lf,$5),f.createIndex(IA,G5)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(ho)))),n<14&&s>=14&&(c=c.next((()=>this.Fi(e,o)))),n<15&&s>=15&&(c=c.next((()=>(function(d){d.createObjectStore(r_,{keyPath:eP,autoIncrement:!0}).createIndex(u0,tP,{unique:!1}),d.createObjectStore(Qu,{keyPath:nP}).createIndex(CA,rP,{unique:!1}),d.createObjectStore(Wu,{keyPath:iP}).createIndex(NA,sP,{unique:!1})})(e)))),n<16&&s>=16&&(c=c.next((()=>{t.objectStore(Qu).clear()})).next((()=>{t.objectStore(Wu).clear()}))),n<17&&s>=17&&(c=c.next((()=>{(function(d){d.createObjectStore(i_,{keyPath:cP})})(e)}))),n<18&&s>=18&&xS()&&(c=c.next((()=>{t.objectStore(Qu).clear()})).next((()=>{t.objectStore(Wu).clear()}))),c}wi(e){let t=0;return e.store(ho).ee(((n,s)=>{t+=ym(s)})).next((()=>{const n={byteSize:t};return e.store(uh).put(c0,n)}))}yi(e){const t=e.store(ch),n=e.store(Jr);return t.J().next((s=>se.forEach(s,(o=>{const c=IDBKeyRange.bound([o.userId,bo],[o.userId,o.lastAcknowledgedBatchId]);return n.J(_o,c).next((u=>se.forEach(u,(d=>{Ne(d.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const f=mo(this.serializer,d);return O2(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(cc),n=e.store(ho);return e.store(wo).get(lm).next((s=>{const o=[];return n.ee(((c,u)=>{const d=new mt(c),f=(function(y){return[0,Un(y)]})(d);o.push(t.get(f).next((g=>g?se.resolve():(y=>t.put({targetId:0,path:Un(y),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>se.waitFor(o)))}))}bi(e,t){e.createObjectStore(hh,{keyPath:W5});const n=t.store(hh),s=new y_,o=c=>{if(s.add(c)){const u=c.lastSegment(),d=c.popLast();return n.put({collectionId:u,parent:Un(d)})}};return t.store(ho).ee({X:!0},((c,u)=>{const d=new mt(c);return o(d.popLast())})).next((()=>t.store(oc).ee({X:!0},(([c,u,d],f)=>{const g=Ci(u);return o(g.popLast())}))))}Di(e){const t=e.store(lc);return t.ee(((n,s)=>{const o=Bu(s),c=R2(this.serializer,o);return t.put(c)}))}Ci(e,t){const n=t.store(ho),s=[];return n.ee(((o,c)=>{const u=t.store(om),d=(function(y){return y.document?new we(mt.fromString(y.document.name).popFirst(5)):y.noDocument?we.fromSegments(y.noDocument.path):y.unknownDocument?we.fromSegments(y.unknownDocument.path):Ae(36783)})(c).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(u.put(f))})).next((()=>se.waitFor(s)))}Fi(e,t){const n=t.store(Jr),s=U2(this.serializer),o=new v_(ig.mi,this.serializer.yt);return n.J().next((c=>{const u=new Map;return c.forEach((d=>{let f=u.get(d.userId)??Ye();mo(this.serializer,d).keys().forEach((g=>f=f.add(g))),u.set(d.userId,f)})),se.forEach(u,((d,f)=>{const g=new Cn(f),y=ng.wt(this.serializer,g),v=o.getIndexManager(g),w=rg.wt(g,this.serializer,v,o.referenceDelegate);return new z2(s,w,y,v).recalculateAndSaveOverlaysForDocumentKeys(new d0(t,Vr.ce),d).next()}))}))}}function PE(r){r.createObjectStore(cc,{keyPath:Y5}).createIndex(n_,Q5,{unique:!0}),r.createObjectStore(lc,{keyPath:"targetId"}).createIndex(RA,K5,{unique:!0}),r.createObjectStore(wo)}const la="IndexedDbPersistence",Py=18e5,Ly=5e3,Vy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",D3="main";class b_{constructor(e,t,n,s,o,c,u,d,f,g,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=o,this.window=c,this.document=u,this.xi=f,this.Oi=g,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!b_.v())throw new ve(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new v3(this,s),this.$i=t+D3,this.serializer=new I2(d),this.Ui=new va(this.$i,this.Ni,new k3(this.serializer)),this.hi=new o3,this.Pi=new g3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=U2(this.serializer),this.Ii=new a3,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Kn(la,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(de.FAILED_PRECONDITION,Vy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Vr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>xf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ka(e))return _e(la,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return _e(la,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Mu(e).get(Ul).next((t=>se.resolve(this.es(t))))}ts(e){return xf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Py)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=gn(t,uc);return n.J().next((s=>{const o=this.ss(s,Py),c=s.filter((u=>o.indexOf(u)===-1));return se.forEach(c,(u=>n.delete(u.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?se.resolve(!0):Mu(e).get(Ul).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Ly)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ve(de.FAILED_PRECONDITION,Vy);return!1}}return!(!this.networkEnabled||!this.inForeground)||xf(e).J().next((n=>this.ss(n,Ly).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,u=this.networkEnabled===s.networkEnabled;if(o||c&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&_e(la,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Mh,uc],(e=>{const t=new d0(e,Vr.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((n=>this.rs(n.updateTimeMs,t)&&!this.us(n.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>xf(e).J().next((t=>this.ss(t,Py).map((n=>n.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return rg.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new m3(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return ng.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){_e(la,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===18?dP:d===17?PA:d===16?hP:d===15?s_:d===14?MA:d===13?OA:d===12?uP:d===11?DA:void Ae(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,s,o,(u=>(c=new d0(u,this.ci?this.ci.next():Vr.ce),t==="readwrite-primary"?this.Hi(c).next((d=>!!d||this.Yi(c))).next((d=>{if(!d)throw Kn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ve(de.FAILED_PRECONDITION,EA);return n(c)})).next((d=>this.Xi(c).next((()=>d)))):this.Is(c).next((()=>n(c)))))).then((u=>(c.raiseOnCommittedEvent(),u)))}Is(e){return Mu(e).get(Ul).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Ly)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ve(de.FAILED_PRECONDITION,Vy)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mu(e).put(Ul,t)}static v(){return va.v()}Zi(e){const t=Mu(e);return t.get(Ul).next((n=>this.es(n)?(_e(la,"Releasing primary lease."),t.delete(Ul)):se.resolve()))}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Kn(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;wS()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return _e(la,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Kn(la,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Kn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mu(r){return gn(r,Mh)}function xf(r){return gn(r,uc)}function O3(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class w_{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=s}static As(e,t){let n=Ye(),s=Ye();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new w_(e,t.fromCache,n,s)}}class M3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class B2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return wS()?8:SA(mn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,s){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,s,n).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new M3;return this.Ss(e,t,c).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,c,u.size)}))})).next((()=>o.result))}bs(e,t,n,s){return n.documentReadCount<this.fs?(Gl()<=tt.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",Kl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Gl()<=tt.DEBUG&&_e("QueryEngine","Query:",Kl(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(Gl()<=tt.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",Kl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jr(t))):se.resolve())}ys(e,t){if(sE(t))return se.resolve(null);let n=jr(t);return this.indexManager.getIndexType(e,n).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=dm(t,null,"F"),n=jr(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((o=>{const c=Ye(...o);return this.ps.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,n).next((d=>{const f=this.Ds(t,u);return this.Cs(t,f,c,d.readTime)?this.ys(e,dm(t,null,"F")):this.vs(e,f,t,d)}))))})))))}ws(e,t,n,s){return sE(t)||s.isEqual(De.min())?se.resolve(null):this.ps.getDocuments(e,n).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,n,s)?se.resolve(null):(Gl()<=tt.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Kl(t)),this.vs(e,c,t,P5(s,ah)).next((u=>u)))}))}Ds(e,t){let n=new Tt(t2(e));return t.forEach(((s,o)=>{Vh(e,o)&&(n=n.add(o))})),n}Cs(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,n){return Gl()<=tt.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",Kl(t)),this.ps.getDocumentsMatchingQuery(e,t,br.min(),n)}vs(e,t,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const x_="LocalStore",P3=3e8;class L3{constructor(e,t,n,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Ut(je),this.xs=new Ss((o=>Mo(o)),Ph),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new z2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function F2(r,e,t,n){return new L3(r,e,t,n)}async function H2(r,e){const t=Ue(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((o=>{const c=[],u=[];let d=Ye();for(const f of s){c.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(n,d).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:u})))}))}))}function V3(r,e){const t=Ue(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,g){const y=f.batch,v=y.keys();let w=se.resolve();return v.forEach((T=>{w=w.next((()=>g.getEntry(d,T))).next((N=>{const P=f.docVersions.get(T);Ne(P!==null,48541),N.version.compareTo(P)<0&&(y.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),g.addEntry(N)))}))})),w.next((()=>u.mutationQueue.removeMutationBatch(d,y)))})(t,n,e,o).next((()=>o.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let d=Ye();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(n,s)))}))}function q2(r){const e=Ue(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function j3(r,e){const t=Ue(r),n=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((g,y)=>{const v=s.get(y);if(!v)return;u.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,y))));let w=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(un.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,n)),s=s.insert(y,w),(function(N,P,V){return N.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=P3?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(v,w,g)&&u.push(t.Pi.updateTargetData(o,w))}));let d=vr(),f=Ye();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),u.push(U3(o,c,e.documentUpdates).next((g=>{d=g.ks,f=g.qs}))),!n.isEqual(De.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n)));u.push(g)}return se.waitFor(u).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function U3(r,e,t){let n=Ye(),s=Ye();return t.forEach((o=>n=n.add(o))),e.getEntries(r,n).next((o=>{let c=vr();return t.forEach(((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(De.min())?(e.removeEntry(u,d.readTime),c=c.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),c=c.insert(u,d)):_e(x_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)})),{ks:c,qs:s}}))}function z3(r,e){const t=Ue(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=bo),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function B3(r,e){const t=Ue(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return t.Pi.getTargetData(n,e).next((o=>o?(s=o,se.resolve(s)):t.Pi.allocateTargetId(n).next((c=>(s=new fs(e,c,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=t.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function A0(r,e,t){const n=Ue(r),s=n.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",o,(c=>n.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!ka(c))throw c;_e(x_,`Failed to update sequence numbers for target ${e}: ${c}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function LE(r,e,t){const n=Ue(r);let s=De.min(),o=Ye();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,f,g){const y=Ue(d),v=y.xs.get(g);return v!==void 0?se.resolve(y.Ms.get(v)):y.Pi.getTargetData(f,g)})(n,c,jr(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(c,u.targetId).next((d=>{o=d}))})).next((()=>n.Fs.getDocumentsMatchingQuery(c,e,t?s:De.min(),t?o:Ye()))).next((u=>(F3(n,IP(e),u),{documents:u,Qs:o})))))}function F3(r,e,t){let n=r.Os.get(e)||De.min();t.forEach(((s,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)})),r.Os.set(e,n)}class VE{constructor(){this.activeTargetIds=OP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $2{constructor(){this.Mo=new VE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new VE,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class H3{Oo(e){}shutdown(){}}const jE="ConnectivityMonitor";class UE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_e(jE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){_e(jE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ef=null;function I0(){return Ef===null?Ef=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ef++,"0x"+Ef.toString(16)}const jy="RestConnection",q3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===cm?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,t,n,s,o){const c=I0(),u=this.zo(e,t.toUriEncodedString());_e(jy,`Sending RPC '${e}' ${c}:`,u,n);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:f}=new URL(u),g=qo(f);return this.Jo(e,u,d,n,g).then((y=>(_e(jy,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw Do(jy,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",n),y}))}Ho(e,t,n,s,o,c){return this.Go(e,t,n,s,o)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),n&&n.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const n=q3[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class G3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Mn="WebChannelConnection";class K3 extends $3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,s,o){const c=I0();return new Promise(((u,d)=>{const f=new dA;f.setWithCredentials(!0),f.listenOnce(fA.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Of.NO_ERROR:const y=f.getResponseJson();_e(Mn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case Of.TIMEOUT:_e(Mn,`RPC '${e}' ${c} timed out`),d(new ve(de.DEADLINE_EXCEEDED,"Request time out"));break;case Of.HTTP_ERROR:const v=f.getStatus();if(_e(Mn,`RPC '${e}' ${c} failed with status:`,v,"response text:",f.getResponseText()),v>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const T=w?.error;if(T&&T.status&&T.message){const N=(function(V){const H=V.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(H)>=0?H:de.UNKNOWN})(T.status);d(new ve(N,T.message))}else d(new ve(de.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ve(de.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{_e(Mn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(s);_e(Mn,`RPC '${e}' ${c} sending request:`,s),f.send(t,"POST",g,n,15)}))}T_(e,t,n){const s=I0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=pA(),u=gA(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const g=o.join("");_e(Mn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const y=c.createWebChannel(g,d);this.I_(y);let v=!1,w=!1;const T=new G3({Yo:P=>{w?_e(Mn,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(v||(_e(Mn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),_e(Mn,`RPC '${e}' stream ${s} sending:`,P),y.send(P))},Zo:()=>y.close()}),N=(P,V,H)=>{P.listen(V,(B=>{try{H(B)}catch(q){setTimeout((()=>{throw q}),0)}}))};return N(y,ju.EventType.OPEN,(()=>{w||(_e(Mn,`RPC '${e}' stream ${s} transport opened.`),T.o_())})),N(y,ju.EventType.CLOSE,(()=>{w||(w=!0,_e(Mn,`RPC '${e}' stream ${s} transport closed`),T.a_(),this.E_(y))})),N(y,ju.EventType.ERROR,(P=>{w||(w=!0,Do(Mn,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),T.a_(new ve(de.UNAVAILABLE,"The operation could not be completed")))})),N(y,ju.EventType.MESSAGE,(P=>{if(!w){const V=P.data[0];Ne(!!V,16349);const H=V,B=H?.error||H[0]?.error;if(B){_e(Mn,`RPC '${e}' stream ${s} received error:`,B);const q=B.status;let K=(function(x){const S=ln[x];if(S!==void 0)return f2(S)})(q),z=B.message;K===void 0&&(K=de.INTERNAL,z="Unknown error status: "+q+" with message "+B.message),w=!0,T.a_(new ve(K,z)),y.close()}else _e(Mn,`RPC '${e}' stream ${s} received:`,V),T.u_(V)}})),N(u,mA.STAT_EVENT,(P=>{P.stat===a0.PROXY?_e(Mn,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===a0.NOPROXY&&_e(Mn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{T.__()}),0),T}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Y3(){return typeof window<"u"?window:null}function Hf(){return typeof document<"u"?document:null}function sg(r){return new QP(r,!0)}class G2{constructor(e,t,n=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-n);s>0&&_e("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const zE="PersistentStream";class K2{constructor(e,t,n,s,o,c,u,d){this.Mi=e,this.S_=n,this.b_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new G2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Kn(t.toString()),Kn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.D_===t&&this.G_(n,s)}),(n=>{e((()=>{const s=new ve(de.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{n((()=>this.z_(s)))})),this.stream.onMessage((s=>{n((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return _e(zE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(_e(zE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Q3 extends K2{constructor(e,t,n,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=JP(this.serializer,e),n=(function(o){if(!("targetChange"in o))return De.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?De.min():c.readTime?Qn(c.readTime):De.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=w0(this.serializer),t.addTarget=(function(o,c){let u;const d=c.target;if(u=um(d)?{documents:w2(o,d)}:{query:x2(o,d).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=p2(o,c.resumeToken);const f=v0(o,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(De.min())>0){u.readTime=pc(o,c.snapshotVersion.toTimestamp());const f=v0(o,c.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const n=e3(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=w0(this.serializer),t.removeTarget=e,this.q_(t)}}class W3 extends K2{constructor(e,t,n,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ZP(e.writeResults,e.commitTime),n=Qn(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=w0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>mm(this.serializer,n)))};this.q_(t)}}class X3{}class J3 extends X3{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ve(de.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,b0(t,n),s,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(de.UNKNOWN,o.toString())}))}Ho(e,t,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(e,b0(t,n),s,c,u,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(de.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Z3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Kn(t),this.aa=!1):_e("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const zo="RemoteStore";class e6{constructor(e,t,n,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{n.enqueueAndForget((async()=>{Yo(this)&&(_e(zo,"Restarting streams for network reachability change."),await(async function(d){const f=Ue(d);f.Ea.add(4),await Uh(f),f.Ra.set("Unknown"),f.Ea.delete(4),await ag(f)})(this))}))})),this.Ra=new Z3(n,s)}}async function ag(r){if(Yo(r))for(const e of r.da)await e(!0)}async function Uh(r){for(const e of r.da)await e(!1)}function Y2(r,e){const t=Ue(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),A_(t)?S_(t):Sc(t).O_()&&T_(t,e))}function E_(r,e){const t=Ue(r),n=Sc(t);t.Ia.delete(e),n.O_()&&Q2(t,e),t.Ia.size===0&&(n.O_()?n.L_():Yo(t)&&t.Ra.set("Unknown"))}function T_(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sc(r).Y_(e)}function Q2(r,e){r.Va.Ue(e),Sc(r).Z_(e)}function S_(r){r.Va=new $P({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Sc(r).start(),r.Ra.ua()}function A_(r){return Yo(r)&&!Sc(r).x_()&&r.Ia.size>0}function Yo(r){return Ue(r).Ea.size===0}function W2(r){r.Va=void 0}async function t6(r){r.Ra.set("Online")}async function n6(r){r.Ia.forEach(((e,t)=>{T_(r,e)}))}async function r6(r,e){W2(r),A_(r)?(r.Ra.ha(e),S_(r)):r.Ra.set("Unknown")}async function i6(r,e,t){if(r.Ra.set("Online"),e instanceof g2&&e.state===2&&e.cause)try{await(async function(s,o){const c=o.cause;for(const u of o.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ia.delete(u),s.Va.removeTarget(u))})(r,e)}catch(n){_e(zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await vm(r,n)}else if(e instanceof Bf?r.Va.Ze(e):e instanceof m2?r.Va.st(e):r.Va.tt(e),!t.isEqual(De.min()))try{const n=await q2(r.localStore);t.compareTo(n)>=0&&await(function(o,c){const u=o.Va.Tt(c);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(d.resumeToken,c))}})),u.targetMismatches.forEach(((d,f)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(un.EMPTY_BYTE_STRING,g.snapshotVersion)),Q2(o,d);const y=new fs(g.target,d,f,g.sequenceNumber);T_(o,y)})),o.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(n){_e(zo,"Failed to raise snapshot:",n),await vm(r,n)}}async function vm(r,e,t){if(!ka(e))throw e;r.Ea.add(1),await Uh(r),r.Ra.set("Offline"),t||(t=()=>q2(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{_e(zo,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await ag(r)}))}function X2(r,e){return e().catch((t=>vm(r,t,e)))}async function zh(r){const e=Ue(r),t=Sa(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bo;for(;s6(e);)try{const s=await z3(e.localStore,n);if(s===null){e.Ta.length===0&&t.L_();break}n=s.batchId,a6(e,s)}catch(s){await vm(e,s)}J2(e)&&Z2(e)}function s6(r){return Yo(r)&&r.Ta.length<10}function a6(r,e){r.Ta.push(e);const t=Sa(r);t.O_()&&t.X_&&t.ea(e.mutations)}function J2(r){return Yo(r)&&!Sa(r).x_()&&r.Ta.length>0}function Z2(r){Sa(r).start()}async function o6(r){Sa(r).ra()}async function l6(r){const e=Sa(r);for(const t of r.Ta)e.ea(t.mutations)}async function c6(r,e,t){const n=r.Ta.shift(),s=d_.from(n,e,t);await X2(r,(()=>r.remoteSyncer.applySuccessfulWrite(s))),await zh(r)}async function u6(r,e){e&&Sa(r).X_&&await(async function(n,s){if((function(c){return FP(c)&&c!==de.ABORTED})(s.code)){const o=n.Ta.shift();Sa(n).B_(),await X2(n,(()=>n.remoteSyncer.rejectFailedWrite(o.batchId,s))),await zh(n)}})(r,e),J2(r)&&Z2(r)}async function BE(r,e){const t=Ue(r);t.asyncQueue.verifyOperationInProgress(),_e(zo,"RemoteStore received new credentials");const n=Yo(t);t.Ea.add(3),await Uh(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ag(t)}async function h6(r,e){const t=Ue(r);e?(t.Ea.delete(2),await ag(t)):e||(t.Ea.add(2),await Uh(t),t.Ra.set("Unknown"))}function Sc(r){return r.ma||(r.ma=(function(t,n,s){const o=Ue(t);return o.sa(),new Q3(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:t6.bind(null,r),t_:n6.bind(null,r),r_:r6.bind(null,r),H_:i6.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),A_(r)?S_(r):r.Ra.set("Unknown")):(await r.ma.stop(),W2(r))}))),r.ma}function Sa(r){return r.fa||(r.fa=(function(t,n,s){const o=Ue(t);return o.sa(),new W3(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:o6.bind(null,r),r_:u6.bind(null,r),ta:l6.bind(null,r),na:c6.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await zh(r)):(await r.fa.stop(),r.Ta.length>0&&(_e(zo,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class I_{constructor(e,t,n,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=o,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,o){const c=Date.now()+n,u=new I_(e,t,c,s,o);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function R_(r,e){if(Kn("AsyncQueue",`${e}: ${r}`),ka(r))return new ve(de.UNAVAILABLE,`${e}: ${r}`);throw r}class nc{static emptySet(e){return new nc(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||we.comparator(t.key,n.key):(t,n)=>we.comparator(t.key,n.key),this.keyedMap=Uu(),this.sortedSet=new Ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof nc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new nc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class FE{constructor(){this.ga=new Ut(we.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class yc{constructor(e,t,n,s,o,c,u,d,f){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,n,s,o){const c=[];return t.forEach((u=>{c.push({type:0,doc:u})})),new yc(e,t,nc.emptySet(t),c,n,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}class d6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class f6{constructor(){this.queries=HE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const s=Ue(t),o=s.queries;s.queries=HE(),o.forEach(((c,u)=>{for(const d of u.Sa)d.onError(n)}))})(this,new ve(de.ABORTED,"Firestore shutting down"))}}function HE(){return new Ss((r=>e2(r)),Wm)}async function C_(r,e){const t=Ue(r);let n=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(n=2):(o=new d6,n=e.Da()?0:1);try{switch(n){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const u=R_(c,`Initialization of query '${Kl(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&k_(t)}async function N_(r,e){const t=Ue(r),n=e.query;let s=3;const o=t.queries.get(n);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function m6(r,e){const t=Ue(r);let n=!1;for(const s of e){const o=s.query,c=t.queries.get(o);if(c){for(const u of c.Sa)u.Fa(s)&&(n=!0);c.wa=s}}n&&k_(t)}function g6(r,e,t){const n=Ue(r),s=n.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);n.queries.delete(e)}function k_(r){r.Ca.forEach((e=>{e.next()}))}var R0,qE;(qE=R0||(R0={})).Ma="default",qE.Cache="cache";class D_{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new yc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=yc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==R0.Cache}}class eI{constructor(e){this.key=e}}class tI{constructor(e){this.key=e}}class p6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=t2(e),this.tu=new nc(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new FE,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,y)=>{const v=s.get(g),w=Vh(this.query,y)?y:null,T=!!v&&this.mutatedKeys.has(v.key),N=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let P=!1;v&&w?v.data.isEqual(w.data)?T!==N&&(n.track({type:3,doc:w}),P=!0):this.su(v,w)||(n.track({type:2,doc:w}),P=!0,(d&&this.eu(w,d)>0||f&&this.eu(w,f)<0)&&(u=!0)):!v&&w?(n.track({type:0,doc:w}),P=!0):v&&!w&&(n.track({type:1,doc:v}),P=!0,(d||f)&&(u=!0)),P&&(w?(c=c.add(w),o=N?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),n.track({type:1,doc:g})}return{tu:c,iu:n,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,y)=>(function(w,T){const N=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:P})}};return N(w)-N(T)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(n),s=s??!1;const u=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,c.length!==0||f?{snapshot:new yc(this.query,e.tu,o,c,e.mutatedKeys,d===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new FE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new tI(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new eI(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ye();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return yc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const O_="SyncEngine";class y6{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class _6{constructor(e){this.key=e,this.hu=!1}}class v6{constructor(e,t,n,s,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ss((u=>e2(u)),Wm),this.Iu=new Map,this.Eu=new Set,this.du=new Ut(we.comparator),this.Au=new Map,this.Ru=new __,this.Vu={},this.mu=new Map,this.fu=Uo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function b6(r,e,t=!0){const n=oI(r);let s;const o=n.Tu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await nI(n,e,t,!0),s}async function w6(r,e){const t=oI(r);await nI(t,e,!0,!1)}async function nI(r,e,t,n){const s=await B3(r.localStore,jr(e)),o=s.targetId,c=r.sharedClientState.addLocalQueryTarget(o,t);let u;return n&&(u=await x6(r,e,o,c==="current",s.resumeToken)),r.isPrimaryClient&&t&&Y2(r.remoteStore,s),u}async function x6(r,e,t,n,s){r.pu=(y,v,w)=>(async function(N,P,V,H){let B=P.view.ru(V);B.Cs&&(B=await LE(N.localStore,P.query,!1).then((({documents:O})=>P.view.ru(O,B))));const q=H&&H.targetChanges.get(P.targetId),K=H&&H.targetMismatches.get(P.targetId)!=null,z=P.view.applyChanges(B,N.isPrimaryClient,q,K);return GE(N,P.targetId,z.au),z.snapshot})(r,y,v,w);const o=await LE(r.localStore,e,!0),c=new p6(e,o.Qs),u=c.ru(o.documents),d=jh.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),f=c.applyChanges(u,r.isPrimaryClient,d);GE(r,t,f.au);const g=new y6(e,t,c);return r.Tu.set(e,g),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),f.snapshot}async function E6(r,e,t){const n=Ue(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);if(o.length>1)return n.Iu.set(s.targetId,o.filter((c=>!Wm(c,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await A0(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),t&&E_(n.remoteStore,s.targetId),C0(n,s.targetId)})).catch(Ko)):(C0(n,s.targetId),await A0(n.localStore,s.targetId,!0))}async function T6(r,e){const t=Ue(r),n=t.Tu.get(e),s=t.Iu.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),E_(t.remoteStore,n.targetId))}async function S6(r,e,t){const n=lI(r);try{const s=await(function(c,u){const d=Ue(c),f=xt.now(),g=u.reduce(((w,T)=>w.add(T.key)),Ye());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let T=vr(),N=Ye();return d.Ns.getEntries(w,g).next((P=>{T=P,T.forEach(((V,H)=>{H.isValidDocument()||(N=N.add(V))}))})).next((()=>d.localDocuments.getOverlayedDocuments(w,T))).next((P=>{y=P;const V=[];for(const H of u){const B=zP(H,y.get(H.key).overlayedDocument);B!=null&&V.push(new As(H.key,B,$A(B.value.mapValue),jn.exists(!0)))}return d.mutationQueue.addMutationBatch(w,f,V,u)})).next((P=>{v=P;const V=P.applyToLocalDocumentSet(y,N);return d.documentOverlayCache.saveOverlays(w,P.batchId,V)}))})).then((()=>({batchId:v.batchId,changes:r2(y)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),(function(c,u,d){let f=c.Vu[c.currentUser.toKey()];f||(f=new Ut(je)),f=f.insert(u,d),c.Vu[c.currentUser.toKey()]=f})(n,s.batchId,t),await Bh(n,s.changes),await zh(n.remoteStore)}catch(s){const o=R_(s,"Failed to persist write");t.reject(o)}}async function rI(r,e){const t=Ue(r);try{const n=await j3(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const c=t.Au.get(o);c&&(Ne(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Ne(c.hu,14607):s.removedDocuments.size>0&&(Ne(c.hu,42227),c.hu=!1))})),await Bh(t,n,e)}catch(n){await Ko(n)}}function $E(r,e,t){const n=Ue(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.Tu.forEach(((o,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(c,u){const d=Ue(c);d.onlineState=u;let f=!1;d.queries.forEach(((g,y)=>{for(const v of y.Sa)v.va(u)&&(f=!0)})),f&&k_(d)})(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function A6(r,e,t){const n=Ue(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Au.get(e),o=s&&s.key;if(o){let c=new Ut(we.comparator);c=c.insert(o,$t.newNoDocument(o,De.min()));const u=Ye().add(o),d=new tg(De.min(),new Map,new Ut(je),c,u);await rI(n,d),n.du=n.du.remove(o),n.Au.delete(e),M_(n)}else await A0(n.localStore,e,!1).then((()=>C0(n,e,t))).catch(Ko)}async function I6(r,e){const t=Ue(r),n=e.batch.batchId;try{const s=await V3(t.localStore,e);sI(t,n,null),iI(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Bh(t,s)}catch(s){await Ko(s)}}async function R6(r,e,t){const n=Ue(r);try{const s=await(function(c,u){const d=Ue(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return d.mutationQueue.lookupMutationBatch(f,u).next((y=>(Ne(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>d.localDocuments.getDocuments(f,g)))}))})(n.localStore,e);sI(n,e,t),iI(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Bh(n,s)}catch(s){await Ko(s)}}function iI(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function sI(r,e,t){const n=Ue(r);let s=n.Vu[n.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function C0(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||aI(r,n)}))}function aI(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(E_(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),M_(r))}function GE(r,e,t){for(const n of t)n instanceof eI?(r.Ru.addReference(n.key,e),C6(r,n)):n instanceof tI?(_e(O_,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||aI(r,n.key)):Ae(19791,{wu:n})}function C6(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(_e(O_,"New document in limbo: "+t),r.Eu.add(n),M_(r))}function M_(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new we(mt.fromString(e)),n=r.fu.next();r.Au.set(n,new _6(t)),r.du=r.du.insert(t,n),Y2(r.remoteStore,new fs(jr(Lh(t.path)),n,"TargetPurposeLimboResolution",Vr.ce))}}async function Bh(r,e,t){const n=Ue(r),s=[],o=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,d)=>{c.push(n.pu(d,e,t).then((f=>{if((f||t)&&n.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(d.targetId)?.current;n.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(f){s.push(f);const g=w_.As(d.targetId,f);o.push(g)}})))})),await Promise.all(c),n.Pu.H_(s),await(async function(d,f){const g=Ue(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>se.forEach(f,(v=>se.forEach(v.Es,(w=>g.persistence.referenceDelegate.addReference(y,v.targetId,w))).next((()=>se.forEach(v.ds,(w=>g.persistence.referenceDelegate.removeReference(y,v.targetId,w)))))))))}catch(y){if(!ka(y))throw y;_e(x_,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const w=g.Ms.get(v),T=w.snapshotVersion,N=w.withLastLimboFreeSnapshotVersion(T);g.Ms=g.Ms.insert(v,N)}}})(n.localStore,o))}async function N6(r,e){const t=Ue(r);if(!t.currentUser.isEqual(e)){_e(O_,"User change. New user:",e.toKey());const n=await H2(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new ve(de.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Bh(t,n.Ls)}}function k6(r,e){const t=Ue(r),n=t.Au.get(e);if(n&&n.hu)return Ye().add(n.key);{let s=Ye();const o=t.Iu.get(e);if(!o)return s;for(const c of o){const u=t.Tu.get(c);s=s.unionWith(u.view.nu)}return s}}function oI(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=rI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=k6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A6.bind(null,e),e.Pu.H_=m6.bind(null,e.eventManager),e.Pu.yu=g6.bind(null,e.eventManager),e}function lI(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R6.bind(null,e),e}class _h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return F2(this.persistence,new B2,e.initialUser,this.serializer)}Cu(e){return new v_(ig.mi,this.serializer)}Du(e){return new $2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_h.provider={build:()=>new _h};class D6 extends _h{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ne(this.persistence.referenceDelegate instanceof _m,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new L2(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new v_((n=>_m.mi(n,t)),this.serializer)}}class O6 extends _h{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await lI(this.xu.syncEngine),await zh(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return F2(this.persistence,new B2,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new L2(n,e.asyncQueue,t)}Mu(e,t){const n=new U5(t,this.persistence);return new j5(e.asyncQueue,n)}Cu(e){const t=O3(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new b_(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Y3(),Hf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new $2}}class bm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>$E(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=N6.bind(null,this.syncEngine),await h6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new f6})()}createDatastore(e){const t=sg(e.databaseInfo.databaseId),n=(function(o){return new K3(o)})(e.databaseInfo);return(function(o,c,u,d){return new J3(o,c,u,d)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,s,o,c,u){return new e6(n,s,o,c,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>$E(this.syncEngine,t,0)),(function(){return UE.v()?new UE:new H3})())}createSyncEngine(e,t){return(function(s,o,c,u,d,f,g){const y=new v6(s,o,c,u,d,f);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const n=Ue(t);_e(zo,"RemoteStore shutting down."),n.Ea.add(5),await Uh(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}bm.provider={build:()=>new bm};class P_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Kn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Aa="FirestoreClient";class M6{constructor(e,t,n,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=Cn.UNAUTHENTICATED,this.clientId=Z0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,(async c=>{_e(Aa,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>(_e(Aa,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=R_(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Uy(r,e){r.asyncQueue.verifyOperationInProgress(),_e(Aa,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async s=>{n.isEqual(s)||(await H2(e.localStore,s),n=s)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function KE(r,e){r.asyncQueue.verifyOperationInProgress();const t=await P6(r);_e(Aa,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>BE(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,s)=>BE(e.remoteStore,s))),r._onlineComponents=e}async function P6(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){_e(Aa,"Using user provided OfflineComponentProvider");try{await Uy(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===de.FAILED_PRECONDITION||s.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Do("Error using user provided cache. Falling back to memory cache: "+t),await Uy(r,new _h)}}else _e(Aa,"Using default OfflineComponentProvider"),await Uy(r,new D6(void 0));return r._offlineComponents}async function cI(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(_e(Aa,"Using user provided OnlineComponentProvider"),await KE(r,r._uninitializedComponentsProvider._online)):(_e(Aa,"Using default OnlineComponentProvider"),await KE(r,new bm))),r._onlineComponents}function L6(r){return cI(r).then((e=>e.syncEngine))}async function wm(r){const e=await cI(r),t=e.eventManager;return t.onListen=b6.bind(null,e.syncEngine),t.onUnlisten=E6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=w6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=T6.bind(null,e.syncEngine),t}function V6(r,e,t={}){const n=new Mi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,d,f){const g=new P_({next:v=>{g.Nu(),c.enqueueAndForget((()=>N_(o,y)));const w=v.docs.has(u);!w&&v.fromCache?f.reject(new ve(de.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&d&&d.source==="server"?f.reject(new ve(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new D_(Lh(u.path),g,{includeMetadataChanges:!0,qa:!0});return C_(o,y)})(await wm(r),r.asyncQueue,e,t,n))),n.promise}function j6(r,e,t={}){const n=new Mi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,d,f){const g=new P_({next:v=>{g.Nu(),c.enqueueAndForget((()=>N_(o,y))),v.fromCache&&d.source==="server"?f.reject(new ve(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new D_(u,g,{includeMetadataChanges:!0,qa:!0});return C_(o,y)})(await wm(r),r.asyncQueue,e,t,n))),n.promise}function uI(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const YE=new Map;const hI="firestore.googleapis.com",QE=!0;class WE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hI,this.ssl=QE}else this.host=e.host,this.ssl=e.ssl??QE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=D2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<p3)throw new ve(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}M5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uI(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class og{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new T5;switch(n.type){case"firstParty":return new R5(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ve(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=YE.get(t);n&&(_e("ComponentProvider","Removing Datastore"),YE.delete(t),n.terminate())})(this),Promise.resolve()}}function U6(r,e,t,n={}){r=Yn(r,og);const s=qo(e),o=r._getSettings(),c={...o,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${t}`;s&&(U0(`https://${u}`),z0("Firestore",!0)),o.host!==hI&&o.host!==u&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:u,ssl:s,emulatorOptions:n};if(!ys(d,c)&&(r._setSettings(d),n.mockUserToken)){let f,g;if(typeof n.mockUserToken=="string")f=n.mockUserToken,g=Cn.MOCK_USER;else{f=vS(n.mockUserToken,r._app?.options.projectId);const y=n.mockUserToken.sub||n.mockUserToken.user_id;if(!y)throw new ve(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Cn(y)}r._authCredentials=new S5(new _A(f,g))}}class Is{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Is(this.firestore,e,this._query)}}class Gt{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ba(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Oh(t,Gt._jsonSchema))return new Gt(e,n||null,new we(mt.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:cn("string",Gt._jsonSchemaVersion),referencePath:cn("string")};class ba extends Is{constructor(e,t,n){super(e,t,Lh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new we(e))}withConverter(e){return new ba(this.firestore,e,this._path)}}function zn(r,e,...t){if(r=Jt(r),bA("collection","path",e),r instanceof og){const n=mt.fromString(e,...t);return zx(n),new ba(r,null,n)}{if(!(r instanceof Gt||r instanceof ba))throw new ve(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(mt.fromString(e,...t));return zx(n),new ba(r.firestore,null,n)}}function kt(r,e,...t){if(r=Jt(r),arguments.length===1&&(e=Z0.newId()),bA("doc","path",e),r instanceof og){const n=mt.fromString(e,...t);return Ux(n),new Gt(r,null,new we(n))}{if(!(r instanceof Gt||r instanceof ba))throw new ve(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(mt.fromString(e,...t));return Ux(n),new Gt(r.firestore,r instanceof ba?r.converter:null,new we(n))}}const XE="AsyncQueue";class JE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new G2(this,"async_queue_retry"),this._c=()=>{const n=Hf();n&&_e(XE,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=Hf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Hf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Mi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ka(e))throw e;_e(XE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Kn("INTERNAL UNHANDLED ERROR: ",ZE(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=I_.createAndSchedule(this,e,t,n,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Ae(47125,{Pc:ZE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ZE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function eT(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of n)if(o in s&&typeof s[o]=="function")return!0;return!1})(r,["next","error","complete"])}class ji extends og{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new JE,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new JE(e),this._firestoreClient=void 0,await e}}}function z6(r,e){const t=typeof r=="object"?r:H0(),n=typeof r=="string"?r:cm,s=jm(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const o=pS("firestore");o&&U6(s,...o)}return s}function lg(r){if(r._terminated)throw new ve(de.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||dI(r),r._firestoreClient}function dI(r){const e=r._freezeSettings(),t=(function(s,o,c,u){return new mP(s,o,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,uI(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new M6(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(r._componentsProvider))}function B6(r,e){Do("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return F6(r,bm.provider,{build:n=>new O6(n,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function F6(r,e,t){if((r=Yn(r,ji))._firestoreClient||r._terminated)throw new ve(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new ve(de.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},dI(r)}class Lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lr(un.fromBase64String(e))}catch(t){throw new ve(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lr(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Lr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oh(e,Lr._jsonSchema))return Lr.fromBase64String(e.bytes)}}Lr._jsonSchemaVersion="firestore/bytes/1.0",Lr._jsonSchema={type:cn("string",Lr._jsonSchemaVersion),bytes:cn("string")};class cg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ac{constructor(e){this._methodName=e}}class Pi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pi._jsonSchemaVersion}}static fromJSON(e){if(Oh(e,Pi._jsonSchema))return new Pi(e.latitude,e.longitude)}}Pi._jsonSchemaVersion="firestore/geoPoint/1.0",Pi._jsonSchema={type:cn("string",Pi._jsonSchemaVersion),latitude:cn("number"),longitude:cn("number")};class Li{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,s){if(n.length!==s.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oh(e,Li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Li(e.vectorValues);throw new ve(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Li._jsonSchemaVersion="firestore/vectorValue/1.0",Li._jsonSchema={type:cn("string",Li._jsonSchemaVersion),vectorValues:cn("object")};const H6=/^__.*__$/;class q6{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new As(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tc(e,this.data,t,this.fieldTransforms)}}class fI{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new As(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mI(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:r})}}class ug{constructor(e,t,n,s,o,c){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ug({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mI(this.Ac)&&H6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $6{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||sg(e)}Cc(e,t,n,s=!1){return new ug({Ac:e,methodName:t,Dc:n,path:zt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hg(r){const e=r._freezeSettings(),t=sg(r._databaseId);return new $6(r._databaseId,!!e.ignoreUndefinedProperties,t)}function gI(r,e,t,n,s,o={}){const c=r.Cc(o.merge||o.mergeFields?2:0,e,t,s);U_("Data must be an object, but it was:",c,n);const u=yI(n,c);let d,f;if(o.merge)d=new sr(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const v=N0(e,y,t);if(!c.contains(v))throw new ve(de.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);vI(g,v)||g.push(v)}d=new sr(g),f=c.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,f=c.fieldTransforms;return new q6(new Ln(u),d,f)}class dg extends Ac{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dg}}function pI(r,e,t){return new ug({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class L_ extends Ac{_toFieldTransform(e){return new Jm(e.path,new gc)}isEqual(e){return e instanceof L_}}class V_ extends Ac{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=pI(this,e,!0),n=this.vc.map((o=>Qo(o,t))),s=new Po(n);return new Jm(e.path,s)}isEqual(e){return e instanceof V_&&ys(this.vc,e.vc)}}class j_ extends Ac{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=pI(this,e,!0),n=this.vc.map((o=>Qo(o,t))),s=new Lo(n);return new Jm(e.path,s)}isEqual(e){return e instanceof j_&&ys(this.vc,e.vc)}}function G6(r,e,t,n){const s=r.Cc(1,e,t);U_("Data must be an object, but it was:",s,n);const o=[],c=Ln.empty();Da(n,((d,f)=>{const g=z_(e,d,t);f=Jt(f);const y=s.yc(g);if(f instanceof dg)o.push(g);else{const v=Qo(f,y);v!=null&&(o.push(g),c.set(g,v))}}));const u=new sr(o);return new fI(c,u,s.fieldTransforms)}function K6(r,e,t,n,s,o){const c=r.Cc(1,e,t),u=[N0(e,n,t)],d=[s];if(o.length%2!=0)throw new ve(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(N0(e,o[v])),d.push(o[v+1]);const f=[],g=Ln.empty();for(let v=u.length-1;v>=0;--v)if(!vI(f,u[v])){const w=u[v];let T=d[v];T=Jt(T);const N=c.yc(w);if(T instanceof dg)f.push(w);else{const P=Qo(T,N);P!=null&&(f.push(w),g.set(w,P))}}const y=new sr(f);return new fI(g,y,c.fieldTransforms)}function Y6(r,e,t,n=!1){return Qo(t,r.Cc(n?4:3,e))}function Qo(r,e){if(_I(r=Jt(r)))return U_("Unsupported field value:",e,r),yI(r,e);if(r instanceof Ac)return(function(n,s){if(!mI(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,s){const o=[];let c=0;for(const u of n){let d=Qo(u,s.wc(c));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),c++}return{arrayValue:{values:o}}})(r,e)}return(function(n,s){if((n=Jt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return MP(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=xt.fromDate(n);return{timestampValue:pc(s.serializer,o)}}if(n instanceof xt){const o=new xt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:pc(s.serializer,o)}}if(n instanceof Pi)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Lr)return{bytesValue:p2(s.serializer,n._byteString)};if(n instanceof Gt){const o=s.databaseId,c=n.firestore._databaseId;if(!c.isEqual(o))throw s.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:g_(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Li)return(function(c,u){return{mapValue:{fields:{[o_]:{stringValue:l_},[hc]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return u_(u.serializer,f)}))}}}}}})(n,s);throw s.Sc(`Unsupported field value: ${Fm(n)}`)})(r,e)}function yI(r,e){const t={};return LA(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Da(r,((n,s)=>{const o=Qo(s,e.mc(n));o!=null&&(t[n]=o)})),{mapValue:{fields:t}}}function _I(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof xt||r instanceof Pi||r instanceof Lr||r instanceof Gt||r instanceof Ac||r instanceof Li)}function U_(r,e,t){if(!_I(t)||!wA(t)){const n=Fm(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function N0(r,e,t){if((e=Jt(e))instanceof cg)return e._internalPath;if(typeof e=="string")return z_(r,e);throw xm("Field path arguments must be of type string or ",r,!1,void 0,t)}const Q6=new RegExp("[~\\*/\\[\\]]");function z_(r,e,t){if(e.search(Q6)>=0)throw xm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new cg(...e.split("."))._internalPath}catch{throw xm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function xm(r,e,t,n,s){const o=n&&!n.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${n}`),c&&(d+=` in document ${s}`),d+=")"),new ve(de.INVALID_ARGUMENT,u+r+d)}function vI(r,e){return r.some((t=>t.isEqual(e)))}class bI{constructor(e,t,n,s,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new W6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class W6 extends bI{data(){return super.data()}}function fg(r,e){return typeof e=="string"?z_(r,e):e instanceof cg?e._internalPath:e._delegate._internalPath}function wI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ve(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class B_{}class F_ extends B_{}function xs(r,e,...t){let n=[];e instanceof B_&&n.push(e),n=n.concat(t),(function(o){const c=o.filter((d=>d instanceof H_)).length,u=o.filter((d=>d instanceof mg)).length;if(c>1||c>0&&u>0)throw new ve(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)r=s._apply(r);return r}class mg extends F_{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new mg(e,t,n)}_apply(e){const t=this._parse(e);return xI(e._query,t),new Is(e.firestore,e.converter,_0(e._query,t))}_parse(e){const t=hg(e.firestore);return(function(o,c,u,d,f,g,y){let v;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ve(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){nT(y,g);const T=[];for(const N of y)T.push(tT(d,o,N));v={arrayValue:{values:T}}}else v=tT(d,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||nT(y,g),v=Y6(u,c,y,g==="in"||g==="not-in");return nt.create(f,g,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ia(r,e,t){const n=e,s=fg("where",r);return mg._create(s,n,t)}class H_ extends B_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new H_(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:Et.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let c=s;const u=o.getFlattenedFilters();for(const d of u)xI(c,d),c=_0(c,d)})(e._query,t),new Is(e.firestore,e.converter,_0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class q_ extends F_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new q_(e,t)}_apply(e){const t=(function(s,o,c){if(s.startAt!==null)throw new ve(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ve(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ph(o,c)})(e._query,this._field,this._direction);return new Is(e.firestore,e.converter,(function(s,o){const c=s.explicitOrderBy.concat([o]);return new Ec(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function X6(r,e="asc"){const t=e,n=fg("orderBy",r);return q_._create(n,t)}class $_ extends F_{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new $_(e,t,n)}_apply(e){return new Is(e.firestore,e.converter,dm(e._query,this._limit,this._limitType))}}function J6(r){return $_._create("limit",r,"F")}function tT(r,e,t){if(typeof(t=Jt(t))=="string"){if(t==="")throw new ve(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZA(e)&&t.indexOf("/")!==-1)throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(mt.fromString(t));if(!we.isDocumentKey(n))throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return mh(r,new we(n))}if(t instanceof Gt)return mh(r,t._key);throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fm(t)}.`)}function nT(r,e){if(!Array.isArray(r)||r.length===0)throw new ve(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xI(r,e){const t=(function(s,o){for(const c of s)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ve(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Z6{convertValue(e,t="none"){switch(Ea(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Da(e,((s,o)=>{n[s]=this.convertValue(o,t)})),n}convertVectorValue(e){const t=e.fields?.[hc].arrayValue?.values?.map((n=>jt(n.doubleValue)));return new Li(t)}convertGeoPoint(e){return new Pi(jt(e.latitude),jt(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ym(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(dh(e));default:return null}}convertTimestamp(e){const t=bs(e);return new xt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=mt.fromString(e);Ne(A2(n),9688,{name:e});const s=new Oo(n.get(1),n.get(3)),o=new we(n.popFirst(5));return s.isEqual(t)||Kn(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function EI(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class Fu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Eo extends bI{constructor(e,t,n,s,o,c){super(e,t,n,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(fg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Eo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Eo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Eo._jsonSchema={type:cn("string",Eo._jsonSchemaVersion),bundleSource:cn("string","DocumentSnapshot"),bundleName:cn("string"),bundle:cn("string")};class qf extends Eo{data(e={}){return super.data(e)}}class To{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Fu(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new qf(this._firestore,this._userDataWriter,n.key,n,new Fu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((u=>{const d=new qf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Fu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new qf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Fu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:eL(u.type),doc:d,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=To._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Z0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eL(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}function Ra(r){r=Yn(r,Gt);const e=Yn(r.firestore,ji);return V6(lg(e),r._key).then((t=>TI(e,r,t)))}To._jsonSchemaVersion="firestore/querySnapshot/1.0",To._jsonSchema={type:cn("string",To._jsonSchemaVersion),bundleSource:cn("string","QuerySnapshot"),bundleName:cn("string"),bundle:cn("string")};class G_ extends Z6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}function Ca(r){r=Yn(r,Is);const e=Yn(r.firestore,ji),t=lg(e),n=new G_(e);return wI(r._query),j6(t,r._query).then((s=>new To(e,n,r,s)))}function _c(r,e,t){r=Yn(r,Gt);const n=Yn(r.firestore,ji),s=EI(r.converter,e,t);return gg(n,[gI(hg(n),"setDoc",r._key,s,r.converter!==null,t).toMutation(r._key,jn.none())])}function wr(r,e,t,...n){r=Yn(r,Gt);const s=Yn(r.firestore,ji),o=hg(s);let c;return c=typeof(e=Jt(e))=="string"||e instanceof cg?K6(o,"updateDoc",r._key,e,t,n):G6(o,"updateDoc",r._key,e),gg(s,[c.toMutation(r._key,jn.exists(!0))])}function Em(r){return gg(Yn(r.firestore,ji),[new eg(r._key,jn.none())])}function Fh(r,e){const t=Yn(r.firestore,ji),n=kt(r),s=EI(r.converter,e);return gg(t,[gI(hg(r.firestore),"addDoc",n._key,s,r.converter!==null,{}).toMutation(n._key,jn.exists(!1))]).then((()=>n))}function rc(r,...e){r=Jt(r);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||eT(e[n])||(t=e[n++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(eT(e[n])){const d=e[n];e[n]=d.next?.bind(d),e[n+1]=d.error?.bind(d),e[n+2]=d.complete?.bind(d)}let o,c,u;if(r instanceof Gt)c=Yn(r.firestore,ji),u=Lh(r._key.path),o={next:d=>{e[n]&&e[n](TI(c,r,d))},error:e[n+1],complete:e[n+2]};else{const d=Yn(r,Is);c=Yn(d.firestore,ji),u=d._query;const f=new G_(c);o={next:g=>{e[n]&&e[n](new To(c,f,d,g))},error:e[n+1],complete:e[n+2]},wI(r._query)}return(function(f,g,y,v){const w=new P_(v),T=new D_(g,w,y);return f.asyncQueue.enqueueAndForget((async()=>C_(await wm(f),T))),()=>{w.Nu(),f.asyncQueue.enqueueAndForget((async()=>N_(await wm(f),T)))}})(lg(c),u,s,o)}function gg(r,e){return(function(n,s){const o=new Mi;return n.asyncQueue.enqueueAndForget((async()=>S6(await L6(n),s,o))),o.promise})(lg(r),e)}function TI(r,e,t){const n=t.docs.get(e._key),s=new G_(r);return new Eo(r,s,e._key,n,new Fu(t.hasPendingWrites,t.fromCache),e.converter)}function ar(){return new L_("serverTimestamp")}function K_(...r){return new V_("arrayUnion",r)}function SI(...r){return new j_("arrayRemove",r)}(function(e,t=!0){(function(s){xc=s})($o),Ro(new xa("firestore",((n,{instanceIdentifier:s,options:o})=>{const c=n.getProvider("app").getImmediate(),u=new ji(new A5(n.getProvider("auth-internal")),new C5(c,n.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ve(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oo(f.options.projectId,g)})(c,s),c);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),ki(Px,Lx,e),ki(Px,Lx,"esm2020")})();const AI="firebasestorage.googleapis.com",tL="storageBucket",nL=120*1e3,rL=600*1e3;class Hi extends Bi{constructor(e,t,n=0){super(zy(e),`Firebase Storage: ${t} (${zy(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ui;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ui||(Ui={}));function zy(r){return"storage/"+r}function iL(){const r="An unknown error occurred, please check the error payload for server response.";return new Hi(Ui.UNKNOWN,r)}function sL(){return new Hi(Ui.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aL(){return new Hi(Ui.CANCELED,"User canceled the upload/download.")}function oL(r){return new Hi(Ui.INVALID_URL,"Invalid URL '"+r+"'.")}function lL(r){return new Hi(Ui.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function rT(r){return new Hi(Ui.INVALID_ARGUMENT,r)}function II(){return new Hi(Ui.APP_DELETED,"The Firebase app was deleted.")}function cL(r){return new Hi(Ui.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class ti{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=ti.makeFromUrl(e,t)}catch{return new ti(e,"")}if(n.path==="")return n;throw lL(e)}static makeFromUrl(e,t){let n=null;const s="([A-Za-z0-9.\\-_]+)";function o(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+s+c,"i"),d={bucket:1,path:3};function f(q){q.path_=decodeURIComponent(q.path)}const g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${y}/${g}/b/${s}/o${v}`,"i"),T={bucket:1,path:3},N=t===AI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,P="([^?#]*)",V=new RegExp(`^https?://${N}/${s}/${P}`,"i"),B=[{regex:u,indices:d,postModify:o},{regex:w,indices:T,postModify:f},{regex:V,indices:{bucket:1,path:2},postModify:f}];for(let q=0;q<B.length;q++){const K=B[q],z=K.regex.exec(e);if(z){const O=z[K.indices.bucket];let x=z[K.indices.path];x||(x=""),n=new ti(O,x),K.postModify(n);break}}if(n==null)throw oL(e);return n}}class uL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function hL(r,e,t){let n=1,s=null,o=null,c=!1,u=0;function d(){return u===2}let f=!1;function g(...P){f||(f=!0,e.apply(null,P))}function y(P){s=setTimeout(()=>{s=null,r(w,d())},P)}function v(){o&&clearTimeout(o)}function w(P,...V){if(f){v();return}if(P){v(),g.call(null,P,...V);return}if(d()||c){v(),g.call(null,P,...V);return}n<64&&(n*=2);let B;u===1?(u=2,B=0):B=(n+Math.random())*1e3,y(B)}let T=!1;function N(P){T||(T=!0,v(),!f&&(s!==null?(P||(u=2),clearTimeout(s),y(0)):P||(u=1)))}return y(0),o=setTimeout(()=>{c=!0,N(!0)},t),N}function dL(r){r(!1)}function fL(r){return r!==void 0}function iT(r,e,t,n){if(n<e)throw rT(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw rT(`Invalid value for '${r}'. Expected ${t} or less.`)}function mL(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const s=e(n)+"="+e(r[n]);t=t+s+"&"}return t=t.slice(0,-1),t}var Tm;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Tm||(Tm={}));function gL(r,e){const t=r>=500&&r<600,s=[408,429].indexOf(r)!==-1,o=e.indexOf(r)!==-1;return t||s||o}class pL{constructor(e,t,n,s,o,c,u,d,f,g,y,v=!0,w=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,N)=>{this.resolve_=T,this.reject_=N,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new Tf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const d=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===Tm.NO_ERROR,d=o.getStatus();if(!u||gL(d,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===Tm.ABORT;n(!1,new Tf(!1,null,g));return}const f=this.successCodes_.indexOf(d)!==-1;n(!0,new Tf(f,o))})},t=(n,s)=>{const o=this.resolve_,c=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());fL(d)?o(d):o()}catch(d){c(d)}else if(u!==null){const d=iL();d.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,d)):c(d)}else if(s.canceled){const d=this.appDelete_?II():aL();c(d)}else{const d=sL();c(d)}};this.canceled_?t(!1,new Tf(!1,null,!0)):this.backoffId_=hL(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&dL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Tf{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function yL(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function _L(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function vL(r,e){e&&(r["X-Firebase-GMPID"]=e)}function bL(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function wL(r,e,t,n,s,o,c=!0,u=!1){const d=mL(r.urlParams),f=r.url+d,g=Object.assign({},r.headers);return vL(g,e),yL(g,t),_L(g,o),bL(g,n),new pL(f,r.method,g,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s,c,u)}function xL(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function EL(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}class Sm{constructor(e,t){this._service=e,t instanceof ti?this._location=t:this._location=ti.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Sm(e,t)}get root(){const e=new ti(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return EL(this._location.path)}get storage(){return this._service}get parent(){const e=xL(this._location.path);if(e===null)return null;const t=new ti(this._location.bucket,e);return new Sm(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw cL(e)}}function sT(r,e){const t=e?.[tL];return t==null?null:ti.makeFromBucketSpec(t,r)}function TL(r,e,t,n={}){r.host=`${e}:${t}`;const s=qo(e);s&&(U0(`https://${r.host}/b`),z0("Storage",!0)),r._isUsingEmulator=!0,r._protocol=s?"https":"http";const{mockUserToken:o}=n;o&&(r._overrideAuthToken=typeof o=="string"?o:vS(o,r.app.options.projectId))}class SL{constructor(e,t,n,s,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=AI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nL,this._maxUploadRetryTime=rL,this._requests=new Set,s!=null?this._bucket=ti.makeFromBucketSpec(s,this._host):this._bucket=sT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ti.makeFromBucketSpec(this._url,e):this._bucket=sT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sm(this,e)}_makeRequest(e,t,n,s,o=!0){if(this._deleted)return new uL(II());{const c=wL(e,this._appId,n,s,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,s).getPromise()}}const aT="@firebase/storage",oT="0.14.0";const RI="storage";function AL(r=H0(),e){r=Jt(r);const n=jm(r,RI).getImmediate({identifier:e}),s=pS("storage");return s&&IL(n,...s),n}function IL(r,e,t,n={}){TL(r,e,t,n)}function RL(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),s=r.getProvider("app-check-internal");return new SL(t,n,s,e,$o)}function CL(){Ro(new xa(RI,RL,"PUBLIC").setMultipleInstances(!0)),ki(aT,oT,""),ki(aT,oT,"esm2020")}CL();const NL={apiKey:"AIzaSyAukVlaxbs_YneslsBqTydefDhepXbookU",authDomain:"plantai0.firebaseapp.com",projectId:"plantai0",storageBucket:"plantai0.firebasestorage.app",messagingSenderId:"265722530392",appId:"1:265722530392:web:5e2b3aed63d2597b07d82d",measurementId:"G-LSJ7Q09VS0"},Y_=AS(NL),_r=x5(Y_),qe=z6(Y_);AL(Y_);new us;try{B6(qe).catch(r=>{r.code=="failed-precondition"?console.warn("Firebase persistence failed: multiple tabs"):r.code=="unimplemented"&&console.warn("Firebase persistence not supported")})}catch{}const CI=$.createContext();function si(){return $.useContext(CI)}function kL({children:r}){const[e,t]=$.useState(null),[n,s]=$.useState(!0);$.useEffect(()=>hM(_r,async f=>{if(f){t(f);try{const g=kt(qe,"users",f.uid),y=await Ra(g);if(y.exists()){const v=y.data();if(!v.createdAt&&f.metadata.creationTime){const w=new Date(f.metadata.creationTime);await _c(g,{createdAt:w},{merge:!0}),v.createdAt=w}t(w=>({...w,...v}))}else{console.warn("User document missing. Creating sync record...");const v={uid:f.uid,name:f.displayName||"User",displayName:f.displayName||"User",email:f.email,photoURL:f.photoURL,avatar:f.photoURL,createdAt:f.metadata.creationTime?new Date(f.metadata.creationTime):new Date,lastSeen:new Date,bio:""};try{await _c(g,v),t(w=>({...w,...v}))}catch(w){console.error("Failed to auto-create user doc:",w)}}}catch(g){console.error("Error fetching/syncing user profile:",g)}}else t(null);s(!1)}),[]);const u={currentUser:e,loading:n,logout:async()=>{await _r.signOut(),t(null)},refreshUser:async()=>{if(_r.currentUser){await _r.currentUser.reload();const d=_r.currentUser;let f={};try{const g=await Ra(kt(qe,"users",d.uid));g.exists()&&(f=g.data())}catch(g){console.error("Error refreshing profile:",g)}t({...d,...f})}}};return b.jsx(CI.Provider,{value:u,children:!n&&r})}const DL=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OL=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),lT=r=>{const e=OL(r);return e.charAt(0).toUpperCase()+e.slice(1)},NI=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),ML=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var PL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const LL=$.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:c,...u},d)=>$.createElement("svg",{ref:d,...PL,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:NI("lucide",s),...!o&&!ML(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>$.createElement(f,g)),...Array.isArray(o)?o:[o]]));const Pe=(r,e)=>{const t=$.forwardRef(({className:n,...s},o)=>$.createElement(LL,{ref:o,iconNode:e,className:NI(`lucide-${DL(lT(r))}`,`lucide-${r}`,n),...s}));return t.displayName=lT(r),t};const VL=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Am=Pe("activity",VL);const jL=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],UL=Pe("arrow-left",jL);const zL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],kI=Pe("arrow-right",zL);const BL=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],FL=Pe("brain",BL);const HL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],qL=Pe("calendar-check",HL);const $L=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],So=Pe("camera",$L);const GL=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],DI=Pe("chevron-down",GL);const KL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],YL=Pe("chevron-right",KL);const QL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],OI=Pe("circle-alert",QL);const WL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],pg=Pe("circle-check-big",WL);const XL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],JL=Pe("circle-check",XL);const ZL=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],MI=Pe("clock",ZL);const eV=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],tV=Pe("file-text",eV);const nV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],rV=Pe("globe",nV);const iV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],sV=Pe("grid-3x3",iV);const aV=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],oV=Pe("heart",aV);const lV=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],PI=Pe("house",lV);const cV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],LI=Pe("image",cV);const uV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],VI=Pe("info",uV);const hV=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],dV=Pe("leaf",hV);const fV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ao=Pe("loader-circle",fV);const mV=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],cT=Pe("log-in",mV);const gV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],jI=Pe("log-out",gV);const pV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],yV=Pe("mail",pV);const _V=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],vh=Pe("message-circle",_V);const vV=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],bV=Pe("mic",vV);const wV=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],UI=Pe("moon",wV);const xV=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],uT=Pe("paperclip",xV);const EV=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],TV=Pe("pause",EV);const SV=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],zI=Pe("pen",SV);const AV=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],IV=Pe("play",AV);const RV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],CV=Pe("plus",RV);const NV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],BI=Pe("refresh-cw",NV);const kV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],FI=Pe("save",kV);const DV=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],hT=Pe("scan-line",DV);const OV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],MV=Pe("search",OV);const PV=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],bh=Pe("send",PV);const LV=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],k0=Pe("share-2",LV);const VV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],jV=Pe("shield-check",VV);const UV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],zV=Pe("sparkles",UV);const BV=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],zi=Pe("sprout",BV);const FV=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],dT=Pe("stethoscope",FV);const HV=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],HI=Pe("sun",HV);const qV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Im=Pe("trash-2",qV);const $V=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],D0=Pe("triangle-alert",$V);const GV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],KV=Pe("user-plus",GV);const YV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Rm=Pe("user",YV);const QV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],WV=Pe("users",QV);const XV=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],JV=Pe("wand-sparkles",XV);const ZV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Bo=Pe("x",ZV);const ej=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],tj=Pe("zap",ej),qI=$.createContext(null),Oa=()=>$.useContext(qI),nj=({children:r})=>{const[e,t]=$.useState([]),n=$.useCallback((o,c="info",u=3e3)=>{const d=Date.now();t(f=>[...f,{id:d,message:o,type:c}]),setTimeout(()=>{s(d)},u)},[]),s=$.useCallback(o=>{t(c=>c.filter(u=>u.id!==o))},[]);return b.jsxs(qI.Provider,{value:{addToast:n},children:[r,b.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(o=>b.jsxs("div",{className:`pointer-events-auto min-w-[300px] max-w-sm rounded-xl p-4 shadow-lg border animate-slide-in-right flex items-start gap-3 transform transition-all duration-300
                        ${o.type==="success"?"bg-white dark:bg-gray-800 border-green-500 text-gray-800 dark:text-white":o.type==="error"?"bg-white dark:bg-gray-800 border-red-500 text-gray-800 dark:text-white":"bg-white dark:bg-gray-800 border-blue-500 text-gray-800 dark:text-white"}`,children:[o.type==="success"&&b.jsx(pg,{className:"w-5 h-5 text-green-500 shrink-0"}),o.type==="error"&&b.jsx(OI,{className:"w-5 h-5 text-red-500 shrink-0"}),o.type==="info"&&b.jsx(VI,{className:"w-5 h-5 text-blue-500 shrink-0"}),b.jsx("p",{className:"text-sm font-medium flex-1",children:o.message}),b.jsx("button",{onClick:()=>s(o.id),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:b.jsx(Bo,{className:"w-4 h-4"})})]},o.id))})]})};class $I extends BT.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}handleGoHome=()=>{this.setState({hasError:!1,error:null}),window.location.href="/"};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center animate-fade-in text-gray-900 dark:text-white",children:[b.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-6 rounded-full mb-6",children:b.jsx(D0,{className:"w-12 h-12 text-red-600 dark:text-red-400"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),b.jsx("p",{className:"mb-8 max-w-md text-gray-500 dark:text-gray-400",children:this.state.error?.message||"An unexpected error occurred."}),b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("button",{onClick:this.handleReload,className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-6 py-3 rounded-xl font-bold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[b.jsx(BI,{className:"w-5 h-5"}),"Reload"]}),b.jsxs("button",{onClick:this.handleGoHome,className:"bg-green-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[b.jsx(PI,{className:"w-5 h-5"}),"Go Home"]})]})]}):this.props.children}}function rj(){const{currentUser:r,logout:e}=si(),{t,i18n:n}=Bn(),s=xr(),o=Es(),{addToast:c}=Oa(),u=()=>{n.changeLanguage(n.language==="en"?"tr":"en")},[d,f]=$.useState(localStorage.getItem("theme")||"light");$.useEffect(()=>{d==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",d)},[d]);const[g]=$.useState(()=>new Audio("https://assets.mixkit.co/active_storage/sfx/2573/2573-preview.mp3")),y=()=>{f(T=>T==="dark"?"light":"dark")};$.useEffect(()=>{if(!r)return;const T=async()=>{try{await wr(kt(qe,"users",r.uid),{lastSeen:ar()})}catch(P){console.error("Presence update failed",P)}};T();const N=setInterval(T,60*1e3);return()=>clearInterval(N)},[r]),$.useEffect(()=>{if(!r)return;const T=xs(zn(qe,"chats"),Ia("participants","array-contains",r.uid)),N=rc(T,P=>{P.docChanges().forEach(V=>{if(V.type==="modified"){const H=V.doc.data(),B=H.updatedAt?.seconds*1e3;if(Date.now()-B>5e3)return;const q=H.participants.find(z=>z!==r.uid);if(!(s.pathname===`/messages/${V.doc.id}`)&&q){const z=H.participantData?.[q]||{name:"Someone"};g.play().catch(O=>console.log("Audio play failed",O)),c(`New message from ${z.name}: ${H.lastMessage?.substring(0,30)}...`,"info",5e3)}}})});return()=>N()},[r,s.pathname,c,g]);const w=[{path:"/",icon:PI,label:t("app_name"),public:!0},{path:"/community",icon:WV,label:t("community"),public:!0},{path:"/analyses",icon:MI,label:t("analyses"),public:!1},{path:"/messages",icon:vh,label:t("messages"),public:!1},{path:"/profile",icon:Rm,label:t("profile"),public:!1},{path:"/about",icon:VI,label:t("about"),public:!0}].filter(T=>T.public||r);return b.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans overflow-hidden",children:[b.jsxs("aside",{className:"hidden md:flex flex-col w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300",children:[b.jsxs(Zr,{to:"/",onClick:()=>window.scrollTo(0,0),className:"p-6 flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(zi,{className:"w-8 h-8 text-green-600"}),b.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("nav",{className:"flex-1 px-4 space-y-2",children:w.map(T=>{const N=T.icon,P=s.pathname===T.path;return b.jsxs(Zr,{to:T.path,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${P?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 font-semibold shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:[b.jsx(N,{className:"w-5 h-5"}),b.jsx("span",{children:T.label})]},T.path)})}),b.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[b.jsxs("button",{onClick:u,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[b.jsx("span",{className:"font-bold border border-gray-300 dark:border-gray-600 rounded px-1 text-xs",children:n.language.toUpperCase()}),b.jsx("span",{children:t("language")||"Language"})]}),b.jsxs("button",{onClick:y,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[d==="dark"?b.jsx(HI,{className:"w-5 h-5"}):b.jsx(UI,{className:"w-5 h-5"}),b.jsx("span",{children:t(d==="dark"?"light_mode":"dark_mode")})]}),r?b.jsxs("div",{className:"flex flex-col gap-2",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("img",{src:r.photoURL||r.avatar||`https://ui-avatars.com/api/?name=${r.displayName||"User"}`,alt:"Avatar",className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-gray-600"}),b.jsxs("div",{className:"flex-1 overflow-hidden",children:[b.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase font-bold",children:t("welcome_user")}),b.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",title:r.displayName||r.email,children:r.displayName||r.email})]})]}),b.jsxs("button",{onClick:async()=>{await e(),o("/")},className:"flex items-center gap-3 w-full px-4 py-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 shadow-sm",children:[b.jsx(jI,{className:"w-5 h-5"}),b.jsx("span",{children:t("logout")})]})]}):b.jsxs(Zr,{to:"/login",className:"flex items-center gap-3 w-full px-4 py-3 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-xl transition-colors font-semibold",children:[b.jsx(cT,{className:"w-5 h-5"}),b.jsx("span",{children:t("login")})]})]})]}),b.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[b.jsxs("header",{className:"md:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between sticky top-0 z-10",children:[b.jsxs(Zr,{to:"/",onClick:()=>window.scrollTo(0,0),className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(zi,{className:"w-6 h-6 text-green-600"}),b.jsxs("span",{className:"font-bold text-lg",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("button",{onClick:u,className:"text-sm font-bold bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-lg",children:n.language.toUpperCase()})]}),b.jsx("div",{className:"flex-1 overflow-y-auto w-full p-4 md:p-8 pb-24 md:pb-8 scroll-smooth relative",id:"main-scroll",children:b.jsx("div",{className:"w-full h-full flex flex-col",children:b.jsx($I,{children:b.jsx(lk,{})})})}),b.jsxs("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex justify-around p-2 z-50 safe-area-bottom shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:[w.map(T=>{const N=T.icon,P=s.pathname===T.path;return b.jsxs(Zr,{to:T.path,className:`flex flex-col items-center justify-center p-2 rounded-lg ${P?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:[b.jsx(N,{className:`w-6 h-6 ${P?"fill-current":""}`}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:T.label})]},T.path)}),!r&&b.jsxs(Zr,{to:"/login",className:"flex flex-col items-center justify-center p-2 text-gray-500",children:[b.jsx(cT,{className:"w-6 h-6"}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:t("login")})]})]})]})]})}function ij(){const[r,e]=$.useState(""),[t,n]=$.useState(""),[s,o]=$.useState(""),[c,u]=$.useState(!1),[d,f]=$.useState(!1),[g,y]=$.useState(!1),v=Es(),w=xr(),{t:T}=Bn(),{currentUser:N}=si(),{addToast:P}=Oa();if(N?.emailVerified)return w.state?.returnUrl&&w.state?.pendingResult?v(w.state.returnUrl,{replace:!0,state:{restoredResult:w.state.pendingResult,restoredImages:w.state.pendingImages,restoredPlantType:w.state.pendingPlantType}}):v(w.state?.returnUrl||"/"),null;const V=async()=>{y(!0);try{const B=await Tx(_r,r,t);await ZS(B.user),await _r.signOut(),P(T("verification_sent")||"Verification email sent! Check your inbox.","success")}catch(B){console.error("Resend error:",B),B.code==="auth/too-many-requests"?P(T("too_many_requests")||"Too many attempts. Please wait.","error"):P(T("resend_failed")||"Failed to resend email.","error")}finally{y(!1)}},H=async B=>{B.preventDefault(),o(""),f(!1),u(!0);try{if(!(await Tx(_r,r,t)).user.emailVerified){await _r.signOut(),f(!0);return}}catch(q){console.error(q);let K=T("login_failed")||"Failed to login.";q.code==="auth/user-not-found"||q.code==="auth/wrong-password"||q.code==="auth/invalid-credential"?K=T("invalid_credentials")||"Invalid email or password.":q.code==="auth/too-many-requests"?K=T("too_many_requests")||"Too many attempts. Try again later.":q.code==="auth/user-disabled"?K="Account disabled. Contact support.":q.code==="auth/network-request-failed"&&(K="Network error. Check your connection."),o(K)}finally{u(!1)}};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:b.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(zi,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:T("welcome")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:T("login_prompt")}),s&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:s}),d?b.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-xl animate-fade-in",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-800 rounded-full text-yellow-600 dark:text-yellow-400",children:b.jsx(zi,{className:"w-5 h-5"})}),b.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:T("verify_email_title")||"Verify your email"})]}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:T("verify_email_desc")||"We've sent a confirmation link to your inbox. Please check your spam folder too."}),b.jsx("button",{onClick:V,disabled:g,className:"w-full py-2 px-4 bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-900/50 dark:hover:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded-lg text-sm font-semibold transition-colors disabled:opacity-50",children:g?"Sending...":T("resend_verification")||"Resend Verification Email"})]}):b.jsxs("form",{onSubmit:H,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:B=>e(B.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:B=>n(B.target.value)})]}),b.jsxs("button",{type:"submit",disabled:c,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c?"Logging in...":T("login"),!c&&b.jsx(kI,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",b.jsx(Zr,{to:"/register",state:w.state,className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:T("register")})]})]})})})}function sj({user:r,onClose:e,onVerified:t}){const{t:n}=Bn(),[s,o]=$.useState(!1);$.useEffect(()=>{const u=setInterval(async()=>{if(r)try{await r.reload(),r.emailVerified&&(clearInterval(u),t())}catch(d){console.error("Verification check failed",d)}},3e3);return()=>clearInterval(u)},[r,t]);const c=async()=>{o(!0);try{await r.reload(),r.emailVerified&&t()}catch(u){console.error(u)}finally{setTimeout(()=>o(!1),500)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl p-8 flex flex-col items-center text-center relative overflow-hidden",children:[b.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-green-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-blue-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6 text-green-600 dark:text-green-400 animate-pulse",children:b.jsx(yV,{className:"w-10 h-10"})}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:n("verify_email_title")||"Verify Your Email"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:n("verify_email_desc")||`We sent a confirmation link to ${r?.email}. Please check your inbox and click the link to continue.`}),b.jsxs("div",{className:"space-y-4 w-full",children:[b.jsx("button",{onClick:()=>window.open("https://mail.google.com","_blank"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-2",children:n("open_email_app")||"Open Email App"}),b.jsxs("button",{onClick:c,disabled:s,className:"w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-white font-semibold py-3 rounded-xl transition-all flex items-center justify-center gap-2",children:[s?b.jsx(BI,{className:"w-5 h-5 animate-spin"}):b.jsx(pg,{className:"w-5 h-5"}),n("i_verified_it")||"I Verified the Email"]}),b.jsx("button",{onClick:e,className:"text-sm text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:n("cancel")||"Cancel"})]})]})})}function aj(){const[r,e]=$.useState(""),[t,n]=$.useState(""),[s,o]=$.useState(""),[c,u]=$.useState(""),[d,f]=$.useState(!1),[g,y]=$.useState(!1),[v,w]=$.useState(null),T=Es(),N=xr(),{t:P}=Bn(),V=async B=>{B.preventDefault(),u(""),f(!0);try{const q=await oM(_r,r,t);await eA(q.user,{displayName:s}),await _c(kt(qe,"users",q.user.uid),{uid:q.user.uid,name:s,displayName:s,email:r,photoURL:null,avatar:null,createdAt:ar(),lastSeen:ar(),bio:""}),await ZS(q.user),w(q.user),y(!0),f(!1)}catch(q){u(q.message),console.error(q),f(!1)}},H=async()=>{_r.currentUser&&await _r.currentUser.reload(),y(!1),N.state?.returnUrl&&N.state?.pendingResult?T(N.state.returnUrl,{replace:!0,state:{restoredResult:N.state.pendingResult,restoredImages:N.state.pendingImages,restoredPlantType:N.state.pendingPlantType}}):T("/")};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4 animate-fade-in",children:b.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden relative",children:[g&&v&&b.jsx(sj,{user:v,onClose:()=>y(!1),onVerified:H}),b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(zi,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:P("register")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:P("create_account_desc")||P("join_community")||"Create an account to join the community"}),c&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:c}),b.jsxs("form",{onSubmit:V,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:P("full_name")||"Full Name"}),b.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:s,onChange:B=>o(B.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:P("email")}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:B=>e(B.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:P("password")}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:B=>n(B.target.value)})]}),b.jsxs("button",{type:"submit",disabled:d||g,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d?P("creating_account")||"Creating Account...":P("register"),!d&&b.jsx(KV,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:[P("already_have_account")||"Already have an account?"," "," ",b.jsx(Zr,{to:"/login",className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:P("login")})]})]})]})})}var fT;(function(r){r.STRING="string",r.NUMBER="number",r.INTEGER="integer",r.BOOLEAN="boolean",r.ARRAY="array",r.OBJECT="object"})(fT||(fT={}));var mT;(function(r){r.LANGUAGE_UNSPECIFIED="language_unspecified",r.PYTHON="python"})(mT||(mT={}));var gT;(function(r){r.OUTCOME_UNSPECIFIED="outcome_unspecified",r.OUTCOME_OK="outcome_ok",r.OUTCOME_FAILED="outcome_failed",r.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(gT||(gT={}));const pT=["user","model","function","system"];var yT;(function(r){r.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",r.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(yT||(yT={}));var _T;(function(r){r.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE"})(_T||(_T={}));var vT;(function(r){r.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",r.NEGLIGIBLE="NEGLIGIBLE",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH"})(vT||(vT={}));var bT;(function(r){r.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",r.SAFETY="SAFETY",r.OTHER="OTHER"})(bT||(bT={}));var th;(function(r){r.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",r.STOP="STOP",r.MAX_TOKENS="MAX_TOKENS",r.SAFETY="SAFETY",r.RECITATION="RECITATION",r.LANGUAGE="LANGUAGE",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.SPII="SPII",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.OTHER="OTHER"})(th||(th={}));var wT;(function(r){r.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",r.RETRIEVAL_QUERY="RETRIEVAL_QUERY",r.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",r.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",r.CLASSIFICATION="CLASSIFICATION",r.CLUSTERING="CLUSTERING"})(wT||(wT={}));var xT;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.AUTO="AUTO",r.ANY="ANY",r.NONE="NONE"})(xT||(xT={}));var ET;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(ET||(ET={}));class Vn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class $l extends Vn{constructor(e,t){super(e),this.response=t}}class GI extends Vn{constructor(e,t,n,s){super(e),this.status=t,this.statusText=n,this.errorDetails=s}}class wa extends Vn{}class KI extends Vn{}const oj="https://generativelanguage.googleapis.com",lj="v1beta",cj="0.24.1",uj="genai-js";var Fo;(function(r){r.GENERATE_CONTENT="generateContent",r.STREAM_GENERATE_CONTENT="streamGenerateContent",r.COUNT_TOKENS="countTokens",r.EMBED_CONTENT="embedContent",r.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Fo||(Fo={}));class hj{constructor(e,t,n,s,o){this.model=e,this.task=t,this.apiKey=n,this.stream=s,this.requestOptions=o}toString(){var e,t;const n=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||lj;let o=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||oj}/${n}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function dj(r){const e=[];return r?.apiClient&&e.push(r.apiClient),e.push(`${uj}/${cj}`),e.join(" ")}async function fj(r){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",dj(r.requestOptions)),t.append("x-goog-api-key",r.apiKey);let n=(e=r.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(s){throw new wa(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${s.message}`)}for(const[s,o]of n.entries()){if(s==="x-goog-api-key")throw new wa(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new wa(`Header name ${s} can only be set using the apiClient field`);t.append(s,o)}}return t}async function mj(r,e,t,n,s,o){const c=new hj(r,e,t,n,o);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},_j(o)),{method:"POST",headers:await fj(c),body:s})}}async function Hh(r,e,t,n,s,o={},c=fetch){const{url:u,fetchOptions:d}=await mj(r,e,t,n,s,o);return gj(u,d,c)}async function gj(r,e,t=fetch){let n;try{n=await t(r,e)}catch(s){pj(s,r)}return n.ok||await yj(n,r),n}function pj(r,e){let t=r;throw t.name==="AbortError"?(t=new KI(`Request aborted when fetching ${e.toString()}: ${r.message}`),t.stack=r.stack):r instanceof GI||r instanceof wa||(t=new Vn(`Error fetching from ${e.toString()}: ${r.message}`),t.stack=r.stack),t}async function yj(r,e){let t="",n;try{const s=await r.json();t=s.error.message,s.error.details&&(t+=` ${JSON.stringify(s.error.details)}`,n=s.error.details)}catch{}throw new GI(`Error fetching from ${e.toString()}: [${r.status} ${r.statusText}] ${t}`,r.status,r.statusText,n)}function _j(r){const e={};if(r?.signal!==void 0||r?.timeout>=0){const t=new AbortController;r?.timeout>=0&&setTimeout(()=>t.abort(),r.timeout),r?.signal&&r.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function Q_(r){return r.text=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),$f(r.candidates[0]))throw new $l(`${ca(r)}`,r);return vj(r)}else if(r.promptFeedback)throw new $l(`Text not available. ${ca(r)}`,r);return""},r.functionCall=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),$f(r.candidates[0]))throw new $l(`${ca(r)}`,r);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),TT(r)[0]}else if(r.promptFeedback)throw new $l(`Function call not available. ${ca(r)}`,r)},r.functionCalls=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),$f(r.candidates[0]))throw new $l(`${ca(r)}`,r);return TT(r)}else if(r.promptFeedback)throw new $l(`Function call not available. ${ca(r)}`,r)},r}function vj(r){var e,t,n,s;const o=[];if(!((t=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(n=r.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)c.text&&o.push(c.text),c.executableCode&&o.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&o.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function TT(r){var e,t,n,s;const o=[];if(!((t=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(n=r.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)c.functionCall&&o.push(c.functionCall);if(o.length>0)return o}const bj=[th.RECITATION,th.SAFETY,th.LANGUAGE];function $f(r){return!!r.finishReason&&bj.includes(r.finishReason)}function ca(r){var e,t,n;let s="";if((!r.candidates||r.candidates.length===0)&&r.promptFeedback)s+="Response was blocked",!((e=r.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${r.promptFeedback.blockReason}`),!((t=r.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(s+=`: ${r.promptFeedback.blockReasonMessage}`);else if(!((n=r.candidates)===null||n===void 0)&&n[0]){const o=r.candidates[0];$f(o)&&(s+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(s+=`: ${o.finishMessage}`))}return s}function wh(r){return this instanceof wh?(this.v=r,this):new wh(r)}function wj(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),s,o=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(v){n[v]&&(s[v]=function(w){return new Promise(function(T,N){o.push([v,w,T,N])>1||u(v,w)})})}function u(v,w){try{d(n[v](w))}catch(T){y(o[0][3],T)}}function d(v){v.value instanceof wh?Promise.resolve(v.value.v).then(f,g):y(o[0][2],v)}function f(v){u("next",v)}function g(v){u("throw",v)}function y(v,w){v(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}const ST=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function xj(r){const e=r.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=Sj(e),[n,s]=t.tee();return{stream:Tj(n),response:Ej(s)}}async function Ej(r){const e=[],t=r.getReader();for(;;){const{done:n,value:s}=await t.read();if(n)return Q_(Aj(e));e.push(s)}}function Tj(r){return wj(this,arguments,function*(){const t=r.getReader();for(;;){const{value:n,done:s}=yield wh(t.read());if(s)break;yield yield wh(Q_(n))}})}function Sj(r){const e=r.getReader();return new ReadableStream({start(n){let s="";return o();function o(){return e.read().then(({value:c,done:u})=>{if(u){if(s.trim()){n.error(new Vn("Failed to parse stream"));return}n.close();return}s+=c;let d=s.match(ST),f;for(;d;){try{f=JSON.parse(d[1])}catch{n.error(new Vn(`Error parsing JSON response: "${d[1]}"`));return}n.enqueue(f),s=s.substring(d[0].length),d=s.match(ST)}return o()}).catch(c=>{let u=c;throw u.stack=c.stack,u.name==="AbortError"?u=new KI("Request aborted when reading from the stream"):u=new Vn("Error reading from the stream"),u})}}})}function Aj(r){const e=r[r.length-1],t={promptFeedback:e?.promptFeedback};for(const n of r){if(n.candidates){let s=0;for(const o of n.candidates)if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:s}),t.candidates[s].citationMetadata=o.citationMetadata,t.candidates[s].groundingMetadata=o.groundingMetadata,t.candidates[s].finishReason=o.finishReason,t.candidates[s].finishMessage=o.finishMessage,t.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){t.candidates[s].content||(t.candidates[s].content={role:o.content.role||"user",parts:[]});const c={};for(const u of o.content.parts)u.text&&(c.text=u.text),u.functionCall&&(c.functionCall=u.functionCall),u.executableCode&&(c.executableCode=u.executableCode),u.codeExecutionResult&&(c.codeExecutionResult=u.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),t.candidates[s].content.parts.push(c)}s++}n.usageMetadata&&(t.usageMetadata=n.usageMetadata)}return t}async function YI(r,e,t,n){const s=await Hh(e,Fo.STREAM_GENERATE_CONTENT,r,!0,JSON.stringify(t),n);return xj(s)}async function QI(r,e,t,n){const o=await(await Hh(e,Fo.GENERATE_CONTENT,r,!1,JSON.stringify(t),n)).json();return{response:Q_(o)}}function WI(r){if(r!=null){if(typeof r=="string")return{role:"system",parts:[{text:r}]};if(r.text)return{role:"system",parts:[r]};if(r.parts)return r.role?r:{role:"system",parts:r.parts}}}function xh(r){let e=[];if(typeof r=="string")e=[{text:r}];else for(const t of r)typeof t=="string"?e.push({text:t}):e.push(t);return Ij(e)}function Ij(r){const e={role:"user",parts:[]},t={role:"function",parts:[]};let n=!1,s=!1;for(const o of r)"functionResponse"in o?(t.parts.push(o),s=!0):(e.parts.push(o),n=!0);if(n&&s)throw new Vn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!s)throw new Vn("No content is provided for sending chat message.");return n?e:t}function Rj(r,e){var t;let n={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const s=r.generateContentRequest!=null;if(r.contents){if(s)throw new wa("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=r.contents}else if(s)n=Object.assign(Object.assign({},n),r.generateContentRequest);else{const o=xh(r);n.contents=[o]}return{generateContentRequest:n}}function AT(r){let e;return r.contents?e=r:e={contents:[xh(r)]},r.systemInstruction&&(e.systemInstruction=WI(r.systemInstruction)),e}function Cj(r){return typeof r=="string"||Array.isArray(r)?{content:xh(r)}:r}const IT=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Nj={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function kj(r){let e=!1;for(const t of r){const{role:n,parts:s}=t;if(!e&&n!=="user")throw new Vn(`First content should be with role 'user', got ${n}`);if(!pT.includes(n))throw new Vn(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(pT)}`);if(!Array.isArray(s))throw new Vn("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Vn("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of s)for(const d of IT)d in u&&(o[d]+=1);const c=Nj[n];for(const u of IT)if(!c.includes(u)&&o[u]>0)throw new Vn(`Content with role '${n}' can't contain '${u}' part`);e=!0}}function RT(r){var e;if(r.candidates===void 0||r.candidates.length===0)return!1;const t=(e=r.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const n of t.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}const CT="SILENT_ERROR";class Dj{constructor(e,t,n,s={}){this.model=t,this.params=n,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n?.history&&(kj(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var n,s,o,c,u,d;await this._sendPromise;const f=xh(e),g={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t);let v;return this._sendPromise=this._sendPromise.then(()=>QI(this._apiKey,this.model,g,y)).then(w=>{var T;if(RT(w.response)){this._history.push(f);const N=Object.assign({parts:[],role:"model"},(T=w.response.candidates)===null||T===void 0?void 0:T[0].content);this._history.push(N)}else{const N=ca(w.response);N&&console.warn(`sendMessage() was unsuccessful. ${N}. Inspect response object for details.`)}v=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,v}async sendMessageStream(e,t={}){var n,s,o,c,u,d;await this._sendPromise;const f=xh(e),g={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t),v=YI(this._apiKey,this.model,g,y);return this._sendPromise=this._sendPromise.then(()=>v).catch(w=>{throw new Error(CT)}).then(w=>w.response).then(w=>{if(RT(w)){this._history.push(f);const T=Object.assign({},w.candidates[0].content);T.role||(T.role="model"),this._history.push(T)}else{const T=ca(w);T&&console.warn(`sendMessageStream() was unsuccessful. ${T}. Inspect response object for details.`)}}).catch(w=>{w.message!==CT&&console.error(w)}),v}}async function Oj(r,e,t,n){return(await Hh(e,Fo.COUNT_TOKENS,r,!1,JSON.stringify(t),n)).json()}async function Mj(r,e,t,n){return(await Hh(e,Fo.EMBED_CONTENT,r,!1,JSON.stringify(t),n)).json()}async function Pj(r,e,t,n){const s=t.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await Hh(e,Fo.BATCH_EMBED_CONTENTS,r,!1,JSON.stringify({requests:s}),n)).json()}class NT{constructor(e,t,n={}){this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=WI(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var n;const s=AT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return QI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),o)}async generateContentStream(e,t={}){var n;const s=AT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return YI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),o)}startChat(e){var t;return new Dj(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const n=Rj(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return Oj(this.apiKey,this.model,n,s)}async embedContent(e,t={}){const n=Cj(e),s=Object.assign(Object.assign({},this._requestOptions),t);return Mj(this.apiKey,this.model,n,s)}async batchEmbedContents(e,t={}){const n=Object.assign(Object.assign({},this._requestOptions),t);return Pj(this.apiKey,this.model,e,n)}}class Lj{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Vn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new NT(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new wa("Cached content must contain a `name` field.");if(!e.model)throw new wa("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const c of s)if(t?.[c]&&e[c]&&t?.[c]!==e[c]){if(c==="model"){const u=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,d=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(u===d)continue}throw new wa(`Different value for "${c}" specified in modelParams (${t[c]}) and cachedContent (${e[c]})`)}const o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new NT(this.apiKey,o,n)}}async function XI(r,e="tr",t=null){const n=Array.isArray(r)?r:[r],s=3,o=2e3;let c;for(let u=0;u<=s;u++)try{return u>0&&(console.log(`Attempt ${u+1} of ${s+1}...`),await new Promise(d=>setTimeout(d,o))),await Vj(n,e,t)}catch(d){if(c=d,!(d.message.includes("503")||d.message.includes("429")||d.message.includes("overloaded")||d.message.includes("Server Error")))throw d;console.warn(`Analysis attempt ${u+1} failed:`,d.message)}throw c}async function Vj(r,e,t){let n="";t&&t.trim().length>0&&(n=`The user identifies this plant as "${t}". Use this as context but verify visually.`);const s=`
    You are an expert Phytopathologist. Analyze the provided plant image(s).
    ${n}
    OUTPUT MUST BE IN ${e==="en"?"ENGLISH":"TURKISH"}.

    PROTOCOL:
    1. If the image is not a plant, return {"status": "error", "error": "NOT_PLANT"}
    2. If the ailment is unclear, the image is blurry, or you need a closer look (macro shot) to be at least 70% confident, return:
       {"status": "needs_details", "message": "Please take a closer photo of the affected leaf or area."}
    3. If confident, return a valid JSON object:
    {
        "status": "success",
        "disease_name": "Disease Name",
        "latin_name": "Latin Name",
        "confidence": 90,
        "urgency": 50,
        "spread_risk": 40,
        "is_treatable": true, // false if plant is dead, rotten beyond saving, or abiotic stress that cannot be reversed
        "description": "Short description (max 2 sentences).",
        "treatment_steps": ["Step 1", "Step 2", "Step 3"], // Only if is_treatable is true
        "preventive_measures": ["Tip 1", "Tip 2"] // If not treatable or general advice
    }
    
    Return ONLY valid raw JSON (no markdown, no backticks).
  `,o=[{text:s}];r.forEach(u=>{if(!u)return;const d=u.includes(",")?u.split(",")[1]:u;o.push({inline_data:{mime_type:"image/jpeg",data:d}})});const c={contents:[{parts:o}],safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_LOW_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]};try{const u=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!u.ok){const f=await u.text();throw console.error("Backend Error Response:",f),f.trim().startsWith("<")||f.includes("A server error")?new Error("Backend function not available. Please verify server status."):new Error(`Server Error: ${u.status} ${u.statusText}`)}const d=await u.json();if(d.error)throw new Error(d.error.message||"API Connection Error");if(d.plant_name||d.status)return d;if(d.candidates&&d.candidates[0].content){const g=d.candidates[0].content.parts[0].text.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(g)}throw new Error("Invalid response structure from AI")}catch(u){console.warn("Backend analysis failed, attempting client-side fallback...",u);const d="AIzaSyC2aYSoTNOkcmHd-SwQlUI1TNPnZAcAqqE";try{const g=new Lj(d).getGenerativeModel({model:"gemini-2.5-flash"}),v=[s];r.forEach(V=>{if(!V)return;const H=V.includes(",")?V.split(",")[1]:V;v.push({inlineData:{data:H,mimeType:"image/jpeg"}})});const P=(await(await g.generateContent(v)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(P)}catch(f){throw console.error("Fallback also failed:",f),new Error(f.message||"AI Diagnosis completely failed.")}}}const vc="analyses";async function JI(r,e,t,n,s=!1){try{const o=t.main||null,c=t.macro||null;return o&&o.length>9e5&&console.warn("Main image is very large for Firestore!"),(await Fh(zn(qe,vc),{userId:r,plantType:e,mainImage:o,macroImage:c,result:n,isPublic:s,status:"active",treatmentDuration:n.treatment_duration||"1 Week",checkupFrequency:n.checkup_frequency||7,createdAt:ar(),nextCheckup:new Date(Date.now()+(n.checkup_frequency||7)*24*60*60*1e3)})).id}catch(o){throw console.error("Error saving analysis:",o),o}}async function ZI(r){try{const e=xs(zn(qe,vc),Ia("userId","==",r)),n=(await Ca(e)).docs.map(async o=>{const c=o.data();let u=[];try{u=(await Ca(zn(qe,vc,o.id,"updates"))).docs.map(f=>f.data()).sort((f,g)=>(g.createdAt?.seconds||0)-(f.createdAt?.seconds||0))}catch(d){console.log("No updates found or error",d)}return{id:o.id,...c,updates:u}});return(await Promise.all(n)).sort((o,c)=>{const u=o.createdAt?.seconds||0;return(c.createdAt?.seconds||0)-u})}catch(e){return console.error("Error fetching analyses:",e),[]}}async function eR(r){try{const e=xs(zn(qe,"posts"),Ia("relatedAnalysisId","==",r)),t=await Ca(e);if(!t.empty){const n=t.docs.map(s=>Em(s.ref));await Promise.all(n)}return await Em(kt(qe,vc,r)),!0}catch(e){throw console.error("Error deleting analysis:",e),e}}async function tR(r,e){try{const t=kt(qe,vc,r);await wr(t,{...e,updatedAt:ar()})}catch(t){throw console.error("Error updating analysis:",t),t}}async function nR(r,e,t){try{let n=null;e.image&&(typeof e.image=="string"&&e.image.startsWith("data:")?n=e.image:console.warn("Received File object but Storage is disabled. Skipping image."));const s=Fh(zn(qe,"posts"),{userId:r,authorName:e.authorName||"Gardener",title:e.title||"",content:e.content,image:n,plantType:e.plantType||"Unknown",likes:[],comments:[],createdAt:ar()}),o=new Promise(c=>setTimeout(()=>c("timeout"),5e3));return await Promise.race([s,o]),!0}catch(n){throw console.error("Error creating post:",n),n}}async function rR(r,e,t,n="Gardener",s=null){try{const o=`${t} - ${e.result.disease_name}`;let c=`Analiz Sonucu: ${e.result.disease_name}

${e.result.description}`;return e.result.is_treatable===!1?e.result.preventive_measures&&e.result.preventive_measures.length>0&&(c+=`

 Koruyucu nlemler:
`+e.result.preventive_measures.map(u=>` ${u}`).join(`
`)):e.result.treatment_steps&&e.result.treatment_steps.length>0&&(c+=`

 Tedavi Admlar:
`+e.result.treatment_steps.map(u=>` ${u}`).join(`
`)),await Fh(zn(qe,"posts"),{userId:e.userId,authorName:n,userAvatar:s,title:o,content:c,image:e.mainImage,plantType:t,likes:[],comments:[],createdAt:ar(),relatedAnalysisId:r}),await tR(r,{isPublic:!0}),!0}catch(o){throw console.error("Error sharing to community:",o),o}}async function iR(r,e,t,n=null){try{return await Fh(zn(qe,vc,r,"updates"),{imageUrl:e||null,note:t,aiAnalysis:n,createdAt:ar()}),!0}catch(s){throw console.error("Error adding feedback:",s),s}}async function sR(r){try{const e=kt(qe,"posts",r),t=await Ra(e);if(!t.exists())return!1;const n=t.data();if(n.relatedAnalysisId)try{const s=kt(qe,"analyses",n.relatedAnalysisId);await wr(s,{isPublic:!1})}catch(s){console.warn("Could not sync analysis status (might be deleted)",s)}return await Em(e),!0}catch(e){throw console.error("Error deleting post:",e),e}}async function aR(r,e){try{const t=kt(qe,"posts",r),n=await Ra(t);if(!n.exists())return;(n.data().likes||[]).includes(e)?await wr(t,{likes:SI(e)}):await wr(t,{likes:K_(e)})}catch(t){throw console.error("Error toggling like:",t),t}}async function oR(r,e,t,n){try{const s=kt(qe,"posts",r),o={userId:e,userName:t,text:n,createdAt:Date.now()};return await wr(s,{comments:K_(o)}),!0}catch(s){throw console.error("Error adding comment:",s),s}}async function lR(r,e){try{const t=kt(qe,"posts",r);return await wr(t,{...e,updatedAt:ar()}),!0}catch(t){throw console.error("Error updating post:",t),t}}async function jj(r,e,t,n){try{if(r===e)throw new Error("Cannot start chat with yourself.");const s=[r,e].sort(),o=`${s[0]}_${s[1]}`,c=kt(qe,"chats",o);return(await Ra(c)).exists()?await wr(c,{[`participantData.${r}`]:n}):await _c(c,{participants:[r,e],participantData:{[e]:t,[r]:n},createdAt:ar(),updatedAt:ar(),lastMessage:""}),o}catch(s){throw console.error("Error starting chat:",s),s}}async function cR(r,e,t){try{const n=await fetch("/api/analyze_progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldImage:r,newImage:e,diseaseName:t,language:"tr"})});if(!n.ok)throw new Error("Progress analysis failed");return await n.json()}catch(n){throw console.error("Error analyzing progress:",n),n}}const Uj=Object.freeze(Object.defineProperty({__proto__:null,addComment:oR,addFeedbackUpdate:iR,analyzePlantProgress:cR,createPost:nR,deleteAnalysis:eR,deletePost:sR,getUserAnalyses:ZI,saveAnalysis:JI,shareAnalysisToCommunity:rR,startChat:jj,toggleLike:aR,updateAnalysisStatus:tR,updatePost:lR},Symbol.toStringTag,{value:"Module"}));function zj({result:r,onReset:e}){const{t}=Bn();return r?r.error==="NOT_PLANT"?b.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden p-8 text-center",children:[b.jsx("div",{className:"mx-auto bg-red-100 dark:bg-red-900/30 w-16 h-16 rounded-full flex items-center justify-center mb-4",children:b.jsx(D0,{className:"w-8 h-8 text-red-600 dark:text-red-500"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Could not identify plant"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please ensure the photo contains a clear view of a plant leaf or stem."}),b.jsx("button",{onClick:e,className:"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-xl font-medium transition-colors",children:"Try Again"})]}):b.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fade-in",children:[b.jsx("div",{className:"bg-green-600 text-white p-6",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"text-3xl font-bold",children:r.disease_name}),b.jsx("p",{className:"opacity-90 italic text-lg",children:r.latin_name})]}),b.jsxs("div",{className:"flex flex-col items-end",children:[b.jsxs("div",{className:"text-2xl font-bold",children:[r.confidence,"%"]}),b.jsx("div",{className:"text-xs uppercase opacity-75",children:t("confidence")})]})]})}),b.jsxs("div",{className:"p-6 space-y-6",children:[b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4",children:[b.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-xl border border-orange-100 dark:border-orange-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-orange-700 dark:text-orange-500 font-semibold",children:[b.jsx(Am,{className:"w-5 h-5"}),b.jsx("span",{children:t("urgency")})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-orange-600 h-2.5 rounded-full",style:{width:`${r.urgency}%`}})})]}),b.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-blue-700 dark:text-blue-500 font-semibold",children:[b.jsx(zi,{className:"w-5 h-5"}),b.jsx("span",{children:t("spread_risk")})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${r.spread_risk}%`}})})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t("description")}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:r.description})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:r.is_treatable===!1?t("prevention_tips")||"Koruyucu nlemler & Tavsiyeler":t("treatment")}),r.is_treatable===!1&&b.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-xl text-sm border border-red-100 dark:border-red-900/30 flex gap-3",children:[b.jsx(D0,{className:"w-5 h-5 flex-shrink-0"}),b.jsx("p",{children:t("plant_not_recoverable")||"Bu bitki iin tedavi uygulanamayabilir veya kurtarlmas zor olabilir. Aadaki nlemler ile dier bitkilerinizi koruyabilirsiniz."})]}),b.jsx("ul",{className:"space-y-3",children:(r.is_treatable===!1?r.preventive_measures:r.treatment_steps)?.map((n,s)=>b.jsxs("li",{className:"flex gap-3",children:[b.jsx(pg,{className:`w-6 h-6 flex-shrink-0 ${r.is_treatable===!1?"text-orange-500":"text-green-600"}`}),b.jsx("span",{className:"text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg flex-1",children:n})]},s))})]}),b.jsx("div",{className:"pt-4 flex gap-4",children:b.jsx("button",{onClick:e,className:"flex-1 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white py-3 rounded-xl font-medium transition-colors",children:t("new_scan")})})]})]}):null}function Bj({isOpen:r,onClose:e,onCapture:t}){const n=$.useRef(null),s=$.useRef(null),[o,c]=$.useState(null),[u,d]=$.useState(""),{t:f}=Bn();$.useEffect(()=>(r?g():y(),()=>y()),[r]);const g=async()=>{d("");try{const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});c(w),n.current&&(n.current.srcObject=w)}catch(w){console.error("Camera Error:",w),d(f("camera_permission_denied")||"Camera access denied or not available.")}},y=()=>{o&&(o.getTracks().forEach(w=>w.stop()),c(null))},v=()=>{if(n.current&&s.current){const w=n.current,T=s.current;T.width=w.videoWidth,T.height=w.videoHeight,T.getContext("2d").drawImage(w,0,0,T.width,T.height);const P=T.toDataURL("image/jpeg",.9);t(P),e()}};return r?b.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 flex items-center justify-center p-4 animate-fade-in",children:b.jsxs("div",{className:"relative w-full max-w-lg bg-black rounded-3xl overflow-hidden shadow-2xl border border-gray-800",children:[b.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-10 bg-gradient-to-b from-black/60 to-transparent",children:[b.jsx("span",{className:"text-white font-medium",children:f("take_photo")}),b.jsx("button",{onClick:e,className:"p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors",children:b.jsx(Bo,{className:"w-6 h-6"})})]}),b.jsx("div",{className:"relative aspect-[3/4] bg-gray-900 flex items-center justify-center",children:u?b.jsxs("div",{className:"text-center p-6 text-red-400",children:[b.jsx(OI,{className:"w-12 h-12 mx-auto mb-3 opacity-80"}),b.jsx("p",{children:u}),b.jsx("button",{onClick:g,className:"mt-4 px-4 py-2 bg-gray-800 rounded-lg text-white text-sm hover:bg-gray-700",children:f("retry")||"Retry"})]}):b.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})}),b.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 flex justify-center items-center bg-gradient-to-t from-black/80 to-transparent",children:!u&&b.jsx("button",{onClick:v,className:"group relative",children:b.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-white flex items-center justify-center transition-transform group-active:scale-95",children:b.jsx("div",{className:"w-16 h-16 bg-white rounded-full"})})})}),b.jsx("canvas",{ref:s,className:"hidden"})]})}):null}function Fj(){const{t:r,i18n:e}=Bn(),{currentUser:t}=si(),n=Es(),s=xr(),{addToast:o}=Oa(),c=$.useRef(null),[u,d]=$.useState("landing"),[f,g]=$.useState(""),[y,v]=$.useState({main:null,macro:null}),[w,T]=$.useState(!1),[N,P]=$.useState(null),[V,H]=$.useState(!1),[B,q]=$.useState(!1);$.useEffect(()=>{s.state?.restoredResult&&(P(s.state.restoredResult),d("result"),s.state?.restoredImages&&(v(s.state.restoredImages),g(s.state.restoredPlantType||"")))},[s.state]);const K=()=>{u==="input_type"&&d("capture_main")},z=()=>{g(""),d("capture_main")},O=()=>{c.current&&(c.current.value="",c.current.click())},x=ee=>{ee&&I(ee),q(!1)},S=async ee=>{const F=ee.target.files?.[0];if(!F)return;const Y=new FileReader;Y.onloadend=()=>{const ie=Y.result;I(ie)},Y.readAsDataURL(F)},I=async ee=>{u==="capture_main"?(v(F=>({...F,main:ee})),await C(ee)):u==="capture_macro"&&(v(F=>({...F,macro:ee})),await C([y.main,ee]))},C=async(ee,F)=>{T(!0),d("analyzing"),H(!1);try{const Y=await XI(ee,e.language,f);if(Y.status==="needs_details")o(r("need_macro_photo")||"I need a closer look. Please take a macro photo.","info"),d("capture_macro");else{if(Y.status==="error")throw new Error(Y.error);P(Y),d("result")}}catch(Y){console.error(Y);let ie=Y.message||r("error_diagnosis_failed")||"Diagnosis failed.";ie.includes("NOT_PLANT")?ie=r("error_not_plant"):(ie.includes("503")||ie.includes("overloaded"))&&(ie=r("error_server_busy")),o(ie,"error"),d("capture_main")}finally{T(!1)}},L=async()=>{if(t&&!V)try{const ee=await JI(t.uid,f,y,N);H(!0),o(r("treatment_started")||"Tedavi sreci balatld!","success"),setTimeout(()=>{n("/analyses",{state:{showTreatmentGuide:!0,newAnalysisId:ee}})},500)}catch(ee){console.error("Manual save failed:",ee),o((r("save_fail")||"Failed to save analysis:")+" "+ee.message,"error")}},k=()=>{n("/login",{state:{pendingResult:N,pendingImages:y,pendingPlantType:f,returnUrl:"/"}})},G=()=>{v({main:null,macro:null}),g(""),P(null),H(!1),d("input_type"),c.current&&(c.current.value="")},ne=()=>b.jsxs("div",{className:"flex flex-col items-center w-full animate-fade-in relative overflow-hidden",children:[b.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0 opacity-30 dark:opacity-10",children:[b.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-green-400 rounded-full mix-blend-multiply filter blur-[100px] animate-float opacity-70"}),b.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-emerald-300 rounded-full mix-blend-multiply filter blur-[120px] animate-float delay-100 opacity-70"})]}),b.jsxs("div",{className:"text-center max-w-4xl py-20 px-4 z-10",children:[b.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-2 rounded-full bg-white/50 dark:bg-gray-800/50 backdrop-blur-md border border-white/20 dark:border-gray-700/50 shadow-sm mb-8 animate-fade-in",children:[b.jsx(zV,{className:"w-4 h-4 text-amber-500"}),b.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent font-bold text-sm tracking-wide",children:r("ai_powered_v2")||"POWERED BY GEMINI AI"})]}),b.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-gray-900 dark:text-white mb-6 leading-tight tracking-tight animate-slide-up",children:[r("hero_title_1")||"Heal your plants with"," ",b.jsx("br",{}),b.jsx("span",{className:"text-gradient drop-shadow-sm",children:r("hero_title_highlight")||"AI Precision"})]}),b.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-2xl mx-auto leading-relaxed animate-slide-up delay-100",children:r("hero_desc_v2")||"Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo."}),b.jsxs("button",{onClick:()=>d("input_type"),className:"group relative bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-5 px-12 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all text-xl flex items-center justify-center gap-3 mx-auto animate-slide-up delay-200",children:[b.jsx("div",{className:"absolute inset-0 rounded-full bg-white/20 group-hover:scale-110 transition-transform opacity-0 group-hover:opacity-100 duration-500 blur-lg"}),b.jsxs("span",{className:"relative flex items-center gap-3",children:[b.jsx(So,{className:"w-6 h-6"}),r("start_diagnosis")]})]})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-6xl px-4 z-10 mb-20 animate-slide-up delay-300",children:[{title:r("feature_1_title")||"Instant Analysis",desc:r("feature_1_desc")||"Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",icon:tj,color:"from-yellow-400 to-orange-500"},{title:r("feature_2_title")||"Smart Interactions",desc:r("feature_2_desc")||"The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",icon:FL,color:"from-blue-400 to-indigo-500"},{title:r("feature_3_title")||"Verified Treatments",desc:r("feature_3_desc")||"Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",icon:jV,color:"from-green-400 to-emerald-500"}].map((ee,F)=>{const Y=ee.icon;return b.jsxs("div",{className:"glass-card p-8 hover:scale-[1.02] transition-transform duration-300 group",children:[b.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 bg-gradient-to-br ${ee.color} shadow-lg text-white transform group-hover:rotate-6 transition-transform`,children:b.jsx(Y,{className:"w-7 h-7"})}),b.jsx("h3",{className:"font-bold text-2xl mb-3 text-gray-900 dark:text-white",children:ee.title}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:ee.desc})]},F)})}),b.jsx("div",{className:"w-full max-w-6xl px-4 z-10 mb-20",children:b.jsxs("div",{className:"glass p-10 rounded-3xl text-center md:text-left flex flex-col md:flex-row items-center gap-10",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:r("summary_title")||"Your Personal Pocket Botanist"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-lg leading-relaxed",children:r("summary_desc")||"Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs."}),b.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start",children:[b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(Am,{className:"w-4 h-4 text-green-500"})," 95% Accuracy"]}),b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(hT,{className:"w-4 h-4 text-blue-500"})," Macro Support"]})]})]}),b.jsx("div",{className:"w-full md:w-1/3 flex justify-center",children:b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full blur-2xl opacity-20 animate-pulse"}),b.jsx("img",{src:"/placeholder-plant.png",onError:ee=>{ee.target.style.display="none"},className:"relative w-48 h-48 object-contain drop-shadow-2xl",alt:""}),b.jsx(zi,{className:"w-48 h-48 text-green-600 dark:text-green-400 drop-shadow-2xl relative z-10"})]})})]})})]}),M=()=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-4 rounded-full mb-6 text-green-600 dark:text-green-400",children:b.jsx(zi,{className:"w-12 h-12"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-center",children:r("scan_step_1")}),b.jsx("p",{className:"text-gray-500 mb-6 text-center",children:r("what_plant_question")}),b.jsx("input",{type:"text",value:f,onChange:ee=>g(ee.target.value),placeholder:r("what_plant_placeholder"),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 mb-4 focus:ring-2 focus:ring-green-500 outline-none"}),b.jsxs("button",{onClick:K,disabled:!f.trim(),className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[r("next_step")," ",b.jsx(kI,{className:"w-4 h-4"})]}),b.jsx("button",{onClick:z,className:"mt-4 text-gray-500 text-sm hover:underline",children:r("skip")})]}),D=ee=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:ee?r("close_up_photo")||"Close-up Photo":r("scan_step_2")}),b.jsxs("div",{className:"w-full space-y-4",children:[b.jsxs("button",{onClick:()=>q(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-5 px-10 rounded-2xl shadow-xl flex items-center justify-center gap-4 text-xl transition-transform active:scale-95",children:[b.jsx(So,{className:"w-8 h-8"}),b.jsx("span",{children:r("open_camera")||"Open Camera"})]}),b.jsxs("button",{onClick:O,className:"w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-bold py-4 px-10 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-md flex items-center justify-center gap-4 text-lg transition-transform active:scale-95",children:[b.jsx(LI,{className:"w-6 h-6"}),b.jsx("span",{children:r("upload_gallery")||"Select from Gallery"})]})]}),b.jsx("button",{onClick:()=>d("input_type"),className:"mt-6 text-gray-500 underline",children:r("back")})]}),te=()=>b.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[b.jsxs("div",{className:"relative w-64 h-64 mb-8 rounded-2xl overflow-hidden shadow-2xl border-4 border-green-500",children:[y.main&&b.jsx("img",{src:y.main,alt:"Analyzing",className:"w-full h-full object-cover opacity-50"}),b.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:b.jsx(Ao,{className:"w-16 h-16 text-white animate-spin"})})]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white animate-bounce",children:r("analyzing")||"Analyzing..."}),b.jsx("p",{className:"text-gray-500 mt-2",children:r("ai_thinking")||"AI Botanist is thinking..."})]}),W=()=>b.jsxs("div",{className:"w-full flex gap-8 flex-col md:flex-row items-start animate-fade-in relative justify-center",children:[b.jsx("div",{className:"w-full md:w-1/3 flex-shrink-0 z-0",children:b.jsxs("div",{className:"sticky top-4",children:[b.jsx("img",{src:y.main,alt:"Analyzed Plant",className:"w-full rounded-2xl shadow-lg border-2 border-green-100 dark:border-green-900"}),y.macro&&b.jsx("img",{src:y.macro,alt:"Macro Detail",className:"w-24 h-24 rounded-lg shadow border border-white absolute bottom-4 right-4"}),t&&b.jsx("button",{onClick:L,disabled:V,className:`mt-4 w-full font-bold py-4 px-6 rounded-xl border shadow-lg transition-transform hover:-translate-y-0.5 flex items-center justify-center gap-3 ${V?"bg-gray-100 text-gray-500 border-gray-200 cursor-default":"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white border-transparent"}`,children:V?b.jsxs(b.Fragment,{children:[b.jsx(pg,{className:"w-6 h-6"}),b.jsx("span",{children:r("saved")||"Kaydedildi"})]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"bg-white/20 p-1 rounded-full",children:b.jsx(FI,{className:"w-5 h-5"})}),b.jsx("span",{className:"text-lg",children:N?.is_treatable===!1?r("save_info")||"Bilgiyi Kaydet":r("start_treatment")||"Tedaviye Bala"})]})}),b.jsxs("button",{onClick:G,className:"mt-4 w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-semibold py-3 px-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-all",children:[r("take_photo")," (Reset)"]})]})}),b.jsxs("div",{className:"w-full md:w-2/3 relative",children:[b.jsx("div",{className:`transition-all duration-500 ${t?"":"filter blur-md select-none pointer-events-none opacity-50"}`,children:b.jsx(zj,{result:N,onReset:G})}),!t&&b.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 backdrop-blur-[2px] rounded-2xl",children:b.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 p-8 rounded-3xl shadow-2xl text-center max-w-sm border border-white/20 mx-4 transform transition-all hover:scale-105",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:b.jsx(hT,{className:"w-8 h-8 text-green-600"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:r("login_to_view")}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm",children:r("login_blur_text")}),b.jsx("button",{onClick:k,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg hover:shadow-green-500/25 active:scale-95",children:r("login")})]})})]})]});return b.jsxs("div",{className:`flex flex-col w-full max-w-7xl mx-auto p-4 lg:p-8 ${u==="result"?"items-start":"items-center justify-center min-h-full"}`,children:[b.jsx("input",{type:"file",accept:"image/*",ref:c,onChange:S,className:"hidden"}),b.jsx(Bj,{isOpen:B,onClose:()=>q(!1),onCapture:x}),u==="landing"?ne():b.jsxs(b.Fragment,{children:[u!=="result"&&b.jsxs("button",{onClick:()=>d("landing"),className:"self-start mb-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 flex items-center gap-2",children:[" ",r("back")]}),u==="input_type"&&M(),u==="capture_main"&&D(!1),u==="capture_macro"&&D(!0),u==="analyzing"&&te(),u==="result"&&W()]})]})}const Sf=43200,kT=1440,DT=Symbol.for("constructDateFrom");function W_(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&DT in r?r[DT](e):r instanceof Date?new r.constructor(e):new Date(e)}function Na(r,e){return W_(r,r)}let Hj={};function qj(){return Hj}function OT(r){const e=Na(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function X_(r,...e){const t=W_.bind(null,r||e.find(n=>typeof n=="object"));return e.map(t)}function Gf(r,e){const t=+Na(r)-+Na(e);return t<0?-1:t>0?1:t}function $j(r){return W_(r,Date.now())}function Gj(r,e,t){const[n,s]=X_(t?.in,r,e),o=n.getFullYear()-s.getFullYear(),c=n.getMonth()-s.getMonth();return o*12+c}function Kj(r){return e=>{const n=(r?Math[r]:Math.trunc)(e);return n===0?0:n}}function Yj(r,e){return+Na(r)-+Na(e)}function Qj(r,e){const t=Na(r);return t.setHours(23,59,59,999),t}function Wj(r,e){const t=Na(r),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Xj(r,e){const t=Na(r);return+Qj(t)==+Wj(t)}function Jj(r,e,t){const[n,s,o]=X_(t?.in,r,r,e),c=Gf(s,o),u=Math.abs(Gj(s,o));if(u<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-c*u);let d=Gf(s,o)===-c;Xj(n)&&u===1&&Gf(n,o)===1&&(d=!1);const f=c*(u-+d);return f===0?0:f}function Zj(r,e,t){const n=Yj(r,e)/1e3;return Kj(t?.roundingMethod)(n)}const eU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tU=(r,e,t)=>{let n;const s=eU[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function ic(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const nU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},iU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sU={date:ic({formats:nU,defaultWidth:"full"}),time:ic({formats:rU,defaultWidth:"full"}),dateTime:ic({formats:iU,defaultWidth:"full"})},aU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},oU=(r,e,t,n)=>aU[r];function Ai(r){return(e,t)=>{const n=t?.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const c=r.defaultFormattingWidth||r.defaultWidth,u=t?.width?String(t.width):c;s=r.formattingValues[u]||r.formattingValues[c]}else{const c=r.defaultWidth,u=t?.width?String(t.width):r.defaultWidth;s=r.values[u]||r.values[c]}const o=r.argumentCallback?r.argumentCallback(e):e;return s[o]}}const lU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},uU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},hU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mU=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},gU={ordinalNumber:mU,era:Ai({values:lU,defaultWidth:"wide"}),quarter:Ai({values:cU,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Ai({values:uU,defaultWidth:"wide"}),day:Ai({values:hU,defaultWidth:"wide"}),dayPeriod:Ai({values:dU,defaultWidth:"wide",formattingValues:fU,defaultFormattingWidth:"wide"})};function Ii(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],o=e.match(s);if(!o)return null;const c=o[0],u=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],d=Array.isArray(u)?yU(u,y=>y.test(c)):pU(u,y=>y.test(c));let f;f=r.valueCallback?r.valueCallback(d):d,f=t.valueCallback?t.valueCallback(f):f;const g=e.slice(c.length);return{value:f,rest:g}}}function pU(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function yU(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function uR(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],o=e.match(r.parsePattern);if(!o)return null;let c=r.valueCallback?r.valueCallback(o[0]):o[0];c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(s.length);return{value:c,rest:u}}}const _U=/^(\d+)(th|st|nd|rd)?/i,vU=/\d+/i,bU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},wU={any:[/^b/i,/^(a|c)/i]},xU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},EU={any:[/1/i,/2/i,/3/i,/4/i]},TU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},SU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},AU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},IU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},RU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},CU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},NU={ordinalNumber:uR({matchPattern:_U,parsePattern:vU,valueCallback:r=>parseInt(r,10)}),era:Ii({matchPatterns:bU,defaultMatchWidth:"wide",parsePatterns:wU,defaultParseWidth:"any"}),quarter:Ii({matchPatterns:xU,defaultMatchWidth:"wide",parsePatterns:EU,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Ii({matchPatterns:TU,defaultMatchWidth:"wide",parsePatterns:SU,defaultParseWidth:"any"}),day:Ii({matchPatterns:AU,defaultMatchWidth:"wide",parsePatterns:IU,defaultParseWidth:"any"}),dayPeriod:Ii({matchPatterns:RU,defaultMatchWidth:"any",parsePatterns:CU,defaultParseWidth:"any"})},yg={code:"en-US",formatDistance:tU,formatLong:sU,formatRelative:oU,localize:gU,match:NU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function kU(r,e,t){const n=qj(),s=t?.locale??n.locale??yg,o=2520,c=Gf(r,e);if(isNaN(c))throw new RangeError("Invalid time value");const u=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:c}),[d,f]=X_(t?.in,...c>0?[e,r]:[r,e]),g=Zj(f,d),y=(OT(f)-OT(d))/1e3,v=Math.round((g-y)/60);let w;if(v<2)return t?.includeSeconds?g<5?s.formatDistance("lessThanXSeconds",5,u):g<10?s.formatDistance("lessThanXSeconds",10,u):g<20?s.formatDistance("lessThanXSeconds",20,u):g<40?s.formatDistance("halfAMinute",0,u):g<60?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",1,u):v===0?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",v,u);if(v<45)return s.formatDistance("xMinutes",v,u);if(v<90)return s.formatDistance("aboutXHours",1,u);if(v<kT){const T=Math.round(v/60);return s.formatDistance("aboutXHours",T,u)}else{if(v<o)return s.formatDistance("xDays",1,u);if(v<Sf){const T=Math.round(v/kT);return s.formatDistance("xDays",T,u)}else if(v<Sf*2)return w=Math.round(v/Sf),s.formatDistance("aboutXMonths",w,u)}if(w=Jj(f,d),w<12){const T=Math.round(v/Sf);return s.formatDistance("xMonths",T,u)}else{const T=w%12,N=Math.trunc(w/12);return T<3?s.formatDistance("aboutXYears",N,u):T<9?s.formatDistance("overXYears",N,u):s.formatDistance("almostXYears",N+1,u)}}function J_(r,e){return kU(r,$j(r),e)}const DU={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},OU=(r,e,t)=>{let n;const s=DU[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?n+" sonra":n+" nce":n},MU={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},PU={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},LU={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},VU={date:ic({formats:MU,defaultWidth:"full"}),time:ic({formats:PU,defaultWidth:"full"}),dateTime:ic({formats:LU,defaultWidth:"full"})},jU={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},UU=(r,e,t,n)=>jU[r],zU={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},BU={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},FU={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},HU={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},qU={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},$U={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},GU=(r,e)=>Number(r)+".",KU={ordinalNumber:GU,era:Ai({values:zU,defaultWidth:"wide"}),quarter:Ai({values:BU,defaultWidth:"wide",argumentCallback:r=>Number(r)-1}),month:Ai({values:FU,defaultWidth:"wide"}),day:Ai({values:HU,defaultWidth:"wide"}),dayPeriod:Ai({values:qU,defaultWidth:"wide",formattingValues:$U,defaultFormattingWidth:"wide"})},YU=/^(\d+)(\.)?/i,QU=/\d+/i,WU={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},XU={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},JU={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},ZU={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},e9={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},t9={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},n9={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},r9={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},i9={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},s9={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},a9={ordinalNumber:uR({matchPattern:YU,parsePattern:QU,valueCallback:function(r){return parseInt(r,10)}}),era:Ii({matchPatterns:WU,defaultMatchWidth:"wide",parsePatterns:XU,defaultParseWidth:"any"}),quarter:Ii({matchPatterns:JU,defaultMatchWidth:"wide",parsePatterns:ZU,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Ii({matchPatterns:e9,defaultMatchWidth:"wide",parsePatterns:t9,defaultParseWidth:"any"}),day:Ii({matchPatterns:n9,defaultMatchWidth:"wide",parsePatterns:r9,defaultParseWidth:"any"}),dayPeriod:Ii({matchPatterns:i9,defaultMatchWidth:"any",parsePatterns:s9,defaultParseWidth:"any"})},Z_={code:"tr",formatDistance:OU,formatLong:VU,formatRelative:UU,localize:KU,match:a9,options:{weekStartsOn:1,firstWeekContainsDate:1}};function hR({post:r,onUserClick:e,onViewAnalysis:t}){const{t:n,i18n:s}=Bn(),{currentUser:o}=si(),c=s.language==="tr"?Z_:yg,[u,d]=$.useState(""),[f,g]=$.useState(!1),[y,v]=$.useState(!1),[w,T]=$.useState(null),[N,P]=$.useState(null),[V,H]=$.useState(null),[B,q]=$.useState(null),[K,z]=$.useState(!1),[O,x]=$.useState(r?.content||"");$.useEffect(()=>{(async()=>{if((!r.authorLevel||!r.authorXP)&&r.userId)try{const pe=kt(qe,"users",r.userId),Ee=await Ra(pe);if(Ee.exists()){const Ie=Ee.data();Ie.currentLevel&&(T(Ie.currentLevel),P(Ie.tierColor),H(Ie.tierName),q(Ie.totalXP))}}catch{}})()},[r.authorLevel,r.userId,r.authorXP]);const S=r.authorLevel||w,I=r.authorTierColor||N||"text-green-500",C=r.authorTierName||V||(s.language==="tr"?"Filiz":"Seedling"),L=r.authorXP!==void 0?r.authorXP:B||0,k=async()=>{try{await lR(r.id,{content:O}),z(!1)}catch{alert("Failed to update post")}};if(!r)return null;const G=o?.uid===r.userId,ne=r.likes&&o&&r.likes.includes(o.uid),M=r.likes?r.likes.length:0,D=r.comments?r.comments.length:0,[te,W]=$.useState("");$.useEffect(()=>{const X=()=>{if(!r.createdAt?.seconds){W(n("just_now")||"Just now");return}const Ee=new Date(r.createdAt.seconds*1e3);(new Date-Ee)/(1e3*60*60)>24?W(Ee.toLocaleDateString(s.language==="tr"?"tr-TR":"en-US",{day:"numeric",month:"long",year:"numeric"})):W(J_(Ee,{addSuffix:!0,locale:c,includeSeconds:!1}))};X();const pe=setInterval(X,6e4);return()=>clearInterval(pe)},[r.createdAt,c,n,s.language]),r.createdAt?.seconds&&new Date(r.createdAt.seconds*1e3);const ee=async()=>{if(!(!o||y)){v(!0);try{await aR(r.id,o.uid)}catch(X){console.error(X)}finally{v(!1)}}},F=async()=>{if(window.confirm(n("confirm_delete_post")||"Delete this post?"))try{await sR(r.id)}catch{alert("Failed to delete post")}},Y=async X=>{if(X.preventDefault(),!(!u.trim()||!o))try{await oR(r.id,o.uid,o.displayName||"User",u),d("")}catch(pe){console.error(pe),alert("Failed to post comment")}},ie=async()=>{const X={title:`Plant AI - ${r.title||r.authorName}`,text:r.content,url:window.location.href};if(navigator.share)try{await navigator.share(X)}catch{console.log("Share canceled")}else navigator.clipboard.writeText(window.location.href),alert(n("link_copied")||"Link copied!")},Z=X=>!X||X==="Unknown"?null:X.toLowerCase()==="plant"?n("plant")||"Bitki":n(`plant_${X.toLowerCase()}`)||n(X)||X;return b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-4 animate-fade-in relative group",children:[G&&b.jsx("button",{onClick:F,className:"absolute top-4 right-4 p-2 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:text-red-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:n("delete")||"Delete",children:b.jsx(Im,{className:"w-4 h-4"})}),!r.hideAuthor&&b.jsx("div",{className:"p-4 flex items-center justify-between",children:b.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e&&e(r.userId),children:[b.jsx("img",{src:G&&(o?.photoURL||o?.avatar)?o.photoURL||o.avatar:r.userAvatar||`https://ui-avatars.com/api/?name=${r.authorName||"Gardener"}&background=random`,alt:r.authorName,className:"w-10 h-10 rounded-full object-cover border border-gray-200"}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-base text-gray-900 dark:text-gray-100 leading-tight hover:underline",children:r.authorName||n("gardener")}),S&&b.jsxs("p",{className:`text-[10px] font-semibold tracking-wide mt-0.5 opacity-80 flex items-center gap-1.5 ${I}`,children:[b.jsx("span",{children:(()=>{const X={Seedling:"Filiz",Gardener:"Bahvan",Expert:"Uzman",Master:"Usta",Legend:"Efsane"};return s.language==="tr"&&X[C]?X[C]:C})()}),b.jsx("span",{className:"text-[10px] opacity-60",children:""}),b.jsxs("span",{className:"text-[10px] opacity-80",children:["Seviye ",S]}),b.jsx("span",{className:"text-[10px] opacity-60",children:""}),b.jsxs("span",{className:"text-[10px] opacity-80",children:[L," XP"]})]}),b.jsx("span",{className:"text-[10px] text-gray-400 block mt-0.5",children:te})]})]})}),b.jsxs("div",{className:`px-4 pb-2 ${r.hideAuthor?"pt-4":""}`,children:[r.title&&b.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-1",children:r.title}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-3 whitespace-pre-wrap",children:r.content}),r.plantType&&r.plantType!=="Unknown"&&b.jsx("span",{className:"inline-block bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 text-xs px-2 py-1 rounded-md mb-2",children:Z(r.plantType)}),r.relatedAnalysisId&&b.jsx("div",{className:"mt-2",children:b.jsxs("button",{onClick:()=>t&&t(r.relatedAnalysisId),className:"w-full py-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:[b.jsx("span",{className:"bg-green-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"AI"}),n("view_analysis_report")||"Analiz Raporunu Gr"]})})]}),r.image&&b.jsxs("div",{className:"w-full h-64 sm:h-80 bg-gray-100 dark:bg-gray-900 overflow-hidden cursor-pointer relative group/image",onClick:()=>window.open(r.image,"_blank"),children:[b.jsx("img",{src:r.image,alt:"Post",className:"w-full h-full object-cover",loading:"lazy"}),b.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 backdrop-blur-sm",children:[b.jsx(vh,{className:"w-3 h-3"}),b.jsxs("span",{children:[20+(r.likes?.length||0)*5," ",n("views")||"Grntlenme"]})]})]}),b.jsxs("div",{className:"p-4 flex items-center justify-between border-t border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("button",{onClick:ee,className:`flex items-center gap-1.5 transition-colors ${ne?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[b.jsx(oV,{className:`w-5 h-5 ${ne?"fill-current":""}`}),b.jsx("span",{className:"text-sm font-medium",children:M||n("like")})]}),b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-blue-500 transition-colors",onClick:()=>g(!f),children:[b.jsx(vh,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:D||n("comment")})]}),G&&b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-green-500 transition-colors",onClick:()=>z(!0),children:[b.jsx(zI,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:n("edit")})]})]}),b.jsxs("button",{onClick:ie,className:"text-gray-500 hover:text-green-600 transition-colors flex items-center gap-1",children:[b.jsx(k0,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm hidden sm:inline",children:n("share")||"Payla"})]})]}),K&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-lg shadow-2xl",children:[b.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white",children:n("edit_post")}),b.jsx("textarea",{className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white mb-4",value:O,onChange:X=>x(X.target.value),rows:4}),b.jsxs("div",{className:"flex justify-end gap-2",children:[b.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg dark:text-gray-300 dark:hover:bg-gray-700",children:n("cancel")}),b.jsx("button",{onClick:k,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:n("save")})]})]})}),f&&b.jsxs("div",{className:"px-4 pb-4 border-t border-gray-50 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/50",children:[b.jsxs("div",{className:"space-y-3 mt-4 max-h-60 overflow-y-auto mb-4 custom-scrollbar",children:[r.comments&&r.comments.map((X,pe)=>b.jsxs("div",{className:"flex gap-2 items-start text-sm",children:[b.jsxs("span",{className:"font-bold text-gray-900 dark:text-white shrink-0",children:[X.userName,":"]}),b.jsx("span",{className:"text-gray-700 dark:text-gray-300 break-words",children:X.text})]},pe)),(!r.comments||r.comments.length===0)&&b.jsx("p",{className:"text-gray-400 text-center text-sm italic",children:n("no_comments_yet")})]}),o?b.jsxs("form",{onSubmit:Y,className:"flex gap-2",children:[b.jsx("input",{type:"text",value:u,onChange:X=>d(X.target.value),placeholder:n("add_comment_placeholder"),className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 dark:bg-gray-700 text-sm outline-none focus:border-green-500"}),b.jsx("button",{type:"submit",disabled:!u.trim(),className:"p-2 bg-green-600 text-white rounded-lg disabled:opacity-50 hover:bg-green-700",children:b.jsx(bh,{className:"w-4 h-4"})})]}):b.jsx("p",{className:"text-center text-sm text-gray-500",children:n("login_to_comment")})]})]})}const Pu=Array.from({length:50},(r,e)=>{const t=e+1;let n=0;for(let u=1;u<t;u++)n+=100+(u-1)*20;let s="text-green-500",o="Seedling",c="Filiz";return t>40?(s="text-rose-500",o="Legend",c="Efsane"):t>30?(s="text-purple-500",o="Master",c="Usta"):t>20?(s="text-orange-500",o="Expert",c="Uzman"):t>10&&(s="text-yellow-500",o="Gardener",c="Bahvan"),{id:t,min:n,title:`${o}`,trTitle:`${c}`,tierColor:s}}),o9=100,l9=50;function dR(r=0,e=0){const t=r*o9+e*l9;let n=Pu[0];for(let u=Pu.length-1;u>=0;u--)if(t>=Pu[u].min){n=Pu[u];break}const s=Pu.find(u=>u.id===n.id+1);let o=100,c=t;if(s){const u=s.min-n.min,d=t-n.min;o=Math.min(100,Math.floor(d/u*100)),c=s.min}return{levelInfo:n,level:n.id,currentXp:t,nextLevelXp:c,progress:o,isMaxLevel:!s,totalXP:t}}const By=[{value:"tomato",labelKey:"plant_tomato"},{value:"pepper",labelKey:"plant_pepper"},{value:"cucumber",labelKey:"plant_cucumber"},{value:"eggplant",labelKey:"plant_eggplant"},{value:"potato",labelKey:"plant_potato"},{value:"onion",labelKey:"plant_onion"},{value:"garlic",labelKey:"plant_garlic"},{value:"lettuce",labelKey:"plant_lettuce"},{value:"spinach",labelKey:"plant_spinach"},{value:"carrot",labelKey:"plant_carrot"},{value:"bean",labelKey:"plant_bean"},{value:"corn",labelKey:"plant_corn"},{value:"zucchini",labelKey:"plant_zucchini"},{value:"strawberry",labelKey:"plant_strawberry"},{value:"lemon",labelKey:"plant_lemon"},{value:"orange",labelKey:"plant_orange"},{value:"apple",labelKey:"plant_apple"},{value:"grape",labelKey:"plant_grape"},{value:"watermelon",labelKey:"plant_watermelon"},{value:"melon",labelKey:"plant_melon"},{value:"cherry",labelKey:"plant_cherry"},{value:"peach",labelKey:"plant_peach"},{value:"rose",labelKey:"plant_rose"},{value:"orchid",labelKey:"plant_orchid"},{value:"succulent",labelKey:"plant_succulent"},{value:"tulip",labelKey:"plant_tulip"},{value:"sunflower",labelKey:"plant_sunflower"},{value:"daisy",labelKey:"plant_daisy"},{value:"lavender",labelKey:"plant_lavender"},{value:"cactus",labelKey:"plant_cactus"},{value:"olive",labelKey:"plant_olive"},{value:"pine",labelKey:"plant_pine"},{value:"palm",labelKey:"plant_palm"},{value:"mint",labelKey:"plant_mint"},{value:"basil",labelKey:"plant_basil"},{value:"rosemary",labelKey:"plant_rosemary"},{value:"parsley",labelKey:"plant_parsley"},{value:"other",labelKey:"plant_other"}];function c9(r,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if(n!=="default"&&!(n in r)){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(r)}function fR(r,e){return new Promise((function(t,n){let s;return u9(r).then((function(o){try{return s=o,t(new Blob([e.slice(0,2),s,e.slice(2)],{type:"image/jpeg"}))}catch(c){return n(c)}}),n)}))}const u9=r=>new Promise(((e,t)=>{const n=new FileReader;n.addEventListener("load",(({target:{result:s}})=>{const o=new DataView(s);let c=0;if(o.getUint16(c)!==65496)return t("not a valid JPEG");for(c+=2;;){const u=o.getUint16(c);if(u===65498)break;const d=o.getUint16(c+2);if(u===65505&&o.getUint32(c+4)===1165519206){const f=c+10;let g;switch(o.getUint16(f)){case 18761:g=!0;break;case 19789:g=!1;break;default:return t("TIFF header contains invalid endian")}if(o.getUint16(f+2,g)!==42)return t("TIFF header contains invalid version");const y=o.getUint32(f+4,g),v=f+y+2+12*o.getUint16(f+y,g);for(let w=f+y+2;w<v;w+=12)if(o.getUint16(w,g)==274){if(o.getUint16(w+2,g)!==3)return t("Orientation data type is invalid");if(o.getUint32(w+4,g)!==1)return t("Orientation data count is invalid");o.setUint16(w+8,1,g);break}return e(s.slice(c,c+2+d))}c+=2+d}return e(new Blob)})),n.readAsArrayBuffer(r)}));var Cm={},h9={get exports(){return Cm},set exports(r){Cm=r}};(function(r){var e,t,n={};h9.exports=n,n.parse=function(s,o){for(var c=n.bin.readUshort,u=n.bin.readUint,d=0,f={},g=new Uint8Array(s),y=g.length-4;u(g,y)!=101010256;)y--;d=y,d+=4;var v=c(g,d+=4);c(g,d+=2);var w=u(g,d+=2),T=u(g,d+=4);d+=4,d=T;for(var N=0;N<v;N++){u(g,d),d+=4,d+=4,d+=4,u(g,d+=4),w=u(g,d+=4);var P=u(g,d+=4),V=c(g,d+=4),H=c(g,d+2),B=c(g,d+4);d+=6;var q=u(g,d+=8);d+=4,d+=V+H+B,n._readLocal(g,q,f,w,P,o)}return f},n._readLocal=function(s,o,c,u,d,f){var g=n.bin.readUshort,y=n.bin.readUint;y(s,o),g(s,o+=4),g(s,o+=2);var v=g(s,o+=2);y(s,o+=2),y(s,o+=4),o+=4;var w=g(s,o+=8),T=g(s,o+=2);o+=2;var N=n.bin.readUTF8(s,o,w);if(o+=w,o+=T,f)c[N]={size:d,csize:u};else{var P=new Uint8Array(s.buffer,o);if(v==0)c[N]=new Uint8Array(P.buffer.slice(o,o+u));else{if(v!=8)throw"unknown compression method: "+v;var V=new Uint8Array(d);n.inflateRaw(P,V),c[N]=V}}},n.inflateRaw=function(s,o){return n.F.inflate(s,o)},n.inflate=function(s,o){return s[0],s[1],n.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),o)},n.deflate=function(s,o){o==null&&(o={level:6});var c=0,u=new Uint8Array(50+Math.floor(1.1*s.length));u[c]=120,u[c+1]=156,c+=2,c=n.F.deflateRaw(s,u,c,o.level);var d=n.adler(s,0,s.length);return u[c+0]=d>>>24&255,u[c+1]=d>>>16&255,u[c+2]=d>>>8&255,u[c+3]=d>>>0&255,new Uint8Array(u.buffer,0,c+4)},n.deflateRaw=function(s,o){o==null&&(o={level:6});var c=new Uint8Array(50+Math.floor(1.1*s.length)),u=n.F.deflateRaw(s,c,u,o.level);return new Uint8Array(c.buffer,0,u)},n.encode=function(s,o){o==null&&(o=!1);var c=0,u=n.bin.writeUint,d=n.bin.writeUshort,f={};for(var g in s){var y=!n._noNeed(g)&&!o,v=s[g],w=n.crc.crc(v,0,v.length);f[g]={cpr:y,usize:v.length,crc:w,file:y?n.deflateRaw(v):v}}for(var g in f)c+=f[g].file.length+30+46+2*n.bin.sizeUTF8(g);c+=22;var T=new Uint8Array(c),N=0,P=[];for(var g in f){var V=f[g];P.push(N),N=n._writeHeader(T,N,g,V,0)}var H=0,B=N;for(var g in f)V=f[g],P.push(N),N=n._writeHeader(T,N,g,V,1,P[H++]);var q=N-B;return u(T,N,101010256),N+=4,d(T,N+=4,H),d(T,N+=2,H),u(T,N+=2,q),u(T,N+=4,B),N+=4,N+=2,T.buffer},n._noNeed=function(s){var o=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},n._writeHeader=function(s,o,c,u,d,f){var g=n.bin.writeUint,y=n.bin.writeUshort,v=u.file;return g(s,o,d==0?67324752:33639248),o+=4,d==1&&(o+=2),y(s,o,20),y(s,o+=2,0),y(s,o+=2,u.cpr?8:0),g(s,o+=2,0),g(s,o+=4,u.crc),g(s,o+=4,v.length),g(s,o+=4,u.usize),y(s,o+=4,n.bin.sizeUTF8(c)),y(s,o+=2,0),o+=2,d==1&&(o+=2,o+=2,g(s,o+=6,f),o+=4),o+=n.bin.writeUTF8(s,o,c),d==0&&(s.set(v,o),o+=v.length),o},n.crc={table:(function(){for(var s=new Uint32Array(256),o=0;o<256;o++){for(var c=o,u=0;u<8;u++)1&c?c=3988292384^c>>>1:c>>>=1;s[o]=c}return s})(),update:function(s,o,c,u){for(var d=0;d<u;d++)s=n.crc.table[255&(s^o[c+d])]^s>>>8;return s},crc:function(s,o,c){return 4294967295^n.crc.update(4294967295,s,o,c)}},n.adler=function(s,o,c){for(var u=1,d=0,f=o,g=o+c;f<g;){for(var y=Math.min(f+5552,g);f<y;)d+=u+=s[f++];u%=65521,d%=65521}return d<<16|u},n.bin={readUshort:function(s,o){return s[o]|s[o+1]<<8},writeUshort:function(s,o,c){s[o]=255&c,s[o+1]=c>>8&255},readUint:function(s,o){return 16777216*s[o+3]+(s[o+2]<<16|s[o+1]<<8|s[o])},writeUint:function(s,o,c){s[o]=255&c,s[o+1]=c>>8&255,s[o+2]=c>>16&255,s[o+3]=c>>24&255},readASCII:function(s,o,c){for(var u="",d=0;d<c;d++)u+=String.fromCharCode(s[o+d]);return u},writeASCII:function(s,o,c){for(var u=0;u<c.length;u++)s[o+u]=c.charCodeAt(u)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,o,c){for(var u,d="",f=0;f<c;f++)d+="%"+n.bin.pad(s[o+f].toString(16));try{u=decodeURIComponent(d)}catch{return n.bin.readASCII(s,o,c)}return u},writeUTF8:function(s,o,c){for(var u=c.length,d=0,f=0;f<u;f++){var g=c.charCodeAt(f);if((4294967168&g)==0)s[o+d]=g,d++;else if((4294965248&g)==0)s[o+d]=192|g>>6,s[o+d+1]=128|g>>0&63,d+=2;else if((4294901760&g)==0)s[o+d]=224|g>>12,s[o+d+1]=128|g>>6&63,s[o+d+2]=128|g>>0&63,d+=3;else{if((4292870144&g)!=0)throw"e";s[o+d]=240|g>>18,s[o+d+1]=128|g>>12&63,s[o+d+2]=128|g>>6&63,s[o+d+3]=128|g>>0&63,d+=4}}return d},sizeUTF8:function(s){for(var o=s.length,c=0,u=0;u<o;u++){var d=s.charCodeAt(u);if((4294967168&d)==0)c++;else if((4294965248&d)==0)c+=2;else if((4294901760&d)==0)c+=3;else{if((4292870144&d)!=0)throw"e";c+=4}}return c}},n.F={},n.F.deflateRaw=function(s,o,c,u){var d=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],f=n.F.U,g=n.F._goodIndex;n.F._hash;var y=n.F._putsE,v=0,w=c<<3,T=0,N=s.length;if(u==0){for(;v<N;)y(o,w,v+(C=Math.min(65535,N-v))==N?1:0),w=n.F._copyExact(s,v,C,o,w+8),v+=C;return w>>>3}var P=f.lits,V=f.strt,H=f.prev,B=0,q=0,K=0,z=0,O=0,x=0;for(N>2&&(V[x=n.F._hash(s,0)]=0),v=0;v<N;v++){if(O=x,v+1<N-2){x=n.F._hash(s,v+1);var S=v+1&32767;H[S]=V[x],V[x]=S}if(T<=v){(B>14e3||q>26697)&&N-v>100&&(T<v&&(P[B]=v-T,B+=2,T=v),w=n.F._writeBlock(v==N-1||T==N?1:0,P,B,z,s,K,v-K,o,w),B=q=z=0,K=v);var I=0;v<N-2&&(I=n.F._bestMatch(s,v,H,O,Math.min(d[2],N-v),d[3]));var C=I>>>16,L=65535&I;if(I!=0){L=65535&I;var k=g(C=I>>>16,f.of0);f.lhst[257+k]++;var G=g(L,f.df0);f.dhst[G]++,z+=f.exb[k]+f.dxb[G],P[B]=C<<23|v-T,P[B+1]=L<<16|k<<8|G,B+=2,T=v+C}else f.lhst[s[v]]++;q++}}for(K==v&&s.length!=0||(T<v&&(P[B]=v-T,B+=2,T=v),w=n.F._writeBlock(1,P,B,z,s,K,v-K,o,w),B=0,q=0,B=q=z=0,K=v);(7&w)!=0;)w++;return w>>>3},n.F._bestMatch=function(s,o,c,u,d,f){var g=32767&o,y=c[g],v=g-y+32768&32767;if(y==g||u!=n.F._hash(s,o-v))return 0;for(var w=0,T=0,N=Math.min(32767,o);v<=N&&--f!=0&&y!=g;){if(w==0||s[o+w]==s[o+w-v]){var P=n.F._howLong(s,o,v);if(P>w){if(T=v,(w=P)>=d)break;v+2<P&&(P=v+2);for(var V=0,H=0;H<P-2;H++){var B=o-v+H+32768&32767,q=B-c[B]+32768&32767;q>V&&(V=q,y=B)}}}v+=(g=y)-(y=c[g])+32768&32767}return w<<16|T},n.F._howLong=function(s,o,c){if(s[o]!=s[o-c]||s[o+1]!=s[o+1-c]||s[o+2]!=s[o+2-c])return 0;var u=o,d=Math.min(s.length,o+258);for(o+=3;o<d&&s[o]==s[o-c];)o++;return o-u},n.F._hash=function(s,o){return(s[o]<<8|s[o+1])+(s[o+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(s,o,c,u,d,f,g,y,v){var w,T,N,P,V,H,B,q,K,z=n.F.U,O=n.F._putsF,x=n.F._putsE;z.lhst[256]++,T=(w=n.F.getTrees())[0],N=w[1],P=w[2],V=w[3],H=w[4],B=w[5],q=w[6],K=w[7];var S=32+((v+3&7)==0?0:8-(v+3&7))+(g<<3),I=u+n.F.contSize(z.fltree,z.lhst)+n.F.contSize(z.fdtree,z.dhst),C=u+n.F.contSize(z.ltree,z.lhst)+n.F.contSize(z.dtree,z.dhst);C+=14+3*B+n.F.contSize(z.itree,z.ihst)+(2*z.ihst[16]+3*z.ihst[17]+7*z.ihst[18]);for(var L=0;L<286;L++)z.lhst[L]=0;for(L=0;L<30;L++)z.dhst[L]=0;for(L=0;L<19;L++)z.ihst[L]=0;var k=S<I&&S<C?0:I<C?1:2;if(O(y,v,s),O(y,v+1,k),v+=3,k==0){for(;(7&v)!=0;)v++;v=n.F._copyExact(d,f,g,y,v)}else{var G,ne;if(k==1&&(G=z.fltree,ne=z.fdtree),k==2){n.F.makeCodes(z.ltree,T),n.F.revCodes(z.ltree,T),n.F.makeCodes(z.dtree,N),n.F.revCodes(z.dtree,N),n.F.makeCodes(z.itree,P),n.F.revCodes(z.itree,P),G=z.ltree,ne=z.dtree,x(y,v,V-257),x(y,v+=5,H-1),x(y,v+=5,B-4),v+=4;for(var M=0;M<B;M++)x(y,v+3*M,z.itree[1+(z.ordr[M]<<1)]);v+=3*B,v=n.F._codeTiny(q,z.itree,y,v),v=n.F._codeTiny(K,z.itree,y,v)}for(var D=f,te=0;te<c;te+=2){for(var W=o[te],ee=W>>>23,F=D+(8388607&W);D<F;)v=n.F._writeLit(d[D++],G,y,v);if(ee!=0){var Y=o[te+1],ie=Y>>16,Z=Y>>8&255,X=255&Y;x(y,v=n.F._writeLit(257+Z,G,y,v),ee-z.of0[Z]),v+=z.exb[Z],O(y,v=n.F._writeLit(X,ne,y,v),ie-z.df0[X]),v+=z.dxb[X],D+=ee}}v=n.F._writeLit(256,G,y,v)}return v},n.F._copyExact=function(s,o,c,u,d){var f=d>>>3;return u[f]=c,u[f+1]=c>>>8,u[f+2]=255-u[f],u[f+3]=255-u[f+1],f+=4,u.set(new Uint8Array(s.buffer,o,c),f),d+(c+4<<3)},n.F.getTrees=function(){for(var s=n.F.U,o=n.F._hufTree(s.lhst,s.ltree,15),c=n.F._hufTree(s.dhst,s.dtree,15),u=[],d=n.F._lenCodes(s.ltree,u),f=[],g=n.F._lenCodes(s.dtree,f),y=0;y<u.length;y+=2)s.ihst[u[y]]++;for(y=0;y<f.length;y+=2)s.ihst[f[y]]++;for(var v=n.F._hufTree(s.ihst,s.itree,7),w=19;w>4&&s.itree[1+(s.ordr[w-1]<<1)]==0;)w--;return[o,c,v,d,g,w,u,f]},n.F.getSecond=function(s){for(var o=[],c=0;c<s.length;c+=2)o.push(s[c+1]);return o},n.F.nonZero=function(s){for(var o="",c=0;c<s.length;c+=2)s[c+1]!=0&&(o+=(c>>1)+",");return o},n.F.contSize=function(s,o){for(var c=0,u=0;u<o.length;u++)c+=o[u]*s[1+(u<<1)];return c},n.F._codeTiny=function(s,o,c,u){for(var d=0;d<s.length;d+=2){var f=s[d],g=s[d+1];u=n.F._writeLit(f,o,c,u);var y=f==16?2:f==17?3:7;f>15&&(n.F._putsE(c,u,g,y),u+=y)}return u},n.F._lenCodes=function(s,o){for(var c=s.length;c!=2&&s[c-1]==0;)c-=2;for(var u=0;u<c;u+=2){var d=s[u+1],f=u+3<c?s[u+3]:-1,g=u+5<c?s[u+5]:-1,y=u==0?-1:s[u-1];if(d==0&&f==d&&g==d){for(var v=u+5;v+2<c&&s[v+2]==d;)v+=2;(w=Math.min(v+1-u>>>1,138))<11?o.push(17,w-3):o.push(18,w-11),u+=2*w-2}else if(d==y&&f==d&&g==d){for(v=u+5;v+2<c&&s[v+2]==d;)v+=2;var w=Math.min(v+1-u>>>1,6);o.push(16,w-3),u+=2*w-2}else o.push(d,0)}return c>>>1},n.F._hufTree=function(s,o,c){var u=[],d=s.length,f=o.length,g=0;for(g=0;g<f;g+=2)o[g]=0,o[g+1]=0;for(g=0;g<d;g++)s[g]!=0&&u.push({lit:g,f:s[g]});var y=u.length,v=u.slice(0);if(y==0)return 0;if(y==1){var w=u[0].lit;return v=w==0?1:0,o[1+(w<<1)]=1,o[1+(v<<1)]=1,1}u.sort((function(q,K){return q.f-K.f}));var T=u[0],N=u[1],P=0,V=1,H=2;for(u[0]={lit:-1,f:T.f+N.f,l:T,r:N,d:0};V!=y-1;)T=P!=V&&(H==y||u[P].f<u[H].f)?u[P++]:u[H++],N=P!=V&&(H==y||u[P].f<u[H].f)?u[P++]:u[H++],u[V++]={lit:-1,f:T.f+N.f,l:T,r:N};var B=n.F.setDepth(u[V-1],0);for(B>c&&(n.F.restrictDepth(v,c,B),B=c),g=0;g<y;g++)o[1+(v[g].lit<<1)]=v[g].d;return B},n.F.setDepth=function(s,o){return s.lit!=-1?(s.d=o,o):Math.max(n.F.setDepth(s.l,o+1),n.F.setDepth(s.r,o+1))},n.F.restrictDepth=function(s,o,c){var u=0,d=1<<c-o,f=0;for(s.sort((function(y,v){return v.d==y.d?y.f-v.f:v.d-y.d})),u=0;u<s.length&&s[u].d>o;u++){var g=s[u].d;s[u].d=o,f+=d-(1<<c-g)}for(f>>>=c-o;f>0;)(g=s[u].d)<o?(s[u].d++,f-=1<<o-g-1):u++;for(;u>=0;u--)s[u].d==o&&f<0&&(s[u].d--,f++);f!=0&&console.log("debt left")},n.F._goodIndex=function(s,o){var c=0;return o[16|c]<=s&&(c|=16),o[8|c]<=s&&(c|=8),o[4|c]<=s&&(c|=4),o[2|c]<=s&&(c|=2),o[1|c]<=s&&(c|=1),c},n.F._writeLit=function(s,o,c,u){return n.F._putsF(c,u,o[s<<1]),u+o[1+(s<<1)]},n.F.inflate=function(s,o){var c=Uint8Array;if(s[0]==3&&s[1]==0)return o||new c(0);var u=n.F,d=u._bitsF,f=u._bitsE,g=u._decodeTiny,y=u.makeCodes,v=u.codes2map,w=u._get17,T=u.U,N=o==null;N&&(o=new c(s.length>>>2<<3));for(var P,V,H=0,B=0,q=0,K=0,z=0,O=0,x=0,S=0,I=0;H==0;)if(H=d(s,I,1),B=d(s,I+1,2),I+=3,B!=0){if(N&&(o=n.F._check(o,S+(1<<17))),B==1&&(P=T.flmap,V=T.fdmap,O=511,x=31),B==2){q=f(s,I,5)+257,K=f(s,I+5,5)+1,z=f(s,I+10,4)+4,I+=14;for(var C=0;C<38;C+=2)T.itree[C]=0,T.itree[C+1]=0;var L=1;for(C=0;C<z;C++){var k=f(s,I+3*C,3);T.itree[1+(T.ordr[C]<<1)]=k,k>L&&(L=k)}I+=3*z,y(T.itree,L),v(T.itree,L,T.imap),P=T.lmap,V=T.dmap,I=g(T.imap,(1<<L)-1,q+K,s,I,T.ttree);var G=u._copyOut(T.ttree,0,q,T.ltree);O=(1<<G)-1;var ne=u._copyOut(T.ttree,q,K,T.dtree);x=(1<<ne)-1,y(T.ltree,G),v(T.ltree,G,P),y(T.dtree,ne),v(T.dtree,ne,V)}for(;;){var M=P[w(s,I)&O];I+=15&M;var D=M>>>4;if(!(D>>>8))o[S++]=D;else{if(D==256)break;var te=S+D-254;if(D>264){var W=T.ldef[D-257];te=S+(W>>>3)+f(s,I,7&W),I+=7&W}var ee=V[w(s,I)&x];I+=15&ee;var F=ee>>>4,Y=T.ddef[F],ie=(Y>>>4)+d(s,I,15&Y);for(I+=15&Y,N&&(o=n.F._check(o,S+(1<<17)));S<te;)o[S]=o[S++-ie],o[S]=o[S++-ie],o[S]=o[S++-ie],o[S]=o[S++-ie];S=te}}}else{(7&I)!=0&&(I+=8-(7&I));var Z=4+(I>>>3),X=s[Z-4]|s[Z-3]<<8;N&&(o=n.F._check(o,S+X)),o.set(new c(s.buffer,s.byteOffset+Z,X),S),I=Z+X<<3,S+=X}return o.length==S?o:o.slice(0,S)},n.F._check=function(s,o){var c=s.length;if(o<=c)return s;var u=new Uint8Array(Math.max(c<<1,o));return u.set(s,0),u},n.F._decodeTiny=function(s,o,c,u,d,f){for(var g=n.F._bitsE,y=n.F._get17,v=0;v<c;){var w=s[y(u,d)&o];d+=15&w;var T=w>>>4;if(T<=15)f[v]=T,v++;else{var N=0,P=0;T==16?(P=3+g(u,d,2),d+=2,N=f[v-1]):T==17?(P=3+g(u,d,3),d+=3):T==18&&(P=11+g(u,d,7),d+=7);for(var V=v+P;v<V;)f[v]=N,v++}}return d},n.F._copyOut=function(s,o,c,u){for(var d=0,f=0,g=u.length>>>1;f<c;){var y=s[f+o];u[f<<1]=0,u[1+(f<<1)]=y,y>d&&(d=y),f++}for(;f<g;)u[f<<1]=0,u[1+(f<<1)]=0,f++;return d},n.F.makeCodes=function(s,o){for(var c,u,d,f,g=n.F.U,y=s.length,v=g.bl_count,w=0;w<=o;w++)v[w]=0;for(w=1;w<y;w+=2)v[s[w]]++;var T=g.next_code;for(c=0,v[0]=0,u=1;u<=o;u++)c=c+v[u-1]<<1,T[u]=c;for(d=0;d<y;d+=2)(f=s[d+1])!=0&&(s[d]=T[f],T[f]++)},n.F.codes2map=function(s,o,c){for(var u=s.length,d=n.F.U.rev15,f=0;f<u;f+=2)if(s[f+1]!=0)for(var g=f>>1,y=s[f+1],v=g<<4|y,w=o-y,T=s[f]<<w,N=T+(1<<w);T!=N;)c[d[T]>>>15-o]=v,T++},n.F.revCodes=function(s,o){for(var c=n.F.U.rev15,u=15-o,d=0;d<s.length;d+=2){var f=s[d]<<o-s[d+1];s[d]=c[f]>>>u}},n.F._putsE=function(s,o,c){c<<=7&o;var u=o>>>3;s[u]|=c,s[u+1]|=c>>>8},n.F._putsF=function(s,o,c){c<<=7&o;var u=o>>>3;s[u]|=c,s[u+1]|=c>>>8,s[u+2]|=c>>>16},n.F._bitsE=function(s,o,c){return(s[o>>>3]|s[1+(o>>>3)]<<8)>>>(7&o)&(1<<c)-1},n.F._bitsF=function(s,o,c){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16)>>>(7&o)&(1<<c)-1},n.F._get17=function(s,o){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16)>>>(7&o)},n.F._get25=function(s,o){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16|s[3+(o>>>3)]<<24)>>>(7&o)},n.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var s=n.F.U,o=0;o<32768;o++){var c=o;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,s.rev15[o]=(c>>>16|c<<16)>>>17}function u(d,f,g){for(;f--!=0;)d.push(0,g)}for(o=0;o<32;o++)s.ldef[o]=s.of0[o]<<3|s.exb[o],s.ddef[o]=s.df0[o]<<4|s.dxb[o];u(s.fltree,144,8),u(s.fltree,112,9),u(s.fltree,24,7),u(s.fltree,8,8),n.F.makeCodes(s.fltree,9),n.F.codes2map(s.fltree,9,s.flmap),n.F.revCodes(s.fltree,9),u(s.fdtree,32,5),n.F.makeCodes(s.fdtree,5),n.F.codes2map(s.fdtree,5,s.fdmap),n.F.revCodes(s.fdtree,5),u(s.itree,19,0),u(s.ltree,286,0),u(s.dtree,30,0),u(s.ttree,320,0)})()})();var d9=c9({__proto__:null,default:Cm},[Cm]);const Xr=(function(){var r={nextZero(g,y){for(;g[y]!=0;)y++;return y},readUshort:(g,y)=>g[y]<<8|g[y+1],writeUshort(g,y,v){g[y]=v>>8&255,g[y+1]=255&v},readUint:(g,y)=>16777216*g[y]+(g[y+1]<<16|g[y+2]<<8|g[y+3]),writeUint(g,y,v){g[y]=v>>24&255,g[y+1]=v>>16&255,g[y+2]=v>>8&255,g[y+3]=255&v},readASCII(g,y,v){let w="";for(let T=0;T<v;T++)w+=String.fromCharCode(g[y+T]);return w},writeASCII(g,y,v){for(let w=0;w<v.length;w++)g[y+w]=v.charCodeAt(w)},readBytes(g,y,v){const w=[];for(let T=0;T<v;T++)w.push(g[y+T]);return w},pad:g=>g.length<2?`0${g}`:g,readUTF8(g,y,v){let w,T="";for(let N=0;N<v;N++)T+=`%${r.pad(g[y+N].toString(16))}`;try{w=decodeURIComponent(T)}catch{return r.readASCII(g,y,v)}return w}};function e(g,y,v,w){const T=y*v,N=o(w),P=Math.ceil(y*N/8),V=new Uint8Array(4*T),H=new Uint32Array(V.buffer),{ctype:B}=w,{depth:q}=w,K=r.readUshort;if(B==6){const W=T<<2;if(q==8)for(var z=0;z<W;z+=4)V[z]=g[z],V[z+1]=g[z+1],V[z+2]=g[z+2],V[z+3]=g[z+3];if(q==16)for(z=0;z<W;z++)V[z]=g[z<<1]}else if(B==2){const W=w.tabs.tRNS;if(W==null){if(q==8)for(z=0;z<T;z++){var O=3*z;H[z]=255<<24|g[O+2]<<16|g[O+1]<<8|g[O]}if(q==16)for(z=0;z<T;z++)O=6*z,H[z]=255<<24|g[O+4]<<16|g[O+2]<<8|g[O]}else{var x=W[0];const ee=W[1],F=W[2];if(q==8)for(z=0;z<T;z++){var S=z<<2;O=3*z,H[z]=255<<24|g[O+2]<<16|g[O+1]<<8|g[O],g[O]==x&&g[O+1]==ee&&g[O+2]==F&&(V[S+3]=0)}if(q==16)for(z=0;z<T;z++)S=z<<2,O=6*z,H[z]=255<<24|g[O+4]<<16|g[O+2]<<8|g[O],K(g,O)==x&&K(g,O+2)==ee&&K(g,O+4)==F&&(V[S+3]=0)}}else if(B==3){const W=w.tabs.PLTE,ee=w.tabs.tRNS,F=ee?ee.length:0;if(q==1)for(var I=0;I<v;I++){var C=I*P,L=I*y;for(z=0;z<y;z++){S=L+z<<2;var k=3*(G=g[C+(z>>3)]>>7-((7&z)<<0)&1);V[S]=W[k],V[S+1]=W[k+1],V[S+2]=W[k+2],V[S+3]=G<F?ee[G]:255}}if(q==2)for(I=0;I<v;I++)for(C=I*P,L=I*y,z=0;z<y;z++)S=L+z<<2,k=3*(G=g[C+(z>>2)]>>6-((3&z)<<1)&3),V[S]=W[k],V[S+1]=W[k+1],V[S+2]=W[k+2],V[S+3]=G<F?ee[G]:255;if(q==4)for(I=0;I<v;I++)for(C=I*P,L=I*y,z=0;z<y;z++)S=L+z<<2,k=3*(G=g[C+(z>>1)]>>4-((1&z)<<2)&15),V[S]=W[k],V[S+1]=W[k+1],V[S+2]=W[k+2],V[S+3]=G<F?ee[G]:255;if(q==8)for(z=0;z<T;z++){var G;S=z<<2,k=3*(G=g[z]),V[S]=W[k],V[S+1]=W[k+1],V[S+2]=W[k+2],V[S+3]=G<F?ee[G]:255}}else if(B==4){if(q==8)for(z=0;z<T;z++){S=z<<2;var ne=g[M=z<<1];V[S]=ne,V[S+1]=ne,V[S+2]=ne,V[S+3]=g[M+1]}if(q==16)for(z=0;z<T;z++){var M;S=z<<2,ne=g[M=z<<2],V[S]=ne,V[S+1]=ne,V[S+2]=ne,V[S+3]=g[M+2]}}else if(B==0)for(x=w.tabs.tRNS?w.tabs.tRNS:-1,I=0;I<v;I++){const W=I*P,ee=I*y;if(q==1)for(var D=0;D<y;D++){var te=(ne=255*(g[W+(D>>>3)]>>>7-(7&D)&1))==255*x?0:255;H[ee+D]=te<<24|ne<<16|ne<<8|ne}else if(q==2)for(D=0;D<y;D++)te=(ne=85*(g[W+(D>>>2)]>>>6-((3&D)<<1)&3))==85*x?0:255,H[ee+D]=te<<24|ne<<16|ne<<8|ne;else if(q==4)for(D=0;D<y;D++)te=(ne=17*(g[W+(D>>>1)]>>>4-((1&D)<<2)&15))==17*x?0:255,H[ee+D]=te<<24|ne<<16|ne<<8|ne;else if(q==8)for(D=0;D<y;D++)te=(ne=g[W+D])==x?0:255,H[ee+D]=te<<24|ne<<16|ne<<8|ne;else if(q==16)for(D=0;D<y;D++)ne=g[W+(D<<1)],te=K(g,W+(D<<1))==x?0:255,H[ee+D]=te<<24|ne<<16|ne<<8|ne}return V}function t(g,y,v,w){const T=o(g),N=Math.ceil(v*T/8),P=new Uint8Array((N+1+g.interlace)*w);return y=g.tabs.CgBI?s(y,P):n(y,P),g.interlace==0?y=c(y,g,0,v,w):g.interlace==1&&(y=(function(H,B){const q=B.width,K=B.height,z=o(B),O=z>>3,x=Math.ceil(q*z/8),S=new Uint8Array(K*x);let I=0;const C=[0,0,4,0,2,0,1],L=[0,4,0,2,0,1,0],k=[8,8,8,4,4,2,2],G=[8,8,4,4,2,2,1];let ne=0;for(;ne<7;){const D=k[ne],te=G[ne];let W=0,ee=0,F=C[ne];for(;F<K;)F+=D,ee++;let Y=L[ne];for(;Y<q;)Y+=te,W++;const ie=Math.ceil(W*z/8);c(H,B,I,W,ee);let Z=0,X=C[ne];for(;X<K;){let pe=L[ne],Ee=I+Z*ie<<3;for(;pe<q;){var M;if(z==1&&(M=(M=H[Ee>>3])>>7-(7&Ee)&1,S[X*x+(pe>>3)]|=M<<7-((7&pe)<<0)),z==2&&(M=(M=H[Ee>>3])>>6-(7&Ee)&3,S[X*x+(pe>>2)]|=M<<6-((3&pe)<<1)),z==4&&(M=(M=H[Ee>>3])>>4-(7&Ee)&15,S[X*x+(pe>>1)]|=M<<4-((1&pe)<<2)),z>=8){const Ie=X*x+pe*O;for(let Re=0;Re<O;Re++)S[Ie+Re]=H[(Ee>>3)+Re]}Ee+=z,pe+=te}Z++,X+=D}W*ee!=0&&(I+=ee*(1+ie)),ne+=1}return S})(y,g)),y}function n(g,y){return s(new Uint8Array(g.buffer,2,g.length-6),y)}var s=(function(){const g={H:{}};return g.H.N=function(y,v){const w=Uint8Array;let T,N,P=0,V=0,H=0,B=0,q=0,K=0,z=0,O=0,x=0;if(y[0]==3&&y[1]==0)return v||new w(0);const S=g.H,I=S.b,C=S.e,L=S.R,k=S.n,G=S.A,ne=S.Z,M=S.m,D=v==null;for(D&&(v=new w(y.length>>>2<<5));P==0;)if(P=I(y,x,1),V=I(y,x+1,2),x+=3,V!=0){if(D&&(v=g.H.W(v,O+(1<<17))),V==1&&(T=M.J,N=M.h,K=511,z=31),V==2){H=C(y,x,5)+257,B=C(y,x+5,5)+1,q=C(y,x+10,4)+4,x+=14;let W=1;for(var te=0;te<38;te+=2)M.Q[te]=0,M.Q[te+1]=0;for(te=0;te<q;te++){const Y=C(y,x+3*te,3);M.Q[1+(M.X[te]<<1)]=Y,Y>W&&(W=Y)}x+=3*q,k(M.Q,W),G(M.Q,W,M.u),T=M.w,N=M.d,x=L(M.u,(1<<W)-1,H+B,y,x,M.v);const ee=S.V(M.v,0,H,M.C);K=(1<<ee)-1;const F=S.V(M.v,H,B,M.D);z=(1<<F)-1,k(M.C,ee),G(M.C,ee,T),k(M.D,F),G(M.D,F,N)}for(;;){const W=T[ne(y,x)&K];x+=15&W;const ee=W>>>4;if(!(ee>>>8))v[O++]=ee;else{if(ee==256)break;{let F=O+ee-254;if(ee>264){const pe=M.q[ee-257];F=O+(pe>>>3)+C(y,x,7&pe),x+=7&pe}const Y=N[ne(y,x)&z];x+=15&Y;const ie=Y>>>4,Z=M.c[ie],X=(Z>>>4)+I(y,x,15&Z);for(x+=15&Z;O<F;)v[O]=v[O++-X],v[O]=v[O++-X],v[O]=v[O++-X],v[O]=v[O++-X];O=F}}}}else{(7&x)!=0&&(x+=8-(7&x));const W=4+(x>>>3),ee=y[W-4]|y[W-3]<<8;D&&(v=g.H.W(v,O+ee)),v.set(new w(y.buffer,y.byteOffset+W,ee),O),x=W+ee<<3,O+=ee}return v.length==O?v:v.slice(0,O)},g.H.W=function(y,v){const w=y.length;if(v<=w)return y;const T=new Uint8Array(w<<1);return T.set(y,0),T},g.H.R=function(y,v,w,T,N,P){const V=g.H.e,H=g.H.Z;let B=0;for(;B<w;){const q=y[H(T,N)&v];N+=15&q;const K=q>>>4;if(K<=15)P[B]=K,B++;else{let z=0,O=0;K==16?(O=3+V(T,N,2),N+=2,z=P[B-1]):K==17?(O=3+V(T,N,3),N+=3):K==18&&(O=11+V(T,N,7),N+=7);const x=B+O;for(;B<x;)P[B]=z,B++}}return N},g.H.V=function(y,v,w,T){let N=0,P=0;const V=T.length>>>1;for(;P<w;){const H=y[P+v];T[P<<1]=0,T[1+(P<<1)]=H,H>N&&(N=H),P++}for(;P<V;)T[P<<1]=0,T[1+(P<<1)]=0,P++;return N},g.H.n=function(y,v){const w=g.H.m,T=y.length;let N,P,V,H;const B=w.j;for(var q=0;q<=v;q++)B[q]=0;for(q=1;q<T;q+=2)B[y[q]]++;const K=w.K;for(N=0,B[0]=0,P=1;P<=v;P++)N=N+B[P-1]<<1,K[P]=N;for(V=0;V<T;V+=2)H=y[V+1],H!=0&&(y[V]=K[H],K[H]++)},g.H.A=function(y,v,w){const T=y.length,N=g.H.m.r;for(let P=0;P<T;P+=2)if(y[P+1]!=0){const V=P>>1,H=y[P+1],B=V<<4|H,q=v-H;let K=y[P]<<q;const z=K+(1<<q);for(;K!=z;)w[N[K]>>>15-v]=B,K++}},g.H.l=function(y,v){const w=g.H.m.r,T=15-v;for(let N=0;N<y.length;N+=2){const P=y[N]<<v-y[N+1];y[N]=w[P]>>>T}},g.H.M=function(y,v,w){w<<=7&v;const T=v>>>3;y[T]|=w,y[T+1]|=w>>>8},g.H.I=function(y,v,w){w<<=7&v;const T=v>>>3;y[T]|=w,y[T+1]|=w>>>8,y[T+2]|=w>>>16},g.H.e=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8)>>>(7&v)&(1<<w)-1},g.H.b=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)&(1<<w)-1},g.H.Z=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)},g.H.i=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16|y[3+(v>>>3)]<<24)>>>(7&v)},g.H.m=(function(){const y=Uint16Array,v=Uint32Array;return{K:new y(16),j:new y(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new y(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new v(32),J:new y(512),_:[],h:new y(32),$:[],w:new y(32768),C:[],v:[],d:new y(32768),D:[],u:new y(512),Q:[],r:new y(32768),s:new v(286),Y:new v(30),a:new v(19),t:new v(15e3),k:new y(65536),g:new y(32768)}})(),(function(){const y=g.H.m;for(var v=0;v<32768;v++){let T=v;T=(2863311530&T)>>>1|(1431655765&T)<<1,T=(3435973836&T)>>>2|(858993459&T)<<2,T=(4042322160&T)>>>4|(252645135&T)<<4,T=(4278255360&T)>>>8|(16711935&T)<<8,y.r[v]=(T>>>16|T<<16)>>>17}function w(T,N,P){for(;N--!=0;)T.push(0,P)}for(v=0;v<32;v++)y.q[v]=y.S[v]<<3|y.T[v],y.c[v]=y.p[v]<<4|y.z[v];w(y._,144,8),w(y._,112,9),w(y._,24,7),w(y._,8,8),g.H.n(y._,9),g.H.A(y._,9,y.J),g.H.l(y._,9),w(y.$,32,5),g.H.n(y.$,5),g.H.A(y.$,5,y.h),g.H.l(y.$,5),w(y.Q,19,0),w(y.C,286,0),w(y.D,30,0),w(y.v,320,0)})(),g.H.N})();function o(g){return[1,null,3,1,2,null,4][g.ctype]*g.depth}function c(g,y,v,w,T){let N=o(y);const P=Math.ceil(w*N/8);let V,H;N=Math.ceil(N/8);let B=g[v],q=0;if(B>1&&(g[v]=[0,0,1][B-2]),B==3)for(q=N;q<P;q++)g[q+1]=g[q+1]+(g[q+1-N]>>>1)&255;for(let K=0;K<T;K++)if(V=v+K*P,H=V+K+1,B=g[H-1],q=0,B==0)for(;q<P;q++)g[V+q]=g[H+q];else if(B==1){for(;q<N;q++)g[V+q]=g[H+q];for(;q<P;q++)g[V+q]=g[H+q]+g[V+q-N]}else if(B==2)for(;q<P;q++)g[V+q]=g[H+q]+g[V+q-P];else if(B==3){for(;q<N;q++)g[V+q]=g[H+q]+(g[V+q-P]>>>1);for(;q<P;q++)g[V+q]=g[H+q]+(g[V+q-P]+g[V+q-N]>>>1)}else{for(;q<N;q++)g[V+q]=g[H+q]+u(0,g[V+q-P],0);for(;q<P;q++)g[V+q]=g[H+q]+u(g[V+q-N],g[V+q-P],g[V+q-N-P])}return g}function u(g,y,v){const w=g+y-v,T=w-g,N=w-y,P=w-v;return T*T<=N*N&&T*T<=P*P?g:N*N<=P*P?y:v}function d(g,y,v){v.width=r.readUint(g,y),y+=4,v.height=r.readUint(g,y),y+=4,v.depth=g[y],y++,v.ctype=g[y],y++,v.compress=g[y],y++,v.filter=g[y],y++,v.interlace=g[y],y++}function f(g,y,v,w,T,N,P,V,H){const B=Math.min(y,T),q=Math.min(v,N);let K=0,z=0;for(let ne=0;ne<q;ne++)for(let M=0;M<B;M++)if(P>=0&&V>=0?(K=ne*y+M<<2,z=(V+ne)*T+P+M<<2):(K=(-V+ne)*y-P+M<<2,z=ne*T+M<<2),H==0)w[z]=g[K],w[z+1]=g[K+1],w[z+2]=g[K+2],w[z+3]=g[K+3];else if(H==1){var O=g[K+3]*.00392156862745098,x=g[K]*O,S=g[K+1]*O,I=g[K+2]*O,C=w[z+3]*(1/255),L=w[z]*C,k=w[z+1]*C,G=w[z+2]*C;const D=1-O,te=O+C*D,W=te==0?0:1/te;w[z+3]=255*te,w[z+0]=(x+L*D)*W,w[z+1]=(S+k*D)*W,w[z+2]=(I+G*D)*W}else if(H==2)O=g[K+3],x=g[K],S=g[K+1],I=g[K+2],C=w[z+3],L=w[z],k=w[z+1],G=w[z+2],O==C&&x==L&&S==k&&I==G?(w[z]=0,w[z+1]=0,w[z+2]=0,w[z+3]=0):(w[z]=x,w[z+1]=S,w[z+2]=I,w[z+3]=O);else if(H==3){if(O=g[K+3],x=g[K],S=g[K+1],I=g[K+2],C=w[z+3],L=w[z],k=w[z+1],G=w[z+2],O==C&&x==L&&S==k&&I==G)continue;if(O<220&&C>20)return!1}return!0}return{decode:function(y){const v=new Uint8Array(y);let w=8;const T=r,N=T.readUshort,P=T.readUint,V={tabs:{},frames:[]},H=new Uint8Array(v.length);let B,q=0,K=0;const z=[137,80,78,71,13,10,26,10];for(var O=0;O<8;O++)if(v[O]!=z[O])throw"The input is not a PNG file!";for(;w<v.length;){const ne=T.readUint(v,w);w+=4;const M=T.readASCII(v,w,4);if(w+=4,M=="IHDR")d(v,w,V);else if(M=="iCCP"){for(var x=w;v[x]!=0;)x++;T.readASCII(v,w,x-w),v[x+1];const D=v.slice(x+2,w+ne);let te=null;try{te=n(D)}catch{te=s(D)}V.tabs[M]=te}else if(M=="CgBI")V.tabs[M]=v.slice(w,w+4);else if(M=="IDAT"){for(O=0;O<ne;O++)H[q+O]=v[w+O];q+=ne}else if(M=="acTL")V.tabs[M]={num_frames:P(v,w),num_plays:P(v,w+4)},B=new Uint8Array(v.length);else if(M=="fcTL"){K!=0&&((G=V.frames[V.frames.length-1]).data=t(V,B.slice(0,K),G.rect.width,G.rect.height),K=0);const D={x:P(v,w+12),y:P(v,w+16),width:P(v,w+4),height:P(v,w+8)};let te=N(v,w+22);te=N(v,w+20)/(te==0?100:te);const W={rect:D,delay:Math.round(1e3*te),dispose:v[w+24],blend:v[w+25]};V.frames.push(W)}else if(M=="fdAT"){for(O=0;O<ne-4;O++)B[K+O]=v[w+O+4];K+=ne-4}else if(M=="pHYs")V.tabs[M]=[T.readUint(v,w),T.readUint(v,w+4),v[w+8]];else if(M=="cHRM")for(V.tabs[M]=[],O=0;O<8;O++)V.tabs[M].push(T.readUint(v,w+4*O));else if(M=="tEXt"||M=="zTXt"){V.tabs[M]==null&&(V.tabs[M]={});var S=T.nextZero(v,w),I=T.readASCII(v,w,S-w),C=w+ne-S-1;if(M=="tEXt")k=T.readASCII(v,S+1,C);else{var L=n(v.slice(S+2,S+2+C));k=T.readUTF8(L,0,L.length)}V.tabs[M][I]=k}else if(M=="iTXt"){V.tabs[M]==null&&(V.tabs[M]={}),S=0,x=w,S=T.nextZero(v,x),I=T.readASCII(v,x,S-x);const D=v[x=S+1];var k;v[x+1],x+=2,S=T.nextZero(v,x),T.readASCII(v,x,S-x),x=S+1,S=T.nextZero(v,x),T.readUTF8(v,x,S-x),C=ne-((x=S+1)-w),D==0?k=T.readUTF8(v,x,C):(L=n(v.slice(x,x+C)),k=T.readUTF8(L,0,L.length)),V.tabs[M][I]=k}else if(M=="PLTE")V.tabs[M]=T.readBytes(v,w,ne);else if(M=="hIST"){const D=V.tabs.PLTE.length/3;for(V.tabs[M]=[],O=0;O<D;O++)V.tabs[M].push(N(v,w+2*O))}else if(M=="tRNS")V.ctype==3?V.tabs[M]=T.readBytes(v,w,ne):V.ctype==0?V.tabs[M]=N(v,w):V.ctype==2&&(V.tabs[M]=[N(v,w),N(v,w+2),N(v,w+4)]);else if(M=="gAMA")V.tabs[M]=T.readUint(v,w)/1e5;else if(M=="sRGB")V.tabs[M]=v[w];else if(M=="bKGD")V.ctype==0||V.ctype==4?V.tabs[M]=[N(v,w)]:V.ctype==2||V.ctype==6?V.tabs[M]=[N(v,w),N(v,w+2),N(v,w+4)]:V.ctype==3&&(V.tabs[M]=v[w]);else if(M=="IEND")break;w+=ne,T.readUint(v,w),w+=4}var G;return K!=0&&((G=V.frames[V.frames.length-1]).data=t(V,B.slice(0,K),G.rect.width,G.rect.height)),V.data=t(V,H,V.width,V.height),delete V.compress,delete V.interlace,delete V.filter,V},toRGBA8:function(y){const v=y.width,w=y.height;if(y.tabs.acTL==null)return[e(y.data,v,w,y).buffer];const T=[];y.frames[0].data==null&&(y.frames[0].data=y.data);const N=v*w*4,P=new Uint8Array(N),V=new Uint8Array(N),H=new Uint8Array(N);for(let q=0;q<y.frames.length;q++){const K=y.frames[q],z=K.rect.x,O=K.rect.y,x=K.rect.width,S=K.rect.height,I=e(K.data,x,S,y);if(q!=0)for(var B=0;B<N;B++)H[B]=P[B];if(K.blend==0?f(I,x,S,P,v,w,z,O,0):K.blend==1&&f(I,x,S,P,v,w,z,O,1),T.push(P.buffer.slice(0)),K.dispose!=0){if(K.dispose==1)f(V,x,S,P,v,w,z,O,0);else if(K.dispose==2)for(B=0;B<N;B++)P[B]=H[B]}}return T},_paeth:u,_copyTile:f,_bin:r}})();(function(){const{_copyTile:r}=Xr,{_bin:e}=Xr,t=Xr._paeth;var n={table:(function(){const x=new Uint32Array(256);for(let S=0;S<256;S++){let I=S;for(let C=0;C<8;C++)1&I?I=3988292384^I>>>1:I>>>=1;x[S]=I}return x})(),update(x,S,I,C){for(let L=0;L<C;L++)x=n.table[255&(x^S[I+L])]^x>>>8;return x},crc:(x,S,I)=>4294967295^n.update(4294967295,x,S,I)};function s(x,S,I,C){S[I]+=x[0]*C>>4,S[I+1]+=x[1]*C>>4,S[I+2]+=x[2]*C>>4,S[I+3]+=x[3]*C>>4}function o(x){return Math.max(0,Math.min(255,x))}function c(x,S){const I=x[0]-S[0],C=x[1]-S[1],L=x[2]-S[2],k=x[3]-S[3];return I*I+C*C+L*L+k*k}function u(x,S,I,C,L,k,G){G==null&&(G=1);const ne=C.length,M=[];for(var D=0;D<ne;D++){const X=C[D];M.push([X>>>0&255,X>>>8&255,X>>>16&255,X>>>24&255])}for(D=0;D<ne;D++){let X=4294967295;for(var te=0,W=0;W<ne;W++){var ee=c(M[D],M[W]);W!=D&&ee<X&&(X=ee,te=W)}}const F=new Uint32Array(L.buffer),Y=new Int16Array(S*I*4),ie=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(D=0;D<ie.length;D++)ie[D]=255*((ie[D]+.5)/16-.5);for(let X=0;X<I;X++)for(let pe=0;pe<S;pe++){var Z;D=4*(X*S+pe),G!=2?Z=[o(x[D]+Y[D]),o(x[D+1]+Y[D+1]),o(x[D+2]+Y[D+2]),o(x[D+3]+Y[D+3])]:(ee=ie[4*(3&X)+(3&pe)],Z=[o(x[D]+ee),o(x[D+1]+ee),o(x[D+2]+ee),o(x[D+3]+ee)]),te=0;let Ee=16777215;for(W=0;W<ne;W++){const $e=c(Z,M[W]);$e<Ee&&(Ee=$e,te=W)}const Ie=M[te],Re=[Z[0]-Ie[0],Z[1]-Ie[1],Z[2]-Ie[2],Z[3]-Ie[3]];G==1&&(pe!=S-1&&s(Re,Y,D+4,7),X!=I-1&&(pe!=0&&s(Re,Y,D+4*S-4,3),s(Re,Y,D+4*S,5),pe!=S-1&&s(Re,Y,D+4*S+4,1))),k[D>>2]=te,F[D>>2]=C[te]}}function d(x,S,I,C,L){L==null&&(L={});const{crc:k}=n,G=e.writeUint,ne=e.writeUshort,M=e.writeASCII;let D=8;const te=x.frames.length>1;let W,ee=!1,F=33+(te?20:0);if(L.sRGB!=null&&(F+=13),L.pHYs!=null&&(F+=21),L.iCCP!=null&&(W=pako.deflate(L.iCCP),F+=21+W.length+4),x.ctype==3){for(var Y=x.plte.length,ie=0;ie<Y;ie++)x.plte[ie]>>>24!=255&&(ee=!0);F+=8+3*Y+4+(ee?8+1*Y+4:0)}for(var Z=0;Z<x.frames.length;Z++)te&&(F+=38),F+=(Ie=x.frames[Z]).cimg.length+12,Z!=0&&(F+=4);F+=12;const X=new Uint8Array(F),pe=[137,80,78,71,13,10,26,10];for(ie=0;ie<8;ie++)X[ie]=pe[ie];if(G(X,D,13),D+=4,M(X,D,"IHDR"),D+=4,G(X,D,S),D+=4,G(X,D,I),D+=4,X[D]=x.depth,D++,X[D]=x.ctype,D++,X[D]=0,D++,X[D]=0,D++,X[D]=0,D++,G(X,D,k(X,D-17,17)),D+=4,L.sRGB!=null&&(G(X,D,1),D+=4,M(X,D,"sRGB"),D+=4,X[D]=L.sRGB,D++,G(X,D,k(X,D-5,5)),D+=4),L.iCCP!=null){const Re=13+W.length;G(X,D,Re),D+=4,M(X,D,"iCCP"),D+=4,M(X,D,"ICC profile"),D+=11,D+=2,X.set(W,D),D+=W.length,G(X,D,k(X,D-(Re+4),Re+4)),D+=4}if(L.pHYs!=null&&(G(X,D,9),D+=4,M(X,D,"pHYs"),D+=4,G(X,D,L.pHYs[0]),D+=4,G(X,D,L.pHYs[1]),D+=4,X[D]=L.pHYs[2],D++,G(X,D,k(X,D-13,13)),D+=4),te&&(G(X,D,8),D+=4,M(X,D,"acTL"),D+=4,G(X,D,x.frames.length),D+=4,G(X,D,L.loop!=null?L.loop:0),D+=4,G(X,D,k(X,D-12,12)),D+=4),x.ctype==3){for(G(X,D,3*(Y=x.plte.length)),D+=4,M(X,D,"PLTE"),D+=4,ie=0;ie<Y;ie++){const Re=3*ie,$e=x.plte[ie],Qe=255&$e,rt=$e>>>8&255,Dt=$e>>>16&255;X[D+Re+0]=Qe,X[D+Re+1]=rt,X[D+Re+2]=Dt}if(D+=3*Y,G(X,D,k(X,D-3*Y-4,3*Y+4)),D+=4,ee){for(G(X,D,Y),D+=4,M(X,D,"tRNS"),D+=4,ie=0;ie<Y;ie++)X[D+ie]=x.plte[ie]>>>24&255;D+=Y,G(X,D,k(X,D-Y-4,Y+4)),D+=4}}let Ee=0;for(Z=0;Z<x.frames.length;Z++){var Ie=x.frames[Z];te&&(G(X,D,26),D+=4,M(X,D,"fcTL"),D+=4,G(X,D,Ee++),D+=4,G(X,D,Ie.rect.width),D+=4,G(X,D,Ie.rect.height),D+=4,G(X,D,Ie.rect.x),D+=4,G(X,D,Ie.rect.y),D+=4,ne(X,D,C[Z]),D+=2,ne(X,D,1e3),D+=2,X[D]=Ie.dispose,D++,X[D]=Ie.blend,D++,G(X,D,k(X,D-30,30)),D+=4);const Re=Ie.cimg;G(X,D,(Y=Re.length)+(Z==0?0:4)),D+=4;const $e=D;M(X,D,Z==0?"IDAT":"fdAT"),D+=4,Z!=0&&(G(X,D,Ee++),D+=4),X.set(Re,D),D+=Y,G(X,D,k(X,$e,D-$e)),D+=4}return G(X,D,0),D+=4,M(X,D,"IEND"),D+=4,G(X,D,k(X,D-4,4)),D+=4,X.buffer}function f(x,S,I){for(let C=0;C<x.frames.length;C++){const L=x.frames[C];L.rect.width;const k=L.rect.height,G=new Uint8Array(k*L.bpl+k);L.cimg=w(L.img,k,L.bpp,L.bpl,G,S,I)}}function g(x,S,I,C,L){const k=L[0],G=L[1],ne=L[2],M=L[3],D=L[4],te=L[5];let W=6,ee=8,F=255;for(var Y=0;Y<x.length;Y++){const yt=new Uint8Array(x[Y]);for(var ie=yt.length,Z=0;Z<ie;Z+=4)F&=yt[Z+3]}const X=F!=255,pe=(function(ot,lt,Ge,ye,Te,Be){const Oe=[];for(var xe=0;xe<ot.length;xe++){const Ft=new Uint8Array(ot[xe]),kn=new Uint32Array(Ft.buffer);var it;let wn=0,Kt=0,St=lt,Zt=Ge,Ot=ye?1:0;if(xe!=0){const Wo=Be||ye||xe==1||Oe[xe-2].dispose!=0?1:2;let ai=0,Ma=1e9;for(let Dn=0;Dn<Wo;Dn++){var pt=new Uint8Array(ot[xe-1-Dn]);const qi=new Uint32Array(ot[xe-1-Dn]);let _t=lt,hn=Ge,xn=-1,En=-1;for(let Er=0;Er<Ge;Er++)for(let pn=0;pn<lt;pn++)kn[ht=Er*lt+pn]!=qi[ht]&&(pn<_t&&(_t=pn),pn>xn&&(xn=pn),Er<hn&&(hn=Er),Er>En&&(En=Er));xn==-1&&(_t=hn=xn=En=0),Te&&((1&_t)==1&&_t--,(1&hn)==1&&hn--);const Xo=(xn-_t+1)*(En-hn+1);Xo<Ma&&(Ma=Xo,ai=Dn,wn=_t,Kt=hn,St=xn-_t+1,Zt=En-hn+1)}pt=new Uint8Array(ot[xe-1-ai]),ai==1&&(Oe[xe-1].dispose=2),it=new Uint8Array(St*Zt*4),r(pt,lt,Ge,it,St,Zt,-wn,-Kt,0),Ot=r(Ft,lt,Ge,it,St,Zt,-wn,-Kt,3)?1:0,Ot==1?v(Ft,lt,Ge,it,{x:wn,y:Kt,width:St,height:Zt}):r(Ft,lt,Ge,it,St,Zt,-wn,-Kt,0)}else it=Ft.slice(0);Oe.push({rect:{x:wn,y:Kt,width:St,height:Zt},img:it,blend:Ot,dispose:0})}if(ye)for(xe=0;xe<Oe.length;xe++){if((Hn=Oe[xe]).blend==1)continue;const Ft=Hn.rect,kn=Oe[xe-1].rect,wn=Math.min(Ft.x,kn.x),Kt=Math.min(Ft.y,kn.y),St={x:wn,y:Kt,width:Math.max(Ft.x+Ft.width,kn.x+kn.width)-wn,height:Math.max(Ft.y+Ft.height,kn.y+kn.height)-Kt};Oe[xe-1].dispose=1,xe-1!=0&&y(ot,lt,Ge,Oe,xe-1,St,Te),y(ot,lt,Ge,Oe,xe,St,Te)}let Fn=0;if(ot.length!=1)for(var ht=0;ht<Oe.length;ht++){var Hn;Fn+=(Hn=Oe[ht]).rect.width*Hn.rect.height}return Oe})(x,S,I,k,G,ne),Ee={},Ie=[],Re=[];if(C!=0){const yt=[];for(Z=0;Z<pe.length;Z++)yt.push(pe[Z].img.buffer);const ot=(function(Te){let Be=0;for(var Oe=0;Oe<Te.length;Oe++)Be+=Te[Oe].byteLength;const xe=new Uint8Array(Be);let it=0;for(Oe=0;Oe<Te.length;Oe++){const pt=new Uint8Array(Te[Oe]),Fn=pt.length;for(let ht=0;ht<Fn;ht+=4){let Hn=pt[ht],Ft=pt[ht+1],kn=pt[ht+2];const wn=pt[ht+3];wn==0&&(Hn=Ft=kn=0),xe[it+ht]=Hn,xe[it+ht+1]=Ft,xe[it+ht+2]=kn,xe[it+ht+3]=wn}it+=Fn}return xe.buffer})(yt),lt=N(ot,C);for(Z=0;Z<lt.plte.length;Z++)Ie.push(lt.plte[Z].est.rgba);let Ge=0;for(Z=0;Z<pe.length;Z++){const ye=(Qe=pe[Z]).img.length;var $e=new Uint8Array(lt.inds.buffer,Ge>>2,ye>>2);Re.push($e);const Te=new Uint8Array(lt.abuf,Ge,ye);te&&u(Qe.img,Qe.rect.width,Qe.rect.height,Ie,Te,$e),Qe.img.set(Te),Ge+=ye}}else for(Y=0;Y<pe.length;Y++){var Qe=pe[Y];const yt=new Uint32Array(Qe.img.buffer);var rt=Qe.rect.width;for(ie=yt.length,$e=new Uint8Array(ie),Re.push($e),Z=0;Z<ie;Z++){const ot=yt[Z];if(Z!=0&&ot==yt[Z-1])$e[Z]=$e[Z-1];else if(Z>rt&&ot==yt[Z-rt])$e[Z]=$e[Z-rt];else{let lt=Ee[ot];if(lt==null&&(Ee[ot]=lt=Ie.length,Ie.push(ot),Ie.length>=300))break;$e[Z]=lt}}}const Dt=Ie.length;for(Dt<=256&&D==0&&(ee=Dt<=2?1:Dt<=4?2:Dt<=16?4:8,ee=Math.max(ee,M)),Y=0;Y<pe.length;Y++){(Qe=pe[Y]).rect.x,Qe.rect.y,rt=Qe.rect.width;const yt=Qe.rect.height;let ot=Qe.img;new Uint32Array(ot.buffer);let lt=4*rt,Ge=4;if(Dt<=256&&D==0){lt=Math.ceil(ee*rt/8);var gt=new Uint8Array(lt*yt);const ye=Re[Y];for(let Te=0;Te<yt;Te++){Z=Te*lt;const Be=Te*rt;if(ee==8)for(var We=0;We<rt;We++)gt[Z+We]=ye[Be+We];else if(ee==4)for(We=0;We<rt;We++)gt[Z+(We>>1)]|=ye[Be+We]<<4-4*(1&We);else if(ee==2)for(We=0;We<rt;We++)gt[Z+(We>>2)]|=ye[Be+We]<<6-2*(3&We);else if(ee==1)for(We=0;We<rt;We++)gt[Z+(We>>3)]|=ye[Be+We]<<7-1*(7&We)}ot=gt,W=3,Ge=1}else if(X==0&&pe.length==1){gt=new Uint8Array(rt*yt*3);const ye=rt*yt;for(Z=0;Z<ye;Z++){const Te=3*Z,Be=4*Z;gt[Te]=ot[Be],gt[Te+1]=ot[Be+1],gt[Te+2]=ot[Be+2]}ot=gt,W=2,Ge=3,lt=3*rt}Qe.img=ot,Qe.bpl=lt,Qe.bpp=Ge}return{ctype:W,depth:ee,plte:Ie,frames:pe}}function y(x,S,I,C,L,k,G){const ne=Uint8Array,M=Uint32Array,D=new ne(x[L-1]),te=new M(x[L-1]),W=L+1<x.length?new ne(x[L+1]):null,ee=new ne(x[L]),F=new M(ee.buffer);let Y=S,ie=I,Z=-1,X=-1;for(let Ee=0;Ee<k.height;Ee++)for(let Ie=0;Ie<k.width;Ie++){const Re=k.x+Ie,$e=k.y+Ee,Qe=$e*S+Re,rt=F[Qe];rt==0||C[L-1].dispose==0&&te[Qe]==rt&&(W==null||W[4*Qe+3]!=0)||(Re<Y&&(Y=Re),Re>Z&&(Z=Re),$e<ie&&(ie=$e),$e>X&&(X=$e))}Z==-1&&(Y=ie=Z=X=0),G&&((1&Y)==1&&Y--,(1&ie)==1&&ie--),k={x:Y,y:ie,width:Z-Y+1,height:X-ie+1};const pe=C[L];pe.rect=k,pe.blend=1,pe.img=new Uint8Array(k.width*k.height*4),C[L-1].dispose==0?(r(D,S,I,pe.img,k.width,k.height,-k.x,-k.y,0),v(ee,S,I,pe.img,k)):r(ee,S,I,pe.img,k.width,k.height,-k.x,-k.y,0)}function v(x,S,I,C,L){r(x,S,I,C,L.width,L.height,-L.x,-L.y,2)}function w(x,S,I,C,L,k,G){const ne=[];let M,D=[0,1,2,3,4];k!=-1?D=[k]:(S*C>5e5||I==1)&&(D=[0]),G&&(M={level:0});const te=d9;for(var W=0;W<D.length;W++){for(let Y=0;Y<S;Y++)T(L,x,Y,C,I,D[W]);ne.push(te.deflate(L,M))}let ee,F=1e9;for(W=0;W<ne.length;W++)ne[W].length<F&&(ee=W,F=ne[W].length);return ne[ee]}function T(x,S,I,C,L,k){const G=I*C;let ne=G+I;if(x[ne]=k,ne++,k==0)if(C<500)for(var M=0;M<C;M++)x[ne+M]=S[G+M];else x.set(new Uint8Array(S.buffer,G,C),ne);else if(k==1){for(M=0;M<L;M++)x[ne+M]=S[G+M];for(M=L;M<C;M++)x[ne+M]=S[G+M]-S[G+M-L]+256&255}else if(I==0){for(M=0;M<L;M++)x[ne+M]=S[G+M];if(k==2)for(M=L;M<C;M++)x[ne+M]=S[G+M];if(k==3)for(M=L;M<C;M++)x[ne+M]=S[G+M]-(S[G+M-L]>>1)+256&255;if(k==4)for(M=L;M<C;M++)x[ne+M]=S[G+M]-t(S[G+M-L],0,0)+256&255}else{if(k==2)for(M=0;M<C;M++)x[ne+M]=S[G+M]+256-S[G+M-C]&255;if(k==3){for(M=0;M<L;M++)x[ne+M]=S[G+M]+256-(S[G+M-C]>>1)&255;for(M=L;M<C;M++)x[ne+M]=S[G+M]+256-(S[G+M-C]+S[G+M-L]>>1)&255}if(k==4){for(M=0;M<L;M++)x[ne+M]=S[G+M]+256-t(0,S[G+M-C],0)&255;for(M=L;M<C;M++)x[ne+M]=S[G+M]+256-t(S[G+M-L],S[G+M-C],S[G+M-L-C])&255}}}function N(x,S){const I=new Uint8Array(x),C=I.slice(0),L=new Uint32Array(C.buffer),k=P(C,S),G=k[0],ne=k[1],M=I.length,D=new Uint8Array(M>>2);let te;if(I.length<2e7)for(var W=0;W<M;W+=4)te=V(G,ee=I[W]*(1/255),F=I[W+1]*(1/255),Y=I[W+2]*(1/255),ie=I[W+3]*(1/255)),D[W>>2]=te.ind,L[W>>2]=te.est.rgba;else for(W=0;W<M;W+=4){var ee=I[W]*.00392156862745098,F=I[W+1]*(1/255),Y=I[W+2]*(1/255),ie=I[W+3]*(1/255);for(te=G;te.left;)te=H(te.est,ee,F,Y,ie)<=0?te.left:te.right;D[W>>2]=te.ind,L[W>>2]=te.est.rgba}return{abuf:C.buffer,inds:D,plte:ne}}function P(x,S,I){I==null&&(I=1e-4);const C=new Uint32Array(x.buffer),L={i0:0,i1:x.length,bst:null,est:null,tdst:0,left:null,right:null};L.bst=K(x,L.i0,L.i1),L.est=z(L.bst);const k=[L];for(;k.length<S;){let ne=0,M=0;for(var G=0;G<k.length;G++)k[G].est.L>ne&&(ne=k[G].est.L,M=G);if(ne<I)break;const D=k[M],te=B(x,C,D.i0,D.i1,D.est.e,D.est.eMq255);if(D.i0>=te||D.i1<=te){D.est.L=0;continue}const W={i0:D.i0,i1:te,bst:null,est:null,tdst:0,left:null,right:null};W.bst=K(x,W.i0,W.i1),W.est=z(W.bst);const ee={i0:te,i1:D.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ee.bst={R:[],m:[],N:D.bst.N-W.bst.N},G=0;G<16;G++)ee.bst.R[G]=D.bst.R[G]-W.bst.R[G];for(G=0;G<4;G++)ee.bst.m[G]=D.bst.m[G]-W.bst.m[G];ee.est=z(ee.bst),D.left=W,D.right=ee,k[M]=W,k.push(ee)}for(k.sort(((ne,M)=>M.bst.N-ne.bst.N)),G=0;G<k.length;G++)k[G].ind=G;return[L,k]}function V(x,S,I,C,L){if(x.left==null)return x.tdst=(function(W,ee,F,Y,ie){const Z=ee-W[0],X=F-W[1],pe=Y-W[2],Ee=ie-W[3];return Z*Z+X*X+pe*pe+Ee*Ee})(x.est.q,S,I,C,L),x;const k=H(x.est,S,I,C,L);let G=x.left,ne=x.right;k>0&&(G=x.right,ne=x.left);const M=V(G,S,I,C,L);if(M.tdst<=k*k)return M;const D=V(ne,S,I,C,L);return D.tdst<M.tdst?D:M}function H(x,S,I,C,L){const{e:k}=x;return k[0]*S+k[1]*I+k[2]*C+k[3]*L-x.eMq}function B(x,S,I,C,L,k){for(C-=4;I<C;){for(;q(x,I,L)<=k;)I+=4;for(;q(x,C,L)>k;)C-=4;if(I>=C)break;const G=S[I>>2];S[I>>2]=S[C>>2],S[C>>2]=G,I+=4,C-=4}for(;q(x,I,L)>k;)I-=4;return I+4}function q(x,S,I){return x[S]*I[0]+x[S+1]*I[1]+x[S+2]*I[2]+x[S+3]*I[3]}function K(x,S,I){const C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],L=[0,0,0,0],k=I-S>>2;for(let G=S;G<I;G+=4){const ne=x[G]*.00392156862745098,M=x[G+1]*(1/255),D=x[G+2]*(1/255),te=x[G+3]*(1/255);L[0]+=ne,L[1]+=M,L[2]+=D,L[3]+=te,C[0]+=ne*ne,C[1]+=ne*M,C[2]+=ne*D,C[3]+=ne*te,C[5]+=M*M,C[6]+=M*D,C[7]+=M*te,C[10]+=D*D,C[11]+=D*te,C[15]+=te*te}return C[4]=C[1],C[8]=C[2],C[9]=C[6],C[12]=C[3],C[13]=C[7],C[14]=C[11],{R:C,m:L,N:k}}function z(x){const{R:S}=x,{m:I}=x,{N:C}=x,L=I[0],k=I[1],G=I[2],ne=I[3],M=C==0?0:1/C,D=[S[0]-L*L*M,S[1]-L*k*M,S[2]-L*G*M,S[3]-L*ne*M,S[4]-k*L*M,S[5]-k*k*M,S[6]-k*G*M,S[7]-k*ne*M,S[8]-G*L*M,S[9]-G*k*M,S[10]-G*G*M,S[11]-G*ne*M,S[12]-ne*L*M,S[13]-ne*k*M,S[14]-ne*G*M,S[15]-ne*ne*M],te=D,W=O;let ee=[Math.random(),Math.random(),Math.random(),Math.random()],F=0,Y=0;if(C!=0)for(let Z=0;Z<16&&(ee=W.multVec(te,ee),Y=Math.sqrt(W.dot(ee,ee)),ee=W.sml(1/Y,ee),!(Z!=0&&Math.abs(Y-F)<1e-9));Z++)F=Y;const ie=[L*M,k*M,G*M,ne*M];return{Cov:D,q:ie,e:ee,L:F,eMq255:W.dot(W.sml(255,ie),ee),eMq:W.dot(ee,ie),rgba:(Math.round(255*ie[3])<<24|Math.round(255*ie[2])<<16|Math.round(255*ie[1])<<8|Math.round(255*ie[0])<<0)>>>0}}var O={multVec:(x,S)=>[x[0]*S[0]+x[1]*S[1]+x[2]*S[2]+x[3]*S[3],x[4]*S[0]+x[5]*S[1]+x[6]*S[2]+x[7]*S[3],x[8]*S[0]+x[9]*S[1]+x[10]*S[2]+x[11]*S[3],x[12]*S[0]+x[13]*S[1]+x[14]*S[2]+x[15]*S[3]],dot:(x,S)=>x[0]*S[0]+x[1]*S[1]+x[2]*S[2]+x[3]*S[3],sml:(x,S)=>[x*S[0],x*S[1],x*S[2],x*S[3]]};Xr.encode=function(S,I,C,L,k,G,ne){L==null&&(L=0),ne==null&&(ne=!1);const M=g(S,I,C,L,[!1,!1,!1,0,ne,!1]);return f(M,-1),d(M,I,C,k,G)},Xr.encodeLL=function(S,I,C,L,k,G,ne,M){const D={ctype:0+(L==1?0:2)+(k==0?0:4),depth:G,frames:[]},te=(L+k)*G,W=te*I;for(let ee=0;ee<S.length;ee++)D.frames.push({rect:{x:0,y:0,width:I,height:C},img:new Uint8Array(S[ee]),blend:0,dispose:1,bpp:Math.ceil(te/8),bpl:Math.ceil(W/8)});return f(D,0,!0),d(D,I,C,ne,M)},Xr.encode.compress=g,Xr.encode.dither=u,Xr.quantize=N,Xr.quantize.getKDtree=P,Xr.quantize.getNearest=V})();const mR={toArrayBuffer(r,e){const t=r.width,n=r.height,s=t<<2,o=r.getContext("2d").getImageData(0,0,t,n),c=new Uint32Array(o.data.buffer),u=(32*t+31)/32<<2,d=u*n,f=122+d,g=new ArrayBuffer(f),y=new DataView(g),v=1<<20;let w,T,N,P,V=v,H=0,B=0,q=0;function K(x){y.setUint16(B,x,!0),B+=2}function z(x){y.setUint32(B,x,!0),B+=4}function O(x){B+=x}K(19778),z(f),O(4),z(122),z(108),z(t),z(-n>>>0),K(1),K(32),z(3),z(d),z(2835),z(2835),O(8),z(16711680),z(65280),z(255),z(4278190080),z(1466527264),(function x(){for(;H<n&&V>0;){for(P=122+H*u,w=0;w<s;)V--,T=c[q++],N=T>>>24,y.setUint32(P+w,T<<8|N),w+=4;H++}q<c.length?(V=v,setTimeout(x,mR._dly)):e(g)})()},toBlob(r,e){this.toArrayBuffer(r,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var ir={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},f9={[ir.CHROME]:16384,[ir.FIREFOX]:11180,[ir.DESKTOP_SAFARI]:16384,[ir.IE]:8192,[ir.IOS]:4096,[ir.ETC]:8192};const ev=typeof window<"u",gR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Nm=ev&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),m9=(ev||gR)&&(Nm&&Nm.getOriginalSymbol(window,"File")||typeof File<"u"&&File),pR=(ev||gR)&&(Nm&&Nm.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function tv(r,e,t=Date.now()){return new Promise((n=>{const s=r.split(","),o=s[0].match(/:(.*?);/)[1],c=globalThis.atob(s[1]);let u=c.length;const d=new Uint8Array(u);for(;u--;)d[u]=c.charCodeAt(u);const f=new Blob([d],{type:o});f.name=e,f.lastModified=t,n(f)}))}function yR(r){return new Promise(((e,t)=>{const n=new pR;n.onload=()=>e(n.result),n.onerror=s=>t(s),n.readAsDataURL(r)}))}function _R(r){return new Promise(((e,t)=>{const n=new Image;n.onload=()=>e(n),n.onerror=s=>t(s),n.src=r}))}function vo(){if(vo.cachedResult!==void 0)return vo.cachedResult;let r=ir.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?r=ir.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?r=ir.IOS:/Safari/i.test(e)?r=ir.DESKTOP_SAFARI:/Firefox/i.test(e)?r=ir.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(r=ir.IE),vo.cachedResult=r,vo.cachedResult}function vR(r,e){const t=vo(),n=f9[t];let s=r,o=e,c=s*o;const u=s>o?o/s:s/o;for(;c>n*n;){const d=(n+s)/2,f=(n+o)/2;d<f?(o=f,s=f*u):(o=d*u,s=d),c=s*o}return{width:s,height:o}}function _g(r,e){let t,n;try{if(t=new OffscreenCanvas(r,e),n=t.getContext("2d"),n===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),n=t.getContext("2d")}return t.width=r,t.height=e,[t,n]}function bR(r,e){const{width:t,height:n}=vR(r.width,r.height),[s,o]=_g(t,n);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,s.width,s.height)),o.drawImage(r,0,0,s.width,s.height),s}function Kf(){return Kf.cachedResult!==void 0||(Kf.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Kf.cachedResult}function km(r,e={}){return new Promise((function(t,n){let s,o;var c=function(){try{return o=bR(s,e.fileType||r.type),t([s,o])}catch(d){return n(d)}},u=function(d){try{var f=function(g){try{throw g}catch(y){return n(y)}};try{let g;return yR(r).then((function(y){try{return g=y,_R(g).then((function(v){try{return s=v,(function(){try{return c()}catch(w){return n(w)}})()}catch(w){return f(w)}}),f)}catch(v){return f(v)}}),f)}catch(g){f(g)}}catch(g){return n(g)}};try{if(Kf()||[ir.DESKTOP_SAFARI,ir.MOBILE_SAFARI].includes(vo()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(r).then((function(d){try{return s=d,c()}catch{return u()}}),u)}catch{u()}}))}function Dm(r,e,t,n,s=1){return new Promise((function(o,c){let u;if(e==="image/png"){let y,v,w;return y=r.getContext("2d"),{data:v}=y.getImageData(0,0,r.width,r.height),w=Xr.encode([v.buffer],r.width,r.height,4096*s),u=new Blob([w],{type:e}),u.name=t,u.lastModified=n,d.call(this)}{let y=function(){return d.call(this)};var f=y;if(e==="image/bmp")return new Promise((v=>mR.toBlob(r,v))).then((function(v){try{return u=v,u.name=t,u.lastModified=n,y.call(this)}catch(w){return c(w)}}).bind(this),c);{let v=function(){return y.call(this)};var g=v;if(typeof OffscreenCanvas=="function"&&r instanceof OffscreenCanvas)return r.convertToBlob({type:e,quality:s}).then((function(w){try{return u=w,u.name=t,u.lastModified=n,v.call(this)}catch(T){return c(T)}}).bind(this),c);{let w;return w=r.toDataURL(e,s),tv(w,t,n).then((function(T){try{return u=T,v.call(this)}catch(N){return c(N)}}).bind(this),c)}}}function d(){return o(u)}}))}function Si(r){r.width=0,r.height=0}function Jl(){return new Promise((function(r,e){let t,n,s,o;return Jl.cachedResult!==void 0?r(Jl.cachedResult):tv("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return t=c,km(t).then((function(u){try{return n=u[1],Dm(n,t.type,t.name,t.lastModified).then((function(d){try{return s=d,Si(n),km(s).then((function(f){try{return o=f[0],Jl.cachedResult=o.width===1&&o.height===2,r(Jl.cachedResult)}catch(g){return e(g)}}),e)}catch(f){return e(f)}}),e)}catch(d){return e(d)}}),e)}catch(u){return e(u)}}),e)}))}function wR(r){return new Promise(((e,t)=>{const n=new pR;n.onload=s=>{const o=new DataView(s.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const c=o.byteLength;let u=2;for(;u<c;){if(o.getUint16(u+2,!1)<=8)return e(-1);const d=o.getUint16(u,!1);if(u+=2,d==65505){if(o.getUint32(u+=2,!1)!=1165519206)return e(-1);const f=o.getUint16(u+=6,!1)==18761;u+=o.getUint32(u+4,f);const g=o.getUint16(u,f);u+=2;for(let y=0;y<g;y++)if(o.getUint16(u+12*y,f)==274)return e(o.getUint16(u+12*y+8,f))}else{if((65280&d)!=65280)break;u+=o.getUint16(u,!1)}}return e(-1)},n.onerror=s=>t(s),n.readAsArrayBuffer(r)}))}function xR(r,e){const{width:t}=r,{height:n}=r,{maxWidthOrHeight:s}=e;let o,c=r;return isFinite(s)&&(t>s||n>s)&&([c,o]=_g(t,n),t>n?(c.width=s,c.height=n/t*s):(c.width=t/n*s,c.height=s),o.drawImage(r,0,0,c.width,c.height),Si(r)),c}function ER(r,e){const{width:t}=r,{height:n}=r,[s,o]=_g(t,n);switch(e>4&&e<9?(s.width=n,s.height=t):(s.width=t,s.height=n),e){case 2:o.transform(-1,0,0,1,t,0);break;case 3:o.transform(-1,0,0,-1,t,n);break;case 4:o.transform(1,0,0,-1,0,n);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,n,0);break;case 7:o.transform(0,-1,-1,0,n,t);break;case 8:o.transform(0,-1,1,0,0,t)}return o.drawImage(r,0,0,t,n),Si(r),s}function MT(r,e,t=0){return new Promise((function(n,s){let o,c,u,d,f,g,y,v,w,T,N,P,V,H,B,q,K,z,O,x;function S(C=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=C,e.onProgress(Math.min(o,100))}function I(C){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(C,o),100),e.onProgress(o)}return o=t,c=e.maxIteration||10,u=1024*e.maxSizeMB*1024,S(),km(r,e).then((function(C){try{return[,d]=C,S(),f=xR(d,e),S(),new Promise((function(L,k){var G;if(!(G=e.exifOrientation))return wR(r).then((function(M){try{return G=M,ne.call(this)}catch(D){return k(D)}}).bind(this),k);function ne(){return L(G)}return ne.call(this)})).then((function(L){try{return g=L,S(),Jl().then((function(k){try{return y=k?f:ER(f,g),S(),v=e.initialQuality||1,w=e.fileType||r.type,Dm(y,w,r.name,r.lastModified,v).then((function(G){try{{let te=function(){if(c--&&(B>u||B>V)){let ee,F;return ee=x?.95*O.width:O.width,F=x?.95*O.height:O.height,[K,z]=_g(ee,F),z.drawImage(O,0,0,ee,F),v*=w==="image/png"?.85:.95,Dm(K,w,r.name,r.lastModified,v).then((function(Y){try{return q=Y,Si(O),O=K,B=q.size,I(Math.min(99,Math.floor((H-B)/(H-u)*100))),te}catch(ie){return s(ie)}}),s)}return[1]},W=function(){return Si(O),Si(K),Si(f),Si(y),Si(d),I(100),n(q)};var M=te,D=W;if(T=G,S(),N=T.size>u,P=T.size>r.size,!N&&!P)return I(100),n(T);var ne;return V=r.size,H=T.size,B=H,O=y,x=!e.alwaysKeepResolution&&N,(ne=(function(ee){for(;ee;){if(ee.then)return void ee.then(ne,s);try{if(ee.pop){if(ee.length)return ee.pop()?W.call(this):ee;ee=te}else ee=ee.call(this)}catch(F){return s(F)}}}).bind(this))(te)}}catch(te){return s(te)}}).bind(this),s)}catch(G){return s(G)}}).bind(this),s)}catch(k){return s(k)}}).bind(this),s)}catch(L){return s(L)}}).bind(this),s)}))}const g9=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Fy;function p9(r,e){return new Promise(((t,n)=>{Fy||(Fy=(function(c){const u=[];return u.push(c),URL.createObjectURL(new Blob(u))})(g9));const s=new Worker(Fy);s.addEventListener("message",(function(c){if(e.signal&&e.signal.aborted)s.terminate();else if(c.data.progress===void 0){if(c.data.error)return n(new Error(c.data.error)),void s.terminate();t(c.data.file),s.terminate()}else e.onProgress(c.data.progress)})),s.addEventListener("error",n),e.signal&&e.signal.addEventListener("abort",(()=>{n(e.signal.reason),s.terminate()})),s.postMessage({file:r,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function fn(r,e){return new Promise((function(t,n){let s,o,c,u,d,f;if(s={...e},c=0,{onProgress:u}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,d=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=w=>{c=w,typeof u=="function"&&u(c)},!(r instanceof Blob||r instanceof m9))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(r.type))return n(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!d||typeof Worker!="function"||f)return MT(r,s).then((function(w){try{return o=w,v.call(this)}catch(T){return n(T)}}).bind(this),n);var g=(function(){try{return v.call(this)}catch(w){return n(w)}}).bind(this),y=function(w){try{return MT(r,s).then((function(T){try{return o=T,g()}catch(N){return n(N)}}),n)}catch(T){return n(T)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",p9(r,s).then((function(w){try{return o=w,g()}catch{return y()}}),y)}catch{y()}function v(){try{o.name=r.name,o.lastModified=r.lastModified}catch{}try{s.preserveExif&&r.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===r.type)&&(o=fR(r,o))}catch{}return t(o)}}))}fn.getDataUrlFromFile=yR,fn.getFilefromDataUrl=tv,fn.loadImage=_R,fn.drawImageInCanvas=bR,fn.drawFileInCanvas=km,fn.canvasToFile=Dm,fn.getExifOrientation=wR,fn.handleMaxWidthOrHeight=xR,fn.followExifOrientation=ER,fn.cleanupCanvasMemory=Si,fn.isAutoOrientationInBrowser=Jl,fn.approximateBelowMaximumCanvasSizeOfBrowser=vR,fn.copyExifWithoutOrientation=fR,fn.getBrowserName=vo,fn.version="2.0.2";const y9=["badword","ktgz","kfr","hakaret","aptal","salak","idiot","stupid","xxx","porn"];function _9(r){if(!r)return!0;const e=r.toLowerCase();return!y9.some(t=>e.includes(t))}async function v9(r,e){try{const t=kt(qe,"users",r);return await wr(t,{blockedUsers:K_(e)}),!0}catch(t){throw console.error("Error blocking user:",t),t}}async function b9(r,e){try{const t=kt(qe,"users",r);return await wr(t,{blockedUsers:SI(e)}),!0}catch(t){throw console.error("Error unblocking user:",t),t}}async function w9(r,e){try{const t=kt(qe,"users",r),n=await Ra(t);return n.exists()?(n.data().blockedUsers||[]).includes(e):!1}catch{return!1}}function x9({onClose:r,onPostCreated:e}){const{t}=Bn(),{currentUser:n}=si(),s=$.useRef(null),[o,c]=$.useState(""),[u,d]=$.useState(""),[f,g]=$.useState(""),[y,v]=$.useState(!1),[w,T]=$.useState("none"),[N,P]=$.useState(null),[V,H]=$.useState(null),[B,q]=$.useState(!1),[K,z]=$.useState(!1),[O,x]=$.useState(""),[S,I]=$.useState(""),[C,L]=$.useState(0);$.useEffect(()=>{if(u){const D=By.find(te=>te.value===u);D&&g(t(D.labelKey))}},[u,t]);const k=async D=>{const te=D.target.files[0];if(te){const W=new FileReader;W.onloadend=()=>H(W.result),W.readAsDataURL(te),P(te)}},G=async()=>{if(N){z(!0);try{let D=N;try{D=await fn(N,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0})}catch(W){console.warn("Compression failed for analysis, using original",W)}const te=new FileReader;te.readAsDataURL(D),te.onloadend=async()=>{const W=te.result,ee=await XI(W,"en"),F=(ee.plant_name+" "+ee.disease_name).toLowerCase();let Y=null;for(const ie of By)if(F.includes(ie.value)){Y=ie;break}Y?(d(Y.value),g(t(Y.labelKey)),I(`${t("auto_detect")}: ${t(Y.labelKey)}`)):I("Plant detected but not in our list yet."),setTimeout(()=>I(""),3e3),z(!1)}}catch(D){console.error("Auto detect failed",D),x(t("error_diagnosis_failed")),z(!1)}}},ne=async D=>{if(D.preventDefault(),!!o.trim()){if(!_9(o)){x(t("unsafe_content_warning")||"Your post contains inappropriate language.");return}q(!0),x(""),L(0);try{let te=null;if(N)try{console.log("Compressing for Base64 storage...");const F=await fn(N,{maxSizeMB:.15,maxWidthOrHeight:800,useWebWorker:!0,initialQuality:.7});te=await new Promise((Y,ie)=>{const Z=new FileReader;Z.readAsDataURL(F),Z.onload=()=>Y(Z.result),Z.onerror=X=>ie(X)}),console.log("Base64 string ready, length:",te.length)}catch(ee){console.error("Compression failed:",ee),x("Image is too large and could not be compressed."),q(!1);return}let W=null;try{const ee=xs(zn(qe,"analyses"),Ia("userId","==",n.uid)),F=xs(zn(qe,"posts"),Ia("userId","==",n.uid)),[Y,ie]=await Promise.all([Ca(ee),Ca(F)]);W=dR(Y.size,ie.size)}catch(ee){console.error("Level calc failed",ee)}await nR(n.uid,{authorName:n.displayName||"Gardener",content:o,plantType:u||"other",image:te,authorLevel:W?.level||1,authorTierColor:W?.levelInfo?.tierColor||"text-green-500",authorTierName:W?.levelInfo?.trTitle||"Filiz",authorXP:W?.totalXP||0}),e(),r()}catch(te){console.error("FULL POST ERROR:",te),x(te.message||t("error_diagnosis_failed")||"Failed to share post.")}finally{q(!1)}}},M=By.filter(D=>t(D.labelKey).toLowerCase().includes(f.toLowerCase()));return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[b.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:t("ask_question")}),b.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(Bo,{className:"w-5 h-5 text-gray-500"})})]}),b.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[O&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:O}),S&&b.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg text-sm",children:S}),b.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[b.jsx("textarea",{className:"w-full p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none resize-none min-h-[120px]",placeholder:t("what_plant_placeholder"),value:o,onChange:D=>c(D.target.value),required:!0}),b.jsxs("div",{className:"relative",children:[b.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1 ml-1 uppercase",children:t("plant_diagnosis")}),b.jsxs("div",{className:"relative",children:[b.jsx(MV,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),b.jsx("input",{type:"text",className:"w-full pl-9 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:t("select_plant"),value:f,onChange:D=>{g(D.target.value),v(!0),D.target.value===""&&d("")},onFocus:()=>v(!0)}),b.jsx(DI,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),y&&b.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar",children:M.length>0?M.map(D=>b.jsx("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200",onClick:()=>{d(D.value),g(t(D.labelKey)),v(!1)},children:t(D.labelKey)},D.value)):b.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:"No Match"})}),y&&b.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>v(!1)})]}),V&&b.jsxs("div",{className:"relative rounded-xl overflow-hidden max-h-48 bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[b.jsx("img",{src:V,alt:"Preview",className:"w-full h-full object-cover"}),b.jsx("button",{type:"button",onClick:()=>{P(null),H(null)},className:"absolute top-2 right-2 p-1 bg-black/50 text-white rounded-full hover:bg-black/70",disabled:B,children:b.jsx(Bo,{className:"w-4 h-4"})}),b.jsxs("button",{type:"button",onClick:G,disabled:K,className:"absolute bottom-2 right-2 px-3 py-1.5 bg-blue-600/90 text-white rounded-lg text-xs font-bold flex items-center gap-1.5 hover:bg-blue-700 backdrop-blur-sm shadow-lg transition-transform hover:scale-105",children:[K?b.jsx(Ao,{className:"w-3 h-3 animate-spin"}):b.jsx(JV,{className:"w-3 h-3"}),t(K?"detecting":"auto_detect")]})]}),B&&C>0&&b.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:[b.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${C}%`}}),b.jsxs("p",{className:"text-xs text-center mt-1 text-gray-500",children:[Math.round(C),"%"]})]}),b.jsxs("div",{className:"flex justify-between items-center pt-2",children:[b.jsxs("button",{type:"button",onClick:()=>s.current?.click(),disabled:B,className:"flex items-center gap-2 text-gray-500 hover:text-green-600 transition-colors px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:[b.jsx(LI,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:t("upload_photo")})]}),b.jsx("input",{type:"file",ref:s,onChange:k,accept:"image/*",className:"hidden"}),b.jsxs("button",{type:"submit",disabled:B||!o.trim(),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl active:scale-95",children:[B?b.jsx(Ao,{className:"w-4 h-4 animate-spin"}):b.jsx(bh,{className:"w-4 h-4"}),B?"...":t("ask_question")]})]})]})]})]})})}function E9({user:r,onClose:e}){const{currentUser:t}=si(),n=Es(),[s,o]=$.useState(!1),{t:c,i18n:u}=Bn(),{addToast:d}=Oa(),[f,g]=$.useState(r);$.useEffect(()=>{if(!r)return;const V=r.uid||r.id;if(!V)return;const H=rc(kt(qe,"users",V),B=>{B.exists()&&g({uid:B.id,...B.data()})},B=>{console.error("User listener error",B)});return()=>H()},[r]);const y=r?{...r,...f,uid:f?.uid||r.uid||r.id}:null,[v,w]=$.useState(!1);$.useEffect(()=>{t&&y&&w9(t.uid,y.uid).then(w)},[t,y]);const T=async()=>{if(!(!t||!y))try{v?(await b9(t.uid,y.uid),w(!1),d(c("user_unblocked")||"User unblocked","success")):window.confirm(c("confirm_block")||"Block this user? They won't be able to message you.")&&(await v9(t.uid,y.uid),w(!0),d(c("user_blocked")||"User blocked","success"))}catch(V){console.error(V),d("Action failed","error")}},N=V=>!V?.lastSeen||!V.lastSeen.seconds?!1:Date.now()-V.lastSeen.seconds*1e3<180*1e3;if(!r||!y)return null;const P=async()=>{if(!t){d(c("login_to_message"),"info"),n("/login");return}if(t.uid===y.uid){d(c("cannot_message_self"),"warning");return}o(!0);try{e();const V={uid:y.uid,name:y.name||y.displayName||"User",photoURL:y.photoURL||y.avatar||null};n("/messages/new",{state:{targetUser:V}})}catch(V){console.error(V),d("Error","error")}finally{o(!1)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl transform transition-all scale-100",onClick:V=>V.stopPropagation(),children:[b.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/10 hover:bg-black/20 rounded-full transition-colors z-10",children:b.jsx(Bo,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),b.jsxs("div",{className:"flex flex-col items-center relative",children:[b.jsx("img",{src:y.photoURL||y.avatar||`https://ui-avatars.com/api/?name=${y.name}`,alt:y.name,className:"w-24 h-24 rounded-full object-cover mb-4 shadow-lg border-4 border-green-50 dark:border-green-900"}),b.jsxs("div",{className:`absolute top-2 right-2 px-3 py-1 rounded-full text-xs font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 ${N(y)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[b.jsx("div",{className:`w-2 h-2 rounded-full ${N(y)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),N(y)?"Online":"Offline"]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-0.5 text-center",children:y.name||"User"}),(y.currentLevel||y.level)&&b.jsxs("div",{className:`text-[10px] font-bold uppercase tracking-widest mb-4 ${y.tierColor||"text-green-500"}`,children:[y.tierName||(u.language==="tr"?"FLZ":"SEEDLING"),"  SEVYE ",y.currentLevel||y.level||1,"  ",y.totalXP||0," XP"]}),b.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6 flex items-center gap-1",children:[b.jsx(Rm,{className:"w-3 h-3"}),b.jsxs("span",{children:[c("joined")||"Katlma Tarihi",": ",(()=>{const V=y.createdAt;if(!V)return c("unknown_date");const H=V.seconds?new Date(V.seconds*1e3):new Date(V);return isNaN(H)?c("unknown_date"):H.toLocaleDateString(u.language,{day:"numeric",month:"long",year:"numeric"})})()]})]}),b.jsxs("div",{className:"flex flex-col gap-3 w-full mt-6",children:[b.jsxs("button",{onClick:()=>{const V=y.uid||y.id;V?(e(),n(`/profile/${V}`)):d("User ID missing","error")},className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-300 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 transition-transform active:scale-95",children:[b.jsx(Rm,{className:"w-5 h-5"}),c("view_profile")||"Profili Gr"]}),b.jsx("button",{onClick:P,disabled:s||v,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95 disabled:opacity-70",children:s?c("starting_chat")||"Balatlyor...":b.jsxs(b.Fragment,{children:[" ",b.jsx(vh,{className:"w-5 h-5"})," ",c("send_message")||"Mesaj Gnder"," "]})}),t&&t.uid!==y.uid&&b.jsx("button",{onClick:T,className:`w-full py-2.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors ${v?"bg-gray-200 text-gray-700 hover:bg-gray-300":"text-red-500 hover:bg-red-50 border border-red-100"}`,children:v?c("unblock_user")||"Engeli Kaldr":c("block_user")||"Kullancy Engelle"})]})]})]})})}function nv(){return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white dark:bg-gray-900 transition-opacity duration-300",children:b.jsxs("div",{className:"flex flex-col items-center animate-fade-in",children:[b.jsxs("div",{className:"relative w-24 h-24 flex items-center justify-center",children:[b.jsx("div",{className:"absolute inset-0 border-4 border-green-100 dark:border-green-900 rounded-full"}),b.jsx("div",{className:"absolute inset-0 border-4 border-green-500 rounded-full border-t-transparent animate-spin"}),b.jsx(zi,{className:"w-10 h-10 text-green-600 dark:text-green-400 animate-pulse"})]}),b.jsx("h3",{className:"mt-6 text-lg font-bold text-gray-800 dark:text-gray-200 animate-pulse tracking-wide",children:"Plant AI"})]})})}function T9(){const{t:r}=Bn(),{currentUser:e}=si(),{addToast:t}=Oa(),[n,s]=$.useState([]),[o,c]=$.useState(!0),[u,d]=$.useState(!1),[f,g]=$.useState(null),[y,v]=$.useState(null);return $.useEffect(()=>{const w=xs(zn(qe,"posts"),X6("createdAt","desc"),J6(50)),T=rc(w,N=>{const P=N.docs.map(V=>({id:V.id,...V.data()}));s(P),c(!1)},N=>{console.error("Error fetching posts:",N),c(!1),t("Failed to load community posts","error")});return()=>T()},[]),b.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 pb-20 p-4",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 sticky top-0 z-20 gap-4",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white shrink-0",children:r("community")}),b.jsx("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:b.jsxs("button",{onClick:()=>{if(!e){t(r("login_to_post")||"Please login to post.","error");return}d(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow-md transition-all active:scale-95 shrink-0 whitespace-nowrap",children:[b.jsx(CV,{className:"w-5 h-5"}),b.jsx("span",{className:"hidden sm:inline",children:r("ask_question")}),b.jsx("span",{className:"sm:hidden",children:r("ask_question")})]})})]}),o?b.jsx(nv,{}):n.length>0?b.jsx("div",{className:"space-y-6",children:n.map(w=>b.jsx(hR,{post:w,onViewAnalysis:T=>g(T),onUserClick:T=>{v({id:T,name:w.authorName||"Gardener",avatar:w.userAvatar})}},w.id))}):b.jsxs("div",{className:"text-center py-20 text-gray-500 bg-white dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700",children:[b.jsx("p",{className:"text-lg mb-2",children:r("no_posts_yet")}),b.jsx("p",{className:"text-sm",children:r("be_the_first")})]}),u&&b.jsx(x9,{onClose:()=>d(!1),onPostCreated:()=>{}}),y&&b.jsx(E9,{user:y,onClose:()=>v(null)})]})}const S9="modulepreload",A9=function(r){return"/"+r},PT={},I9=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var c=f;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");s=f(t.map(g=>{if(g=A9(g),g in PT)return;PT[g]=!0;const y=g.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":S9,y||(w.as="script"),w.crossOrigin="",w.href=g,d&&w.setAttribute("nonce",d),document.head.appendChild(w),y)return new Promise((T,N)=>{w.addEventListener("load",T),w.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return s.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function Gn(r,e,t,n){return new(t||(t=Promise))((function(s,o){function c(f){try{d(n.next(f))}catch(g){o(g)}}function u(f){try{d(n.throw(f))}catch(g){o(g)}}function d(f){var g;f.done?s(f.value):(g=f.value,g instanceof t?g:new t((function(y){y(g)}))).then(c,u)}d((n=n.apply(r,e||[])).next())}))}class qh{constructor(){this.listeners={}}on(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),n?.once){const s=(...o)=>{this.un(e,s),t(...o)};return this.listeners[e].add(s),()=>this.un(e,s)}return this.listeners[e].add(t),()=>this.un(e,t)}un(e,t){var n;(n=this.listeners[e])===null||n===void 0||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach((n=>n(...t)))}}const Af={decode:function(r,e){return Gn(this,void 0,void 0,(function*(){const t=new AudioContext({sampleRate:e});try{return yield t.decodeAudioData(r)}finally{t.close()}}))},createBuffer:function(r,e){if(!r||r.length===0)throw new Error("channelData must be a non-empty array");if(e<=0)throw new Error("duration must be greater than 0");if(typeof r[0]=="number"&&(r=[r]),!r[0]||r[0].length===0)throw new Error("channelData must contain non-empty channel arrays");(function(n){const s=n[0];if(s.some((o=>o>1||o<-1))){const o=s.length;let c=0;for(let u=0;u<o;u++){const d=Math.abs(s[u]);d>c&&(c=d)}for(const u of n)for(let d=0;d<o;d++)u[d]/=c}})(r);const t=r.map((n=>n instanceof Float32Array?n:Float32Array.from(n)));return{duration:e,length:t[0].length,sampleRate:t[0].length/e,numberOfChannels:t.length,getChannelData:n=>{const s=t[n];if(!s)throw new Error(`Channel ${n} not found`);return s},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function TR(r,e){const t=e.xmlns?document.createElementNS(e.xmlns,r):document.createElement(r);for(const[n,s]of Object.entries(e))if(n==="children"&&s)for(const[o,c]of Object.entries(s))c instanceof Node?t.appendChild(c):typeof c=="string"?t.appendChild(document.createTextNode(c)):t.appendChild(TR(o,c));else n==="style"?Object.assign(t.style,s):n==="textContent"?t.textContent=s:t.setAttribute(n,s.toString());return t}function LT(r,e,t){const n=TR(r,e||{});return t?.appendChild(n),n}var R9=Object.freeze({__proto__:null,createElement:LT,default:LT});const C9={fetchBlob:function(r,e,t){return Gn(this,void 0,void 0,(function*(){const n=yield fetch(r,t);if(n.status>=400)throw new Error(`Failed to fetch ${r}: ${n.status} (${n.statusText})`);return(function(s,o){Gn(this,void 0,void 0,(function*(){if(!s.body||!s.headers)return;const c=s.body.getReader(),u=Number(s.headers.get("Content-Length"))||0;let d=0;const f=g=>{d+=g?.length||0;const y=Math.round(d/u*100);o(y)};try{for(;;){const g=yield c.read();if(g.done)break;f(g.value)}}catch(g){console.warn("Progress tracking error:",g)}}))})(n.clone(),e),n.blob()}))}};function Xt(r){let e=r;const t=new Set;return{get value(){return e},set(n){Object.is(e,n)||(e=n,t.forEach((s=>s(e))))},update(n){this.set(n(e))},subscribe:n=>(t.add(n),()=>t.delete(n))}}function yo(r,e){const t=Xt(r());return e.forEach((n=>n.subscribe((()=>{const s=r();Object.is(t.value,s)||t.set(s)})))),{get value(){return t.value},subscribe:n=>t.subscribe(n)}}function ua(r,e){let t;const n=()=>{t&&(t(),t=void 0),t=r()},s=e.map((o=>o.subscribe(n)));return n(),()=>{t&&(t(),t=void 0),s.forEach((o=>o()))}}class N9 extends qh{get isPlayingSignal(){return this._isPlaying}get currentTimeSignal(){return this._currentTime}get durationSignal(){return this._duration}get volumeSignal(){return this._volume}get mutedSignal(){return this._muted}get playbackRateSignal(){return this._playbackRate}get seekingSignal(){return this._seeking}constructor(e){super(),this.isExternalMedia=!1,this.reactiveMediaEventCleanups=[],e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),this._isPlaying=Xt(!1),this._currentTime=Xt(0),this._duration=Xt(0),this._volume=Xt(this.media.volume),this._muted=Xt(this.media.muted),this._playbackRate=Xt(this.media.playbackRate||1),this._seeking=Xt(!1),this.setupReactiveMediaEvents(),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)}),{once:!0})}setupReactiveMediaEvents(){this.reactiveMediaEventCleanups.push(this.onMediaEvent("play",(()=>{this._isPlaying.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("pause",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ended",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("timeupdate",(()=>{this._currentTime.set(this.media.currentTime)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("durationchange",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("loadedmetadata",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeking",(()=>{this._seeking.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeked",(()=>{this._seeking.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("volumechange",(()=>{this._volume.set(this.media.volume),this._muted.set(this.media.muted)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ratechange",(()=>{this._playbackRate.set(this.media.playbackRate)})))}onMediaEvent(e,t,n){return this.media.addEventListener(e,t,n),()=>this.media.removeEventListener(e,t,n)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return this.media.canPlayType(e)!==""}setSrc(e,t){const n=this.getSrc();if(e&&n===e)return;this.revokeSrc();const s=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;if(n&&this.media.removeAttribute("src"),s||e)try{this.media.src=s}catch{this.media.src=e}}destroy(){this.reactiveMediaEventCleanups.forEach((e=>e())),this.reactiveMediaEventCleanups=[],this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(e){this.reactiveMediaEventCleanups.forEach((t=>t())),this.reactiveMediaEventCleanups=[],this.media=e,this.setupReactiveMediaEvents()}play(){return Gn(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(e){if(e instanceof DOMException&&e.name==="AbortError")return;throw e}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}function k9({maxTop:r,maxBottom:e,halfHeight:t,vScale:n,barMinHeight:s=0,barAlign:o}){let c=Math.round(r*t*n),u=c+Math.round(e*t*n)||1;return u<s&&(u=s,o||(c=u/2)),{topHeight:c,totalHeight:u}}function D9({barAlign:r,halfHeight:e,topHeight:t,totalHeight:n,canvasHeight:s}){return r==="top"?0:r==="bottom"?s-n:e-t}function VT(r,e,t){const n=e-r.left,s=t-r.top;return[n/r.width,s/r.height]}function SR(r){return!!(r.barWidth||r.barGap||r.barAlign)}function jT(r,e){if(!SR(e))return r;const t=e.barWidth||.5,n=t+(e.barGap||t/2);return n===0?r:Math.floor(r/n)*n}function UT({scrollLeft:r,totalWidth:e,numCanvases:t}){if(e===0)return[0];const n=r/e,s=Math.floor(n*t);return[s-1,s,s+1]}function AR(r){const e=r._cleanup;typeof e=="function"&&e()}function O9(r){const e=Xt({scrollLeft:r.scrollLeft,scrollWidth:r.scrollWidth,clientWidth:r.clientWidth}),t=yo((()=>(function(o){const{scrollLeft:c,scrollWidth:u,clientWidth:d}=o;if(u===0)return{startX:0,endX:1};const f=c/u,g=(c+d)/u;return{startX:Math.max(0,Math.min(1,f)),endX:Math.max(0,Math.min(1,g))}})(e.value)),[e]),n=yo((()=>(function(o){return{left:o.scrollLeft,right:o.scrollLeft+o.clientWidth}})(e.value)),[e]),s=()=>{e.set({scrollLeft:r.scrollLeft,scrollWidth:r.scrollWidth,clientWidth:r.clientWidth})};return r.addEventListener("scroll",s,{passive:!0}),{scrollData:e,percentages:t,bounds:n,cleanup:()=>{r.removeEventListener("scroll",s),AR(e)}}}class M9 extends qh{constructor(e,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragStream=null,this.scrollStream=null,this.subscriptions=[],this.options=e;const n=this.parentFromOptionsContainer(e.container);this.parent=n;const[s,o]=this.initHtml();n.appendChild(s),this.container=s,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),t&&o.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e=="string"?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){this.wrapper.addEventListener("click",(t=>{const n=this.wrapper.getBoundingClientRect(),[s,o]=VT(n,t.clientX,t.clientY);this.emit("click",s,o)})),this.wrapper.addEventListener("dblclick",(t=>{const n=this.wrapper.getBoundingClientRect(),[s,o]=VT(n,t.clientX,t.clientY);this.emit("dblclick",s,o)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollStream=O9(this.scrollContainer);const e=ua((()=>{const{startX:t,endX:n}=this.scrollStream.percentages.value,{left:s,right:o}=this.scrollStream.bounds.value;this.emit("scroll",t,n,s,o)}),[this.scrollStream.percentages,this.scrollStream.bounds]);if(this.subscriptions.push(e),typeof ResizeObserver=="function"){const t=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{t().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const e=this.parent.clientWidth;e===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=e,this.reRender(),this.emit("resize"))}initDrag(){if(this.dragStream)return;this.dragStream=(function(t,n={}){const{threshold:s=3,mouseButton:o=0,touchDelay:c=100}=n,u=Xt(null),d=new Map,f=matchMedia("(pointer: coarse)").matches;let g=()=>{};const y=v=>{if(v.button!==o||(d.set(v.pointerId,v),d.size>1))return;let w=v.clientX,T=v.clientY,N=!1;const P=Date.now(),V=t.getBoundingClientRect(),{left:H,top:B}=V,q=S=>{if(S.defaultPrevented||d.size>1||f&&Date.now()-P<c)return;const I=S.clientX,C=S.clientY,L=I-w,k=C-T;(N||Math.abs(L)>s||Math.abs(k)>s)&&(S.preventDefault(),S.stopPropagation(),N||(u.set({type:"start",x:w-H,y:T-B}),N=!0),u.set({type:"move",x:I-H,y:C-B,deltaX:L,deltaY:k}),w=I,T=C)},K=S=>{if(d.delete(S.pointerId),N){const I=S.clientX,C=S.clientY;u.set({type:"end",x:I-H,y:C-B})}g()},z=S=>{d.delete(S.pointerId),S.relatedTarget&&S.relatedTarget!==document.documentElement||K(S)},O=S=>{N&&(S.stopPropagation(),S.preventDefault())},x=S=>{S.defaultPrevented||d.size>1||N&&S.preventDefault()};document.addEventListener("pointermove",q),document.addEventListener("pointerup",K),document.addEventListener("pointerout",z),document.addEventListener("pointercancel",z),document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("click",O,{capture:!0}),g=()=>{document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",K),document.removeEventListener("pointerout",z),document.removeEventListener("pointercancel",z),document.removeEventListener("touchmove",x),setTimeout((()=>{document.removeEventListener("click",O,{capture:!0})}),10)}};return t.addEventListener("pointerdown",y),{signal:u,cleanup:()=>{g(),t.removeEventListener("pointerdown",y),d.clear(),AR(u)}}})(this.wrapper);const e=ua((()=>{const t=this.dragStream.signal.value;if(!t)return;const n=this.wrapper.getBoundingClientRect().width,s=(o=t.x/n)<0?0:o>1?1:o;var o;t.type==="start"?(this.isDragging=!0,this.emit("dragstart",s)):t.type==="move"?this.emit("drag",s):t.type==="end"&&(this.isDragging=!1,this.emit("dragend",s))}),[this.dragStream.signal]);this.subscriptions.push(e)}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return t.innerHTML=`
      <style${n?` nonce="${n}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
          pointer-events: none;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}e.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){const{scrollWidth:t}=this.scrollContainer,n=t*e;this.setScroll(n)}destroy(){var e;this.subscriptions.forEach((t=>t())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(e=this.unsubscribeOnScroll)===null||e===void 0||e.forEach((t=>t())),this.unsubscribeOnScroll=[],this.dragStream&&(this.dragStream.cleanup(),this.dragStream=null),this.scrollStream&&(this.scrollStream.cleanup(),this.scrollStream=null)}createDelay(e=10){let t,n;const s=()=>{t&&(clearTimeout(t),t=void 0),n&&(n(),n=void 0)};return this.timeouts.push(s),()=>new Promise(((o,c)=>{s(),n=c,t=setTimeout((()=>{t=void 0,n=void 0,o()}),e)}))}getHeight(e,t){var n;const s=((n=this.audioData)===null||n===void 0?void 0:n.numberOfChannels)||1;return(function({optionsHeight:o,optionsSplitChannels:c,parentHeight:u,numberOfChannels:d,defaultHeight:f=128}){if(o==null)return f;const g=Number(o);if(!isNaN(g))return g;if(o==="auto"){const y=u||f;return c?.every((v=>!v.overlay))?y/d:y}return f})({optionsHeight:e,optionsSplitChannels:t,parentHeight:this.parent.clientHeight,numberOfChannels:s,defaultHeight:128})}convertColorValues(e,t){return(function(n,s,o){if(!Array.isArray(n))return n||"";if(n.length===0)return"#999";if(n.length<2)return n[0]||"";const c=document.createElement("canvas"),u=c.getContext("2d"),d=o??c.height*s,f=u.createLinearGradient(0,0,0,d||s),g=1/(n.length-1);return n.forEach(((y,v)=>{f.addColorStop(v*g,y)})),f})(e,this.getPixelRatio(),t?.canvas.height)}getPixelRatio(){return e=window.devicePixelRatio,Math.max(1,e||1);var e}renderBarWaveform(e,t,n,s){const{width:o,height:c}=n.canvas,{halfHeight:u,barWidth:d,barRadius:f,barIndexScale:g,barSpacing:y,barMinHeight:v}=(function({width:T,height:N,length:P,options:V,pixelRatio:H}){const B=N/2,q=V.barWidth?V.barWidth*H:1,K=V.barGap?V.barGap*H:V.barWidth?q/2:0,z=q+K||1;return{halfHeight:B,barWidth:q,barGap:K,barRadius:V.barRadius||0,barMinHeight:V.barMinHeight?V.barMinHeight*H:0,barIndexScale:P>0?T/z/P:0,barSpacing:z}})({width:o,height:c,length:(e[0]||[]).length,options:t,pixelRatio:this.getPixelRatio()}),w=(function({channelData:T,barIndexScale:N,barSpacing:P,barWidth:V,halfHeight:H,vScale:B,canvasHeight:q,barAlign:K,barMinHeight:z}){const O=T[0]||[],x=T[1]||O,S=O.length,I=[];let C=0,L=0,k=0;for(let G=0;G<=S;G++){const ne=Math.round(G*N);if(ne>C){const{topHeight:te,totalHeight:W}=k9({maxTop:L,maxBottom:k,halfHeight:H,vScale:B,barMinHeight:z,barAlign:K}),ee=D9({barAlign:K,halfHeight:H,topHeight:te,totalHeight:W,canvasHeight:q});I.push({x:C*P,y:ee,width:V,height:W}),C=ne,L=0,k=0}const M=Math.abs(O[G]||0),D=Math.abs(x[G]||0);M>L&&(L=M),D>k&&(k=D)}return I})({channelData:e,barIndexScale:g,barSpacing:y,barWidth:d,halfHeight:u,vScale:s,canvasHeight:c,barAlign:t.barAlign,barMinHeight:v});n.beginPath();for(const T of w)f&&"roundRect"in n?n.roundRect(T.x,T.y,T.width,T.height,f):n.rect(T.x,T.y,T.width,T.height);n.fill(),n.closePath()}renderLineWaveform(e,t,n,s){const{width:o,height:c}=n.canvas,u=(function({channelData:d,width:f,height:g,vScale:y}){const v=g/2,w=d[0]||[];return[w,d[1]||w].map(((T,N)=>{const P=T.length,V=P?f/P:0,H=v,B=N===0?-1:1,q=[{x:0,y:H}];let K=0,z=0;for(let O=0;O<=P;O++){const x=Math.round(O*V);if(x>K){const I=H+(Math.round(z*v*y)||1)*B;q.push({x:K,y:I}),K=x,z=0}const S=Math.abs(T[O]||0);S>z&&(z=S)}return q.push({x:K,y:H}),q}))})({channelData:e,width:o,height:c,vScale:s});n.beginPath();for(const d of u)if(d.length){n.moveTo(d[0].x,d[0].y);for(let f=1;f<d.length;f++){const g=d[f];n.lineTo(g.x,g.y)}}n.fill(),n.closePath()}renderWaveform(e,t,n){if(n.fillStyle=this.convertColorValues(t.waveColor,n),t.renderFunction)return void t.renderFunction(e,n);const s=(function({channelData:o,barHeight:c,normalize:u,maxPeak:d}){var f;const g=c||1;if(!u)return g;const y=o[0];if(!y||y.length===0)return g;let v=d??0;if(!d)for(let w=0;w<y.length;w++){const T=(f=y[w])!==null&&f!==void 0?f:0,N=Math.abs(T);N>v&&(v=N)}return v?g/v:g})({channelData:e,barHeight:t.barHeight,normalize:t.normalize,maxPeak:t.maxPeak});SR(t)?this.renderBarWaveform(e,t,n,s):this.renderLineWaveform(e,t,n,s)}renderSingleCanvas(e,t,n,s,o,c,u){const d=this.getPixelRatio(),f=document.createElement("canvas");f.width=Math.round(n*d),f.height=Math.round(s*d),f.style.width=`${n}px`,f.style.height=`${s}px`,f.style.left=`${Math.round(o)}px`,c.appendChild(f);const g=f.getContext("2d");if(t.renderFunction?(g.fillStyle=this.convertColorValues(t.waveColor,g),t.renderFunction(e,g)):this.renderWaveform(e,t,g),f.width>0&&f.height>0){const y=f.cloneNode(),v=y.getContext("2d");v.drawImage(f,0,0),v.globalCompositeOperation="source-in",v.fillStyle=this.convertColorValues(t.progressColor,v),v.fillRect(0,0,f.width,f.height),u.appendChild(y)}}renderMultiCanvas(e,t,n,s,o,c){const u=this.getPixelRatio(),{clientWidth:d}=this.scrollContainer,f=n/u,g=(function({clientWidth:T,totalWidth:N,options:P}){return jT(Math.min(8e3,T,N),P)})({clientWidth:d,totalWidth:f,options:t});let y={};if(g===0)return;const v=T=>{if(T<0||T>=w||y[T])return;y[T]=!0;const N=T*g;let P=Math.min(f-N,g);if(P=jT(P,t),P<=0)return;const V=(function({channelData:H,offset:B,clampedWidth:q,totalWidth:K}){return H.map((z=>{const O=Math.floor(B/K*z.length),x=Math.floor((B+q)/K*z.length);return z.slice(O,x)}))})({channelData:e,offset:N,clampedWidth:P,totalWidth:f});this.renderSingleCanvas(V,t,P,s,N,o,c)},w=Math.ceil(f/g);if(!this.isScrollable){for(let T=0;T<w;T++)v(T);return}if(UT({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:f,numCanvases:w}).forEach((T=>v(T))),w>1){const T=this.on("scroll",(()=>{const{scrollLeft:N}=this.scrollContainer;Object.keys(y).length>10&&(o.innerHTML="",c.innerHTML="",y={}),UT({scrollLeft:N,totalWidth:f,numCanvases:w}).forEach((P=>v(P)))}));this.unsubscribeOnScroll.push(T)}}renderChannel(e,t,n,s){var{overlay:o}=t,c=(function(g,y){var v={};for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&y.indexOf(w)<0&&(v[w]=g[w]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function"){var T=0;for(w=Object.getOwnPropertySymbols(g);T<w.length;T++)y.indexOf(w[T])<0&&Object.prototype.propertyIsEnumerable.call(g,w[T])&&(v[w[T]]=g[w[T]])}return v})(t,["overlay"]);const u=document.createElement("div"),d=this.getHeight(c.height,c.splitChannels);u.style.height=`${d}px`,o&&s>0&&(u.style.marginTop=`-${d}px`),this.canvasWrapper.style.minHeight=`${d}px`,this.canvasWrapper.appendChild(u);const f=u.cloneNode();this.progressWrapper.appendChild(f),this.renderMultiCanvas(e,c,n,d,u,f)}render(e){return Gn(this,void 0,void 0,(function*(){var t;this.timeouts.forEach((f=>f())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=this.getPixelRatio(),s=this.scrollContainer.clientWidth,{scrollWidth:o,isScrollable:c,useParentWidth:u,width:d}=(function({duration:f,minPxPerSec:g=0,parentWidth:y,fillParent:v,pixelRatio:w}){const T=Math.ceil(f*g),N=T>y,P=!!(v&&!N);return{scrollWidth:T,isScrollable:N,useParentWidth:P,width:(P?y:T)*w}})({duration:e.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:s,fillParent:this.options.fillParent,pixelRatio:n});if(this.isScrollable=c,this.wrapper.style.width=u?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let f=0;f<e.numberOfChannels;f++){const g=Object.assign(Object.assign({},this.options),(t=this.options.splitChannels)===null||t===void 0?void 0:t[f]);this.renderChannel([e.getChannelData(f)],g,d,f)}else{const f=[e.getChannelData(0)];e.numberOfChannels>1&&f.push(e.getChannelData(1)),this.renderChannel(f,this.options,d,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((n=>n())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:e}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){const{right:n}=this.progressWrapper.getBoundingClientRect(),s=(function(o){const c=2*o;return(c<0?Math.floor(c):Math.ceil(c))/2})(n-t);this.scrollContainer.scrollLeft+=s}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{scrollLeft:n,scrollWidth:s,clientWidth:o}=this.scrollContainer,c=e*s,u=n,d=n+o,f=o/2;if(this.isDragging)c+30>d?this.scrollContainer.scrollLeft+=30:c-30<u&&(this.scrollContainer.scrollLeft-=30);else{(c<u||c>d)&&(this.scrollContainer.scrollLeft=c-(this.options.autoCenter?f:0));const g=c-n-f;t&&this.options.autoCenter&&g>0&&(this.scrollContainer.scrollLeft+=g)}}renderProgress(e,t){if(isNaN(e))return;const n=100*e;this.canvasWrapper.style.clipPath=`polygon(${n}% 0%, 100% 0%, 100% 100%, ${n}% 100%)`,this.progressWrapper.style.width=`${n}%`,this.cursor.style.left=`${n}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${e*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.audioData&&this.audioData.duration>0&&this.scrollIntoView(e,t)}exportImage(e,t,n){return Gn(this,void 0,void 0,(function*(){const s=this.canvasWrapper.querySelectorAll("canvas");if(!s.length)throw new Error("No waveform data");if(n==="dataURL"){const o=Array.from(s).map((c=>c.toDataURL(e,t)));return Promise.resolve(o)}return Promise.all(Array.from(s).map((o=>new Promise(((c,u)=>{o.toBlob((d=>{d?c(d):u(new Error("Could not export image"))}),e,t)})))))}))}}class P9 extends qh{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const e=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(e))};e()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class Hy extends qh{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Gn(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then((t=>{if(t.status>=400)throw new Error(`Failed to fetch ${e}: ${t.status} (${t.statusText})`);return t.arrayBuffer()})).then((t=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(t))).then((t=>{this.currentSrc===e&&(this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})).catch((t=>{console.error("WebAudioPlayer load error:",t)}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let e=this.playedDuration*this._playbackRate;(e>=this.duration||e<0)&&(e=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,e),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Gn(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){const t=e-this.currentTime,n=this.bufferNode;n?.stop(this.audioContext.currentTime+t),n?.addEventListener("ended",(()=>{n===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(e){return Gn(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){const t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,t;return(e=this._duration)!==null&&e!==void 0?e:((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){const e=[];if(!this.buffer)return e;const t=this.buffer.numberOfChannels;for(let n=0;n<t;n++)e.push(this.buffer.getChannelData(n));return e}removeAttribute(e){switch(e){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const L9={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class Eh extends N9{static create(e){return new Eh(e)}getState(){return this.wavesurferState}getRenderer(){return this.renderer}constructor(e){const t=e.media||(e.backend==="WebAudio"?new Hy:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.reactiveCleanups=[],this.options=Object.assign({},L9,e);const{state:n,actions:s}=(function(u){var d,f,g,y,v,w;const T=(d=u?.currentTime)!==null&&d!==void 0?d:Xt(0),N=(f=u?.duration)!==null&&f!==void 0?f:Xt(0),P=(g=u?.isPlaying)!==null&&g!==void 0?g:Xt(!1),V=(y=u?.isSeeking)!==null&&y!==void 0?y:Xt(!1),H=(v=u?.volume)!==null&&v!==void 0?v:Xt(1),B=(w=u?.playbackRate)!==null&&w!==void 0?w:Xt(1),q=Xt(null),K=Xt(null),z=Xt(""),O=Xt(0),x=Xt(0),S=yo((()=>!P.value),[P]),I=yo((()=>q.value!==null),[q]),C=yo((()=>I.value&&N.value>0),[I,N]),L=yo((()=>T.value),[T]),k=yo((()=>N.value>0?T.value/N.value:0),[T,N]);return{state:{currentTime:T,duration:N,isPlaying:P,isPaused:S,isSeeking:V,volume:H,playbackRate:B,audioBuffer:q,peaks:K,url:z,zoom:O,scrollPosition:x,canPlay:I,isReady:C,progress:L,progressPercent:k},actions:{setCurrentTime:G=>{const ne=Math.max(0,Math.min(N.value||1/0,G));T.set(ne)},setDuration:G=>{N.set(Math.max(0,G))},setPlaying:G=>{P.set(G)},setSeeking:G=>{V.set(G)},setVolume:G=>{const ne=Math.max(0,Math.min(1,G));H.set(ne)},setPlaybackRate:G=>{const ne=Math.max(.1,Math.min(16,G));B.set(ne)},setAudioBuffer:G=>{q.set(G),G&&N.set(G.duration)},setPeaks:G=>{K.set(G)},setUrl:G=>{z.set(G)},setZoom:G=>{O.set(Math.max(0,G))},setScrollPosition:G=>{x.set(Math.max(0,G))}}}})({isPlaying:this.isPlayingSignal,currentTime:this.currentTimeSignal,duration:this.durationSignal,volume:this.volumeSignal,playbackRate:this.playbackRateSignal,isSeeking:this.seekingSignal});this.wavesurferState=n,this.wavesurferActions=s,this.timer=new P9;const o=t?void 0:this.getMediaElement();this.renderer=new M9(this.options,o),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initReactiveState(),this.initPlugins();const c=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:u,duration:d}=this.options;(c||u&&d)&&this.load(c,u,d).catch((f=>{this.emit("error",f instanceof Error?f:new Error(String(f)))}))}))}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const e=this.updateProgress();this.emit("timeupdate",e),this.emit("audioprocess",e),this.stopAtPosition!=null&&this.isPlaying()&&e>=this.stopAtPosition&&this.pause()}})))}initReactiveState(){this.reactiveCleanups.push((function(e,t){const n=[];n.push(ua((()=>{const c=e.isPlaying.value;t.emit(c?"play":"pause")}),[e.isPlaying])),n.push(ua((()=>{const c=e.currentTime.value;t.emit("timeupdate",c),e.isPlaying.value&&t.emit("audioprocess",c)}),[e.currentTime,e.isPlaying])),n.push(ua((()=>{e.isSeeking.value&&t.emit("seeking",e.currentTime.value)}),[e.isSeeking,e.currentTime]));let s=!1;n.push(ua((()=>{e.isReady.value&&!s&&(s=!0,t.emit("ready",e.duration.value))}),[e.isReady,e.duration]));let o=!1;return n.push(ua((()=>{const c=e.isPlaying.value,u=e.currentTime.value,d=e.duration.value,f=d>0&&u>=d;o&&!c&&f&&t.emit("finish"),o=c&&f}),[e.isPlaying,e.currentTime,e.duration])),n.push(ua((()=>{const c=e.zoom.value;c>0&&t.emit("zoom",c)}),[e.zoom])),()=>{n.forEach((c=>c()))}})(this.wavesurferState,{emit:this.emit.bind(this)}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const e=this.updateProgress();this.emit("timeupdate",e)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var e;this.emit("error",(e=this.getMediaElement().error)!==null&&e!==void 0?e:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))})),this.renderer.on("dblclick",((e,t)=>{this.emit("dblclick",e,t)})),this.renderer.on("scroll",((e,t,n,s)=>{const o=this.getDuration();this.emit("scroll",e*o,t*o,n,s)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(e=>{this.emit("dragstart",e)})),this.renderer.on("dragend",(e=>{this.emit("dragend",e)})),this.renderer.on("resize",(()=>{this.emit("resize")})));{let e;const t=this.renderer.on("drag",(n=>{var s;if(!this.options.interact)return;this.renderer.renderProgress(n),clearTimeout(e);let o=0;const c=this.options.dragToSeek;this.isPlaying()?o=0:c===!0?o=200:c&&typeof c=="object"&&(o=(s=c.debounceTime)!==null&&s!==void 0?s:200),e=setTimeout((()=>{this.seekTo(n)}),o),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}));this.subscriptions.push((()=>{clearTimeout(e),t()}))}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach((t=>{this.registerPlugin(t)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((e=>e())),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=Af.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=Af.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){if(this.plugins.includes(e))return e;e._init(this),this.plugins.push(e);const t=e.once("destroy",(()=>{this.plugins=this.plugins.filter((n=>n!==e)),this.subscriptions=this.subscriptions.filter((n=>n!==t))}));return this.subscriptions.push(t),e}unregisterPlugin(e){this.plugins=this.plugins.filter((t=>t!==e)),e.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){const t=e/this.getDuration();this.renderer.setScrollPercentage(t)}getActivePlugins(){return this.plugins}loadAudio(e,t,n,s){return Gn(this,void 0,void 0,(function*(){var o;if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(o=this.abortController)===null||o===void 0||o.abort(),this.abortController=null,!t&&!n){const u=this.options.fetchParams||{};window.AbortController&&!u.signal&&(this.abortController=new AbortController,u.signal=this.abortController.signal);const d=g=>this.emit("loading",g);t=yield C9.fetchBlob(e,d,u);const f=this.options.blobMimeType;f&&(t=new Blob([t],{type:f}))}this.setSrc(e,t);const c=yield new Promise((u=>{const d=s||this.getDuration();d?u(d):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>u(this.getDuration())),{once:!0}))}));if(!e&&!t){const u=this.getMediaElement();u instanceof Hy&&(u.duration=c)}if(n)this.decodedData=Af.createBuffer(n,c||0);else if(t){const u=yield t.arrayBuffer();this.decodedData=yield Af.decode(u,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(e,t,n){return Gn(this,void 0,void 0,(function*(){try{return yield this.loadAudio(e,void 0,t,n)}catch(s){throw this.emit("error",s),s}}))}loadBlob(e,t,n){return Gn(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",e,t,n)}catch(s){throw this.emit("error",s),s}}))}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:n=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const s=Math.min(e,this.decodedData.numberOfChannels),o=[];for(let c=0;c<s;c++){const u=this.decodedData.getChannelData(c),d=[],f=u.length/t;for(let g=0;g<t;g++){const y=u.slice(Math.floor(g*f),Math.ceil((g+1)*f));let v=0;for(let w=0;w<y.length;w++){const T=y[w];Math.abs(T)>Math.abs(v)&&(v=T)}d.push(Math.round(v*n)/n)}o.push(d)}return o}getDuration(){let e=super.getDuration()||0;return e!==0&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){this.stopAtPosition=null,super.setTime(e),this.updateProgress(e),this.emit("timeupdate",e)}seekTo(e){const t=this.getDuration()*e;this.setTime(t)}play(e,t){const n=Object.create(null,{play:{get:()=>super.play}});return Gn(this,void 0,void 0,(function*(){e!=null&&this.setTime(e);const s=yield n.play.call(this);return t!=null&&(this.media instanceof Hy?this.media.stopAt(t):this.stopAtPosition=t),s}))}playPause(){return Gn(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return Gn(this,arguments,void 0,(function*(e="image/png",t=1,n="dataURL"){return this.renderer.exportImage(e,t,n)}))}destroy(){var e;this.emit("destroy"),(e=this.abortController)===null||e===void 0||e.abort(),this.plugins.forEach((t=>t.destroy())),this.subscriptions.forEach((t=>t())),this.unsubscribePlayerEvents(),this.reactiveCleanups.forEach((t=>t())),this.reactiveCleanups=[],this.timer.destroy(),this.renderer.destroy(),super.destroy()}}Eh.BasePlugin=class extends qh{constructor(r){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=r}onInit(){}_init(r){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=r,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((r=>r())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},Eh.dom=R9;const V9=r=>new Promise((e,t)=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.onerror=t,n.readAsDataURL(r)}),j9=({src:r,isMine:e,messageId:t})=>{const n=$.useRef(null),s=$.useRef(null),[o,c]=$.useState(!1),[u,d]=$.useState(0),[f,g]=$.useState(0);$.useEffect(()=>{if(n.current)return s.current&&s.current.destroy(),s.current=Eh.create({container:n.current,waveColor:e?"rgba(0, 0, 0, 0.2)":"#9ca3af",progressColor:e?"#ffffff":"#16a34a",cursorColor:"transparent",barWidth:3,barRadius:2,cursorWidth:0,height:48,barGap:3,normalize:!0,url:r}),s.current.on("play",()=>c(!0)),s.current.on("pause",()=>c(!1)),s.current.on("timeupdate",w=>g(w)),s.current.on("ready",w=>d(w)),s.current.on("finish",()=>c(!1)),()=>{s.current&&s.current.destroy()}},[r,e]);const y=()=>{s.current&&s.current.playPause()},v=w=>{if(!w)return"0:00";const T=Math.floor(w/60),N=Math.floor(w%60);return`${T}:${N<10?"0":""}${N}`};return b.jsxs("div",{className:"flex items-center gap-3 min-w-[200px] sm:min-w-[240px] pr-2",children:[b.jsx("button",{onClick:y,className:`p-2 rounded-full transition-colors flex-shrink-0 cursor-pointer z-10 ${e?"bg-green-500 text-white hover:bg-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:o?b.jsx(TV,{className:"w-5 h-5 fill-current"}):b.jsx(IV,{className:"w-5 h-5 fill-current ml-0.5"})}),b.jsx("div",{className:"flex-1 overflow-hidden relative",ref:n}),b.jsx("span",{className:`text-[11px] font-medium w-9 text-right tabular-nums ${e?"text-green-100":"text-gray-500"}`,children:v(o?f:u)})]})};function U9(){const{chatId:r}=XT(),{currentUser:e}=si(),{t,i18n:n}=Bn(),s=Es(),o=$.useRef(null),c=$.useRef(null),{addToast:u}=Oa();$.useEffect(()=>{e||s("/login")},[e,s]);const[d,f]=$.useState([]),[g,y]=$.useState(""),[v,w]=$.useState(!0),[T,N]=$.useState(null),[P,V]=$.useState(null),[H,B]=$.useState(null),[q,K]=$.useState(!1),[z,O]=$.useState(null),[x,S]=$.useState(0),[I,C]=$.useState(null),[L,k]=$.useState(!1),[G,ne]=$.useState(null),M=xr(),[D,te]=$.useState(M.state?.targetUser||null),[W,ee]=$.useState(r==="new"?null:r);$.useEffect(()=>{r!=="new"&&ee(r)},[r]),$.useEffect(()=>{r==="new"&&D&&e&&(async()=>{try{N(D);const Te=xs(zn(qe,"chats"),Ia("participants","array-contains",e.uid)),Oe=(await Ca(Te)).docs.find(xe=>xe.data().participants.includes(D.uid));Oe?(ee(Oe.id),s(`/messages/${Oe.id}`,{replace:!0})):w(!1)}catch(Te){console.warn("Error checking existing chats:",Te)}})()},[r,D,e]),$.useEffect(()=>{if(r==="new"){w(!1);return}if(!W||!e)return;w(!0);const ye=rc(kt(qe,"chats",W),Be=>{if(Be.exists()){const Oe=Be.data(),xe=Oe.participants.find(it=>it!==e.uid);if(xe){if(Oe.participantData?.[xe]){const it=Oe.participantData[xe];N(pt=>pt?.id===xe?pt:{...it,id:xe})}V(xe)}}else r!=="new"&&s("/messages")}),Te=rc(zn(qe,"chats",W,"messages"),Be=>{const Oe=Be.docs.map(xe=>({id:xe.id,...xe.data()})).sort((xe,it)=>(xe.createdAt?.seconds||0)-(it.createdAt?.seconds||0));f(Oe),w(!1),H||setTimeout(()=>o.current?.scrollIntoView({behavior:"smooth"}),100)});return()=>{Te(),ye()}},[W,e,H,r,s]),$.useEffect(()=>{if(!P)return;const ye=rc(kt(qe,"users",P),Te=>{if(Te.exists()){const Be=Te.data();N(Oe=>({...Oe,...Be}))}});return()=>ye()},[P]);const F=async(ye,Te=null,Be=null,Oe="text")=>{k(!0);try{let xe=W;if(!xe&&r==="new"){if(!D)throw new Error("Target user missing");const{startChat:ht}=await I9(async()=>{const{startChat:Hn}=await Promise.resolve().then(()=>Uj);return{startChat:Hn}},[]);xe=await ht(e.uid,D.uid,{name:D.name,avatar:D.photoURL},{name:e.displayName,avatar:e.photoURL}),ee(xe),window.history.replaceState(null,"",`/messages/${xe}`)}let it=null,pt=Oe,Fn=Be;if(Te||I){let ht=Te||I.file;if(pt==="image"||I?.type==="image"){pt="image",Fn=Fn||I?.file.name;const Hn={maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0};try{ht=await fn(ht,Hn)}catch(Ft){console.warn("Compression failed, using original",Ft)}}else I&&(pt=I.type,Fn=I.file.name);if(it=await V9(ht),it.length>95e4)throw new Error("File is too large for database storage even after compression.")}H?(await wr(kt(qe,"chats",xe,"messages",H),{text:ye,editedAt:ar()}),B(null)):(await Fh(zn(qe,"chats",xe,"messages"),{text:ye||"",type:pt,fileUrl:it,fileName:Fn,senderId:e.uid,createdAt:ar()}),await wr(kt(qe,"chats",xe),{lastMessage:pt==="audio"?" Voice Message":pt==="image"?" Photo":ye||" File",updatedAt:ar()})),y(""),C(null)}catch(xe){console.error("Send failed",xe),u(xe.message||"Failed to send message","error")}finally{k(!1)}},Y=async ye=>{ye.preventDefault(),!(!g.trim()&&!I)&&await F(g)},ie=async ye=>{if(window.confirm("Delete this message?"))try{await Em(kt(qe,"chats",r,"messages",ye)),u("Message deleted","success")}catch(Te){console.error("Delete failed",Te),u("Could not delete message","error")}},Z=n.language==="tr"?Z_:yg,X=ye=>{if(!ye?.lastSeen)return"Offline";const Te=ye.lastSeen.seconds*1e3;return Date.now()-Te<180*1e3?"Online":`${t("last_seen")||"Last seen"} ${J_(new Date(Te),{addSuffix:!0,locale:Z})}`},pe=ye=>ye?.lastSeen?Date.now()-ye.lastSeen.seconds*1e3<180*1e3:!1,Ee=ye=>ye?new Date(ye.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"...",Ie=ye=>{const Te=ye.target.files[0];if(!Te)return;if(Te.size>10*1024*1024){u("File too large (Max 10MB)","error");return}const Be=Te.type.startsWith("image/")?"image":"file",Oe=Be==="image"?URL.createObjectURL(Te):null;C({file:Te,type:Be,previewUrl:Oe})},Re=ye=>{y(ye.text||""),B(ye.id),C(null),c.current&&(c.current.value="")},$e=()=>{B(null),y(""),C(null)},Qe=$.useRef("cancel"),rt=$.useRef(null),Dt=$.useRef(null),gt=$.useRef(null),[We,yt]=$.useState(0);$.useEffect(()=>{let ye;return q?(S(0),ye=setInterval(()=>S(Te=>Te+1),1e3)):(S(0),yt(0)),()=>{clearInterval(ye),gt.current&&cancelAnimationFrame(gt.current),rt.current&&rt.current.close()}},[q]);const ot=()=>{if(!Dt.current)return;const ye=new Uint8Array(Dt.current.fftSize);Dt.current.getByteTimeDomainData(ye);let Te=0;for(let Oe=0;Oe<ye.length;Oe++)Te+=Math.abs(ye[Oe]-128);const Be=Te/ye.length;yt(Be*10),gt.current=requestAnimationFrame(ot)},lt=async()=>{try{const ye=await navigator.mediaDevices.getUserMedia({audio:!0}),Te=new(window.AudioContext||window.webkitAudioContext);await Te.resume();const Be=Te.createAnalyser();Te.createMediaStreamSource(ye).connect(Be),Be.fftSize=256,rt.current=Te,Dt.current=Be,ot();const xe=new MediaRecorder(ye),it=[];xe.ondataavailable=pt=>it.push(pt.data),xe.onstop=async()=>{if(ye.getTracks().forEach(pt=>pt.stop()),rt.current&&rt.current.close(),gt.current&&cancelAnimationFrame(gt.current),Qe.current==="send"){const pt=new Blob(it,{type:"audio/webm"});await F(null,pt,`voice_${Date.now()}.webm`,"audio")}else console.log("Recording cancelled")},xe.start(),O(xe),K(!0),Qe.current="cancel"}catch(ye){console.error("Mic error:",ye),u(t("mic_error")||"Microphone error","error")}},Ge=ye=>{!z||z.state==="inactive"||(Qe.current=ye,z.stop(),K(!1))};return b.jsxs("div",{className:"flex flex-col h-[calc(100vh-theme(spacing.32))] md:h-[calc(100vh-theme(spacing.16))] max-w-2xl mx-auto w-full bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden relative",children:[v&&b.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-50 flex items-center justify-center",children:b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 bg-white dark:bg-gray-800 z-10 shadow-sm",children:[b.jsx("button",{onClick:()=>s("/messages"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(UL,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),T?b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("img",{src:T.photoURL||T.avatar||`https://ui-avatars.com/api/?name=${T.name||"User"}`,alt:T.name,className:"w-10 h-10 rounded-full object-cover border border-gray-100"}),b.jsxs("div",{children:[b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100 leading-tight",children:T.name||T.displayName||"User"}),b.jsxs("div",{className:"flex items-center gap-1.5",children:[b.jsx("span",{className:`w-2 h-2 rounded-full ${pe(T)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),b.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:X(T)})]})]})]}):b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100",children:"Chat"})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 bg-gray-50 dark:bg-gray-900/50",children:[d.map(ye=>{const Te=ye.senderId===e.uid,Be=ye.type==="audio",Oe=ye.type==="image",xe=ye.type==="file";return b.jsxs("div",{className:`flex flex-col ${Te?"items-end":"items-start"} group`,children:[b.jsxs("div",{className:`flex items-end gap-2 max-w-[85%] ${Te?"flex-row-reverse":"flex-row"}`,children:[b.jsxs("div",{className:`px-4 py-2.5 shadow-sm text-sm md:text-base relative group-hover:shadow-md transition-all ${Te?"bg-green-600 text-white rounded-2xl rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-2xl rounded-bl-none border border-gray-100 dark:border-gray-700"} ${Be?"min-w-[150px]":""}`,children:[Oe&&b.jsx("a",{href:ye.fileUrl,target:"_blank",rel:"noopener noreferrer",children:b.jsx("img",{src:ye.fileUrl,alt:"attachment",className:"max-w-full h-48 object-cover rounded-lg mb-2"})}),Be&&b.jsx(j9,{src:ye.fileUrl,isMine:Te,messageId:ye.id}),xe&&b.jsxs("a",{href:ye.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 underline decoration-current",children:[b.jsx(uT,{className:"w-4 h-4"}),b.jsx("span",{className:"truncate max-w-[150px]",children:ye.fileName||"File"})]}),ye.text&&b.jsx("p",{className:"whitespace-pre-wrap",children:ye.text}),ye.editedAt&&b.jsxs("span",{className:`text-[10px] block text-right mt-1 opacity-60 ${Te?"text-green-100":"text-gray-400"}`,children:["(",t("edited")||"Edited"," ",Ee(ye.editedAt),")"]})]}),Te&&b.jsxs("div",{className:"flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[b.jsx("button",{onClick:()=>Re(ye),className:"p-1 text-gray-400 hover:text-blue-500",title:"Edit",children:b.jsx(zI,{className:"w-3 h-3"})}),b.jsx("button",{onClick:()=>ie(ye.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Delete",children:b.jsx(Im,{className:"w-3 h-3"})})]})]}),b.jsx("span",{className:"text-[10px] text-gray-400 mt-1 px-1 font-medium",children:Ee(ye.createdAt)})]},ye.id)}),b.jsx("div",{ref:o})]}),H&&b.jsxs("div",{className:"px-4 py-2 bg-yellow-50 dark:bg-gray-700 flex items-center justify-between text-xs text-yellow-700 dark:text-yellow-300",children:[b.jsx("span",{children:t("editing_message")||"Editing message..."}),b.jsx("button",{onClick:$e,children:b.jsx(Bo,{className:"w-4 h-4"})})]}),I&&b.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-100 dark:border-gray-600 flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[I.type==="image"?b.jsx("img",{src:I.previewUrl,alt:"preview",className:"w-10 h-10 rounded object-cover"}):b.jsx(tV,{className:"w-8 h-8 text-gray-500"}),b.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 truncate max-w-[200px]",children:I.file.name})]}),b.jsx("button",{onClick:()=>C(null),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",children:b.jsx(Bo,{className:"w-4 h-4 text-gray-500"})})]}),b.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700 flex gap-2 items-end",children:q?b.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-gray-50 dark:bg-gray-700 rounded-xl px-2 py-2 animate-fade-in text-red-500",children:[b.jsx("button",{onClick:()=>Ge("cancel"),className:"p-3 text-gray-500 hover:text-red-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-colors",children:b.jsx(Im,{className:"w-5 h-5"})}),b.jsxs("div",{className:"flex-1 flex items-center justify-center gap-4",children:[b.jsx("span",{className:"font-mono font-medium text-red-600 dark:text-red-400",children:new Date(x*1e3).toISOString().substr(14,5)}),b.jsx("div",{className:"flex items-center gap-0.5 h-10 items-end",children:[...Array(24)].map((ye,Te)=>{const Be=Math.max(0,We-5),Oe=Math.min(1,Be/40),xe=Math.sin(Te*.5+Date.now()/100)*.2+.8;return b.jsx("div",{className:"w-1 bg-red-500 rounded-full transition-all duration-75",style:{height:`${Math.max(4,Oe*36*xe)}px`,opacity:.5+Oe*.5}},Te)})})]}),b.jsx("button",{onClick:()=>Ge("send"),className:"p-3 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg transition-transform transform active:scale-95",children:b.jsx(bh,{className:"w-5 h-5"})})]}):b.jsxs(b.Fragment,{children:[b.jsx("input",{type:"file",ref:c,onChange:Ie,className:"hidden",accept:"image/*,.pdf,.doc,.docx,.txt"}),b.jsx("button",{onClick:()=>c.current?.click(),className:"p-3 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition-all",disabled:H,children:b.jsx(uT,{className:"w-5 h-5"})}),b.jsx("div",{className:"flex-1 bg-gray-50 dark:bg-gray-700 rounded-2xl flex items-center min-h-[48px]",children:b.jsx("textarea",{value:g,onChange:ye=>y(ye.target.value),placeholder:H?t("edit_message_placeholder")||"Edit your message...":t("type_message")||"Mesaj yazn...",className:"w-full bg-transparent px-4 py-3 max-h-32 focus:outline-none text-gray-800 dark:text-white resize-none",rows:1,style:{height:"auto",minHeight:"48px"}})}),g.trim()||I?b.jsx("button",{onClick:Y,disabled:L,className:"p-3 bg-green-600 hover:bg-green-700 text-white rounded-xl shadow-lg shadow-green-200 dark:shadow-none transition-all disabled:opacity-50 transform active:scale-95",children:L?b.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):b.jsx(bh,{className:"w-5 h-5"})}):b.jsx("button",{onClick:lt,className:"p-3 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl transition-all transform active:scale-95 shadow-lg",children:b.jsx(bV,{className:"w-5 h-5"})})]})})]})}function z9(){const{currentUser:r,logout:e,refreshUser:t}=si(),{t:n,i18n:s}=Bn(),o=Es(),{userId:c}=XT(),{addToast:u}=Oa(),d=BT.useRef(null),[f,g]=$.useState(!1),[y,v]=$.useState(!0),[w,T]=$.useState(null),[N,P]=$.useState([]),[V,H]=$.useState(!0),[B,q]=$.useState({analysisCount:0,postCount:0}),[K,z]=$.useState(null),[O,x]=$.useState(""),[S,I]=$.useState(""),[C,L]=$.useState(""),[k,G]=$.useState(null),[ne,M]=$.useState(!1),D=!c||r&&r.uid===c,te=c||r?.uid;$.useEffect(()=>{te&&W()},[te,r]);const W=async()=>{v(!0),H(!0);try{const Z=kt(qe,"users",te),X=await Ra(Z);let pe={};X.exists()&&(pe=X.data(),T(pe),x(pe.displayName||pe.name||(r&&r.uid===te?r.displayName:"")),I(pe.bio||""),L(pe.location||""),G(pe.photoURL||pe.avatar||null));const Ee=xs(zn(qe,"analyses"),Ia("userId","==",te)),Ie=xs(zn(qe,"posts"),Ia("userId","==",te)),[Re,$e]=await Promise.all([Ca(Ee),Ca(Ie)]),Qe=Re.size,rt=$e.size;q({analysisCount:Qe,postCount:rt});const Dt=dR(Qe,rt);if(z(Dt),D){const We={currentLevel:Dt.level,tierColor:Dt.levelInfo.tierColor,totalXP:Dt.totalXP,tierName:Dt.levelInfo.title};await _c(Z,We,{merge:!0})}const gt=$e.docs.map(We=>({id:We.id,...We.data()}));gt.sort((We,yt)=>(yt.createdAt?.seconds||0)-(We.createdAt?.seconds||0)),P(gt)}catch(Z){console.error("Error fetching profile:",Z)}finally{v(!1),H(!1)}},ee=async()=>{M(!0);try{const Z={displayName:O,bio:S,location:C,photoURL:k},X=kt(qe,"users",r.uid);await wr(X,Z),await t(),setUserProfile(pe=>({...pe,...Z})),g(!1)}catch(Z){console.error("Error updating profile:",Z),alert(n("error_updating_profile")||"Error updating profile")}finally{M(!1)}},F=async Z=>{if(!D)return;const X=Z.target.files[0];try{const Ee=await fn(X,{maxSizeMB:.1,maxWidthOrHeight:400,useWebWorker:!0}),Ie=await new Promise(Re=>{const $e=new FileReader;$e.readAsDataURL(Ee),$e.onload=Qe=>Re(Qe.target.result)});G(Ie),await _c(kt(qe,"users",r.uid),{avatar:Ie,email:r.email,name:O||r.displayName,updatedAt:new Date},{merge:!0});try{await eA(_r.currentUser,{photoURL:Ie})}catch{}updateUserPostsName(r.uid,O,Ie),await t(),u(n("profile_updated")||"Profile updated!","success")}catch(pe){console.error(pe),u("Error updating avatar.","error")}finally{v(!1)}};if(!te)return b.jsx("div",{className:"p-10 text-center",children:n("login_required")});if(V&&!w)return b.jsx(nv,{});const Y=Z=>!Z?.lastSeen||!Z.lastSeen.seconds?!1:Date.now()-Z.lastSeen.seconds*1e3<180*1e3,ie=Z=>Z?.lastSeen?J_(new Date(Z.lastSeen.seconds*1e3),{addSuffix:!0,locale:s.language==="tr"?Z_:yg}):"Offline";return b.jsx("div",{className:"max-w-4xl mx-auto w-full pb-20 animate-fade-in p-4",children:b.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mt-6",children:[b.jsx("div",{className:"w-full md:w-1/3",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-6 sticky top-24 border border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex flex-col items-center mb-6 relative",children:[b.jsxs("div",{className:`relative ${D?"group cursor-pointer":""} mt-2`,onClick:()=>D&&d.current?.click(),children:[b.jsx("div",{className:`w-36 h-36 rounded-full overflow-hidden border-4 shadow-xl bg-gray-100 relative z-10 ${K?.levelInfo?.tierColor?.replace("text-","border-")||"border-gray-200"}`,children:(D?k:w?.avatar||w?.photoURL)?b.jsx("img",{src:D?k:w?.avatar||w?.photoURL,className:"w-full h-full object-cover"}):b.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:b.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(D?O||r.displayName||"Gardener":w?.name||w?.displayName||N.length>0&&N[0].authorName||"Gardener")}&background=random&size=128`,alt:"Avatar",className:"w-full h-full object-cover"})})}),!D&&w&&b.jsx("div",{className:`absolute bottom-2 right-2 w-6 h-6 rounded-full border-4 border-white dark:border-gray-800 z-20 ${Y(w)?"bg-green-500":"bg-gray-300"}`,title:Y(w)?"Online":ie(w)}),D&&b.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10",children:b.jsx(So,{className:"w-8 h-8 text-white"})}),y&&b.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center rounded-full z-20",children:b.jsx(Ao,{className:"animate-spin text-green-600"})})]}),D&&b.jsx("input",{type:"file",ref:d,onChange:F,className:"hidden",accept:"image/*"}),b.jsxs("div",{className:"text-center mt-6",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize",children:D?O||r.displayName||n("gardener")||"Bahvan":w?.name||w?.displayName||N.length>0&&N[0].authorName||n("gardener")||"Bahvan"}),K&&b.jsxs("div",{className:"mt-2 flex flex-col items-center group relative cursor-help",children:[b.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest mb-0.5",children:n("community_level")||"TOPLULUK SEVYES"}),b.jsxs("div",{className:`text-lg font-black uppercase tracking-wide flex items-center gap-2 ${K.levelInfo.tierColor}`,children:[b.jsx("span",{children:s.language==="tr"?K.levelInfo.trTitle:K.levelInfo.title}),b.jsx("span",{className:"text-gray-300",children:"|"}),b.jsxs("span",{children:["Sv. ",K.level]})]}),b.jsxs("div",{className:"absolute bottom-full mb-2 bg-gray-900 text-white text-xs p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none",children:[K.currentXp," XP / ",K.isMaxLevel?"MAX":K.nextLevelXp," XP",b.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]})]})]}),K&&b.jsxs("div",{className:"w-full mt-4 px-2",children:[b.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-gray-400 mb-1 uppercase tracking-wider",children:[b.jsxs("span",{children:[K.currentXp," XP"]}),b.jsx("span",{children:K.isMaxLevel?"MAX":`Next: ${K.nextLevelXp}`})]}),b.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:b.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${K.levelInfo.tierColor.replace("text-","bg-")}`,style:{width:`${K.progress}%`}})}),b.jsxs("p",{className:"text-[10px] text-gray-400 text-center mt-1 font-medium",children:[n("total_xp"),": ",K.totalXP]})]})]}),D?b.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide ml-1",children:n("display_name")}),b.jsx("input",{type:"text",value:O,onChange:Z=>x(Z.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-green-500 outline-none"})]}),b.jsxs("button",{type:"submit",disabled:y,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-3 rounded-xl shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[y?b.jsx(Ao,{className:"animate-spin w-4 h-4"}):b.jsx(FI,{className:"w-4 h-4"}),b.jsx("span",{children:n("save_changes")})]})]}):b.jsxs("div",{className:"text-center",children:[b.jsxs("p",{className:"text-sm text-gray-500 italic mb-4",children:[n("joined")||"Katlma Tarihi",": ",w?.createdAt?.seconds?new Date(w.createdAt.seconds*1e3).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):n("unknown_date")]}),b.jsxs("button",{onClick:()=>{if(!r){u(n("login_to_message")||"Please login to send messages","info"),o("/login");return}const Z={uid:w.uid||te,name:w.name||w.displayName||N.length>0&&N[0].authorName||"Gardener",photoURL:w.photoURL||w.avatar||null};o("/messages/new",{state:{targetUser:Z}})},className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-green-700 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[b.jsx(vh,{className:"w-5 h-5"}),b.jsx("span",{children:n("send_message")})]})]}),b.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-gray-700",children:b.jsxs("div",{className:"flex justify-between text-center",children:[b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-green-600",children:N.length}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:n("posts")||"Gnderi"})]}),b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-blue-600",children:N.reduce((Z,X)=>Z+(X.likes?.length||0),0)}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:n("likes")||"Beeni"})]})]})})]})}),b.jsxs("div",{className:"flex-1",children:[b.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[b.jsx(sV,{className:"w-5 h-5 text-gray-400"}),b.jsx("span",{children:D?n("my_posts")||"Gnderilerim":n("user_posts_title",{name:w?.name||"Kullanc"})||`${w?.name||"Kullanc"} Gnderileri`})]}),V?b.jsx("div",{className:"flex justify-center py-20",children:b.jsx(Ao,{className:"w-8 h-8 animate-spin text-gray-300"})}):N.length>0?b.jsx("div",{className:"columns-1 gap-6 space-y-6",children:N.map(Z=>b.jsx("div",{className:"break-inside-avoid",children:b.jsx(hR,{post:{...Z,hideAuthor:D},onViewAnalysis:()=>{}})},Z.id))}):b.jsxs("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/50 rounded-3xl border border-dashed border-gray-200 dark:border-gray-700",children:[b.jsx(dV,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),b.jsx("p",{className:"text-gray-500",children:n("no_posts_yet")})]})]})]})})}function B9(){const{t:r}=Bn(),{currentUser:e}=si(),{addToast:t}=Oa();Es();const n=xr(),[s,o]=$.useState([]),[c,u]=$.useState(!0),[d,f]=$.useState(null),[g,y]=$.useState(!1),[v,w]=$.useState(null),[T,N]=$.useState(""),[P,V]=$.useState(!1),H=$.useRef(null),B=async()=>{try{u(!0);const x=await ZI(e.uid);o(x||[]),n.state?.newAnalysisId&&(f(n.state.newAnalysisId),y(!0),window.history.replaceState({},document.title))}catch(x){console.error("Failed to load analyses",x),t(r("error_loading_analyses")||"Analizler yklenemedi","error")}finally{u(!1)}};$.useEffect(()=>{e&&B()},[e,n.state]);const q=async(x,S)=>{if(x.stopPropagation(),!!window.confirm(r("confirm_delete")||"Bu analizi silmek istediinize emin misiniz?"))try{await eR(S),o(I=>I.filter(C=>C.id!==S)),t(r("analysis_deleted")||"Analiz silindi","success")}catch(I){console.error("Delete failed",I),t("Silinemedi","error")}},K=x=>{f(d===x?null:x)},z=async(x,S)=>{if(x.stopPropagation(),!S.isPublic)try{await rR(S.id),o(I=>I.map(C=>C.id===S.id?{...C,isPublic:!0}:C)),t(r("shared_success")||"Analiz toplulukta paylald!","success")}catch(I){console.error("Share failed",I),t("Paylalamad","error")}},O=async x=>{if(!T.trim()&&!H.current?.files?.[0]){t("Ltfen bir not yazn veya fotoraf ykleyin.","error");return}V(!0);try{let S=null,I=null;if(H.current?.files?.[0]){const C=H.current.files[0];S=await new Promise(L=>{const k=new FileReader;k.onload=G=>L(G.target.result),k.readAsDataURL(C)});try{I=await cR(x.mainImage,S,x.result.disease_name)}catch(L){console.error("AI Progress Check Failed:",L)}}await iR(x.id,S,T,I),w(null),N(""),H.current&&(H.current.value=""),t("Durum gncellemesi kaydedildi!","success"),B()}catch(S){console.error("Feedback failed",S),t("Gncelleme kaydedilemedi.","error")}finally{V(!1)}};return c?b.jsx(nv,{}):s.length===0?b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center text-gray-500 animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6",children:b.jsx(zi,{className:"w-12 h-12 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:r("no_analyses_title")||"Henz Bir Analiz Yok"}),b.jsx("p",{className:"mb-8 max-w-md",children:r("no_analyses_desc")||"Bitkilerinizin saln takip etmek iin ilk analizinizi yapn."}),b.jsxs(Zr,{to:"/",className:"bg-green-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[b.jsx(So,{className:"w-5 h-5"}),r("start_diagnosis")||"Analiz Balat"]})]}):b.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-24 px-4 animate-fade-in relative",children:[b.jsxs("div",{className:"flex items-center justify-between mb-8 mt-6",children:[b.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3 text-gray-900 dark:text-white",children:[b.jsx(Am,{className:"w-7 h-7 text-green-600"}),r("treatment_updates")||"Tedavi & Takip"]}),b.jsxs("span",{className:"text-sm font-medium text-gray-500 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:[s.length," ",r("records")||"Kayt"]})]}),b.jsx("div",{className:"grid gap-6",children:s.map(x=>{const S=x.nextCheckup?.seconds?new Date>new Date(x.nextCheckup.seconds*1e3):!1;return b.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-3xl shadow-sm border transition-all duration-300 overflow-hidden ${d===x.id?"border-green-500 ring-4 ring-green-500/10 shadow-lg":S?"border-orange-300 ring-2 ring-orange-100":"border-gray-100 dark:border-gray-700 hover:shadow-md"} relative group`,children:[b.jsx("button",{onClick:I=>q(I,x.id),className:"absolute top-4 right-4 z-10 p-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-full text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all opacity-0 group-hover:opacity-100 shadow-sm border border-gray-100 dark:border-gray-700",title:r("delete"),children:b.jsx(Im,{className:"w-5 h-5"})}),b.jsxs("div",{className:"p-5 flex gap-5 cursor-pointer md:items-center relative",onClick:()=>K(x.id),children:[b.jsxs("div",{className:"relative",children:[b.jsx("img",{src:x.mainImage,alt:x.plantType,className:"w-24 h-24 md:w-32 md:h-32 rounded-2xl object-cover bg-gray-100 shadow-inner shrink-0"}),S&&b.jsx("div",{className:"absolute -top-2 -left-2 bg-orange-500 text-white text-[10px] font-bold px-2 py-1 rounded-full shadow-md animate-bounce",children:"KONTROL ZAMANI"})]}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex justify-between items-start mb-1",children:[b.jsx("h3",{className:"font-bold text-lg md:text-xl text-gray-900 dark:text-white capitalize truncate",children:x.result.latin_name?b.jsxs("span",{className:"flex flex-col",children:[b.jsx("span",{children:x.plantType||x.result.plant_name}),b.jsx("span",{className:"text-xs font-normal italic text-gray-400",children:x.result.latin_name})]}):x.plantType||"Unknown Plant"}),b.jsxs("span",{className:"text-xs font-medium text-gray-400 flex items-center gap-1 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-lg shrink-0",children:[b.jsx(MI,{className:"w-3 h-3"}),x.createdAt?.seconds?new Date(x.createdAt.seconds*1e3).toLocaleDateString():"Today"]})]}),b.jsxs("p",{className:"text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[b.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),x.result.disease_name]}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 md:line-clamp-1",children:x.result.description}),b.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs font-bold text-gray-400",children:[b.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[b.jsx(qL,{className:"w-4 h-4"}),b.jsxs("span",{children:[x.treatmentDuration||"1 Hafta"," Plan"]})]}),x.isPublic&&b.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[b.jsx(k0,{className:"w-4 h-4"}),b.jsx("span",{children:"Paylald"})]})]})]}),b.jsx("div",{className:"absolute right-5 bottom-5 md:static md:block hidden",children:b.jsx(DI,{className:`w-6 h-6 text-gray-300 transition-transform ${d===x.id?"rotate-180":""}`})})]}),d===x.id&&b.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 p-6 animate-fade-in-down",children:[b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:r("description")}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap",children:x.result.description})]}),b.jsxs("div",{className:"mb-6",children:[b.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[b.jsx(dT,{className:"w-5 h-5 text-green-600"}),x.result.is_treatable===!1?r("prevention_tips")||"Koruyucu nlemler":r("treatment_steps")||"Tedavi Admlar"]}),x.result.is_treatable===!1&&b.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100 dark:bg-red-900/20 dark:text-red-300 dark:border-red-900/30",children:r("plant_not_recoverable")||"Bu bitki ne yazk ki kurtarlamayabilir."}),b.jsx("div",{className:"space-y-3",children:(x.result.is_treatable===!1?x.result.preventive_measures:x.result.treatment_steps)?.map((I,C)=>b.jsxs("div",{className:"flex gap-4 p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-100 dark:border-gray-600 shadow-sm",children:[b.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shrink-0 ${x.result.is_treatable===!1?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:C+1}),b.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm leading-relaxed pt-1",children:I})]},C))})]}),x.updates&&x.updates.length>0&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Gelimeler & lerleme"}),b.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:x.updates.map((I,C)=>b.jsxs("div",{className:`min-w-[240px] p-3 rounded-xl border shadow-sm ${I.aiAnalysis?.status==="better"?"bg-green-50 border-green-100 dark:bg-green-900/20":I.aiAnalysis?.status==="worse"?"bg-red-50 border-red-100 dark:bg-red-900/20":"bg-white border-gray-100 dark:bg-gray-700"}`,children:[I.imageUrl&&b.jsx("img",{src:I.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),b.jsxs("div",{className:"flex justify-between items-center mb-1",children:[b.jsx("span",{className:"text-xs text-gray-500",children:new Date(I.createdAt?.seconds*1e3).toLocaleDateString()}),I.aiAnalysis&&b.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-full ${I.aiAnalysis.status==="better"?"bg-green-200 text-green-800":I.aiAnalysis.status==="worse"?"bg-red-200 text-red-800":"bg-gray-200 text-gray-800"}`,children:I.aiAnalysis.status==="better"?"YLEYOR":I.aiAnalysis.status==="worse"?"KTLEYOR":"DEM YOK"})]}),b.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 font-medium mb-1",children:I.note}),I.aiAnalysis&&b.jsxs("div",{className:"mt-2 text-xs border-t pt-2 border-gray-200/50 dark:border-gray-600/50",children:[b.jsx("p",{className:"font-bold text-gray-700 dark:text-gray-300",children:" AI zeti:"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-snug",children:I.aiAnalysis.summary}),b.jsx("p",{className:"mt-1 text-blue-600 dark:text-blue-400 font-medium",children:I.aiAnalysis.advice})]})]},C))})]}),b.jsxs("div",{className:"flex flex-wrap gap-3",children:[x.result.is_treatable&&b.jsxs("button",{onClick:()=>w(v===x.id?null:x.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 shadow-lg shadow-green-500/20 transition-all active:scale-95",children:[b.jsx(So,{className:"w-5 h-5"}),r("add_update")||"Durum Kontrol Yap"]}),b.jsx("div",{className:"flex flex-col items-center",children:b.jsxs("button",{onClick:I=>z(I,x),disabled:x.isPublic,className:`px-6 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all w-full ${x.isPublic?"bg-blue-50 text-blue-400 cursor-default":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[b.jsx(k0,{className:"w-5 h-5"}),x.isPublic?r("shared")||"Paylald":r("share")||"Payla"]})})]}),v===x.id&&b.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-2xl border border-green-200 dark:border-green-800 shadow-inner animate-fade-in relative overflow-hidden",children:[P&&b.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-20 flex flex-col items-center justify-center text-center",children:[b.jsx(Ao,{className:"w-8 h-8 text-green-600 animate-spin mb-2"}),b.jsx("p",{className:"text-sm font-medium text-green-700",children:"AI lerleme Analizi Yapyor..."}),b.jsx("p",{className:"text-xs text-green-600 opacity-75",children:"nceki fotorafla karlatrlyor"})]}),b.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs text-blue-600 bg-blue-50 dark:bg-blue-900/20 p-2 rounded-lg",children:[b.jsx(Am,{className:"w-4 h-4"}),b.jsx("p",{children:"Yeni bir fotoraf ykle. AI bunu eskisiyle karlatrp iyileme olup olmadn syleyecek."})]}),b.jsx("textarea",{value:T,onChange:I=>N(I.target.value),placeholder:"Bitkide ne gibi deiiklikler grdn?",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-700 dark:bg-gray-900 mb-3 text-sm focus:ring-2 focus:ring-green-500 outline-none resize-none",rows:2}),b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("input",{type:"file",ref:H,accept:"image/*",className:"text-xs text-gray-500 file:mr-2 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 cursor-pointer"}),b.jsxs("button",{onClick:()=>O(x),disabled:P,className:"bg-green-600 text-white px-4 py-2 rounded-xl hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center gap-2 font-bold text-xs",children:[b.jsx("span",{children:"Analiz Et & Kaydet"}),b.jsx(bh,{className:"w-3 h-3"})]})]})]})]})]},x.id)})}),g&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl max-w-lg w-full p-8 shadow-2xl relative overflow-hidden",children:[b.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full blur-3xl -mr-10 -mt-10"}),b.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -ml-10 -mb-10"}),b.jsxs("div",{className:"text-center relative z-10",children:[b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm",children:b.jsx(JL,{className:"w-10 h-10 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-extrabold text-gray-900 dark:text-white mb-2",children:"Tedavi Sreci Balad!"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 leading-relaxed",children:"Bitki analizi baaryla kaydedildi. yileme srecini buradan adm adm takip edebilirsin."}),b.jsxs("div",{className:"space-y-4 text-left mb-8",children:[b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(dT,{className:"w-5 h-5 text-blue-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Uygula"}),b.jsx("p",{className:"text-xs text-gray-500",children:"nerilen tedavi admlarn dzenli olarak uygula."})]})]}),b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(So,{className:"w-5 h-5 text-purple-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Raporla"}),b.jsx("p",{className:"text-xs text-gray-500",children:"Haftalk yeni fotoraflar ykleyerek geliimi kaydet."})]})]})]}),b.jsx("button",{onClick:()=>y(!1),className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-4 rounded-xl hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Anladm, Bala"})]})]})})]})}function F9(){const{t:r}=Bn();return b.jsxs("div",{className:"p-4 flex flex-col items-center justify-center min-h-[50vh] text-center",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6 relative",children:b.jsx(So,{className:"w-12 h-12 text-green-600 animate-pulse"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:r("scan_plant")||"Bitki Tara"}),b.jsx("p",{className:"text-gray-500 mb-6 max-w-xs",children:r("scan_desc")||"Kamera henz bu sayfada aktif deil. Ana sayfay kullann."})]})}function H9(){const{t:r,i18n:e}=Bn(),{logout:t,currentUser:n}=si(),[s,o]=$.useState(localStorage.getItem("theme")==="dark"),c=()=>{const d=s?"light":"dark";o(!s),localStorage.setItem("theme",d),d==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},u=()=>{const d=e.language==="tr"?"en":"tr";e.changeLanguage(d)};return b.jsxs("div",{className:"max-w-xl mx-auto p-4 pb-24",children:[b.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:r("settings")||"Ayarlar"}),b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:[b.jsxs("button",{onClick:c,className:"w-full flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-xl",children:s?b.jsx(UI,{className:"w-5 h-5"}):b.jsx(HI,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("dark_mode")||"Karanlk Mod"})]}),b.jsx("div",{className:`w-11 h-6 rounded-full transition-colors flex items-center px-0.5 ${s?"bg-purple-600":"bg-gray-300"}`,children:b.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-sm transform transition-transform ${s?"translate-x-5":"translate-x-0"}`})})]}),b.jsxs("button",{onClick:u,className:"w-full flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-xl",children:b.jsx(rV,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("language")||"Dil"})]}),b.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[b.jsx("span",{className:"text-sm font-bold uppercase",children:e.language}),b.jsx(YL,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("div",{className:"p-2 bg-green-100 text-green-600 rounded-xl",children:b.jsx(Rm,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("account")||"Hesap"})]}),b.jsx("p",{className:"text-sm text-gray-500 pl-11",children:n?.email})]}),b.jsx("button",{onClick:t,className:"w-full flex items-center justify-between p-4 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-red-100 text-red-600 rounded-xl",children:b.jsx(jI,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium",children:r("logout")||"k Yap"})]})})]})]})}const q9=$.createContext(),$9=({children:r})=>{const[e,t]=$.useState(!1),n=()=>t(c=>!c),s=()=>t(!1),o=()=>t(!0);return b.jsx(q9.Provider,{value:{isOpen:e,toggle:n,close:s,open:o},children:r})};var zT={},G9="@vercel/analytics",K9="1.6.1",Y9=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function IR(){return typeof window<"u"}function RR(){try{const r="production"}catch{}return"production"}function Q9(r="auto"){if(r==="auto"){window.vam=RR();return}window.vam=r}function W9(){return(IR()?window.vam:RR())||"production"}function O0(){return W9()==="development"}function X9(r){return r.scriptSrc?r.scriptSrc:O0()?"https://va.vercel-scripts.com/v1/script.debug.js":r.basePath?`${r.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function J9(r={debug:!0}){var e;if(!IR())return;Q9(r.mode),Y9(),r.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",r.beforeSend));const t=X9(r);if(document.head.querySelector(`script[src*="${t}"]`))return;const n=document.createElement("script");n.src=t,n.defer=!0,n.dataset.sdkn=G9+(r.framework?`/${r.framework}`:""),n.dataset.sdkv=K9,r.disableAutoTrack&&(n.dataset.disableAutoTrack="1"),r.endpoint?n.dataset.endpoint=r.endpoint:r.basePath&&(n.dataset.endpoint=`${r.basePath}/insights`),r.dsn&&(n.dataset.dsn=r.dsn),n.onerror=()=>{const s=O0()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${t}. ${s}`)},O0()&&r.debug===!1&&(n.dataset.debug="false"),document.head.appendChild(n)}function Z9({route:r,path:e}){var t;(t=window.va)==null||t.call(window,"pageview",{route:r,path:e})}function e8(){if(!(typeof process>"u"||typeof zT>"u"))return zT.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function t8(r){return $.useEffect(()=>{var e;r.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",r.beforeSend))},[r.beforeSend]),$.useEffect(()=>{J9({framework:r.framework||"react",basePath:r.basePath??e8(),...r.route!==void 0&&{disableAutoTrack:!0},...r})},[]),$.useEffect(()=>{r.route&&r.path&&Z9({route:r.route,path:r.path})},[r.route,r.path]),null}function n8(){return b.jsx($9,{children:b.jsxs(nj,{children:[b.jsxs(uk,{children:[b.jsx(Wr,{path:"/login",element:b.jsx(ij,{})}),b.jsx(Wr,{path:"/register",element:b.jsx(aj,{})}),b.jsxs(Wr,{path:"/",element:b.jsx(rj,{}),children:[b.jsx(Wr,{index:!0,element:b.jsx(Fj,{})}),b.jsx(Wr,{path:"scan",element:b.jsx(F9,{})}),b.jsx(Wr,{path:"analyses",element:b.jsx(B9,{})}),b.jsx(Wr,{path:"community",element:b.jsx(T9,{})}),b.jsx(Wr,{path:"chat",element:b.jsx(U9,{})}),b.jsx(Wr,{path:"profile",element:b.jsx(z9,{})}),b.jsx(Wr,{path:"settings",element:b.jsx(H9,{})})]})]}),b.jsx(t8,{})," "]})})}const r8="Plant AI",i8="Welcome to Plant AI",s8="Plant Diagnosis",a8="Community",o8="Profile",l8="Login",c8="Messages",u8="Language",h8="Logout",d8="Dark Mode",f8="Light Mode",m8="My Analyses",g8="Register",p8="Upload Photo",y8="Take Photo",_8="Analyzing...",v8="Diagnosis Results",b8="Treatment",w8="Confidence",x8="Save Changes",E8="Saving...",T8="Display Name",S8="Email",A8="Tap to change avatar",I8="Profile updated successfully!",R8="About Project",C8="Do you know the name of this plant?",N8="e.g., Rose, Tomato, Unknown...",k8="1. Plant Name",D8="2. Capture Photo",O8="Next",M8="I don't know",P8="I couldn't identify it clearly. Please take a close-up photo of a leaf.",L8="Take Close-up Photo",V8="Login to view detailed diagnosis and treatment plan.",j8="Login to View Results",U8="Detailed analysis is available for members only.",z8="AI Powered Plant Doctor",B8='Heal Your Plants with <span class="text-green-600">Artificial Intelligence</span>',F8="Take a photo, diagnose diseases instantly, and get expert treatment advice. Join thousands of happy farmers.",H8="Start Diagnosis",q8="Identify",$8="Tell us the plant name or type.",G8="Analyze",K8="Upload photos of the affected area.",Y8="Heal",Q8="Get instant treatment plan.",W8="Welcome, ",X8="Diagnosis failed. Please try again.",J8="Back",Z8="Plant",ez="Tomato",tz="Pepper",nz="Cucumber",rz="Rose",iz="Succulent",sz="Orchid",az="Lemon",oz="Strawberry",lz="Mint",cz="Other",uz="Healthy / No Issue",hz="Yellowing Leaves",dz="Leaf Spots",fz="Wilting",mz="Pests / Bugs",gz="Root/Stem Rot",pz="Mold / Fungus",yz="Unknown / Help Needed",_z="Auto-Detect from Image",vz="Detecting...",bz="Ask Question",wz="Please login to post.",xz="Login Required",Ez="Are you sure you want to delete this post?",Tz="Just now",Sz="Failed to delete post",Az="Failed to post comment",Iz="Failed to update post",Rz="Add a comment...",Cz="Please login to comment.",Nz="No comments yet. Be the first!",kz="Edit Post",Dz="Cancel",Oz="Save",Mz="Gardener",Pz="Community Member",Lz="Send Message",Vz="Starting...",jz="Please login to message users.",Uz="You cannot message yourself.",zz="Failed to start chat.",Bz=" No posts yet",Fz="Be the first to share your garden!",Hz="No results",qz="Like",$z="Comment",Gz="Edit",Kz="Joined",Yz="Unknown Date",Qz="View Profile",Wz="Block User",Xz="Unblock User",Jz="Posts",Zz="Likes",e7="My Posts",t7="{{name}}'s Posts",n7="New Chat",r7="View Analysis Report",i7="Type a message...",s7="POWERED BY GEMINI AI",a7="Heal your plants with",o7="AI Precision",l7="Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo.",c7="Instant Analysis",u7="Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",h7="Smart Interactions",d7="The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",f7="Verified Treatments",m7="Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",g7="Your Personal Pocket Botanist",p7="Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs.",y7="Open Camera",_7="Select from Gallery",v7="No plant detected. Please ensure the subject is a clear plant or leaf.",b7="Our AI botanist is currently overwhelmed. Please try again in a few seconds.",w7="Retry",x7="Camera access denied. Please check your browser permissions.",E7="Last seen",T7="Prevention Tips",S7="This plant may not fully recover, but follow these steps to prevent spread.",A7="Description",I7="Urgency",R7="Spread Risk",C7="New Scan",N7="CURRENT LEVEL",k7="Total XP",D7="COMMUNITY LEVEL",O7={app_name:r8,welcome:i8,plant_diagnosis:s8,community:a8,profile:o8,login:l8,messages:c8,language:u8,logout:h8,dark_mode:d8,light_mode:f8,analyses:m8,register:g8,upload_photo:p8,take_photo:y8,analyzing:_8,results:v8,treatment:b8,confidence:w8,save_changes:x8,saving:E8,display_name:T8,email:S8,change_avatar:A8,profile_updated:I8,about:R8,what_plant_question:C8,what_plant_placeholder:N8,scan_step_1:k8,scan_step_2:D8,next_step:O8,skip:M8,need_macro_photo:P8,take_macro_photo:L8,login_blur_text:V8,login_to_view:j8,guest_limited:U8,hero_badge:z8,hero_title:B8,hero_desc:F8,start_diagnosis:H8,step_1_title:q8,step_1_desc:$8,step_2_title:G8,step_2_desc:K8,step_3_title:Y8,step_3_desc:Q8,welcome_user:W8,error_diagnosis_failed:X8,back:J8,plant:Z8,plant_tomato:ez,plant_pepper:tz,plant_cucumber:nz,plant_rose:rz,plant_succulent:iz,plant_orchid:sz,plant_lemon:az,plant_strawberry:oz,plant_mint:lz,plant_other:cz,disease_none:uz,disease_yellowing:hz,disease_spots:dz,disease_wilting:fz,disease_bugs:mz,disease_rot:gz,disease_mold:pz,disease_unknown:yz,auto_detect:_z,detecting:vz,ask_question:bz,login_to_post:wz,login_required:xz,confirm_delete_post:Ez,just_now:Tz,failed_delete_post:Sz,failed_post_comment:Az,failed_update_post:Iz,add_comment_placeholder:Rz,login_to_comment:Cz,no_comments_yet:Nz,edit_post:kz,cancel:Dz,save:Oz,gardener:Mz,community_member:Pz,send_message:Lz,starting_chat:Vz,login_to_message:jz,cannot_message_self:Uz,failed_start_chat:zz,no_posts_yet:Bz,be_the_first:Fz,no_results:Hz,like:qz,comment:$z,edit:Gz,delete:"Delete",joined:Kz,unknown_date:Yz,view_profile:Qz,block_user:Wz,unblock_user:Xz,posts:Jz,likes:Zz,my_posts:e7,user_posts_title:t7,new_conversation:n7,view_analysis_report:r7,type_message:i7,ai_powered_v2:s7,hero_title_1:a7,hero_title_highlight:o7,hero_desc_v2:l7,feature_1_title:c7,feature_1_desc:u7,feature_2_title:h7,feature_2_desc:d7,feature_3_title:f7,feature_3_desc:m7,summary_title:g7,summary_desc:p7,open_camera:y7,upload_gallery:_7,error_not_plant:v7,error_server_busy:b7,retry:w7,camera_permission_denied:x7,last_seen:E7,prevention_tips:T7,plant_not_recoverable:S7,description:A7,urgency:I7,spread_risk:R7,new_scan:C7,current_level:N7,total_xp:k7,community_level:D7},M7="Bitki AI",P7="Bitki AI'ye Hogeldiniz",L7="Bitki Tehisi",V7="Topluluk",j7="Profil",U7="Giri Yap",z7="Mesajlar",B7="Dil",F7="k Yap",H7="Koyu Tema",q7="Aydnlk Tema",$7="Analizlerim",G7="Kayt Ol",K7="Fotoraf Ykle",Y7="Fotoraf ek",Q7="Analiz ediliyor...",W7="Bitki",X7="Domates",J7="Biber",Z7="Salatalk",eB="Patlcan",tB="Patates",nB="Soan",rB="Sarmsak",iB="Marul",sB="Ispanak",aB="Havu",oB="Fasulye",lB="Msr",cB="Kabak",uB="ilek",hB="Limon",dB="Portakal",fB="Elma",mB="zm",gB="Karpuz",pB="Kavun",yB="Kiraz",_B="eftali",vB="Gl",bB="Orkide",wB="Sukulent",xB="Lale",EB="Ayiei",TB="Papatya",SB="Lavanta",AB="Kakts",IB="Zeytin",RB="am",CB="Palmiye",NB="Nane",kB="Fesleen",DB="Biberiye",OB="Maydanoz",MB="Dier",PB="Salkl / Sorun Yok",LB="Yaprak Sararmas",VB="Yaprak Lekeleri",jB="Solma",UB="Bcek / Haere",zB="Kk/Gvde rmesi",BB="Kf / Mantar",FB="Mildiy",HB="Besin Eksiklii",qB="Bilinmiyor / Yardm Lazm",$B="Fotoraftan Bul",GB="Taranyor...",KB="Bitki Se...",YB="Tehis Sonular",QB="Tedavi",WB="Gven Oran",XB="Deiiklikleri Kaydet",JB="Analizi Kaydet",ZB="Kaydedildi",eF="Analiz baaryla kaydedildi!",tF="Bu analiz zaten toplulukla paylald.",nF="Bu analizi toplulukla paylamak istiyor musunuz?",rF="Baaryla paylald!",iF="Analizlerim",sF="Kaydediliyor...",aF="Grnen sim",oF="E-posta",lF="Fotoraf deitirmek iin dokunun",cF="Profil baaryla gncellendi!",uF="Proje Hakknda",hF="Bu bitkinin adn biliyor musunuz?",dF="rn. Gl, Domates, Bilmiyorum...",fF="1. Bitki Ad",mF="2. Fotoraf ek",gF="Devam Et",pF="Bilmiyorum",yF="Tam olarak tehis edemedim. Ltfen bir yapran yakndan fotorafn ekin.",_F="Yakndan ek",vF="Detayl tehis ve tedavi plann grmek iin giri yapn.",bF="Sonucu Grmek in Giri Yap",wF="Detayl analiz sadece yelere zeldir.",xF="Yapay Zeka Destekli Bitki Doktoru",EF='Bitkilerinizi <span class="text-green-600">Yapay Zeka</span> ile yiletirin',TF="Fotoraf ekin, hastalklar annda tehis edin ve uzman tedavi nerileri aln. Binlerce mutlu iftiye katln.",SF="Tehise Bala",AF="Tanmla",IF="Bitkinin adn veya trn belirtin.",RF="Analiz Et",CF="Etkilenen blgenin fotorafn ykleyin.",NF="yiletir",kF="Annda tedavi planna kavuun.",DF="Hogeldin, ",OF="Tehis baarsz oldu. Ltfen tekrar deneyin.",MF="Geri",PF="Az nce",LF="Bu gnderiyi silmek istediinize emin misiniz?",VF="Gnderi silinemedi",jF="Yorum gnderilemedi",UF="Gnderi gncellenemedi",zF="Yorum yaz...",BF="Yorum yapmak iin giri yapn.",FF="Henz yorum yok. lk yorumu sen yap!",HF="Gnderiyi Dzenle",qF="ptal",$F="Kaydet",GF="Bahvan",KF="Topluluk yesi",YF="Mesaj Gnder",QF="Balatlyor...",WF="Mesaj gndermek iin giri yapn.",XF="Kendinize mesaj atamazsnz.",JF="Sohbet balatlamad.",ZF=" Henz gnderi yok",eH="Baheni paylaan ilk kii ol!",tH="Sonu yok",nH="Been",rH="Yorum",iH="Dzenle",sH="Ad Soyad",aH="ifre",oH="Toplulua katlmak iin hesap oluturun.",lH="Dorulama E-postas Gnderildi! Ltfen gelen kutunuzu (ve SPAM klasrn) kontrol edin.",cH="E-postanz Dorulayn",uH="Dorulama balantsn gnderdik. Devam etmek iin ltfen e-postanz kontrol edin.",hH="E-posta Uygulamasn A",dH="Doruladm, Giri Yap",fH="Zaten hesabnz var m?",mH="Katlma Tarihi",gH="Bilinmiyor",pH="Profili Gr",yH="Kullancy Engelle",_H="Engeli Kaldr",vH="Gnderi",bH="Beeni",wH="Gnderilerim",xH="{{name}} Gnderileri",EH="Yeni Sohbet",TH="Analiz Raporunu Gr",SH="Mesaj yazn...",AH="GEMINI AI DESTEKL",IH="Bitkilerinizi yiletirin",RH="Yapay Zeka Hassasiyeti",CH="Gelimi AI botanikimiz ile hastalklar annda tehis edin, tedavi planlar aln ve bitki saln izleyin. Sadece bir fotoraf ekin.",NH="Annda Analiz",kH="Saniyeler iinde sonu aln. Yapay zekamz hastalk belirtilerini tespit etmek iin yaprak desenlerini analiz eder.",DH="Akll Etkileimler",OH="Yapay zeka ne zaman daha iyi bir baka ihtiyac olduunu bilir. Sorun net deilse makro ekimler ister.",MH="Dorulanm Tedaviler",PH="Uygulanabilir tavsiyeler aln. Organik zmlerden kimyasal tedavilere kadar sizi iyilemeye ynlendiriyoruz.",LH="Kiisel Cep Botanikiniz",VH="Plant AI, Google'n Gemini modellerinin gcn uzman botanik bilgisiyle birletirir. Sadece tahmin etmiyoruz; salk sorunlarn yksek hassasiyetle kategorize etmek iin doku, renk ve leke desenlerini analiz ediyoruz. ster ev bahvan olun ister profesyonel bir ifti, aracmz ihtiyalarnza uyum salar.",jH="Kameray A",UH="Galeriden Se",zH="Bitki tespit edilemedi. Ltfen net bir bitki veya yaprak fotoraf ektiinizden emin olun.",BH="Yapay zeka asistanmz u anda ok youn. Ltfen birka saniye sonra tekrar deneyin.",FH="Tekrar Dene",HH="Kamera eriimi reddedildi. Ltfen tarayc izinlerini kontrol edin.",qH="Yakn ekim Fotoraf",$H="Bitki AI Dnyor...",GH="Analiz kaydedilemedi:",KH="Mikrofon eriimi reddedildi. Ltfen tarayc ayarlarndan izin verin.",YH="Bu cihazda mikrofon bulunamad.",QH="Mikrofon kullanlamyor veya baka bir uygulama tarafndan kullanlyor.",WH="Mikrofona eriilemedi. HTTPS balantsn ve mikrofonunuzu kontrol edin.",XH="Kaydediliyor...",JH="Mesaj dzenleniyor...",ZH="Mesajnz dzenleyin...",eq="Tedavi sreci balatld!",tq="Bilgiyi Kaydet",nq="Tedaviye Bala",rq="Henz Bir Analiz Yok",iq="Bitkilerinizin saln takip etmek iin ilk analizinizi yapn.",sq="Tedavi & Takip",aq="Kayt",oq="Bu analizi silmek istediinizden emin misiniz?",lq="Gelime Ekle",cq="Paylald",uq="Payla",hq="Toplulukla paylaarak bakalarna yardmc ol!",dq="Soru Sor",fq="Fotoraf",mq="Sesli Mesaj",gq="Son grlme {{days}} gn nce",pq="Son grlme {{hours}} saat nce",yq="Son grlme {{minutes}} dakika nce",_q="Az nce grld",vq="Dzenlendi",bq="Payla",wq="Balanty Kopyala",xq="Balant kopyaland!",Eq="Sosyal Medyada Payla",Tq="Son grlme",Sq="Koruyucu nlemler",Aq="Bu bitki tamamen iyilemeyebilir, ancak yaylmay nlemek iin aadaki admlar izleyin.",Iq="Aklama",Rq="Aciliyet",Cq="Yaylma Riski",Nq="Yeni Tarama",kq="MEVCUT SEVYE",Dq="Toplam XP",Oq="TOPLULUK SEVYES",Mq={app_name:M7,welcome:P7,plant_diagnosis:L7,community:V7,profile:j7,login:U7,messages:z7,language:B7,logout:F7,dark_mode:H7,light_mode:q7,analyses:$7,register:G7,upload_photo:K7,take_photo:Y7,analyzing:Q7,plant:W7,plant_tomato:X7,plant_pepper:J7,plant_cucumber:Z7,plant_eggplant:eB,plant_potato:tB,plant_onion:nB,plant_garlic:rB,plant_lettuce:iB,plant_spinach:sB,plant_carrot:aB,plant_bean:oB,plant_corn:lB,plant_zucchini:cB,plant_strawberry:uB,plant_lemon:hB,plant_orange:dB,plant_apple:fB,plant_grape:mB,plant_watermelon:gB,plant_melon:pB,plant_cherry:yB,plant_peach:_B,plant_rose:vB,plant_orchid:bB,plant_succulent:wB,plant_tulip:xB,plant_sunflower:EB,plant_daisy:TB,plant_lavender:SB,plant_cactus:AB,plant_olive:IB,plant_pine:RB,plant_palm:CB,plant_mint:NB,plant_basil:kB,plant_rosemary:DB,plant_parsley:OB,plant_other:MB,disease_none:PB,disease_yellowing:LB,disease_spots:VB,disease_wilting:jB,disease_bugs:UB,disease_rot:zB,disease_mold:BB,disease_mildew:FB,disease_nutrient:HB,disease_unknown:qB,auto_detect:$B,detecting:GB,select_plant:KB,results:YB,treatment:QB,confidence:WB,save_changes:XB,save_analysis:JB,saved:ZB,save_success:eF,already_shared:tF,confirm_share:nF,share_success:rF,my_analyses:iF,saving:sF,display_name:aF,email:oF,change_avatar:lF,profile_updated:cF,about:uF,what_plant_question:hF,what_plant_placeholder:dF,scan_step_1:fF,scan_step_2:mF,next_step:gF,skip:pF,need_macro_photo:yF,take_macro_photo:_F,login_blur_text:vF,login_to_view:bF,guest_limited:wF,hero_badge:xF,hero_title:EF,hero_desc:TF,start_diagnosis:SF,step_1_title:AF,step_1_desc:IF,step_2_title:RF,step_2_desc:CF,step_3_title:NF,step_3_desc:kF,welcome_user:DF,error_diagnosis_failed:OF,back:MF,just_now:PF,confirm_delete_post:LF,failed_delete_post:VF,failed_post_comment:jF,failed_update_post:UF,add_comment_placeholder:zF,login_to_comment:BF,no_comments_yet:FF,edit_post:HF,cancel:qF,save:$F,gardener:GF,community_member:KF,send_message:YF,starting_chat:QF,login_to_message:WF,cannot_message_self:XF,failed_start_chat:JF,no_posts_yet:ZF,be_the_first:eH,no_results:tH,like:nH,comment:rH,edit:iH,delete:"Sil",full_name:sH,password:aH,create_account_desc:oH,verification_email_sent:lH,verify_email_title:cH,verify_email_desc:uH,open_email_app:hH,i_verified_it:dH,already_have_account:fH,joined:mH,unknown_date:gH,view_profile:pH,block_user:yH,unblock_user:_H,posts:vH,likes:bH,my_posts:wH,user_posts_title:xH,new_conversation:EH,view_analysis_report:TH,type_message:SH,ai_powered_v2:AH,hero_title_1:IH,hero_title_highlight:RH,hero_desc_v2:CH,feature_1_title:NH,feature_1_desc:kH,feature_2_title:DH,feature_2_desc:OH,feature_3_title:MH,feature_3_desc:PH,summary_title:LH,summary_desc:VH,open_camera:jH,upload_gallery:UH,error_not_plant:zH,error_server_busy:BH,retry:FH,camera_permission_denied:HH,close_up_photo:qH,ai_thinking:$H,save_fail:GH,mic_access_denied:KH,mic_not_found:YH,mic_unavailable:QH,mic_generic_error:WH,recording:XH,editing_message:JH,edit_message_placeholder:ZH,treatment_started:eq,save_info:tq,start_treatment:nq,no_analyses_title:rq,no_analyses_desc:iq,treatment_updates:sq,records:aq,confirm_delete:oq,add_update:lq,shared:cq,share:uq,share_help_others:hq,ask_question:dq,photo:fq,voice_message:mq,last_seen_day:gq,last_seen_hour:pq,last_seen_min:yq,last_seen_just_now:_q,edited:vq,share_title:bq,copy_link:wq,link_copied:xq,social_share:Eq,last_seen:Tq,prevention_tips:Sq,plant_not_recoverable:Aq,description:Iq,urgency:Rq,spread_risk:Cq,new_scan:Nq,current_level:kq,total_xp:Dq,community_level:Oq};Wn.use(bD).init({resources:{en:{translation:O7},tr:{translation:Mq}},lng:"tr",fallbackLng:"en",interpolation:{escapeValue:!1}});gN.createRoot(document.getElementById("root")).render(b.jsx($.StrictMode,{children:b.jsx($I,{children:b.jsx(Ok,{children:b.jsx(kL,{children:b.jsx(n8,{})})})})}));
