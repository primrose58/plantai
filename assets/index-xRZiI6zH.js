(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function Tw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ed={exports:{}},bi={};var cg;function Cw(){if(cg)return bi;cg=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(i,l,c){var u=null;if(c!==void 0&&(u=""+c),l.key!==void 0&&(u=""+l.key),"key"in l){c={};for(var d in l)d!=="key"&&(c[d]=l[d])}else c=l;return l=c.ref,{$$typeof:n,type:i,key:u,ref:l!==void 0?l:null,props:c}}return bi.Fragment=t,bi.jsx=r,bi.jsxs=r,bi}var ug;function Rw(){return ug||(ug=1,ed.exports=Cw()),ed.exports}var f=Rw(),td={exports:{}},Ne={};var dg;function Ow(){if(dg)return Ne;dg=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function w(L){return L===null||typeof L!="object"?null:(L=b&&L[b]||L["@@iterator"],typeof L=="function"?L:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function T(L,H,ee){this.props=L,this.context=H,this.refs=A,this.updater=ee||x}T.prototype.isReactComponent={},T.prototype.setState=function(L,H){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,H,"setState")},T.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function U(){}U.prototype=T.prototype;function M(L,H,ee){this.props=L,this.context=H,this.refs=A,this.updater=ee||x}var $=M.prototype=new U;$.constructor=M,S($,T.prototype),$.isPureReactComponent=!0;var K=Array.isArray;function R(){}var D={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function j(L,H,ee){var Z=ee.ref;return{$$typeof:n,type:L,key:H,ref:Z!==void 0?Z:null,props:ee}}function z(L,H){return j(L.type,H,L.props)}function B(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function I(L){var H={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ee){return H[ee]})}var F=/\/+/g;function q(L,H){return typeof L=="object"&&L!==null&&L.key!=null?I(""+L.key):H.toString(36)}function X(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(R,R):(L.status="pending",L.then(function(H){L.status==="pending"&&(L.status="fulfilled",L.value=H)},function(H){L.status==="pending"&&(L.status="rejected",L.reason=H)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function N(L,H,ee,Z,J){var oe=typeof L;(oe==="undefined"||oe==="boolean")&&(L=null);var pe=!1;if(L===null)pe=!0;else switch(oe){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(L.$$typeof){case n:case t:pe=!0;break;case y:return pe=L._init,N(pe(L._payload),H,ee,Z,J)}}if(pe)return J=J(L),pe=Z===""?"."+q(L,0):Z,K(J)?(ee="",pe!=null&&(ee=pe.replace(F,"$&/")+"/"),N(J,H,ee,"",function(he){return he})):J!=null&&(B(J)&&(J=z(J,ee+(J.key==null||L&&L.key===J.key?"":(""+J.key).replace(F,"$&/")+"/")+pe)),H.push(J)),1;pe=0;var ke=Z===""?".":Z+":";if(K(L))for(var ue=0;ue<L.length;ue++)Z=L[ue],oe=ke+q(Z,ue),pe+=N(Z,H,ee,oe,J);else if(ue=w(L),typeof ue=="function")for(L=ue.call(L),ue=0;!(Z=L.next()).done;)Z=Z.value,oe=ke+q(Z,ue++),pe+=N(Z,H,ee,oe,J);else if(oe==="object"){if(typeof L.then=="function")return N(X(L),H,ee,Z,J);throw H=String(L),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return pe}function k(L,H,ee){if(L==null)return L;var Z=[],J=0;return N(L,Z,"","",function(oe){return H.call(ee,oe,J++)}),Z}function Q(L){if(L._status===-1){var H=L._result;H=H(),H.then(function(ee){(L._status===0||L._status===-1)&&(L._status=1,L._result=ee)},function(ee){(L._status===0||L._status===-1)&&(L._status=2,L._result=ee)}),L._status===-1&&(L._status=0,L._result=H)}if(L._status===1)return L._result.default;throw L._result}var G=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},Y={map:k,forEach:function(L,H,ee){k(L,function(){H.apply(this,arguments)},ee)},count:function(L){var H=0;return k(L,function(){H++}),H},toArray:function(L){return k(L,function(H){return H})||[]},only:function(L){if(!B(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Ne.Activity=v,Ne.Children=Y,Ne.Component=T,Ne.Fragment=r,Ne.Profiler=l,Ne.PureComponent=M,Ne.StrictMode=i,Ne.Suspense=m,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(L){return D.H.useMemoCache(L)}},Ne.cache=function(L){return function(){return L.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(L,H,ee){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var Z=S({},L.props),J=L.key;if(H!=null)for(oe in H.key!==void 0&&(J=""+H.key),H)!E.call(H,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&H.ref===void 0||(Z[oe]=H[oe]);var oe=arguments.length-2;if(oe===1)Z.children=ee;else if(1<oe){for(var pe=Array(oe),ke=0;ke<oe;ke++)pe[ke]=arguments[ke+2];Z.children=pe}return j(L.type,J,Z)},Ne.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:c,_context:L},L},Ne.createElement=function(L,H,ee){var Z,J={},oe=null;if(H!=null)for(Z in H.key!==void 0&&(oe=""+H.key),H)E.call(H,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(J[Z]=H[Z]);var pe=arguments.length-2;if(pe===1)J.children=ee;else if(1<pe){for(var ke=Array(pe),ue=0;ue<pe;ue++)ke[ue]=arguments[ue+2];J.children=ke}if(L&&L.defaultProps)for(Z in pe=L.defaultProps,pe)J[Z]===void 0&&(J[Z]=pe[Z]);return j(L,oe,J)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(L){return{$$typeof:d,render:L}},Ne.isValidElement=B,Ne.lazy=function(L){return{$$typeof:y,_payload:{_status:-1,_result:L},_init:Q}},Ne.memo=function(L,H){return{$$typeof:p,type:L,compare:H===void 0?null:H}},Ne.startTransition=function(L){var H=D.T,ee={};D.T=ee;try{var Z=L(),J=D.S;J!==null&&J(ee,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(R,G)}catch(oe){G(oe)}finally{H!==null&&ee.types!==null&&(H.types=ee.types),D.T=H}},Ne.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ne.use=function(L){return D.H.use(L)},Ne.useActionState=function(L,H,ee){return D.H.useActionState(L,H,ee)},Ne.useCallback=function(L,H){return D.H.useCallback(L,H)},Ne.useContext=function(L){return D.H.useContext(L)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(L,H){return D.H.useDeferredValue(L,H)},Ne.useEffect=function(L,H){return D.H.useEffect(L,H)},Ne.useEffectEvent=function(L){return D.H.useEffectEvent(L)},Ne.useId=function(){return D.H.useId()},Ne.useImperativeHandle=function(L,H,ee){return D.H.useImperativeHandle(L,H,ee)},Ne.useInsertionEffect=function(L,H){return D.H.useInsertionEffect(L,H)},Ne.useLayoutEffect=function(L,H){return D.H.useLayoutEffect(L,H)},Ne.useMemo=function(L,H){return D.H.useMemo(L,H)},Ne.useOptimistic=function(L,H){return D.H.useOptimistic(L,H)},Ne.useReducer=function(L,H,ee){return D.H.useReducer(L,H,ee)},Ne.useRef=function(L){return D.H.useRef(L)},Ne.useState=function(L){return D.H.useState(L)},Ne.useSyncExternalStore=function(L,H,ee){return D.H.useSyncExternalStore(L,H,ee)},Ne.useTransition=function(){return D.H.useTransition()},Ne.version="19.2.3",Ne}var hg;function Co(){return hg||(hg=1,td.exports=Ow()),td.exports}var O=Co();const Mw=Tw(O);var ad={exports:{}},wi={},nd={exports:{}},rd={};var fg;function Uw(){return fg||(fg=1,(function(n){function t(N,k){var Q=N.length;N.push(k);e:for(;0<Q;){var G=Q-1>>>1,Y=N[G];if(0<l(Y,k))N[G]=k,N[Q]=Y,Q=G;else break e}}function r(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var k=N[0],Q=N.pop();if(Q!==k){N[0]=Q;e:for(var G=0,Y=N.length,L=Y>>>1;G<L;){var H=2*(G+1)-1,ee=N[H],Z=H+1,J=N[Z];if(0>l(ee,Q))Z<Y&&0>l(J,ee)?(N[G]=J,N[Z]=Q,G=Z):(N[G]=ee,N[H]=Q,G=H);else if(Z<Y&&0>l(J,Q))N[G]=J,N[Z]=Q,G=Z;else break e}}return k}function l(N,k){var Q=N.sortIndex-k.sortIndex;return Q!==0?Q:N.id-k.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var m=[],p=[],y=1,v=null,b=3,w=!1,x=!1,S=!1,A=!1,T=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function $(N){for(var k=r(p);k!==null;){if(k.callback===null)i(p);else if(k.startTime<=N)i(p),k.sortIndex=k.expirationTime,t(m,k);else break;k=r(p)}}function K(N){if(S=!1,$(N),!x)if(r(m)!==null)x=!0,R||(R=!0,I());else{var k=r(p);k!==null&&X(K,k.startTime-N)}}var R=!1,D=-1,E=5,j=-1;function z(){return A?!0:!(n.unstable_now()-j<E)}function B(){if(A=!1,R){var N=n.unstable_now();j=N;var k=!0;try{e:{x=!1,S&&(S=!1,U(D),D=-1),w=!0;var Q=b;try{t:{for($(N),v=r(m);v!==null&&!(v.expirationTime>N&&z());){var G=v.callback;if(typeof G=="function"){v.callback=null,b=v.priorityLevel;var Y=G(v.expirationTime<=N);if(N=n.unstable_now(),typeof Y=="function"){v.callback=Y,$(N),k=!0;break t}v===r(m)&&i(m),$(N)}else i(m);v=r(m)}if(v!==null)k=!0;else{var L=r(p);L!==null&&X(K,L.startTime-N),k=!1}}break e}finally{v=null,b=Q,w=!1}k=void 0}}finally{k?I():R=!1}}}var I;if(typeof M=="function")I=function(){M(B)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,q=F.port2;F.port1.onmessage=B,I=function(){q.postMessage(null)}}else I=function(){T(B,0)};function X(N,k){D=T(function(){N(n.unstable_now())},k)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(N){switch(b){case 1:case 2:case 3:var k=3;break;default:k=b}var Q=b;b=k;try{return N()}finally{b=Q}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(N,k){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var Q=b;b=N;try{return k()}finally{b=Q}},n.unstable_scheduleCallback=function(N,k,Q){var G=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?G+Q:G):Q=G,N){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=Q+Y,N={id:y++,callback:k,priorityLevel:N,startTime:Q,expirationTime:Y,sortIndex:-1},Q>G?(N.sortIndex=Q,t(p,N),r(m)===null&&N===r(p)&&(S?(U(D),D=-1):S=!0,X(K,Q-G))):(N.sortIndex=Y,t(m,N),x||w||(x=!0,R||(R=!0,I()))),N},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(N){var k=b;return function(){var Q=b;b=k;try{return N.apply(this,arguments)}finally{b=Q}}}})(rd)),rd}var mg;function Dw(){return mg||(mg=1,nd.exports=Uw()),nd.exports}var sd={exports:{}},Lt={};var gg;function zw(){if(gg)return Lt;gg=1;var n=Co();function t(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(m,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:m,containerInfo:p,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Lt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Lt.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return c(m,p,null,y)},Lt.flushSync=function(m){var p=u.T,y=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=p,i.p=y,i.d.f()}},Lt.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},Lt.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Lt.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:w}):y==="script"&&i.d.X(m,{crossOrigin:v,integrity:b,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Lt.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},Lt.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Lt.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=d(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},Lt.requestFormReset=function(m){i.d.r(m)},Lt.unstable_batchedUpdates=function(m,p){return m(p)},Lt.useFormState=function(m,p,y){return u.H.useFormState(m,p,y)},Lt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Lt.version="19.2.3",Lt}var pg;function Lw(){if(pg)return sd.exports;pg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),sd.exports=zw(),sd.exports}var yg;function $w(){if(yg)return wi;yg=1;var n=Dw(),t=Co(),r=Lw();function i(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var a=e,s=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(s=a.return),e=a.return;while(e)}return a.tag===3?s:null}function u(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function d(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function m(e){if(c(e)!==e)throw Error(i(188))}function p(e){var a=e.alternate;if(!a){if(a=c(e),a===null)throw Error(i(188));return a!==e?null:e}for(var s=e,o=a;;){var h=s.return;if(h===null)break;var g=h.alternate;if(g===null){if(o=h.return,o!==null){s=o;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===s)return m(h),e;if(g===o)return m(h),a;g=g.sibling}throw Error(i(188))}if(s.return!==o.return)s=h,o=g;else{for(var _=!1,C=h.child;C;){if(C===s){_=!0,s=h,o=g;break}if(C===o){_=!0,o=h,s=g;break}C=C.sibling}if(!_){for(C=g.child;C;){if(C===s){_=!0,s=g,o=h;break}if(C===o){_=!0,o=g,s=h;break}C=C.sibling}if(!_)throw Error(i(189))}}if(s.alternate!==o)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?e:a}function y(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=y(e),a!==null)return a;e=e.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),M=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function I(e){return e===null||typeof e!="object"?null:(e=B&&e[B]||e["@@iterator"],typeof e=="function"?e:null)}var F=Symbol.for("react.client.reference");function q(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===F?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case T:return"Profiler";case A:return"StrictMode";case K:return"Suspense";case R:return"SuspenseList";case j:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case x:return"Portal";case M:return e.displayName||"Context";case U:return(e._context.displayName||"Context")+".Consumer";case $:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return a=e.displayName||null,a!==null?a:q(e.type)||"Memo";case E:a=e._payload,e=e._init;try{return q(e(a))}catch{}}return null}var X=Array.isArray,N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},G=[],Y=-1;function L(e){return{current:e}}function H(e){0>Y||(e.current=G[Y],G[Y]=null,Y--)}function ee(e,a){Y++,G[Y]=e.current,e.current=a}var Z=L(null),J=L(null),oe=L(null),pe=L(null);function ke(e,a){switch(ee(oe,a),ee(J,e),ee(Z,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?O0(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=O0(a),e=M0(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(Z),ee(Z,e)}function ue(){H(Z),H(J),H(oe)}function he(e){e.memoizedState!==null&&ee(pe,e);var a=Z.current,s=M0(a,e.type);a!==s&&(ee(J,e),ee(Z,s))}function Ce(e){J.current===e&&(H(Z),H(J)),pe.current===e&&(H(pe),gi._currentValue=Q)}var ze,Ae;function Ge(e){if(ze===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);ze=a&&a[1]||"",Ae=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ze+e+Ae}var qe=!1;function et(e,a){if(!e||qe)return"";qe=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(a){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(re){var ne=re}Reflect.construct(e,[],le)}else{try{le.call()}catch(re){ne=re}e.call(le.prototype)}}else{try{throw Error()}catch(re){ne=re}(le=e())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(re){if(re&&ne&&typeof re.stack=="string")return[re.stack,ne.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=o.DetermineComponentFrameRoot(),_=g[0],C=g[1];if(_&&C){var P=_.split(`
`),ae=C.split(`
`);for(h=o=0;o<P.length&&!P[o].includes("DetermineComponentFrameRoot");)o++;for(;h<ae.length&&!ae[h].includes("DetermineComponentFrameRoot");)h++;if(o===P.length||h===ae.length)for(o=P.length-1,h=ae.length-1;1<=o&&0<=h&&P[o]!==ae[h];)h--;for(;1<=o&&0<=h;o--,h--)if(P[o]!==ae[h]){if(o!==1||h!==1)do if(o--,h--,0>h||P[o]!==ae[h]){var se=`
`+P[o].replace(" at new "," at ");return e.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",e.displayName)),se}while(1<=o&&0<=h);break}}}finally{qe=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Ge(s):""}function Ke(e,a){switch(e.tag){case 26:case 27:case 5:return Ge(e.type);case 16:return Ge("Lazy");case 13:return e.child!==a&&a!==null?Ge("Suspense Fallback"):Ge("Suspense");case 19:return Ge("SuspenseList");case 0:case 15:return et(e.type,!1);case 11:return et(e.type.render,!1);case 1:return et(e.type,!0);case 31:return Ge("Activity");default:return""}}function Pe(e){try{var a="",s=null;do a+=Ke(e,s),s=e,e=e.return;while(e);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var rt=Object.prototype.hasOwnProperty,de=n.unstable_scheduleCallback,me=n.unstable_cancelCallback,je=n.unstable_shouldYield,ve=n.unstable_requestPaint,fe=n.unstable_now,Je=n.unstable_getCurrentPriorityLevel,st=n.unstable_ImmediatePriority,pa=n.unstable_UserBlockingPriority,$e=n.unstable_NormalPriority,aa=n.unstable_LowPriority,pt=n.unstable_IdlePriority,na=n.log,Gt=n.unstable_setDisableYieldValue,Ht=null,it=null;function Dt(e){if(typeof na=="function"&&Gt(e),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(Ht,e)}catch{}}var Nt=Math.clz32?Math.clz32:Vi,Io=Math.log,As=Math.LN2;function Vi(e){return e>>>=0,e===0?32:31-(Io(e)/As|0)|0}var Ia=256,kr=262144,ra=4194304;function zt(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Oa(e,a,s){var o=e.pendingLanes;if(o===0)return 0;var h=0,g=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var C=o&134217727;return C!==0?(o=C&~g,o!==0?h=zt(o):(_&=C,_!==0?h=zt(_):s||(s=C&~e,s!==0&&(h=zt(s))))):(C=o&~g,C!==0?h=zt(C):_!==0?h=zt(_):s||(s=o&~e,s!==0&&(h=zt(s)))),h===0?0:a!==0&&a!==h&&(a&g)===0&&(g=h&-h,s=a&-a,g>=s||g===32&&(s&4194048)!==0)?a:h}function Ma(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function Yi(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pa(){var e=ra;return ra<<=1,(ra&62914560)===0&&(ra=4194304),e}function Ua(e){for(var a=[],s=0;31>s;s++)a.push(e);return a}function Ts(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function pv(e,a,s,o,h,g){var _=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var C=e.entanglements,P=e.expirationTimes,ae=e.hiddenUpdates;for(s=_&~s;0<s;){var se=31-Nt(s),le=1<<se;C[se]=0,P[se]=-1;var ne=ae[se];if(ne!==null)for(ae[se]=null,se=0;se<ne.length;se++){var re=ne[se];re!==null&&(re.lane&=-536870913)}s&=~le}o!==0&&fh(e,o,0),g!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=g&~(_&~a))}function fh(e,a,s){e.pendingLanes|=a,e.suspendedLanes&=~a;var o=31-Nt(a);e.entangledLanes|=a,e.entanglements[o]=e.entanglements[o]|1073741824|s&261930}function mh(e,a){var s=e.entangledLanes|=a;for(e=e.entanglements;s;){var o=31-Nt(s),h=1<<o;h&a|e[o]&a&&(e[o]|=a),s&=~h}}function gh(e,a){var s=a&-a;return s=(s&42)!==0?1:Po(s),(s&(e.suspendedLanes|a))!==0?0:s}function Po(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Go(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ph(){var e=k.p;return e!==0?e:(e=window.event,e===void 0?32:ag(e.type))}function yh(e,a){var s=k.p;try{return k.p=e,a()}finally{k.p=s}}var xn=Math.random().toString(36).slice(2),At="__reactFiber$"+xn,Kt="__reactProps$"+xn,jr="__reactContainer$"+xn,Ko="__reactEvents$"+xn,yv="__reactListeners$"+xn,vv="__reactHandles$"+xn,vh="__reactResources$"+xn,Cs="__reactMarker$"+xn;function Vo(e){delete e[At],delete e[Kt],delete e[Ko],delete e[yv],delete e[vv]}function Nr(e){var a=e[At];if(a)return a;for(var s=e.parentNode;s;){if(a=s[jr]||s[At]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(e=H0(e);e!==null;){if(s=e[At])return s;e=H0(e)}return a}e=s,s=e.parentNode}return null}function Ar(e){if(e=e[At]||e[jr]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function Rs(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(i(33))}function Tr(e){var a=e[vh];return a||(a=e[vh]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function kt(e){e[Cs]=!0}var bh=new Set,wh={};function Qn(e,a){Cr(e,a),Cr(e+"Capture",a)}function Cr(e,a){for(wh[e]=a,e=0;e<a.length;e++)bh.add(a[e])}var bv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xh={},_h={};function wv(e){return rt.call(_h,e)?!0:rt.call(xh,e)?!1:bv.test(e)?_h[e]=!0:(xh[e]=!0,!1)}function Fi(e,a,s){if(wv(a))if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var o=a.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+s)}}function Wi(e,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+s)}}function Ja(e,a,s,o){if(o===null)e.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(a,s,""+o)}}function ya(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Sh(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function xv(e,a,s){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,g=o.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return h.call(this)},set:function(_){s=""+_,g.call(this,_)}}),Object.defineProperty(e,a,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(_){s=""+_},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function Yo(e){if(!e._valueTracker){var a=Sh(e)?"checked":"value";e._valueTracker=xv(e,a,""+e[a])}}function Eh(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var s=a.getValue(),o="";return e&&(o=Sh(e)?e.checked?"true":"false":e.value),e=o,e!==s?(a.setValue(e),!0):!1}function Xi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var _v=/[\n"\\]/g;function va(e){return e.replace(_v,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Fo(e,a,s,o,h,g,_,C){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),a!=null?_==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+ya(a)):e.value!==""+ya(a)&&(e.value=""+ya(a)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),a!=null?Wo(e,_,ya(a)):s!=null?Wo(e,_,ya(s)):o!=null&&e.removeAttribute("value"),h==null&&g!=null&&(e.defaultChecked=!!g),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+ya(C):e.removeAttribute("name")}function kh(e,a,s,o,h,g,_,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),a!=null||s!=null){if(!(g!=="submit"&&g!=="reset"||a!=null)){Yo(e);return}s=s!=null?""+ya(s):"",a=a!=null?""+ya(a):s,C||a===e.value||(e.value=a),e.defaultValue=a}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=C?e.checked:!!o,e.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),Yo(e)}function Wo(e,a,s){a==="number"&&Xi(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Rr(e,a,s,o){if(e=e.options,a){a={};for(var h=0;h<s.length;h++)a["$"+s[h]]=!0;for(s=0;s<e.length;s++)h=a.hasOwnProperty("$"+e[s].value),e[s].selected!==h&&(e[s].selected=h),h&&o&&(e[s].defaultSelected=!0)}else{for(s=""+ya(s),a=null,h=0;h<e.length;h++){if(e[h].value===s){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}a!==null||e[h].disabled||(a=e[h])}a!==null&&(a.selected=!0)}}function jh(e,a,s){if(a!=null&&(a=""+ya(a),a!==e.value&&(e.value=a),s==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=s!=null?""+ya(s):""}function Nh(e,a,s,o){if(a==null){if(o!=null){if(s!=null)throw Error(i(92));if(X(o)){if(1<o.length)throw Error(i(93));o=o[0]}s=o}s==null&&(s=""),a=s}s=ya(a),e.defaultValue=s,o=e.textContent,o===s&&o!==""&&o!==null&&(e.value=o),Yo(e)}function Or(e,a){if(a){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=a;return}}e.textContent=a}var Sv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ah(e,a,s){var o=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?o?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":o?e.setProperty(a,s):typeof s!="number"||s===0||Sv.has(a)?a==="float"?e.cssFloat=s:e[a]=(""+s).trim():e[a]=s+"px"}function Th(e,a,s){if(a!=null&&typeof a!="object")throw Error(i(62));if(e=e.style,s!=null){for(var o in s)!s.hasOwnProperty(o)||a!=null&&a.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in a)o=a[h],a.hasOwnProperty(h)&&s[h]!==o&&Ah(e,h,o)}else for(var g in a)a.hasOwnProperty(g)&&Ah(e,g,a[g])}function Xo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ev=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qi(e){return kv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Za(){}var Qo=null;function Jo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mr=null,Ur=null;function Ch(e){var a=Ar(e);if(a&&(e=a.stateNode)){var s=e[Kt]||null;e:switch(e=a.stateNode,a.type){case"input":if(Fo(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+va(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var o=s[a];if(o!==e&&o.form===e.form){var h=o[Kt]||null;if(!h)throw Error(i(90));Fo(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(a=0;a<s.length;a++)o=s[a],o.form===e.form&&Eh(o)}break e;case"textarea":jh(e,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&Rr(e,!!s.multiple,a,!1)}}}var Zo=!1;function Rh(e,a,s){if(Zo)return e(a,s);Zo=!0;try{var o=e(a);return o}finally{if(Zo=!1,(Mr!==null||Ur!==null)&&($l(),Mr&&(a=Mr,e=Ur,Ur=Mr=null,Ch(a),e)))for(a=0;a<e.length;a++)Ch(e[a])}}function Os(e,a){var s=e.stateNode;if(s===null)return null;var o=s[Kt]||null;if(o===null)return null;s=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(i(231,a,typeof s));return s}var en=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ec=!1;if(en)try{var Ms={};Object.defineProperty(Ms,"passive",{get:function(){ec=!0}}),window.addEventListener("test",Ms,Ms),window.removeEventListener("test",Ms,Ms)}catch{ec=!1}var _n=null,tc=null,Ji=null;function Oh(){if(Ji)return Ji;var e,a=tc,s=a.length,o,h="value"in _n?_n.value:_n.textContent,g=h.length;for(e=0;e<s&&a[e]===h[e];e++);var _=s-e;for(o=1;o<=_&&a[s-o]===h[g-o];o++);return Ji=h.slice(e,1<o?1-o:void 0)}function Zi(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function el(){return!0}function Mh(){return!1}function Vt(e){function a(s,o,h,g,_){this._reactName=s,this._targetInst=h,this.type=o,this.nativeEvent=g,this.target=_,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(s=e[C],this[C]=s?s(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?el:Mh,this.isPropagationStopped=Mh,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=el)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=el)},persist:function(){},isPersistent:el}),a}var Jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=Vt(Jn),Us=v({},Jn,{view:0,detail:0}),jv=Vt(Us),ac,nc,Ds,al=v({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ds&&(Ds&&e.type==="mousemove"?(ac=e.screenX-Ds.screenX,nc=e.screenY-Ds.screenY):nc=ac=0,Ds=e),ac)},movementY:function(e){return"movementY"in e?e.movementY:nc}}),Uh=Vt(al),Nv=v({},al,{dataTransfer:0}),Av=Vt(Nv),Tv=v({},Us,{relatedTarget:0}),rc=Vt(Tv),Cv=v({},Jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Rv=Vt(Cv),Ov=v({},Jn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mv=Vt(Ov),Uv=v({},Jn,{data:0}),Dh=Vt(Uv),Dv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $v(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=Lv[e])?!!a[e]:!1}function sc(){return $v}var Bv=v({},Us,{key:function(e){if(e.key){var a=Dv[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=Zi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sc,charCode:function(e){return e.type==="keypress"?Zi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hv=Vt(Bv),qv=v({},al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zh=Vt(qv),Iv=v({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sc}),Pv=Vt(Iv),Gv=v({},Jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kv=Vt(Gv),Vv=v({},al,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Yv=Vt(Vv),Fv=v({},Jn,{newState:0,oldState:0}),Wv=Vt(Fv),Xv=[9,13,27,32],ic=en&&"CompositionEvent"in window,zs=null;en&&"documentMode"in document&&(zs=document.documentMode);var Qv=en&&"TextEvent"in window&&!zs,Lh=en&&(!ic||zs&&8<zs&&11>=zs),$h=" ",Bh=!1;function Hh(e,a){switch(e){case"keyup":return Xv.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dr=!1;function Jv(e,a){switch(e){case"compositionend":return qh(a);case"keypress":return a.which!==32?null:(Bh=!0,$h);case"textInput":return e=a.data,e===$h&&Bh?null:e;default:return null}}function Zv(e,a){if(Dr)return e==="compositionend"||!ic&&Hh(e,a)?(e=Oh(),Ji=tc=_n=null,Dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Lh&&a.locale!=="ko"?null:a.data;default:return null}}var eb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ih(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!eb[e.type]:a==="textarea"}function Ph(e,a,s,o){Mr?Ur?Ur.push(o):Ur=[o]:Mr=o,a=Kl(a,"onChange"),0<a.length&&(s=new tl("onChange","change",null,s,o),e.push({event:s,listeners:a}))}var Ls=null,$s=null;function tb(e){j0(e,0)}function nl(e){var a=Rs(e);if(Eh(a))return e}function Gh(e,a){if(e==="change")return a}var Kh=!1;if(en){var lc;if(en){var oc="oninput"in document;if(!oc){var Vh=document.createElement("div");Vh.setAttribute("oninput","return;"),oc=typeof Vh.oninput=="function"}lc=oc}else lc=!1;Kh=lc&&(!document.documentMode||9<document.documentMode)}function Yh(){Ls&&(Ls.detachEvent("onpropertychange",Fh),$s=Ls=null)}function Fh(e){if(e.propertyName==="value"&&nl($s)){var a=[];Ph(a,$s,e,Jo(e)),Rh(tb,a)}}function ab(e,a,s){e==="focusin"?(Yh(),Ls=a,$s=s,Ls.attachEvent("onpropertychange",Fh)):e==="focusout"&&Yh()}function nb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nl($s)}function rb(e,a){if(e==="click")return nl(a)}function sb(e,a){if(e==="input"||e==="change")return nl(a)}function ib(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var sa=typeof Object.is=="function"?Object.is:ib;function Bs(e,a){if(sa(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var s=Object.keys(e),o=Object.keys(a);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var h=s[o];if(!rt.call(a,h)||!sa(e[h],a[h]))return!1}return!0}function Wh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xh(e,a){var s=Wh(e);e=0;for(var o;s;){if(s.nodeType===3){if(o=e+s.textContent.length,e<=a&&o>=a)return{node:s,offset:a-e};e=o}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Wh(s)}}function Qh(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Qh(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Jh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=Xi(e.document);a instanceof e.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)e=a.contentWindow;else break;a=Xi(e.document)}return a}function cc(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var lb=en&&"documentMode"in document&&11>=document.documentMode,zr=null,uc=null,Hs=null,dc=!1;function Zh(e,a,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;dc||zr==null||zr!==Xi(o)||(o=zr,"selectionStart"in o&&cc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Hs&&Bs(Hs,o)||(Hs=o,o=Kl(uc,"onSelect"),0<o.length&&(a=new tl("onSelect","select",null,a,s),e.push({event:a,listeners:o}),a.target=zr)))}function Zn(e,a){var s={};return s[e.toLowerCase()]=a.toLowerCase(),s["Webkit"+e]="webkit"+a,s["Moz"+e]="moz"+a,s}var Lr={animationend:Zn("Animation","AnimationEnd"),animationiteration:Zn("Animation","AnimationIteration"),animationstart:Zn("Animation","AnimationStart"),transitionrun:Zn("Transition","TransitionRun"),transitionstart:Zn("Transition","TransitionStart"),transitioncancel:Zn("Transition","TransitionCancel"),transitionend:Zn("Transition","TransitionEnd")},hc={},ef={};en&&(ef=document.createElement("div").style,"AnimationEvent"in window||(delete Lr.animationend.animation,delete Lr.animationiteration.animation,delete Lr.animationstart.animation),"TransitionEvent"in window||delete Lr.transitionend.transition);function er(e){if(hc[e])return hc[e];if(!Lr[e])return e;var a=Lr[e],s;for(s in a)if(a.hasOwnProperty(s)&&s in ef)return hc[e]=a[s];return e}var tf=er("animationend"),af=er("animationiteration"),nf=er("animationstart"),ob=er("transitionrun"),cb=er("transitionstart"),ub=er("transitioncancel"),rf=er("transitionend"),sf=new Map,fc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fc.push("scrollEnd");function Da(e,a){sf.set(e,a),Qn(a,[e])}var rl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ba=[],$r=0,mc=0;function sl(){for(var e=$r,a=mc=$r=0;a<e;){var s=ba[a];ba[a++]=null;var o=ba[a];ba[a++]=null;var h=ba[a];ba[a++]=null;var g=ba[a];if(ba[a++]=null,o!==null&&h!==null){var _=o.pending;_===null?h.next=h:(h.next=_.next,_.next=h),o.pending=h}g!==0&&lf(s,h,g)}}function il(e,a,s,o){ba[$r++]=e,ba[$r++]=a,ba[$r++]=s,ba[$r++]=o,mc|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function gc(e,a,s,o){return il(e,a,s,o),ll(e)}function tr(e,a){return il(e,null,null,a),ll(e)}function lf(e,a,s){e.lanes|=s;var o=e.alternate;o!==null&&(o.lanes|=s);for(var h=!1,g=e.return;g!==null;)g.childLanes|=s,o=g.alternate,o!==null&&(o.childLanes|=s),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(h=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,h&&a!==null&&(h=31-Nt(s),e=g.hiddenUpdates,o=e[h],o===null?e[h]=[a]:o.push(a),a.lane=s|536870912),g):null}function ll(e){if(50<oi)throw oi=0,Eu=null,Error(i(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var Br={};function hb(e,a,s,o){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ia(e,a,s,o){return new hb(e,a,s,o)}function pc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tn(e,a){var s=e.alternate;return s===null?(s=ia(e.tag,a,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=a,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,a=e.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function of(e,a){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,a=s.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function ol(e,a,s,o,h,g){var _=0;if(o=e,typeof e=="function")pc(e)&&(_=1);else if(typeof e=="string")_=yw(e,s,Z.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case j:return e=ia(31,s,a,h),e.elementType=j,e.lanes=g,e;case S:return ar(s.children,h,g,a);case A:_=8,h|=24;break;case T:return e=ia(12,s,a,h|2),e.elementType=T,e.lanes=g,e;case K:return e=ia(13,s,a,h),e.elementType=K,e.lanes=g,e;case R:return e=ia(19,s,a,h),e.elementType=R,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:_=10;break e;case U:_=9;break e;case $:_=11;break e;case D:_=14;break e;case E:_=16,o=null;break e}_=29,s=Error(i(130,e===null?"null":typeof e,"")),o=null}return a=ia(_,s,a,h),a.elementType=e,a.type=o,a.lanes=g,a}function ar(e,a,s,o){return e=ia(7,e,o,a),e.lanes=s,e}function yc(e,a,s){return e=ia(6,e,null,a),e.lanes=s,e}function cf(e){var a=ia(18,null,null,0);return a.stateNode=e,a}function vc(e,a,s){return a=ia(4,e.children!==null?e.children:[],e.key,a),a.lanes=s,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var uf=new WeakMap;function wa(e,a){if(typeof e=="object"&&e!==null){var s=uf.get(e);return s!==void 0?s:(a={value:e,source:a,stack:Pe(a)},uf.set(e,a),a)}return{value:e,source:a,stack:Pe(a)}}var Hr=[],qr=0,cl=null,qs=0,xa=[],_a=0,Sn=null,Ga=1,Ka="";function an(e,a){Hr[qr++]=qs,Hr[qr++]=cl,cl=e,qs=a}function df(e,a,s){xa[_a++]=Ga,xa[_a++]=Ka,xa[_a++]=Sn,Sn=e;var o=Ga;e=Ka;var h=32-Nt(o)-1;o&=~(1<<h),s+=1;var g=32-Nt(a)+h;if(30<g){var _=h-h%5;g=(o&(1<<_)-1).toString(32),o>>=_,h-=_,Ga=1<<32-Nt(a)+h|s<<h|o,Ka=g+e}else Ga=1<<g|s<<h|o,Ka=e}function bc(e){e.return!==null&&(an(e,1),df(e,1,0))}function wc(e){for(;e===cl;)cl=Hr[--qr],Hr[qr]=null,qs=Hr[--qr],Hr[qr]=null;for(;e===Sn;)Sn=xa[--_a],xa[_a]=null,Ka=xa[--_a],xa[_a]=null,Ga=xa[--_a],xa[_a]=null}function hf(e,a){xa[_a++]=Ga,xa[_a++]=Ka,xa[_a++]=Sn,Ga=a.id,Ka=a.overflow,Sn=e}var Tt=null,tt=null,Le=!1,En=null,Sa=!1,xc=Error(i(519));function kn(e){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Is(wa(a,e)),xc}function ff(e){var a=e.stateNode,s=e.type,o=e.memoizedProps;switch(a[At]=e,a[Kt]=o,s){case"dialog":Me("cancel",a),Me("close",a);break;case"iframe":case"object":case"embed":Me("load",a);break;case"video":case"audio":for(s=0;s<ui.length;s++)Me(ui[s],a);break;case"source":Me("error",a);break;case"img":case"image":case"link":Me("error",a),Me("load",a);break;case"details":Me("toggle",a);break;case"input":Me("invalid",a),kh(a,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Me("invalid",a);break;case"textarea":Me("invalid",a),Nh(a,o.value,o.defaultValue,o.children)}s=o.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||o.suppressHydrationWarning===!0||C0(a.textContent,s)?(o.popover!=null&&(Me("beforetoggle",a),Me("toggle",a)),o.onScroll!=null&&Me("scroll",a),o.onScrollEnd!=null&&Me("scrollend",a),o.onClick!=null&&(a.onclick=Za),a=!0):a=!1,a||kn(e,!0)}function mf(e){for(Tt=e.return;Tt;)switch(Tt.tag){case 5:case 31:case 13:Sa=!1;return;case 27:case 3:Sa=!0;return;default:Tt=Tt.return}}function Ir(e){if(e!==Tt)return!1;if(!Le)return mf(e),Le=!0,!1;var a=e.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Bu(e.type,e.memoizedProps)),s=!s),s&&tt&&kn(e),mf(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));tt=B0(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));tt=B0(e)}else a===27?(a=tt,Bn(e.type)?(e=Gu,Gu=null,tt=e):tt=a):tt=Tt?ka(e.stateNode.nextSibling):null;return!0}function nr(){tt=Tt=null,Le=!1}function _c(){var e=En;return e!==null&&(Xt===null?Xt=e:Xt.push.apply(Xt,e),En=null),e}function Is(e){En===null?En=[e]:En.push(e)}var Sc=L(null),rr=null,nn=null;function jn(e,a,s){ee(Sc,a._currentValue),a._currentValue=s}function rn(e){e._currentValue=Sc.current,H(Sc)}function Ec(e,a,s){for(;e!==null;){var o=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),e===s)break;e=e.return}}function kc(e,a,s,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var g=h.dependencies;if(g!==null){var _=h.child;g=g.firstContext;e:for(;g!==null;){var C=g;g=h;for(var P=0;P<a.length;P++)if(C.context===a[P]){g.lanes|=s,C=g.alternate,C!==null&&(C.lanes|=s),Ec(g.return,s,e),o||(_=null);break e}g=C.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(i(341));_.lanes|=s,g=_.alternate,g!==null&&(g.lanes|=s),Ec(_,s,e),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===e){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Pr(e,a,s,o){e=null;for(var h=a,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var C=h.type;sa(h.pendingProps.value,_.value)||(e!==null?e.push(C):e=[C])}}else if(h===pe.current){if(_=h.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(gi):e=[gi])}h=h.return}e!==null&&kc(a,e,s,o),a.flags|=262144}function ul(e){for(e=e.firstContext;e!==null;){if(!sa(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function sr(e){rr=e,nn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ct(e){return gf(rr,e)}function dl(e,a){return rr===null&&sr(e),gf(e,a)}function gf(e,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},nn===null){if(e===null)throw Error(i(308));nn=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else nn=nn.next=a;return s}var fb=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(s,o){e.push(o)}};this.abort=function(){a.aborted=!0,e.forEach(function(s){return s()})}},mb=n.unstable_scheduleCallback,gb=n.unstable_NormalPriority,yt={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jc(){return{controller:new fb,data:new Map,refCount:0}}function Ps(e){e.refCount--,e.refCount===0&&mb(gb,function(){e.controller.abort()})}var Gs=null,Nc=0,Gr=0,Kr=null;function pb(e,a){if(Gs===null){var s=Gs=[];Nc=0,Gr=Cu(),Kr={status:"pending",value:void 0,then:function(o){s.push(o)}}}return Nc++,a.then(pf,pf),a}function pf(){if(--Nc===0&&Gs!==null){Kr!==null&&(Kr.status="fulfilled");var e=Gs;Gs=null,Gr=0,Kr=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function yb(e,a){var s=[],o={status:"pending",value:null,reason:null,then:function(h){s.push(h)}};return e.then(function(){o.status="fulfilled",o.value=a;for(var h=0;h<s.length;h++)(0,s[h])(a)},function(h){for(o.status="rejected",o.reason=h,h=0;h<s.length;h++)(0,s[h])(void 0)}),o}var yf=N.S;N.S=function(e,a){e0=fe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&pb(e,a),yf!==null&&yf(e,a)};var ir=L(null);function Ac(){var e=ir.current;return e!==null?e:Qe.pooledCache}function hl(e,a){a===null?ee(ir,ir.current):ee(ir,a.pool)}function vf(){var e=Ac();return e===null?null:{parent:yt._currentValue,pool:e}}var Vr=Error(i(460)),Tc=Error(i(474)),fl=Error(i(542)),ml={then:function(){}};function bf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function wf(e,a,s){switch(s=e[s],s===void 0?e.push(a):s!==a&&(a.then(Za,Za),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,_f(e),e;default:if(typeof a.status=="string")a.then(Za,Za);else{if(e=Qe,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=a,e.status="pending",e.then(function(o){if(a.status==="pending"){var h=a;h.status="fulfilled",h.value=o}},function(o){if(a.status==="pending"){var h=a;h.status="rejected",h.reason=o}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,_f(e),e}throw or=a,Vr}}function lr(e){try{var a=e._init;return a(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(or=s,Vr):s}}var or=null;function xf(){if(or===null)throw Error(i(459));var e=or;return or=null,e}function _f(e){if(e===Vr||e===fl)throw Error(i(483))}var Yr=null,Ks=0;function gl(e){var a=Ks;return Ks+=1,Yr===null&&(Yr=[]),wf(Yr,e,a)}function Vs(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function pl(e,a){throw a.$$typeof===b?Error(i(525)):(e=Object.prototype.toString.call(a),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function Sf(e){function a(W,V){if(e){var te=W.deletions;te===null?(W.deletions=[V],W.flags|=16):te.push(V)}}function s(W,V){if(!e)return null;for(;V!==null;)a(W,V),V=V.sibling;return null}function o(W){for(var V=new Map;W!==null;)W.key!==null?V.set(W.key,W):V.set(W.index,W),W=W.sibling;return V}function h(W,V){return W=tn(W,V),W.index=0,W.sibling=null,W}function g(W,V,te){return W.index=te,e?(te=W.alternate,te!==null?(te=te.index,te<V?(W.flags|=67108866,V):te):(W.flags|=67108866,V)):(W.flags|=1048576,V)}function _(W){return e&&W.alternate===null&&(W.flags|=67108866),W}function C(W,V,te,ie){return V===null||V.tag!==6?(V=yc(te,W.mode,ie),V.return=W,V):(V=h(V,te),V.return=W,V)}function P(W,V,te,ie){var xe=te.type;return xe===S?se(W,V,te.props.children,ie,te.key):V!==null&&(V.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===E&&lr(xe)===V.type)?(V=h(V,te.props),Vs(V,te),V.return=W,V):(V=ol(te.type,te.key,te.props,null,W.mode,ie),Vs(V,te),V.return=W,V)}function ae(W,V,te,ie){return V===null||V.tag!==4||V.stateNode.containerInfo!==te.containerInfo||V.stateNode.implementation!==te.implementation?(V=vc(te,W.mode,ie),V.return=W,V):(V=h(V,te.children||[]),V.return=W,V)}function se(W,V,te,ie,xe){return V===null||V.tag!==7?(V=ar(te,W.mode,ie,xe),V.return=W,V):(V=h(V,te),V.return=W,V)}function le(W,V,te){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=yc(""+V,W.mode,te),V.return=W,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case w:return te=ol(V.type,V.key,V.props,null,W.mode,te),Vs(te,V),te.return=W,te;case x:return V=vc(V,W.mode,te),V.return=W,V;case E:return V=lr(V),le(W,V,te)}if(X(V)||I(V))return V=ar(V,W.mode,te,null),V.return=W,V;if(typeof V.then=="function")return le(W,gl(V),te);if(V.$$typeof===M)return le(W,dl(W,V),te);pl(W,V)}return null}function ne(W,V,te,ie){var xe=V!==null?V.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return xe!==null?null:C(W,V,""+te,ie);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case w:return te.key===xe?P(W,V,te,ie):null;case x:return te.key===xe?ae(W,V,te,ie):null;case E:return te=lr(te),ne(W,V,te,ie)}if(X(te)||I(te))return xe!==null?null:se(W,V,te,ie,null);if(typeof te.then=="function")return ne(W,V,gl(te),ie);if(te.$$typeof===M)return ne(W,V,dl(W,te),ie);pl(W,te)}return null}function re(W,V,te,ie,xe){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return W=W.get(te)||null,C(V,W,""+ie,xe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case w:return W=W.get(ie.key===null?te:ie.key)||null,P(V,W,ie,xe);case x:return W=W.get(ie.key===null?te:ie.key)||null,ae(V,W,ie,xe);case E:return ie=lr(ie),re(W,V,te,ie,xe)}if(X(ie)||I(ie))return W=W.get(te)||null,se(V,W,ie,xe,null);if(typeof ie.then=="function")return re(W,V,te,gl(ie),xe);if(ie.$$typeof===M)return re(W,V,te,dl(V,ie),xe);pl(V,ie)}return null}function ge(W,V,te,ie){for(var xe=null,Be=null,ye=V,Re=V=0,De=null;ye!==null&&Re<te.length;Re++){ye.index>Re?(De=ye,ye=null):De=ye.sibling;var He=ne(W,ye,te[Re],ie);if(He===null){ye===null&&(ye=De);break}e&&ye&&He.alternate===null&&a(W,ye),V=g(He,V,Re),Be===null?xe=He:Be.sibling=He,Be=He,ye=De}if(Re===te.length)return s(W,ye),Le&&an(W,Re),xe;if(ye===null){for(;Re<te.length;Re++)ye=le(W,te[Re],ie),ye!==null&&(V=g(ye,V,Re),Be===null?xe=ye:Be.sibling=ye,Be=ye);return Le&&an(W,Re),xe}for(ye=o(ye);Re<te.length;Re++)De=re(ye,W,Re,te[Re],ie),De!==null&&(e&&De.alternate!==null&&ye.delete(De.key===null?Re:De.key),V=g(De,V,Re),Be===null?xe=De:Be.sibling=De,Be=De);return e&&ye.forEach(function(Gn){return a(W,Gn)}),Le&&an(W,Re),xe}function _e(W,V,te,ie){if(te==null)throw Error(i(151));for(var xe=null,Be=null,ye=V,Re=V=0,De=null,He=te.next();ye!==null&&!He.done;Re++,He=te.next()){ye.index>Re?(De=ye,ye=null):De=ye.sibling;var Gn=ne(W,ye,He.value,ie);if(Gn===null){ye===null&&(ye=De);break}e&&ye&&Gn.alternate===null&&a(W,ye),V=g(Gn,V,Re),Be===null?xe=Gn:Be.sibling=Gn,Be=Gn,ye=De}if(He.done)return s(W,ye),Le&&an(W,Re),xe;if(ye===null){for(;!He.done;Re++,He=te.next())He=le(W,He.value,ie),He!==null&&(V=g(He,V,Re),Be===null?xe=He:Be.sibling=He,Be=He);return Le&&an(W,Re),xe}for(ye=o(ye);!He.done;Re++,He=te.next())He=re(ye,W,Re,He.value,ie),He!==null&&(e&&He.alternate!==null&&ye.delete(He.key===null?Re:He.key),V=g(He,V,Re),Be===null?xe=He:Be.sibling=He,Be=He);return e&&ye.forEach(function(Aw){return a(W,Aw)}),Le&&an(W,Re),xe}function Xe(W,V,te,ie){if(typeof te=="object"&&te!==null&&te.type===S&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case w:e:{for(var xe=te.key;V!==null;){if(V.key===xe){if(xe=te.type,xe===S){if(V.tag===7){s(W,V.sibling),ie=h(V,te.props.children),ie.return=W,W=ie;break e}}else if(V.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===E&&lr(xe)===V.type){s(W,V.sibling),ie=h(V,te.props),Vs(ie,te),ie.return=W,W=ie;break e}s(W,V);break}else a(W,V);V=V.sibling}te.type===S?(ie=ar(te.props.children,W.mode,ie,te.key),ie.return=W,W=ie):(ie=ol(te.type,te.key,te.props,null,W.mode,ie),Vs(ie,te),ie.return=W,W=ie)}return _(W);case x:e:{for(xe=te.key;V!==null;){if(V.key===xe)if(V.tag===4&&V.stateNode.containerInfo===te.containerInfo&&V.stateNode.implementation===te.implementation){s(W,V.sibling),ie=h(V,te.children||[]),ie.return=W,W=ie;break e}else{s(W,V);break}else a(W,V);V=V.sibling}ie=vc(te,W.mode,ie),ie.return=W,W=ie}return _(W);case E:return te=lr(te),Xe(W,V,te,ie)}if(X(te))return ge(W,V,te,ie);if(I(te)){if(xe=I(te),typeof xe!="function")throw Error(i(150));return te=xe.call(te),_e(W,V,te,ie)}if(typeof te.then=="function")return Xe(W,V,gl(te),ie);if(te.$$typeof===M)return Xe(W,V,dl(W,te),ie);pl(W,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,V!==null&&V.tag===6?(s(W,V.sibling),ie=h(V,te),ie.return=W,W=ie):(s(W,V),ie=yc(te,W.mode,ie),ie.return=W,W=ie),_(W)):s(W,V)}return function(W,V,te,ie){try{Ks=0;var xe=Xe(W,V,te,ie);return Yr=null,xe}catch(ye){if(ye===Vr||ye===fl)throw ye;var Be=ia(29,ye,null,W.mode);return Be.lanes=ie,Be.return=W,Be}finally{}}}var cr=Sf(!0),Ef=Sf(!1),Nn=!1;function Cc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rc(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function An(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Tn(e,a,s){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Ie&2)!==0){var h=o.pending;return h===null?a.next=a:(a.next=h.next,h.next=a),o.pending=a,a=ll(e),lf(e,null,s),a}return il(e,o,a,s),ll(e)}function Ys(e,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var o=a.lanes;o&=e.pendingLanes,s|=o,a.lanes=s,mh(e,s)}}function Oc(e,a){var s=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var h=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var _={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};g===null?h=g=_:g=g.next=_,s=s.next}while(s!==null);g===null?h=g=a:g=g.next=a}else h=g=a;s={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:o.shared,callbacks:o.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=a:e.next=a,s.lastBaseUpdate=a}var Mc=!1;function Fs(){if(Mc){var e=Kr;if(e!==null)throw e}}function Ws(e,a,s,o){Mc=!1;var h=e.updateQueue;Nn=!1;var g=h.firstBaseUpdate,_=h.lastBaseUpdate,C=h.shared.pending;if(C!==null){h.shared.pending=null;var P=C,ae=P.next;P.next=null,_===null?g=ae:_.next=ae,_=P;var se=e.alternate;se!==null&&(se=se.updateQueue,C=se.lastBaseUpdate,C!==_&&(C===null?se.firstBaseUpdate=ae:C.next=ae,se.lastBaseUpdate=P))}if(g!==null){var le=h.baseState;_=0,se=ae=P=null,C=g;do{var ne=C.lane&-536870913,re=ne!==C.lane;if(re?(Ue&ne)===ne:(o&ne)===ne){ne!==0&&ne===Gr&&(Mc=!0),se!==null&&(se=se.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ge=e,_e=C;ne=a;var Xe=s;switch(_e.tag){case 1:if(ge=_e.payload,typeof ge=="function"){le=ge.call(Xe,le,ne);break e}le=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=_e.payload,ne=typeof ge=="function"?ge.call(Xe,le,ne):ge,ne==null)break e;le=v({},le,ne);break e;case 2:Nn=!0}}ne=C.callback,ne!==null&&(e.flags|=64,re&&(e.flags|=8192),re=h.callbacks,re===null?h.callbacks=[ne]:re.push(ne))}else re={lane:ne,tag:C.tag,payload:C.payload,callback:C.callback,next:null},se===null?(ae=se=re,P=le):se=se.next=re,_|=ne;if(C=C.next,C===null){if(C=h.shared.pending,C===null)break;re=C,C=re.next,re.next=null,h.lastBaseUpdate=re,h.shared.pending=null}}while(!0);se===null&&(P=le),h.baseState=P,h.firstBaseUpdate=ae,h.lastBaseUpdate=se,g===null&&(h.shared.lanes=0),Un|=_,e.lanes=_,e.memoizedState=le}}function kf(e,a){if(typeof e!="function")throw Error(i(191,e));e.call(a)}function jf(e,a){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)kf(s[e],a)}var Fr=L(null),yl=L(0);function Nf(e,a){e=mn,ee(yl,e),ee(Fr,a),mn=e|a.baseLanes}function Uc(){ee(yl,mn),ee(Fr,Fr.current)}function Dc(){mn=yl.current,H(Fr),H(yl)}var la=L(null),Ea=null;function Cn(e){var a=e.alternate;ee(ft,ft.current&1),ee(la,e),Ea===null&&(a===null||Fr.current!==null||a.memoizedState!==null)&&(Ea=e)}function zc(e){ee(ft,ft.current),ee(la,e),Ea===null&&(Ea=e)}function Af(e){e.tag===22?(ee(ft,ft.current),ee(la,e),Ea===null&&(Ea=e)):Rn()}function Rn(){ee(ft,ft.current),ee(la,la.current)}function oa(e){H(la),Ea===e&&(Ea=null),H(ft)}var ft=L(0);function vl(e){for(var a=e;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Iu(s)||Pu(s)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var sn=0,Te=null,Fe=null,vt=null,bl=!1,Wr=!1,ur=!1,wl=0,Xs=0,Xr=null,vb=0;function ut(){throw Error(i(321))}function Lc(e,a){if(a===null)return!1;for(var s=0;s<a.length&&s<e.length;s++)if(!sa(e[s],a[s]))return!1;return!0}function $c(e,a,s,o,h,g){return sn=g,Te=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,N.H=e===null||e.memoizedState===null?dm:Zc,ur=!1,g=s(o,h),ur=!1,Wr&&(g=Cf(a,s,o,h)),Tf(e),g}function Tf(e){N.H=Zs;var a=Fe!==null&&Fe.next!==null;if(sn=0,vt=Fe=Te=null,bl=!1,Xs=0,Xr=null,a)throw Error(i(300));e===null||bt||(e=e.dependencies,e!==null&&ul(e)&&(bt=!0))}function Cf(e,a,s,o){Te=e;var h=0;do{if(Wr&&(Xr=null),Xs=0,Wr=!1,25<=h)throw Error(i(301));if(h+=1,vt=Fe=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}N.H=hm,g=a(s,o)}while(Wr);return g}function bb(){var e=N.H,a=e.useState()[0];return a=typeof a.then=="function"?Qs(a):a,e=e.useState()[0],(Fe!==null?Fe.memoizedState:null)!==e&&(Te.flags|=1024),a}function Bc(){var e=wl!==0;return wl=0,e}function Hc(e,a,s){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~s}function qc(e){if(bl){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}bl=!1}sn=0,vt=Fe=Te=null,Wr=!1,Xs=wl=0,Xr=null}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Te.memoizedState=vt=e:vt=vt.next=e,vt}function mt(){if(Fe===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var a=vt===null?Te.memoizedState:vt.next;if(a!==null)vt=a,Fe=e;else{if(e===null)throw Te.alternate===null?Error(i(467)):Error(i(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},vt===null?Te.memoizedState=vt=e:vt=vt.next=e}return vt}function xl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qs(e){var a=Xs;return Xs+=1,Xr===null&&(Xr=[]),e=wf(Xr,e,a),a=Te,(vt===null?a.memoizedState:vt.next)===null&&(a=a.alternate,N.H=a===null||a.memoizedState===null?dm:Zc),e}function _l(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Qs(e);if(e.$$typeof===M)return Ct(e)}throw Error(i(438,String(e)))}function Ic(e){var a=null,s=Te.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var o=Te.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(a={data:o.data.map(function(h){return h.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=xl(),Te.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(e),o=0;o<e;o++)s[o]=z;return a.index++,s}function ln(e,a){return typeof a=="function"?a(e):a}function Sl(e){var a=mt();return Pc(a,Fe,e)}function Pc(e,a,s){var o=e.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=s;var h=e.baseQueue,g=o.pending;if(g!==null){if(h!==null){var _=h.next;h.next=g.next,g.next=_}a.baseQueue=h=g,o.pending=null}if(g=e.baseState,h===null)e.memoizedState=g;else{a=h.next;var C=_=null,P=null,ae=a,se=!1;do{var le=ae.lane&-536870913;if(le!==ae.lane?(Ue&le)===le:(sn&le)===le){var ne=ae.revertLane;if(ne===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),le===Gr&&(se=!0);else if((sn&ne)===ne){ae=ae.next,ne===Gr&&(se=!0);continue}else le={lane:0,revertLane:ae.revertLane,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},P===null?(C=P=le,_=g):P=P.next=le,Te.lanes|=ne,Un|=ne;le=ae.action,ur&&s(g,le),g=ae.hasEagerState?ae.eagerState:s(g,le)}else ne={lane:le,revertLane:ae.revertLane,gesture:ae.gesture,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},P===null?(C=P=ne,_=g):P=P.next=ne,Te.lanes|=le,Un|=le;ae=ae.next}while(ae!==null&&ae!==a);if(P===null?_=g:P.next=C,!sa(g,e.memoizedState)&&(bt=!0,se&&(s=Kr,s!==null)))throw s;e.memoizedState=g,e.baseState=_,e.baseQueue=P,o.lastRenderedState=g}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Gc(e){var a=mt(),s=a.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=e;var o=s.dispatch,h=s.pending,g=a.memoizedState;if(h!==null){s.pending=null;var _=h=h.next;do g=e(g,_.action),_=_.next;while(_!==h);sa(g,a.memoizedState)||(bt=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),s.lastRenderedState=g}return[g,o]}function Rf(e,a,s){var o=Te,h=mt(),g=Le;if(g){if(s===void 0)throw Error(i(407));s=s()}else s=a();var _=!sa((Fe||h).memoizedState,s);if(_&&(h.memoizedState=s,bt=!0),h=h.queue,Yc(Uf.bind(null,o,h,e),[e]),h.getSnapshot!==a||_||vt!==null&&vt.memoizedState.tag&1){if(o.flags|=2048,Qr(9,{destroy:void 0},Mf.bind(null,o,h,s,a),null),Qe===null)throw Error(i(349));g||(sn&127)!==0||Of(o,a,s)}return s}function Of(e,a,s){e.flags|=16384,e={getSnapshot:a,value:s},a=Te.updateQueue,a===null?(a=xl(),Te.updateQueue=a,a.stores=[e]):(s=a.stores,s===null?a.stores=[e]:s.push(e))}function Mf(e,a,s,o){a.value=s,a.getSnapshot=o,Df(a)&&zf(e)}function Uf(e,a,s){return s(function(){Df(a)&&zf(e)})}function Df(e){var a=e.getSnapshot;e=e.value;try{var s=a();return!sa(e,s)}catch{return!0}}function zf(e){var a=tr(e,2);a!==null&&Qt(a,e,2)}function Kc(e){var a=qt();if(typeof e=="function"){var s=e;if(e=s(),ur){Dt(!0);try{s()}finally{Dt(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:e},a}function Lf(e,a,s,o){return e.baseState=s,Pc(e,Fe,typeof o=="function"?o:ln)}function wb(e,a,s,o,h){if(jl(e))throw Error(i(485));if(e=a.action,e!==null){var g={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){g.listeners.push(_)}};N.T!==null?s(!0):g.isTransition=!1,o(g),s=a.pending,s===null?(g.next=a.pending=g,$f(a,g)):(g.next=s.next,a.pending=s.next=g)}}function $f(e,a){var s=a.action,o=a.payload,h=e.state;if(a.isTransition){var g=N.T,_={};N.T=_;try{var C=s(h,o),P=N.S;P!==null&&P(_,C),Bf(e,a,C)}catch(ae){Vc(e,a,ae)}finally{g!==null&&_.types!==null&&(g.types=_.types),N.T=g}}else try{g=s(h,o),Bf(e,a,g)}catch(ae){Vc(e,a,ae)}}function Bf(e,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(o){Hf(e,a,o)},function(o){return Vc(e,a,o)}):Hf(e,a,s)}function Hf(e,a,s){a.status="fulfilled",a.value=s,qf(a),e.state=s,a=e.pending,a!==null&&(s=a.next,s===a?e.pending=null:(s=s.next,a.next=s,$f(e,s)))}function Vc(e,a,s){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do a.status="rejected",a.reason=s,qf(a),a=a.next;while(a!==o)}e.action=null}function qf(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function If(e,a){return a}function Pf(e,a){if(Le){var s=Qe.formState;if(s!==null){e:{var o=Te;if(Le){if(tt){t:{for(var h=tt,g=Sa;h.nodeType!==8;){if(!g){h=null;break t}if(h=ka(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){tt=ka(h.nextSibling),o=h.data==="F!";break e}}kn(o)}o=!1}o&&(a=s[0])}}return s=qt(),s.memoizedState=s.baseState=a,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:If,lastRenderedState:a},s.queue=o,s=om.bind(null,Te,o),o.dispatch=s,o=Kc(!1),g=Jc.bind(null,Te,!1,o.queue),o=qt(),h={state:a,dispatch:null,action:e,pending:null},o.queue=h,s=wb.bind(null,Te,h,g,s),h.dispatch=s,o.memoizedState=e,[a,s,!1]}function Gf(e){var a=mt();return Kf(a,Fe,e)}function Kf(e,a,s){if(a=Pc(e,a,If)[0],e=Sl(ln)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var o=Qs(a)}catch(_){throw _===Vr?fl:_}else o=a;a=mt();var h=a.queue,g=h.dispatch;return s!==a.memoizedState&&(Te.flags|=2048,Qr(9,{destroy:void 0},xb.bind(null,h,s),null)),[o,g,e]}function xb(e,a){e.action=a}function Vf(e){var a=mt(),s=Fe;if(s!==null)return Kf(a,s,e);mt(),a=a.memoizedState,s=mt();var o=s.queue.dispatch;return s.memoizedState=e,[a,o,!1]}function Qr(e,a,s,o){return e={tag:e,create:s,deps:o,inst:a,next:null},a=Te.updateQueue,a===null&&(a=xl(),Te.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=e.next=e:(o=s.next,s.next=e,e.next=o,a.lastEffect=e),e}function Yf(){return mt().memoizedState}function El(e,a,s,o){var h=qt();Te.flags|=e,h.memoizedState=Qr(1|a,{destroy:void 0},s,o===void 0?null:o)}function kl(e,a,s,o){var h=mt();o=o===void 0?null:o;var g=h.memoizedState.inst;Fe!==null&&o!==null&&Lc(o,Fe.memoizedState.deps)?h.memoizedState=Qr(a,g,s,o):(Te.flags|=e,h.memoizedState=Qr(1|a,g,s,o))}function Ff(e,a){El(8390656,8,e,a)}function Yc(e,a){kl(2048,8,e,a)}function _b(e){Te.flags|=4;var a=Te.updateQueue;if(a===null)a=xl(),Te.updateQueue=a,a.events=[e];else{var s=a.events;s===null?a.events=[e]:s.push(e)}}function Wf(e){var a=mt().memoizedState;return _b({ref:a,nextImpl:e}),function(){if((Ie&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Xf(e,a){return kl(4,2,e,a)}function Qf(e,a){return kl(4,4,e,a)}function Jf(e,a){if(typeof a=="function"){e=e();var s=a(e);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function Zf(e,a,s){s=s!=null?s.concat([e]):null,kl(4,4,Jf.bind(null,a,e),s)}function Fc(){}function em(e,a){var s=mt();a=a===void 0?null:a;var o=s.memoizedState;return a!==null&&Lc(a,o[1])?o[0]:(s.memoizedState=[e,a],e)}function tm(e,a){var s=mt();a=a===void 0?null:a;var o=s.memoizedState;if(a!==null&&Lc(a,o[1]))return o[0];if(o=e(),ur){Dt(!0);try{e()}finally{Dt(!1)}}return s.memoizedState=[o,a],o}function Wc(e,a,s){return s===void 0||(sn&1073741824)!==0&&(Ue&261930)===0?e.memoizedState=a:(e.memoizedState=s,e=a0(),Te.lanes|=e,Un|=e,s)}function am(e,a,s,o){return sa(s,a)?s:Fr.current!==null?(e=Wc(e,s,o),sa(e,a)||(bt=!0),e):(sn&42)===0||(sn&1073741824)!==0&&(Ue&261930)===0?(bt=!0,e.memoizedState=s):(e=a0(),Te.lanes|=e,Un|=e,a)}function nm(e,a,s,o,h){var g=k.p;k.p=g!==0&&8>g?g:8;var _=N.T,C={};N.T=C,Jc(e,!1,a,s);try{var P=h(),ae=N.S;if(ae!==null&&ae(C,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var se=yb(P,o);Js(e,a,se,da(e))}else Js(e,a,o,da(e))}catch(le){Js(e,a,{then:function(){},status:"rejected",reason:le},da())}finally{k.p=g,_!==null&&C.types!==null&&(_.types=C.types),N.T=_}}function Sb(){}function Xc(e,a,s,o){if(e.tag!==5)throw Error(i(476));var h=rm(e).queue;nm(e,h,a,Q,s===null?Sb:function(){return sm(e),s(o)})}function rm(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:Q},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:s},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function sm(e){var a=rm(e);a.next===null&&(a=e.alternate.memoizedState),Js(e,a.next.queue,{},da())}function Qc(){return Ct(gi)}function im(){return mt().memoizedState}function lm(){return mt().memoizedState}function Eb(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var s=da();e=An(s);var o=Tn(a,e,s);o!==null&&(Qt(o,a,s),Ys(o,a,s)),a={cache:jc()},e.payload=a;return}a=a.return}}function kb(e,a,s){var o=da();s={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},jl(e)?cm(a,s):(s=gc(e,a,s,o),s!==null&&(Qt(s,e,o),um(s,a,o)))}function om(e,a,s){var o=da();Js(e,a,s,o)}function Js(e,a,s,o){var h={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(jl(e))cm(a,h);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var _=a.lastRenderedState,C=g(_,s);if(h.hasEagerState=!0,h.eagerState=C,sa(C,_))return il(e,a,h,0),Qe===null&&sl(),!1}catch{}finally{}if(s=gc(e,a,h,o),s!==null)return Qt(s,e,o),um(s,a,o),!0}return!1}function Jc(e,a,s,o){if(o={lane:2,revertLane:Cu(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},jl(e)){if(a)throw Error(i(479))}else a=gc(e,s,o,2),a!==null&&Qt(a,e,2)}function jl(e){var a=e.alternate;return e===Te||a!==null&&a===Te}function cm(e,a){Wr=bl=!0;var s=e.pending;s===null?a.next=a:(a.next=s.next,s.next=a),e.pending=a}function um(e,a,s){if((s&4194048)!==0){var o=a.lanes;o&=e.pendingLanes,s|=o,a.lanes=s,mh(e,s)}}var Zs={readContext:Ct,use:_l,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useLayoutEffect:ut,useInsertionEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useSyncExternalStore:ut,useId:ut,useHostTransitionStatus:ut,useFormState:ut,useActionState:ut,useOptimistic:ut,useMemoCache:ut,useCacheRefresh:ut};Zs.useEffectEvent=ut;var dm={readContext:Ct,use:_l,useCallback:function(e,a){return qt().memoizedState=[e,a===void 0?null:a],e},useContext:Ct,useEffect:Ff,useImperativeHandle:function(e,a,s){s=s!=null?s.concat([e]):null,El(4194308,4,Jf.bind(null,a,e),s)},useLayoutEffect:function(e,a){return El(4194308,4,e,a)},useInsertionEffect:function(e,a){El(4,2,e,a)},useMemo:function(e,a){var s=qt();a=a===void 0?null:a;var o=e();if(ur){Dt(!0);try{e()}finally{Dt(!1)}}return s.memoizedState=[o,a],o},useReducer:function(e,a,s){var o=qt();if(s!==void 0){var h=s(a);if(ur){Dt(!0);try{s(a)}finally{Dt(!1)}}}else h=a;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=kb.bind(null,Te,e),[o.memoizedState,e]},useRef:function(e){var a=qt();return e={current:e},a.memoizedState=e},useState:function(e){e=Kc(e);var a=e.queue,s=om.bind(null,Te,a);return a.dispatch=s,[e.memoizedState,s]},useDebugValue:Fc,useDeferredValue:function(e,a){var s=qt();return Wc(s,e,a)},useTransition:function(){var e=Kc(!1);return e=nm.bind(null,Te,e.queue,!0,!1),qt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,s){var o=Te,h=qt();if(Le){if(s===void 0)throw Error(i(407));s=s()}else{if(s=a(),Qe===null)throw Error(i(349));(Ue&127)!==0||Of(o,a,s)}h.memoizedState=s;var g={value:s,getSnapshot:a};return h.queue=g,Ff(Uf.bind(null,o,g,e),[e]),o.flags|=2048,Qr(9,{destroy:void 0},Mf.bind(null,o,g,s,a),null),s},useId:function(){var e=qt(),a=Qe.identifierPrefix;if(Le){var s=Ka,o=Ga;s=(o&~(1<<32-Nt(o)-1)).toString(32)+s,a="_"+a+"R_"+s,s=wl++,0<s&&(a+="H"+s.toString(32)),a+="_"}else s=vb++,a="_"+a+"r_"+s.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:Qc,useFormState:Pf,useActionState:Pf,useOptimistic:function(e){var a=qt();a.memoizedState=a.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=Jc.bind(null,Te,!0,s),s.dispatch=a,[e,a]},useMemoCache:Ic,useCacheRefresh:function(){return qt().memoizedState=Eb.bind(null,Te)},useEffectEvent:function(e){var a=qt(),s={impl:e};return a.memoizedState=s,function(){if((Ie&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}},Zc={readContext:Ct,use:_l,useCallback:em,useContext:Ct,useEffect:Yc,useImperativeHandle:Zf,useInsertionEffect:Xf,useLayoutEffect:Qf,useMemo:tm,useReducer:Sl,useRef:Yf,useState:function(){return Sl(ln)},useDebugValue:Fc,useDeferredValue:function(e,a){var s=mt();return am(s,Fe.memoizedState,e,a)},useTransition:function(){var e=Sl(ln)[0],a=mt().memoizedState;return[typeof e=="boolean"?e:Qs(e),a]},useSyncExternalStore:Rf,useId:im,useHostTransitionStatus:Qc,useFormState:Gf,useActionState:Gf,useOptimistic:function(e,a){var s=mt();return Lf(s,Fe,e,a)},useMemoCache:Ic,useCacheRefresh:lm};Zc.useEffectEvent=Wf;var hm={readContext:Ct,use:_l,useCallback:em,useContext:Ct,useEffect:Yc,useImperativeHandle:Zf,useInsertionEffect:Xf,useLayoutEffect:Qf,useMemo:tm,useReducer:Gc,useRef:Yf,useState:function(){return Gc(ln)},useDebugValue:Fc,useDeferredValue:function(e,a){var s=mt();return Fe===null?Wc(s,e,a):am(s,Fe.memoizedState,e,a)},useTransition:function(){var e=Gc(ln)[0],a=mt().memoizedState;return[typeof e=="boolean"?e:Qs(e),a]},useSyncExternalStore:Rf,useId:im,useHostTransitionStatus:Qc,useFormState:Vf,useActionState:Vf,useOptimistic:function(e,a){var s=mt();return Fe!==null?Lf(s,Fe,e,a):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Ic,useCacheRefresh:lm};hm.useEffectEvent=Wf;function eu(e,a,s,o){a=e.memoizedState,s=s(o,a),s=s==null?a:v({},a,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var tu={enqueueSetState:function(e,a,s){e=e._reactInternals;var o=da(),h=An(o);h.payload=a,s!=null&&(h.callback=s),a=Tn(e,h,o),a!==null&&(Qt(a,e,o),Ys(a,e,o))},enqueueReplaceState:function(e,a,s){e=e._reactInternals;var o=da(),h=An(o);h.tag=1,h.payload=a,s!=null&&(h.callback=s),a=Tn(e,h,o),a!==null&&(Qt(a,e,o),Ys(a,e,o))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var s=da(),o=An(s);o.tag=2,a!=null&&(o.callback=a),a=Tn(e,o,s),a!==null&&(Qt(a,e,s),Ys(a,e,s))}};function fm(e,a,s,o,h,g,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,g,_):a.prototype&&a.prototype.isPureReactComponent?!Bs(s,o)||!Bs(h,g):!0}function mm(e,a,s,o){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,o),a.state!==e&&tu.enqueueReplaceState(a,a.state,null)}function dr(e,a){var s=a;if("ref"in a){s={};for(var o in a)o!=="ref"&&(s[o]=a[o])}if(e=e.defaultProps){s===a&&(s=v({},s));for(var h in e)s[h]===void 0&&(s[h]=e[h])}return s}function gm(e){rl(e)}function pm(e){console.error(e)}function ym(e){rl(e)}function Nl(e,a){try{var s=e.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(o){setTimeout(function(){throw o})}}function vm(e,a,s){try{var o=e.onCaughtError;o(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function au(e,a,s){return s=An(s),s.tag=3,s.payload={element:null},s.callback=function(){Nl(e,a)},s}function bm(e){return e=An(e),e.tag=3,e}function wm(e,a,s,o){var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var g=o.value;e.payload=function(){return h(g)},e.callback=function(){vm(a,s,o)}}var _=s.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){vm(a,s,o),typeof h!="function"&&(Dn===null?Dn=new Set([this]):Dn.add(this));var C=o.stack;this.componentDidCatch(o.value,{componentStack:C!==null?C:""})})}function jb(e,a,s,o,h){if(s.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(a=s.alternate,a!==null&&Pr(a,s,h,!0),s=la.current,s!==null){switch(s.tag){case 31:case 13:return Ea===null?Bl():s.alternate===null&&dt===0&&(dt=3),s.flags&=-257,s.flags|=65536,s.lanes=h,o===ml?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([o]):a.add(o),Nu(e,o,h)),!1;case 22:return s.flags|=65536,o===ml?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([o])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([o]):s.add(o)),Nu(e,o,h)),!1}throw Error(i(435,s.tag))}return Nu(e,o,h),Bl(),!1}if(Le)return a=la.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=h,o!==xc&&(e=Error(i(422),{cause:o}),Is(wa(e,s)))):(o!==xc&&(a=Error(i(423),{cause:o}),Is(wa(a,s))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=wa(o,s),h=au(e.stateNode,o,h),Oc(e,h),dt!==4&&(dt=2)),!1;var g=Error(i(520),{cause:o});if(g=wa(g,s),li===null?li=[g]:li.push(g),dt!==4&&(dt=2),a===null)return!0;o=wa(o,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,e=h&-h,s.lanes|=e,e=au(s.stateNode,o,e),Oc(s,e),!1;case 1:if(a=s.type,g=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Dn===null||!Dn.has(g))))return s.flags|=65536,h&=-h,s.lanes|=h,h=bm(h),wm(h,e,s,o),Oc(s,h),!1}s=s.return}while(s!==null);return!1}var nu=Error(i(461)),bt=!1;function Rt(e,a,s,o){a.child=e===null?Ef(a,null,s,o):cr(a,e.child,s,o)}function xm(e,a,s,o,h){s=s.render;var g=a.ref;if("ref"in o){var _={};for(var C in o)C!=="ref"&&(_[C]=o[C])}else _=o;return sr(a),o=$c(e,a,s,_,g,h),C=Bc(),e!==null&&!bt?(Hc(e,a,h),on(e,a,h)):(Le&&C&&bc(a),a.flags|=1,Rt(e,a,o,h),a.child)}function _m(e,a,s,o,h){if(e===null){var g=s.type;return typeof g=="function"&&!pc(g)&&g.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=g,Sm(e,a,g,o,h)):(e=ol(s.type,null,o,a,a.mode,h),e.ref=a.ref,e.return=a,a.child=e)}if(g=e.child,!du(e,h)){var _=g.memoizedProps;if(s=s.compare,s=s!==null?s:Bs,s(_,o)&&e.ref===a.ref)return on(e,a,h)}return a.flags|=1,e=tn(g,o),e.ref=a.ref,e.return=a,a.child=e}function Sm(e,a,s,o,h){if(e!==null){var g=e.memoizedProps;if(Bs(g,o)&&e.ref===a.ref)if(bt=!1,a.pendingProps=o=g,du(e,h))(e.flags&131072)!==0&&(bt=!0);else return a.lanes=e.lanes,on(e,a,h)}return ru(e,a,s,o,h)}function Em(e,a,s,o){var h=o.children,g=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((a.flags&128)!==0){if(g=g!==null?g.baseLanes|s:s,e!==null){for(o=a.child=e.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~g}else o=0,a.child=null;return km(e,a,g,s,o)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&hl(a,g!==null?g.cachePool:null),g!==null?Nf(a,g):Uc(),Af(a);else return o=a.lanes=536870912,km(e,a,g!==null?g.baseLanes|s:s,s,o)}else g!==null?(hl(a,g.cachePool),Nf(a,g),Rn(),a.memoizedState=null):(e!==null&&hl(a,null),Uc(),Rn());return Rt(e,a,h,s),a.child}function ei(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function km(e,a,s,o,h){var g=Ac();return g=g===null?null:{parent:yt._currentValue,pool:g},a.memoizedState={baseLanes:s,cachePool:g},e!==null&&hl(a,null),Uc(),Af(a),e!==null&&Pr(e,a,o,!0),a.childLanes=h,null}function Al(e,a){return a=Cl({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function jm(e,a,s){return cr(a,e.child,null,s),e=Al(a,a.pendingProps),e.flags|=2,oa(a),a.memoizedState=null,e}function Nb(e,a,s){var o=a.pendingProps,h=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(Le){if(o.mode==="hidden")return e=Al(a,o),a.lanes=536870912,ei(null,e);if(zc(a),(e=tt)?(e=$0(e,Sa),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Sn!==null?{id:Ga,overflow:Ka}:null,retryLane:536870912,hydrationErrors:null},s=cf(e),s.return=a,a.child=s,Tt=a,tt=null)):e=null,e===null)throw kn(a);return a.lanes=536870912,null}return Al(a,o)}var g=e.memoizedState;if(g!==null){var _=g.dehydrated;if(zc(a),h)if(a.flags&256)a.flags&=-257,a=jm(e,a,s);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(i(558));else if(bt||Pr(e,a,s,!1),h=(s&e.childLanes)!==0,bt||h){if(o=Qe,o!==null&&(_=gh(o,s),_!==0&&_!==g.retryLane))throw g.retryLane=_,tr(e,_),Qt(o,e,_),nu;Bl(),a=jm(e,a,s)}else e=g.treeContext,tt=ka(_.nextSibling),Tt=a,Le=!0,En=null,Sa=!1,e!==null&&hf(a,e),a=Al(a,o),a.flags|=4096;return a}return e=tn(e.child,{mode:o.mode,children:o.children}),e.ref=a.ref,a.child=e,e.return=a,e}function Tl(e,a){var s=a.ref;if(s===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(i(284));(e===null||e.ref!==s)&&(a.flags|=4194816)}}function ru(e,a,s,o,h){return sr(a),s=$c(e,a,s,o,void 0,h),o=Bc(),e!==null&&!bt?(Hc(e,a,h),on(e,a,h)):(Le&&o&&bc(a),a.flags|=1,Rt(e,a,s,h),a.child)}function Nm(e,a,s,o,h,g){return sr(a),a.updateQueue=null,s=Cf(a,o,s,h),Tf(e),o=Bc(),e!==null&&!bt?(Hc(e,a,g),on(e,a,g)):(Le&&o&&bc(a),a.flags|=1,Rt(e,a,s,g),a.child)}function Am(e,a,s,o,h){if(sr(a),a.stateNode===null){var g=Br,_=s.contextType;typeof _=="object"&&_!==null&&(g=Ct(_)),g=new s(o,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=tu,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=o,g.state=a.memoizedState,g.refs={},Cc(a),_=s.contextType,g.context=typeof _=="object"&&_!==null?Ct(_):Br,g.state=a.memoizedState,_=s.getDerivedStateFromProps,typeof _=="function"&&(eu(a,s,_,o),g.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(_=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),_!==g.state&&tu.enqueueReplaceState(g,g.state,null),Ws(a,o,g,h),Fs(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),o=!0}else if(e===null){g=a.stateNode;var C=a.memoizedProps,P=dr(s,C);g.props=P;var ae=g.context,se=s.contextType;_=Br,typeof se=="object"&&se!==null&&(_=Ct(se));var le=s.getDerivedStateFromProps;se=typeof le=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,se||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||ae!==_)&&mm(a,g,o,_),Nn=!1;var ne=a.memoizedState;g.state=ne,Ws(a,o,g,h),Fs(),ae=a.memoizedState,C||ne!==ae||Nn?(typeof le=="function"&&(eu(a,s,le,o),ae=a.memoizedState),(P=Nn||fm(a,s,P,o,ne,ae,_))?(se||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=ae),g.props=o,g.state=ae,g.context=_,o=P):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{g=a.stateNode,Rc(e,a),_=a.memoizedProps,se=dr(s,_),g.props=se,le=a.pendingProps,ne=g.context,ae=s.contextType,P=Br,typeof ae=="object"&&ae!==null&&(P=Ct(ae)),C=s.getDerivedStateFromProps,(ae=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_!==le||ne!==P)&&mm(a,g,o,P),Nn=!1,ne=a.memoizedState,g.state=ne,Ws(a,o,g,h),Fs();var re=a.memoizedState;_!==le||ne!==re||Nn||e!==null&&e.dependencies!==null&&ul(e.dependencies)?(typeof C=="function"&&(eu(a,s,C,o),re=a.memoizedState),(se=Nn||fm(a,s,se,o,ne,re,P)||e!==null&&e.dependencies!==null&&ul(e.dependencies))?(ae||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,re,P),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,re,P)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||_===e.memoizedProps&&ne===e.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&ne===e.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=re),g.props=o,g.state=re,g.context=P,o=se):(typeof g.componentDidUpdate!="function"||_===e.memoizedProps&&ne===e.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&ne===e.memoizedState||(a.flags|=1024),o=!1)}return g=o,Tl(e,a),o=(a.flags&128)!==0,g||o?(g=a.stateNode,s=o&&typeof s.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,e!==null&&o?(a.child=cr(a,e.child,null,h),a.child=cr(a,null,s,h)):Rt(e,a,s,h),a.memoizedState=g.state,e=a.child):e=on(e,a,h),e}function Tm(e,a,s,o){return nr(),a.flags|=256,Rt(e,a,s,o),a.child}var su={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function iu(e){return{baseLanes:e,cachePool:vf()}}function lu(e,a,s){return e=e!==null?e.childLanes&~s:0,a&&(e|=ua),e}function Cm(e,a,s){var o=a.pendingProps,h=!1,g=(a.flags&128)!==0,_;if((_=g)||(_=e!==null&&e.memoizedState===null?!1:(ft.current&2)!==0),_&&(h=!0,a.flags&=-129),_=(a.flags&32)!==0,a.flags&=-33,e===null){if(Le){if(h?Cn(a):Rn(),(e=tt)?(e=$0(e,Sa),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Sn!==null?{id:Ga,overflow:Ka}:null,retryLane:536870912,hydrationErrors:null},s=cf(e),s.return=a,a.child=s,Tt=a,tt=null)):e=null,e===null)throw kn(a);return Pu(e)?a.lanes=32:a.lanes=536870912,null}var C=o.children;return o=o.fallback,h?(Rn(),h=a.mode,C=Cl({mode:"hidden",children:C},h),o=ar(o,h,s,null),C.return=a,o.return=a,C.sibling=o,a.child=C,o=a.child,o.memoizedState=iu(s),o.childLanes=lu(e,_,s),a.memoizedState=su,ei(null,o)):(Cn(a),ou(a,C))}var P=e.memoizedState;if(P!==null&&(C=P.dehydrated,C!==null)){if(g)a.flags&256?(Cn(a),a.flags&=-257,a=cu(e,a,s)):a.memoizedState!==null?(Rn(),a.child=e.child,a.flags|=128,a=null):(Rn(),C=o.fallback,h=a.mode,o=Cl({mode:"visible",children:o.children},h),C=ar(C,h,s,null),C.flags|=2,o.return=a,C.return=a,o.sibling=C,a.child=o,cr(a,e.child,null,s),o=a.child,o.memoizedState=iu(s),o.childLanes=lu(e,_,s),a.memoizedState=su,a=ei(null,o));else if(Cn(a),Pu(C)){if(_=C.nextSibling&&C.nextSibling.dataset,_)var ae=_.dgst;_=ae,o=Error(i(419)),o.stack="",o.digest=_,Is({value:o,source:null,stack:null}),a=cu(e,a,s)}else if(bt||Pr(e,a,s,!1),_=(s&e.childLanes)!==0,bt||_){if(_=Qe,_!==null&&(o=gh(_,s),o!==0&&o!==P.retryLane))throw P.retryLane=o,tr(e,o),Qt(_,e,o),nu;Iu(C)||Bl(),a=cu(e,a,s)}else Iu(C)?(a.flags|=192,a.child=e.child,a=null):(e=P.treeContext,tt=ka(C.nextSibling),Tt=a,Le=!0,En=null,Sa=!1,e!==null&&hf(a,e),a=ou(a,o.children),a.flags|=4096);return a}return h?(Rn(),C=o.fallback,h=a.mode,P=e.child,ae=P.sibling,o=tn(P,{mode:"hidden",children:o.children}),o.subtreeFlags=P.subtreeFlags&65011712,ae!==null?C=tn(ae,C):(C=ar(C,h,s,null),C.flags|=2),C.return=a,o.return=a,o.sibling=C,a.child=o,ei(null,o),o=a.child,C=e.child.memoizedState,C===null?C=iu(s):(h=C.cachePool,h!==null?(P=yt._currentValue,h=h.parent!==P?{parent:P,pool:P}:h):h=vf(),C={baseLanes:C.baseLanes|s,cachePool:h}),o.memoizedState=C,o.childLanes=lu(e,_,s),a.memoizedState=su,ei(e.child,o)):(Cn(a),s=e.child,e=s.sibling,s=tn(s,{mode:"visible",children:o.children}),s.return=a,s.sibling=null,e!==null&&(_=a.deletions,_===null?(a.deletions=[e],a.flags|=16):_.push(e)),a.child=s,a.memoizedState=null,s)}function ou(e,a){return a=Cl({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function Cl(e,a){return e=ia(22,e,null,a),e.lanes=0,e}function cu(e,a,s){return cr(a,e.child,null,s),e=ou(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function Rm(e,a,s){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a),Ec(e.return,a,s)}function uu(e,a,s,o,h,g){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:h,treeForkCount:g}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=o,_.tail=s,_.tailMode=h,_.treeForkCount=g)}function Om(e,a,s){var o=a.pendingProps,h=o.revealOrder,g=o.tail;o=o.children;var _=ft.current,C=(_&2)!==0;if(C?(_=_&1|2,a.flags|=128):_&=1,ee(ft,_),Rt(e,a,o,s),o=Le?qs:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rm(e,s,a);else if(e.tag===19)Rm(e,s,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(s=a.child,h=null;s!==null;)e=s.alternate,e!==null&&vl(e)===null&&(h=s),s=s.sibling;s=h,s===null?(h=a.child,a.child=null):(h=s.sibling,s.sibling=null),uu(a,!1,h,s,g,o);break;case"backwards":case"unstable_legacy-backwards":for(s=null,h=a.child,a.child=null;h!==null;){if(e=h.alternate,e!==null&&vl(e)===null){a.child=h;break}e=h.sibling,h.sibling=s,s=h,h=e}uu(a,!0,s,null,g,o);break;case"together":uu(a,!1,null,null,void 0,o);break;default:a.memoizedState=null}return a.child}function on(e,a,s){if(e!==null&&(a.dependencies=e.dependencies),Un|=a.lanes,(s&a.childLanes)===0)if(e!==null){if(Pr(e,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(i(153));if(a.child!==null){for(e=a.child,s=tn(e,e.pendingProps),a.child=s,s.return=a;e.sibling!==null;)e=e.sibling,s=s.sibling=tn(e,e.pendingProps),s.return=a;s.sibling=null}return a.child}function du(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&ul(e)))}function Ab(e,a,s){switch(a.tag){case 3:ke(a,a.stateNode.containerInfo),jn(a,yt,e.memoizedState.cache),nr();break;case 27:case 5:he(a);break;case 4:ke(a,a.stateNode.containerInfo);break;case 10:jn(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,zc(a),null;break;case 13:var o=a.memoizedState;if(o!==null)return o.dehydrated!==null?(Cn(a),a.flags|=128,null):(s&a.child.childLanes)!==0?Cm(e,a,s):(Cn(a),e=on(e,a,s),e!==null?e.sibling:null);Cn(a);break;case 19:var h=(e.flags&128)!==0;if(o=(s&a.childLanes)!==0,o||(Pr(e,a,s,!1),o=(s&a.childLanes)!==0),h){if(o)return Om(e,a,s);a.flags|=128}if(h=a.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ee(ft,ft.current),o)break;return null;case 22:return a.lanes=0,Em(e,a,s,a.pendingProps);case 24:jn(a,yt,e.memoizedState.cache)}return on(e,a,s)}function Mm(e,a,s){if(e!==null)if(e.memoizedProps!==a.pendingProps)bt=!0;else{if(!du(e,s)&&(a.flags&128)===0)return bt=!1,Ab(e,a,s);bt=(e.flags&131072)!==0}else bt=!1,Le&&(a.flags&1048576)!==0&&df(a,qs,a.index);switch(a.lanes=0,a.tag){case 16:e:{var o=a.pendingProps;if(e=lr(a.elementType),a.type=e,typeof e=="function")pc(e)?(o=dr(e,o),a.tag=1,a=Am(null,a,e,o,s)):(a.tag=0,a=ru(null,a,e,o,s));else{if(e!=null){var h=e.$$typeof;if(h===$){a.tag=11,a=xm(null,a,e,o,s);break e}else if(h===D){a.tag=14,a=_m(null,a,e,o,s);break e}}throw a=q(e)||e,Error(i(306,a,""))}}return a;case 0:return ru(e,a,a.type,a.pendingProps,s);case 1:return o=a.type,h=dr(o,a.pendingProps),Am(e,a,o,h,s);case 3:e:{if(ke(a,a.stateNode.containerInfo),e===null)throw Error(i(387));o=a.pendingProps;var g=a.memoizedState;h=g.element,Rc(e,a),Ws(a,o,null,s);var _=a.memoizedState;if(o=_.cache,jn(a,yt,o),o!==g.cache&&kc(a,[yt],s,!0),Fs(),o=_.element,g.isDehydrated)if(g={element:o,isDehydrated:!1,cache:_.cache},a.updateQueue.baseState=g,a.memoizedState=g,a.flags&256){a=Tm(e,a,o,s);break e}else if(o!==h){h=wa(Error(i(424)),a),Is(h),a=Tm(e,a,o,s);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(tt=ka(e.firstChild),Tt=a,Le=!0,En=null,Sa=!0,s=Ef(a,null,o,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(nr(),o===h){a=on(e,a,s);break e}Rt(e,a,o,s)}a=a.child}return a;case 26:return Tl(e,a),e===null?(s=G0(a.type,null,a.pendingProps,null))?a.memoizedState=s:Le||(s=a.type,e=a.pendingProps,o=Vl(oe.current).createElement(s),o[At]=a,o[Kt]=e,Ot(o,s,e),kt(o),a.stateNode=o):a.memoizedState=G0(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return he(a),e===null&&Le&&(o=a.stateNode=q0(a.type,a.pendingProps,oe.current),Tt=a,Sa=!0,h=tt,Bn(a.type)?(Gu=h,tt=ka(o.firstChild)):tt=h),Rt(e,a,a.pendingProps.children,s),Tl(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&Le&&((h=o=tt)&&(o=rw(o,a.type,a.pendingProps,Sa),o!==null?(a.stateNode=o,Tt=a,tt=ka(o.firstChild),Sa=!1,h=!0):h=!1),h||kn(a)),he(a),h=a.type,g=a.pendingProps,_=e!==null?e.memoizedProps:null,o=g.children,Bu(h,g)?o=null:_!==null&&Bu(h,_)&&(a.flags|=32),a.memoizedState!==null&&(h=$c(e,a,bb,null,null,s),gi._currentValue=h),Tl(e,a),Rt(e,a,o,s),a.child;case 6:return e===null&&Le&&((e=s=tt)&&(s=sw(s,a.pendingProps,Sa),s!==null?(a.stateNode=s,Tt=a,tt=null,e=!0):e=!1),e||kn(a)),null;case 13:return Cm(e,a,s);case 4:return ke(a,a.stateNode.containerInfo),o=a.pendingProps,e===null?a.child=cr(a,null,o,s):Rt(e,a,o,s),a.child;case 11:return xm(e,a,a.type,a.pendingProps,s);case 7:return Rt(e,a,a.pendingProps,s),a.child;case 8:return Rt(e,a,a.pendingProps.children,s),a.child;case 12:return Rt(e,a,a.pendingProps.children,s),a.child;case 10:return o=a.pendingProps,jn(a,a.type,o.value),Rt(e,a,o.children,s),a.child;case 9:return h=a.type._context,o=a.pendingProps.children,sr(a),h=Ct(h),o=o(h),a.flags|=1,Rt(e,a,o,s),a.child;case 14:return _m(e,a,a.type,a.pendingProps,s);case 15:return Sm(e,a,a.type,a.pendingProps,s);case 19:return Om(e,a,s);case 31:return Nb(e,a,s);case 22:return Em(e,a,s,a.pendingProps);case 24:return sr(a),o=Ct(yt),e===null?(h=Ac(),h===null&&(h=Qe,g=jc(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=s),h=g),a.memoizedState={parent:o,cache:h},Cc(a),jn(a,yt,h)):((e.lanes&s)!==0&&(Rc(e,a),Ws(a,null,null,s),Fs()),h=e.memoizedState,g=a.memoizedState,h.parent!==o?(h={parent:o,cache:o},a.memoizedState=h,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=h),jn(a,yt,o)):(o=g.cache,jn(a,yt,o),o!==h.cache&&kc(a,[yt],s,!0))),Rt(e,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function cn(e){e.flags|=4}function hu(e,a,s,o,h){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(i0())e.flags|=8192;else throw or=ml,Tc}else e.flags&=-16777217}function Um(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!W0(a))if(i0())e.flags|=8192;else throw or=ml,Tc}function Rl(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?Pa():536870912,e.lanes|=a,ts|=a)}function ti(e,a){if(!Le)switch(e.tailMode){case"hidden":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function at(e){var a=e.alternate!==null&&e.alternate.child===e.child,s=0,o=0;if(a)for(var h=e.child;h!==null;)s|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)s|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=s,a}function Tb(e,a,s){var o=a.pendingProps;switch(wc(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(a),null;case 1:return at(a),null;case 3:return s=a.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),rn(yt),ue(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ir(a)?cn(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,_c())),at(a),null;case 26:var h=a.type,g=a.memoizedState;return e===null?(cn(a),g!==null?(at(a),Um(a,g)):(at(a),hu(a,h,null,o,s))):g?g!==e.memoizedState?(cn(a),at(a),Um(a,g)):(at(a),a.flags&=-16777217):(e=e.memoizedProps,e!==o&&cn(a),at(a),hu(a,h,e,o,s)),null;case 27:if(Ce(a),s=oe.current,h=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==o&&cn(a);else{if(!o){if(a.stateNode===null)throw Error(i(166));return at(a),null}e=Z.current,Ir(a)?ff(a):(e=q0(h,o,s),a.stateNode=e,cn(a))}return at(a),null;case 5:if(Ce(a),h=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==o&&cn(a);else{if(!o){if(a.stateNode===null)throw Error(i(166));return at(a),null}if(g=Z.current,Ir(a))ff(a);else{var _=Vl(oe.current);switch(g){case 1:g=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:g=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":g=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":g=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":g=_.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof o.is=="string"?_.createElement("select",{is:o.is}):_.createElement("select"),o.multiple?g.multiple=!0:o.size&&(g.size=o.size);break;default:g=typeof o.is=="string"?_.createElement(h,{is:o.is}):_.createElement(h)}}g[At]=a,g[Kt]=o;e:for(_=a.child;_!==null;){if(_.tag===5||_.tag===6)g.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===a)break e;for(;_.sibling===null;){if(_.return===null||_.return===a)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}a.stateNode=g;e:switch(Ot(g,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&cn(a)}}return at(a),hu(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,s),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==o&&cn(a);else{if(typeof o!="string"&&a.stateNode===null)throw Error(i(166));if(e=oe.current,Ir(a)){if(e=a.stateNode,s=a.memoizedProps,o=null,h=Tt,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[At]=a,e=!!(e.nodeValue===s||o!==null&&o.suppressHydrationWarning===!0||C0(e.nodeValue,s)),e||kn(a,!0)}else e=Vl(e).createTextNode(o),e[At]=a,a.stateNode=e}return at(a),null;case 31:if(s=a.memoizedState,e===null||e.memoizedState!==null){if(o=Ir(a),s!==null){if(e===null){if(!o)throw Error(i(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[At]=a}else nr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;at(a),e=!1}else s=_c(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return a.flags&256?(oa(a),a):(oa(a),null);if((a.flags&128)!==0)throw Error(i(558))}return at(a),null;case 13:if(o=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Ir(a),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(i(318));if(h=a.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[At]=a}else nr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;at(a),h=!1}else h=_c(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return a.flags&256?(oa(a),a):(oa(a),null)}return oa(a),(a.flags&128)!==0?(a.lanes=s,a):(s=o!==null,e=e!==null&&e.memoizedState!==null,s&&(o=a.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==h&&(o.flags|=2048)),s!==e&&s&&(a.child.flags|=8192),Rl(a,a.updateQueue),at(a),null);case 4:return ue(),e===null&&Uu(a.stateNode.containerInfo),at(a),null;case 10:return rn(a.type),at(a),null;case 19:if(H(ft),o=a.memoizedState,o===null)return at(a),null;if(h=(a.flags&128)!==0,g=o.rendering,g===null)if(h)ti(o,!1);else{if(dt!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(g=vl(e),g!==null){for(a.flags|=128,ti(o,!1),e=g.updateQueue,a.updateQueue=e,Rl(a,e),a.subtreeFlags=0,e=s,s=a.child;s!==null;)of(s,e),s=s.sibling;return ee(ft,ft.current&1|2),Le&&an(a,o.treeForkCount),a.child}e=e.sibling}o.tail!==null&&fe()>zl&&(a.flags|=128,h=!0,ti(o,!1),a.lanes=4194304)}else{if(!h)if(e=vl(g),e!==null){if(a.flags|=128,h=!0,e=e.updateQueue,a.updateQueue=e,Rl(a,e),ti(o,!0),o.tail===null&&o.tailMode==="hidden"&&!g.alternate&&!Le)return at(a),null}else 2*fe()-o.renderingStartTime>zl&&s!==536870912&&(a.flags|=128,h=!0,ti(o,!1),a.lanes=4194304);o.isBackwards?(g.sibling=a.child,a.child=g):(e=o.last,e!==null?e.sibling=g:a.child=g,o.last=g)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=fe(),e.sibling=null,s=ft.current,ee(ft,h?s&1|2:s&1),Le&&an(a,o.treeForkCount),e):(at(a),null);case 22:case 23:return oa(a),Dc(),o=a.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(a.flags|=8192):o&&(a.flags|=8192),o?(s&536870912)!==0&&(a.flags&128)===0&&(at(a),a.subtreeFlags&6&&(a.flags|=8192)):at(a),s=a.updateQueue,s!==null&&Rl(a,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==s&&(a.flags|=2048),e!==null&&H(ir),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),rn(yt),at(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function Cb(e,a){switch(wc(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return rn(yt),ue(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return Ce(a),null;case 31:if(a.memoizedState!==null){if(oa(a),a.alternate===null)throw Error(i(340));nr()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(oa(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(i(340));nr()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return H(ft),null;case 4:return ue(),null;case 10:return rn(a.type),null;case 22:case 23:return oa(a),Dc(),e!==null&&H(ir),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return rn(yt),null;case 25:return null;default:return null}}function Dm(e,a){switch(wc(a),a.tag){case 3:rn(yt),ue();break;case 26:case 27:case 5:Ce(a);break;case 4:ue();break;case 31:a.memoizedState!==null&&oa(a);break;case 13:oa(a);break;case 19:H(ft);break;case 10:rn(a.type);break;case 22:case 23:oa(a),Dc(),e!==null&&H(ir);break;case 24:rn(yt)}}function ai(e,a){try{var s=a.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var h=o.next;s=h;do{if((s.tag&e)===e){o=void 0;var g=s.create,_=s.inst;o=g(),_.destroy=o}s=s.next}while(s!==h)}}catch(C){Ye(a,a.return,C)}}function On(e,a,s){try{var o=a.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var g=h.next;o=g;do{if((o.tag&e)===e){var _=o.inst,C=_.destroy;if(C!==void 0){_.destroy=void 0,h=a;var P=s,ae=C;try{ae()}catch(se){Ye(h,P,se)}}}o=o.next}while(o!==g)}}catch(se){Ye(a,a.return,se)}}function zm(e){var a=e.updateQueue;if(a!==null){var s=e.stateNode;try{jf(a,s)}catch(o){Ye(e,e.return,o)}}}function Lm(e,a,s){s.props=dr(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(o){Ye(e,a,o)}}function ni(e,a){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof s=="function"?e.refCleanup=s(o):s.current=o}}catch(h){Ye(e,a,h)}}function Va(e,a){var s=e.ref,o=e.refCleanup;if(s!==null)if(typeof o=="function")try{o()}catch(h){Ye(e,a,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(h){Ye(e,a,h)}else s.current=null}function $m(e){var a=e.type,s=e.memoizedProps,o=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&o.focus();break e;case"img":s.src?o.src=s.src:s.srcSet&&(o.srcset=s.srcSet)}}catch(h){Ye(e,e.return,h)}}function fu(e,a,s){try{var o=e.stateNode;Jb(o,e.type,s,a),o[Kt]=a}catch(h){Ye(e,e.return,h)}}function Bm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Bn(e.type)||e.tag===4}function mu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Bn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gu(e,a,s){var o=e.tag;if(o===5||o===6)e=e.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(e),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=Za));else if(o!==4&&(o===27&&Bn(e.type)&&(s=e.stateNode,a=null),e=e.child,e!==null))for(gu(e,a,s),e=e.sibling;e!==null;)gu(e,a,s),e=e.sibling}function Ol(e,a,s){var o=e.tag;if(o===5||o===6)e=e.stateNode,a?s.insertBefore(e,a):s.appendChild(e);else if(o!==4&&(o===27&&Bn(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Ol(e,a,s),e=e.sibling;e!==null;)Ol(e,a,s),e=e.sibling}function Hm(e){var a=e.stateNode,s=e.memoizedProps;try{for(var o=e.type,h=a.attributes;h.length;)a.removeAttributeNode(h[0]);Ot(a,o,s),a[At]=e,a[Kt]=s}catch(g){Ye(e,e.return,g)}}var un=!1,wt=!1,pu=!1,qm=typeof WeakSet=="function"?WeakSet:Set,jt=null;function Rb(e,a){if(e=e.containerInfo,Lu=Zl,e=Jh(e),cc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var h=o.anchorOffset,g=o.focusNode;o=o.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var _=0,C=-1,P=-1,ae=0,se=0,le=e,ne=null;t:for(;;){for(var re;le!==s||h!==0&&le.nodeType!==3||(C=_+h),le!==g||o!==0&&le.nodeType!==3||(P=_+o),le.nodeType===3&&(_+=le.nodeValue.length),(re=le.firstChild)!==null;)ne=le,le=re;for(;;){if(le===e)break t;if(ne===s&&++ae===h&&(C=_),ne===g&&++se===o&&(P=_),(re=le.nextSibling)!==null)break;le=ne,ne=le.parentNode}le=re}s=C===-1||P===-1?null:{start:C,end:P}}else s=null}s=s||{start:0,end:0}}else s=null;for($u={focusedElem:e,selectionRange:s},Zl=!1,jt=a;jt!==null;)if(a=jt,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,jt=e;else for(;jt!==null;){switch(a=jt,g=a.alternate,e=a.flags,a.tag){case 0:if((e&4)!==0&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)h=e[s],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,s=a,h=g.memoizedProps,g=g.memoizedState,o=s.stateNode;try{var ge=dr(s.type,h);e=o.getSnapshotBeforeUpdate(ge,g),o.__reactInternalSnapshotBeforeUpdate=e}catch(_e){Ye(s,s.return,_e)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,s=e.nodeType,s===9)qu(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":qu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=a.sibling,e!==null){e.return=a.return,jt=e;break}jt=a.return}}function Im(e,a,s){var o=s.flags;switch(s.tag){case 0:case 11:case 15:hn(e,s),o&4&&ai(5,s);break;case 1:if(hn(e,s),o&4)if(e=s.stateNode,a===null)try{e.componentDidMount()}catch(_){Ye(s,s.return,_)}else{var h=dr(s.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(h,a,e.__reactInternalSnapshotBeforeUpdate)}catch(_){Ye(s,s.return,_)}}o&64&&zm(s),o&512&&ni(s,s.return);break;case 3:if(hn(e,s),o&64&&(e=s.updateQueue,e!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{jf(e,a)}catch(_){Ye(s,s.return,_)}}break;case 27:a===null&&o&4&&Hm(s);case 26:case 5:hn(e,s),a===null&&o&4&&$m(s),o&512&&ni(s,s.return);break;case 12:hn(e,s);break;case 31:hn(e,s),o&4&&Km(e,s);break;case 13:hn(e,s),o&4&&Vm(e,s),o&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Hb.bind(null,s),iw(e,s))));break;case 22:if(o=s.memoizedState!==null||un,!o){a=a!==null&&a.memoizedState!==null||wt,h=un;var g=wt;un=o,(wt=a)&&!g?fn(e,s,(s.subtreeFlags&8772)!==0):hn(e,s),un=h,wt=g}break;case 30:break;default:hn(e,s)}}function Pm(e){var a=e.alternate;a!==null&&(e.alternate=null,Pm(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&Vo(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var lt=null,Yt=!1;function dn(e,a,s){for(s=s.child;s!==null;)Gm(e,a,s),s=s.sibling}function Gm(e,a,s){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(Ht,s)}catch{}switch(s.tag){case 26:wt||Va(s,a),dn(e,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:wt||Va(s,a);var o=lt,h=Yt;Bn(s.type)&&(lt=s.stateNode,Yt=!1),dn(e,a,s),hi(s.stateNode),lt=o,Yt=h;break;case 5:wt||Va(s,a);case 6:if(o=lt,h=Yt,lt=null,dn(e,a,s),lt=o,Yt=h,lt!==null)if(Yt)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(s.stateNode)}catch(g){Ye(s,a,g)}else try{lt.removeChild(s.stateNode)}catch(g){Ye(s,a,g)}break;case 18:lt!==null&&(Yt?(e=lt,z0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),cs(e)):z0(lt,s.stateNode));break;case 4:o=lt,h=Yt,lt=s.stateNode.containerInfo,Yt=!0,dn(e,a,s),lt=o,Yt=h;break;case 0:case 11:case 14:case 15:On(2,s,a),wt||On(4,s,a),dn(e,a,s);break;case 1:wt||(Va(s,a),o=s.stateNode,typeof o.componentWillUnmount=="function"&&Lm(s,a,o)),dn(e,a,s);break;case 21:dn(e,a,s);break;case 22:wt=(o=wt)||s.memoizedState!==null,dn(e,a,s),wt=o;break;default:dn(e,a,s)}}function Km(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{cs(e)}catch(s){Ye(a,a.return,s)}}}function Vm(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{cs(e)}catch(s){Ye(a,a.return,s)}}function Ob(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new qm),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new qm),a;default:throw Error(i(435,e.tag))}}function Ml(e,a){var s=Ob(e);a.forEach(function(o){if(!s.has(o)){s.add(o);var h=qb.bind(null,e,o);o.then(h,h)}})}function Ft(e,a){var s=a.deletions;if(s!==null)for(var o=0;o<s.length;o++){var h=s[o],g=e,_=a,C=_;e:for(;C!==null;){switch(C.tag){case 27:if(Bn(C.type)){lt=C.stateNode,Yt=!1;break e}break;case 5:lt=C.stateNode,Yt=!1;break e;case 3:case 4:lt=C.stateNode.containerInfo,Yt=!0;break e}C=C.return}if(lt===null)throw Error(i(160));Gm(g,_,h),lt=null,Yt=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Ym(a,e),a=a.sibling}var za=null;function Ym(e,a){var s=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ft(a,e),Wt(e),o&4&&(On(3,e,e.return),ai(3,e),On(5,e,e.return));break;case 1:Ft(a,e),Wt(e),o&512&&(wt||s===null||Va(s,s.return)),o&64&&un&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?o:s.concat(o))));break;case 26:var h=za;if(Ft(a,e),Wt(e),o&512&&(wt||s===null||Va(s,s.return)),o&4){var g=s!==null?s.memoizedState:null;if(o=e.memoizedState,s===null)if(o===null)if(e.stateNode===null){e:{o=e.type,s=e.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":g=h.getElementsByTagName("title")[0],(!g||g[Cs]||g[At]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(o),h.head.insertBefore(g,h.querySelector("head > title"))),Ot(g,o,s),g[At]=e,kt(g),o=g;break e;case"link":var _=Y0("link","href",h).get(o+(s.href||""));if(_){for(var C=0;C<_.length;C++)if(g=_[C],g.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&g.getAttribute("rel")===(s.rel==null?null:s.rel)&&g.getAttribute("title")===(s.title==null?null:s.title)&&g.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){_.splice(C,1);break t}}g=h.createElement(o),Ot(g,o,s),h.head.appendChild(g);break;case"meta":if(_=Y0("meta","content",h).get(o+(s.content||""))){for(C=0;C<_.length;C++)if(g=_[C],g.getAttribute("content")===(s.content==null?null:""+s.content)&&g.getAttribute("name")===(s.name==null?null:s.name)&&g.getAttribute("property")===(s.property==null?null:s.property)&&g.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&g.getAttribute("charset")===(s.charSet==null?null:s.charSet)){_.splice(C,1);break t}}g=h.createElement(o),Ot(g,o,s),h.head.appendChild(g);break;default:throw Error(i(468,o))}g[At]=e,kt(g),o=g}e.stateNode=o}else F0(h,e.type,e.stateNode);else e.stateNode=V0(h,o,e.memoizedProps);else g!==o?(g===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):g.count--,o===null?F0(h,e.type,e.stateNode):V0(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&fu(e,e.memoizedProps,s.memoizedProps)}break;case 27:Ft(a,e),Wt(e),o&512&&(wt||s===null||Va(s,s.return)),s!==null&&o&4&&fu(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Ft(a,e),Wt(e),o&512&&(wt||s===null||Va(s,s.return)),e.flags&32){h=e.stateNode;try{Or(h,"")}catch(ge){Ye(e,e.return,ge)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,fu(e,h,s!==null?s.memoizedProps:h)),o&1024&&(pu=!0);break;case 6:if(Ft(a,e),Wt(e),o&4){if(e.stateNode===null)throw Error(i(162));o=e.memoizedProps,s=e.stateNode;try{s.nodeValue=o}catch(ge){Ye(e,e.return,ge)}}break;case 3:if(Wl=null,h=za,za=Yl(a.containerInfo),Ft(a,e),za=h,Wt(e),o&4&&s!==null&&s.memoizedState.isDehydrated)try{cs(a.containerInfo)}catch(ge){Ye(e,e.return,ge)}pu&&(pu=!1,Fm(e));break;case 4:o=za,za=Yl(e.stateNode.containerInfo),Ft(a,e),Wt(e),za=o;break;case 12:Ft(a,e),Wt(e);break;case 31:Ft(a,e),Wt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ml(e,o)));break;case 13:Ft(a,e),Wt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Dl=fe()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ml(e,o)));break;case 22:h=e.memoizedState!==null;var P=s!==null&&s.memoizedState!==null,ae=un,se=wt;if(un=ae||h,wt=se||P,Ft(a,e),wt=se,un=ae,Wt(e),o&8192)e:for(a=e.stateNode,a._visibility=h?a._visibility&-2:a._visibility|1,h&&(s===null||P||un||wt||hr(e)),s=null,a=e;;){if(a.tag===5||a.tag===26){if(s===null){P=s=a;try{if(g=P.stateNode,h)_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{C=P.stateNode;var le=P.memoizedProps.style,ne=le!=null&&le.hasOwnProperty("display")?le.display:null;C.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(ge){Ye(P,P.return,ge)}}}else if(a.tag===6){if(s===null){P=a;try{P.stateNode.nodeValue=h?"":P.memoizedProps}catch(ge){Ye(P,P.return,ge)}}}else if(a.tag===18){if(s===null){P=a;try{var re=P.stateNode;h?L0(re,!0):L0(P.stateNode,!1)}catch(ge){Ye(P,P.return,ge)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}o&4&&(o=e.updateQueue,o!==null&&(s=o.retryQueue,s!==null&&(o.retryQueue=null,Ml(e,s))));break;case 19:Ft(a,e),Wt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ml(e,o)));break;case 30:break;case 21:break;default:Ft(a,e),Wt(e)}}function Wt(e){var a=e.flags;if(a&2){try{for(var s,o=e.return;o!==null;){if(Bm(o)){s=o;break}o=o.return}if(s==null)throw Error(i(160));switch(s.tag){case 27:var h=s.stateNode,g=mu(e);Ol(e,g,h);break;case 5:var _=s.stateNode;s.flags&32&&(Or(_,""),s.flags&=-33);var C=mu(e);Ol(e,C,_);break;case 3:case 4:var P=s.stateNode.containerInfo,ae=mu(e);gu(e,ae,P);break;default:throw Error(i(161))}}catch(se){Ye(e,e.return,se)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function Fm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;Fm(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function hn(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Im(e,a.alternate,a),a=a.sibling}function hr(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:On(4,a,a.return),hr(a);break;case 1:Va(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&Lm(a,a.return,s),hr(a);break;case 27:hi(a.stateNode);case 26:case 5:Va(a,a.return),hr(a);break;case 22:a.memoizedState===null&&hr(a);break;case 30:hr(a);break;default:hr(a)}e=e.sibling}}function fn(e,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var o=a.alternate,h=e,g=a,_=g.flags;switch(g.tag){case 0:case 11:case 15:fn(h,g,s),ai(4,g);break;case 1:if(fn(h,g,s),o=g,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(ae){Ye(o,o.return,ae)}if(o=g,h=o.updateQueue,h!==null){var C=o.stateNode;try{var P=h.shared.hiddenCallbacks;if(P!==null)for(h.shared.hiddenCallbacks=null,h=0;h<P.length;h++)kf(P[h],C)}catch(ae){Ye(o,o.return,ae)}}s&&_&64&&zm(g),ni(g,g.return);break;case 27:Hm(g);case 26:case 5:fn(h,g,s),s&&o===null&&_&4&&$m(g),ni(g,g.return);break;case 12:fn(h,g,s);break;case 31:fn(h,g,s),s&&_&4&&Km(h,g);break;case 13:fn(h,g,s),s&&_&4&&Vm(h,g);break;case 22:g.memoizedState===null&&fn(h,g,s),ni(g,g.return);break;case 30:break;default:fn(h,g,s)}a=a.sibling}}function yu(e,a){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Ps(s))}function vu(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Ps(e))}function La(e,a,s,o){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Wm(e,a,s,o),a=a.sibling}function Wm(e,a,s,o){var h=a.flags;switch(a.tag){case 0:case 11:case 15:La(e,a,s,o),h&2048&&ai(9,a);break;case 1:La(e,a,s,o);break;case 3:La(e,a,s,o),h&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Ps(e)));break;case 12:if(h&2048){La(e,a,s,o),e=a.stateNode;try{var g=a.memoizedProps,_=g.id,C=g.onPostCommit;typeof C=="function"&&C(_,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(P){Ye(a,a.return,P)}}else La(e,a,s,o);break;case 31:La(e,a,s,o);break;case 13:La(e,a,s,o);break;case 23:break;case 22:g=a.stateNode,_=a.alternate,a.memoizedState!==null?g._visibility&2?La(e,a,s,o):ri(e,a):g._visibility&2?La(e,a,s,o):(g._visibility|=2,Jr(e,a,s,o,(a.subtreeFlags&10256)!==0||!1)),h&2048&&yu(_,a);break;case 24:La(e,a,s,o),h&2048&&vu(a.alternate,a);break;default:La(e,a,s,o)}}function Jr(e,a,s,o,h){for(h=h&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var g=e,_=a,C=s,P=o,ae=_.flags;switch(_.tag){case 0:case 11:case 15:Jr(g,_,C,P,h),ai(8,_);break;case 23:break;case 22:var se=_.stateNode;_.memoizedState!==null?se._visibility&2?Jr(g,_,C,P,h):ri(g,_):(se._visibility|=2,Jr(g,_,C,P,h)),h&&ae&2048&&yu(_.alternate,_);break;case 24:Jr(g,_,C,P,h),h&&ae&2048&&vu(_.alternate,_);break;default:Jr(g,_,C,P,h)}a=a.sibling}}function ri(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=e,o=a,h=o.flags;switch(o.tag){case 22:ri(s,o),h&2048&&yu(o.alternate,o);break;case 24:ri(s,o),h&2048&&vu(o.alternate,o);break;default:ri(s,o)}a=a.sibling}}var si=8192;function Zr(e,a,s){if(e.subtreeFlags&si)for(e=e.child;e!==null;)Xm(e,a,s),e=e.sibling}function Xm(e,a,s){switch(e.tag){case 26:Zr(e,a,s),e.flags&si&&e.memoizedState!==null&&vw(s,za,e.memoizedState,e.memoizedProps);break;case 5:Zr(e,a,s);break;case 3:case 4:var o=za;za=Yl(e.stateNode.containerInfo),Zr(e,a,s),za=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=si,si=16777216,Zr(e,a,s),si=o):Zr(e,a,s));break;default:Zr(e,a,s)}}function Qm(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function ii(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var o=a[s];jt=o,Zm(o,e)}Qm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Jm(e),e=e.sibling}function Jm(e){switch(e.tag){case 0:case 11:case 15:ii(e),e.flags&2048&&On(9,e,e.return);break;case 3:ii(e);break;case 12:ii(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,Ul(e)):ii(e);break;default:ii(e)}}function Ul(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var o=a[s];jt=o,Zm(o,e)}Qm(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:On(8,a,a.return),Ul(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,Ul(a));break;default:Ul(a)}e=e.sibling}}function Zm(e,a){for(;jt!==null;){var s=jt;switch(s.tag){case 0:case 11:case 15:On(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var o=s.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ps(s.memoizedState.cache)}if(o=s.child,o!==null)o.return=s,jt=o;else e:for(s=e;jt!==null;){o=jt;var h=o.sibling,g=o.return;if(Pm(o),o===s){jt=null;break e}if(h!==null){h.return=g,jt=h;break e}jt=g}}}var Mb={getCacheForType:function(e){var a=Ct(yt),s=a.data.get(e);return s===void 0&&(s=e(),a.data.set(e,s)),s},cacheSignal:function(){return Ct(yt).controller.signal}},Ub=typeof WeakMap=="function"?WeakMap:Map,Ie=0,Qe=null,Oe=null,Ue=0,Ve=0,ca=null,Mn=!1,es=!1,bu=!1,mn=0,dt=0,Un=0,fr=0,wu=0,ua=0,ts=0,li=null,Xt=null,xu=!1,Dl=0,e0=0,zl=1/0,Ll=null,Dn=null,St=0,zn=null,as=null,gn=0,_u=0,Su=null,t0=null,oi=0,Eu=null;function da(){return(Ie&2)!==0&&Ue!==0?Ue&-Ue:N.T!==null?Cu():ph()}function a0(){if(ua===0)if((Ue&536870912)===0||Le){var e=kr;kr<<=1,(kr&3932160)===0&&(kr=262144),ua=e}else ua=536870912;return e=la.current,e!==null&&(e.flags|=32),ua}function Qt(e,a,s){(e===Qe&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)&&(ns(e,0),Ln(e,Ue,ua,!1)),Ts(e,s),((Ie&2)===0||e!==Qe)&&(e===Qe&&((Ie&2)===0&&(fr|=s),dt===4&&Ln(e,Ue,ua,!1)),Ya(e))}function n0(e,a,s){if((Ie&6)!==0)throw Error(i(327));var o=!s&&(a&127)===0&&(a&e.expiredLanes)===0||Ma(e,a),h=o?Lb(e,a):ju(e,a,!0),g=o;do{if(h===0){es&&!o&&Ln(e,a,0,!1);break}else{if(s=e.current.alternate,g&&!Db(s)){h=ju(e,a,!1),g=!1;continue}if(h===2){if(g=a,e.errorRecoveryDisabledLanes&g)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){a=_;e:{var C=e;h=li;var P=C.current.memoizedState.isDehydrated;if(P&&(ns(C,_).flags|=256),_=ju(C,_,!1),_!==2){if(bu&&!P){C.errorRecoveryDisabledLanes|=g,fr|=g,h=4;break e}g=Xt,Xt=h,g!==null&&(Xt===null?Xt=g:Xt.push.apply(Xt,g))}h=_}if(g=!1,h!==2)continue}}if(h===1){ns(e,0),Ln(e,a,0,!0);break}e:{switch(o=e,g=h,g){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Ln(o,a,ua,!Mn);break e;case 2:Xt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(h=Dl+300-fe(),10<h)){if(Ln(o,a,ua,!Mn),Oa(o,0,!0)!==0)break e;gn=a,o.timeoutHandle=U0(r0.bind(null,o,s,Xt,Ll,xu,a,ua,fr,ts,Mn,g,"Throttled",-0,0),h);break e}r0(o,s,Xt,Ll,xu,a,ua,fr,ts,Mn,g,null,-0,0)}}break}while(!0);Ya(e)}function r0(e,a,s,o,h,g,_,C,P,ae,se,le,ne,re){if(e.timeoutHandle=-1,le=a.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Za},Xm(a,g,le);var ge=(g&62914560)===g?Dl-fe():(g&4194048)===g?e0-fe():0;if(ge=bw(le,ge),ge!==null){gn=g,e.cancelPendingCommit=ge(h0.bind(null,e,a,g,s,o,h,_,C,P,se,le,null,ne,re)),Ln(e,g,_,!ae);return}}h0(e,a,g,s,o,h,_,C,P)}function Db(e){for(var a=e;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var o=0;o<s.length;o++){var h=s[o],g=h.getSnapshot;h=h.value;try{if(!sa(g(),h))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ln(e,a,s,o){a&=~wu,a&=~fr,e.suspendedLanes|=a,e.pingedLanes&=~a,o&&(e.warmLanes|=a),o=e.expirationTimes;for(var h=a;0<h;){var g=31-Nt(h),_=1<<g;o[g]=-1,h&=~_}s!==0&&fh(e,s,a)}function $l(){return(Ie&6)===0?(ci(0),!1):!0}function ku(){if(Oe!==null){if(Ve===0)var e=Oe.return;else e=Oe,nn=rr=null,qc(e),Yr=null,Ks=0,e=Oe;for(;e!==null;)Dm(e.alternate,e),e=e.return;Oe=null}}function ns(e,a){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,tw(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),gn=0,ku(),Qe=e,Oe=s=tn(e.current,null),Ue=a,Ve=0,ca=null,Mn=!1,es=Ma(e,a),bu=!1,ts=ua=wu=fr=Un=dt=0,Xt=li=null,xu=!1,(a&8)!==0&&(a|=a&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=a;0<o;){var h=31-Nt(o),g=1<<h;a|=e[h],o&=~g}return mn=a,sl(),s}function s0(e,a){Te=null,N.H=Zs,a===Vr||a===fl?(a=xf(),Ve=3):a===Tc?(a=xf(),Ve=4):Ve=a===nu?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ca=a,Oe===null&&(dt=1,Nl(e,wa(a,e.current)))}function i0(){var e=la.current;return e===null?!0:(Ue&4194048)===Ue?Ea===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?e===Ea:!1}function l0(){var e=N.H;return N.H=Zs,e===null?Zs:e}function o0(){var e=N.A;return N.A=Mb,e}function Bl(){dt=4,Mn||(Ue&4194048)!==Ue&&la.current!==null||(es=!0),(Un&134217727)===0&&(fr&134217727)===0||Qe===null||Ln(Qe,Ue,ua,!1)}function ju(e,a,s){var o=Ie;Ie|=2;var h=l0(),g=o0();(Qe!==e||Ue!==a)&&(Ll=null,ns(e,a)),a=!1;var _=dt;e:do try{if(Ve!==0&&Oe!==null){var C=Oe,P=ca;switch(Ve){case 8:ku(),_=6;break e;case 3:case 2:case 9:case 6:la.current===null&&(a=!0);var ae=Ve;if(Ve=0,ca=null,rs(e,C,P,ae),s&&es){_=0;break e}break;default:ae=Ve,Ve=0,ca=null,rs(e,C,P,ae)}}zb(),_=dt;break}catch(se){s0(e,se)}while(!0);return a&&e.shellSuspendCounter++,nn=rr=null,Ie=o,N.H=h,N.A=g,Oe===null&&(Qe=null,Ue=0,sl()),_}function zb(){for(;Oe!==null;)c0(Oe)}function Lb(e,a){var s=Ie;Ie|=2;var o=l0(),h=o0();Qe!==e||Ue!==a?(Ll=null,zl=fe()+500,ns(e,a)):es=Ma(e,a);e:do try{if(Ve!==0&&Oe!==null){a=Oe;var g=ca;t:switch(Ve){case 1:Ve=0,ca=null,rs(e,a,g,1);break;case 2:case 9:if(bf(g)){Ve=0,ca=null,u0(a);break}a=function(){Ve!==2&&Ve!==9||Qe!==e||(Ve=7),Ya(e)},g.then(a,a);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:bf(g)?(Ve=0,ca=null,u0(a)):(Ve=0,ca=null,rs(e,a,g,7));break;case 5:var _=null;switch(Oe.tag){case 26:_=Oe.memoizedState;case 5:case 27:var C=Oe;if(_?W0(_):C.stateNode.complete){Ve=0,ca=null;var P=C.sibling;if(P!==null)Oe=P;else{var ae=C.return;ae!==null?(Oe=ae,Hl(ae)):Oe=null}break t}}Ve=0,ca=null,rs(e,a,g,5);break;case 6:Ve=0,ca=null,rs(e,a,g,6);break;case 8:ku(),dt=6;break e;default:throw Error(i(462))}}$b();break}catch(se){s0(e,se)}while(!0);return nn=rr=null,N.H=o,N.A=h,Ie=s,Oe!==null?0:(Qe=null,Ue=0,sl(),dt)}function $b(){for(;Oe!==null&&!je();)c0(Oe)}function c0(e){var a=Mm(e.alternate,e,mn);e.memoizedProps=e.pendingProps,a===null?Hl(e):Oe=a}function u0(e){var a=e,s=a.alternate;switch(a.tag){case 15:case 0:a=Nm(s,a,a.pendingProps,a.type,void 0,Ue);break;case 11:a=Nm(s,a,a.pendingProps,a.type.render,a.ref,Ue);break;case 5:qc(a);default:Dm(s,a),a=Oe=of(a,mn),a=Mm(s,a,mn)}e.memoizedProps=e.pendingProps,a===null?Hl(e):Oe=a}function rs(e,a,s,o){nn=rr=null,qc(a),Yr=null,Ks=0;var h=a.return;try{if(jb(e,h,a,s,Ue)){dt=1,Nl(e,wa(s,e.current)),Oe=null;return}}catch(g){if(h!==null)throw Oe=h,g;dt=1,Nl(e,wa(s,e.current)),Oe=null;return}a.flags&32768?(Le||o===1?e=!0:es||(Ue&536870912)!==0?e=!1:(Mn=e=!0,(o===2||o===9||o===3||o===6)&&(o=la.current,o!==null&&o.tag===13&&(o.flags|=16384))),d0(a,e)):Hl(a)}function Hl(e){var a=e;do{if((a.flags&32768)!==0){d0(a,Mn);return}e=a.return;var s=Tb(a.alternate,a,mn);if(s!==null){Oe=s;return}if(a=a.sibling,a!==null){Oe=a;return}Oe=a=e}while(a!==null);dt===0&&(dt=5)}function d0(e,a){do{var s=Cb(e.alternate,e);if(s!==null){s.flags&=32767,Oe=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(e=e.sibling,e!==null)){Oe=e;return}Oe=e=s}while(e!==null);dt=6,Oe=null}function h0(e,a,s,o,h,g,_,C,P){e.cancelPendingCommit=null;do ql();while(St!==0);if((Ie&6)!==0)throw Error(i(327));if(a!==null){if(a===e.current)throw Error(i(177));if(g=a.lanes|a.childLanes,g|=mc,pv(e,s,g,_,C,P),e===Qe&&(Oe=Qe=null,Ue=0),as=a,zn=e,gn=s,_u=g,Su=h,t0=o,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ib($e,function(){return y0(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||o){o=N.T,N.T=null,h=k.p,k.p=2,_=Ie,Ie|=4;try{Rb(e,a,s)}finally{Ie=_,k.p=h,N.T=o}}St=1,f0(),m0(),g0()}}function f0(){if(St===1){St=0;var e=zn,a=as,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=N.T,N.T=null;var o=k.p;k.p=2;var h=Ie;Ie|=4;try{Ym(a,e);var g=$u,_=Jh(e.containerInfo),C=g.focusedElem,P=g.selectionRange;if(_!==C&&C&&C.ownerDocument&&Qh(C.ownerDocument.documentElement,C)){if(P!==null&&cc(C)){var ae=P.start,se=P.end;if(se===void 0&&(se=ae),"selectionStart"in C)C.selectionStart=ae,C.selectionEnd=Math.min(se,C.value.length);else{var le=C.ownerDocument||document,ne=le&&le.defaultView||window;if(ne.getSelection){var re=ne.getSelection(),ge=C.textContent.length,_e=Math.min(P.start,ge),Xe=P.end===void 0?_e:Math.min(P.end,ge);!re.extend&&_e>Xe&&(_=Xe,Xe=_e,_e=_);var W=Xh(C,_e),V=Xh(C,Xe);if(W&&V&&(re.rangeCount!==1||re.anchorNode!==W.node||re.anchorOffset!==W.offset||re.focusNode!==V.node||re.focusOffset!==V.offset)){var te=le.createRange();te.setStart(W.node,W.offset),re.removeAllRanges(),_e>Xe?(re.addRange(te),re.extend(V.node,V.offset)):(te.setEnd(V.node,V.offset),re.addRange(te))}}}}for(le=[],re=C;re=re.parentNode;)re.nodeType===1&&le.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<le.length;C++){var ie=le[C];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Zl=!!Lu,$u=Lu=null}finally{Ie=h,k.p=o,N.T=s}}e.current=a,St=2}}function m0(){if(St===2){St=0;var e=zn,a=as,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=N.T,N.T=null;var o=k.p;k.p=2;var h=Ie;Ie|=4;try{Im(e,a.alternate,a)}finally{Ie=h,k.p=o,N.T=s}}St=3}}function g0(){if(St===4||St===3){St=0,ve();var e=zn,a=as,s=gn,o=t0;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?St=5:(St=0,as=zn=null,p0(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Dn=null),Go(s),a=a.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(Ht,a,void 0,(a.current.flags&128)===128)}catch{}if(o!==null){a=N.T,h=k.p,k.p=2,N.T=null;try{for(var g=e.onRecoverableError,_=0;_<o.length;_++){var C=o[_];g(C.value,{componentStack:C.stack})}}finally{N.T=a,k.p=h}}(gn&3)!==0&&ql(),Ya(e),h=e.pendingLanes,(s&261930)!==0&&(h&42)!==0?e===Eu?oi++:(oi=0,Eu=e):oi=0,ci(0)}}function p0(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,Ps(a)))}function ql(){return f0(),m0(),g0(),y0()}function y0(){if(St!==5)return!1;var e=zn,a=_u;_u=0;var s=Go(gn),o=N.T,h=k.p;try{k.p=32>s?32:s,N.T=null,s=Su,Su=null;var g=zn,_=gn;if(St=0,as=zn=null,gn=0,(Ie&6)!==0)throw Error(i(331));var C=Ie;if(Ie|=4,Jm(g.current),Wm(g,g.current,_,s),Ie=C,ci(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(Ht,g)}catch{}return!0}finally{k.p=h,N.T=o,p0(e,a)}}function v0(e,a,s){a=wa(s,a),a=au(e.stateNode,a,2),e=Tn(e,a,2),e!==null&&(Ts(e,2),Ya(e))}function Ye(e,a,s){if(e.tag===3)v0(e,e,s);else for(;a!==null;){if(a.tag===3){v0(a,e,s);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Dn===null||!Dn.has(o))){e=wa(s,e),s=bm(2),o=Tn(a,s,2),o!==null&&(wm(s,o,a,e),Ts(o,2),Ya(o));break}}a=a.return}}function Nu(e,a,s){var o=e.pingCache;if(o===null){o=e.pingCache=new Ub;var h=new Set;o.set(a,h)}else h=o.get(a),h===void 0&&(h=new Set,o.set(a,h));h.has(s)||(bu=!0,h.add(s),e=Bb.bind(null,e,a,s),a.then(e,e))}function Bb(e,a,s){var o=e.pingCache;o!==null&&o.delete(a),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Qe===e&&(Ue&s)===s&&(dt===4||dt===3&&(Ue&62914560)===Ue&&300>fe()-Dl?(Ie&2)===0&&ns(e,0):wu|=s,ts===Ue&&(ts=0)),Ya(e)}function b0(e,a){a===0&&(a=Pa()),e=tr(e,a),e!==null&&(Ts(e,a),Ya(e))}function Hb(e){var a=e.memoizedState,s=0;a!==null&&(s=a.retryLane),b0(e,s)}function qb(e,a){var s=0;switch(e.tag){case 31:case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(s=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(a),b0(e,s)}function Ib(e,a){return de(e,a)}var Il=null,ss=null,Au=!1,Pl=!1,Tu=!1,$n=0;function Ya(e){e!==ss&&e.next===null&&(ss===null?Il=ss=e:ss=ss.next=e),Pl=!0,Au||(Au=!0,Gb())}function ci(e,a){if(!Tu&&Pl){Tu=!0;do for(var s=!1,o=Il;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var g=0;else{var _=o.suspendedLanes,C=o.pingedLanes;g=(1<<31-Nt(42|e)+1)-1,g&=h&~(_&~C),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(s=!0,S0(o,g))}else g=Ue,g=Oa(o,o===Qe?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(g&3)===0||Ma(o,g)||(s=!0,S0(o,g));o=o.next}while(s);Tu=!1}}function Pb(){w0()}function w0(){Pl=Au=!1;var e=0;$n!==0&&ew()&&(e=$n);for(var a=fe(),s=null,o=Il;o!==null;){var h=o.next,g=x0(o,a);g===0?(o.next=null,s===null?Il=h:s.next=h,h===null&&(ss=s)):(s=o,(e!==0||(g&3)!==0)&&(Pl=!0)),o=h}St!==0&&St!==5||ci(e),$n!==0&&($n=0)}function x0(e,a){for(var s=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var _=31-Nt(g),C=1<<_,P=h[_];P===-1?((C&s)===0||(C&o)!==0)&&(h[_]=Yi(C,a)):P<=a&&(e.expiredLanes|=C),g&=~C}if(a=Qe,s=Ue,s=Oa(e,e===a?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,s===0||e===a&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&me(o),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Ma(e,s)){if(a=s&-s,a===e.callbackPriority)return a;switch(o!==null&&me(o),Go(s)){case 2:case 8:s=pa;break;case 32:s=$e;break;case 268435456:s=pt;break;default:s=$e}return o=_0.bind(null,e),s=de(s,o),e.callbackPriority=a,e.callbackNode=s,a}return o!==null&&o!==null&&me(o),e.callbackPriority=2,e.callbackNode=null,2}function _0(e,a){if(St!==0&&St!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(ql()&&e.callbackNode!==s)return null;var o=Ue;return o=Oa(e,e===Qe?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(n0(e,o,a),x0(e,fe()),e.callbackNode!=null&&e.callbackNode===s?_0.bind(null,e):null)}function S0(e,a){if(ql())return null;n0(e,a,!0)}function Gb(){aw(function(){(Ie&6)!==0?de(st,Pb):w0()})}function Cu(){if($n===0){var e=Gr;e===0&&(e=Ia,Ia<<=1,(Ia&261888)===0&&(Ia=256)),$n=e}return $n}function E0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Qi(""+e)}function k0(e,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,e.id&&s.setAttribute("form",e.id),a.parentNode.insertBefore(s,a),e=new FormData(e),s.parentNode.removeChild(s),e}function Kb(e,a,s,o,h){if(a==="submit"&&s&&s.stateNode===h){var g=E0((h[Kt]||null).action),_=o.submitter;_&&(a=(a=_[Kt]||null)?E0(a.formAction):_.getAttribute("formAction"),a!==null&&(g=a,_=null));var C=new tl("action","action",null,o,h);e.push({event:C,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if($n!==0){var P=_?k0(h,_):new FormData(h);Xc(s,{pending:!0,data:P,method:h.method,action:g},null,P)}}else typeof g=="function"&&(C.preventDefault(),P=_?k0(h,_):new FormData(h),Xc(s,{pending:!0,data:P,method:h.method,action:g},g,P))},currentTarget:h}]})}}for(var Ru=0;Ru<fc.length;Ru++){var Ou=fc[Ru],Vb=Ou.toLowerCase(),Yb=Ou[0].toUpperCase()+Ou.slice(1);Da(Vb,"on"+Yb)}Da(tf,"onAnimationEnd"),Da(af,"onAnimationIteration"),Da(nf,"onAnimationStart"),Da("dblclick","onDoubleClick"),Da("focusin","onFocus"),Da("focusout","onBlur"),Da(ob,"onTransitionRun"),Da(cb,"onTransitionStart"),Da(ub,"onTransitionCancel"),Da(rf,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ui="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ui));function j0(e,a){a=(a&4)!==0;for(var s=0;s<e.length;s++){var o=e[s],h=o.event;o=o.listeners;e:{var g=void 0;if(a)for(var _=o.length-1;0<=_;_--){var C=o[_],P=C.instance,ae=C.currentTarget;if(C=C.listener,P!==g&&h.isPropagationStopped())break e;g=C,h.currentTarget=ae;try{g(h)}catch(se){rl(se)}h.currentTarget=null,g=P}else for(_=0;_<o.length;_++){if(C=o[_],P=C.instance,ae=C.currentTarget,C=C.listener,P!==g&&h.isPropagationStopped())break e;g=C,h.currentTarget=ae;try{g(h)}catch(se){rl(se)}h.currentTarget=null,g=P}}}}function Me(e,a){var s=a[Ko];s===void 0&&(s=a[Ko]=new Set);var o=e+"__bubble";s.has(o)||(N0(a,e,2,!1),s.add(o))}function Mu(e,a,s){var o=0;a&&(o|=4),N0(s,e,o,a)}var Gl="_reactListening"+Math.random().toString(36).slice(2);function Uu(e){if(!e[Gl]){e[Gl]=!0,bh.forEach(function(s){s!=="selectionchange"&&(Fb.has(s)||Mu(s,!1,e),Mu(s,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[Gl]||(a[Gl]=!0,Mu("selectionchange",!1,a))}}function N0(e,a,s,o){switch(ag(a)){case 2:var h=_w;break;case 8:h=Sw;break;default:h=Wu}s=h.bind(null,a,s,e),h=void 0,!ec||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(a,s,{capture:!0,passive:h}):e.addEventListener(a,s,!0):h!==void 0?e.addEventListener(a,s,{passive:h}):e.addEventListener(a,s,!1)}function Du(e,a,s,o,h){var g=o;if((a&1)===0&&(a&2)===0&&o!==null)e:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var C=o.stateNode.containerInfo;if(C===h)break;if(_===4)for(_=o.return;_!==null;){var P=_.tag;if((P===3||P===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;C!==null;){if(_=Nr(C),_===null)return;if(P=_.tag,P===5||P===6||P===26||P===27){o=g=_;continue e}C=C.parentNode}}o=o.return}Rh(function(){var ae=g,se=Jo(s),le=[];e:{var ne=sf.get(e);if(ne!==void 0){var re=tl,ge=e;switch(e){case"keypress":if(Zi(s)===0)break e;case"keydown":case"keyup":re=Hv;break;case"focusin":ge="focus",re=rc;break;case"focusout":ge="blur",re=rc;break;case"beforeblur":case"afterblur":re=rc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Uh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Av;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Pv;break;case tf:case af:case nf:re=Rv;break;case rf:re=Kv;break;case"scroll":case"scrollend":re=jv;break;case"wheel":re=Yv;break;case"copy":case"cut":case"paste":re=Mv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=zh;break;case"toggle":case"beforetoggle":re=Wv}var _e=(a&4)!==0,Xe=!_e&&(e==="scroll"||e==="scrollend"),W=_e?ne!==null?ne+"Capture":null:ne;_e=[];for(var V=ae,te;V!==null;){var ie=V;if(te=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||te===null||W===null||(ie=Os(V,W),ie!=null&&_e.push(di(V,ie,te))),Xe)break;V=V.return}0<_e.length&&(ne=new re(ne,ge,null,s,se),le.push({event:ne,listeners:_e}))}}if((a&7)===0){e:{if(ne=e==="mouseover"||e==="pointerover",re=e==="mouseout"||e==="pointerout",ne&&s!==Qo&&(ge=s.relatedTarget||s.fromElement)&&(Nr(ge)||ge[jr]))break e;if((re||ne)&&(ne=se.window===se?se:(ne=se.ownerDocument)?ne.defaultView||ne.parentWindow:window,re?(ge=s.relatedTarget||s.toElement,re=ae,ge=ge?Nr(ge):null,ge!==null&&(Xe=c(ge),_e=ge.tag,ge!==Xe||_e!==5&&_e!==27&&_e!==6)&&(ge=null)):(re=null,ge=ae),re!==ge)){if(_e=Uh,ie="onMouseLeave",W="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(_e=zh,ie="onPointerLeave",W="onPointerEnter",V="pointer"),Xe=re==null?ne:Rs(re),te=ge==null?ne:Rs(ge),ne=new _e(ie,V+"leave",re,s,se),ne.target=Xe,ne.relatedTarget=te,ie=null,Nr(se)===ae&&(_e=new _e(W,V+"enter",ge,s,se),_e.target=te,_e.relatedTarget=Xe,ie=_e),Xe=ie,re&&ge)t:{for(_e=Wb,W=re,V=ge,te=0,ie=W;ie;ie=_e(ie))te++;ie=0;for(var xe=V;xe;xe=_e(xe))ie++;for(;0<te-ie;)W=_e(W),te--;for(;0<ie-te;)V=_e(V),ie--;for(;te--;){if(W===V||V!==null&&W===V.alternate){_e=W;break t}W=_e(W),V=_e(V)}_e=null}else _e=null;re!==null&&A0(le,ne,re,_e,!1),ge!==null&&Xe!==null&&A0(le,Xe,ge,_e,!0)}}e:{if(ne=ae?Rs(ae):window,re=ne.nodeName&&ne.nodeName.toLowerCase(),re==="select"||re==="input"&&ne.type==="file")var Be=Gh;else if(Ih(ne))if(Kh)Be=sb;else{Be=nb;var ye=ab}else re=ne.nodeName,!re||re.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ae&&Xo(ae.elementType)&&(Be=Gh):Be=rb;if(Be&&(Be=Be(e,ae))){Ph(le,Be,s,se);break e}ye&&ye(e,ne,ae),e==="focusout"&&ae&&ne.type==="number"&&ae.memoizedProps.value!=null&&Wo(ne,"number",ne.value)}switch(ye=ae?Rs(ae):window,e){case"focusin":(Ih(ye)||ye.contentEditable==="true")&&(zr=ye,uc=ae,Hs=null);break;case"focusout":Hs=uc=zr=null;break;case"mousedown":dc=!0;break;case"contextmenu":case"mouseup":case"dragend":dc=!1,Zh(le,s,se);break;case"selectionchange":if(lb)break;case"keydown":case"keyup":Zh(le,s,se)}var Re;if(ic)e:{switch(e){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Dr?Hh(e,s)&&(De="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(De="onCompositionStart");De&&(Lh&&s.locale!=="ko"&&(Dr||De!=="onCompositionStart"?De==="onCompositionEnd"&&Dr&&(Re=Oh()):(_n=se,tc="value"in _n?_n.value:_n.textContent,Dr=!0)),ye=Kl(ae,De),0<ye.length&&(De=new Dh(De,e,null,s,se),le.push({event:De,listeners:ye}),Re?De.data=Re:(Re=qh(s),Re!==null&&(De.data=Re)))),(Re=Qv?Jv(e,s):Zv(e,s))&&(De=Kl(ae,"onBeforeInput"),0<De.length&&(ye=new Dh("onBeforeInput","beforeinput",null,s,se),le.push({event:ye,listeners:De}),ye.data=Re)),Kb(le,e,ae,s,se)}j0(le,a)})}function di(e,a,s){return{instance:e,listener:a,currentTarget:s}}function Kl(e,a){for(var s=a+"Capture",o=[];e!==null;){var h=e,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=Os(e,s),h!=null&&o.unshift(di(e,h,g)),h=Os(e,a),h!=null&&o.push(di(e,h,g))),e.tag===3)return o;e=e.return}return[]}function Wb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function A0(e,a,s,o,h){for(var g=a._reactName,_=[];s!==null&&s!==o;){var C=s,P=C.alternate,ae=C.stateNode;if(C=C.tag,P!==null&&P===o)break;C!==5&&C!==26&&C!==27||ae===null||(P=ae,h?(ae=Os(s,g),ae!=null&&_.unshift(di(s,ae,P))):h||(ae=Os(s,g),ae!=null&&_.push(di(s,ae,P)))),s=s.return}_.length!==0&&e.push({event:a,listeners:_})}var Xb=/\r\n?/g,Qb=/\u0000|\uFFFD/g;function T0(e){return(typeof e=="string"?e:""+e).replace(Xb,`
`).replace(Qb,"")}function C0(e,a){return a=T0(a),T0(e)===a}function We(e,a,s,o,h,g){switch(s){case"children":typeof o=="string"?a==="body"||a==="textarea"&&o===""||Or(e,o):(typeof o=="number"||typeof o=="bigint")&&a!=="body"&&Or(e,""+o);break;case"className":Wi(e,"class",o);break;case"tabIndex":Wi(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Wi(e,s,o);break;case"style":Th(e,o,g);break;case"data":if(a!=="object"){Wi(e,"data",o);break}case"src":case"href":if(o===""&&(a!=="a"||s!=="href")){e.removeAttribute(s);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(s);break}o=Qi(""+o),e.setAttribute(s,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(s==="formAction"?(a!=="input"&&We(e,a,"name",h.name,h,null),We(e,a,"formEncType",h.formEncType,h,null),We(e,a,"formMethod",h.formMethod,h,null),We(e,a,"formTarget",h.formTarget,h,null)):(We(e,a,"encType",h.encType,h,null),We(e,a,"method",h.method,h,null),We(e,a,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(s);break}o=Qi(""+o),e.setAttribute(s,o);break;case"onClick":o!=null&&(e.onclick=Za);break;case"onScroll":o!=null&&Me("scroll",e);break;case"onScrollEnd":o!=null&&Me("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(s=o.__html,s!=null){if(h.children!=null)throw Error(i(60));e.innerHTML=s}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}s=Qi(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,""+o):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":o===!0?e.setAttribute(s,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,o):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(s,o):e.removeAttribute(s);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(s):e.setAttribute(s,o);break;case"popover":Me("beforetoggle",e),Me("toggle",e),Fi(e,"popover",o);break;case"xlinkActuate":Ja(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ja(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ja(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ja(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ja(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ja(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ja(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ja(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ja(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Fi(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Ev.get(s)||s,Fi(e,s,o))}}function zu(e,a,s,o,h,g){switch(s){case"style":Th(e,o,g);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(s=o.__html,s!=null){if(h.children!=null)throw Error(i(60));e.innerHTML=s}}break;case"children":typeof o=="string"?Or(e,o):(typeof o=="number"||typeof o=="bigint")&&Or(e,""+o);break;case"onScroll":o!=null&&Me("scroll",e);break;case"onScrollEnd":o!=null&&Me("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Za);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wh.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(h=s.endsWith("Capture"),a=s.slice(2,h?s.length-7:void 0),g=e[Kt]||null,g=g!=null?g[s]:null,typeof g=="function"&&e.removeEventListener(a,g,h),typeof o=="function")){typeof g!="function"&&g!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(a,o,h);break e}s in e?e[s]=o:o===!0?e.setAttribute(s,""):Fi(e,s,o)}}}function Ot(e,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",e),Me("load",e);var o=!1,h=!1,g;for(g in s)if(s.hasOwnProperty(g)){var _=s[g];if(_!=null)switch(g){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:We(e,a,g,_,s,null)}}h&&We(e,a,"srcSet",s.srcSet,s,null),o&&We(e,a,"src",s.src,s,null);return;case"input":Me("invalid",e);var C=g=_=h=null,P=null,ae=null;for(o in s)if(s.hasOwnProperty(o)){var se=s[o];if(se!=null)switch(o){case"name":h=se;break;case"type":_=se;break;case"checked":P=se;break;case"defaultChecked":ae=se;break;case"value":g=se;break;case"defaultValue":C=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,a));break;default:We(e,a,o,se,s,null)}}kh(e,g,C,P,ae,_,h,!1);return;case"select":Me("invalid",e),o=_=g=null;for(h in s)if(s.hasOwnProperty(h)&&(C=s[h],C!=null))switch(h){case"value":g=C;break;case"defaultValue":_=C;break;case"multiple":o=C;default:We(e,a,h,C,s,null)}a=g,s=_,e.multiple=!!o,a!=null?Rr(e,!!o,a,!1):s!=null&&Rr(e,!!o,s,!0);return;case"textarea":Me("invalid",e),g=h=o=null;for(_ in s)if(s.hasOwnProperty(_)&&(C=s[_],C!=null))switch(_){case"value":o=C;break;case"defaultValue":h=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:We(e,a,_,C,s,null)}Nh(e,o,h,g);return;case"option":for(P in s)if(s.hasOwnProperty(P)&&(o=s[P],o!=null))switch(P){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:We(e,a,P,o,s,null)}return;case"dialog":Me("beforetoggle",e),Me("toggle",e),Me("cancel",e),Me("close",e);break;case"iframe":case"object":Me("load",e);break;case"video":case"audio":for(o=0;o<ui.length;o++)Me(ui[o],e);break;case"image":Me("error",e),Me("load",e);break;case"details":Me("toggle",e);break;case"embed":case"source":case"link":Me("error",e),Me("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in s)if(s.hasOwnProperty(ae)&&(o=s[ae],o!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:We(e,a,ae,o,s,null)}return;default:if(Xo(a)){for(se in s)s.hasOwnProperty(se)&&(o=s[se],o!==void 0&&zu(e,a,se,o,s,void 0));return}}for(C in s)s.hasOwnProperty(C)&&(o=s[C],o!=null&&We(e,a,C,o,s,null))}function Jb(e,a,s,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,_=null,C=null,P=null,ae=null,se=null;for(re in s){var le=s[re];if(s.hasOwnProperty(re)&&le!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":P=le;default:o.hasOwnProperty(re)||We(e,a,re,null,o,le)}}for(var ne in o){var re=o[ne];if(le=s[ne],o.hasOwnProperty(ne)&&(re!=null||le!=null))switch(ne){case"type":g=re;break;case"name":h=re;break;case"checked":ae=re;break;case"defaultChecked":se=re;break;case"value":_=re;break;case"defaultValue":C=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,a));break;default:re!==le&&We(e,a,ne,re,o,le)}}Fo(e,_,C,P,ae,se,g,h);return;case"select":re=_=C=ne=null;for(g in s)if(P=s[g],s.hasOwnProperty(g)&&P!=null)switch(g){case"value":break;case"multiple":re=P;default:o.hasOwnProperty(g)||We(e,a,g,null,o,P)}for(h in o)if(g=o[h],P=s[h],o.hasOwnProperty(h)&&(g!=null||P!=null))switch(h){case"value":ne=g;break;case"defaultValue":C=g;break;case"multiple":_=g;default:g!==P&&We(e,a,h,g,o,P)}a=C,s=_,o=re,ne!=null?Rr(e,!!s,ne,!1):!!o!=!!s&&(a!=null?Rr(e,!!s,a,!0):Rr(e,!!s,s?[]:"",!1));return;case"textarea":re=ne=null;for(C in s)if(h=s[C],s.hasOwnProperty(C)&&h!=null&&!o.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:We(e,a,C,null,o,h)}for(_ in o)if(h=o[_],g=s[_],o.hasOwnProperty(_)&&(h!=null||g!=null))switch(_){case"value":ne=h;break;case"defaultValue":re=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==g&&We(e,a,_,h,o,g)}jh(e,ne,re);return;case"option":for(var ge in s)if(ne=s[ge],s.hasOwnProperty(ge)&&ne!=null&&!o.hasOwnProperty(ge))switch(ge){case"selected":e.selected=!1;break;default:We(e,a,ge,null,o,ne)}for(P in o)if(ne=o[P],re=s[P],o.hasOwnProperty(P)&&ne!==re&&(ne!=null||re!=null))switch(P){case"selected":e.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:We(e,a,P,ne,o,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in s)ne=s[_e],s.hasOwnProperty(_e)&&ne!=null&&!o.hasOwnProperty(_e)&&We(e,a,_e,null,o,ne);for(ae in o)if(ne=o[ae],re=s[ae],o.hasOwnProperty(ae)&&ne!==re&&(ne!=null||re!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,a));break;default:We(e,a,ae,ne,o,re)}return;default:if(Xo(a)){for(var Xe in s)ne=s[Xe],s.hasOwnProperty(Xe)&&ne!==void 0&&!o.hasOwnProperty(Xe)&&zu(e,a,Xe,void 0,o,ne);for(se in o)ne=o[se],re=s[se],!o.hasOwnProperty(se)||ne===re||ne===void 0&&re===void 0||zu(e,a,se,ne,o,re);return}}for(var W in s)ne=s[W],s.hasOwnProperty(W)&&ne!=null&&!o.hasOwnProperty(W)&&We(e,a,W,null,o,ne);for(le in o)ne=o[le],re=s[le],!o.hasOwnProperty(le)||ne===re||ne==null&&re==null||We(e,a,le,ne,o,re)}function R0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Zb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,s=performance.getEntriesByType("resource"),o=0;o<s.length;o++){var h=s[o],g=h.transferSize,_=h.initiatorType,C=h.duration;if(g&&C&&R0(_)){for(_=0,C=h.responseEnd,o+=1;o<s.length;o++){var P=s[o],ae=P.startTime;if(ae>C)break;var se=P.transferSize,le=P.initiatorType;se&&R0(le)&&(P=P.responseEnd,_+=se*(P<C?1:(C-ae)/(P-ae)))}if(--o,a+=8*(g+_)/(h.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Lu=null,$u=null;function Vl(e){return e.nodeType===9?e:e.ownerDocument}function O0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function M0(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function Bu(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Hu=null;function ew(){var e=window.event;return e&&e.type==="popstate"?e===Hu?!1:(Hu=e,!0):(Hu=null,!1)}var U0=typeof setTimeout=="function"?setTimeout:void 0,tw=typeof clearTimeout=="function"?clearTimeout:void 0,D0=typeof Promise=="function"?Promise:void 0,aw=typeof queueMicrotask=="function"?queueMicrotask:typeof D0<"u"?function(e){return D0.resolve(null).then(e).catch(nw)}:U0;function nw(e){setTimeout(function(){throw e})}function Bn(e){return e==="head"}function z0(e,a){var s=a,o=0;do{var h=s.nextSibling;if(e.removeChild(s),h&&h.nodeType===8)if(s=h.data,s==="/$"||s==="/&"){if(o===0){e.removeChild(h),cs(a);return}o--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")o++;else if(s==="html")hi(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,hi(s);for(var g=s.firstChild;g;){var _=g.nextSibling,C=g.nodeName;g[Cs]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&g.rel.toLowerCase()==="stylesheet"||s.removeChild(g),g=_}}else s==="body"&&hi(e.ownerDocument.body);s=h}while(s);cs(a)}function L0(e,a){var s=e;e=0;do{var o=s.nextSibling;if(s.nodeType===1?a?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(a?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),o&&o.nodeType===8)if(s=o.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=o}while(s)}function qu(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":qu(s),Vo(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function rw(e,a,s,o){for(;e.nodeType===1;){var h=s;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Cs])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=ka(e.nextSibling),e===null)break}return null}function sw(e,a,s){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=ka(e.nextSibling),e===null))return null;return e}function $0(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ka(e.nextSibling),e===null))return null;return e}function Iu(e){return e.data==="$?"||e.data==="$~"}function Pu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function iw(e,a){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||s.readyState!=="loading")a();else{var o=function(){a(),s.removeEventListener("DOMContentLoaded",o)};s.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function ka(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var Gu=null;function B0(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(a===0)return ka(e.nextSibling);a--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||a++}e=e.nextSibling}return null}function H0(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(a===0)return e;a--}else s!=="/$"&&s!=="/&"||a++}e=e.previousSibling}return null}function q0(e,a,s){switch(a=Vl(s),e){case"html":if(e=a.documentElement,!e)throw Error(i(452));return e;case"head":if(e=a.head,!e)throw Error(i(453));return e;case"body":if(e=a.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function hi(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);Vo(e)}var ja=new Map,I0=new Set;function Yl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var pn=k.d;k.d={f:lw,r:ow,D:cw,C:uw,L:dw,m:hw,X:mw,S:fw,M:gw};function lw(){var e=pn.f(),a=$l();return e||a}function ow(e){var a=Ar(e);a!==null&&a.tag===5&&a.type==="form"?sm(a):pn.r(e)}var is=typeof document>"u"?null:document;function P0(e,a,s){var o=is;if(o&&typeof a=="string"&&a){var h=va(a);h='link[rel="'+e+'"][href="'+h+'"]',typeof s=="string"&&(h+='[crossorigin="'+s+'"]'),I0.has(h)||(I0.add(h),e={rel:e,crossOrigin:s,href:a},o.querySelector(h)===null&&(a=o.createElement("link"),Ot(a,"link",e),kt(a),o.head.appendChild(a)))}}function cw(e){pn.D(e),P0("dns-prefetch",e,null)}function uw(e,a){pn.C(e,a),P0("preconnect",e,a)}function dw(e,a,s){pn.L(e,a,s);var o=is;if(o&&e&&a){var h='link[rel="preload"][as="'+va(a)+'"]';a==="image"&&s&&s.imageSrcSet?(h+='[imagesrcset="'+va(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(h+='[imagesizes="'+va(s.imageSizes)+'"]')):h+='[href="'+va(e)+'"]';var g=h;switch(a){case"style":g=ls(e);break;case"script":g=os(e)}ja.has(g)||(e=v({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:e,as:a},s),ja.set(g,e),o.querySelector(h)!==null||a==="style"&&o.querySelector(fi(g))||a==="script"&&o.querySelector(mi(g))||(a=o.createElement("link"),Ot(a,"link",e),kt(a),o.head.appendChild(a)))}}function hw(e,a){pn.m(e,a);var s=is;if(s&&e){var o=a&&typeof a.as=="string"?a.as:"script",h='link[rel="modulepreload"][as="'+va(o)+'"][href="'+va(e)+'"]',g=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=os(e)}if(!ja.has(g)&&(e=v({rel:"modulepreload",href:e},a),ja.set(g,e),s.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(mi(g)))return}o=s.createElement("link"),Ot(o,"link",e),kt(o),s.head.appendChild(o)}}}function fw(e,a,s){pn.S(e,a,s);var o=is;if(o&&e){var h=Tr(o).hoistableStyles,g=ls(e);a=a||"default";var _=h.get(g);if(!_){var C={loading:0,preload:null};if(_=o.querySelector(fi(g)))C.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":a},s),(s=ja.get(g))&&Ku(e,s);var P=_=o.createElement("link");kt(P),Ot(P,"link",e),P._p=new Promise(function(ae,se){P.onload=ae,P.onerror=se}),P.addEventListener("load",function(){C.loading|=1}),P.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Fl(_,a,o)}_={type:"stylesheet",instance:_,count:1,state:C},h.set(g,_)}}}function mw(e,a){pn.X(e,a);var s=is;if(s&&e){var o=Tr(s).hoistableScripts,h=os(e),g=o.get(h);g||(g=s.querySelector(mi(h)),g||(e=v({src:e,async:!0},a),(a=ja.get(h))&&Vu(e,a),g=s.createElement("script"),kt(g),Ot(g,"link",e),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(h,g))}}function gw(e,a){pn.M(e,a);var s=is;if(s&&e){var o=Tr(s).hoistableScripts,h=os(e),g=o.get(h);g||(g=s.querySelector(mi(h)),g||(e=v({src:e,async:!0,type:"module"},a),(a=ja.get(h))&&Vu(e,a),g=s.createElement("script"),kt(g),Ot(g,"link",e),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(h,g))}}function G0(e,a,s,o){var h=(h=oe.current)?Yl(h):null;if(!h)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=ls(s.href),s=Tr(h).hoistableStyles,o=s.get(a),o||(o={type:"style",instance:null,count:0,state:null},s.set(a,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=ls(s.href);var g=Tr(h).hoistableStyles,_=g.get(e);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,_),(g=h.querySelector(fi(e)))&&!g._p&&(_.instance=g,_.state.loading=5),ja.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ja.set(e,s),g||pw(h,e,s,_.state))),a&&o===null)throw Error(i(528,""));return _}if(a&&o!==null)throw Error(i(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=os(s),s=Tr(h).hoistableScripts,o=s.get(a),o||(o={type:"script",instance:null,count:0,state:null},s.set(a,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function ls(e){return'href="'+va(e)+'"'}function fi(e){return'link[rel="stylesheet"]['+e+"]"}function K0(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function pw(e,a,s,o){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=e.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),Ot(a,"link",s),kt(a),e.head.appendChild(a))}function os(e){return'[src="'+va(e)+'"]'}function mi(e){return"script[async]"+e}function V0(e,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var o=e.querySelector('style[data-href~="'+va(s.href)+'"]');if(o)return a.instance=o,kt(o),o;var h=v({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),kt(o),Ot(o,"style",h),Fl(o,s.precedence,e),a.instance=o;case"stylesheet":h=ls(s.href);var g=e.querySelector(fi(h));if(g)return a.state.loading|=4,a.instance=g,kt(g),g;o=K0(s),(h=ja.get(h))&&Ku(o,h),g=(e.ownerDocument||e).createElement("link"),kt(g);var _=g;return _._p=new Promise(function(C,P){_.onload=C,_.onerror=P}),Ot(g,"link",o),a.state.loading|=4,Fl(g,s.precedence,e),a.instance=g;case"script":return g=os(s.src),(h=e.querySelector(mi(g)))?(a.instance=h,kt(h),h):(o=s,(h=ja.get(g))&&(o=v({},s),Vu(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),kt(h),Ot(h,"link",o),e.head.appendChild(h),a.instance=h);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(o=a.instance,a.state.loading|=4,Fl(o,s.precedence,e));return a.instance}function Fl(e,a,s){for(var o=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,g=h,_=0;_<o.length;_++){var C=o[_];if(C.dataset.precedence===a)g=C;else if(g!==h)break}g?g.parentNode.insertBefore(e,g.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(e,a.firstChild))}function Ku(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function Vu(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var Wl=null;function Y0(e,a,s){if(Wl===null){var o=new Map,h=Wl=new Map;h.set(s,o)}else h=Wl,o=h.get(s),o||(o=new Map,h.set(s,o));if(o.has(e))return o;for(o.set(e,null),s=s.getElementsByTagName(e),h=0;h<s.length;h++){var g=s[h];if(!(g[Cs]||g[At]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var _=g.getAttribute(a)||"";_=e+_;var C=o.get(_);C?C.push(g):o.set(_,[g])}}return o}function F0(e,a,s){e=e.ownerDocument||e,e.head.insertBefore(s,a==="title"?e.querySelector("head > title"):null)}function yw(e,a,s){if(s===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function W0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function vw(e,a,s,o){if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=ls(o.href),g=a.querySelector(fi(h));if(g){a=g._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=Xl.bind(e),a.then(e,e)),s.state.loading|=4,s.instance=g,kt(g);return}g=a.ownerDocument||a,o=K0(o),(h=ja.get(h))&&Ku(o,h),g=g.createElement("link"),kt(g);var _=g;_._p=new Promise(function(C,P){_.onload=C,_.onerror=P}),Ot(g,"link",o),s.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Xl.bind(e),a.addEventListener("load",s),a.addEventListener("error",s))}}var Yu=0;function bw(e,a){return e.stylesheets&&e.count===0&&Jl(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var o=setTimeout(function(){if(e.stylesheets&&Jl(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+a);0<e.imgBytes&&Yu===0&&(Yu=62500*Zb());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Jl(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>Yu?50:800)+a);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Xl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ql=null;function Jl(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ql=new Map,a.forEach(ww,e),Ql=null,Xl.call(e))}function ww(e,a){if(!(a.state.loading&4)){var s=Ql.get(e);if(s)var o=s.get(null);else{s=new Map,Ql.set(e,s);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var _=h[g];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(s.set(_.dataset.precedence,_),o=_)}o&&s.set(null,o)}h=a.instance,_=h.getAttribute("data-precedence"),g=s.get(_)||o,g===o&&s.set(null,h),s.set(_,h),this.count++,o=Xl.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),g?g.parentNode.insertBefore(h,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),a.state.loading|=4}}var gi={$$typeof:M,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function xw(e,a,s,o,h,g,_,C,P){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ua(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ua(0),this.hiddenUpdates=Ua(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function X0(e,a,s,o,h,g,_,C,P,ae,se,le){return e=new xw(e,a,s,_,P,ae,se,le,C),a=1,g===!0&&(a|=24),g=ia(3,null,null,a),e.current=g,g.stateNode=e,a=jc(),a.refCount++,e.pooledCache=a,a.refCount++,g.memoizedState={element:o,isDehydrated:s,cache:a},Cc(g),e}function Q0(e){return e?(e=Br,e):Br}function J0(e,a,s,o,h,g){h=Q0(h),o.context===null?o.context=h:o.pendingContext=h,o=An(a),o.payload={element:s},g=g===void 0?null:g,g!==null&&(o.callback=g),s=Tn(e,o,a),s!==null&&(Qt(s,e,a),Ys(s,e,a))}function Z0(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<a?s:a}}function Fu(e,a){Z0(e,a),(e=e.alternate)&&Z0(e,a)}function eg(e){if(e.tag===13||e.tag===31){var a=tr(e,67108864);a!==null&&Qt(a,e,67108864),Fu(e,67108864)}}function tg(e){if(e.tag===13||e.tag===31){var a=da();a=Po(a);var s=tr(e,a);s!==null&&Qt(s,e,a),Fu(e,a)}}var Zl=!0;function _w(e,a,s,o){var h=N.T;N.T=null;var g=k.p;try{k.p=2,Wu(e,a,s,o)}finally{k.p=g,N.T=h}}function Sw(e,a,s,o){var h=N.T;N.T=null;var g=k.p;try{k.p=8,Wu(e,a,s,o)}finally{k.p=g,N.T=h}}function Wu(e,a,s,o){if(Zl){var h=Xu(o);if(h===null)Du(e,a,o,eo,s),ng(e,o);else if(kw(h,e,a,s,o))o.stopPropagation();else if(ng(e,o),a&4&&-1<Ew.indexOf(e)){for(;h!==null;){var g=Ar(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var _=zt(g.pendingLanes);if(_!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;_;){var P=1<<31-Nt(_);C.entanglements[1]|=P,_&=~P}Ya(g),(Ie&6)===0&&(zl=fe()+500,ci(0))}}break;case 31:case 13:C=tr(g,2),C!==null&&Qt(C,g,2),$l(),Fu(g,2)}if(g=Xu(o),g===null&&Du(e,a,o,eo,s),g===h)break;h=g}h!==null&&o.stopPropagation()}else Du(e,a,o,null,s)}}function Xu(e){return e=Jo(e),Qu(e)}var eo=null;function Qu(e){if(eo=null,e=Nr(e),e!==null){var a=c(e);if(a===null)e=null;else{var s=a.tag;if(s===13){if(e=u(a),e!==null)return e;e=null}else if(s===31){if(e=d(a),e!==null)return e;e=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return eo=e,null}function ag(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Je()){case st:return 2;case pa:return 8;case $e:case aa:return 32;case pt:return 268435456;default:return 32}default:return 32}}var Ju=!1,Hn=null,qn=null,In=null,pi=new Map,yi=new Map,Pn=[],Ew="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ng(e,a){switch(e){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":pi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":yi.delete(a.pointerId)}}function vi(e,a,s,o,h,g){return e===null||e.nativeEvent!==g?(e={blockedOn:a,domEventName:s,eventSystemFlags:o,nativeEvent:g,targetContainers:[h]},a!==null&&(a=Ar(a),a!==null&&eg(a)),e):(e.eventSystemFlags|=o,a=e.targetContainers,h!==null&&a.indexOf(h)===-1&&a.push(h),e)}function kw(e,a,s,o,h){switch(a){case"focusin":return Hn=vi(Hn,e,a,s,o,h),!0;case"dragenter":return qn=vi(qn,e,a,s,o,h),!0;case"mouseover":return In=vi(In,e,a,s,o,h),!0;case"pointerover":var g=h.pointerId;return pi.set(g,vi(pi.get(g)||null,e,a,s,o,h)),!0;case"gotpointercapture":return g=h.pointerId,yi.set(g,vi(yi.get(g)||null,e,a,s,o,h)),!0}return!1}function rg(e){var a=Nr(e.target);if(a!==null){var s=c(a);if(s!==null){if(a=s.tag,a===13){if(a=u(s),a!==null){e.blockedOn=a,yh(e.priority,function(){tg(s)});return}}else if(a===31){if(a=d(s),a!==null){e.blockedOn=a,yh(e.priority,function(){tg(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function to(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var s=Xu(e.nativeEvent);if(s===null){s=e.nativeEvent;var o=new s.constructor(s.type,s);Qo=o,s.target.dispatchEvent(o),Qo=null}else return a=Ar(s),a!==null&&eg(a),e.blockedOn=s,!1;a.shift()}return!0}function sg(e,a,s){to(e)&&s.delete(a)}function jw(){Ju=!1,Hn!==null&&to(Hn)&&(Hn=null),qn!==null&&to(qn)&&(qn=null),In!==null&&to(In)&&(In=null),pi.forEach(sg),yi.forEach(sg)}function ao(e,a){e.blockedOn===a&&(e.blockedOn=null,Ju||(Ju=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,jw)))}var no=null;function ig(e){no!==e&&(no=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){no===e&&(no=null);for(var a=0;a<e.length;a+=3){var s=e[a],o=e[a+1],h=e[a+2];if(typeof o!="function"){if(Qu(o||s)===null)continue;break}var g=Ar(s);g!==null&&(e.splice(a,3),a-=3,Xc(g,{pending:!0,data:h,method:s.method,action:o},o,h))}}))}function cs(e){function a(P){return ao(P,e)}Hn!==null&&ao(Hn,e),qn!==null&&ao(qn,e),In!==null&&ao(In,e),pi.forEach(a),yi.forEach(a);for(var s=0;s<Pn.length;s++){var o=Pn[s];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Pn.length&&(s=Pn[0],s.blockedOn===null);)rg(s),s.blockedOn===null&&Pn.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(o=0;o<s.length;o+=3){var h=s[o],g=s[o+1],_=h[Kt]||null;if(typeof g=="function")_||ig(s);else if(_){var C=null;if(g&&g.hasAttribute("formAction")){if(h=g,_=g[Kt]||null)C=_.formAction;else if(Qu(h)!==null)continue}else C=_.action;typeof C=="function"?s[o+1]=C:(s.splice(o,3),o-=3),ig(s)}}}function lg(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function a(){h!==null&&(h(),h=null),o||setTimeout(s,20)}function s(){if(!o&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(s,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),h!==null&&(h(),h=null)}}}function Zu(e){this._internalRoot=e}ro.prototype.render=Zu.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(i(409));var s=a.current,o=da();J0(s,o,e,a,null,null)},ro.prototype.unmount=Zu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;J0(e.current,2,null,e,null,null),$l(),a[jr]=null}};function ro(e){this._internalRoot=e}ro.prototype.unstable_scheduleHydration=function(e){if(e){var a=ph();e={blockedOn:null,target:e,priority:a};for(var s=0;s<Pn.length&&a!==0&&a<Pn[s].priority;s++);Pn.splice(s,0,e),s===0&&rg(e)}};var og=t.version;if(og!=="19.2.3")throw Error(i(527,og,"19.2.3"));k.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=p(a),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Nw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var so=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!so.isDisabled&&so.supportsFiber)try{Ht=so.inject(Nw),it=so}catch{}}return wi.createRoot=function(e,a){if(!l(e))throw Error(i(299));var s=!1,o="",h=gm,g=pm,_=ym;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),a=X0(e,1,!1,null,null,s,o,null,h,g,_,lg),e[jr]=a.current,Uu(e),new Zu(a)},wi.hydrateRoot=function(e,a,s){if(!l(e))throw Error(i(299));var o=!1,h="",g=gm,_=pm,C=ym,P=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError),s.formState!==void 0&&(P=s.formState)),a=X0(e,1,!0,a,s??null,o,h,P,g,_,C,lg),a.context=Q0(null),s=a.current,o=da(),o=Po(o),h=An(o),h.callback=null,Tn(s,h,o),s=o,a.current.lanes=s,Ts(a,s),Ya(a),e[jr]=a.current,Uu(e),new ro(a)},wi.version="19.2.3",wi}var vg;function Bw(){if(vg)return ad.exports;vg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),ad.exports=$w(),ad.exports}var Hw=Bw();var bg="popstate";function qw(n={}){function t(l,c){let{pathname:u="/",search:d="",hash:m=""}=Er(l.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),_d("",{pathname:u,search:d,hash:m},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function r(l,c){let u=l.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let m=l.location.href,p=m.indexOf("#");d=p===-1?m:m.slice(0,p)}return d+"#"+(typeof c=="string"?c:ji(c))}function i(l,c){ga(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return Pw(t,r,i,n)}function ot(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function ga(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Iw(){return Math.random().toString(36).substring(2,10)}function wg(n,t){return{usr:n.state,key:n.key,idx:t}}function _d(n,t,r=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?Er(t):t,state:r,key:t&&t.key||i||Iw()}}function ji({pathname:n="/",search:t="",hash:r=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(n+=r.charAt(0)==="#"?r:"#"+r),n}function Er(n){let t={};if(n){let r=n.indexOf("#");r>=0&&(t.hash=n.substring(r),n=n.substring(0,r));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function Pw(n,t,r,i={}){let{window:l=document.defaultView,v5Compat:c=!1}=i,u=l.history,d="POP",m=null,p=y();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function y(){return(u.state||{idx:null}).idx}function v(){d="POP";let A=y(),T=A==null?null:A-p;p=A,m&&m({action:d,location:S.location,delta:T})}function b(A,T){d="PUSH";let U=_d(S.location,A,T);r&&r(U,A),p=y()+1;let M=wg(U,p),$=S.createHref(U);try{u.pushState(M,"",$)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;l.location.assign($)}c&&m&&m({action:d,location:S.location,delta:1})}function w(A,T){d="REPLACE";let U=_d(S.location,A,T);r&&r(U,A),p=y();let M=wg(U,p),$=S.createHref(U);u.replaceState(M,"",$),c&&m&&m({action:d,location:S.location,delta:0})}function x(A){return Gw(A)}let S={get action(){return d},get location(){return n(l,u)},listen(A){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(bg,v),m=A,()=>{l.removeEventListener(bg,v),m=null}},createHref(A){return t(l,A)},createURL:x,encodeLocation(A){let T=x(A);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:b,replace:w,go(A){return u.go(A)}};return S}function Gw(n,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ot(r,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:ji(n);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function Lp(n,t,r="/"){return Kw(n,t,r,!1)}function Kw(n,t,r,i){let l=typeof t=="string"?Er(t):t,c=bn(l.pathname||"/",r);if(c==null)return null;let u=$p(n);Vw(u);let d=null;for(let m=0;d==null&&m<u.length;++m){let p=nx(c);d=tx(u[m],p,i)}return d}function $p(n,t=[],r=[],i="",l=!1){let c=(u,d,m=l,p)=>{let y={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&m)return;ot(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let v=vn([i,y.relativePath]),b=r.concat(y);u.children&&u.children.length>0&&(ot(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),$p(u.children,t,b,v,m)),!(u.path==null&&!u.index)&&t.push({path:v,score:Zw(v,u.index),routesMeta:b})};return n.forEach((u,d)=>{if(u.path===""||!u.path?.includes("?"))c(u,d);else for(let m of Bp(u.path))c(u,d,!0,m)}),t}function Bp(n){let t=n.split("/");if(t.length===0)return[];let[r,...i]=t,l=r.endsWith("?"),c=r.replace(/\?$/,"");if(i.length===0)return l?[c,""]:[c];let u=Bp(i.join("/")),d=[];return d.push(...u.map(m=>m===""?c:[c,m].join("/"))),l&&d.push(...u),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function Vw(n){n.sort((t,r)=>t.score!==r.score?r.score-t.score:ex(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var Yw=/^:[\w-]+$/,Fw=3,Ww=2,Xw=1,Qw=10,Jw=-2,xg=n=>n==="*";function Zw(n,t){let r=n.split("/"),i=r.length;return r.some(xg)&&(i+=Jw),t&&(i+=Ww),r.filter(l=>!xg(l)).reduce((l,c)=>l+(Yw.test(c)?Fw:c===""?Xw:Qw),i)}function ex(n,t){return n.length===t.length&&n.slice(0,-1).every((i,l)=>i===t[l])?n[n.length-1]-t[t.length-1]:0}function tx(n,t,r=!1){let{routesMeta:i}=n,l={},c="/",u=[];for(let d=0;d<i.length;++d){let m=i[d],p=d===i.length-1,y=c==="/"?t:t.slice(c.length)||"/",v=xo({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},y),b=m.route;if(!v&&p&&r&&!i[i.length-1].route.index&&(v=xo({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!v)return null;Object.assign(l,v.params),u.push({params:l,pathname:vn([c,v.pathname]),pathnameBase:ox(vn([c,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(c=vn([c,v.pathnameBase]))}return u}function xo(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[r,i]=ax(n.path,n.caseSensitive,n.end),l=t.match(r);if(!l)return null;let c=l[0],u=c.replace(/(.)\/+$/,"$1"),d=l.slice(1);return{params:i.reduce((p,{paramName:y,isOptional:v},b)=>{if(y==="*"){let x=d[b]||"";u=c.slice(0,c.length-x.length).replace(/(.)\/+$/,"$1")}const w=d[b];return v&&!w?p[y]=void 0:p[y]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:u,pattern:n}}function ax(n,t=!1,r=!0){ga(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],l="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,m)=>(i.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),l+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":n!==""&&n!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),i]}function nx(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ga(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function bn(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=n.charAt(r);return i&&i!=="/"?null:n.slice(r)||"/"}var rx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sx=n=>rx.test(n);function ix(n,t="/"){let{pathname:r,search:i="",hash:l=""}=typeof n=="string"?Er(n):n,c;if(r)if(sx(r))c=r;else{if(r.includes("//")){let u=r;r=r.replace(/\/\/+/g,"/"),ga(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${r}`)}r.startsWith("/")?c=_g(r.substring(1),"/"):c=_g(r,t)}else c=t;return{pathname:c,search:cx(i),hash:ux(l)}}function _g(n,t){let r=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function id(n,t,r,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lx(n){return n.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Pd(n){let t=lx(n);return t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase)}function Gd(n,t,r,i=!1){let l;typeof n=="string"?l=Er(n):(l={...n},ot(!l.pathname||!l.pathname.includes("?"),id("?","pathname","search",l)),ot(!l.pathname||!l.pathname.includes("#"),id("#","pathname","hash",l)),ot(!l.search||!l.search.includes("#"),id("#","search","hash",l)));let c=n===""||l.pathname==="",u=c?"/":l.pathname,d;if(u==null)d=r;else{let v=t.length-1;if(!i&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),v-=1;l.pathname=b.join("/")}d=v>=0?t[v]:"/"}let m=ix(l,d),p=u&&u!=="/"&&u.endsWith("/"),y=(c||u===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(p||y)&&(m.pathname+="/"),m}var vn=n=>n.join("/").replace(/\/\/+/g,"/"),ox=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),cx=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ux=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function dx(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function hx(n){return n.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Hp=["POST","PUT","PATCH","DELETE"];new Set(Hp);var fx=["GET",...Hp];new Set(fx);var js=O.createContext(null);js.displayName="DataRouter";var Ro=O.createContext(null);Ro.displayName="DataRouterState";O.createContext(!1);var qp=O.createContext({isTransitioning:!1});qp.displayName="ViewTransition";var mx=O.createContext(new Map);mx.displayName="Fetchers";var gx=O.createContext(null);gx.displayName="Await";var Ca=O.createContext(null);Ca.displayName="Navigation";var Bi=O.createContext(null);Bi.displayName="Location";var Ra=O.createContext({outlet:null,matches:[],isDataRoute:!1});Ra.displayName="Route";var Kd=O.createContext(null);Kd.displayName="RouteError";function px(n,{relative:t}={}){ot(Ns(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=O.useContext(Ca),{hash:l,pathname:c,search:u}=qi(n,{relative:t}),d=c;return r!=="/"&&(d=c==="/"?r:vn([r,c])),i.createHref({pathname:d,search:u,hash:l})}function Ns(){return O.useContext(Bi)!=null}function Bt(){return ot(Ns(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(Bi).location}var Ip="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Pp(n){O.useContext(Ca).static||O.useLayoutEffect(n)}function ea(){let{isDataRoute:n}=O.useContext(Ra);return n?Rx():yx()}function yx(){ot(Ns(),"useNavigate() may be used only in the context of a <Router> component.");let n=O.useContext(js),{basename:t,navigator:r}=O.useContext(Ca),{matches:i}=O.useContext(Ra),{pathname:l}=Bt(),c=JSON.stringify(Pd(i)),u=O.useRef(!1);return Pp(()=>{u.current=!0}),O.useCallback((m,p={})=>{if(ga(u.current,Ip),!u.current)return;if(typeof m=="number"){r.go(m);return}let y=Gd(m,JSON.parse(c),l,p.relative==="path");n==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:vn([t,y.pathname])),(p.replace?r.replace:r.push)(y,p.state,p)},[t,r,c,l,n])}var vx=O.createContext(null);function bx(n){let t=O.useContext(Ra).outlet;return O.useMemo(()=>t&&O.createElement(vx.Provider,{value:n},t),[t,n])}function Hi(){let{matches:n}=O.useContext(Ra),t=n[n.length-1];return t?t.params:{}}function qi(n,{relative:t}={}){let{matches:r}=O.useContext(Ra),{pathname:i}=Bt(),l=JSON.stringify(Pd(r));return O.useMemo(()=>Gd(n,JSON.parse(l),i,t==="path"),[n,l,i,t])}function wx(n,t){return Gp(n,t)}function Gp(n,t,r,i,l){ot(Ns(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=O.useContext(Ca),{matches:u}=O.useContext(Ra),d=u[u.length-1],m=d?d.params:{},p=d?d.pathname:"/",y=d?d.pathnameBase:"/",v=d&&d.route;{let U=v&&v.path||"";Kp(p,!v||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let b=Bt(),w;if(t){let U=typeof t=="string"?Er(t):t;ot(y==="/"||U.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${U.pathname}" was given in the \`location\` prop.`),w=U}else w=b;let x=w.pathname||"/",S=x;if(y!=="/"){let U=y.replace(/^\//,"").split("/");S="/"+x.replace(/^\//,"").split("/").slice(U.length).join("/")}let A=Lp(n,{pathname:S});ga(v||A!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),ga(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=kx(A&&A.map(U=>Object.assign({},U,{params:Object.assign({},m,U.params),pathname:vn([y,c.encodeLocation?c.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?y:vn([y,c.encodeLocation?c.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),u,r,i,l);return t&&T?O.createElement(Bi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},T):T}function xx(){let n=Cx(),t=dx(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),r=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:c},"ErrorBoundary")," or"," ",O.createElement("code",{style:c},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},t),r?O.createElement("pre",{style:l},r):null,u)}var _x=O.createElement(xx,null),Sx=class extends O.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){this.props.onError?this.props.onError(n,t):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?O.createElement(Ra.Provider,{value:this.props.routeContext},O.createElement(Kd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ex({routeContext:n,match:t,children:r}){let i=O.useContext(js);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),O.createElement(Ra.Provider,{value:n},r)}function kx(n,t=[],r=null,i=null,l=null){if(n==null){if(!r)return null;if(r.errors)n=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)n=r.matches;else return null}let c=n,u=r?.errors;if(u!=null){let y=c.findIndex(v=>v.route.id&&u?.[v.route.id]!==void 0);ot(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,y+1))}let d=!1,m=-1;if(r)for(let y=0;y<c.length;y++){let v=c[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=y),v.route.id){let{loaderData:b,errors:w}=r,x=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!w||w[v.route.id]===void 0);if(v.route.lazy||x){d=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}let p=r&&i?(y,v)=>{i(y,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:hx(r.matches),errorInfo:v})}:void 0;return c.reduceRight((y,v,b)=>{let w,x=!1,S=null,A=null;r&&(w=u&&v.route.id?u[v.route.id]:void 0,S=v.route.errorElement||_x,d&&(m<0&&b===0?(Kp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,A=null):m===b&&(x=!0,A=v.route.hydrateFallbackElement||null)));let T=t.concat(c.slice(0,b+1)),U=()=>{let M;return w?M=S:x?M=A:v.route.Component?M=O.createElement(v.route.Component,null):v.route.element?M=v.route.element:M=y,O.createElement(Ex,{match:v,routeContext:{outlet:y,matches:T,isDataRoute:r!=null},children:M})};return r&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?O.createElement(Sx,{location:r.location,revalidation:r.revalidation,component:S,error:w,children:U(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:p}):U()},null)}function Vd(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jx(n){let t=O.useContext(js);return ot(t,Vd(n)),t}function Nx(n){let t=O.useContext(Ro);return ot(t,Vd(n)),t}function Ax(n){let t=O.useContext(Ra);return ot(t,Vd(n)),t}function Yd(n){let t=Ax(n),r=t.matches[t.matches.length-1];return ot(r.route.id,`${n} can only be used on routes that contain a unique "id"`),r.route.id}function Tx(){return Yd("useRouteId")}function Cx(){let n=O.useContext(Kd),t=Nx("useRouteError"),r=Yd("useRouteError");return n!==void 0?n:t.errors?.[r]}function Rx(){let{router:n}=jx("useNavigate"),t=Yd("useNavigate"),r=O.useRef(!1);return Pp(()=>{r.current=!0}),O.useCallback(async(l,c={})=>{ga(r.current,Ip),r.current&&(typeof l=="number"?await n.navigate(l):await n.navigate(l,{fromRouteId:t,...c}))},[n,t])}var Sg={};function Kp(n,t,r){!t&&!Sg[n]&&(Sg[n]=!0,ga(!1,r))}O.memo(Ox);function Ox({routes:n,future:t,state:r,unstable_onError:i}){return Gp(n,void 0,r,i,t)}function Vp({to:n,replace:t,state:r,relative:i}){ot(Ns(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=O.useContext(Ca);ga(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=O.useContext(Ra),{pathname:u}=Bt(),d=ea(),m=Gd(n,Pd(c),u,i==="path"),p=JSON.stringify(m);return O.useEffect(()=>{d(JSON.parse(p),{replace:t,state:r,relative:i})},[d,p,i,t,r]),null}function Mx(n){return bx(n.context)}function It(n){ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ux({basename:n="/",children:t=null,location:r,navigationType:i="POP",navigator:l,static:c=!1,unstable_useTransitions:u}){ot(!Ns(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),m=O.useMemo(()=>({basename:d,navigator:l,static:c,unstable_useTransitions:u,future:{}}),[d,l,c,u]);typeof r=="string"&&(r=Er(r));let{pathname:p="/",search:y="",hash:v="",state:b=null,key:w="default"}=r,x=O.useMemo(()=>{let S=bn(p,d);return S==null?null:{location:{pathname:S,search:y,hash:v,state:b,key:w},navigationType:i}},[d,p,y,v,b,w,i]);return ga(x!=null,`<Router basename="${d}"> is not able to match the URL "${p}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:O.createElement(Ca.Provider,{value:m},O.createElement(Bi.Provider,{children:t,value:x}))}function Dx({children:n,location:t}){return wx(Sd(n),t)}function Sd(n,t=[]){let r=[];return O.Children.forEach(n,(i,l)=>{if(!O.isValidElement(i))return;let c=[...t,l];if(i.type===O.Fragment){r.push.apply(r,Sd(i.props.children,c));return}ot(i.type===It,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ot(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Sd(i.props.children,c)),r.push(u)}),r}var mo="get",go="application/x-www-form-urlencoded";function Oo(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function zx(n){return Oo(n)&&n.tagName.toLowerCase()==="button"}function Lx(n){return Oo(n)&&n.tagName.toLowerCase()==="form"}function $x(n){return Oo(n)&&n.tagName.toLowerCase()==="input"}function Bx(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Hx(n,t){return n.button===0&&(!t||t==="_self")&&!Bx(n)}var io=null;function qx(){if(io===null)try{new FormData(document.createElement("form"),0),io=!1}catch{io=!0}return io}var Ix=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ld(n){return n!=null&&!Ix.has(n)?(ga(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${go}"`),null):n}function Px(n,t){let r,i,l,c,u;if(Lx(n)){let d=n.getAttribute("action");i=d?bn(d,t):null,r=n.getAttribute("method")||mo,l=ld(n.getAttribute("enctype"))||go,c=new FormData(n)}else if(zx(n)||$x(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(i=m?bn(m,t):null,r=n.getAttribute("formmethod")||d.getAttribute("method")||mo,l=ld(n.getAttribute("formenctype"))||ld(d.getAttribute("enctype"))||go,c=new FormData(d,n),!qx()){let{name:p,type:y,value:v}=n;if(y==="image"){let b=p?`${p}.`:"";c.append(`${b}x`,"0"),c.append(`${b}y`,"0")}else p&&c.append(p,v)}}else{if(Oo(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=mo,i=null,l=go,u=n}return c&&l==="text/plain"&&(u=c,c=void 0),{action:i,method:r.toLowerCase(),encType:l,formData:c,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Fd(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function Gx(n,t,r){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${r}`:t&&bn(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function Kx(n,t){if(n.id in t)return t[n.id];try{let r=await import(n.module);return t[n.id]=r,r}catch(r){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Vx(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Yx(n,t,r){let i=await Promise.all(n.map(async l=>{let c=t.routes[l.route.id];if(c){let u=await Kx(c,r);return u.links?u.links():[]}return[]}));return Qx(i.flat(1).filter(Vx).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Eg(n,t,r,i,l,c){let u=(m,p)=>r[p]?m.route.id!==r[p].route.id:!0,d=(m,p)=>r[p].pathname!==m.pathname||r[p].route.path?.endsWith("*")&&r[p].params["*"]!==m.params["*"];return c==="assets"?t.filter((m,p)=>u(m,p)||d(m,p)):c==="data"?t.filter((m,p)=>{let y=i.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(u(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let v=m.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Fx(n,t,{includeHydrateFallback:r}={}){return Wx(n.map(i=>{let l=t.routes[i.route.id];if(!l)return[];let c=[l.module];return l.clientActionModule&&(c=c.concat(l.clientActionModule)),l.clientLoaderModule&&(c=c.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(c=c.concat(l.hydrateFallbackModule)),l.imports&&(c=c.concat(l.imports)),c}).flat(1))}function Wx(n){return[...new Set(n)]}function Xx(n){let t={},r=Object.keys(n).sort();for(let i of r)t[i]=n[i];return t}function Qx(n,t){let r=new Set;return new Set(t),n.reduce((i,l)=>{let c=JSON.stringify(Xx(l));return r.has(c)||(r.add(c),i.push({key:c,link:l})),i},[])}function Yp(){let n=O.useContext(js);return Fd(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Jx(){let n=O.useContext(Ro);return Fd(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Wd=O.createContext(void 0);Wd.displayName="FrameworkContext";function Fp(){let n=O.useContext(Wd);return Fd(n,"You must render this element inside a <HydratedRouter> element"),n}function Zx(n,t){let r=O.useContext(Wd),[i,l]=O.useState(!1),[c,u]=O.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=t,b=O.useRef(null);O.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let S=T=>{T.forEach(U=>{u(U.isIntersecting)})},A=new IntersectionObserver(S,{threshold:.5});return b.current&&A.observe(b.current),()=>{A.disconnect()}}},[n]),O.useEffect(()=>{if(i){let S=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(S)}}},[i]);let w=()=>{l(!0)},x=()=>{l(!1),u(!1)};return r?n!=="intent"?[c,b,{}]:[c,b,{onFocus:xi(d,w),onBlur:xi(m,x),onMouseEnter:xi(p,w),onMouseLeave:xi(y,x),onTouchStart:xi(v,w)}]:[!1,b,{}]}function xi(n,t){return r=>{n&&n(r),r.defaultPrevented||t(r)}}function e1({page:n,...t}){let{router:r}=Yp(),i=O.useMemo(()=>Lp(r.routes,n,r.basename),[r.routes,n,r.basename]);return i?O.createElement(a1,{page:n,matches:i,...t}):null}function t1(n){let{manifest:t,routeModules:r}=Fp(),[i,l]=O.useState([]);return O.useEffect(()=>{let c=!1;return Yx(n,t,r).then(u=>{c||l(u)}),()=>{c=!0}},[n,t,r]),i}function a1({page:n,matches:t,...r}){let i=Bt(),{manifest:l,routeModules:c}=Fp(),{basename:u}=Yp(),{loaderData:d,matches:m}=Jx(),p=O.useMemo(()=>Eg(n,t,m,l,i,"data"),[n,t,m,l,i]),y=O.useMemo(()=>Eg(n,t,m,l,i,"assets"),[n,t,m,l,i]),v=O.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let x=new Set,S=!1;if(t.forEach(T=>{let U=l.routes[T.route.id];!U||!U.hasLoader||(!p.some(M=>M.route.id===T.route.id)&&T.route.id in d&&c[T.route.id]?.shouldRevalidate||U.hasClientLoader?S=!0:x.add(T.route.id))}),x.size===0)return[];let A=Gx(n,u,"data");return S&&x.size>0&&A.searchParams.set("_routes",t.filter(T=>x.has(T.route.id)).map(T=>T.route.id).join(",")),[A.pathname+A.search]},[u,d,i,l,p,t,n,c]),b=O.useMemo(()=>Fx(y,l),[y,l]),w=t1(y);return O.createElement(O.Fragment,null,v.map(x=>O.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...r})),b.map(x=>O.createElement("link",{key:x,rel:"modulepreload",href:x,...r})),w.map(({key:x,link:S})=>O.createElement("link",{key:x,nonce:r.nonce,...S})))}function n1(...n){return t=>{n.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Wp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Wp&&(window.__reactRouterVersion="7.10.1")}catch{}function r1({basename:n,children:t,unstable_useTransitions:r,window:i}){let l=O.useRef();l.current==null&&(l.current=qw({window:i,v5Compat:!0}));let c=l.current,[u,d]=O.useState({action:c.action,location:c.location}),m=O.useCallback(p=>{r===!1?d(p):O.startTransition(()=>d(p))},[r]);return O.useLayoutEffect(()=>c.listen(m),[c,m]),O.createElement(Ux,{basename:n,children:t,location:u.location,navigationType:u.action,navigator:c,unstable_useTransitions:r===!0})}var Xp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Na=O.forwardRef(function({onClick:t,discover:r="render",prefetch:i="none",relative:l,reloadDocument:c,replace:u,state:d,target:m,to:p,preventScrollReset:y,viewTransition:v,...b},w){let{basename:x,unstable_useTransitions:S}=O.useContext(Ca),A=typeof p=="string"&&Xp.test(p),T,U=!1;if(typeof p=="string"&&A&&(T=p,Wp))try{let z=new URL(window.location.href),B=p.startsWith("//")?new URL(z.protocol+p):new URL(p),I=bn(B.pathname,x);B.origin===z.origin&&I!=null?p=I+B.search+B.hash:U=!0}catch{ga(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=px(p,{relative:l}),[$,K,R]=Zx(i,b),D=o1(p,{replace:u,state:d,target:m,preventScrollReset:y,relative:l,viewTransition:v,unstable_useTransitions:S});function E(z){t&&t(z),z.defaultPrevented||D(z)}let j=O.createElement("a",{...b,...R,href:T||M,onClick:U||c?t:E,ref:n1(w,K),target:m,"data-discover":!A&&r==="render"?"true":void 0});return $&&!A?O.createElement(O.Fragment,null,j,O.createElement(e1,{page:M})):j});Na.displayName="Link";var s1=O.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:i="",end:l=!1,style:c,to:u,viewTransition:d,children:m,...p},y){let v=qi(u,{relative:p.relative}),b=Bt(),w=O.useContext(Ro),{navigator:x,basename:S}=O.useContext(Ca),A=w!=null&&f1(v)&&d===!0,T=x.encodeLocation?x.encodeLocation(v).pathname:v.pathname,U=b.pathname,M=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;r||(U=U.toLowerCase(),M=M?M.toLowerCase():null,T=T.toLowerCase()),M&&S&&(M=bn(M,S)||M);const $=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let K=U===T||!l&&U.startsWith(T)&&U.charAt($)==="/",R=M!=null&&(M===T||!l&&M.startsWith(T)&&M.charAt(T.length)==="/"),D={isActive:K,isPending:R,isTransitioning:A},E=K?t:void 0,j;typeof i=="function"?j=i(D):j=[i,K?"active":null,R?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let z=typeof c=="function"?c(D):c;return O.createElement(Na,{...p,"aria-current":E,className:j,ref:y,style:z,to:u,viewTransition:d},typeof m=="function"?m(D):m)});s1.displayName="NavLink";var i1=O.forwardRef(({discover:n="render",fetcherKey:t,navigate:r,reloadDocument:i,replace:l,state:c,method:u=mo,action:d,onSubmit:m,relative:p,preventScrollReset:y,viewTransition:v,...b},w)=>{let{unstable_useTransitions:x}=O.useContext(Ca),S=d1(),A=h1(d,{relative:p}),T=u.toLowerCase()==="get"?"get":"post",U=typeof d=="string"&&Xp.test(d),M=$=>{if(m&&m($),$.defaultPrevented)return;$.preventDefault();let K=$.nativeEvent.submitter,R=K?.getAttribute("formmethod")||u,D=()=>S(K||$.currentTarget,{fetcherKey:t,method:R,navigate:r,replace:l,state:c,relative:p,preventScrollReset:y,viewTransition:v});x&&r!==!1?O.startTransition(()=>D()):D()};return O.createElement("form",{ref:w,method:T,action:A,onSubmit:i?m:M,...b,"data-discover":!U&&n==="render"?"true":void 0})});i1.displayName="Form";function l1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qp(n){let t=O.useContext(js);return ot(t,l1(n)),t}function o1(n,{target:t,replace:r,state:i,preventScrollReset:l,relative:c,viewTransition:u,unstable_useTransitions:d}={}){let m=ea(),p=Bt(),y=qi(n,{relative:c});return O.useCallback(v=>{if(Hx(v,t)){v.preventDefault();let b=r!==void 0?r:ji(p)===ji(y),w=()=>m(n,{replace:b,state:i,preventScrollReset:l,relative:c,viewTransition:u});d?O.startTransition(()=>w()):w()}},[p,m,y,r,i,t,n,l,c,u,d])}var c1=0,u1=()=>`__${String(++c1)}__`;function d1(){let{router:n}=Qp("useSubmit"),{basename:t}=O.useContext(Ca),r=Tx(),i=n.fetch,l=n.navigate;return O.useCallback(async(c,u={})=>{let{action:d,method:m,encType:p,formData:y,body:v}=Px(c,t);if(u.navigate===!1){let b=u.fetcherKey||u1();await i(b,r,u.action||d,{preventScrollReset:u.preventScrollReset,formData:y,body:v,formMethod:u.method||m,formEncType:u.encType||p,flushSync:u.flushSync})}else await l(u.action||d,{preventScrollReset:u.preventScrollReset,formData:y,body:v,formMethod:u.method||m,formEncType:u.encType||p,replace:u.replace,state:u.state,fromRouteId:r,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,l,t,r])}function h1(n,{relative:t}={}){let{basename:r}=O.useContext(Ca),i=O.useContext(Ra);ot(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),c={...qi(n||".",{relative:t})},u=Bt();if(n==null){c.search=u.search;let d=new URLSearchParams(c.search),m=d.getAll("index");if(m.some(y=>y==="")){d.delete("index"),m.filter(v=>v).forEach(v=>d.append("index",v));let y=d.toString();c.search=y?`?${y}`:""}}return(!n||n===".")&&l.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(c.pathname=c.pathname==="/"?r:vn([r,c.pathname])),ji(c)}function f1(n,{relative:t}={}){let r=O.useContext(qp);ot(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Qp("useViewTransitionState"),l=qi(n,{relative:t});if(!r.isTransitioning)return!1;let c=bn(r.currentLocation.pathname,i)||r.currentLocation.pathname,u=bn(r.nextLocation.pathname,i)||r.nextLocation.pathname;return xo(l.pathname,u)!=null||xo(l.pathname,c)!=null}const m1=(n,t,r,i)=>{const l=[r,{code:t,...i||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(l,"warn","react-i18next::",!0);_r(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...l):console?.warn&&console.warn(...l)},kg={},Jp=(n,t,r,i)=>{_r(r)&&kg[r]||(_r(r)&&(kg[r]=new Date),m1(n,t,r,i))},Zp=(n,t)=>()=>{if(n.isInitialized)t();else{const r=()=>{setTimeout(()=>{n.off("initialized",r)},0),t()};n.on("initialized",r)}},Ed=(n,t,r)=>{n.loadNamespaces(t,Zp(n,r))},jg=(n,t,r,i)=>{if(_r(r)&&(r=[r]),n.options.preload&&n.options.preload.indexOf(t)>-1)return Ed(n,r,i);r.forEach(l=>{n.options.ns.indexOf(l)<0&&n.options.ns.push(l)}),n.loadLanguages(t,Zp(n,i))},g1=(n,t,r={})=>!t.languages||!t.languages.length?(Jp(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(n,{lng:r.lng,precheck:(i,l)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!l(i.isLanguageChangingTo,n))return!1}}),_r=n=>typeof n=="string",p1=n=>typeof n=="object"&&n!==null,y1=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,v1={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},b1=n=>v1[n],w1=n=>n.replace(y1,b1);let x1={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:w1,transDefaultProps:void 0};const _1=()=>x1;let S1;const E1=()=>S1,k1=O.createContext();class j1{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var od={exports:{}},cd={};var Ng;function N1(){if(Ng)return cd;Ng=1;var n=Co();function t(v,b){return v===b&&(v!==0||1/v===1/b)||v!==v&&b!==b}var r=typeof Object.is=="function"?Object.is:t,i=n.useState,l=n.useEffect,c=n.useLayoutEffect,u=n.useDebugValue;function d(v,b){var w=b(),x=i({inst:{value:w,getSnapshot:b}}),S=x[0].inst,A=x[1];return c(function(){S.value=w,S.getSnapshot=b,m(S)&&A({inst:S})},[v,w,b]),l(function(){return m(S)&&A({inst:S}),v(function(){m(S)&&A({inst:S})})},[v]),u(w),w}function m(v){var b=v.getSnapshot;v=v.value;try{var w=b();return!r(v,w)}catch{return!0}}function p(v,b){return b()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return cd.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:y,cd}var Ag;function A1(){return Ag||(Ag=1,od.exports=N1()),od.exports}var T1=A1();const C1=(n,t)=>_r(t)?t:p1(t)&&_r(t.defaultValue)?t.defaultValue:Array.isArray(n)?n[n.length-1]:n,R1={t:C1,ready:!1},O1=()=>()=>{},nt=(n,t={})=>{const{i18n:r}=t,{i18n:i,defaultNS:l}=O.useContext(k1)||{},c=r||i||E1();c&&!c.reportNamespaces&&(c.reportNamespaces=new j1),c||Jp(c,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const u=O.useMemo(()=>({..._1(),...c?.options?.react,...t}),[c,t]),{useSuspense:d,keyPrefix:m}=u,p=l||c?.options?.defaultNS,y=_r(p)?[p]:p||["translation"],v=O.useMemo(()=>y,y);c?.reportNamespaces?.addUsedNamespaces?.(v);const b=O.useRef(0),w=O.useCallback(j=>{if(!c)return O1;const{bindI18n:z,bindI18nStore:B}=u,I=()=>{b.current+=1,j()};return z&&c.on(z,I),B&&c.store.on(B,I),()=>{z&&z.split(" ").forEach(F=>c.off(F,I)),B&&B.split(" ").forEach(F=>c.store.off(F,I))}},[c,u]),x=O.useRef(),S=O.useCallback(()=>{if(!c)return R1;const j=!!(c.isInitialized||c.initializedStoreOnce)&&v.every(X=>g1(X,c,u)),z=t.lng||c.language,B=b.current,I=x.current;if(I&&I.ready===j&&I.lng===z&&I.keyPrefix===m&&I.revision===B)return I;const q={t:c.getFixedT(z,u.nsMode==="fallback"?v:v[0],m),ready:j,lng:z,keyPrefix:m,revision:B};return x.current=q,q},[c,v,m,u,t.lng]),[A,T]=O.useState(0),{t:U,ready:M}=T1.useSyncExternalStore(w,S,S);O.useEffect(()=>{if(c&&!M&&!d){const j=()=>T(z=>z+1);t.lng?jg(c,t.lng,v,j):Ed(c,v,j)}},[c,t.lng,v,M,d,A]);const $=c||{},K=O.useRef(null),R=O.useRef(),D=j=>{const z=Object.getOwnPropertyDescriptors(j);z.__original&&delete z.__original;const B=Object.create(Object.getPrototypeOf(j),z);if(!Object.prototype.hasOwnProperty.call(B,"__original"))try{Object.defineProperty(B,"__original",{value:j,writable:!1,enumerable:!1,configurable:!1})}catch{}return B},E=O.useMemo(()=>{const j=$,z=j?.language;let B=j;j&&(K.current&&K.current.__original===j?R.current!==z?(B=D(j),K.current=B,R.current=z):B=K.current:(B=D(j),K.current=B,R.current=z));const I=[U,B,M];return I.t=U,I.i18n=B,I.ready=M,I},[U,$,M,$.resolvedLanguage,$.language,$.languages]);if(c&&d&&!M)throw new Promise(j=>{const z=()=>j();t.lng?jg(c,t.lng,v,z):Ed(c,v,z)});return E};function Mo(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(n);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(n,i[l])&&(r[i[l]]=n[i[l]]);return r}function M1(n,t,r,i){function l(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function d(y){try{p(i.next(y))}catch(v){u(v)}}function m(y){try{p(i.throw(y))}catch(v){u(v)}}function p(y){y.done?c(y.value):l(y.value).then(d,m)}p((i=i.apply(n,t||[])).next())})}const U1=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);class Xd extends Error{constructor(t,r="FunctionsError",i){super(t),this.name=r,this.context=i}}class D1 extends Xd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Tg extends Xd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Cg extends Xd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var kd;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(kd||(kd={}));class z1{constructor(t,{headers:r={},customFetch:i,region:l=kd.Any}={}){this.url=t,this.headers=r,this.region=l,this.fetch=U1(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return M1(this,arguments,void 0,function*(r,i={}){var l;let c,u;try{const{headers:d,method:m,body:p,signal:y,timeout:v}=i;let b={},{region:w}=i;w||(w=this.region);const x=new URL(`${this.url}/${r}`);w&&w!=="any"&&(b["x-region"]=w,x.searchParams.set("forceFunctionRegion",w));let S;p&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",S=p):typeof p=="string"?(b["Content-Type"]="text/plain",S=p):typeof FormData<"u"&&p instanceof FormData?S=p:(b["Content-Type"]="application/json",S=JSON.stringify(p)):S=p;let A=y;v&&(u=new AbortController,c=setTimeout(()=>u.abort(),v),y?(A=u.signal,y.addEventListener("abort",()=>u.abort())):A=u.signal);const T=yield this.fetch(x.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),d),body:S,signal:A}).catch(K=>{throw new D1(K)}),U=T.headers.get("x-relay-error");if(U&&U==="true")throw new Tg(T);if(!T.ok)throw new Cg(T);let M=((l=T.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),$;return M==="application/json"?$=yield T.json():M==="application/octet-stream"||M==="application/pdf"?$=yield T.blob():M==="text/event-stream"?$=T:M==="multipart/form-data"?$=yield T.formData():$=yield T.text(),{data:$,error:null,response:T}}catch(d){return{data:null,error:d,response:d instanceof Cg||d instanceof Tg?d.context:void 0}}finally{c&&clearTimeout(c)}})}}var L1=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},$1=class{constructor(n){var t,r;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(t=n.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=n.signal,this.isMaybeSingle=(r=n.isMaybeSingle)!==null&&r!==void 0?r:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,t){return this.headers=new Headers(this.headers),this.headers.set(n,t),this}then(n,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let l=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let u=null,d=null,m=null,p=c.status,y=c.statusText;if(c.ok){var v,b;if(r.method!=="HEAD"){var w;const T=await c.text();T===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((w=r.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?d=T:d=JSON.parse(T))}const S=(v=r.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),A=(b=c.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");S&&A&&A.length>1&&(m=parseInt(A[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,m=null,p=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var x;const S=await c.text();try{u=JSON.parse(S),Array.isArray(u)&&c.status===404&&(d=[],u=null,p=200,y="OK")}catch{c.status===404&&S===""?(p=204,y="No Content"):u={message:S}}if(u&&r.isMaybeSingle&&(!(u==null||(x=u.details)===null||x===void 0)&&x.includes("0 rows"))&&(u=null,p=200,y="OK"),u&&r.shouldThrowOnError)throw new L1(u)}return{error:u,data:d,count:m,status:p,statusText:y}});return this.shouldThrowOnError||(l=l.catch(c=>{var u;let d="";const m=c?.cause;if(m){var p,y,v,b;const x=(p=m?.message)!==null&&p!==void 0?p:"",S=(y=m?.code)!==null&&y!==void 0?y:"";d=`${(v=c?.name)!==null&&v!==void 0?v:"FetchError"}: ${c?.message}`,d+=`

Caused by: ${(b=m?.name)!==null&&b!==void 0?b:"Error"}: ${x}`,S&&(d+=` (${S})`),m?.stack&&(d+=`
${m.stack}`)}else{var w;d=(w=c?.stack)!==null&&w!==void 0?w:""}return{error:{message:`${(u=c?.name)!==null&&u!==void 0?u:"FetchError"}: ${c?.message}`,details:d,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(n,t)}returns(){return this}overrideTypes(){return this}},B1=class extends $1{select(n){let t=!1;const r=(n??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:l=i}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${n}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${n}`),this}range(n,t,{foreignTable:r,referencedTable:i=r}={}){const l=typeof i>"u"?"offset":`${i}.offset`,c=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(l,`${n}`),this.url.searchParams.set(c,`${t-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:l=!1,format:c="text"}={}){var u;const d=[n?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,l?"wal":null].filter(Boolean).join("|"),m=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${m}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const Rg=new RegExp("[,()]");var ys=class extends B1{eq(n,t){return this.url.searchParams.append(n,`eq.${t}`),this}neq(n,t){return this.url.searchParams.append(n,`neq.${t}`),this}gt(n,t){return this.url.searchParams.append(n,`gt.${t}`),this}gte(n,t){return this.url.searchParams.append(n,`gte.${t}`),this}lt(n,t){return this.url.searchParams.append(n,`lt.${t}`),this}lte(n,t){return this.url.searchParams.append(n,`lte.${t}`),this}like(n,t){return this.url.searchParams.append(n,`like.${t}`),this}likeAllOf(n,t){return this.url.searchParams.append(n,`like(all).{${t.join(",")}}`),this}likeAnyOf(n,t){return this.url.searchParams.append(n,`like(any).{${t.join(",")}}`),this}ilike(n,t){return this.url.searchParams.append(n,`ilike.${t}`),this}ilikeAllOf(n,t){return this.url.searchParams.append(n,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(n,t){return this.url.searchParams.append(n,`ilike(any).{${t.join(",")}}`),this}regexMatch(n,t){return this.url.searchParams.append(n,`match.${t}`),this}regexIMatch(n,t){return this.url.searchParams.append(n,`imatch.${t}`),this}is(n,t){return this.url.searchParams.append(n,`is.${t}`),this}isDistinct(n,t){return this.url.searchParams.append(n,`isdistinct.${t}`),this}in(n,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&Rg.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(n,`in.(${r})`),this}notIn(n,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&Rg.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(n,`not.in.(${r})`),this}contains(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cs.{${t.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(t)}`),this}containedBy(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cd.{${t.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(t)}`),this}rangeGt(n,t){return this.url.searchParams.append(n,`sr.${t}`),this}rangeGte(n,t){return this.url.searchParams.append(n,`nxl.${t}`),this}rangeLt(n,t){return this.url.searchParams.append(n,`sl.${t}`),this}rangeLte(n,t){return this.url.searchParams.append(n,`nxr.${t}`),this}rangeAdjacent(n,t){return this.url.searchParams.append(n,`adj.${t}`),this}overlaps(n,t){return typeof t=="string"?this.url.searchParams.append(n,`ov.${t}`):this.url.searchParams.append(n,`ov.{${t.join(",")}}`),this}textSearch(n,t,{config:r,type:i}={}){let l="";i==="plain"?l="pl":i==="phrase"?l="ph":i==="websearch"&&(l="w");const c=r===void 0?"":`(${r})`;return this.url.searchParams.append(n,`${l}fts${c}.${t}`),this}match(n){return Object.entries(n).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(n,t,r){return this.url.searchParams.append(n,`not.${t}.${r}`),this}or(n,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${n})`),this}filter(n,t,r){return this.url.searchParams.append(n,`${t}.${r}`),this}},H1=class{constructor(n,{headers:t={},schema:r,fetch:i}){this.url=n,this.headers=new Headers(t),this.schema=r,this.fetch=i}select(n,t){const{head:r=!1,count:i}=t??{},l=r?"HEAD":"GET";let c=!1;const u=(n??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",u),i&&this.headers.append("Prefer",`count=${i}`),new ys({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:t,defaultToNull:r=!0}={}){var i;const l="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const c=n.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new ys({method:l,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(n,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),i&&this.headers.append("Prefer",`count=${i}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const d=n.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(d.length>0){const m=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",m.join(","))}}return new ys({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(n,{count:t}={}){var r;const i="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new ys({method:i,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:n}={}){var t;const r="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new ys({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},q1=class ey{constructor(t,{headers:r={},schema:i,fetch:l}={}){this.url=t,this.headers=new Headers(r),this.schemaName=i,this.fetch=l}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new H1(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new ey(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:i=!1,get:l=!1,count:c}={}){var u;let d;const m=new URL(`${this.url}/rpc/${t}`);let p;i||l?(d=i?"HEAD":"GET",Object.entries(r).filter(([v,b])=>b!==void 0).map(([v,b])=>[v,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([v,b])=>{m.searchParams.append(v,b)})):(d="POST",p=r);const y=new Headers(this.headers);return c&&y.set("Prefer",`count=${c}`),new ys({method:d,url:m,headers:y,schema:this.schemaName,body:p,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};class I1{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const i=r.node,l=parseInt(i.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const i=this.getWebSocketConstructor();return new i(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const P1="2.89.0",G1=`realtime-js/${P1}`,ty="1.0.0",K1="2.0.0",Og=ty,jd=1e4,V1=1e3,Y1=100;var Kn;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Kn||(Kn={}));var Et;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Et||(Et={}));var qa;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(qa||(qa={}));var Nd;(function(n){n.websocket="websocket"})(Nd||(Nd={}));var yr;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(yr||(yr={}));class F1{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,i;const l=(i=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,l)}_encodeJsonUserBroadcastPush(t){var r,i;const l=(i=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:{},u=new TextEncoder().encode(JSON.stringify(l)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(t,r,i){var l,c;const u=t.topic,d=(l=t.ref)!==null&&l!==void 0?l:"",m=(c=t.join_ref)!==null&&c!==void 0?c:"",p=t.payload.event,y=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},v=Object.keys(y).length===0?"":JSON.stringify(y);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+d.length+u.length+p.length+v.length,w=new ArrayBuffer(this.HEADER_LENGTH+b);let x=new DataView(w),S=0;x.setUint8(S++,this.KINDS.userBroadcastPush),x.setUint8(S++,m.length),x.setUint8(S++,d.length),x.setUint8(S++,u.length),x.setUint8(S++,p.length),x.setUint8(S++,v.length),x.setUint8(S++,r),Array.from(m,T=>x.setUint8(S++,T.charCodeAt(0))),Array.from(d,T=>x.setUint8(S++,T.charCodeAt(0))),Array.from(u,T=>x.setUint8(S++,T.charCodeAt(0))),Array.from(p,T=>x.setUint8(S++,T.charCodeAt(0))),Array.from(v,T=>x.setUint8(S++,T.charCodeAt(0)));var A=new Uint8Array(w.byteLength+i.byteLength);return A.set(new Uint8Array(w),0),A.set(new Uint8Array(i),w.byteLength),A.buffer}decode(t,r){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return r(i)}if(typeof t=="string"){const i=JSON.parse(t),[l,c,u,d,m]=i;return r({join_ref:l,ref:c,topic:u,event:d,payload:m})}return r({})}_binaryDecode(t){const r=new DataView(t),i=r.getUint8(0),l=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,l)}}_decodeUserBroadcast(t,r,i){const l=r.getUint8(1),c=r.getUint8(2),u=r.getUint8(3),d=r.getUint8(4);let m=this.HEADER_LENGTH+4;const p=i.decode(t.slice(m,m+l));m=m+l;const y=i.decode(t.slice(m,m+c));m=m+c;const v=i.decode(t.slice(m,m+u));m=m+u;const b=t.slice(m,t.byteLength),w=d===this.JSON_ENCODING?JSON.parse(i.decode(b)):b,x={type:this.BROADCAST_EVENT,event:y,payload:w};return u>0&&(x.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>r.includes(i)))}}class ay{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ze||(Ze={}));const Mg=(n,t,r={})=>{var i;const l=(i=r.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((c,u)=>(c[u]=W1(u,n,t,l),c),{}):{}},W1=(n,t,r,i)=>{const l=t.find(d=>d.name===n),c=l?.type,u=r[n];return c&&!i.includes(c)?ny(c,u):Ad(u)},ny=(n,t)=>{if(n.charAt(0)==="_"){const r=n.slice(1,n.length);return Z1(t,r)}switch(n){case Ze.bool:return X1(t);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return Q1(t);case Ze.json:case Ze.jsonb:return J1(t);case Ze.timestamp:return e_(t);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return Ad(t);default:return Ad(t)}},Ad=n=>n,X1=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Q1=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},J1=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},Z1=(n,t)=>{if(typeof n!="string")return n;const r=n.length-1,i=n[r];if(n[0]==="{"&&i==="}"){let c;const u=n.slice(1,r);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(d=>ny(t,d))}return n},e_=n=>typeof n=="string"?n.replace(" ","T"):n,ry=n=>{const t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class ud{constructor(t,r,i={},l=jd){this.channel=t,this.event=r,this.payload=i,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var i;return this._hasReceived(t)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ug;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Ug||(Ug={}));class Si{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},l=>{const{onJoin:c,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Si.syncState(this.state,l,c,u),this.pendingDiffs.forEach(m=>{this.state=Si.syncDiff(this.state,m,c,u)}),this.pendingDiffs=[],d()}),this.channel._on(i.diff,{},l=>{const{onJoin:c,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Si.syncDiff(this.state,l,c,u),d())}),this.onJoin((l,c,u)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:u})}),this.onLeave((l,c,u)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,i,l){const c=this.cloneDeep(t),u=this.transformState(r),d={},m={};return this.map(c,(p,y)=>{u[p]||(m[p]=y)}),this.map(u,(p,y)=>{const v=c[p];if(v){const b=y.map(A=>A.presence_ref),w=v.map(A=>A.presence_ref),x=y.filter(A=>w.indexOf(A.presence_ref)<0),S=v.filter(A=>b.indexOf(A.presence_ref)<0);x.length>0&&(d[p]=x),S.length>0&&(m[p]=S)}else d[p]=y}),this.syncDiff(c,{joins:d,leaves:m},i,l)}static syncDiff(t,r,i,l){const{joins:c,leaves:u}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),l||(l=()=>{}),this.map(c,(d,m)=>{var p;const y=(p=t[d])!==null&&p!==void 0?p:[];if(t[d]=this.cloneDeep(m),y.length>0){const v=t[d].map(w=>w.presence_ref),b=y.filter(w=>v.indexOf(w.presence_ref)<0);t[d].unshift(...b)}i(d,y,m)}),this.map(u,(d,m)=>{let p=t[d];if(!p)return;const y=m.map(v=>v.presence_ref);p=p.filter(v=>y.indexOf(v.presence_ref)<0),t[d]=p,l(d,p,m),p.length===0&&delete t[d]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(i=>r(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,i)=>{const l=t[i];return"metas"in l?r[i]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[i]=l,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Dg;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Dg||(Dg={}));var Ei;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Ei||(Ei={}));var yn;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(yn||(yn={}));class ws{constructor(t,r={config:{}},i){var l,c;if(this.topic=t,this.params=r,this.socket=i,this.bindings={},this.state=Et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ud(this,qa.join,this.params,this.timeout),this.rejoinTimer=new ay(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Et.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qa.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new Si(this),this.broadcastEndpointURL=ry(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var i,l,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Et.closed){const{config:{broadcast:u,presence:d,private:m}}=this.params,p=(l=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(w=>w.filter))!==null&&l!==void 0?l:[],y=!!this.bindings[Ei.PRESENCE]&&this.bindings[Ei.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,v={},b={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:y}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(w=>t?.(yn.CHANNEL_ERROR,w)),this._onClose(()=>t?.(yn.CLOSED)),this.updateJoinPayload(Object.assign({config:b},v)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:w})=>{var x;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){t?.(yn.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,A=(x=S?.length)!==null&&x!==void 0?x:0,T=[];for(let U=0;U<A;U++){const M=S[U],{filter:{event:$,schema:K,table:R,filter:D}}=M,E=w&&w[U];if(E&&E.event===$&&ws.isFilterValueEqual(E.schema,K)&&ws.isFilterValueEqual(E.table,R)&&ws.isFilterValueEqual(E.filter,D))T.push(Object.assign(Object.assign({},M),{id:E.id}));else{this.unsubscribe(),this.state=Et.errored,t?.(yn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,t&&t(yn.SUBSCRIBED);return}}).receive("error",w=>{this.state=Et.errored,t?.(yn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{t?.(yn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,i){return this.state===Et.joined&&t===Ei.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,i)}async httpSend(t,r,i={}){var l;if(r==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(l=i.timeout)!==null&&l!==void 0?l:this.timeout);if(d.status===202)return{success:!0};let m=d.statusText;try{const p=await d.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(t,r={}){var i,l;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:u}=t,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((l=p.body)===null||l===void 0?void 0:l.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,d,m;const p=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((m=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||m===void 0)&&m.ack)&&c("ok"),p.receive("ok",()=>c("ok")),p.receive("error",()=>c("error")),p.receive("timeout",()=>c("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Et.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qa.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(l=>{i=new ud(this,qa.leave,{},t),i.receive("ok",()=>{r(),l("ok")}).receive("timeout",()=>{r(),l("timed out")}).receive("error",()=>{l("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Et.closed,this.bindings={}}async _fetchWithTimeout(t,r,i){const l=new AbortController,c=setTimeout(()=>l.abort(),i),u=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(c),u}_push(t,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new ud(this,t,r,i);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Y1){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,i){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,i){var l,c;const u=t.toLocaleLowerCase(),{close:d,error:m,leave:p,join:y}=qa;if(i&&[d,m,p,y].indexOf(u)>=0&&i!==this._joinRef())return;let b=this._onMessage(u,r,i);if(r&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(w=>{var x,S,A;return((x=w.filter)===null||x===void 0?void 0:x.event)==="*"||((A=(S=w.filter)===null||S===void 0?void 0:S.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===u}).map(w=>w.callback(b,i)):(c=this.bindings[u])===null||c===void 0||c.filter(w=>{var x,S,A,T,U,M;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in w){const $=w.id,K=(x=w.filter)===null||x===void 0?void 0:x.event;return $&&((S=r.ids)===null||S===void 0?void 0:S.includes($))&&(K==="*"||K?.toLocaleLowerCase()===((A=r.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const $=(U=(T=w?.filter)===null||T===void 0?void 0:T.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return $==="*"||$===((M=r?.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===u}).map(w=>{if(typeof b=="object"&&"ids"in b){const x=b.data,{schema:S,table:A,commit_timestamp:T,type:U,errors:M}=x;b=Object.assign(Object.assign({},{schema:S,table:A,commit_timestamp:T,eventType:U,new:{},old:{},errors:M}),this._getPayloadRecords(x))}w.callback(b,i)})}_isClosed(){return this.state===Et.closed}_isJoined(){return this.state===Et.joined}_isJoining(){return this.state===Et.joining}_isLeaving(){return this.state===Et.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,i){const l=t.toLocaleLowerCase(),c={type:l,filter:r,callback:i};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(t,r){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===i&&ws.isEqual(l.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const i in t)if(t[i]!==r[i])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(qa.close,{},t)}_onError(t){this._on(qa.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Et.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Mg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Mg(t.columns,t.old_record)),r}}const dd=()=>{},lo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},t_=[1e3,2e3,5e3,1e4],a_=1e4,n_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class r_{constructor(t,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jd,this.transport=null,this.heartbeatIntervalMs=lo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dd,this.ref=0,this.reconnectTimer=null,this.vsn=Og,this.logger=dd,this.conn=null,this.sendBuffer=[],this.serializer=new F1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>l?(...c)=>l(...c):(...c)=>fetch(...c),!(!((i=r?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Nd.websocket}`,this.httpEndpoint=ry(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=I1.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,i){this.logger(t,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Kn.connecting:return yr.Connecting;case Kn.open:return yr.Open;case Kn.closing:return yr.Closing;default:return yr.Closed}}isConnected(){return this.connectionState()===yr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const i=`realtime:${t}`,l=this.getChannels().find(c=>c.topic===i);if(l)return l;{const c=new ws(`realtime:${t}`,r,this);return this.channels.push(c),c}}push(t){const{topic:r,event:i,payload:l,ref:c}=t,u=()=>{this.encode(t,d=>{var m;(m=this.conn)===null||m===void 0||m.send(d)})};this.log("push",`${r} ${i} (${c})`,l),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(V1,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},lo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:l,payload:c,ref:u}=r,d=u?`(${u})`:"",m=c.status||"";this.log("receive",`${m} ${i} ${l} ${d}`.trim(),c),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(l,c,u)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Kn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Kn.open||this.conn.readyState===Kn.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(qa.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const i=t.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${t}${i}${l}`}_workerObjectUrl(t){let r;if(t)r=t;else{const i=new Blob([n_],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,i=!1;if(t)r=t,i=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(l){this.log("error","Error fetching access token from callback",l),r=this.accessTokenValue}else r=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(l=>{const c={access_token:r,version:G1};r&&l.updateJoinPayload(c),l.joinedOnce&&l._isJoined()&&l._push(qa.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(r)}catch(l){this.log("error",`error in ${t} callback`,l)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new ay(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},lo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,i,l,c,u,d,m,p,y,v,b,w;switch(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(i=t?.timeout)!==null&&i!==void 0?i:jd,this.heartbeatIntervalMs=(l=t?.heartbeatIntervalMs)!==null&&l!==void 0?l:lo.HEARTBEAT_INTERVAL,this.worker=(c=t?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(u=t?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=t?.heartbeatCallback)!==null&&d!==void 0?d:dd,this.vsn=(m=t?.vsn)!==null&&m!==void 0?m:Og,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=t?.reconnectAfterMs)!==null&&p!==void 0?p:(x=>t_[x-1]||a_),this.vsn){case ty:this.encode=(y=t?.encode)!==null&&y!==void 0?y:((x,S)=>S(JSON.stringify(x))),this.decode=(v=t?.decode)!==null&&v!==void 0?v:((x,S)=>S(JSON.parse(x)));break;case K1:this.encode=(b=t?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(w=t?.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var Ni=class extends Error{constructor(n,t){super(n),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function s_(n,t,r){const i=new URL(t,n);if(r)for(const[l,c]of Object.entries(r))c!==void 0&&i.searchParams.set(l,c);return i.toString()}async function i_(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function l_(n){const t=n.fetchImpl??globalThis.fetch;return{async request({method:r,path:i,query:l,body:c,headers:u}){const d=s_(n.baseUrl,i,l),m=await i_(n.auth),p=await t(d,{method:r,headers:{...c?{"Content-Type":"application/json"}:{},...m,...u},body:c?JSON.stringify(c):void 0}),y=await p.text(),v=(p.headers.get("content-type")||"").includes("application/json"),b=v&&y?JSON.parse(y):y;if(!p.ok){const w=v?b:void 0,x=w?.error;throw new Ni(x?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:x?.type,icebergCode:x?.code,details:w})}return{status:p.status,headers:p.headers,data:b}}}}function oo(n){return n.join("")}var o_=class{constructor(n,t=""){this.client=n,this.prefix=t}async listNamespaces(n){const t=n?{parent:oo(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(n,t){const r={namespace:n.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${oo(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${oo(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${oo(n.namespace)}`}),!0}catch(t){if(t instanceof Ni&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(n,t){try{return await this.createNamespace(n,t)}catch(r){if(r instanceof Ni&&r.status===409)return;throw r}}};function us(n){return n.join("")}var c_=class{constructor(n,t="",r){this.client=n,this.prefix=t,this.accessDelegation=r}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${us(n.namespace)}/tables`})).data.identifiers}async createTable(n,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${us(n.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(n,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${us(n.namespace)}/tables/${n.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(n,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${us(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(n){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${us(n.namespace)}/tables/${n.name}`,headers:t})).data.metadata}async tableExists(n){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${us(n.namespace)}/tables/${n.name}`,headers:t}),!0}catch(r){if(r instanceof Ni&&r.status===404)return!1;throw r}}async createTableIfNotExists(n,t){try{return await this.createTable(n,t)}catch(r){if(r instanceof Ni&&r.status===409)return await this.loadTable({namespace:n.namespace,name:t.name});throw r}}},u_=class{constructor(n){let t="v1";n.catalogName&&(t+=`/${n.catalogName}`);const r=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=l_({baseUrl:r,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new o_(this.client,t),this.tableOps=new c_(this.client,t,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,t){return this.namespaceOps.createNamespace(n,t)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,t){return this.tableOps.createTable(n,t)}async updateTable(n,t){return this.tableOps.updateTable(n,t)}async dropTable(n,t){await this.tableOps.dropTable(n,t)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,t){return this.namespaceOps.createNamespaceIfNotExists(n,t)}async createTableIfNotExists(n,t){return this.tableOps.createTableIfNotExists(n,t)}},Uo=class extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}};function ct(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var d_=class extends Uo{constructor(n,t,r){super(n),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Td=class extends Uo{constructor(n,t){super(n),this.name="StorageUnknownError",this.originalError=t}};const Qd=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),h_=()=>Response,Cd=n=>{if(Array.isArray(n))return n.map(r=>Cd(r));if(typeof n=="function"||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([r,i])=>{const l=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));t[l]=Cd(i)}),t},f_=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},m_=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function Ai(n){"@babel/helpers - typeof";return Ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ai(n)}function g_(n,t){if(Ai(n)!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,t);if(Ai(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function p_(n){var t=g_(n,"string");return Ai(t)=="symbol"?t:t+""}function y_(n,t,r){return(t=p_(t))in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function zg(n,t){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),r.push.apply(r,i)}return r}function Ee(n){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zg(Object(r),!0).forEach(function(i){y_(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):zg(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}const hd=n=>{var t;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(t=n.error)===null||t===void 0?void 0:t.message)||JSON.stringify(n)},v_=async(n,t,r)=>{n instanceof await h_()&&!r?.noResolveJson?n.json().then(i=>{const l=n.status||500,c=i?.statusCode||l+"";t(new d_(hd(i),l,c))}).catch(i=>{t(new Td(hd(i),i))}):t(new Td(hd(n),n))},b_=(n,t,r,i)=>{const l={method:n,headers:t?.headers||{}};return n==="GET"||!i?l:(f_(i)?(l.headers=Ee({"Content-Type":"application/json"},t?.headers),l.body=JSON.stringify(i)):l.body=i,t?.duplex&&(l.duplex=t.duplex),Ee(Ee({},l),r))};async function Ii(n,t,r,i,l,c){return new Promise((u,d)=>{n(r,b_(t,i,l,c)).then(m=>{if(!m.ok)throw m;return i?.noResolveJson?m:m.json()}).then(m=>u(m)).catch(m=>v_(m,d,i))})}async function Ti(n,t,r,i){return Ii(n,"GET",t,r,i)}async function Ha(n,t,r,i,l){return Ii(n,"POST",t,i,l,r)}async function Rd(n,t,r,i,l){return Ii(n,"PUT",t,i,l,r)}async function w_(n,t,r,i){return Ii(n,"HEAD",t,Ee(Ee({},r),{},{noResolveJson:!0}),i)}async function Jd(n,t,r,i,l){return Ii(n,"DELETE",t,i,l,r)}var x_=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t}then(n,t){return this.execute().then(n,t)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(ct(t))return{data:null,error:t};throw t}}};let sy;sy=Symbol.toStringTag;var __=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t,this[sy]="BlobDownloadBuilder",this.promise=null}asStream(){return new x_(this.downloadFn,this.shouldThrowOnError)}then(n,t){return this.getPromise().then(n,t)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(ct(t))return{data:null,error:t};throw t}}};const S_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Lg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var E_=class{constructor(n,t={},r,i){this.shouldThrowOnError=!1,this.url=n,this.headers=t,this.bucketId=r,this.fetch=Qd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(n,t,r,i){var l=this;try{let c;const u=Ee(Ee({},Lg),i);let d=Ee(Ee({},l.headers),n==="POST"&&{"x-upsert":String(u.upsert)});const m=u.metadata;typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),m&&c.append("metadata",l.encodeMetadata(m)),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.has("cacheControl")||c.append("cacheControl",u.cacheControl),m&&!c.has("metadata")&&c.append("metadata",l.encodeMetadata(m))):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,m&&(d["x-metadata"]=l.toBase64(l.encodeMetadata(m))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!u.duplex&&(u.duplex="half")),i?.headers&&(d=Ee(Ee({},d),i.headers));const p=l._removeEmptyFolders(t),y=l._getFinalPath(p),v=await(n=="PUT"?Rd:Ha)(l.fetch,`${l.url}/object/${y}`,c,Ee({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:v.Id,fullPath:v.Key},error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(ct(c))return{data:null,error:c};throw c}}async upload(n,t,r){return this.uploadOrUpdate("POST",n,t,r)}async uploadToSignedUrl(n,t,r,i){var l=this;const c=l._removeEmptyFolders(n),u=l._getFinalPath(c),d=new URL(l.url+`/object/upload/sign/${u}`);d.searchParams.set("token",t);try{let m;const p=Ee({upsert:Lg.upsert},i),y=Ee(Ee({},l.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&r instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",r)):typeof FormData<"u"&&r instanceof FormData?(m=r,m.append("cacheControl",p.cacheControl)):(m=r,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType),{data:{path:c,fullPath:(await Rd(l.fetch,d.toString(),m,{headers:y})).Key},error:null}}catch(m){if(l.shouldThrowOnError)throw m;if(ct(m))return{data:null,error:m};throw m}}async createSignedUploadUrl(n,t){var r=this;try{let i=r._getFinalPath(n);const l=Ee({},r.headers);t?.upsert&&(l["x-upsert"]="true");const c=await Ha(r.fetch,`${r.url}/object/upload/sign/${i}`,{},{headers:l}),u=new URL(r.url+c.url),d=u.searchParams.get("token");if(!d)throw new Uo("No token returned by API");return{data:{signedUrl:u.toString(),path:n,token:d},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(ct(i))return{data:null,error:i};throw i}}async update(n,t,r){return this.uploadOrUpdate("PUT",n,t,r)}async move(n,t,r){var i=this;try{return{data:await Ha(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:n,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:i.headers}),error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(ct(l))return{data:null,error:l};throw l}}async copy(n,t,r){var i=this;try{return{data:{path:(await Ha(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:n,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:i.headers})).Key},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(ct(l))return{data:null,error:l};throw l}}async createSignedUrl(n,t,r){var i=this;try{let l=i._getFinalPath(n),c=await Ha(i.fetch,`${i.url}/object/sign/${l}`,Ee({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:i.headers});const u=r?.download?`&download=${r.download===!0?"":r.download}`:"";return c={signedUrl:encodeURI(`${i.url}${c.signedURL}${u}`)},{data:c,error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(ct(l))return{data:null,error:l};throw l}}async createSignedUrls(n,t,r){var i=this;try{const l=await Ha(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:t,paths:n},{headers:i.headers}),c=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:l.map(u=>Ee(Ee({},u),{},{signedUrl:u.signedURL?encodeURI(`${i.url}${u.signedURL}${c}`):null})),error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(ct(l))return{data:null,error:l};throw l}}download(n,t){const r=typeof t?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(t?.transform||{}),l=i?`?${i}`:"",c=this._getFinalPath(n),u=()=>Ti(this.fetch,`${this.url}/${r}/${c}${l}`,{headers:this.headers,noResolveJson:!0});return new __(u,this.shouldThrowOnError)}async info(n){var t=this;const r=t._getFinalPath(n);try{return{data:Cd(await Ti(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(ct(i))return{data:null,error:i};throw i}}async exists(n){var t=this;const r=t._getFinalPath(n);try{return await w_(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(ct(i)&&i instanceof Td){const l=i.originalError;if([400,404].includes(l?.status))return{data:!1,error:i}}throw i}}getPublicUrl(n,t){const r=this._getFinalPath(n),i=[],l=t?.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&i.push(l);const c=typeof t?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(t?.transform||{});u!==""&&i.push(u);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}async remove(n){var t=this;try{return{data:await Jd(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:n},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async list(n,t,r){var i=this;try{const l=Ee(Ee(Ee({},S_),t),{},{prefix:n||""});return{data:await Ha(i.fetch,`${i.url}/object/list/${i.bucketId}`,l,{headers:i.headers},r),error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(ct(l))return{data:null,error:l};throw l}}async listV2(n,t){var r=this;try{const i=Ee({},n);return{data:await Ha(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,i,{headers:r.headers},t),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(ct(i))return{data:null,error:i};throw i}}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const t=[];return n.width&&t.push(`width=${n.width}`),n.height&&t.push(`height=${n.height}`),n.resize&&t.push(`resize=${n.resize}`),n.format&&t.push(`format=${n.format}`),n.quality&&t.push(`quality=${n.quality}`),t.join("&")}};const iy="2.89.0",ly={"X-Client-Info":`storage-js/${iy}`};var k_=class{constructor(n,t={},r,i){this.shouldThrowOnError=!1;const l=new URL(n);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Ee(Ee({},ly),t),this.fetch=Qd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(n){var t=this;try{const r=t.listBucketOptionsToQueryString(n);return{data:await Ti(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async getBucket(n){var t=this;try{return{data:await Ti(t.fetch,`${t.url}/bucket/${n}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async createBucket(n,t={public:!1}){var r=this;try{return{data:await Ha(r.fetch,`${r.url}/bucket`,{id:n,name:n,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(ct(i))return{data:null,error:i};throw i}}async updateBucket(n,t){var r=this;try{return{data:await Rd(r.fetch,`${r.url}/bucket/${n}`,{id:n,name:n,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(ct(i))return{data:null,error:i};throw i}}async emptyBucket(n){var t=this;try{return{data:await Ha(t.fetch,`${t.url}/bucket/${n}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async deleteBucket(n){var t=this;try{return{data:await Jd(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(n){const t={};return n&&("limit"in n&&(t.limit=String(n.limit)),"offset"in n&&(t.offset=String(n.offset)),n.search&&(t.search=n.search),n.sortColumn&&(t.sortColumn=n.sortColumn),n.sortOrder&&(t.sortOrder=n.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},j_=class{constructor(n,t={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Ee(Ee({},ly),t),this.fetch=Qd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var t=this;try{return{data:await Ha(t.fetch,`${t.url}/bucket`,{name:n},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async listBuckets(n){var t=this;try{const r=new URLSearchParams;n?.limit!==void 0&&r.set("limit",n.limit.toString()),n?.offset!==void 0&&r.set("offset",n.offset.toString()),n?.sortColumn&&r.set("sortColumn",n.sortColumn),n?.sortOrder&&r.set("sortOrder",n.sortOrder),n?.search&&r.set("search",n.search);const i=r.toString(),l=i?`${t.url}/bucket?${i}`:`${t.url}/bucket`;return{data:await Ti(t.fetch,l,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async deleteBucket(n){var t=this;try{return{data:await Jd(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}from(n){var t=this;if(!m_(n))throw new Uo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new u_({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(r,{get(l,c){const u=l[c];return typeof u!="function"?u:async(...d)=>{try{return{data:await u.apply(l,d),error:null}}catch(m){if(i)throw m;return{data:null,error:m}}}}})}};const Zd={"X-Client-Info":`storage-js/${iy}`,"Content-Type":"application/json"};var oy=class extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function fa(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var fd=class extends oy{constructor(n,t,r){super(n),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},N_=class extends oy{constructor(n,t){super(n),this.name="StorageVectorsUnknownError",this.originalError=t}};const eh=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),A_=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},$g=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),T_=async(n,t,r)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!r?.noResolveJson){const i=n.status||500,l=n;if(typeof l.json=="function")l.json().then(c=>{const u=c?.statusCode||c?.code||i+"";t(new fd($g(c),i,u))}).catch(()=>{const c=i+"";t(new fd(l.statusText||`HTTP ${i} error`,i,c))});else{const c=i+"";t(new fd(l.statusText||`HTTP ${i} error`,i,c))}}else t(new N_($g(n),n))},C_=(n,t,r,i)=>{const l={method:n,headers:t?.headers||{}};return i?(A_(i)?(l.headers=Ee({"Content-Type":"application/json"},t?.headers),l.body=JSON.stringify(i)):l.body=i,Ee(Ee({},l),r)):l};async function R_(n,t,r,i,l,c){return new Promise((u,d)=>{n(r,C_(t,i,l,c)).then(m=>{if(!m.ok)throw m;if(i?.noResolveJson)return m;const p=m.headers.get("content-type");return!p||!p.includes("application/json")?{}:m.json()}).then(m=>u(m)).catch(m=>T_(m,d,i))})}async function ma(n,t,r,i,l){return R_(n,"POST",t,i,l,r)}var O_=class{constructor(n,t={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Ee(Ee({},Zd),t),this.fetch=eh(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(n){var t=this;try{return{data:await ma(t.fetch,`${t.url}/CreateIndex`,n,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fa(r))return{data:null,error:r};throw r}}async getIndex(n,t){var r=this;try{return{data:await ma(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:n,indexName:t},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(fa(i))return{data:null,error:i};throw i}}async listIndexes(n){var t=this;try{return{data:await ma(t.fetch,`${t.url}/ListIndexes`,n,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fa(r))return{data:null,error:r};throw r}}async deleteIndex(n,t){var r=this;try{return{data:await ma(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:n,indexName:t},{headers:r.headers})||{},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(fa(i))return{data:null,error:i};throw i}}},M_=class{constructor(n,t={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Ee(Ee({},Zd),t),this.fetch=eh(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(n){var t=this;try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await ma(t.fetch,`${t.url}/PutVectors`,n,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fa(r))return{data:null,error:r};throw r}}async getVectors(n){var t=this;try{return{data:await ma(t.fetch,`${t.url}/GetVectors`,n,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fa(r))return{data:null,error:r};throw r}}async listVectors(n){var t=this;try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:await ma(t.fetch,`${t.url}/ListVectors`,n,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fa(r))return{data:null,error:r};throw r}}async queryVectors(n){var t=this;try{return{data:await ma(t.fetch,`${t.url}/QueryVectors`,n,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fa(r))return{data:null,error:r};throw r}}async deleteVectors(n){var t=this;try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await ma(t.fetch,`${t.url}/DeleteVectors`,n,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fa(r))return{data:null,error:r};throw r}}},U_=class{constructor(n,t={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Ee(Ee({},Zd),t),this.fetch=eh(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var t=this;try{return{data:await ma(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fa(r))return{data:null,error:r};throw r}}async getBucket(n){var t=this;try{return{data:await ma(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:n},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fa(r))return{data:null,error:r};throw r}}async listBuckets(n={}){var t=this;try{return{data:await ma(t.fetch,`${t.url}/ListVectorBuckets`,n,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fa(r))return{data:null,error:r};throw r}}async deleteBucket(n){var t=this;try{return{data:await ma(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fa(r))return{data:null,error:r};throw r}}},D_=class extends U_{constructor(n,t={}){super(n,t.headers||{},t.fetch)}from(n){return new z_(this.url,this.headers,n,this.fetch)}async createBucket(n){var t=()=>super.createBucket,r=this;return t().call(r,n)}async getBucket(n){var t=()=>super.getBucket,r=this;return t().call(r,n)}async listBuckets(n={}){var t=()=>super.listBuckets,r=this;return t().call(r,n)}async deleteBucket(n){var t=()=>super.deleteBucket,r=this;return t().call(r,n)}},z_=class extends O_{constructor(n,t,r,i){super(n,t,i),this.vectorBucketName=r}async createIndex(n){var t=()=>super.createIndex,r=this;return t().call(r,Ee(Ee({},n),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(n={}){var t=()=>super.listIndexes,r=this;return t().call(r,Ee(Ee({},n),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(n){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,n)}async deleteIndex(n){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,n)}index(n){return new L_(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},L_=class extends M_{constructor(n,t,r,i,l){super(n,t,l),this.vectorBucketName=r,this.indexName=i}async putVectors(n){var t=()=>super.putVectors,r=this;return t().call(r,Ee(Ee({},n),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(n){var t=()=>super.getVectors,r=this;return t().call(r,Ee(Ee({},n),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(n={}){var t=()=>super.listVectors,r=this;return t().call(r,Ee(Ee({},n),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(n){var t=()=>super.queryVectors,r=this;return t().call(r,Ee(Ee({},n),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(n){var t=()=>super.deleteVectors,r=this;return t().call(r,Ee(Ee({},n),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},$_=class extends k_{constructor(n,t={},r,i){super(n,t,r,i)}from(n){return new E_(this.url,this.headers,n,this.fetch)}get vectors(){return new D_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new j_(this.url+"/iceberg",this.headers,this.fetch)}};const cy="2.89.0",vs=30*1e3,Od=3,md=Od*vs,B_="http://localhost:9999",H_="supabase.auth.token",q_={"X-Client-Info":`gotrue-js/${cy}`},Md="X-Supabase-Api-Version",uy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},I_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,P_=600*1e3;class Ci extends Error{constructor(t,r,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function be(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class G_ extends Ci{constructor(t,r,i){super(t,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function K_(n){return be(n)&&n.name==="AuthApiError"}class vr extends Ci{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class wn extends Ci{constructor(t,r,i,l){super(t,i,l),this.name=r,this.status=i}}class ha extends wn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function V_(n){return be(n)&&n.name==="AuthSessionMissingError"}class ds extends wn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class co extends wn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class uo extends wn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Y_(n){return be(n)&&n.name==="AuthImplicitGrantRedirectError"}class Bg extends wn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class F_ extends wn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ud extends wn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function gd(n){return be(n)&&n.name==="AuthRetryableFetchError"}class Hg extends wn{constructor(t,r,i){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class Dd extends wn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const _o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qg=` 	
\r=`.split(""),W_=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<qg.length;t+=1)n[qg[t].charCodeAt(0)]=-2;for(let t=0;t<_o.length;t+=1)n[_o[t].charCodeAt(0)]=t;return n})();function Ig(n,t,r){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;r(_o[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;r(_o[i]),t.queuedBits-=6}}function dy(n,t,r){const i=W_[n];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Pg(n){const t=[],r=u=>{t.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=u=>{J_(u,i,r)};for(let u=0;u<n.length;u+=1)dy(n.charCodeAt(u),l,c);return t.join("")}function X_(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Q_(n,t){for(let r=0;r<n.length;r+=1){let i=n.charCodeAt(r);if(i>55295&&i<=56319){const l=(i-55296)*1024&65535;i=(n.charCodeAt(r+1)-56320&65535|l)+65536,r+=1}X_(i,t)}}function J_(n,t,r){if(t.utf8seq===0){if(n<=127){r(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function _s(n){const t=[],r={queue:0,queuedBits:0},i=l=>{t.push(l)};for(let l=0;l<n.length;l+=1)dy(n.charCodeAt(l),r,i);return new Uint8Array(t)}function Z_(n){const t=[];return Q_(n,r=>t.push(r)),new Uint8Array(t)}function wr(n){const t=[],r={queue:0,queuedBits:0},i=l=>{t.push(l)};return n.forEach(l=>Ig(l,r,i)),Ig(null,r,i),t.join("")}function e2(n){return Math.round(Date.now()/1e3)+n}function t2(){return Symbol("auth-callback")}const Ut=()=>typeof window<"u"&&typeof document<"u",mr={tested:!1,writable:!1},hy=()=>{if(!Ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mr.tested)return mr.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),mr.tested=!0,mr.writable=!0}catch{mr.tested=!0,mr.writable=!1}return mr.writable};function a2(n){const t={},r=new URL(n);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,c)=>{t[c]=l})}catch{}return r.searchParams.forEach((i,l)=>{t[l]=i}),t}const fy=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),n2=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",bs=async(n,t,r)=>{await n.setItem(t,JSON.stringify(r))},gr=async(n,t)=>{const r=await n.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Mt=async(n,t)=>{await n.removeItem(t)};class Do{constructor(){this.promise=new Do.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Do.promiseConstructor=Promise;function pd(n){const t=n.split(".");if(t.length!==3)throw new Dd("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!I_.test(t[i]))throw new Dd("JWT not in base64url format");return{header:JSON.parse(Pg(t[0])),payload:JSON.parse(Pg(t[1])),signature:_s(t[2]),raw:{header:t[0],payload:t[1]}}}async function r2(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function s2(n,t){return new Promise((i,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await n(c);if(!t(c,null,u)){i(u);return}}catch(u){if(!t(c,u)){l(u);return}}})()})}function i2(n){return("0"+n.toString(16)).substr(-2)}function l2(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let l="";for(let c=0;c<56;c++)l+=r.charAt(Math.floor(Math.random()*i));return l}return crypto.getRandomValues(t),Array.from(t,i2).join("")}async function o2(n){const r=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",r),l=new Uint8Array(i);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function c2(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const r=await o2(n);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function hs(n,t,r=!1){const i=l2();let l=i;r&&(l+="/PASSWORD_RECOVERY"),await bs(n,`${t}-code-verifier`,l);const c=await c2(i);return[c,i===c?"plain":"s256"]}const u2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function d2(n){const t=n.headers.get(Md);if(!t||!t.match(u2))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function h2(n){if(!n)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function f2(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const m2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function fs(n){if(!m2.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function yd(){const n={};return new Proxy(n,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function g2(n,t){return new Proxy(n,{get:(r,i,l)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const c=i.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,i,l)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,i,l)}})}function Gg(n){return JSON.parse(JSON.stringify(n))}const pr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),p2=[502,503,504];async function Kg(n){var t;if(!n2(n))throw new Ud(pr(n),0);if(p2.includes(n.status))throw new Ud(pr(n),n.status);let r;try{r=await n.json()}catch(c){throw new vr(pr(c),c)}let i;const l=d2(n);if(l&&l.getTime()>=uy["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new Hg(pr(r),n.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new ha}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new Hg(pr(r),n.status,r.weak_password.reasons);throw new G_(pr(r),n.status||500,i)}const y2=(n,t,r,i)=>{const l={method:n,headers:t?.headers||{}};return n==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),l.body=JSON.stringify(i),Object.assign(Object.assign({},l),r))};async function Se(n,t,r,i){var l;const c=Object.assign({},i?.headers);c[Md]||(c[Md]=uy["2024-01-01"].name),i?.jwt&&(c.Authorization=`Bearer ${i.jwt}`);const u=(l=i?.query)!==null&&l!==void 0?l:{};i?.redirectTo&&(u.redirect_to=i.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",m=await v2(n,t,r+d,{headers:c,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(m):{data:Object.assign({},m),error:null}}async function v2(n,t,r,i,l,c){const u=y2(t,i,l,c);let d;try{d=await n(r,Object.assign({},u))}catch(m){throw console.error(m),new Ud(pr(m),0)}if(d.ok||await Kg(d),i?.noResolveJson)return d;try{return await d.json()}catch(m){await Kg(m)}}function $a(n){var t;let r=null;x2(n)&&(r=Object.assign({},n),n.expires_at||(r.expires_at=e2(n.expires_in)));const i=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:r,user:i},error:null}}function Vg(n){const t=$a(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(t.data.weak_password=n.weak_password),t}function Fn(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function b2(n){return{data:n,error:null}}function w2(n){const{action_link:t,email_otp:r,hashed_token:i,redirect_to:l,verification_type:c}=n,u=Mo(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:r,hashed_token:i,redirect_to:l,verification_type:c},m=Object.assign({},u);return{data:{properties:d,user:m},error:null}}function Yg(n){return n}function x2(n){return n.access_token&&n.refresh_token&&n.expires_in}const vd=["global","local","others"];class _2{constructor({url:t="",headers:r={},fetch:i}){this.url=t,this.headers=r,this.fetch=fy(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=vd[0]){if(vd.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vd.join(", ")}`);try{return await Se(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(be(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,r={}){try{return await Se(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Fn})}catch(i){if(be(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:r}=t,i=Mo(t,["options"]),l=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(l.new_email=i?.newEmail,delete l.newEmail),await Se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:w2,redirectTo:r?.redirectTo})}catch(r){if(be(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Fn})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,i,l,c,u,d,m;try{const p={nextPage:null,lastPage:0,total:0},y=await Se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(c=(l=t?.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:Yg});if(y.error)throw y.error;const v=await y.json(),b=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(m=(d=y.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(x=>{const S=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(x.split(";")[1].split("=")[1]);p[`${A}Page`]=S}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},v),p),error:null}}catch(p){if(be(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){fs(t);try{return await Se(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Fn})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){fs(t);try{return await Se(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Fn})}catch(i){if(be(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,r=!1){fs(t);try{return await Se(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Fn})}catch(i){if(be(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){fs(t.userId);try{const{data:r,error:i}=await Se(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:i}}catch(r){if(be(r))return{data:null,error:r};throw r}}async _deleteFactor(t){fs(t.userId),fs(t.id);try{return{data:await Se(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,i,l,c,u,d,m;try{const p={nextPage:null,lastPage:0,total:0},y=await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(c=(l=t?.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:Yg});if(y.error)throw y.error;const v=await y.json(),b=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(m=(d=y.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(x=>{const S=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(x.split(";")[1].split("=")[1]);p[`${A}Page`]=S}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},v),p),error:null}}catch(p){if(be(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(be(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(be(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(be(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await Se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(be(r))return{data:null,error:r};throw r}}}function Fg(n={}){return{getItem:t=>n[t]||null,setItem:(t,r)=>{n[t]=r},removeItem:t=>{delete n[t]}}}const ms={debug:!!(globalThis&&hy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class my extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class S2 extends my{}async function E2(n,t,r){ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),ms.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async l=>{if(l){ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,l.name);try{return await r()}finally{ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,l.name)}}else{if(t===0)throw ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new S2(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(ms.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function k2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function gy(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function j2(n){return parseInt(n,16)}function N2(n){const t=new TextEncoder().encode(n);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function A2(n){var t;const{chainId:r,domain:i,expirationTime:l,issuedAt:c=new Date,nonce:u,notBefore:d,requestId:m,resources:p,scheme:y,uri:v,version:b}=n;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const w=gy(n.address),x=y?`${y}://${i}`:i,S=n.statement?`${n.statement}
`:"",A=`${x} wants you to sign in with your Ethereum account:
${w}

${S}`;let T=`URI: ${v}
Version: ${b}
Chain ID: ${r}${u?`
Nonce: ${u}`:""}
Issued At: ${c.toISOString()}`;if(l&&(T+=`
Expiration Time: ${l.toISOString()}`),d&&(T+=`
Not Before: ${d.toISOString()}`),m&&(T+=`
Request ID: ${m}`),p){let U=`
Resources:`;for(const M of p){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);U+=`
- ${M}`}T+=U}return`${A}
${T}`}class _t extends Error{constructor({message:t,code:r,cause:i,name:l}){var c;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(c=l??(i instanceof Error?i.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=r}}class So extends _t{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function T2({error:n,options:t}){var r,i,l;const{publicKey:c}=t;if(!c)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _t({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((r=c.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new _t({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((i=c.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new _t({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((l=c.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new _t({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new _t({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new _t({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return c.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new _t({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new _t({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const u=window.location.hostname;if(py(u)){if(c.rp.id!==u)return new _t({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new _t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new _t({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new _t({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new _t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function C2({error:n,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _t({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new _t({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const i=window.location.hostname;if(py(i)){if(r.rpId!==i)return new _t({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new _t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new _t({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new _t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class R2{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const O2=new R2;function M2(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:t,user:r,excludeCredentials:i}=n,l=Mo(n,["challenge","user","excludeCredentials"]),c=_s(t).buffer,u=Object.assign(Object.assign({},r),{id:_s(r.id).buffer}),d=Object.assign(Object.assign({},l),{challenge:c,user:u});if(i&&i.length>0){d.excludeCredentials=new Array(i.length);for(let m=0;m<i.length;m++){const p=i[m];d.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:_s(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return d}function U2(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:t,allowCredentials:r}=n,i=Mo(n,["challenge","allowCredentials"]),l=_s(t).buffer,c=Object.assign(Object.assign({},i),{challenge:l});if(r&&r.length>0){c.allowCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const d=r[u];c.allowCredentials[u]=Object.assign(Object.assign({},d),{id:_s(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return c}function D2(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const r=n;return{id:n.id,rawId:n.id,response:{attestationObject:wr(new Uint8Array(n.response.attestationObject)),clientDataJSON:wr(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function z2(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const r=n,i=n.getClientExtensionResults(),l=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:wr(new Uint8Array(l.authenticatorData)),clientDataJSON:wr(new Uint8Array(l.clientDataJSON)),signature:wr(new Uint8Array(l.signature)),userHandle:l.userHandle?wr(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function py(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Wg(){var n,t;return!!(Ut()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function L2(n){try{const t=await navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new So("Browser returned unexpected credential type",t)}:{data:null,error:new So("Empty credential response",t)}}catch(t){return{data:null,error:T2({error:t,options:n})}}}async function $2(n){try{const t=await navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new So("Browser returned unexpected credential type",t)}:{data:null,error:new So("Empty credential response",t)}}catch(t){return{data:null,error:C2({error:t,options:n})}}}const B2={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},H2={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Eo(...n){const t=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),r=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),i={};for(const l of n)if(l)for(const c in l){const u=l[c];if(u!==void 0)if(Array.isArray(u))i[c]=u;else if(r(u))i[c]=u;else if(t(u)){const d=i[c];t(d)?i[c]=Eo(d,u):i[c]=Eo(u)}else i[c]=u}return i}function q2(n,t){return Eo(B2,n,t||{})}function I2(n,t){return Eo(H2,n,t||{})}class P2{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:i,signal:l},c){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!u)return{data:null,error:d};const m=l??O2.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${i}`),p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=q2(u.webauthn.credential_options.publicKey,c?.create),{data:y,error:v}=await L2({publicKey:p,signal:m});return y?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}case"request":{const p=I2(u.webauthn.credential_options.publicKey,c?.request),{data:y,error:v}=await $2(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:m}));return y?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}}}catch(u){return be(u)?{data:null,error:u}:{data:null,error:new vr("Unexpected error in challenge",u)}}}async _verify({challengeId:t,factorId:r,webauthn:i}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},c){if(!r)return{data:null,error:new Ci("rpId is required for WebAuthn authentication")};try{if(!Wg())return{data:null,error:new vr("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:i},signal:l},{request:c});if(!u)return{data:null,error:d};const{webauthn:m}=u;return this._verify({factorId:t,challengeId:u.challengeId,webauthn:{type:m.type,rpId:r,rpOrigins:i,credential_response:m.credential_response}})}catch(u){return be(u)?{data:null,error:u}:{data:null,error:new vr("Unexpected error in authenticate",u)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},c){if(!r)return{data:null,error:new Ci("rpId is required for WebAuthn registration")};try{if(!Wg())return{data:null,error:new vr("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:t});if(!u)return await this.client.mfa.listFactors().then(y=>{var v;return(v=y.data)===null||v===void 0?void 0:v.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===t&&b.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y?.id}):void 0),{data:null,error:d};const{data:m,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:r,rpOrigins:i},signal:l},{create:c});return m?this._verify({factorId:u.id,challengeId:m.challengeId,webauthn:{rpId:r,rpOrigins:i,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(u){return be(u)?{data:null,error:u}:{data:null,error:new vr("Unexpected error in register",u)}}}}k2();const G2={url:B_,storageKey:H_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:q_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Xg(n,t,r){return await r()}const gs={};class Ri{get jwks(){var t,r;return(r=(t=gs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){gs[this.storageKey]=Object.assign(Object.assign({},gs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=gs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){gs[this.storageKey]=Object.assign(Object.assign({},gs[this.storageKey]),{cachedAt:t})}constructor(t){var r,i,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},G2),t);if(this.storageKey=c.storageKey,this.instanceID=(r=Ri.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Ri.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&Ut()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new _2({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=fy(c.fetch),this.lock=c.lock||Xg,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,c.lock?this.lock=c.lock:this.persistSession&&Ut()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=E2:this.lock=Xg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new P2(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:hy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fg(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Fg(this.memoryStorage)),Ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${cy}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},i="none";if(Ut()&&(r=a2(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),Ut()&&this.detectSessionInUrl&&i!=="none"){const{data:l,error:c}=await this._getSessionFromURL(r,i);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),Y_(c)){const m=(t=c.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:u,redirectType:d}=l;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return be(r)?this._returnResult({error:r}):this._returnResult({error:new vr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,i,l;try{const c=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(l=t?.options)===null||l===void 0?void 0:l.captchaToken}},xform:$a}),{data:u,error:d}=c;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(c){if(be(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(t){var r,i,l;try{let c;if("email"in t){const{email:y,password:v,options:b}=t;let w=null,x=null;this.flowType==="pkce"&&([w,x]=await hs(this.storage,this.storageKey)),c=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:y,password:v,data:(r=b?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:w,code_challenge_method:x},xform:$a})}else if("phone"in t){const{phone:y,password:v,options:b}=t;c=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:v,data:(i=b?.data)!==null&&i!==void 0?i:{},channel:(l=b?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:$a})}else throw new co("You must provide either an email or phone number and a password");const{data:u,error:d}=c;if(d||!u)return await Mt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(c){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),be(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(t){try{let r;if("email"in t){const{email:c,password:u,options:d}=t;r=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Vg})}else if("phone"in t){const{phone:c,password:u,options:d}=t;r=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Vg})}else throw new co("You must provide either an email or phone number and a password");const{data:i,error:l}=r;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!i||!i.session||!i.user){const c=new ds;return this._returnResult({data:{user:null,session:null},error:c})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:l})}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,i,l,c;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=t.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,i,l,c,u,d,m,p,y,v,b;let w,x;if("message"in t)w=t.message,x=t.signature;else{const{chain:S,wallet:A,statement:T,options:U}=t;let M;if(Ut())if(typeof A=="object")M=A;else{const j=window;if("ethereum"in j&&typeof j.ethereum=="object"&&"request"in j.ethereum&&typeof j.ethereum.request=="function")M=j.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=A}const $=new URL((r=U?.url)!==null&&r!==void 0?r:window.location.href),K=await M.request({method:"eth_requestAccounts"}).then(j=>j).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!K||K.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=gy(K[0]);let D=(i=U?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!D){const j=await M.request({method:"eth_chainId"});D=j2(j)}const E={domain:$.host,address:R,statement:T,uri:$.href,version:"1",chainId:D,nonce:(l=U?.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(u=(c=U?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=U?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(m=U?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=U?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(y=U?.signInWithEthereum)===null||y===void 0?void 0:y.resources};w=A2(E),x=await M.request({method:"personal_sign",params:[N2(w),R]})}try{const{data:S,error:A}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:x},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:$a});if(A)throw A;if(!S||!S.session||!S.user){const T=new ds;return this._returnResult({data:{user:null,session:null},error:T})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:A})}catch(S){if(be(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(t){var r,i,l,c,u,d,m,p,y,v,b,w;let x,S;if("message"in t)x=t.message,S=t.signature;else{const{chain:A,wallet:T,statement:U,options:M}=t;let $;if(Ut())if(typeof T=="object")$=T;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))$=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!M?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=T}const K=new URL((r=M?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in $&&$.signIn){const R=await $.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M?.signInWithSolana),{version:"1",domain:K.host,uri:K.href}),U?{statement:U}:null));let D;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")D=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)D=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)x=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),S=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in $)||typeof $.signMessage!="function"||!("publicKey"in $)||typeof $!="object"||!$.publicKey||!("toBase58"in $.publicKey)||typeof $.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${K.host} wants you to sign in with your Solana account:`,$.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${K.href}`,`Issued At: ${(l=(i=M?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=M?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((u=M?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((d=M?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((m=M?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((p=M?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((v=(y=M?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||v===void 0)&&v.length?["Resources",...M.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const R=await $.signMessage(new TextEncoder().encode(x),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=R}}try{const{data:A,error:T}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:wr(S)},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(w=t.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:$a});if(T)throw T;if(!A||!A.session||!A.user){const U=new ds;return this._returnResult({data:{user:null,session:null},error:U})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:T})}catch(A){if(be(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(t){const r=await gr(this.storage,`${this.storageKey}-code-verifier`),[i,l]=(r??"").split("/");try{if(!i&&this.flowType==="pkce")throw new F_;const{data:c,error:u}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:$a});if(await Mt(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!c||!c.session||!c.user){const d=new ds;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:u})}catch(c){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),be(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(t){try{const{options:r,provider:i,token:l,access_token:c,nonce:u}=t,d=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:l,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:$a}),{data:m,error:p}=d;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const y=new ds;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,i,l,c,u;try{if("email"in t){const{email:d,options:m}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await hs(this.storage,this.storageKey));const{error:v}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=m?.data)!==null&&r!==void 0?r:{},create_user:(i=m?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in t){const{phone:d,options:m}=t,{data:p,error:y}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(l=m?.data)!==null&&l!==void 0?l:{},create_user:(c=m?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(u=m?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:y})}throw new co("You must provide either an email or phone number.")}catch(d){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),be(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(t){var r,i;try{let l,c;"options"in t&&(l=(r=t.options)===null||r===void 0?void 0:r.redirectTo,c=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:d}=await Se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:$a});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const m=u.session,p=u.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(be(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(t){var r,i,l,c,u;try{let d=null,m=null;this.flowType==="pkce"&&([d,m]=await hs(this.storage,this.storageKey));const p=await Se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((l=t?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:m}),headers:this.headers,xform:b2});return!((c=p.data)===null||c===void 0)&&c.url&&Ut()&&!(!((u=t.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(d){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),be(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:i}=t;if(i)throw i;if(!r)throw new ha;const{error:l}=await Se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(t){if(be(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:i,type:l,options:c}=t,{error:u}=await Se(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in t){const{phone:i,type:l,options:c}=t,{data:u,error:d}=await Se(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new co("You must provide either an email or phone number and a type")}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await gr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<md:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const u=await gr(this.userStorage,this.storageKey+"-user");u?.user?t.user=u.user:t.user=yd()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};t.user=g2(t.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Fn}):await this._useSession(async r=>{var i,l,c;const{data:u,error:d}=r;if(d)throw d;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ha}:await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:Fn})})}catch(r){if(be(r))return V_(r)&&(await this._removeSession(),await Mt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async i=>{const{data:l,error:c}=i;if(c)throw c;if(!l.session)throw new ha;const u=l.session;let d=null,m=null;this.flowType==="pkce"&&t.email!=null&&([d,m]=await hs(this.storage,this.storageKey));const{data:p,error:y}=await Se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:m}),jwt:u.access_token,xform:Fn});if(y)throw y;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(i){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),be(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ha;const r=Date.now()/1e3;let i=r,l=!0,c=null;const{payload:u}=pd(t.access_token);if(u.exp&&(i=u.exp,l=i<=r),l){const{data:d,error:m}=await this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!d)return{data:{user:null,session:null},error:null};c=d}else{const{data:d,error:m}=await this._getUser(t.access_token);if(m)throw m;c={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(r){if(be(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var i;if(!t){const{data:u,error:d}=r;if(d)throw d;t=(i=u.session)!==null&&i!==void 0?i:void 0}if(!t?.refresh_token)throw new ha;const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Ut())throw new uo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new uo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Bg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new uo("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Bg("No code detected.");const{data:U,error:M}=await this._exchangeCodeForSession(t.code);if(M)throw M;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:l,access_token:c,refresh_token:u,expires_in:d,expires_at:m,token_type:p}=t;if(!c||!d||!u||!p)throw new uo("No session defined in URL");const y=Math.round(Date.now()/1e3),v=parseInt(d);let b=y+v;m&&(b=parseInt(m));const w=b-y;w*1e3<=vs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${v}s`);const x=b-v;y-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,b,y):y-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,b,y);const{data:S,error:A}=await this._getUser(c);if(A)throw A;const T={provider_token:i,provider_refresh_token:l,access_token:c,expires_in:v,expires_at:b,refresh_token:u,token_type:p,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:t.type},error:null})}catch(i){if(be(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await gr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:l,error:c}=r;if(c)return this._returnResult({error:c});const u=(i=l.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:d}=await this.admin.signOut(u,t);if(d&&!(K_(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return t!=="others"&&(await this._removeSession(),await Mt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=t2(),i={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async r=>{var i,l;try{const{data:{session:c},error:u}=r;if(u)throw u;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",t,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(t))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",c),console.error(c)}})}async resetPasswordForEmail(t,r={}){let i=null,l=null;this.flowType==="pkce"&&([i,l]=await hs(this.storage,this.storageKey,!0));try{return await Se(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:l,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),be(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var t;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:i,error:l}=await this._useSession(async c=>{var u,d,m,p,y;const{data:v,error:b}=c;if(b)throw b;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Se(this.fetch,"GET",w,{headers:this.headers,jwt:(y=(p=v.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(l)throw l;return Ut()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:t.provider,url:i?.url},error:null})}catch(i){if(be(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var i;try{const{error:l,data:{session:c}}=r;if(l)throw l;const{options:u,provider:d,token:m,access_token:p,nonce:y}=t,v=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=c?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:d,id_token:m,access_token:p,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:$a}),{data:b,error:w}=v;return w?this._returnResult({data:{user:null,session:null},error:w}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new ds}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:w}))}catch(l){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),be(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var i,l;const{data:c,error:u}=r;if(u)throw u;return await Se(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(l=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&l!==void 0?l:void 0})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await s2(async l=>(l>0&&await r2(200*Math.pow(2,l-1)),this._debug(r,"refreshing attempt",l),await Se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:$a})),(l,c)=>{const u=200*Math.pow(2,l);return c&&gd(c)&&Date.now()+u-i<vs})}catch(i){if(this._debug(r,"error",i),be(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",i),Ut()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const l=await gr(this.storage,this.storageKey);if(l&&this.userStorage){let u=await gr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:l.user},await bs(this.userStorage,this.storageKey+"-user",u)),l.user=(t=u?.user)!==null&&t!==void 0?t:yd()}else if(l&&!l.user&&!l.user){const u=await gr(this.storage,this.storageKey+"-user");u&&u?.user?(l.user=u.user,await Mt(this.storage,this.storageKey+"-user"),await bs(this.storage,this.storageKey,l)):l.user=yd()}if(this._debug(i,"session from storage",l),!this._isValidSession(l)){this._debug(i,"session is not valid"),l!==null&&await this._removeSession();return}const c=((r=l.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<md;if(this._debug(i,`session has${c?"":" not"} expired with margin of ${md}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:u}=await this._callRefreshToken(l.refresh_token);u&&(console.error(u),gd(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(l.access_token);!d&&u?.user?(l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(i,"error",l),console.error(l);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var r,i;if(!t)throw new ha;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Do;const{data:c,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!c.session)throw new ha;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const d={data:c.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(c){if(this._debug(l,"error",c),be(c)){const u={data:null,error:c};return gd(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(t,r,i=!0){const l=`#_notifyAllSubscribers(${t})`;this._debug(l,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:r});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,r)}catch(m){c.push(m)}});if(await Promise.all(u),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Mt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await bs(this.userStorage,this.storageKey+"-user",{user:r.user});const l=Object.assign({},r);delete l.user;const c=Gg(l);await bs(this.storage,this.storageKey,c)}else{const l=Gg(r);await bs(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Mt(this.storage,this.storageKey),await Mt(this.storage,this.storageKey+"-code-verifier"),await Mt(this.storage,this.storageKey+"-user"),this.userStorage&&await Mt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ut()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),vs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((i.expires_at*1e3-t)/vs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${vs}ms, refresh threshold is ${Od} ticks`),l<=Od&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof my)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ut()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,i){const l=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&l.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[c,u]=await hs(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});l.push(d.toString())}if(i?.queryParams){const c=new URLSearchParams(i.queryParams);l.push(c.toString())}return i?.skipBrowserRedirect&&l.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${l.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var i;const{data:l,error:c}=r;return c?this._returnResult({data:null,error:c}):await Se(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var i,l;const{data:c,error:u}=r;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:p}=await Se(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(t.factorType==="totp"&&m.type==="totp"&&(!((l=m?.totp)===null||l===void 0)&&l.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:l,error:c}=r;if(c)return this._returnResult({data:null,error:c});const u=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?D2(t.webauthn.credential_response):z2(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:m}=await Se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:u,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:m}))})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:l,error:c}=r;if(c)return this._returnResult({data:null,error:c});const u=await Se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:M2(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:U2(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const l={all:[],phone:[],totp:[],webauthn:[]};for(const c of(t=r?.factors)!==null&&t!==void 0?t:[])l.all.push(c),c.status==="verified"&&l[c.factor_type].push(c);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:i},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=pd(i.access_token);let u=null;c.aal&&(u=c.aal);let d=u;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(y=>y.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const p=c.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:i},error:l}=r;return l?this._returnResult({data:null,error:l}):i?await Se(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new ha})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async i=>{const{data:{session:l},error:c}=i;if(c)return this._returnResult({data:null,error:c});if(!l)return this._returnResult({data:null,error:new ha});const u=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&Ut()&&!r?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(be(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,r){try{return await this._useSession(async i=>{const{data:{session:l},error:c}=i;if(c)return this._returnResult({data:null,error:c});if(!l)return this._returnResult({data:null,error:new ha});const u=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&Ut()&&!r?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(be(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:i}=t;return i?this._returnResult({data:null,error:i}):r?await Se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new ha})})}catch(t){if(be(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:i},error:l}=r;return l?this._returnResult({data:null,error:l}):i?(await Se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ha})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let i=r.keys.find(d=>d.kid===t);if(i)return i;const l=Date.now();if(i=this.jwks.keys.find(d=>d.kid===t),i&&this.jwks_cached_at+P_>l)return i;const{data:c,error:u}=await Se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,i=c.keys.find(d=>d.kid===t),!i)?null:i}async getClaims(t,r={}){try{let i=t;if(!i){const{data:w,error:x}=await this.getSession();if(x||!w.session)return this._returnResult({data:null,error:x});i=w.session.access_token}const{header:l,payload:c,signature:u,raw:{header:d,payload:m}}=pd(i);r?.allowExpired||h2(c.exp);const p=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!p){const{error:w}=await this.getUser(i);if(w)throw w;return{data:{claims:c,header:l,signature:u},error:null}}const y=f2(l.alg),v=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,v,u,Z_(`${d}.${m}`)))throw new Dd("Invalid JWT signature");return{data:{claims:c,header:l,signature:u},error:null}}catch(i){if(be(i))return this._returnResult({data:null,error:i});throw i}}}Ri.nextInstanceID={};const K2=Ri,V2="2.89.0";let _i="";typeof Deno<"u"?_i="deno":typeof document<"u"?_i="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_i="react-native":_i="node";const Y2={"X-Client-Info":`supabase-js-${_i}/${V2}`},F2={headers:Y2},W2={schema:"public"},X2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Q2={};function Oi(n){"@babel/helpers - typeof";return Oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oi(n)}function J2(n,t){if(Oi(n)!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,t);if(Oi(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Z2(n){var t=J2(n,"string");return Oi(t)=="symbol"?t:t+""}function eS(n,t,r){return(t=Z2(t))in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function Qg(n,t){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),r.push.apply(r,i)}return r}function ht(n){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qg(Object(r),!0).forEach(function(i){eS(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Qg(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}const tS=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),aS=()=>Headers,nS=(n,t,r)=>{const i=tS(r),l=aS();return async(c,u)=>{var d;const m=(d=await t())!==null&&d!==void 0?d:n;let p=new l(u?.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),i(c,ht(ht({},u),{},{headers:p}))}};function rS(n){return n.endsWith("/")?n:n+"/"}function sS(n,t){var r,i;const{db:l,auth:c,realtime:u,global:d}=n,{db:m,auth:p,realtime:y,global:v}=t,b={db:ht(ht({},m),l),auth:ht(ht({},p),c),realtime:ht(ht({},y),u),storage:{},global:ht(ht(ht({},v),d),{},{headers:ht(ht({},(r=v?.headers)!==null&&r!==void 0?r:{}),(i=d?.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return n.accessToken?b.accessToken=n.accessToken:delete b.accessToken,b}function iS(n){const t=n?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(rS(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var lS=class extends K2{constructor(n){super(n)}},oS=class{constructor(n,t,r){var i,l;this.supabaseUrl=n,this.supabaseKey=t;const c=iS(n);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:W2,realtime:Q2,auth:ht(ht({},X2),{},{storageKey:u}),global:F2},m=sS(r??{},d);if(this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=m.global.headers)!==null&&l!==void 0?l:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(y,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=m.auth)!==null&&p!==void 0?p:{},this.headers,m.global.fetch)}this.fetch=nS(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(ht({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&this.accessToken().then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new q1(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new $_(this.storageUrl.href,this.headers,this.fetch,r?.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new z1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,t,r)}channel(n,t={config:{}}){return this.realtime.channel(n,t)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,t,r;if(n.accessToken)return await n.accessToken();const{data:i}=await n.auth.getSession();return(t=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:l,storageKey:c,flowType:u,lock:d,debug:m,throwOnError:p},y,v){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lS({url:this.authUrl.href,headers:ht(ht({},b),y),storageKey:c,autoRefreshToken:n,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:l,flowType:u,lock:d,debug:m,throwOnError:p,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new r_(this.realtimeUrl.href,ht(ht({},n),{},{params:ht(ht({},{apikey:this.supabaseKey}),n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,t)=>{this._handleTokenChanged(n,"CLIENT",t?.access_token)})}_handleTokenChanged(n,t,r){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const cS=(n,t,r)=>new oS(n,t,r);function uS(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const t=n.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}uS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const dS=void 0,hS=void 0;console.error("Supabase URL or Key missing!");const ce=cS(dS,hS),yy=O.createContext();function ta(){return O.useContext(yy)}function fS({children:n}){const[t,r]=O.useState(null),[i,l]=O.useState(!0);O.useEffect(()=>{ce.auth.getSession().then(({data:{session:y}})=>{y?.user?c(y.user):(r(null),l(!1))});const{data:{subscription:p}}=ce.auth.onAuthStateChange(async(y,v)=>{v?.user?await c(v.user):(r(null),l(!1))});return()=>p.unsubscribe()},[]);const c=async p=>{try{const{data:y,error:v}=await ce.from("profiles").select("*").eq("id",p.id).single();v&&v.code!=="PGRST116"&&console.error("Error fetching profile:",v);const b={uid:p.id,email:p.email,...y,name:y?.full_name||p.user_metadata?.name||p.email?.split("@")[0]||"User",photoURL:y?.avatar_url||p.user_metadata?.avatar_url||null,displayName:y?.full_name||p.user_metadata?.name||p.email?.split("@")[0]||"User"};r(b)}catch(y){if(console.error("Fetch Profile Error:",y),p){const v={uid:p.id,email:p.email,name:p.user_metadata?.name||p.email?.split("@")[0]||"User",photoURL:p.user_metadata?.avatar_url||null,displayName:p.user_metadata?.name||p.email?.split("@")[0]||"User"};r(v)}}finally{l(!1)}},m={currentUser:t,loading:i,logout:async()=>{await ce.auth.signOut(),r(null)},refreshUser:async()=>{if(t){const{data:{user:p}}=await ce.auth.getUser();p&&await c(p)}}};return f.jsx(yy.Provider,{value:m,children:!i&&n})}const mS=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gS=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,i)=>i?i.toUpperCase():r.toLowerCase()),Jg=n=>{const t=gS(n);return t.charAt(0).toUpperCase()+t.slice(1)},vy=(...n)=>n.filter((t,r,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===r).join(" ").trim(),pS=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var yS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const vS=O.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:l="",children:c,iconNode:u,...d},m)=>O.createElement("svg",{ref:m,...yS,width:t,height:t,stroke:n,strokeWidth:i?Number(r)*24/Number(t):r,className:vy("lucide",l),...!c&&!pS(d)&&{"aria-hidden":"true"},...d},[...u.map(([p,y])=>O.createElement(p,y)),...Array.isArray(c)?c:[c]]));const we=(n,t)=>{const r=O.forwardRef(({className:i,...l},c)=>O.createElement(vS,{ref:c,iconNode:t,className:vy(`lucide-${mS(Jg(n))}`,`lucide-${n}`,i),...l}));return r.displayName=Jg(n),r};const bS=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],th=we("activity",bS);const wS=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],zd=we("arrow-left",wS);const xS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ah=we("arrow-right",xS);const _S=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ld=we("bell",_S);const SS=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],ES=we("brain",SS);const kS=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],jS=we("bug",kS);const NS=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Ss=we("camera",NS);const AS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],TS=we("check",AS);const CS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],nh=we("chevron-down",CS);const RS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],by=we("circle-alert",RS);const OS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zo=we("circle-check-big",OS);const MS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],US=we("circle-check",MS);const DS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Lo=we("clock",DS);const zS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],LS=we("file-text",zS);const $S=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],$d=we("globe",$S);const BS=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],wy=we("heart",BS);const HS=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],xy=we("house",HS);const qS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],_y=we("image",qS);const IS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Sy=we("info",IS);const PS=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],Ey=we("leaf",PS);const GS=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],KS=we("lightbulb",GS);const VS=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Aa=we("loader-circle",VS);const YS=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],FS=we("lock",YS);const WS=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Zg=we("log-in",WS);const XS=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ep=we("log-out",XS);const QS=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ky=we("mail",QS);const JS=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],ZS=we("menu",JS);const eE=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Mi=we("message-circle",eE);const tE=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],aE=we("mic",tE);const nE=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],tp=we("moon",nE);const rE=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],ap=we("paperclip",rE);const sE=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],iE=we("pause",sE);const lE=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],jy=we("pen",lE);const oE=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],cE=we("play",oE);const uE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dE=we("plus",uE);const hE=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Bd=we("refresh-cw",hE);const fE=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ny=we("save",fE);const mE=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],np=we("scan-line",mE);const gE=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ay=we("search",gE);const pE=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ks=we("send",pE);const yE=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],ko=we("share-2",yE);const vE=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],bE=we("shield-check",vE);const wE=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],xE=we("sparkles",wE);const _E=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],Zt=we("sprout",_E);const SE=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],rp=we("stethoscope",SE);const EE=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],sp=we("sun",EE);const kE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ip=we("target",kE);const jE=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ui=we("trash-2",jE);const NE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Hd=we("triangle-alert",NE);const AE=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],TE=we("user-check",AE);const CE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],RE=we("user-minus",CE);const OE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],rh=we("user-plus",OE);const ME=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Di=we("user",ME);const UE=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],DE=we("wand-sparkles",UE);const zE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ta=we("x",zE);const LE=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],$E=we("zap",LE),Ty=O.createContext();function Qa(){return O.useContext(Ty)}function BE({children:n}){const[t,r]=O.useState([]),i=O.useCallback((c,u="info",d=4e3)=>{const m=Date.now();r(p=>[...p,{id:m,message:c,type:u}]),setTimeout(()=>{l(m)},d)},[]),l=O.useCallback(c=>{r(u=>u.filter(d=>d.id!==c))},[]);return f.jsxs(Ty.Provider,{value:{addToast:i,removeToast:l},children:[n,f.jsx("div",{className:"fixed top-6 right-6 z-[9999] flex flex-col gap-3 pointer-events-none",children:t.map(c=>f.jsxs("div",{className:`
                            pointer-events-auto
                            flex items-center gap-3 px-5 py-3 rounded-2xl shadow-lg backdrop-blur-md border
                            transform transition-all duration-500 animate-slide-in hover:scale-102
                            ${c.type==="success"?"bg-emerald-50/90 border-emerald-200 text-emerald-800 dark:bg-emerald-900/40 dark:border-emerald-700/50 dark:text-emerald-100":""}
                            ${c.type==="error"?"bg-rose-50/90 border-rose-200 text-rose-800 dark:bg-rose-900/40 dark:border-rose-700/50 dark:text-rose-100":""}
                            ${c.type==="info"?"bg-indigo-50/90 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:border-indigo-700/50 dark:text-indigo-100":""}
                            ${c.type==="warning"?"bg-amber-50/90 border-amber-200 text-amber-800 dark:bg-amber-900/40 dark:border-amber-700/50 dark:text-amber-100":""}
                            min-w-[300px] max-w-sm
                        `,children:[c.type==="success"&&f.jsx(zo,{className:"w-5 h-5 text-green-600 dark:text-green-400 shrink-0"}),c.type==="error"&&f.jsx(by,{className:"w-5 h-5 text-red-600 dark:text-red-400 shrink-0"}),(c.type==="info"||c.type==="warning")&&f.jsx(Sy,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 shrink-0"}),f.jsx("p",{className:"text-sm font-medium leading-tight flex-1 tracking-tight font-sans",children:c.message})]},c.id))})]})}class Cy extends Mw.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Uncaught error:",t,r)}handleReload=()=>{window.location.reload()};handleGoHome=()=>{window.location.href="/"};render(){return this.state.hasError?f.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center animate-fade-in text-gray-900 dark:text-white",children:[f.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-6 rounded-full mb-6",children:f.jsx(Hd,{className:"w-12 h-12 text-red-600 dark:text-red-400"})}),f.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),f.jsx("p",{className:"mb-8 max-w-md text-gray-500 dark:text-gray-400",children:this.state.error?.message||"An unexpected error occurred."}),f.jsxs("div",{className:"flex gap-4",children:[f.jsxs("button",{onClick:this.handleReload,className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-6 py-3 rounded-xl font-bold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[f.jsx(Bd,{className:"w-5 h-5"}),"Reload"]}),f.jsxs("button",{onClick:this.handleGoHome,className:"bg-green-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[f.jsx(xy,{className:"w-5 h-5"}),"Go Home"]})]})]}):this.props.children}}const HE=async(n,t,r,i)=>{try{if(!n||!r)throw new Error("Invalid user IDs");const{error:l}=await ce.from("follows").insert({follower_id:n,following_id:r});if(l)throw l;return!0}catch(l){throw console.error("Error following user:",l),l}},po=async(n,t)=>{try{if(!n||!t)throw new Error("Invalid user IDs");const{error:r}=await ce.from("follows").delete().match({follower_id:n,following_id:t});if(r)throw r;return!0}catch(r){throw console.error("Error unfollowing user:",r),r}},Ry=async(n,t)=>{try{if(!n||!t)return{isFollowing:!1,isRequested:!1};const{data:r,error:i}=await ce.from("follows").select("*").match({follower_id:n,following_id:t}).single(),{data:l}=await ce.from("follow_requests").select("*").match({follower_id:n,target_user_id:t}).single();return{isFollowing:!!r,isRequested:!!l}}catch{return{isFollowing:!1,isRequested:!1}}},Oy=async(n,t,r)=>{try{const{error:i}=await ce.from("follow_requests").insert({follower_id:n,target_user_id:r});if(i)throw i;return!0}catch(i){throw console.error("Error sending follow request:",i),i}},My=async(n,t)=>{try{const{error:r}=await ce.from("follow_requests").delete().match({follower_id:n,target_user_id:t});if(r)throw r;return!0}catch(r){throw r}},qE=async(n,t,r,i,l)=>{try{await HE(t,r,i,l),await Uy(i,t);const{error:c}=await ce.from("follow_requests").delete().eq("id",n);if(c)throw c;return!0}catch(c){throw c}},Uy=async(n,t)=>{try{const{error:r}=await ce.from("follow_requests").delete().match({follower_id:t,target_user_id:n});if(r)throw r;return!0}catch(r){throw r}},IE=async n=>{try{const{data:t,error:r}=await ce.from("follows").select("follower_id, profiles!follower_id(*)").eq("following_id",n);if(r)throw r;return t.map(i=>({id:i.follower_id,uid:i.follower_id,...i.profiles,name:i.profiles.full_name,photoURL:i.profiles.avatar_url}))}catch{return[]}},PE=async n=>{try{const{data:t,error:r}=await ce.from("follows").select("following_id, profiles!following_id(*)").eq("follower_id",n);if(r)throw r;return t.map(i=>({id:i.following_id,uid:i.following_id,...i.profiles,name:i.profiles.full_name,photoURL:i.profiles.avatar_url}))}catch{return[]}};function GE({onClose:n}){const{t}=nt(),{currentUser:r}=ta(),{addToast:i}=Qa(),l=ea(),[c,u]=O.useState([]),[d,m]=O.useState(!0),[p,y]=O.useState(null);O.useEffect(()=>{if(!r)return;const w=async()=>{const{data:S,error:A}=await ce.from("follow_requests").select("*").eq("target_user_id",r.uid).eq("status","pending").order("created_at",{ascending:!1});if(A){console.error("Error fetching requests:",A),m(!1);return}if(S&&S.length>0){const T=S.map(K=>K.follower_id),{data:U}=await ce.from("profiles").select("id, full_name, avatar_url").in("id",T),M=(U||[]).reduce((K,R)=>({...K,[R.id]:R}),{}),$=S.map(K=>({id:K.follower_id,requestId:K.id,followerName:M[K.follower_id]?.full_name||"User",followerPhoto:M[K.follower_id]?.avatar_url,...K}));u($)}else u([]);m(!1)};w();const x=ce.channel("notifications_modal").on("postgres_changes",{event:"*",schema:"public",table:"follow_requests",filter:`target_user_id=eq.${r.uid}`},()=>{w()}).subscribe();return()=>{ce.removeChannel(x)}},[r]);const v=async w=>{if(!p){y(w.id),u(x=>x.filter(S=>S.id!==w.id));try{await qE(w.id,r.uid,w.id),i(t("request_accepted")||"Request Accepted","success")}catch(x){console.error(x),i(t("error_occurred")||"Error","error")}finally{y(null)}}},b=async w=>{if(!p){y(w),u(x=>x.filter(S=>S.id!==w));try{await Uy(r.uid,w),i(t("request_rejected")||"Request Rejected","info")}catch(x){console.error(x),i("Error","error")}finally{y(null)}}};return f.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:n,children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl relative overflow-hidden flex flex-col max-h-[80vh] animate-scale-up",onClick:w=>w.stopPropagation(),children:[f.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-white dark:bg-gray-800 z-10",children:[f.jsxs("h3",{className:"font-bold text-lg text-gray-900 dark:text-white flex items-center gap-2",children:[f.jsx(Ld,{className:"w-5 h-5 text-green-600"}),t("notifications")||"Bildirimler"]}),f.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:f.jsx(Ta,{className:"w-5 h-5 text-gray-500"})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:d?f.jsx("div",{className:"flex justify-center py-8",children:f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}):c.length===0?f.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[f.jsx(Ld,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),f.jsx("p",{children:t("no_notifications")||"No new notifications"})]}):f.jsxs("div",{className:"space-y-4",children:[f.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider px-1",children:t("follow_requests")||"Follow Requests"}),c.map(w=>f.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-700/50 p-3 rounded-2xl",children:[f.jsxs("div",{className:"flex items-center gap-3 flex-1 cursor-pointer",onClick:()=>{n(),l(`/profile/${w.id}`)},children:[f.jsx("img",{src:w.followerPhoto||`https://ui-avatars.com/api/?name=${w.followerName||"User"}&background=random`,alt:w.followerName,className:"w-10 h-10 rounded-full object-cover border-2 border-white dark:border-gray-600"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm truncate",children:w.followerName||"User"}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t("wants_to_follow")||"Wants to follow you"})]})]}),f.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[f.jsx("button",{onClick:()=>b(w.id),disabled:p===w.id,className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl transition-colors disabled:opacity-50",children:f.jsx(Ta,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>v(w),disabled:p===w.id,className:"p-2 bg-green-100 hover:bg-green-200 text-green-600 rounded-xl transition-colors disabled:opacity-50",children:f.jsx(TS,{className:"w-4 h-4"})})]})]},w.id))]})})]})})}function KE(){const{currentUser:n,logout:t}=ta(),{t:r,i18n:i}=nt(),l=Bt(),c=ea(),{lang:u}=Hi(),{addToast:d}=Qa(),[m,p]=O.useState(!0),[y,v]=O.useState(!1),[b,w]=O.useState(0),x=async()=>{const R=i.language==="en"?"tr":"en";if(n)try{await ce.from("profiles").update({language:R}).eq("id",n.uid)}catch(j){console.error("Language sync failed",j)}const E=l.pathname.split("/").filter(Boolean);E.length>0&&(E[0]==="en"||E[0]==="tr")?(E[0]=R,c("/"+E.join("/"))):c(`/${R}`)},[S,A]=O.useState(()=>n?.theme?n.theme:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");O.useEffect(()=>{n?.theme&&A(n.theme)},[n]),O.useEffect(()=>{const R=document.documentElement;R.classList.remove("dark","oled"),S==="dark"?R.classList.add("dark"):S==="oled"&&R.classList.add("dark","oled")},[S]),O.useEffect(()=>{const R=window.matchMedia("(prefers-color-scheme: dark)"),D=E=>{n?.theme||A(E.matches?"dark":"light")};return R.addEventListener("change",D),()=>R.removeEventListener("change",D)},[n]);const[T]=O.useState(()=>new Audio("https://assets.mixkit.co/active_storage/sfx/2573/2573-preview.mp3")),U=async R=>{if(A(R),n)try{await ce.from("profiles").update({theme:R}).eq("id",n.uid)}catch(D){console.error("Theme sync failed",D)}},M=()=>{U(S==="light"?"dark":S==="dark"?"oled":"light")};O.useEffect(()=>{if(!n)return;const R=async()=>{try{await ce.from("profiles").update({last_seen:new Date}).eq("id",n.uid)}catch(E){console.error("Presence update failed",E)}};R();const D=setInterval(R,60*1e3);return()=>clearInterval(D)},[n]),O.useEffect(()=>{if(!n)return;const R=ce.channel("global_notifications").on("postgres_changes",{event:"UPDATE",schema:"public",table:"chats"},D=>{const E=D.new;if(E.participants&&E.participants.includes(n.uid)){const j=new Date(E.updated_at).getTime();if(Date.now()-j>5e3)return;const z=E.participants.find(I=>I!==n.uid);!l.pathname.includes(`/messages/${E.id}`)&&z&&(T.play().catch(I=>console.log("Audio play failed",I)),d(`New message: ${E.last_message?.substring(0,30)}...`,"info",5e3))}}).subscribe();return()=>ce.removeChannel(R)},[n,l.pathname,d,T]),O.useEffect(()=>{if(!n)return;const R=async()=>{const{count:E,error:j}=await ce.from("follow_requests").select("*",{count:"exact",head:!0}).eq("target_user_id",n.uid).eq("status","pending");j||w(E||0)};R();const D=ce.channel("follow_requests_count").on("postgres_changes",{event:"*",schema:"public",table:"follow_requests",filter:`target_user_id=eq.${n.uid}`},R).subscribe();return()=>ce.removeChannel(D)},[n]);const K=[{name:"home",path:`/${u||"en"}`,icon:xy,label:r("app_name"),public:!0},{name:"community",path:`/${u||"en"}/community`,icon:$d,label:r("community"),public:!0},{name:"my_analyses",path:`/${u||"en"}/analyses`,icon:Lo,label:r("analyses"),public:!1},{name:"messages",path:`/${u||"en"}/messages`,icon:Mi,label:r("messages"),public:!1},{name:"notifications",action:()=>v(!0),icon:Ld,badge:b>0?b:null,label:r("notifications"),public:!1},{name:"profile",path:`/${u||"en"}/profile`,icon:Di,label:r("profile"),public:!1},{name:"about",path:`/${u||"en"}/about`,icon:Sy,label:r("about"),public:!0}].filter(R=>R.public||n);return f.jsxs("div",{className:"flex h-[100dvh] bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans overflow-hidden transition-colors duration-300",children:[f.jsxs("aside",{className:`hidden md:flex flex-col bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 ease-in-out ${m?"w-64":"w-20"}`,children:[f.jsxs("div",{className:`p-4 flex items-center ${m?"justify-between":"justify-center"} h-20`,children:[m&&f.jsxs(Na,{to:`/${u||"en"}`,className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[f.jsx(Zt,{className:"w-8 h-8 text-green-600"}),f.jsxs("h1",{className:"text-2xl font-bold tracking-tight whitespace-nowrap",children:[f.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),f.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),f.jsx("button",{onClick:()=>p(!m),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:f.jsx(ZS,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"})}),!m&&f.jsx("div",{className:"hidden"})]}),f.jsx("nav",{className:"flex-1 px-3 space-y-2 mt-2",children:K.map(R=>{const D=R.icon,E=l.pathname===R.path||R.path!==`/${u}`&&l.pathname.startsWith(R.path),j=f.jsxs(f.Fragment,{children:[f.jsx(D,{className:`w-6 h-6 ${m?"":"mx-auto"}`}),m&&f.jsx("span",{className:"truncate",children:R.label}),R.badge&&(m?f.jsx("span",{className:"ml-auto bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full min-w-[1.25rem] text-center",children:R.badge}):f.jsx("span",{className:"absolute top-2 right-2 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white dark:border-gray-800"}))]});return R.action?f.jsx("button",{onClick:z=>{z.preventDefault(),R.action()},className:`w-full flex items-center ${m?"gap-3 px-4":"justify-center px-2"} py-3 rounded-xl transition-all relative group text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50`,children:j},R.name):f.jsx(Na,{to:R.path,className:`w-full flex items-center ${m?"gap-3 px-4":"justify-center px-2"} py-3 rounded-xl transition-all relative group ${E?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 font-semibold shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:j},R.path)})}),f.jsxs("div",{className:`p-4 border-t border-gray-200 dark:border-gray-700 space-y-4 ${m?"":"flex flex-col items-center"}`,children:[f.jsxs("button",{onClick:x,className:`flex items-center gap-3 w-full text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors ${m?"px-4 py-2":"p-2 justify-center"}`,children:[f.jsx("span",{className:"font-bold border border-gray-300 dark:border-gray-600 rounded px-1 text-xs",children:(u||i.language).toUpperCase()}),m&&f.jsx("span",{children:r("language")})]}),m?f.jsxs("div",{className:"flex items-center justify-between bg-gray-100 dark:bg-gray-900 rounded-full p-1 relative w-full h-10 border border-gray-200 dark:border-gray-700",children:[f.jsx("div",{className:"absolute top-1 bottom-1 w-[calc(33.33%-4px)] bg-white dark:bg-gray-700 rounded-full shadow-sm transition-all duration-300 ease-out z-0",style:{left:S==="oled"?"4px":S==="dark"?"calc(33.33% + 2px)":"calc(66.66% + 0px)"}}),f.jsx("button",{onClick:()=>U("oled"),className:`flex-1 relative z-10 flex items-center justify-center transition-colors ${S==="oled"?"text-gray-900 dark:text-white":"text-gray-500"}`,children:f.jsx("span",{className:"text-[9px] font-bold",children:"OLED"})}),f.jsx("button",{onClick:()=>U("dark"),className:`flex-1 relative z-10 flex items-center justify-center transition-colors ${S==="dark"?"text-gray-900 dark:text-white":"text-gray-500"}`,children:f.jsx(tp,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>U("light"),className:`flex-1 relative z-10 flex items-center justify-center transition-colors ${S==="light"?"text-gray-900 dark:text-white":"text-gray-500"}`,children:f.jsx(sp,{className:"w-4 h-4"})})]}):f.jsx("button",{onClick:M,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl text-gray-600 dark:text-gray-400 transition-colors bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:S==="oled"?f.jsx("span",{className:"text-[9px] font-bold",children:"OLED"}):S==="dark"?f.jsx(tp,{className:"w-5 h-5"}):f.jsx(sp,{className:"w-5 h-5"})}),n?f.jsx("div",{className:`flex ${m?"flex-col gap-2":"flex-col gap-2 items-center"}`,children:m?f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("img",{src:n.photoURL||n.avatar||`https://ui-avatars.com/api/?name=${n.displayName}`,alt:"Avatar",className:"w-8 h-8 rounded-full"}),f.jsx("div",{className:"overflow-hidden",children:f.jsx("p",{className:"text-xs text-gray-500 truncate",children:n.displayName})}),f.jsx("button",{onClick:async()=>{await t(),c(`/${u}`)},className:"ml-auto p-1.5 text-red-500 hover:bg-red-50 rounded-lg",children:f.jsx(ep,{className:"w-4 h-4"})})]}):f.jsx("button",{onClick:async()=>{await t(),c(`/${u}`)},children:f.jsx(ep,{className:"w-5 h-5 text-red-500"})})}):f.jsxs(Na,{to:`/${u}/login`,className:`flex items-center gap-2 justify-center w-full py-2 bg-green-600 text-white rounded-xl ${!m&&"p-2"}`,children:[f.jsx(Zg,{className:"w-5 h-5"}),m&&f.jsx("span",{children:r("login")})]})]})]}),f.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[f.jsxs("header",{className:"md:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between sticky top-0 z-10",children:[f.jsxs(Na,{to:`/${u}`,className:"flex items-center gap-2",children:[f.jsx(Zt,{className:"w-6 h-6 text-green-600"}),f.jsxs("span",{className:"font-bold text-lg",children:[f.jsx("span",{className:"text-green-700",children:"Plant"}),f.jsx("span",{className:"text-blue-500",children:"AI"})]})]}),f.jsx("button",{onClick:x,className:"text-sm font-bold bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-lg",children:(u||"en").toUpperCase()})]}),f.jsx("div",{className:"flex-1 overflow-y-auto w-full p-4 md:p-8 pb-32 md:pb-8 scroll-smooth relative",children:f.jsx("div",{className:"w-full min-h-full flex flex-col",children:f.jsx(Cy,{children:f.jsx(Mx,{})})})}),f.jsxs("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex justify-around p-2 z-50 safe-area-bottom shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:[K.map(R=>{const D=R.icon,E=l.pathname===R.path;return f.jsx(Na,{to:R.path,className:`flex flex-col items-center justify-center p-3 rounded-lg ${E?"text-green-600 bg-green-50 dark:bg-green-900/20":"text-gray-400"}`,children:f.jsx(D,{className:"w-7 h-7"})},R.path)}),!n&&f.jsx(Na,{to:`/${u}/login`,className:"flex flex-col items-center justify-center p-3 text-gray-400",children:f.jsx(Zg,{className:"w-7 h-7"})})]})]}),y&&f.jsx(GE,{onClose:()=>v(!1)})]})}function VE(){const[n,t]=O.useState(""),[r,i]=O.useState(""),[l,c]=O.useState(""),[u,d]=O.useState(!1),[m,p]=O.useState(!1),[y,v]=O.useState(!1),b=ea(),w=Bt(),{t:x}=nt(),{currentUser:S}=ta(),{addToast:A}=Qa();if(S)return w.state?.returnUrl&&w.state?.pendingResult?b(w.state.returnUrl,{replace:!0,state:{restoredResult:w.state.pendingResult,restoredImages:w.state.pendingImages,restoredPlantType:w.state.pendingPlantType}}):b(w.state?.returnUrl||"/"),null;const T=async()=>{v(!0);try{const{error:M}=await ce.auth.resend({type:"signup",email:n});if(M)throw M;A(x("verification_sent")||"Verification email sent! Check your inbox.","success")}catch(M){console.error("Resend error:",M),A(x("resend_failed")||"Failed to resend email.","error")}finally{v(!1)}},U=async M=>{M.preventDefault(),c(""),p(!1),d(!0);try{const{data:$,error:K}=await ce.auth.signInWithPassword({email:n,password:r});if(K)throw K;const R=$.user;R&&!R.confirmed_at&&R.email_confirmed_at}catch($){console.error($);let K=x("login_failed")||"Failed to login.";$.message.includes("Invalid login credentials")?K=x("invalid_credentials")||"Invalid email or password.":$.message.includes("Email not confirmed")&&(K=x("email_not_verified")||"Email not verified.",p(!0)),c(K)}finally{d(!1)}};return f.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:f.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:f.jsxs("div",{className:"p-8",children:[f.jsx("div",{className:"flex justify-center mb-6",children:f.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:f.jsx(Zt,{className:"w-16 h-16 text-white"})})}),f.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:x("welcome")}),f.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:x("login_prompt")}),l&&f.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:l}),m?f.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-xl animate-fade-in",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-800 rounded-full text-yellow-600 dark:text-yellow-400",children:f.jsx(Zt,{className:"w-5 h-5"})}),f.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:x("verify_email_title")||"Verify your email"})]}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:x("verify_email_desc")||"We've sent a confirmation link to your inbox. Please check your spam folder too."}),f.jsx("button",{onClick:T,disabled:y,className:"w-full py-2 px-4 bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-900/50 dark:hover:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded-lg text-sm font-semibold transition-colors disabled:opacity-50",children:y?"Sending...":x("resend_verification")||"Resend Verification Email"})]}):f.jsxs("form",{onSubmit:U,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:x("email")}),f.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:n,onChange:M=>t(M.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:x("password")}),f.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:M=>i(M.target.value)})]}),f.jsxs("button",{type:"submit",disabled:u,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u?"Logging in...":x("login"),!u&&f.jsx(ah,{className:"w-4 h-4"})]})]}),f.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:[x("no_account")," ",f.jsx(Na,{to:"/register",state:w.state,className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:x("register")})]})]})})})}function YE({user:n,onClose:t,onVerified:r}){const{t:i}=nt(),{addToast:l}=Qa(),[c,u]=O.useState(!1),[d,m]=O.useState(!1);O.useEffect(()=>{const v=setInterval(async()=>{const{data:{user:b}}=await ce.auth.getUser();b&&b.email_confirmed_at&&(clearInterval(v),r())},3e3);return()=>clearInterval(v)},[r]);const p=async()=>{u(!0);try{const{data:{user:v}}=await ce.auth.getUser();v&&v.email_confirmed_at&&r()}catch(v){console.error(v)}finally{setTimeout(()=>u(!1),500)}},y=async()=>{if(!d){m(!0);try{const{error:v}=await ce.auth.resend({type:"signup",email:n.email,options:{emailRedirectTo:window.location.origin}});if(v)throw v;l(i("email_resent_success")||"Verification email sent!","success")}catch(v){console.error(v),l(v.message,"error")}finally{m(!1)}}};return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-fade-in",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl p-8 flex flex-col items-center text-center relative overflow-hidden",children:[f.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-green-400 rounded-full blur-3xl opacity-20"}),f.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-blue-400 rounded-full blur-3xl opacity-20"}),f.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6 text-green-600 dark:text-green-400 animate-pulse",children:f.jsx(ky,{className:"w-10 h-10"})}),f.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:i("verify_email_title")||"Verify Your Email"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:i("verify_email_desc")||`We sent a confirmation link to ${n?.email}. Please check your inbox (and spam) and click the link to continue.`}),f.jsxs("div",{className:"space-y-3 w-full",children:[f.jsx("button",{onClick:()=>window.open("https://mail.google.com","_blank"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-2",children:i("open_email_app")||"Open Email App"}),f.jsxs("button",{onClick:p,disabled:c,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-xl transition-all flex items-center justify-center gap-2",children:[c?f.jsx(Bd,{className:"w-5 h-5 animate-spin"}):f.jsx(zo,{className:"w-5 h-5"}),i("i_verified_it")||"I Verified the Email"]}),f.jsxs("button",{onClick:y,disabled:d,className:"w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-semibold py-3 rounded-xl transition-all flex items-center justify-center gap-2",children:[d?f.jsx(Bd,{className:"w-5 h-5 animate-spin"}):f.jsx(ks,{className:"w-5 h-5"}),i("resend_email")||"Resend Email"]}),f.jsx("button",{onClick:t,className:"text-sm text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors pt-2",children:i("cancel")||"Cancel"})]})]})})}function FE(){const[n,t]=O.useState(""),[r,i]=O.useState(""),[l,c]=O.useState(""),[u,d]=O.useState(""),[m,p]=O.useState(!1),[y,v]=O.useState(!1),[b,w]=O.useState(null),x=ea(),S=Bt(),{t:A}=nt(),T=async M=>{M.preventDefault(),d(""),p(!0);try{const{data:$,error:K}=await ce.auth.signUp({email:n,password:r,options:{data:{full_name:l}}});if(K)throw K;console.log("Signup success:",$),$.user&&!$.session?(w($.user),v(!0)):$.user&&$.session&&(S.state?.returnUrl&&S.state?.pendingResult?x(S.state.returnUrl,{replace:!0,state:{restoredResult:S.state.pendingResult,restoredImages:S.state.pendingImages,restoredPlantType:S.state.pendingPlantType}}):x("/")),p(!1)}catch($){d($.message),console.error($),p(!1)}},U=async()=>{v(!1),x("/login")};return f.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4 animate-fade-in",children:f.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden relative",children:[y&&b&&f.jsx(YE,{user:b,onClose:()=>v(!1),onVerified:U,isSupabase:!0}),f.jsxs("div",{className:"p-8",children:[f.jsx("div",{className:"flex justify-center mb-6",children:f.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:f.jsx(Zt,{className:"w-16 h-16 text-white"})})}),f.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:A("register")}),f.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:A("create_account_desc")||A("join_community")||"Create an account to join the community"}),u&&f.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:u}),f.jsxs("form",{onSubmit:T,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:A("full_name")||"Full Name"}),f.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:l,onChange:M=>c(M.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:A("email")}),f.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:n,onChange:M=>t(M.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:A("password")}),f.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:M=>i(M.target.value)})]}),f.jsxs("button",{type:"submit",disabled:m||y,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[m?A("creating_account")||"Creating Account...":A("register"),!m&&f.jsx(rh,{className:"w-4 h-4"})]})]}),f.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:[A("already_have_account")||"Already have an account?"," "," ",f.jsx(Na,{to:"/login",className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:A("login")})]})]})]})})}var lp;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(lp||(lp={}));var op;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(op||(op={}));var cp;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(cp||(cp={}));const up=["user","model","function","system"];var dp;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(dp||(dp={}));var hp;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(hp||(hp={}));var fp;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(fp||(fp={}));var mp;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(mp||(mp={}));var ki;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(ki||(ki={}));var gp;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(gp||(gp={}));var pp;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(pp||(pp={}));var yp;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(yp||(yp={}));class $t extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class ps extends $t{constructor(t,r){super(t),this.response=r}}class Dy extends $t{constructor(t,r,i,l){super(t),this.status=r,this.statusText=i,this.errorDetails=l}}class Wn extends $t{}class zy extends $t{}const WE="https://generativelanguage.googleapis.com",XE="v1beta",QE="0.24.1",JE="genai-js";var Sr;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Sr||(Sr={}));class ZE{constructor(t,r,i,l,c){this.model=t,this.task=r,this.apiKey=i,this.stream=l,this.requestOptions=c}toString(){var t,r;const i=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||XE;let c=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||WE}/${i}/${this.model}:${this.task}`;return this.stream&&(c+="?alt=sse"),c}}function ek(n){const t=[];return n?.apiClient&&t.push(n.apiClient),t.push(`${JE}/${QE}`),t.join(" ")}async function tk(n){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",ek(n.requestOptions)),r.append("x-goog-api-key",n.apiKey);let i=(t=n.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(l){throw new Wn(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${l.message}`)}for(const[l,c]of i.entries()){if(l==="x-goog-api-key")throw new Wn(`Cannot set reserved header name ${l}`);if(l==="x-goog-api-client")throw new Wn(`Header name ${l} can only be set using the apiClient field`);r.append(l,c)}}return r}async function ak(n,t,r,i,l,c){const u=new ZE(n,t,r,i,c);return{url:u.toString(),fetchOptions:Object.assign(Object.assign({},ik(c)),{method:"POST",headers:await tk(u),body:l})}}async function Pi(n,t,r,i,l,c={},u=fetch){const{url:d,fetchOptions:m}=await ak(n,t,r,i,l,c);return nk(d,m,u)}async function nk(n,t,r=fetch){let i;try{i=await r(n,t)}catch(l){rk(l,n)}return i.ok||await sk(i,n),i}function rk(n,t){let r=n;throw r.name==="AbortError"?(r=new zy(`Request aborted when fetching ${t.toString()}: ${n.message}`),r.stack=n.stack):n instanceof Dy||n instanceof Wn||(r=new $t(`Error fetching from ${t.toString()}: ${n.message}`),r.stack=n.stack),r}async function sk(n,t){let r="",i;try{const l=await n.json();r=l.error.message,l.error.details&&(r+=` ${JSON.stringify(l.error.details)}`,i=l.error.details)}catch{}throw new Dy(`Error fetching from ${t.toString()}: [${n.status} ${n.statusText}] ${r}`,n.status,n.statusText,i)}function ik(n){const t={};if(n?.signal!==void 0||n?.timeout>=0){const r=new AbortController;n?.timeout>=0&&setTimeout(()=>r.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}function sh(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),yo(n.candidates[0]))throw new ps(`${Vn(n)}`,n);return lk(n)}else if(n.promptFeedback)throw new ps(`Text not available. ${Vn(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),yo(n.candidates[0]))throw new ps(`${Vn(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),vp(n)[0]}else if(n.promptFeedback)throw new ps(`Function call not available. ${Vn(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),yo(n.candidates[0]))throw new ps(`${Vn(n)}`,n);return vp(n)}else if(n.promptFeedback)throw new ps(`Function call not available. ${Vn(n)}`,n)},n}function lk(n){var t,r,i,l;const c=[];if(!((r=(t=n.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const u of(l=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||l===void 0?void 0:l.parts)u.text&&c.push(u.text),u.executableCode&&c.push("\n```"+u.executableCode.language+`
`+u.executableCode.code+"\n```\n"),u.codeExecutionResult&&c.push("\n```\n"+u.codeExecutionResult.output+"\n```\n");return c.length>0?c.join(""):""}function vp(n){var t,r,i,l;const c=[];if(!((r=(t=n.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const u of(l=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||l===void 0?void 0:l.parts)u.functionCall&&c.push(u.functionCall);if(c.length>0)return c}const ok=[ki.RECITATION,ki.SAFETY,ki.LANGUAGE];function yo(n){return!!n.finishReason&&ok.includes(n.finishReason)}function Vn(n){var t,r,i;let l="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)l+="Response was blocked",!((t=n.promptFeedback)===null||t===void 0)&&t.blockReason&&(l+=` due to ${n.promptFeedback.blockReason}`),!((r=n.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(l+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){const c=n.candidates[0];yo(c)&&(l+=`Candidate was blocked due to ${c.finishReason}`,c.finishMessage&&(l+=`: ${c.finishMessage}`))}return l}function zi(n){return this instanceof zi?(this.v=n,this):new zi(n)}function ck(n,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(n,t||[]),l,c=[];return l={},u("next"),u("throw"),u("return"),l[Symbol.asyncIterator]=function(){return this},l;function u(b){i[b]&&(l[b]=function(w){return new Promise(function(x,S){c.push([b,w,x,S])>1||d(b,w)})})}function d(b,w){try{m(i[b](w))}catch(x){v(c[0][3],x)}}function m(b){b.value instanceof zi?Promise.resolve(b.value.v).then(p,y):v(c[0][2],b)}function p(b){d("next",b)}function y(b){d("throw",b)}function v(b,w){b(w),c.shift(),c.length&&d(c[0][0],c[0][1])}}const bp=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function uk(n){const t=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=fk(t),[i,l]=r.tee();return{stream:hk(i),response:dk(l)}}async function dk(n){const t=[],r=n.getReader();for(;;){const{done:i,value:l}=await r.read();if(i)return sh(mk(t));t.push(l)}}function hk(n){return ck(this,arguments,function*(){const r=n.getReader();for(;;){const{value:i,done:l}=yield zi(r.read());if(l)break;yield yield zi(sh(i))}})}function fk(n){const t=n.getReader();return new ReadableStream({start(i){let l="";return c();function c(){return t.read().then(({value:u,done:d})=>{if(d){if(l.trim()){i.error(new $t("Failed to parse stream"));return}i.close();return}l+=u;let m=l.match(bp),p;for(;m;){try{p=JSON.parse(m[1])}catch{i.error(new $t(`Error parsing JSON response: "${m[1]}"`));return}i.enqueue(p),l=l.substring(m[0].length),m=l.match(bp)}return c()}).catch(u=>{let d=u;throw d.stack=u.stack,d.name==="AbortError"?d=new zy("Request aborted when reading from the stream"):d=new $t("Error reading from the stream"),d})}}})}function mk(n){const t=n[n.length-1],r={promptFeedback:t?.promptFeedback};for(const i of n){if(i.candidates){let l=0;for(const c of i.candidates)if(r.candidates||(r.candidates=[]),r.candidates[l]||(r.candidates[l]={index:l}),r.candidates[l].citationMetadata=c.citationMetadata,r.candidates[l].groundingMetadata=c.groundingMetadata,r.candidates[l].finishReason=c.finishReason,r.candidates[l].finishMessage=c.finishMessage,r.candidates[l].safetyRatings=c.safetyRatings,c.content&&c.content.parts){r.candidates[l].content||(r.candidates[l].content={role:c.content.role||"user",parts:[]});const u={};for(const d of c.content.parts)d.text&&(u.text=d.text),d.functionCall&&(u.functionCall=d.functionCall),d.executableCode&&(u.executableCode=d.executableCode),d.codeExecutionResult&&(u.codeExecutionResult=d.codeExecutionResult),Object.keys(u).length===0&&(u.text=""),r.candidates[l].content.parts.push(u)}l++}i.usageMetadata&&(r.usageMetadata=i.usageMetadata)}return r}async function Ly(n,t,r,i){const l=await Pi(t,Sr.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(r),i);return uk(l)}async function $y(n,t,r,i){const c=await(await Pi(t,Sr.GENERATE_CONTENT,n,!1,JSON.stringify(r),i)).json();return{response:sh(c)}}function By(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Li(n){let t=[];if(typeof n=="string")t=[{text:n}];else for(const r of n)typeof r=="string"?t.push({text:r}):t.push(r);return gk(t)}function gk(n){const t={role:"user",parts:[]},r={role:"function",parts:[]};let i=!1,l=!1;for(const c of n)"functionResponse"in c?(r.parts.push(c),l=!0):(t.parts.push(c),i=!0);if(i&&l)throw new $t("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!l)throw new $t("No content is provided for sending chat message.");return i?t:r}function pk(n,t){var r;let i={model:t?.model,generationConfig:t?.generationConfig,safetySettings:t?.safetySettings,tools:t?.tools,toolConfig:t?.toolConfig,systemInstruction:t?.systemInstruction,cachedContent:(r=t?.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const l=n.generateContentRequest!=null;if(n.contents){if(l)throw new Wn("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=n.contents}else if(l)i=Object.assign(Object.assign({},i),n.generateContentRequest);else{const c=Li(n);i.contents=[c]}return{generateContentRequest:i}}function wp(n){let t;return n.contents?t=n:t={contents:[Li(n)]},n.systemInstruction&&(t.systemInstruction=By(n.systemInstruction)),t}function yk(n){return typeof n=="string"||Array.isArray(n)?{content:Li(n)}:n}const xp=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],vk={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function bk(n){let t=!1;for(const r of n){const{role:i,parts:l}=r;if(!t&&i!=="user")throw new $t(`First content should be with role 'user', got ${i}`);if(!up.includes(i))throw new $t(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(up)}`);if(!Array.isArray(l))throw new $t("Content should have 'parts' property with an array of Parts");if(l.length===0)throw new $t("Each Content should have at least one part");const c={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of l)for(const m of xp)m in d&&(c[m]+=1);const u=vk[i];for(const d of xp)if(!u.includes(d)&&c[d]>0)throw new $t(`Content with role '${i}' can't contain '${d}' part`);t=!0}}function _p(n){var t;if(n.candidates===void 0||n.candidates.length===0)return!1;const r=(t=n.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const i of r.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}const Sp="SILENT_ERROR";class wk{constructor(t,r,i,l={}){this.model=r,this.params=i,this._requestOptions=l,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,i?.history&&(bk(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var i,l,c,u,d,m;await this._sendPromise;const p=Li(t),y={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(l=this.params)===null||l===void 0?void 0:l.generationConfig,tools:(c=this.params)===null||c===void 0?void 0:c.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(m=this.params)===null||m===void 0?void 0:m.cachedContent,contents:[...this._history,p]},v=Object.assign(Object.assign({},this._requestOptions),r);let b;return this._sendPromise=this._sendPromise.then(()=>$y(this._apiKey,this.model,y,v)).then(w=>{var x;if(_p(w.response)){this._history.push(p);const S=Object.assign({parts:[],role:"model"},(x=w.response.candidates)===null||x===void 0?void 0:x[0].content);this._history.push(S)}else{const S=Vn(w.response);S&&console.warn(`sendMessage() was unsuccessful. ${S}. Inspect response object for details.`)}b=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,b}async sendMessageStream(t,r={}){var i,l,c,u,d,m;await this._sendPromise;const p=Li(t),y={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(l=this.params)===null||l===void 0?void 0:l.generationConfig,tools:(c=this.params)===null||c===void 0?void 0:c.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(m=this.params)===null||m===void 0?void 0:m.cachedContent,contents:[...this._history,p]},v=Object.assign(Object.assign({},this._requestOptions),r),b=Ly(this._apiKey,this.model,y,v);return this._sendPromise=this._sendPromise.then(()=>b).catch(w=>{throw new Error(Sp)}).then(w=>w.response).then(w=>{if(_p(w)){this._history.push(p);const x=Object.assign({},w.candidates[0].content);x.role||(x.role="model"),this._history.push(x)}else{const x=Vn(w);x&&console.warn(`sendMessageStream() was unsuccessful. ${x}. Inspect response object for details.`)}}).catch(w=>{w.message!==Sp&&console.error(w)}),b}}async function xk(n,t,r,i){return(await Pi(t,Sr.COUNT_TOKENS,n,!1,JSON.stringify(r),i)).json()}async function _k(n,t,r,i){return(await Pi(t,Sr.EMBED_CONTENT,n,!1,JSON.stringify(r),i)).json()}async function Sk(n,t,r,i){const l=r.requests.map(u=>Object.assign(Object.assign({},u),{model:t}));return(await Pi(t,Sr.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:l}),i)).json()}class Ep{constructor(t,r,i={}){this.apiKey=t,this._requestOptions=i,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=By(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var i;const l=wp(t),c=Object.assign(Object.assign({},this._requestOptions),r);return $y(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},l),c)}async generateContentStream(t,r={}){var i;const l=wp(t),c=Object.assign(Object.assign({},this._requestOptions),r);return Ly(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},l),c)}startChat(t){var r;return new wk(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const i=pk(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),l=Object.assign(Object.assign({},this._requestOptions),r);return xk(this.apiKey,this.model,i,l)}async embedContent(t,r={}){const i=yk(t),l=Object.assign(Object.assign({},this._requestOptions),r);return _k(this.apiKey,this.model,i,l)}async batchEmbedContents(t,r={}){const i=Object.assign(Object.assign({},this._requestOptions),r);return Sk(this.apiKey,this.model,t,i)}}class Hy{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new $t("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Ep(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,i){if(!t.name)throw new Wn("Cached content must contain a `name` field.");if(!t.model)throw new Wn("Cached content must contain a `model` field.");const l=["model","systemInstruction"];for(const u of l)if(r?.[u]&&t[u]&&r?.[u]!==t[u]){if(u==="model"){const d=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,m=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(d===m)continue}throw new Wn(`Different value for "${u}" specified in modelParams (${r[u]}) and cachedContent (${t[u]})`)}const c=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new Ep(this.apiKey,c,i)}}async function qy(n,t="tr",r=null){const i=Array.isArray(n)?n:[n],l=3,c=2e3;let u;for(let d=0;d<=l;d++)try{return d>0&&(console.log(`Attempt ${d+1} of ${l+1}...`),await new Promise(m=>setTimeout(m,c))),await Ek(i,t,r)}catch(m){if(u=m,!(m.message.includes("503")||m.message.includes("429")||m.message.includes("overloaded")||m.message.includes("Server Error")))throw m;console.warn(`Analysis attempt ${d+1} failed:`,m.message)}throw u}async function Ek(n,t,r){let i="";r&&r.trim().length>0&&(i=`The user identifies this plant as "${r}". Use this as context but verify visually.`);const l=`
    You are an expert Phytopathologist. Analyze the provided plant image(s).
    ${i}
    OUTPUT MUST BE IN ${t==="en"?"ENGLISH":"TURKISH"}.

    PROTOCOL:
    1. If the image is not a plant, return {"status": "error", "error": "NOT_PLANT"}
    2. If the ailment is unclear, the image is blurry, or you need a closer look (macro shot) to be at least 70% confident, return:
       {"status": "needs_details", "message": "Please take a closer photo of the affected leaf or area."}
    3. If confident, return a valid JSON object:
    {
        "status": "success",
        "plant_name": "Common Plant Name (e.g. Tomato, Rose)",
        "plant_latin_name": "Latin Name of the Plant (e.g. Solanum lycopersicum)",
        "disease_name": "Disease Name",
        "disease_latin_name": "Latin Name of the Disease/Pathogen (if applicable)",
        "confidence": 90,
        "urgency": 50,
        "spread_risk": 40,
        "is_treatable": true, // false if plant is dead, rotten beyond saving, or abiotic stress that cannot be reversed
        "description": "Short description (max 2 sentences).",
        "treatment_steps": ["Step 1", "Step 2", "Step 3"], // Only if is_treatable is true
        "preventive_measures": ["Tip 1", "Tip 2"] // If not treatable or general advice
    }
    
    Return ONLY valid raw JSON (no markdown, no backticks).
  `,c=[{text:l}];n.forEach(d=>{if(!d)return;const m=d.includes(",")?d.split(",")[1]:d;c.push({inline_data:{mime_type:"image/jpeg",data:m}})});const u={contents:[{parts:c}],safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_LOW_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]};try{const d=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!d.ok){const p=await d.text();throw console.error("Backend Error Response:",p),p.trim().startsWith("<")||p.includes("A server error")?new Error("Backend function not available. Please verify server status."):new Error(`Server Error: ${d.status} ${d.statusText}`)}const m=await d.json();if(m.error)throw new Error(m.error.message||"API Connection Error");if(m.plant_name||m.status)return m;if(m.candidates&&m.candidates[0].content){const y=m.candidates[0].content.parts[0].text.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(y)}throw new Error("Invalid response structure from AI")}catch(d){console.warn("Backend analysis failed, attempting client-side fallback...",d);const m="AIzaSyC2aYSoTNOkcmHd-SwQlUI1TNPnZAcAqqE";try{const y=new Hy(m).getGenerativeModel({model:"gemini-2.5-flash"}),b=[l];n.forEach(T=>{if(!T)return;const U=T.includes(",")?T.split(",")[1]:T;b.push({inlineData:{data:U,mimeType:"image/jpeg"}})});const A=(await(await y.generateContent(b)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(A)}catch(p){throw console.error("Fallback also failed:",p),new Error(p.message||"AI Diagnosis completely failed.")}}}async function kk(n="tr"){const t=["A common garden pest (e.g., aphids, spider mites)","A fascinating fungal disease (e.g., powdery mildew)","An interesting beneficial insect (e.g., ladybugs)","A weird or cool plant adaptation","A tip for organic gardening"],i=`
    Generate a short, engaging "Daily Plant Fact" for a community of gardeners.
    Topic: ${t[Math.floor(Math.random()*t.length)]}
    Language: ${n==="en"?"ENGLISH":"TURKISH"}

    The tone should be fun, educational, and slightly informal (like a friendly bot).
    
    Return a VALID JSON object with this structure:
    {
        "title": "Catchy Title",
        "content": "One or two short paragraphs of interesting info. No markdown.",
        "imageKeyword": "A precise English keyword to search for an image (e.g. 'ladybug leaf', 'powdery mildew rose')",
        "type": "tip" | "pest" | "disease" | "fun_fact"
    }
    
    Ensure the content is accurate but simple to read.
    Return ONLY valid raw JSON (no markdown block).
    `;try{const l="AIzaSyC2aYSoTNOkcmHd-SwQlUI1TNPnZAcAqqE",y=(await(await new Hy(l).getGenerativeModel({model:"gemini-2.5-flash"}).generateContent(i)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(y)}catch(l){return console.error("Daily fact generation failed:",l),{title:n==="tr"?"Bitki Dostu pucu":"Plant Friendly Tip",content:n==="tr"?"Bitkilerinizi sabah erken saatlerde sulamak, suyun buharlamadan kklere ulamasn salar.":"Watering your plants early in the morning ensures water reaches the roots before evaporating.",imageKeyword:"watering plants",type:"tip"}}}async function Iy(n,t,r,i,l=!1){try{const c=r.main||null,u=r.macro||null,{data:d,error:m}=await ce.from("analyses").insert({user_id:n,plant_type:t,main_image:c,macro_image:u,result:i,is_public:l,status:"active",next_checkup:new Date(Date.now()+10080*60*1e3).toISOString()}).select().single();if(m)throw m;return d.id}catch(c){throw console.error("Error saving analysis:",c),c}}async function Py(n){try{const{data:t,error:r}=await ce.from("analyses").select("*, analysis_updates(*)").eq("user_id",n).order("created_at",{ascending:!1});if(r)throw r;return t.map(i=>({id:i.id,userId:i.user_id,plantType:i.plant_type,mainImage:i.main_image,macroImage:i.macro_image,result:i.result,isPublic:i.is_public,status:i.status,createdAt:{seconds:new Date(i.created_at).getTime()/1e3},updates:(i.analysis_updates||[]).map(l=>({imageUrl:l.image_url,note:l.note,createdAt:{seconds:new Date(l.created_at).getTime()/1e3}}))}))}catch(t){return console.error("Error fetching analyses:",t),[]}}async function Gy(n){try{await ce.from("posts").delete().eq("related_analysis_id",n);const{error:t}=await ce.from("analyses").delete().eq("id",n);if(t)throw t;return!0}catch(t){throw console.error("Error deleting analysis:",t),t}}async function Ky(n,t){try{const r={};if(t.isPublic!==void 0&&(r.is_public=t.isPublic),Object.keys(r).length===0)return;const{error:i}=await ce.from("analyses").update(r).eq("id",n);if(i)throw i}catch(r){throw console.error("Error updating analysis:",r),r}}async function ih(n,t,r){try{const{error:i}=await ce.from("posts").insert({user_id:n,author_name:t.authorName||"Gardener",title:t.title||"",content:t.content,image_url:t.image,plant_type:t.plantType||"Unknown",likes:[],comments:[],related_analysis_id:t.relatedAnalysisId||null});if(i)throw i;return!0}catch(i){throw console.error("Error creating post:",i),i}}async function Vy(n,t,r,i="Gardener",l=null){try{const c=t.result.plant_latin_name||t.result.latin_name||"",u=t.result.disease_latin_name||(c?"":t.result.latin_name)||"",d=`${r}${c?` (${c})`:""}`;let m=`Analiz Sonucu: ${t.result.disease_name}${u&&u!==t.result.disease_name?` (${u})`:""}

${t.result.description}`;return t.result.is_treatable===!1?t.result.preventive_measures?.length>0&&(m+=`

 Koruyucu nlemler:
`+t.result.preventive_measures.map(p=>` ${p}`).join(`
`)):t.result.treatment_steps?.length>0&&(m+=`

 Tedavi Admlar:
`+t.result.treatment_steps.map(p=>` ${p}`).join(`
`)),await ih(t.userId,{authorName:i,title:d,content:m,image:t.mainImage,plantType:r,relatedAnalysisId:n}),await Ky(n,{isPublic:!0}),!0}catch(c){throw console.error("Error sharing to community:",c),c}}async function Yy(n,t,r){try{const{error:i}=await ce.from("analysis_updates").insert({analysis_id:n,image_url:t,note:r});if(i)throw i;return!0}catch(i){throw console.error("Error adding feedback:",i),i}}async function Fy(n){try{const{data:t}=await ce.from("posts").select("related_analysis_id").eq("id",n).single();t?.related_analysis_id&&await ce.from("analyses").update({is_public:!1}).eq("id",t.related_analysis_id);const{error:r}=await ce.from("posts").delete().eq("id",n);if(r)throw r;return!0}catch(t){throw console.error("Error deleting post:",t),t}}async function Wy(n,t){try{const{data:r,error:i}=await ce.rpc("toggle_like",{post_id:n,user_id:t});if(i){const{data:l}=await ce.from("posts").select("likes").eq("id",n).single();if(l){const c=l.likes||[],u=c.includes(t)?c.filter(d=>d!==t):[...c,t];await ce.from("posts").update({likes:u}).eq("id",n)}}}catch(r){throw console.error("Error toggling like:",r),r}}async function Xy(n,t,r,i){try{const l={userId:t,userName:r,text:i,createdAt:new Date().toISOString()},{data:c}=await ce.from("posts").select("comments").eq("id",n).single();if(c){const u=c.comments||[];await ce.from("posts").update({comments:[...u,l]}).eq("id",n)}return!0}catch(l){throw console.error("Error adding comment:",l),l}}async function Qy(n,t){try{const{error:r}=await ce.from("posts").update(t).eq("id",n);if(r)throw r;return!0}catch(r){throw console.error("Error updating post:",r),r}}async function jk(n,t,r,i){try{if(n===t)throw new Error("Cannot start chat with yourself.");const l=[n,t].sort(),{data:c}=await ce.from("chats").select("id").contains("participants",l);let u;if(c&&c.length>0)u=c[0].id;else{const{data:d,error:m}=await ce.from("chats").insert({participants:l,participant_metadata:{[t]:r,[n]:i},last_message:""}).select().single();if(m)throw m;u=d.id}return u}catch(l){throw console.error("Error starting chat:",l),l}}async function qd(n,t,r){try{const{error:i}=await ce.from("posts").update({author_name:t,user_avatar:r}).eq("user_id",n);if(i)throw i;return!0}catch(i){return console.error("Error syncing user profile to posts:",i),!1}}const Nk=Object.freeze(Object.defineProperty({__proto__:null,addComment:Xy,addFeedbackUpdate:Yy,createPost:ih,deleteAnalysis:Gy,deletePost:Fy,getUserAnalyses:Py,saveAnalysis:Iy,shareAnalysisToCommunity:Vy,startChat:jk,toggleLike:Wy,updateAnalysisStatus:Ky,updatePost:Qy,updateUserPostsName:qd},Symbol.toStringTag,{value:"Module"}));function Ak({result:n,onReset:t}){const{t:r}=nt();return n?n.error==="NOT_PLANT"?f.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden p-8 text-center",children:[f.jsx("div",{className:"mx-auto bg-red-100 dark:bg-red-900/30 w-16 h-16 rounded-full flex items-center justify-center mb-4",children:f.jsx(Hd,{className:"w-8 h-8 text-red-600 dark:text-red-500"})}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Could not identify plant"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please ensure the photo contains a clear view of a plant leaf or stem."}),f.jsx("button",{onClick:t,className:"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-xl font-medium transition-colors",children:"Try Again"})]}):f.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fade-in",children:[f.jsx("div",{className:"bg-green-600 text-white p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-3xl font-bold",children:n.disease_name}),f.jsxs("div",{className:"flex flex-col",children:[n.plant_name&&f.jsx("span",{className:"text-lg font-medium opacity-90",children:n.plant_name}),f.jsx("span",{className:"opacity-75 italic text-sm",children:n.latin_name})]})]}),f.jsxs("div",{className:"flex flex-col items-end",children:[f.jsxs("div",{className:"text-2xl font-bold",children:[n.confidence,"%"]}),f.jsx("div",{className:"text-xs uppercase opacity-75",children:r("confidence")})]})]})}),f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-xl border border-orange-100 dark:border-orange-900/20",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1 text-orange-700 dark:text-orange-500 font-semibold",children:[f.jsx(th,{className:"w-5 h-5"}),f.jsx("span",{children:r("urgency")})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:f.jsx("div",{className:"bg-orange-600 h-2.5 rounded-full",style:{width:`${n.urgency}%`}})})]}),f.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-900/20",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1 text-blue-700 dark:text-blue-500 font-semibold",children:[f.jsx(Zt,{className:"w-5 h-5"}),f.jsx("span",{children:r("spread_risk")})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:f.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${n.spread_risk}%`}})})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:r("description")}),f.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:n.description})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:n.is_treatable===!1?r("prevention_tips")||"Koruyucu nlemler & Tavsiyeler":r("treatment")}),n.is_treatable===!1&&f.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-xl text-sm border border-red-100 dark:border-red-900/30 flex gap-3",children:[f.jsx(Hd,{className:"w-5 h-5 flex-shrink-0"}),f.jsx("p",{children:r("plant_not_recoverable")||"Bu bitki iin tedavi uygulanamayabilir veya kurtarlmas zor olabilir. Aadaki nlemler ile dier bitkilerinizi koruyabilirsiniz."})]}),f.jsx("ul",{className:"space-y-3",children:(n.is_treatable===!1?n.preventive_measures:n.treatment_steps)?.map((i,l)=>f.jsxs("li",{className:"flex gap-3",children:[f.jsx(zo,{className:`w-6 h-6 flex-shrink-0 ${n.is_treatable===!1?"text-orange-500":"text-green-600"}`}),f.jsx("span",{className:"text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg flex-1",children:i})]},l))})]}),f.jsx("div",{className:"pt-4 flex gap-4",children:f.jsx("button",{onClick:t,className:"flex-1 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white py-3 rounded-xl font-medium transition-colors",children:r("new_scan")})})]})]}):null}function Tk({isOpen:n,onClose:t,onCapture:r}){const i=O.useRef(null),l=O.useRef(null),[c,u]=O.useState(null),[d,m]=O.useState(""),{t:p}=nt();O.useEffect(()=>(n?y():v(),()=>v()),[n]);const y=async()=>{m("");try{const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});u(w),i.current&&(i.current.srcObject=w)}catch(w){console.error("Camera Error:",w),m(p("camera_permission_denied")||"Camera access denied or not available.")}},v=()=>{c&&(c.getTracks().forEach(w=>w.stop()),u(null))},b=()=>{if(i.current&&l.current){const w=i.current,x=l.current;x.width=w.videoWidth,x.height=w.videoHeight,x.getContext("2d").drawImage(w,0,0,x.width,x.height);const A=x.toDataURL("image/jpeg",.9);r(A),t()}};return n?f.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 flex items-center justify-center p-4 animate-fade-in",children:f.jsxs("div",{className:"relative w-full max-w-lg bg-black rounded-3xl overflow-hidden shadow-2xl border border-gray-800",children:[f.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-10 bg-gradient-to-b from-black/60 to-transparent",children:[f.jsx("span",{className:"text-white font-medium",children:p("take_photo")}),f.jsx("button",{onClick:t,className:"p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors",children:f.jsx(Ta,{className:"w-6 h-6"})})]}),f.jsx("div",{className:"relative aspect-[3/4] bg-gray-900 flex items-center justify-center",children:d?f.jsxs("div",{className:"text-center p-6 text-red-400",children:[f.jsx(by,{className:"w-12 h-12 mx-auto mb-3 opacity-80"}),f.jsx("p",{children:d}),f.jsx("button",{onClick:y,className:"mt-4 px-4 py-2 bg-gray-800 rounded-lg text-white text-sm hover:bg-gray-700",children:p("retry")||"Retry"})]}):f.jsx("video",{ref:i,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})}),f.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 flex justify-center items-center bg-gradient-to-t from-black/80 to-transparent",children:!d&&f.jsx("button",{onClick:b,className:"group relative",children:f.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-white flex items-center justify-center transition-transform group-active:scale-95",children:f.jsx("div",{className:"w-16 h-16 bg-white rounded-full"})})})}),f.jsx("canvas",{ref:l,className:"hidden"})]})}):null}function Ck(n,t){return t.forEach((function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach((function(i){if(i!=="default"&&!(i in n)){var l=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(n,i,l.get?l:{enumerable:!0,get:function(){return r[i]}})}}))})),Object.freeze(n)}function Jy(n,t){return new Promise((function(r,i){let l;return Rk(n).then((function(c){try{return l=c,r(new Blob([t.slice(0,2),l,t.slice(2)],{type:"image/jpeg"}))}catch(u){return i(u)}}),i)}))}const Rk=n=>new Promise(((t,r)=>{const i=new FileReader;i.addEventListener("load",(({target:{result:l}})=>{const c=new DataView(l);let u=0;if(c.getUint16(u)!==65496)return r("not a valid JPEG");for(u+=2;;){const d=c.getUint16(u);if(d===65498)break;const m=c.getUint16(u+2);if(d===65505&&c.getUint32(u+4)===1165519206){const p=u+10;let y;switch(c.getUint16(p)){case 18761:y=!0;break;case 19789:y=!1;break;default:return r("TIFF header contains invalid endian")}if(c.getUint16(p+2,y)!==42)return r("TIFF header contains invalid version");const v=c.getUint32(p+4,y),b=p+v+2+12*c.getUint16(p+v,y);for(let w=p+v+2;w<b;w+=12)if(c.getUint16(w,y)==274){if(c.getUint16(w+2,y)!==3)return r("Orientation data type is invalid");if(c.getUint32(w+4,y)!==1)return r("Orientation data count is invalid");c.setUint16(w+8,1,y);break}return t(l.slice(u,u+2+m))}u+=2+m}return t(new Blob)})),i.readAsArrayBuffer(n)}));var jo={},Ok={get exports(){return jo},set exports(n){jo=n}};(function(n){var t,r,i={};Ok.exports=i,i.parse=function(l,c){for(var u=i.bin.readUshort,d=i.bin.readUint,m=0,p={},y=new Uint8Array(l),v=y.length-4;d(y,v)!=101010256;)v--;m=v,m+=4;var b=u(y,m+=4);u(y,m+=2);var w=d(y,m+=2),x=d(y,m+=4);m+=4,m=x;for(var S=0;S<b;S++){d(y,m),m+=4,m+=4,m+=4,d(y,m+=4),w=d(y,m+=4);var A=d(y,m+=4),T=u(y,m+=4),U=u(y,m+2),M=u(y,m+4);m+=6;var $=d(y,m+=8);m+=4,m+=T+U+M,i._readLocal(y,$,p,w,A,c)}return p},i._readLocal=function(l,c,u,d,m,p){var y=i.bin.readUshort,v=i.bin.readUint;v(l,c),y(l,c+=4),y(l,c+=2);var b=y(l,c+=2);v(l,c+=2),v(l,c+=4),c+=4;var w=y(l,c+=8),x=y(l,c+=2);c+=2;var S=i.bin.readUTF8(l,c,w);if(c+=w,c+=x,p)u[S]={size:m,csize:d};else{var A=new Uint8Array(l.buffer,c);if(b==0)u[S]=new Uint8Array(A.buffer.slice(c,c+d));else{if(b!=8)throw"unknown compression method: "+b;var T=new Uint8Array(m);i.inflateRaw(A,T),u[S]=T}}},i.inflateRaw=function(l,c){return i.F.inflate(l,c)},i.inflate=function(l,c){return l[0],l[1],i.inflateRaw(new Uint8Array(l.buffer,l.byteOffset+2,l.length-6),c)},i.deflate=function(l,c){c==null&&(c={level:6});var u=0,d=new Uint8Array(50+Math.floor(1.1*l.length));d[u]=120,d[u+1]=156,u+=2,u=i.F.deflateRaw(l,d,u,c.level);var m=i.adler(l,0,l.length);return d[u+0]=m>>>24&255,d[u+1]=m>>>16&255,d[u+2]=m>>>8&255,d[u+3]=m>>>0&255,new Uint8Array(d.buffer,0,u+4)},i.deflateRaw=function(l,c){c==null&&(c={level:6});var u=new Uint8Array(50+Math.floor(1.1*l.length)),d=i.F.deflateRaw(l,u,d,c.level);return new Uint8Array(u.buffer,0,d)},i.encode=function(l,c){c==null&&(c=!1);var u=0,d=i.bin.writeUint,m=i.bin.writeUshort,p={};for(var y in l){var v=!i._noNeed(y)&&!c,b=l[y],w=i.crc.crc(b,0,b.length);p[y]={cpr:v,usize:b.length,crc:w,file:v?i.deflateRaw(b):b}}for(var y in p)u+=p[y].file.length+30+46+2*i.bin.sizeUTF8(y);u+=22;var x=new Uint8Array(u),S=0,A=[];for(var y in p){var T=p[y];A.push(S),S=i._writeHeader(x,S,y,T,0)}var U=0,M=S;for(var y in p)T=p[y],A.push(S),S=i._writeHeader(x,S,y,T,1,A[U++]);var $=S-M;return d(x,S,101010256),S+=4,m(x,S+=4,U),m(x,S+=2,U),d(x,S+=2,$),d(x,S+=4,M),S+=4,S+=2,x.buffer},i._noNeed=function(l){var c=l.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(c)!=-1},i._writeHeader=function(l,c,u,d,m,p){var y=i.bin.writeUint,v=i.bin.writeUshort,b=d.file;return y(l,c,m==0?67324752:33639248),c+=4,m==1&&(c+=2),v(l,c,20),v(l,c+=2,0),v(l,c+=2,d.cpr?8:0),y(l,c+=2,0),y(l,c+=4,d.crc),y(l,c+=4,b.length),y(l,c+=4,d.usize),v(l,c+=4,i.bin.sizeUTF8(u)),v(l,c+=2,0),c+=2,m==1&&(c+=2,c+=2,y(l,c+=6,p),c+=4),c+=i.bin.writeUTF8(l,c,u),m==0&&(l.set(b,c),c+=b.length),c},i.crc={table:(function(){for(var l=new Uint32Array(256),c=0;c<256;c++){for(var u=c,d=0;d<8;d++)1&u?u=3988292384^u>>>1:u>>>=1;l[c]=u}return l})(),update:function(l,c,u,d){for(var m=0;m<d;m++)l=i.crc.table[255&(l^c[u+m])]^l>>>8;return l},crc:function(l,c,u){return 4294967295^i.crc.update(4294967295,l,c,u)}},i.adler=function(l,c,u){for(var d=1,m=0,p=c,y=c+u;p<y;){for(var v=Math.min(p+5552,y);p<v;)m+=d+=l[p++];d%=65521,m%=65521}return m<<16|d},i.bin={readUshort:function(l,c){return l[c]|l[c+1]<<8},writeUshort:function(l,c,u){l[c]=255&u,l[c+1]=u>>8&255},readUint:function(l,c){return 16777216*l[c+3]+(l[c+2]<<16|l[c+1]<<8|l[c])},writeUint:function(l,c,u){l[c]=255&u,l[c+1]=u>>8&255,l[c+2]=u>>16&255,l[c+3]=u>>24&255},readASCII:function(l,c,u){for(var d="",m=0;m<u;m++)d+=String.fromCharCode(l[c+m]);return d},writeASCII:function(l,c,u){for(var d=0;d<u.length;d++)l[c+d]=u.charCodeAt(d)},pad:function(l){return l.length<2?"0"+l:l},readUTF8:function(l,c,u){for(var d,m="",p=0;p<u;p++)m+="%"+i.bin.pad(l[c+p].toString(16));try{d=decodeURIComponent(m)}catch{return i.bin.readASCII(l,c,u)}return d},writeUTF8:function(l,c,u){for(var d=u.length,m=0,p=0;p<d;p++){var y=u.charCodeAt(p);if((4294967168&y)==0)l[c+m]=y,m++;else if((4294965248&y)==0)l[c+m]=192|y>>6,l[c+m+1]=128|y>>0&63,m+=2;else if((4294901760&y)==0)l[c+m]=224|y>>12,l[c+m+1]=128|y>>6&63,l[c+m+2]=128|y>>0&63,m+=3;else{if((4292870144&y)!=0)throw"e";l[c+m]=240|y>>18,l[c+m+1]=128|y>>12&63,l[c+m+2]=128|y>>6&63,l[c+m+3]=128|y>>0&63,m+=4}}return m},sizeUTF8:function(l){for(var c=l.length,u=0,d=0;d<c;d++){var m=l.charCodeAt(d);if((4294967168&m)==0)u++;else if((4294965248&m)==0)u+=2;else if((4294901760&m)==0)u+=3;else{if((4292870144&m)!=0)throw"e";u+=4}}return u}},i.F={},i.F.deflateRaw=function(l,c,u,d){var m=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][d],p=i.F.U,y=i.F._goodIndex;i.F._hash;var v=i.F._putsE,b=0,w=u<<3,x=0,S=l.length;if(d==0){for(;b<S;)v(c,w,b+(B=Math.min(65535,S-b))==S?1:0),w=i.F._copyExact(l,b,B,c,w+8),b+=B;return w>>>3}var A=p.lits,T=p.strt,U=p.prev,M=0,$=0,K=0,R=0,D=0,E=0;for(S>2&&(T[E=i.F._hash(l,0)]=0),b=0;b<S;b++){if(D=E,b+1<S-2){E=i.F._hash(l,b+1);var j=b+1&32767;U[j]=T[E],T[E]=j}if(x<=b){(M>14e3||$>26697)&&S-b>100&&(x<b&&(A[M]=b-x,M+=2,x=b),w=i.F._writeBlock(b==S-1||x==S?1:0,A,M,R,l,K,b-K,c,w),M=$=R=0,K=b);var z=0;b<S-2&&(z=i.F._bestMatch(l,b,U,D,Math.min(m[2],S-b),m[3]));var B=z>>>16,I=65535&z;if(z!=0){I=65535&z;var F=y(B=z>>>16,p.of0);p.lhst[257+F]++;var q=y(I,p.df0);p.dhst[q]++,R+=p.exb[F]+p.dxb[q],A[M]=B<<23|b-x,A[M+1]=I<<16|F<<8|q,M+=2,x=b+B}else p.lhst[l[b]]++;$++}}for(K==b&&l.length!=0||(x<b&&(A[M]=b-x,M+=2,x=b),w=i.F._writeBlock(1,A,M,R,l,K,b-K,c,w),M=0,$=0,M=$=R=0,K=b);(7&w)!=0;)w++;return w>>>3},i.F._bestMatch=function(l,c,u,d,m,p){var y=32767&c,v=u[y],b=y-v+32768&32767;if(v==y||d!=i.F._hash(l,c-b))return 0;for(var w=0,x=0,S=Math.min(32767,c);b<=S&&--p!=0&&v!=y;){if(w==0||l[c+w]==l[c+w-b]){var A=i.F._howLong(l,c,b);if(A>w){if(x=b,(w=A)>=m)break;b+2<A&&(A=b+2);for(var T=0,U=0;U<A-2;U++){var M=c-b+U+32768&32767,$=M-u[M]+32768&32767;$>T&&(T=$,v=M)}}}b+=(y=v)-(v=u[y])+32768&32767}return w<<16|x},i.F._howLong=function(l,c,u){if(l[c]!=l[c-u]||l[c+1]!=l[c+1-u]||l[c+2]!=l[c+2-u])return 0;var d=c,m=Math.min(l.length,c+258);for(c+=3;c<m&&l[c]==l[c-u];)c++;return c-d},i.F._hash=function(l,c){return(l[c]<<8|l[c+1])+(l[c+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(l,c,u,d,m,p,y,v,b){var w,x,S,A,T,U,M,$,K,R=i.F.U,D=i.F._putsF,E=i.F._putsE;R.lhst[256]++,x=(w=i.F.getTrees())[0],S=w[1],A=w[2],T=w[3],U=w[4],M=w[5],$=w[6],K=w[7];var j=32+((b+3&7)==0?0:8-(b+3&7))+(y<<3),z=d+i.F.contSize(R.fltree,R.lhst)+i.F.contSize(R.fdtree,R.dhst),B=d+i.F.contSize(R.ltree,R.lhst)+i.F.contSize(R.dtree,R.dhst);B+=14+3*M+i.F.contSize(R.itree,R.ihst)+(2*R.ihst[16]+3*R.ihst[17]+7*R.ihst[18]);for(var I=0;I<286;I++)R.lhst[I]=0;for(I=0;I<30;I++)R.dhst[I]=0;for(I=0;I<19;I++)R.ihst[I]=0;var F=j<z&&j<B?0:z<B?1:2;if(D(v,b,l),D(v,b+1,F),b+=3,F==0){for(;(7&b)!=0;)b++;b=i.F._copyExact(m,p,y,v,b)}else{var q,X;if(F==1&&(q=R.fltree,X=R.fdtree),F==2){i.F.makeCodes(R.ltree,x),i.F.revCodes(R.ltree,x),i.F.makeCodes(R.dtree,S),i.F.revCodes(R.dtree,S),i.F.makeCodes(R.itree,A),i.F.revCodes(R.itree,A),q=R.ltree,X=R.dtree,E(v,b,T-257),E(v,b+=5,U-1),E(v,b+=5,M-4),b+=4;for(var N=0;N<M;N++)E(v,b+3*N,R.itree[1+(R.ordr[N]<<1)]);b+=3*M,b=i.F._codeTiny($,R.itree,v,b),b=i.F._codeTiny(K,R.itree,v,b)}for(var k=p,Q=0;Q<u;Q+=2){for(var G=c[Q],Y=G>>>23,L=k+(8388607&G);k<L;)b=i.F._writeLit(m[k++],q,v,b);if(Y!=0){var H=c[Q+1],ee=H>>16,Z=H>>8&255,J=255&H;E(v,b=i.F._writeLit(257+Z,q,v,b),Y-R.of0[Z]),b+=R.exb[Z],D(v,b=i.F._writeLit(J,X,v,b),ee-R.df0[J]),b+=R.dxb[J],k+=Y}}b=i.F._writeLit(256,q,v,b)}return b},i.F._copyExact=function(l,c,u,d,m){var p=m>>>3;return d[p]=u,d[p+1]=u>>>8,d[p+2]=255-d[p],d[p+3]=255-d[p+1],p+=4,d.set(new Uint8Array(l.buffer,c,u),p),m+(u+4<<3)},i.F.getTrees=function(){for(var l=i.F.U,c=i.F._hufTree(l.lhst,l.ltree,15),u=i.F._hufTree(l.dhst,l.dtree,15),d=[],m=i.F._lenCodes(l.ltree,d),p=[],y=i.F._lenCodes(l.dtree,p),v=0;v<d.length;v+=2)l.ihst[d[v]]++;for(v=0;v<p.length;v+=2)l.ihst[p[v]]++;for(var b=i.F._hufTree(l.ihst,l.itree,7),w=19;w>4&&l.itree[1+(l.ordr[w-1]<<1)]==0;)w--;return[c,u,b,m,y,w,d,p]},i.F.getSecond=function(l){for(var c=[],u=0;u<l.length;u+=2)c.push(l[u+1]);return c},i.F.nonZero=function(l){for(var c="",u=0;u<l.length;u+=2)l[u+1]!=0&&(c+=(u>>1)+",");return c},i.F.contSize=function(l,c){for(var u=0,d=0;d<c.length;d++)u+=c[d]*l[1+(d<<1)];return u},i.F._codeTiny=function(l,c,u,d){for(var m=0;m<l.length;m+=2){var p=l[m],y=l[m+1];d=i.F._writeLit(p,c,u,d);var v=p==16?2:p==17?3:7;p>15&&(i.F._putsE(u,d,y,v),d+=v)}return d},i.F._lenCodes=function(l,c){for(var u=l.length;u!=2&&l[u-1]==0;)u-=2;for(var d=0;d<u;d+=2){var m=l[d+1],p=d+3<u?l[d+3]:-1,y=d+5<u?l[d+5]:-1,v=d==0?-1:l[d-1];if(m==0&&p==m&&y==m){for(var b=d+5;b+2<u&&l[b+2]==m;)b+=2;(w=Math.min(b+1-d>>>1,138))<11?c.push(17,w-3):c.push(18,w-11),d+=2*w-2}else if(m==v&&p==m&&y==m){for(b=d+5;b+2<u&&l[b+2]==m;)b+=2;var w=Math.min(b+1-d>>>1,6);c.push(16,w-3),d+=2*w-2}else c.push(m,0)}return u>>>1},i.F._hufTree=function(l,c,u){var d=[],m=l.length,p=c.length,y=0;for(y=0;y<p;y+=2)c[y]=0,c[y+1]=0;for(y=0;y<m;y++)l[y]!=0&&d.push({lit:y,f:l[y]});var v=d.length,b=d.slice(0);if(v==0)return 0;if(v==1){var w=d[0].lit;return b=w==0?1:0,c[1+(w<<1)]=1,c[1+(b<<1)]=1,1}d.sort((function($,K){return $.f-K.f}));var x=d[0],S=d[1],A=0,T=1,U=2;for(d[0]={lit:-1,f:x.f+S.f,l:x,r:S,d:0};T!=v-1;)x=A!=T&&(U==v||d[A].f<d[U].f)?d[A++]:d[U++],S=A!=T&&(U==v||d[A].f<d[U].f)?d[A++]:d[U++],d[T++]={lit:-1,f:x.f+S.f,l:x,r:S};var M=i.F.setDepth(d[T-1],0);for(M>u&&(i.F.restrictDepth(b,u,M),M=u),y=0;y<v;y++)c[1+(b[y].lit<<1)]=b[y].d;return M},i.F.setDepth=function(l,c){return l.lit!=-1?(l.d=c,c):Math.max(i.F.setDepth(l.l,c+1),i.F.setDepth(l.r,c+1))},i.F.restrictDepth=function(l,c,u){var d=0,m=1<<u-c,p=0;for(l.sort((function(v,b){return b.d==v.d?v.f-b.f:b.d-v.d})),d=0;d<l.length&&l[d].d>c;d++){var y=l[d].d;l[d].d=c,p+=m-(1<<u-y)}for(p>>>=u-c;p>0;)(y=l[d].d)<c?(l[d].d++,p-=1<<c-y-1):d++;for(;d>=0;d--)l[d].d==c&&p<0&&(l[d].d--,p++);p!=0&&console.log("debt left")},i.F._goodIndex=function(l,c){var u=0;return c[16|u]<=l&&(u|=16),c[8|u]<=l&&(u|=8),c[4|u]<=l&&(u|=4),c[2|u]<=l&&(u|=2),c[1|u]<=l&&(u|=1),u},i.F._writeLit=function(l,c,u,d){return i.F._putsF(u,d,c[l<<1]),d+c[1+(l<<1)]},i.F.inflate=function(l,c){var u=Uint8Array;if(l[0]==3&&l[1]==0)return c||new u(0);var d=i.F,m=d._bitsF,p=d._bitsE,y=d._decodeTiny,v=d.makeCodes,b=d.codes2map,w=d._get17,x=d.U,S=c==null;S&&(c=new u(l.length>>>2<<3));for(var A,T,U=0,M=0,$=0,K=0,R=0,D=0,E=0,j=0,z=0;U==0;)if(U=m(l,z,1),M=m(l,z+1,2),z+=3,M!=0){if(S&&(c=i.F._check(c,j+(1<<17))),M==1&&(A=x.flmap,T=x.fdmap,D=511,E=31),M==2){$=p(l,z,5)+257,K=p(l,z+5,5)+1,R=p(l,z+10,4)+4,z+=14;for(var B=0;B<38;B+=2)x.itree[B]=0,x.itree[B+1]=0;var I=1;for(B=0;B<R;B++){var F=p(l,z+3*B,3);x.itree[1+(x.ordr[B]<<1)]=F,F>I&&(I=F)}z+=3*R,v(x.itree,I),b(x.itree,I,x.imap),A=x.lmap,T=x.dmap,z=y(x.imap,(1<<I)-1,$+K,l,z,x.ttree);var q=d._copyOut(x.ttree,0,$,x.ltree);D=(1<<q)-1;var X=d._copyOut(x.ttree,$,K,x.dtree);E=(1<<X)-1,v(x.ltree,q),b(x.ltree,q,A),v(x.dtree,X),b(x.dtree,X,T)}for(;;){var N=A[w(l,z)&D];z+=15&N;var k=N>>>4;if(!(k>>>8))c[j++]=k;else{if(k==256)break;var Q=j+k-254;if(k>264){var G=x.ldef[k-257];Q=j+(G>>>3)+p(l,z,7&G),z+=7&G}var Y=T[w(l,z)&E];z+=15&Y;var L=Y>>>4,H=x.ddef[L],ee=(H>>>4)+m(l,z,15&H);for(z+=15&H,S&&(c=i.F._check(c,j+(1<<17)));j<Q;)c[j]=c[j++-ee],c[j]=c[j++-ee],c[j]=c[j++-ee],c[j]=c[j++-ee];j=Q}}}else{(7&z)!=0&&(z+=8-(7&z));var Z=4+(z>>>3),J=l[Z-4]|l[Z-3]<<8;S&&(c=i.F._check(c,j+J)),c.set(new u(l.buffer,l.byteOffset+Z,J),j),z=Z+J<<3,j+=J}return c.length==j?c:c.slice(0,j)},i.F._check=function(l,c){var u=l.length;if(c<=u)return l;var d=new Uint8Array(Math.max(u<<1,c));return d.set(l,0),d},i.F._decodeTiny=function(l,c,u,d,m,p){for(var y=i.F._bitsE,v=i.F._get17,b=0;b<u;){var w=l[v(d,m)&c];m+=15&w;var x=w>>>4;if(x<=15)p[b]=x,b++;else{var S=0,A=0;x==16?(A=3+y(d,m,2),m+=2,S=p[b-1]):x==17?(A=3+y(d,m,3),m+=3):x==18&&(A=11+y(d,m,7),m+=7);for(var T=b+A;b<T;)p[b]=S,b++}}return m},i.F._copyOut=function(l,c,u,d){for(var m=0,p=0,y=d.length>>>1;p<u;){var v=l[p+c];d[p<<1]=0,d[1+(p<<1)]=v,v>m&&(m=v),p++}for(;p<y;)d[p<<1]=0,d[1+(p<<1)]=0,p++;return m},i.F.makeCodes=function(l,c){for(var u,d,m,p,y=i.F.U,v=l.length,b=y.bl_count,w=0;w<=c;w++)b[w]=0;for(w=1;w<v;w+=2)b[l[w]]++;var x=y.next_code;for(u=0,b[0]=0,d=1;d<=c;d++)u=u+b[d-1]<<1,x[d]=u;for(m=0;m<v;m+=2)(p=l[m+1])!=0&&(l[m]=x[p],x[p]++)},i.F.codes2map=function(l,c,u){for(var d=l.length,m=i.F.U.rev15,p=0;p<d;p+=2)if(l[p+1]!=0)for(var y=p>>1,v=l[p+1],b=y<<4|v,w=c-v,x=l[p]<<w,S=x+(1<<w);x!=S;)u[m[x]>>>15-c]=b,x++},i.F.revCodes=function(l,c){for(var u=i.F.U.rev15,d=15-c,m=0;m<l.length;m+=2){var p=l[m]<<c-l[m+1];l[m]=u[p]>>>d}},i.F._putsE=function(l,c,u){u<<=7&c;var d=c>>>3;l[d]|=u,l[d+1]|=u>>>8},i.F._putsF=function(l,c,u){u<<=7&c;var d=c>>>3;l[d]|=u,l[d+1]|=u>>>8,l[d+2]|=u>>>16},i.F._bitsE=function(l,c,u){return(l[c>>>3]|l[1+(c>>>3)]<<8)>>>(7&c)&(1<<u)-1},i.F._bitsF=function(l,c,u){return(l[c>>>3]|l[1+(c>>>3)]<<8|l[2+(c>>>3)]<<16)>>>(7&c)&(1<<u)-1},i.F._get17=function(l,c){return(l[c>>>3]|l[1+(c>>>3)]<<8|l[2+(c>>>3)]<<16)>>>(7&c)},i.F._get25=function(l,c){return(l[c>>>3]|l[1+(c>>>3)]<<8|l[2+(c>>>3)]<<16|l[3+(c>>>3)]<<24)>>>(7&c)},i.F.U=(t=Uint16Array,r=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new r(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new r(286),dhst:new r(30),ihst:new r(19),lits:new r(15e3),strt:new t(65536),prev:new t(32768)}),(function(){for(var l=i.F.U,c=0;c<32768;c++){var u=c;u=(4278255360&(u=(4042322160&(u=(3435973836&(u=(2863311530&u)>>>1|(1431655765&u)<<1))>>>2|(858993459&u)<<2))>>>4|(252645135&u)<<4))>>>8|(16711935&u)<<8,l.rev15[c]=(u>>>16|u<<16)>>>17}function d(m,p,y){for(;p--!=0;)m.push(0,y)}for(c=0;c<32;c++)l.ldef[c]=l.of0[c]<<3|l.exb[c],l.ddef[c]=l.df0[c]<<4|l.dxb[c];d(l.fltree,144,8),d(l.fltree,112,9),d(l.fltree,24,7),d(l.fltree,8,8),i.F.makeCodes(l.fltree,9),i.F.codes2map(l.fltree,9,l.flmap),i.F.revCodes(l.fltree,9),d(l.fdtree,32,5),i.F.makeCodes(l.fdtree,5),i.F.codes2map(l.fdtree,5,l.fdmap),i.F.revCodes(l.fdtree,5),d(l.itree,19,0),d(l.ltree,286,0),d(l.dtree,30,0),d(l.ttree,320,0)})()})();var Mk=Ck({__proto__:null,default:jo},[jo]);const Ba=(function(){var n={nextZero(y,v){for(;y[v]!=0;)v++;return v},readUshort:(y,v)=>y[v]<<8|y[v+1],writeUshort(y,v,b){y[v]=b>>8&255,y[v+1]=255&b},readUint:(y,v)=>16777216*y[v]+(y[v+1]<<16|y[v+2]<<8|y[v+3]),writeUint(y,v,b){y[v]=b>>24&255,y[v+1]=b>>16&255,y[v+2]=b>>8&255,y[v+3]=255&b},readASCII(y,v,b){let w="";for(let x=0;x<b;x++)w+=String.fromCharCode(y[v+x]);return w},writeASCII(y,v,b){for(let w=0;w<b.length;w++)y[v+w]=b.charCodeAt(w)},readBytes(y,v,b){const w=[];for(let x=0;x<b;x++)w.push(y[v+x]);return w},pad:y=>y.length<2?`0${y}`:y,readUTF8(y,v,b){let w,x="";for(let S=0;S<b;S++)x+=`%${n.pad(y[v+S].toString(16))}`;try{w=decodeURIComponent(x)}catch{return n.readASCII(y,v,b)}return w}};function t(y,v,b,w){const x=v*b,S=c(w),A=Math.ceil(v*S/8),T=new Uint8Array(4*x),U=new Uint32Array(T.buffer),{ctype:M}=w,{depth:$}=w,K=n.readUshort;if(M==6){const G=x<<2;if($==8)for(var R=0;R<G;R+=4)T[R]=y[R],T[R+1]=y[R+1],T[R+2]=y[R+2],T[R+3]=y[R+3];if($==16)for(R=0;R<G;R++)T[R]=y[R<<1]}else if(M==2){const G=w.tabs.tRNS;if(G==null){if($==8)for(R=0;R<x;R++){var D=3*R;U[R]=255<<24|y[D+2]<<16|y[D+1]<<8|y[D]}if($==16)for(R=0;R<x;R++)D=6*R,U[R]=255<<24|y[D+4]<<16|y[D+2]<<8|y[D]}else{var E=G[0];const Y=G[1],L=G[2];if($==8)for(R=0;R<x;R++){var j=R<<2;D=3*R,U[R]=255<<24|y[D+2]<<16|y[D+1]<<8|y[D],y[D]==E&&y[D+1]==Y&&y[D+2]==L&&(T[j+3]=0)}if($==16)for(R=0;R<x;R++)j=R<<2,D=6*R,U[R]=255<<24|y[D+4]<<16|y[D+2]<<8|y[D],K(y,D)==E&&K(y,D+2)==Y&&K(y,D+4)==L&&(T[j+3]=0)}}else if(M==3){const G=w.tabs.PLTE,Y=w.tabs.tRNS,L=Y?Y.length:0;if($==1)for(var z=0;z<b;z++){var B=z*A,I=z*v;for(R=0;R<v;R++){j=I+R<<2;var F=3*(q=y[B+(R>>3)]>>7-((7&R)<<0)&1);T[j]=G[F],T[j+1]=G[F+1],T[j+2]=G[F+2],T[j+3]=q<L?Y[q]:255}}if($==2)for(z=0;z<b;z++)for(B=z*A,I=z*v,R=0;R<v;R++)j=I+R<<2,F=3*(q=y[B+(R>>2)]>>6-((3&R)<<1)&3),T[j]=G[F],T[j+1]=G[F+1],T[j+2]=G[F+2],T[j+3]=q<L?Y[q]:255;if($==4)for(z=0;z<b;z++)for(B=z*A,I=z*v,R=0;R<v;R++)j=I+R<<2,F=3*(q=y[B+(R>>1)]>>4-((1&R)<<2)&15),T[j]=G[F],T[j+1]=G[F+1],T[j+2]=G[F+2],T[j+3]=q<L?Y[q]:255;if($==8)for(R=0;R<x;R++){var q;j=R<<2,F=3*(q=y[R]),T[j]=G[F],T[j+1]=G[F+1],T[j+2]=G[F+2],T[j+3]=q<L?Y[q]:255}}else if(M==4){if($==8)for(R=0;R<x;R++){j=R<<2;var X=y[N=R<<1];T[j]=X,T[j+1]=X,T[j+2]=X,T[j+3]=y[N+1]}if($==16)for(R=0;R<x;R++){var N;j=R<<2,X=y[N=R<<2],T[j]=X,T[j+1]=X,T[j+2]=X,T[j+3]=y[N+2]}}else if(M==0)for(E=w.tabs.tRNS?w.tabs.tRNS:-1,z=0;z<b;z++){const G=z*A,Y=z*v;if($==1)for(var k=0;k<v;k++){var Q=(X=255*(y[G+(k>>>3)]>>>7-(7&k)&1))==255*E?0:255;U[Y+k]=Q<<24|X<<16|X<<8|X}else if($==2)for(k=0;k<v;k++)Q=(X=85*(y[G+(k>>>2)]>>>6-((3&k)<<1)&3))==85*E?0:255,U[Y+k]=Q<<24|X<<16|X<<8|X;else if($==4)for(k=0;k<v;k++)Q=(X=17*(y[G+(k>>>1)]>>>4-((1&k)<<2)&15))==17*E?0:255,U[Y+k]=Q<<24|X<<16|X<<8|X;else if($==8)for(k=0;k<v;k++)Q=(X=y[G+k])==E?0:255,U[Y+k]=Q<<24|X<<16|X<<8|X;else if($==16)for(k=0;k<v;k++)X=y[G+(k<<1)],Q=K(y,G+(k<<1))==E?0:255,U[Y+k]=Q<<24|X<<16|X<<8|X}return T}function r(y,v,b,w){const x=c(y),S=Math.ceil(b*x/8),A=new Uint8Array((S+1+y.interlace)*w);return v=y.tabs.CgBI?l(v,A):i(v,A),y.interlace==0?v=u(v,y,0,b,w):y.interlace==1&&(v=(function(U,M){const $=M.width,K=M.height,R=c(M),D=R>>3,E=Math.ceil($*R/8),j=new Uint8Array(K*E);let z=0;const B=[0,0,4,0,2,0,1],I=[0,4,0,2,0,1,0],F=[8,8,8,4,4,2,2],q=[8,8,4,4,2,2,1];let X=0;for(;X<7;){const k=F[X],Q=q[X];let G=0,Y=0,L=B[X];for(;L<K;)L+=k,Y++;let H=I[X];for(;H<$;)H+=Q,G++;const ee=Math.ceil(G*R/8);u(U,M,z,G,Y);let Z=0,J=B[X];for(;J<K;){let oe=I[X],pe=z+Z*ee<<3;for(;oe<$;){var N;if(R==1&&(N=(N=U[pe>>3])>>7-(7&pe)&1,j[J*E+(oe>>3)]|=N<<7-((7&oe)<<0)),R==2&&(N=(N=U[pe>>3])>>6-(7&pe)&3,j[J*E+(oe>>2)]|=N<<6-((3&oe)<<1)),R==4&&(N=(N=U[pe>>3])>>4-(7&pe)&15,j[J*E+(oe>>1)]|=N<<4-((1&oe)<<2)),R>=8){const ke=J*E+oe*D;for(let ue=0;ue<D;ue++)j[ke+ue]=U[(pe>>3)+ue]}pe+=R,oe+=Q}Z++,J+=k}G*Y!=0&&(z+=Y*(1+ee)),X+=1}return j})(v,y)),v}function i(y,v){return l(new Uint8Array(y.buffer,2,y.length-6),v)}var l=(function(){const y={H:{}};return y.H.N=function(v,b){const w=Uint8Array;let x,S,A=0,T=0,U=0,M=0,$=0,K=0,R=0,D=0,E=0;if(v[0]==3&&v[1]==0)return b||new w(0);const j=y.H,z=j.b,B=j.e,I=j.R,F=j.n,q=j.A,X=j.Z,N=j.m,k=b==null;for(k&&(b=new w(v.length>>>2<<5));A==0;)if(A=z(v,E,1),T=z(v,E+1,2),E+=3,T!=0){if(k&&(b=y.H.W(b,D+(1<<17))),T==1&&(x=N.J,S=N.h,K=511,R=31),T==2){U=B(v,E,5)+257,M=B(v,E+5,5)+1,$=B(v,E+10,4)+4,E+=14;let G=1;for(var Q=0;Q<38;Q+=2)N.Q[Q]=0,N.Q[Q+1]=0;for(Q=0;Q<$;Q++){const H=B(v,E+3*Q,3);N.Q[1+(N.X[Q]<<1)]=H,H>G&&(G=H)}E+=3*$,F(N.Q,G),q(N.Q,G,N.u),x=N.w,S=N.d,E=I(N.u,(1<<G)-1,U+M,v,E,N.v);const Y=j.V(N.v,0,U,N.C);K=(1<<Y)-1;const L=j.V(N.v,U,M,N.D);R=(1<<L)-1,F(N.C,Y),q(N.C,Y,x),F(N.D,L),q(N.D,L,S)}for(;;){const G=x[X(v,E)&K];E+=15&G;const Y=G>>>4;if(!(Y>>>8))b[D++]=Y;else{if(Y==256)break;{let L=D+Y-254;if(Y>264){const oe=N.q[Y-257];L=D+(oe>>>3)+B(v,E,7&oe),E+=7&oe}const H=S[X(v,E)&R];E+=15&H;const ee=H>>>4,Z=N.c[ee],J=(Z>>>4)+z(v,E,15&Z);for(E+=15&Z;D<L;)b[D]=b[D++-J],b[D]=b[D++-J],b[D]=b[D++-J],b[D]=b[D++-J];D=L}}}}else{(7&E)!=0&&(E+=8-(7&E));const G=4+(E>>>3),Y=v[G-4]|v[G-3]<<8;k&&(b=y.H.W(b,D+Y)),b.set(new w(v.buffer,v.byteOffset+G,Y),D),E=G+Y<<3,D+=Y}return b.length==D?b:b.slice(0,D)},y.H.W=function(v,b){const w=v.length;if(b<=w)return v;const x=new Uint8Array(w<<1);return x.set(v,0),x},y.H.R=function(v,b,w,x,S,A){const T=y.H.e,U=y.H.Z;let M=0;for(;M<w;){const $=v[U(x,S)&b];S+=15&$;const K=$>>>4;if(K<=15)A[M]=K,M++;else{let R=0,D=0;K==16?(D=3+T(x,S,2),S+=2,R=A[M-1]):K==17?(D=3+T(x,S,3),S+=3):K==18&&(D=11+T(x,S,7),S+=7);const E=M+D;for(;M<E;)A[M]=R,M++}}return S},y.H.V=function(v,b,w,x){let S=0,A=0;const T=x.length>>>1;for(;A<w;){const U=v[A+b];x[A<<1]=0,x[1+(A<<1)]=U,U>S&&(S=U),A++}for(;A<T;)x[A<<1]=0,x[1+(A<<1)]=0,A++;return S},y.H.n=function(v,b){const w=y.H.m,x=v.length;let S,A,T,U;const M=w.j;for(var $=0;$<=b;$++)M[$]=0;for($=1;$<x;$+=2)M[v[$]]++;const K=w.K;for(S=0,M[0]=0,A=1;A<=b;A++)S=S+M[A-1]<<1,K[A]=S;for(T=0;T<x;T+=2)U=v[T+1],U!=0&&(v[T]=K[U],K[U]++)},y.H.A=function(v,b,w){const x=v.length,S=y.H.m.r;for(let A=0;A<x;A+=2)if(v[A+1]!=0){const T=A>>1,U=v[A+1],M=T<<4|U,$=b-U;let K=v[A]<<$;const R=K+(1<<$);for(;K!=R;)w[S[K]>>>15-b]=M,K++}},y.H.l=function(v,b){const w=y.H.m.r,x=15-b;for(let S=0;S<v.length;S+=2){const A=v[S]<<b-v[S+1];v[S]=w[A]>>>x}},y.H.M=function(v,b,w){w<<=7&b;const x=b>>>3;v[x]|=w,v[x+1]|=w>>>8},y.H.I=function(v,b,w){w<<=7&b;const x=b>>>3;v[x]|=w,v[x+1]|=w>>>8,v[x+2]|=w>>>16},y.H.e=function(v,b,w){return(v[b>>>3]|v[1+(b>>>3)]<<8)>>>(7&b)&(1<<w)-1},y.H.b=function(v,b,w){return(v[b>>>3]|v[1+(b>>>3)]<<8|v[2+(b>>>3)]<<16)>>>(7&b)&(1<<w)-1},y.H.Z=function(v,b){return(v[b>>>3]|v[1+(b>>>3)]<<8|v[2+(b>>>3)]<<16)>>>(7&b)},y.H.i=function(v,b){return(v[b>>>3]|v[1+(b>>>3)]<<8|v[2+(b>>>3)]<<16|v[3+(b>>>3)]<<24)>>>(7&b)},y.H.m=(function(){const v=Uint16Array,b=Uint32Array;return{K:new v(16),j:new v(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new v(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new b(32),J:new v(512),_:[],h:new v(32),$:[],w:new v(32768),C:[],v:[],d:new v(32768),D:[],u:new v(512),Q:[],r:new v(32768),s:new b(286),Y:new b(30),a:new b(19),t:new b(15e3),k:new v(65536),g:new v(32768)}})(),(function(){const v=y.H.m;for(var b=0;b<32768;b++){let x=b;x=(2863311530&x)>>>1|(1431655765&x)<<1,x=(3435973836&x)>>>2|(858993459&x)<<2,x=(4042322160&x)>>>4|(252645135&x)<<4,x=(4278255360&x)>>>8|(16711935&x)<<8,v.r[b]=(x>>>16|x<<16)>>>17}function w(x,S,A){for(;S--!=0;)x.push(0,A)}for(b=0;b<32;b++)v.q[b]=v.S[b]<<3|v.T[b],v.c[b]=v.p[b]<<4|v.z[b];w(v._,144,8),w(v._,112,9),w(v._,24,7),w(v._,8,8),y.H.n(v._,9),y.H.A(v._,9,v.J),y.H.l(v._,9),w(v.$,32,5),y.H.n(v.$,5),y.H.A(v.$,5,v.h),y.H.l(v.$,5),w(v.Q,19,0),w(v.C,286,0),w(v.D,30,0),w(v.v,320,0)})(),y.H.N})();function c(y){return[1,null,3,1,2,null,4][y.ctype]*y.depth}function u(y,v,b,w,x){let S=c(v);const A=Math.ceil(w*S/8);let T,U;S=Math.ceil(S/8);let M=y[b],$=0;if(M>1&&(y[b]=[0,0,1][M-2]),M==3)for($=S;$<A;$++)y[$+1]=y[$+1]+(y[$+1-S]>>>1)&255;for(let K=0;K<x;K++)if(T=b+K*A,U=T+K+1,M=y[U-1],$=0,M==0)for(;$<A;$++)y[T+$]=y[U+$];else if(M==1){for(;$<S;$++)y[T+$]=y[U+$];for(;$<A;$++)y[T+$]=y[U+$]+y[T+$-S]}else if(M==2)for(;$<A;$++)y[T+$]=y[U+$]+y[T+$-A];else if(M==3){for(;$<S;$++)y[T+$]=y[U+$]+(y[T+$-A]>>>1);for(;$<A;$++)y[T+$]=y[U+$]+(y[T+$-A]+y[T+$-S]>>>1)}else{for(;$<S;$++)y[T+$]=y[U+$]+d(0,y[T+$-A],0);for(;$<A;$++)y[T+$]=y[U+$]+d(y[T+$-S],y[T+$-A],y[T+$-S-A])}return y}function d(y,v,b){const w=y+v-b,x=w-y,S=w-v,A=w-b;return x*x<=S*S&&x*x<=A*A?y:S*S<=A*A?v:b}function m(y,v,b){b.width=n.readUint(y,v),v+=4,b.height=n.readUint(y,v),v+=4,b.depth=y[v],v++,b.ctype=y[v],v++,b.compress=y[v],v++,b.filter=y[v],v++,b.interlace=y[v],v++}function p(y,v,b,w,x,S,A,T,U){const M=Math.min(v,x),$=Math.min(b,S);let K=0,R=0;for(let X=0;X<$;X++)for(let N=0;N<M;N++)if(A>=0&&T>=0?(K=X*v+N<<2,R=(T+X)*x+A+N<<2):(K=(-T+X)*v-A+N<<2,R=X*x+N<<2),U==0)w[R]=y[K],w[R+1]=y[K+1],w[R+2]=y[K+2],w[R+3]=y[K+3];else if(U==1){var D=y[K+3]*.00392156862745098,E=y[K]*D,j=y[K+1]*D,z=y[K+2]*D,B=w[R+3]*(1/255),I=w[R]*B,F=w[R+1]*B,q=w[R+2]*B;const k=1-D,Q=D+B*k,G=Q==0?0:1/Q;w[R+3]=255*Q,w[R+0]=(E+I*k)*G,w[R+1]=(j+F*k)*G,w[R+2]=(z+q*k)*G}else if(U==2)D=y[K+3],E=y[K],j=y[K+1],z=y[K+2],B=w[R+3],I=w[R],F=w[R+1],q=w[R+2],D==B&&E==I&&j==F&&z==q?(w[R]=0,w[R+1]=0,w[R+2]=0,w[R+3]=0):(w[R]=E,w[R+1]=j,w[R+2]=z,w[R+3]=D);else if(U==3){if(D=y[K+3],E=y[K],j=y[K+1],z=y[K+2],B=w[R+3],I=w[R],F=w[R+1],q=w[R+2],D==B&&E==I&&j==F&&z==q)continue;if(D<220&&B>20)return!1}return!0}return{decode:function(v){const b=new Uint8Array(v);let w=8;const x=n,S=x.readUshort,A=x.readUint,T={tabs:{},frames:[]},U=new Uint8Array(b.length);let M,$=0,K=0;const R=[137,80,78,71,13,10,26,10];for(var D=0;D<8;D++)if(b[D]!=R[D])throw"The input is not a PNG file!";for(;w<b.length;){const X=x.readUint(b,w);w+=4;const N=x.readASCII(b,w,4);if(w+=4,N=="IHDR")m(b,w,T);else if(N=="iCCP"){for(var E=w;b[E]!=0;)E++;x.readASCII(b,w,E-w),b[E+1];const k=b.slice(E+2,w+X);let Q=null;try{Q=i(k)}catch{Q=l(k)}T.tabs[N]=Q}else if(N=="CgBI")T.tabs[N]=b.slice(w,w+4);else if(N=="IDAT"){for(D=0;D<X;D++)U[$+D]=b[w+D];$+=X}else if(N=="acTL")T.tabs[N]={num_frames:A(b,w),num_plays:A(b,w+4)},M=new Uint8Array(b.length);else if(N=="fcTL"){K!=0&&((q=T.frames[T.frames.length-1]).data=r(T,M.slice(0,K),q.rect.width,q.rect.height),K=0);const k={x:A(b,w+12),y:A(b,w+16),width:A(b,w+4),height:A(b,w+8)};let Q=S(b,w+22);Q=S(b,w+20)/(Q==0?100:Q);const G={rect:k,delay:Math.round(1e3*Q),dispose:b[w+24],blend:b[w+25]};T.frames.push(G)}else if(N=="fdAT"){for(D=0;D<X-4;D++)M[K+D]=b[w+D+4];K+=X-4}else if(N=="pHYs")T.tabs[N]=[x.readUint(b,w),x.readUint(b,w+4),b[w+8]];else if(N=="cHRM")for(T.tabs[N]=[],D=0;D<8;D++)T.tabs[N].push(x.readUint(b,w+4*D));else if(N=="tEXt"||N=="zTXt"){T.tabs[N]==null&&(T.tabs[N]={});var j=x.nextZero(b,w),z=x.readASCII(b,w,j-w),B=w+X-j-1;if(N=="tEXt")F=x.readASCII(b,j+1,B);else{var I=i(b.slice(j+2,j+2+B));F=x.readUTF8(I,0,I.length)}T.tabs[N][z]=F}else if(N=="iTXt"){T.tabs[N]==null&&(T.tabs[N]={}),j=0,E=w,j=x.nextZero(b,E),z=x.readASCII(b,E,j-E);const k=b[E=j+1];var F;b[E+1],E+=2,j=x.nextZero(b,E),x.readASCII(b,E,j-E),E=j+1,j=x.nextZero(b,E),x.readUTF8(b,E,j-E),B=X-((E=j+1)-w),k==0?F=x.readUTF8(b,E,B):(I=i(b.slice(E,E+B)),F=x.readUTF8(I,0,I.length)),T.tabs[N][z]=F}else if(N=="PLTE")T.tabs[N]=x.readBytes(b,w,X);else if(N=="hIST"){const k=T.tabs.PLTE.length/3;for(T.tabs[N]=[],D=0;D<k;D++)T.tabs[N].push(S(b,w+2*D))}else if(N=="tRNS")T.ctype==3?T.tabs[N]=x.readBytes(b,w,X):T.ctype==0?T.tabs[N]=S(b,w):T.ctype==2&&(T.tabs[N]=[S(b,w),S(b,w+2),S(b,w+4)]);else if(N=="gAMA")T.tabs[N]=x.readUint(b,w)/1e5;else if(N=="sRGB")T.tabs[N]=b[w];else if(N=="bKGD")T.ctype==0||T.ctype==4?T.tabs[N]=[S(b,w)]:T.ctype==2||T.ctype==6?T.tabs[N]=[S(b,w),S(b,w+2),S(b,w+4)]:T.ctype==3&&(T.tabs[N]=b[w]);else if(N=="IEND")break;w+=X,x.readUint(b,w),w+=4}var q;return K!=0&&((q=T.frames[T.frames.length-1]).data=r(T,M.slice(0,K),q.rect.width,q.rect.height)),T.data=r(T,U,T.width,T.height),delete T.compress,delete T.interlace,delete T.filter,T},toRGBA8:function(v){const b=v.width,w=v.height;if(v.tabs.acTL==null)return[t(v.data,b,w,v).buffer];const x=[];v.frames[0].data==null&&(v.frames[0].data=v.data);const S=b*w*4,A=new Uint8Array(S),T=new Uint8Array(S),U=new Uint8Array(S);for(let $=0;$<v.frames.length;$++){const K=v.frames[$],R=K.rect.x,D=K.rect.y,E=K.rect.width,j=K.rect.height,z=t(K.data,E,j,v);if($!=0)for(var M=0;M<S;M++)U[M]=A[M];if(K.blend==0?p(z,E,j,A,b,w,R,D,0):K.blend==1&&p(z,E,j,A,b,w,R,D,1),x.push(A.buffer.slice(0)),K.dispose!=0){if(K.dispose==1)p(T,E,j,A,b,w,R,D,0);else if(K.dispose==2)for(M=0;M<S;M++)A[M]=U[M]}}return x},_paeth:d,_copyTile:p,_bin:n}})();(function(){const{_copyTile:n}=Ba,{_bin:t}=Ba,r=Ba._paeth;var i={table:(function(){const E=new Uint32Array(256);for(let j=0;j<256;j++){let z=j;for(let B=0;B<8;B++)1&z?z=3988292384^z>>>1:z>>>=1;E[j]=z}return E})(),update(E,j,z,B){for(let I=0;I<B;I++)E=i.table[255&(E^j[z+I])]^E>>>8;return E},crc:(E,j,z)=>4294967295^i.update(4294967295,E,j,z)};function l(E,j,z,B){j[z]+=E[0]*B>>4,j[z+1]+=E[1]*B>>4,j[z+2]+=E[2]*B>>4,j[z+3]+=E[3]*B>>4}function c(E){return Math.max(0,Math.min(255,E))}function u(E,j){const z=E[0]-j[0],B=E[1]-j[1],I=E[2]-j[2],F=E[3]-j[3];return z*z+B*B+I*I+F*F}function d(E,j,z,B,I,F,q){q==null&&(q=1);const X=B.length,N=[];for(var k=0;k<X;k++){const J=B[k];N.push([J>>>0&255,J>>>8&255,J>>>16&255,J>>>24&255])}for(k=0;k<X;k++){let J=4294967295;for(var Q=0,G=0;G<X;G++){var Y=u(N[k],N[G]);G!=k&&Y<J&&(J=Y,Q=G)}}const L=new Uint32Array(I.buffer),H=new Int16Array(j*z*4),ee=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(k=0;k<ee.length;k++)ee[k]=255*((ee[k]+.5)/16-.5);for(let J=0;J<z;J++)for(let oe=0;oe<j;oe++){var Z;k=4*(J*j+oe),q!=2?Z=[c(E[k]+H[k]),c(E[k+1]+H[k+1]),c(E[k+2]+H[k+2]),c(E[k+3]+H[k+3])]:(Y=ee[4*(3&J)+(3&oe)],Z=[c(E[k]+Y),c(E[k+1]+Y),c(E[k+2]+Y),c(E[k+3]+Y)]),Q=0;let pe=16777215;for(G=0;G<X;G++){const he=u(Z,N[G]);he<pe&&(pe=he,Q=G)}const ke=N[Q],ue=[Z[0]-ke[0],Z[1]-ke[1],Z[2]-ke[2],Z[3]-ke[3]];q==1&&(oe!=j-1&&l(ue,H,k+4,7),J!=z-1&&(oe!=0&&l(ue,H,k+4*j-4,3),l(ue,H,k+4*j,5),oe!=j-1&&l(ue,H,k+4*j+4,1))),F[k>>2]=Q,L[k>>2]=B[Q]}}function m(E,j,z,B,I){I==null&&(I={});const{crc:F}=i,q=t.writeUint,X=t.writeUshort,N=t.writeASCII;let k=8;const Q=E.frames.length>1;let G,Y=!1,L=33+(Q?20:0);if(I.sRGB!=null&&(L+=13),I.pHYs!=null&&(L+=21),I.iCCP!=null&&(G=pako.deflate(I.iCCP),L+=21+G.length+4),E.ctype==3){for(var H=E.plte.length,ee=0;ee<H;ee++)E.plte[ee]>>>24!=255&&(Y=!0);L+=8+3*H+4+(Y?8+1*H+4:0)}for(var Z=0;Z<E.frames.length;Z++)Q&&(L+=38),L+=(ke=E.frames[Z]).cimg.length+12,Z!=0&&(L+=4);L+=12;const J=new Uint8Array(L),oe=[137,80,78,71,13,10,26,10];for(ee=0;ee<8;ee++)J[ee]=oe[ee];if(q(J,k,13),k+=4,N(J,k,"IHDR"),k+=4,q(J,k,j),k+=4,q(J,k,z),k+=4,J[k]=E.depth,k++,J[k]=E.ctype,k++,J[k]=0,k++,J[k]=0,k++,J[k]=0,k++,q(J,k,F(J,k-17,17)),k+=4,I.sRGB!=null&&(q(J,k,1),k+=4,N(J,k,"sRGB"),k+=4,J[k]=I.sRGB,k++,q(J,k,F(J,k-5,5)),k+=4),I.iCCP!=null){const ue=13+G.length;q(J,k,ue),k+=4,N(J,k,"iCCP"),k+=4,N(J,k,"ICC profile"),k+=11,k+=2,J.set(G,k),k+=G.length,q(J,k,F(J,k-(ue+4),ue+4)),k+=4}if(I.pHYs!=null&&(q(J,k,9),k+=4,N(J,k,"pHYs"),k+=4,q(J,k,I.pHYs[0]),k+=4,q(J,k,I.pHYs[1]),k+=4,J[k]=I.pHYs[2],k++,q(J,k,F(J,k-13,13)),k+=4),Q&&(q(J,k,8),k+=4,N(J,k,"acTL"),k+=4,q(J,k,E.frames.length),k+=4,q(J,k,I.loop!=null?I.loop:0),k+=4,q(J,k,F(J,k-12,12)),k+=4),E.ctype==3){for(q(J,k,3*(H=E.plte.length)),k+=4,N(J,k,"PLTE"),k+=4,ee=0;ee<H;ee++){const ue=3*ee,he=E.plte[ee],Ce=255&he,ze=he>>>8&255,Ae=he>>>16&255;J[k+ue+0]=Ce,J[k+ue+1]=ze,J[k+ue+2]=Ae}if(k+=3*H,q(J,k,F(J,k-3*H-4,3*H+4)),k+=4,Y){for(q(J,k,H),k+=4,N(J,k,"tRNS"),k+=4,ee=0;ee<H;ee++)J[k+ee]=E.plte[ee]>>>24&255;k+=H,q(J,k,F(J,k-H-4,H+4)),k+=4}}let pe=0;for(Z=0;Z<E.frames.length;Z++){var ke=E.frames[Z];Q&&(q(J,k,26),k+=4,N(J,k,"fcTL"),k+=4,q(J,k,pe++),k+=4,q(J,k,ke.rect.width),k+=4,q(J,k,ke.rect.height),k+=4,q(J,k,ke.rect.x),k+=4,q(J,k,ke.rect.y),k+=4,X(J,k,B[Z]),k+=2,X(J,k,1e3),k+=2,J[k]=ke.dispose,k++,J[k]=ke.blend,k++,q(J,k,F(J,k-30,30)),k+=4);const ue=ke.cimg;q(J,k,(H=ue.length)+(Z==0?0:4)),k+=4;const he=k;N(J,k,Z==0?"IDAT":"fdAT"),k+=4,Z!=0&&(q(J,k,pe++),k+=4),J.set(ue,k),k+=H,q(J,k,F(J,he,k-he)),k+=4}return q(J,k,0),k+=4,N(J,k,"IEND"),k+=4,q(J,k,F(J,k-4,4)),k+=4,J.buffer}function p(E,j,z){for(let B=0;B<E.frames.length;B++){const I=E.frames[B];I.rect.width;const F=I.rect.height,q=new Uint8Array(F*I.bpl+F);I.cimg=w(I.img,F,I.bpp,I.bpl,q,j,z)}}function y(E,j,z,B,I){const F=I[0],q=I[1],X=I[2],N=I[3],k=I[4],Q=I[5];let G=6,Y=8,L=255;for(var H=0;H<E.length;H++){const et=new Uint8Array(E[H]);for(var ee=et.length,Z=0;Z<ee;Z+=4)L&=et[Z+3]}const J=L!=255,oe=(function(Ke,Pe,rt,de,me,je){const ve=[];for(var fe=0;fe<Ke.length;fe++){const pt=new Uint8Array(Ke[fe]),na=new Uint32Array(pt.buffer);var Je;let Gt=0,Ht=0,it=Pe,Dt=rt,Nt=de?1:0;if(fe!=0){const Io=je||de||fe==1||ve[fe-2].dispose!=0?1:2;let As=0,Vi=1e9;for(let Ia=0;Ia<Io;Ia++){var st=new Uint8Array(Ke[fe-1-Ia]);const kr=new Uint32Array(Ke[fe-1-Ia]);let ra=Pe,zt=rt,Oa=-1,Ma=-1;for(let Pa=0;Pa<rt;Pa++)for(let Ua=0;Ua<Pe;Ua++)na[$e=Pa*Pe+Ua]!=kr[$e]&&(Ua<ra&&(ra=Ua),Ua>Oa&&(Oa=Ua),Pa<zt&&(zt=Pa),Pa>Ma&&(Ma=Pa));Oa==-1&&(ra=zt=Oa=Ma=0),me&&((1&ra)==1&&ra--,(1&zt)==1&&zt--);const Yi=(Oa-ra+1)*(Ma-zt+1);Yi<Vi&&(Vi=Yi,As=Ia,Gt=ra,Ht=zt,it=Oa-ra+1,Dt=Ma-zt+1)}st=new Uint8Array(Ke[fe-1-As]),As==1&&(ve[fe-1].dispose=2),Je=new Uint8Array(it*Dt*4),n(st,Pe,rt,Je,it,Dt,-Gt,-Ht,0),Nt=n(pt,Pe,rt,Je,it,Dt,-Gt,-Ht,3)?1:0,Nt==1?b(pt,Pe,rt,Je,{x:Gt,y:Ht,width:it,height:Dt}):n(pt,Pe,rt,Je,it,Dt,-Gt,-Ht,0)}else Je=pt.slice(0);ve.push({rect:{x:Gt,y:Ht,width:it,height:Dt},img:Je,blend:Nt,dispose:0})}if(de)for(fe=0;fe<ve.length;fe++){if((aa=ve[fe]).blend==1)continue;const pt=aa.rect,na=ve[fe-1].rect,Gt=Math.min(pt.x,na.x),Ht=Math.min(pt.y,na.y),it={x:Gt,y:Ht,width:Math.max(pt.x+pt.width,na.x+na.width)-Gt,height:Math.max(pt.y+pt.height,na.y+na.height)-Ht};ve[fe-1].dispose=1,fe-1!=0&&v(Ke,Pe,rt,ve,fe-1,it,me),v(Ke,Pe,rt,ve,fe,it,me)}let pa=0;if(Ke.length!=1)for(var $e=0;$e<ve.length;$e++){var aa;pa+=(aa=ve[$e]).rect.width*aa.rect.height}return ve})(E,j,z,F,q,X),pe={},ke=[],ue=[];if(B!=0){const et=[];for(Z=0;Z<oe.length;Z++)et.push(oe[Z].img.buffer);const Ke=(function(me){let je=0;for(var ve=0;ve<me.length;ve++)je+=me[ve].byteLength;const fe=new Uint8Array(je);let Je=0;for(ve=0;ve<me.length;ve++){const st=new Uint8Array(me[ve]),pa=st.length;for(let $e=0;$e<pa;$e+=4){let aa=st[$e],pt=st[$e+1],na=st[$e+2];const Gt=st[$e+3];Gt==0&&(aa=pt=na=0),fe[Je+$e]=aa,fe[Je+$e+1]=pt,fe[Je+$e+2]=na,fe[Je+$e+3]=Gt}Je+=pa}return fe.buffer})(et),Pe=S(Ke,B);for(Z=0;Z<Pe.plte.length;Z++)ke.push(Pe.plte[Z].est.rgba);let rt=0;for(Z=0;Z<oe.length;Z++){const de=(Ce=oe[Z]).img.length;var he=new Uint8Array(Pe.inds.buffer,rt>>2,de>>2);ue.push(he);const me=new Uint8Array(Pe.abuf,rt,de);Q&&d(Ce.img,Ce.rect.width,Ce.rect.height,ke,me,he),Ce.img.set(me),rt+=de}}else for(H=0;H<oe.length;H++){var Ce=oe[H];const et=new Uint32Array(Ce.img.buffer);var ze=Ce.rect.width;for(ee=et.length,he=new Uint8Array(ee),ue.push(he),Z=0;Z<ee;Z++){const Ke=et[Z];if(Z!=0&&Ke==et[Z-1])he[Z]=he[Z-1];else if(Z>ze&&Ke==et[Z-ze])he[Z]=he[Z-ze];else{let Pe=pe[Ke];if(Pe==null&&(pe[Ke]=Pe=ke.length,ke.push(Ke),ke.length>=300))break;he[Z]=Pe}}}const Ae=ke.length;for(Ae<=256&&k==0&&(Y=Ae<=2?1:Ae<=4?2:Ae<=16?4:8,Y=Math.max(Y,N)),H=0;H<oe.length;H++){(Ce=oe[H]).rect.x,Ce.rect.y,ze=Ce.rect.width;const et=Ce.rect.height;let Ke=Ce.img;new Uint32Array(Ke.buffer);let Pe=4*ze,rt=4;if(Ae<=256&&k==0){Pe=Math.ceil(Y*ze/8);var Ge=new Uint8Array(Pe*et);const de=ue[H];for(let me=0;me<et;me++){Z=me*Pe;const je=me*ze;if(Y==8)for(var qe=0;qe<ze;qe++)Ge[Z+qe]=de[je+qe];else if(Y==4)for(qe=0;qe<ze;qe++)Ge[Z+(qe>>1)]|=de[je+qe]<<4-4*(1&qe);else if(Y==2)for(qe=0;qe<ze;qe++)Ge[Z+(qe>>2)]|=de[je+qe]<<6-2*(3&qe);else if(Y==1)for(qe=0;qe<ze;qe++)Ge[Z+(qe>>3)]|=de[je+qe]<<7-1*(7&qe)}Ke=Ge,G=3,rt=1}else if(J==0&&oe.length==1){Ge=new Uint8Array(ze*et*3);const de=ze*et;for(Z=0;Z<de;Z++){const me=3*Z,je=4*Z;Ge[me]=Ke[je],Ge[me+1]=Ke[je+1],Ge[me+2]=Ke[je+2]}Ke=Ge,G=2,rt=3,Pe=3*ze}Ce.img=Ke,Ce.bpl=Pe,Ce.bpp=rt}return{ctype:G,depth:Y,plte:ke,frames:oe}}function v(E,j,z,B,I,F,q){const X=Uint8Array,N=Uint32Array,k=new X(E[I-1]),Q=new N(E[I-1]),G=I+1<E.length?new X(E[I+1]):null,Y=new X(E[I]),L=new N(Y.buffer);let H=j,ee=z,Z=-1,J=-1;for(let pe=0;pe<F.height;pe++)for(let ke=0;ke<F.width;ke++){const ue=F.x+ke,he=F.y+pe,Ce=he*j+ue,ze=L[Ce];ze==0||B[I-1].dispose==0&&Q[Ce]==ze&&(G==null||G[4*Ce+3]!=0)||(ue<H&&(H=ue),ue>Z&&(Z=ue),he<ee&&(ee=he),he>J&&(J=he))}Z==-1&&(H=ee=Z=J=0),q&&((1&H)==1&&H--,(1&ee)==1&&ee--),F={x:H,y:ee,width:Z-H+1,height:J-ee+1};const oe=B[I];oe.rect=F,oe.blend=1,oe.img=new Uint8Array(F.width*F.height*4),B[I-1].dispose==0?(n(k,j,z,oe.img,F.width,F.height,-F.x,-F.y,0),b(Y,j,z,oe.img,F)):n(Y,j,z,oe.img,F.width,F.height,-F.x,-F.y,0)}function b(E,j,z,B,I){n(E,j,z,B,I.width,I.height,-I.x,-I.y,2)}function w(E,j,z,B,I,F,q){const X=[];let N,k=[0,1,2,3,4];F!=-1?k=[F]:(j*B>5e5||z==1)&&(k=[0]),q&&(N={level:0});const Q=Mk;for(var G=0;G<k.length;G++){for(let H=0;H<j;H++)x(I,E,H,B,z,k[G]);X.push(Q.deflate(I,N))}let Y,L=1e9;for(G=0;G<X.length;G++)X[G].length<L&&(Y=G,L=X[G].length);return X[Y]}function x(E,j,z,B,I,F){const q=z*B;let X=q+z;if(E[X]=F,X++,F==0)if(B<500)for(var N=0;N<B;N++)E[X+N]=j[q+N];else E.set(new Uint8Array(j.buffer,q,B),X);else if(F==1){for(N=0;N<I;N++)E[X+N]=j[q+N];for(N=I;N<B;N++)E[X+N]=j[q+N]-j[q+N-I]+256&255}else if(z==0){for(N=0;N<I;N++)E[X+N]=j[q+N];if(F==2)for(N=I;N<B;N++)E[X+N]=j[q+N];if(F==3)for(N=I;N<B;N++)E[X+N]=j[q+N]-(j[q+N-I]>>1)+256&255;if(F==4)for(N=I;N<B;N++)E[X+N]=j[q+N]-r(j[q+N-I],0,0)+256&255}else{if(F==2)for(N=0;N<B;N++)E[X+N]=j[q+N]+256-j[q+N-B]&255;if(F==3){for(N=0;N<I;N++)E[X+N]=j[q+N]+256-(j[q+N-B]>>1)&255;for(N=I;N<B;N++)E[X+N]=j[q+N]+256-(j[q+N-B]+j[q+N-I]>>1)&255}if(F==4){for(N=0;N<I;N++)E[X+N]=j[q+N]+256-r(0,j[q+N-B],0)&255;for(N=I;N<B;N++)E[X+N]=j[q+N]+256-r(j[q+N-I],j[q+N-B],j[q+N-I-B])&255}}}function S(E,j){const z=new Uint8Array(E),B=z.slice(0),I=new Uint32Array(B.buffer),F=A(B,j),q=F[0],X=F[1],N=z.length,k=new Uint8Array(N>>2);let Q;if(z.length<2e7)for(var G=0;G<N;G+=4)Q=T(q,Y=z[G]*(1/255),L=z[G+1]*(1/255),H=z[G+2]*(1/255),ee=z[G+3]*(1/255)),k[G>>2]=Q.ind,I[G>>2]=Q.est.rgba;else for(G=0;G<N;G+=4){var Y=z[G]*.00392156862745098,L=z[G+1]*(1/255),H=z[G+2]*(1/255),ee=z[G+3]*(1/255);for(Q=q;Q.left;)Q=U(Q.est,Y,L,H,ee)<=0?Q.left:Q.right;k[G>>2]=Q.ind,I[G>>2]=Q.est.rgba}return{abuf:B.buffer,inds:k,plte:X}}function A(E,j,z){z==null&&(z=1e-4);const B=new Uint32Array(E.buffer),I={i0:0,i1:E.length,bst:null,est:null,tdst:0,left:null,right:null};I.bst=K(E,I.i0,I.i1),I.est=R(I.bst);const F=[I];for(;F.length<j;){let X=0,N=0;for(var q=0;q<F.length;q++)F[q].est.L>X&&(X=F[q].est.L,N=q);if(X<z)break;const k=F[N],Q=M(E,B,k.i0,k.i1,k.est.e,k.est.eMq255);if(k.i0>=Q||k.i1<=Q){k.est.L=0;continue}const G={i0:k.i0,i1:Q,bst:null,est:null,tdst:0,left:null,right:null};G.bst=K(E,G.i0,G.i1),G.est=R(G.bst);const Y={i0:Q,i1:k.i1,bst:null,est:null,tdst:0,left:null,right:null};for(Y.bst={R:[],m:[],N:k.bst.N-G.bst.N},q=0;q<16;q++)Y.bst.R[q]=k.bst.R[q]-G.bst.R[q];for(q=0;q<4;q++)Y.bst.m[q]=k.bst.m[q]-G.bst.m[q];Y.est=R(Y.bst),k.left=G,k.right=Y,F[N]=G,F.push(Y)}for(F.sort(((X,N)=>N.bst.N-X.bst.N)),q=0;q<F.length;q++)F[q].ind=q;return[I,F]}function T(E,j,z,B,I){if(E.left==null)return E.tdst=(function(G,Y,L,H,ee){const Z=Y-G[0],J=L-G[1],oe=H-G[2],pe=ee-G[3];return Z*Z+J*J+oe*oe+pe*pe})(E.est.q,j,z,B,I),E;const F=U(E.est,j,z,B,I);let q=E.left,X=E.right;F>0&&(q=E.right,X=E.left);const N=T(q,j,z,B,I);if(N.tdst<=F*F)return N;const k=T(X,j,z,B,I);return k.tdst<N.tdst?k:N}function U(E,j,z,B,I){const{e:F}=E;return F[0]*j+F[1]*z+F[2]*B+F[3]*I-E.eMq}function M(E,j,z,B,I,F){for(B-=4;z<B;){for(;$(E,z,I)<=F;)z+=4;for(;$(E,B,I)>F;)B-=4;if(z>=B)break;const q=j[z>>2];j[z>>2]=j[B>>2],j[B>>2]=q,z+=4,B-=4}for(;$(E,z,I)>F;)z-=4;return z+4}function $(E,j,z){return E[j]*z[0]+E[j+1]*z[1]+E[j+2]*z[2]+E[j+3]*z[3]}function K(E,j,z){const B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=[0,0,0,0],F=z-j>>2;for(let q=j;q<z;q+=4){const X=E[q]*.00392156862745098,N=E[q+1]*(1/255),k=E[q+2]*(1/255),Q=E[q+3]*(1/255);I[0]+=X,I[1]+=N,I[2]+=k,I[3]+=Q,B[0]+=X*X,B[1]+=X*N,B[2]+=X*k,B[3]+=X*Q,B[5]+=N*N,B[6]+=N*k,B[7]+=N*Q,B[10]+=k*k,B[11]+=k*Q,B[15]+=Q*Q}return B[4]=B[1],B[8]=B[2],B[9]=B[6],B[12]=B[3],B[13]=B[7],B[14]=B[11],{R:B,m:I,N:F}}function R(E){const{R:j}=E,{m:z}=E,{N:B}=E,I=z[0],F=z[1],q=z[2],X=z[3],N=B==0?0:1/B,k=[j[0]-I*I*N,j[1]-I*F*N,j[2]-I*q*N,j[3]-I*X*N,j[4]-F*I*N,j[5]-F*F*N,j[6]-F*q*N,j[7]-F*X*N,j[8]-q*I*N,j[9]-q*F*N,j[10]-q*q*N,j[11]-q*X*N,j[12]-X*I*N,j[13]-X*F*N,j[14]-X*q*N,j[15]-X*X*N],Q=k,G=D;let Y=[Math.random(),Math.random(),Math.random(),Math.random()],L=0,H=0;if(B!=0)for(let Z=0;Z<16&&(Y=G.multVec(Q,Y),H=Math.sqrt(G.dot(Y,Y)),Y=G.sml(1/H,Y),!(Z!=0&&Math.abs(H-L)<1e-9));Z++)L=H;const ee=[I*N,F*N,q*N,X*N];return{Cov:k,q:ee,e:Y,L,eMq255:G.dot(G.sml(255,ee),Y),eMq:G.dot(Y,ee),rgba:(Math.round(255*ee[3])<<24|Math.round(255*ee[2])<<16|Math.round(255*ee[1])<<8|Math.round(255*ee[0])<<0)>>>0}}var D={multVec:(E,j)=>[E[0]*j[0]+E[1]*j[1]+E[2]*j[2]+E[3]*j[3],E[4]*j[0]+E[5]*j[1]+E[6]*j[2]+E[7]*j[3],E[8]*j[0]+E[9]*j[1]+E[10]*j[2]+E[11]*j[3],E[12]*j[0]+E[13]*j[1]+E[14]*j[2]+E[15]*j[3]],dot:(E,j)=>E[0]*j[0]+E[1]*j[1]+E[2]*j[2]+E[3]*j[3],sml:(E,j)=>[E*j[0],E*j[1],E*j[2],E*j[3]]};Ba.encode=function(j,z,B,I,F,q,X){I==null&&(I=0),X==null&&(X=!1);const N=y(j,z,B,I,[!1,!1,!1,0,X,!1]);return p(N,-1),m(N,z,B,F,q)},Ba.encodeLL=function(j,z,B,I,F,q,X,N){const k={ctype:0+(I==1?0:2)+(F==0?0:4),depth:q,frames:[]},Q=(I+F)*q,G=Q*z;for(let Y=0;Y<j.length;Y++)k.frames.push({rect:{x:0,y:0,width:z,height:B},img:new Uint8Array(j[Y]),blend:0,dispose:1,bpp:Math.ceil(Q/8),bpl:Math.ceil(G/8)});return p(k,0,!0),m(k,z,B,X,N)},Ba.encode.compress=y,Ba.encode.dither=d,Ba.quantize=S,Ba.quantize.getKDtree=A,Ba.quantize.getNearest=T})();const Zy={toArrayBuffer(n,t){const r=n.width,i=n.height,l=r<<2,c=n.getContext("2d").getImageData(0,0,r,i),u=new Uint32Array(c.data.buffer),d=(32*r+31)/32<<2,m=d*i,p=122+m,y=new ArrayBuffer(p),v=new DataView(y),b=1<<20;let w,x,S,A,T=b,U=0,M=0,$=0;function K(E){v.setUint16(M,E,!0),M+=2}function R(E){v.setUint32(M,E,!0),M+=4}function D(E){M+=E}K(19778),R(p),D(4),R(122),R(108),R(r),R(-i>>>0),K(1),K(32),R(3),R(m),R(2835),R(2835),D(8),R(16711680),R(65280),R(255),R(4278190080),R(1466527264),(function E(){for(;U<i&&T>0;){for(A=122+U*d,w=0;w<l;)T--,x=u[$++],S=x>>>24,v.setUint32(A+w,x<<8|S),w+=4;U++}$<u.length?(T=b,setTimeout(E,Zy._dly)):t(y)})()},toBlob(n,t){this.toArrayBuffer(n,(r=>{t(new Blob([r],{type:"image/bmp"}))}))},_dly:9};var Jt={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Uk={[Jt.CHROME]:16384,[Jt.FIREFOX]:11180,[Jt.DESKTOP_SAFARI]:16384,[Jt.IE]:8192,[Jt.IOS]:4096,[Jt.ETC]:8192};const lh=typeof window<"u",ev=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,No=lh&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Dk=(lh||ev)&&(No&&No.getOriginalSymbol(window,"File")||typeof File<"u"&&File),tv=(lh||ev)&&(No&&No.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function oh(n,t,r=Date.now()){return new Promise((i=>{const l=n.split(","),c=l[0].match(/:(.*?);/)[1],u=globalThis.atob(l[1]);let d=u.length;const m=new Uint8Array(d);for(;d--;)m[d]=u.charCodeAt(d);const p=new Blob([m],{type:c});p.name=t,p.lastModified=r,i(p)}))}function av(n){return new Promise(((t,r)=>{const i=new tv;i.onload=()=>t(i.result),i.onerror=l=>r(l),i.readAsDataURL(n)}))}function nv(n){return new Promise(((t,r)=>{const i=new Image;i.onload=()=>t(i),i.onerror=l=>r(l),i.src=n}))}function xr(){if(xr.cachedResult!==void 0)return xr.cachedResult;let n=Jt.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?n=Jt.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?n=Jt.IOS:/Safari/i.test(t)?n=Jt.DESKTOP_SAFARI:/Firefox/i.test(t)?n=Jt.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(n=Jt.IE),xr.cachedResult=n,xr.cachedResult}function rv(n,t){const r=xr(),i=Uk[r];let l=n,c=t,u=l*c;const d=l>c?c/l:l/c;for(;u>i*i;){const m=(i+l)/2,p=(i+c)/2;m<p?(c=p,l=p*d):(c=m*d,l=m),u=l*c}return{width:l,height:c}}function $o(n,t){let r,i;try{if(r=new OffscreenCanvas(n,t),i=r.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{r=document.createElement("canvas"),i=r.getContext("2d")}return r.width=n,r.height=t,[r,i]}function sv(n,t){const{width:r,height:i}=rv(n.width,n.height),[l,c]=$o(r,i);return t&&/jpe?g/.test(t)&&(c.fillStyle="white",c.fillRect(0,0,l.width,l.height)),c.drawImage(n,0,0,l.width,l.height),l}function vo(){return vo.cachedResult!==void 0||(vo.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),vo.cachedResult}function Ao(n,t={}){return new Promise((function(r,i){let l,c;var u=function(){try{return c=sv(l,t.fileType||n.type),r([l,c])}catch(m){return i(m)}},d=function(m){try{var p=function(y){try{throw y}catch(v){return i(v)}};try{let y;return av(n).then((function(v){try{return y=v,nv(y).then((function(b){try{return l=b,(function(){try{return u()}catch(w){return i(w)}})()}catch(w){return p(w)}}),p)}catch(b){return p(b)}}),p)}catch(y){p(y)}}catch(y){return i(y)}};try{if(vo()||[Jt.DESKTOP_SAFARI,Jt.MOBILE_SAFARI].includes(xr()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then((function(m){try{return l=m,u()}catch{return d()}}),d)}catch{d()}}))}function To(n,t,r,i,l=1){return new Promise((function(c,u){let d;if(t==="image/png"){let v,b,w;return v=n.getContext("2d"),{data:b}=v.getImageData(0,0,n.width,n.height),w=Ba.encode([b.buffer],n.width,n.height,4096*l),d=new Blob([w],{type:t}),d.name=r,d.lastModified=i,m.call(this)}{let v=function(){return m.call(this)};var p=v;if(t==="image/bmp")return new Promise((b=>Zy.toBlob(n,b))).then((function(b){try{return d=b,d.name=r,d.lastModified=i,v.call(this)}catch(w){return u(w)}}).bind(this),u);{let b=function(){return v.call(this)};var y=b;if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:t,quality:l}).then((function(w){try{return d=w,d.name=r,d.lastModified=i,b.call(this)}catch(x){return u(x)}}).bind(this),u);{let w;return w=n.toDataURL(t,l),oh(w,r,i).then((function(x){try{return d=x,b.call(this)}catch(S){return u(S)}}).bind(this),u)}}}function m(){return c(d)}}))}function Fa(n){n.width=0,n.height=0}function xs(){return new Promise((function(n,t){let r,i,l,c;return xs.cachedResult!==void 0?n(xs.cachedResult):oh("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(u){try{return r=u,Ao(r).then((function(d){try{return i=d[1],To(i,r.type,r.name,r.lastModified).then((function(m){try{return l=m,Fa(i),Ao(l).then((function(p){try{return c=p[0],xs.cachedResult=c.width===1&&c.height===2,n(xs.cachedResult)}catch(y){return t(y)}}),t)}catch(p){return t(p)}}),t)}catch(m){return t(m)}}),t)}catch(d){return t(d)}}),t)}))}function iv(n){return new Promise(((t,r)=>{const i=new tv;i.onload=l=>{const c=new DataView(l.target.result);if(c.getUint16(0,!1)!=65496)return t(-2);const u=c.byteLength;let d=2;for(;d<u;){if(c.getUint16(d+2,!1)<=8)return t(-1);const m=c.getUint16(d,!1);if(d+=2,m==65505){if(c.getUint32(d+=2,!1)!=1165519206)return t(-1);const p=c.getUint16(d+=6,!1)==18761;d+=c.getUint32(d+4,p);const y=c.getUint16(d,p);d+=2;for(let v=0;v<y;v++)if(c.getUint16(d+12*v,p)==274)return t(c.getUint16(d+12*v+8,p))}else{if((65280&m)!=65280)break;d+=c.getUint16(d,!1)}}return t(-1)},i.onerror=l=>r(l),i.readAsArrayBuffer(n)}))}function lv(n,t){const{width:r}=n,{height:i}=n,{maxWidthOrHeight:l}=t;let c,u=n;return isFinite(l)&&(r>l||i>l)&&([u,c]=$o(r,i),r>i?(u.width=l,u.height=i/r*l):(u.width=r/i*l,u.height=l),c.drawImage(n,0,0,u.width,u.height),Fa(n)),u}function ov(n,t){const{width:r}=n,{height:i}=n,[l,c]=$o(r,i);switch(t>4&&t<9?(l.width=i,l.height=r):(l.width=r,l.height=i),t){case 2:c.transform(-1,0,0,1,r,0);break;case 3:c.transform(-1,0,0,-1,r,i);break;case 4:c.transform(1,0,0,-1,0,i);break;case 5:c.transform(0,1,1,0,0,0);break;case 6:c.transform(0,1,-1,0,i,0);break;case 7:c.transform(0,-1,-1,0,i,r);break;case 8:c.transform(0,-1,1,0,0,r)}return c.drawImage(n,0,0,r,i),Fa(n),l}function kp(n,t,r=0){return new Promise((function(i,l){let c,u,d,m,p,y,v,b,w,x,S,A,T,U,M,$,K,R,D,E;function j(B=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;c+=B,t.onProgress(Math.min(c,100))}function z(B){if(t.signal&&t.signal.aborted)throw t.signal.reason;c=Math.min(Math.max(B,c),100),t.onProgress(c)}return c=r,u=t.maxIteration||10,d=1024*t.maxSizeMB*1024,j(),Ao(n,t).then((function(B){try{return[,m]=B,j(),p=lv(m,t),j(),new Promise((function(I,F){var q;if(!(q=t.exifOrientation))return iv(n).then((function(N){try{return q=N,X.call(this)}catch(k){return F(k)}}).bind(this),F);function X(){return I(q)}return X.call(this)})).then((function(I){try{return y=I,j(),xs().then((function(F){try{return v=F?p:ov(p,y),j(),b=t.initialQuality||1,w=t.fileType||n.type,To(v,w,n.name,n.lastModified,b).then((function(q){try{{let Q=function(){if(u--&&(M>d||M>T)){let Y,L;return Y=E?.95*D.width:D.width,L=E?.95*D.height:D.height,[K,R]=$o(Y,L),R.drawImage(D,0,0,Y,L),b*=w==="image/png"?.85:.95,To(K,w,n.name,n.lastModified,b).then((function(H){try{return $=H,Fa(D),D=K,M=$.size,z(Math.min(99,Math.floor((U-M)/(U-d)*100))),Q}catch(ee){return l(ee)}}),l)}return[1]},G=function(){return Fa(D),Fa(K),Fa(p),Fa(v),Fa(m),z(100),i($)};var N=Q,k=G;if(x=q,j(),S=x.size>d,A=x.size>n.size,!S&&!A)return z(100),i(x);var X;return T=n.size,U=x.size,M=U,D=v,E=!t.alwaysKeepResolution&&S,(X=(function(Y){for(;Y;){if(Y.then)return void Y.then(X,l);try{if(Y.pop){if(Y.length)return Y.pop()?G.call(this):Y;Y=Q}else Y=Y.call(this)}catch(L){return l(L)}}}).bind(this))(Q)}}catch(Q){return l(Q)}}).bind(this),l)}catch(q){return l(q)}}).bind(this),l)}catch(F){return l(F)}}).bind(this),l)}catch(I){return l(I)}}).bind(this),l)}))}const zk=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let bd;function Lk(n,t){return new Promise(((r,i)=>{bd||(bd=(function(u){const d=[];return d.push(u),URL.createObjectURL(new Blob(d))})(zk));const l=new Worker(bd);l.addEventListener("message",(function(u){if(t.signal&&t.signal.aborted)l.terminate();else if(u.data.progress===void 0){if(u.data.error)return i(new Error(u.data.error)),void l.terminate();r(u.data.file),l.terminate()}else t.onProgress(u.data.progress)})),l.addEventListener("error",i),t.signal&&t.signal.addEventListener("abort",(()=>{i(t.signal.reason),l.terminate()})),l.postMessage({file:n,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function xt(n,t){return new Promise((function(r,i){let l,c,u,d,m,p;if(l={...t},u=0,{onProgress:d}=l,l.maxSizeMB=l.maxSizeMB||Number.POSITIVE_INFINITY,m=typeof l.useWebWorker!="boolean"||l.useWebWorker,delete l.useWebWorker,l.onProgress=w=>{u=w,typeof d=="function"&&d(u)},!(n instanceof Blob||n instanceof Dk))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return i(new Error("The file given is not an image"));if(p=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!m||typeof Worker!="function"||p)return kp(n,l).then((function(w){try{return c=w,b.call(this)}catch(x){return i(x)}}).bind(this),i);var y=(function(){try{return b.call(this)}catch(w){return i(w)}}).bind(this),v=function(w){try{return kp(n,l).then((function(x){try{return c=x,y()}catch(S){return i(S)}}),i)}catch(x){return i(x)}};try{return l.libURL=l.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Lk(n,l).then((function(w){try{return c=w,y()}catch{return v()}}),v)}catch{v()}function b(){try{c.name=n.name,c.lastModified=n.lastModified}catch{}try{l.preserveExif&&n.type==="image/jpeg"&&(!l.fileType||l.fileType&&l.fileType===n.type)&&(c=Jy(n,c))}catch{}return r(c)}}))}xt.getDataUrlFromFile=av,xt.getFilefromDataUrl=oh,xt.loadImage=nv,xt.drawImageInCanvas=sv,xt.drawFileInCanvas=Ao,xt.canvasToFile=To,xt.getExifOrientation=iv,xt.handleMaxWidthOrHeight=lv,xt.followExifOrientation=ov,xt.cleanupCanvasMemory=Fa,xt.isAutoOrientationInBrowser=xs,xt.approximateBelowMaximumCanvasSizeOfBrowser=rv,xt.copyExifWithoutOrientation=Jy,xt.getBrowserName=xr,xt.version="2.0.2";function $k(){const{t:n,i18n:t}=nt(),{currentUser:r}=ta(),i=ea(),l=Bt(),{addToast:c}=Qa(),u=O.useRef(null),[d,m]=O.useState("landing"),[p,y]=O.useState(""),[v,b]=O.useState({main:null,macro:null}),[w,x]=O.useState(!1),[S,A]=O.useState(null),[T,U]=O.useState(!1),[M,$]=O.useState(!1),[K,R]=O.useState(!1);O.useEffect(()=>{if(l.state?.refreshId){N(),m("landing");return}if(l.state?.restoredResult){A(l.state.restoredResult),m("result"),l.state?.restoredImages&&(b(l.state.restoredImages),y(l.state.restoredPlantType||""));return}if(r){const H=localStorage.getItem("pending_analysis_backup");if(H)try{const ee=JSON.parse(H);A(ee.result),b(ee.images),y(ee.plantType||""),m("result"),localStorage.removeItem("pending_analysis_backup"),c(n("analysis_restored")||"Analysis restored!","success")}catch(ee){console.error("Failed to parse backup:",ee),localStorage.removeItem("pending_analysis_backup")}}},[l.state,r]);const D=()=>{d==="input_type"&&m("capture_main")},E=()=>{y(""),m("capture_main")},j=()=>{u.current&&(u.current.value="",u.current.click())},z=H=>{H&&I(H),R(!1)},B=async H=>{const ee=H.target.files?.[0];if(ee){x(!0);try{const J=await xt(ee,{maxSizeMB:.8,maxWidthOrHeight:1280,useWebWorker:!0}),oe=new FileReader;oe.onloadend=()=>{const pe=oe.result;I(pe),x(!1)},oe.readAsDataURL(J)}catch(Z){console.error("Image compression failed:",Z),c(n("error_image_process")||"Image processing failed","error"),x(!1)}}},I=async H=>{d==="capture_main"?(b(ee=>({...ee,main:H})),await F(H)):d==="capture_macro"&&(b(ee=>({...ee,macro:H})),await F([v.main,H]))},F=async(H,ee)=>{x(!0),m("analyzing"),U(!1);try{const Z=await qy(H,t.language,p);if(Z.status==="needs_details")c(n("need_macro_photo")||"I need a closer look. Please take a macro photo.","info"),m("capture_macro");else{if(Z.status==="error")throw new Error(Z.error);A(Z),m("result")}}catch(Z){console.error(Z);let J=Z.message||n("error_diagnosis_failed")||"Diagnosis failed.";J.includes("NOT_PLANT")?J=n("error_not_plant"):(J.includes("503")||J.includes("overloaded"))&&(J=n("error_server_busy")),c(J,"error"),m("capture_main")}finally{x(!1)}},q=async()=>{if(r&&!(T||M)){$(!0);try{const H=p||S.plant_name||n("unknown_plant")||"Unknown Plant",ee=await Iy(r.uid,H,v,S);U(!0),c(n("treatment_started")||"Tedavi sreci balatld!","success"),setTimeout(()=>{$(!1),i("/analyses",{state:{showTreatmentGuide:!0,newAnalysisId:ee}})},500)}catch(H){console.error("Manual save failed:",H),c((n("save_fail")||"Failed to save analysis:")+" "+H.message,"error"),$(!1)}}},X=()=>{const H={result:S,images:v,plantType:p,timestamp:Date.now()};try{localStorage.setItem("pending_analysis_backup",JSON.stringify(H))}catch(ee){console.error("Storage full?",ee)}i("/login",{state:{pendingResult:S,pendingImages:v,pendingPlantType:p,returnUrl:"/"}})},N=()=>{b({main:null,macro:null}),y(""),A(null),U(!1),m("input_type"),u.current&&(u.current.value="")},k=()=>f.jsxs("div",{className:"flex flex-col items-center w-full animate-fade-in relative overflow-hidden",children:[f.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0 opacity-30 dark:opacity-10",children:[f.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-green-400 rounded-full mix-blend-multiply filter blur-[100px] animate-float opacity-70"}),f.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-emerald-300 rounded-full mix-blend-multiply filter blur-[120px] animate-float delay-100 opacity-70"})]}),f.jsxs("div",{className:"text-center max-w-4xl py-20 px-4 z-10",children:[f.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-2 rounded-full bg-white/50 dark:bg-gray-800/50 backdrop-blur-md border border-white/20 dark:border-gray-700/50 shadow-sm mb-8 animate-fade-in",children:[f.jsx(xE,{className:"w-4 h-4 text-amber-500"}),f.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent font-bold text-sm tracking-wide",children:n("ai_powered_v2")||"POWERED BY GEMINI AI"})]}),f.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-gray-900 dark:text-white mb-6 leading-tight tracking-tight animate-slide-up",children:[n("hero_title_1")||"Heal your plants with"," ",f.jsx("br",{}),f.jsx("span",{className:"text-gradient drop-shadow-sm",children:n("hero_title_highlight")||"AI Precision"})]}),f.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-2xl mx-auto leading-relaxed animate-slide-up delay-100",children:n("hero_desc_v2")||"Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo."}),f.jsxs("button",{onClick:()=>m("input_type"),className:"group relative bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-5 px-12 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all text-xl flex items-center justify-center gap-3 mx-auto animate-slide-up delay-200",children:[f.jsx("div",{className:"absolute inset-0 rounded-full bg-white/20 group-hover:scale-110 transition-transform opacity-0 group-hover:opacity-100 duration-500 blur-lg"}),f.jsxs("span",{className:"relative flex items-center gap-3",children:[f.jsx(Ss,{className:"w-6 h-6"}),n("start_diagnosis")]})]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-6xl px-4 z-10 mb-20 animate-slide-up delay-300",children:[{title:n("feature_1_title")||"Instant Analysis",desc:n("feature_1_desc")||"Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",icon:$E,color:"from-yellow-400 to-orange-500"},{title:n("feature_2_title")||"Smart Interactions",desc:n("feature_2_desc")||"The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",icon:ES,color:"from-blue-400 to-indigo-500"},{title:n("feature_3_title")||"Verified Treatments",desc:n("feature_3_desc")||"Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",icon:bE,color:"from-green-400 to-emerald-500"}].map((H,ee)=>{const Z=H.icon;return f.jsxs("div",{className:"glass-card p-8 hover:scale-[1.02] transition-transform duration-300 group",children:[f.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 bg-gradient-to-br ${H.color} shadow-lg text-white transform group-hover:rotate-6 transition-transform`,children:f.jsx(Z,{className:"w-7 h-7"})}),f.jsx("h3",{className:"font-bold text-2xl mb-3 text-gray-900 dark:text-white",children:H.title}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:H.desc})]},ee)})}),f.jsx("div",{className:"w-full max-w-6xl px-4 z-10 mb-20",children:f.jsxs("div",{className:"glass p-10 rounded-3xl text-center md:text-left flex flex-col md:flex-row items-center gap-10",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:n("summary_title")||"Your Personal Pocket Botanist"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-lg leading-relaxed",children:n("summary_desc")||"Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs."}),f.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[f.jsx(th,{className:"w-4 h-4 text-green-500"})," ",n("accuracy_badge")||"95% Accuracy"]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[f.jsx(np,{className:"w-4 h-4 text-blue-500"})," ",n("macro_support")||"Macro Support"]})]})]}),f.jsx("div",{className:"w-full md:w-1/3 flex justify-center",children:f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full blur-2xl opacity-20 animate-pulse"}),f.jsx("img",{src:"/placeholder-plant.png",onError:H=>{H.target.style.display="none"},className:"relative w-48 h-48 object-contain drop-shadow-2xl",alt:""}),f.jsx(Zt,{className:"w-48 h-48 text-green-600 dark:text-green-400 drop-shadow-2xl relative z-10"})]})})]})})]}),Q=()=>f.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[f.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-4 rounded-full mb-6 text-green-600 dark:text-green-400",children:f.jsx(Zt,{className:"w-12 h-12"})}),f.jsx("h2",{className:"text-2xl font-bold mb-2 text-center",children:n("scan_step_1")}),f.jsx("p",{className:"text-gray-500 mb-6 text-center",children:n("what_plant_question")}),f.jsx("input",{type:"text",value:p,onChange:H=>y(H.target.value),placeholder:n("what_plant_placeholder"),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 mb-4 focus:ring-2 focus:ring-green-500 outline-none"}),f.jsxs("button",{onClick:D,disabled:!p.trim(),className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[n("next_step")," ",f.jsx(ah,{className:"w-4 h-4"})]}),f.jsx("button",{onClick:E,className:"mt-4 text-gray-500 text-sm hover:underline",children:n("skip")})]}),G=H=>f.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[f.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:H?n("close_up_photo")||"Close-up Photo":n("scan_step_2")}),f.jsxs("div",{className:"w-full space-y-4",children:[f.jsxs("button",{onClick:()=>R(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-5 px-10 rounded-2xl shadow-xl flex items-center justify-center gap-4 text-xl transition-transform active:scale-95",children:[f.jsx(Ss,{className:"w-8 h-8"}),f.jsx("span",{children:n("open_camera")||"Open Camera"})]}),f.jsxs("button",{onClick:j,className:"w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-bold py-4 px-10 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-md flex items-center justify-center gap-4 text-lg transition-transform active:scale-95",children:[f.jsx(_y,{className:"w-6 h-6"}),f.jsx("span",{children:n("upload_gallery")||"Select from Gallery"})]})]}),f.jsx("button",{onClick:()=>m("input_type"),className:"mt-6 text-gray-500 underline",children:n("back")})]}),Y=()=>f.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[f.jsxs("div",{className:"relative w-64 h-64 mb-8 rounded-2xl overflow-hidden shadow-2xl border-4 border-green-500",children:[v.main&&f.jsx("img",{src:v.main,alt:"Analyzing",className:"w-full h-full object-cover opacity-50"}),f.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:f.jsx(Aa,{className:"w-16 h-16 text-white animate-spin"})})]}),f.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white animate-bounce",children:n("analyzing")||"Analyzing..."}),f.jsx("p",{className:"text-gray-500 mt-2",children:n("ai_thinking")||"AI Botanist is thinking..."})]}),L=()=>f.jsxs("div",{className:"w-full flex gap-8 flex-col md:flex-row items-start animate-fade-in relative justify-center",children:[f.jsx("div",{className:"w-full md:w-1/3 flex-shrink-0 z-0",children:f.jsxs("div",{className:"sticky top-4",children:[f.jsx("img",{src:v.main,alt:"Analyzed Plant",className:"w-full rounded-2xl shadow-lg border-2 border-green-100 dark:border-green-900"}),v.macro&&f.jsx("img",{src:v.macro,alt:"Macro Detail",className:"w-24 h-24 rounded-lg shadow border border-white absolute bottom-4 right-4"}),r&&f.jsx("button",{onClick:q,disabled:T||M,className:`mt-4 w-full font-bold py-4 px-6 rounded-xl border shadow-lg transition-transform hover:-translate-y-0.5 flex items-center justify-center gap-3 ${T||M?"bg-gray-100 text-gray-500 border-gray-200 cursor-default":"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white border-transparent"}`,children:T?f.jsxs(f.Fragment,{children:[f.jsx(zo,{className:"w-6 h-6"}),f.jsx("span",{children:n("saved")||"Kaydedildi"})]}):M?f.jsxs(f.Fragment,{children:[f.jsx(Aa,{className:"w-5 h-5 animate-spin"}),f.jsx("span",{children:n("saving")||"Kaydediliyor..."})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"bg-white/20 p-1 rounded-full",children:f.jsx(Ny,{className:"w-5 h-5"})}),f.jsx("span",{className:"text-lg",children:S?.is_treatable===!1?n("save_info")||"Bilgiyi Kaydet":n("start_treatment")||"Tedaviye Bala"})]})}),f.jsxs("button",{onClick:N,className:"mt-4 w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-semibold py-3 px-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-all",children:[n("take_photo")," (",n("reset"),")"]})]})}),f.jsxs("div",{className:"w-full md:w-2/3 relative",children:[f.jsx("div",{className:`transition-all duration-500 ${r?"":"filter blur-md select-none pointer-events-none opacity-50"}`,children:f.jsx(Ak,{result:S,onReset:N})}),!r&&f.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 backdrop-blur-[2px] rounded-2xl",children:f.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 p-8 rounded-3xl shadow-2xl text-center max-w-sm border border-white/20 mx-4 transform transition-all hover:scale-105",children:[f.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:f.jsx(np,{className:"w-8 h-8 text-green-600"})}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:n("login_to_view")}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm",children:n("login_blur_text")}),f.jsx("button",{onClick:X,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg hover:shadow-green-500/25 active:scale-95",children:n("login")})]})})]})]});return f.jsxs("div",{className:`flex flex-col w-full max-w-7xl mx-auto p-4 lg:p-8 ${d==="result"?"items-start":"items-center justify-center min-h-full"}`,children:[f.jsx("input",{type:"file",accept:"image/*",ref:u,onChange:B,className:"hidden"}),f.jsx(Tk,{isOpen:K,onClose:()=>R(!1),onCapture:z}),d==="landing"?k():f.jsxs(f.Fragment,{children:[d!=="result"&&f.jsxs("button",{onClick:()=>m("landing"),className:"self-start mb-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 flex items-center gap-2",children:[" ",n("back")]}),d==="input_type"&&Q(),d==="capture_main"&&G(!1),d==="capture_macro"&&G(!0),d==="analyzing"&&Y(),d==="result"&&L()]})]})}const ho=43200,jp=1440,Np=Symbol.for("constructDateFrom");function ch(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&Np in n?n[Np](t):n instanceof Date?new n.constructor(t):new Date(t)}function Xn(n,t){return ch(n,n)}let Bk={};function Hk(){return Bk}function Ap(n){const t=Xn(n),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+n-+r}function uh(n,...t){const r=ch.bind(null,n||t.find(i=>typeof i=="object"));return t.map(r)}function bo(n,t){const r=+Xn(n)-+Xn(t);return r<0?-1:r>0?1:r}function qk(n){return ch(n,Date.now())}function Ik(n,t,r){const[i,l]=uh(r?.in,n,t),c=i.getFullYear()-l.getFullYear(),u=i.getMonth()-l.getMonth();return c*12+u}function Pk(n){return t=>{const i=(n?Math[n]:Math.trunc)(t);return i===0?0:i}}function Gk(n,t){return+Xn(n)-+Xn(t)}function Kk(n,t){const r=Xn(n);return r.setHours(23,59,59,999),r}function Vk(n,t){const r=Xn(n),i=r.getMonth();return r.setFullYear(r.getFullYear(),i+1,0),r.setHours(23,59,59,999),r}function Yk(n,t){const r=Xn(n);return+Kk(r)==+Vk(r)}function Fk(n,t,r){const[i,l,c]=uh(r?.in,n,n,t),u=bo(l,c),d=Math.abs(Ik(l,c));if(d<1)return 0;l.getMonth()===1&&l.getDate()>27&&l.setDate(30),l.setMonth(l.getMonth()-u*d);let m=bo(l,c)===-u;Yk(i)&&d===1&&bo(i,c)===1&&(m=!1);const p=u*(d-+m);return p===0?0:p}function Wk(n,t,r){const i=Gk(n,t)/1e3;return Pk(r?.roundingMethod)(i)}const Xk={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Qk=(n,t,r)=>{let i;const l=Xk[n];return typeof l=="string"?i=l:t===1?i=l.one:i=l.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function Es(n){return(t={})=>{const r=t.width?String(t.width):n.defaultWidth;return n.formats[r]||n.formats[n.defaultWidth]}}const Jk={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Zk={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ej={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tj={date:Es({formats:Jk,defaultWidth:"full"}),time:Es({formats:Zk,defaultWidth:"full"}),dateTime:Es({formats:ej,defaultWidth:"full"})},aj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},nj=(n,t,r,i)=>aj[n];function Wa(n){return(t,r)=>{const i=r?.context?String(r.context):"standalone";let l;if(i==="formatting"&&n.formattingValues){const u=n.defaultFormattingWidth||n.defaultWidth,d=r?.width?String(r.width):u;l=n.formattingValues[d]||n.formattingValues[u]}else{const u=n.defaultWidth,d=r?.width?String(r.width):n.defaultWidth;l=n.values[d]||n.values[u]}const c=n.argumentCallback?n.argumentCallback(t):t;return l[c]}}const rj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},sj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ij={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},lj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},oj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},cj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},uj=(n,t)=>{const r=Number(n),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},dj={ordinalNumber:uj,era:Wa({values:rj,defaultWidth:"wide"}),quarter:Wa({values:sj,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Wa({values:ij,defaultWidth:"wide"}),day:Wa({values:lj,defaultWidth:"wide"}),dayPeriod:Wa({values:oj,defaultWidth:"wide",formattingValues:cj,defaultFormattingWidth:"wide"})};function Xa(n){return(t,r={})=>{const i=r.width,l=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],c=t.match(l);if(!c)return null;const u=c[0],d=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],m=Array.isArray(d)?fj(d,v=>v.test(u)):hj(d,v=>v.test(u));let p;p=n.valueCallback?n.valueCallback(m):m,p=r.valueCallback?r.valueCallback(p):p;const y=t.slice(u.length);return{value:p,rest:y}}}function hj(n,t){for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&t(n[r]))return r}function fj(n,t){for(let r=0;r<n.length;r++)if(t(n[r]))return r}function cv(n){return(t,r={})=>{const i=t.match(n.matchPattern);if(!i)return null;const l=i[0],c=t.match(n.parsePattern);if(!c)return null;let u=n.valueCallback?n.valueCallback(c[0]):c[0];u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(l.length);return{value:u,rest:d}}}const mj=/^(\d+)(th|st|nd|rd)?/i,gj=/\d+/i,pj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yj={any:[/^b/i,/^(a|c)/i]},vj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},bj={any:[/1/i,/2/i,/3/i,/4/i]},wj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},xj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_j={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Sj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ej={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},kj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},jj={ordinalNumber:cv({matchPattern:mj,parsePattern:gj,valueCallback:n=>parseInt(n,10)}),era:Xa({matchPatterns:pj,defaultMatchWidth:"wide",parsePatterns:yj,defaultParseWidth:"any"}),quarter:Xa({matchPatterns:vj,defaultMatchWidth:"wide",parsePatterns:bj,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Xa({matchPatterns:wj,defaultMatchWidth:"wide",parsePatterns:xj,defaultParseWidth:"any"}),day:Xa({matchPatterns:_j,defaultMatchWidth:"wide",parsePatterns:Sj,defaultParseWidth:"any"}),dayPeriod:Xa({matchPatterns:Ej,defaultMatchWidth:"any",parsePatterns:kj,defaultParseWidth:"any"})},Gi={code:"en-US",formatDistance:Qk,formatLong:tj,formatRelative:nj,localize:dj,match:jj,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Nj(n,t,r){const i=Hk(),l=r?.locale??i.locale??Gi,c=2520,u=bo(n,t);if(isNaN(u))throw new RangeError("Invalid time value");const d=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:u}),[m,p]=uh(r?.in,...u>0?[t,n]:[n,t]),y=Wk(p,m),v=(Ap(p)-Ap(m))/1e3,b=Math.round((y-v)/60);let w;if(b<2)return r?.includeSeconds?y<5?l.formatDistance("lessThanXSeconds",5,d):y<10?l.formatDistance("lessThanXSeconds",10,d):y<20?l.formatDistance("lessThanXSeconds",20,d):y<40?l.formatDistance("halfAMinute",0,d):y<60?l.formatDistance("lessThanXMinutes",1,d):l.formatDistance("xMinutes",1,d):b===0?l.formatDistance("lessThanXMinutes",1,d):l.formatDistance("xMinutes",b,d);if(b<45)return l.formatDistance("xMinutes",b,d);if(b<90)return l.formatDistance("aboutXHours",1,d);if(b<jp){const x=Math.round(b/60);return l.formatDistance("aboutXHours",x,d)}else{if(b<c)return l.formatDistance("xDays",1,d);if(b<ho){const x=Math.round(b/jp);return l.formatDistance("xDays",x,d)}else if(b<ho*2)return w=Math.round(b/ho),l.formatDistance("aboutXMonths",w,d)}if(w=Fk(p,m),w<12){const x=Math.round(b/ho);return l.formatDistance("xMonths",x,d)}else{const x=w%12,S=Math.trunc(w/12);return x<3?l.formatDistance("aboutXYears",S,d):x<9?l.formatDistance("overXYears",S,d):l.formatDistance("almostXYears",S+1,d)}}function Bo(n,t){return Nj(n,qk(n),t)}const Aj={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},Tj=(n,t,r)=>{let i;const l=Aj[n];return typeof l=="string"?i=l:t===1?i=l.one:i=l.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?i+" sonra":i+" nce":i},Cj={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},Rj={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Oj={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Mj={date:Es({formats:Cj,defaultWidth:"full"}),time:Es({formats:Rj,defaultWidth:"full"}),dateTime:Es({formats:Oj,defaultWidth:"full"})},Uj={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},Dj=(n,t,r,i)=>Uj[n],zj={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},Lj={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},$j={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},Bj={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},Hj={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},qj={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},Ij=(n,t)=>Number(n)+".",Pj={ordinalNumber:Ij,era:Wa({values:zj,defaultWidth:"wide"}),quarter:Wa({values:Lj,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:Wa({values:$j,defaultWidth:"wide"}),day:Wa({values:Bj,defaultWidth:"wide"}),dayPeriod:Wa({values:Hj,defaultWidth:"wide",formattingValues:qj,defaultFormattingWidth:"wide"})},Gj=/^(\d+)(\.)?/i,Kj=/\d+/i,Vj={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},Yj={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},Fj={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},Wj={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},Xj={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},Qj={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},Jj={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},Zj={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},eN={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},tN={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},aN={ordinalNumber:cv({matchPattern:Gj,parsePattern:Kj,valueCallback:function(n){return parseInt(n,10)}}),era:Xa({matchPatterns:Vj,defaultMatchWidth:"wide",parsePatterns:Yj,defaultParseWidth:"any"}),quarter:Xa({matchPatterns:Fj,defaultMatchWidth:"wide",parsePatterns:Wj,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Xa({matchPatterns:Xj,defaultMatchWidth:"wide",parsePatterns:Qj,defaultParseWidth:"any"}),day:Xa({matchPatterns:Jj,defaultMatchWidth:"wide",parsePatterns:Zj,defaultParseWidth:"any"}),dayPeriod:Xa({matchPatterns:eN,defaultMatchWidth:"any",parsePatterns:tN,defaultParseWidth:"any"})},Ho={code:"tr",formatDistance:Tj,formatLong:Mj,formatRelative:Dj,localize:Pj,match:aN,options:{weekStartsOn:1,firstWeekContainsDate:1}},uv=O.createContext();function dh(){return O.useContext(uv)}function nN({children:n}){const[t,r]=O.useState(!1),[i,l]=O.useState("login"),p={isOpen:t,view:i,openLogin:()=>{l("login"),r(!0)},openRegister:()=>{l("register"),r(!0)},closeModal:()=>{r(!1)},toggleView:()=>{l(y=>y==="login"?"register":"login")}};return f.jsx(uv.Provider,{value:p,children:n})}function hh({post:n,onUserClick:t,onViewAnalysis:r,isDetailView:i=!1,authorOverride:l=null}){const{openLogin:c}=dh(),u=ea(),{t:d,i18n:m}=nt(),{currentUser:p}=ta(),y=m.language==="tr"?Ho:Gi,[v,b]=O.useState(""),[w,x]=O.useState(i),[S,A]=O.useState(!1),[T,U]=O.useState(!1),[M,$]=O.useState(n?.content||""),[K,R]=O.useState(null),D=p?.uid===n?.userId;O.useEffect(()=>{if(!n?.userId||D||l)return;(async()=>{try{const{data:L}=await ce.from("profiles").select("*").eq("id",n.userId).single();L&&R({...L,name:L.full_name,photoURL:L.avatar_url,avatar:L.avatar_url})}catch(L){console.error("Failed to fetch author for post",n.id,L)}})()},[n?.userId,D,l,n.id]);const E=async()=>{try{await Qy(n.id,{content:M}),U(!1)}catch{alert("Failed to update post")}};if(!n)return null;const j=n.likes&&p&&n.likes.includes(p.uid),z=n.likes?n.likes.length:0,B=n.comments?n.comments.length:0,[I,F]=O.useState("");O.useEffect(()=>{const Y=()=>{if(!n.createdAt?.seconds){F(d("just_now")||"Just now");return}const H=new Date(n.createdAt.seconds*1e3);(new Date-H)/(1e3*60*60)>24?F(H.toLocaleDateString(m.language==="tr"?"tr-TR":"en-US",{day:"numeric",month:"long",year:"numeric"})):F(Bo(H,{addSuffix:!0,locale:y,includeSeconds:!1}))};Y();const L=setInterval(Y,6e4);return()=>clearInterval(L)},[n.createdAt,y,d,m.language]),n.createdAt?.seconds&&new Date(n.createdAt.seconds*1e3);const q=async()=>{if(!(!p||S)){A(!0);try{await Wy(n.id,p.uid)}catch(Y){console.error(Y)}finally{A(!1)}}},X=async()=>{if(window.confirm(d("confirm_delete_post")||"Delete this post?"))try{await Fy(n.id)}catch{alert("Failed to delete post")}},N=async Y=>{if(Y.preventDefault(),!(!v.trim()||!p))try{await Xy(n.id,p.uid,p.displayName||"User",v),b("")}catch(L){console.error(L),alert("Failed to post comment")}},k=async()=>{const Y={title:`Plant AI - ${n.title||n.authorName}`,text:n.content,url:window.location.origin+"/#/community/post/"+n.id};if(navigator.share)try{await navigator.share(Y)}catch{console.log("Share canceled")}else navigator.clipboard.writeText(Y.url),alert(d("link_copied")||"Link copied!")},Q=Y=>{if(!Y||Y==="Unknown")return null;const L=`plant_${Y.toLowerCase().replace(/\s+/g,"_")}`,H=d(L);return!H||H===L?Y.charAt(0).toUpperCase()+Y.slice(1):H},G=D&&(p?.photoURL||p?.avatar)?p.photoURL||p.avatar:l?.photoURL||l?.avatar?l.photoURL||l.avatar:K?.photoURL||K?.avatar?K.photoURL||K.avatar:n.userAvatar||`https://ui-avatars.com/api/?name=${n.authorName||"Gardener"}&background=random`;return f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-4 animate-fade-in relative group",children:[D&&f.jsx("button",{onClick:X,className:"absolute top-4 right-4 p-2 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:text-red-500 rounded-full opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity z-10",title:d("delete")||"Delete",children:f.jsx(Ui,{className:"w-4 h-4"})}),!n.hideAuthor&&f.jsx("div",{className:"p-4 flex items-center justify-between",children:f.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>t&&t(n.userId),children:[f.jsx("img",{src:G,alt:n.authorName,className:"w-10 h-10 rounded-full object-cover border border-gray-200"}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 leading-tight hover:underline",children:n.authorName||d("gardener")}),f.jsx("span",{className:"text-xs text-gray-500",children:I})]})]})}),f.jsxs("div",{className:`px-4 pb-2 ${n.hideAuthor?"pt-4":""}`,children:[n.title&&f.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-1",children:n.title}),f.jsx("p",{className:`text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-3 whitespace-pre-wrap ${i?"":"cursor-pointer hover:opacity-80"}`,onClick:()=>!i&&u(`/community/post/${n.id}`),children:n.content}),n.plantType&&n.plantType!=="Unknown"&&f.jsx("span",{className:"inline-block bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 text-xs px-2 py-1 rounded-md mb-2",children:Q(n.plantType)}),n.relatedAnalysisId&&f.jsx("div",{className:"mt-2",children:f.jsxs("button",{onClick:()=>r&&r(n.relatedAnalysisId),className:"w-full py-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:[f.jsx("span",{className:"bg-green-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"AI"}),d("view_analysis_report")||"Analiz Raporunu Gr"]})})]}),n.image&&f.jsxs("div",{className:"w-full h-64 sm:h-80 bg-gray-100 dark:bg-gray-900 overflow-hidden cursor-pointer relative group/image",onClick:()=>window.open(n.image,"_blank"),children:[f.jsx("img",{src:n.image,alt:"Post",className:"w-full h-full object-cover",loading:"lazy"}),f.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 backdrop-blur-sm",children:[f.jsx(Mi,{className:"w-3 h-3"}),f.jsxs("span",{children:[20+(n.likes?.length||0)*5," ",d("views")||"Grntlenme"]})]})]}),f.jsxs("div",{className:"p-4 flex items-center justify-between border-t border-gray-100 dark:border-gray-700",children:[f.jsxs("div",{className:"flex gap-4",children:[f.jsxs("button",{onClick:q,className:`flex items-center gap-1.5 transition-colors ${j?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[f.jsx(wy,{className:`w-5 h-5 ${j?"fill-current":""}`}),f.jsx("span",{className:"text-sm font-medium",children:z||d("like")})]}),f.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-blue-500 transition-colors",onClick:()=>x(!w),children:[f.jsx(Mi,{className:"w-5 h-5"}),f.jsx("span",{className:"text-sm font-medium",children:B||d("comment")})]}),D&&f.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-green-500 transition-colors",onClick:()=>U(!0),children:[f.jsx(jy,{className:"w-5 h-5"}),f.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:d("edit")})]})]}),f.jsxs("button",{onClick:k,className:"text-gray-500 hover:text-green-600 transition-colors flex items-center gap-1",children:[f.jsx(ko,{className:"w-5 h-5"}),f.jsx("span",{className:"text-sm hidden sm:inline",children:(d("share")||"payla").toLowerCase()})]})]}),T&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-lg shadow-2xl",children:[f.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white",children:d("edit_post")}),f.jsx("textarea",{className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white mb-4",value:M,onChange:Y=>$(Y.target.value),rows:4}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>U(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg dark:text-gray-300 dark:hover:bg-gray-700",children:d("cancel")}),f.jsx("button",{onClick:E,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:d("save")})]})]})}),w&&f.jsxs("div",{className:"px-4 pb-4 border-t border-gray-50 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/50",children:[f.jsxs("div",{className:"space-y-3 mt-4 max-h-60 overflow-y-auto mb-4 custom-scrollbar",children:[n.comments&&n.comments.map((Y,L)=>f.jsxs("div",{className:"flex gap-2 items-start text-sm",children:[f.jsxs("span",{className:"font-bold text-gray-900 dark:text-white shrink-0",children:[Y.userName,":"]}),f.jsx("span",{className:"text-gray-700 dark:text-gray-300 break-words",children:Y.text})]},L)),(!n.comments||n.comments.length===0)&&f.jsx("p",{className:"text-gray-400 text-center text-sm italic",children:d("no_comments_yet")})]}),p?f.jsxs("form",{onSubmit:N,className:"flex gap-2",children:[f.jsx("input",{type:"text",value:v,onChange:Y=>b(Y.target.value),placeholder:d("add_comment_placeholder"),className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 dark:bg-gray-700 text-sm outline-none focus:border-green-500"}),f.jsx("button",{type:"submit",disabled:!v.trim(),className:"p-2 bg-green-600 text-white rounded-lg disabled:opacity-50 hover:bg-green-700",children:f.jsx(ks,{className:"w-4 h-4"})})]}):f.jsx("button",{onClick:c,className:"w-full py-3 text-center text-sm text-green-600 bg-green-50 dark:bg-green-900/10 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/20 transition-colors font-medium",children:d("login_to_comment")||"Yorum yapmak iin giri yapn"})]})]})}const wo=[{value:"tomato",labelKey:"plant_tomato"},{value:"pepper",labelKey:"plant_pepper"},{value:"cucumber",labelKey:"plant_cucumber"},{value:"eggplant",labelKey:"plant_eggplant"},{value:"potato",labelKey:"plant_potato"},{value:"onion",labelKey:"plant_onion"},{value:"garlic",labelKey:"plant_garlic"},{value:"lettuce",labelKey:"plant_lettuce"},{value:"spinach",labelKey:"plant_spinach"},{value:"carrot",labelKey:"plant_carrot"},{value:"bean",labelKey:"plant_bean"},{value:"corn",labelKey:"plant_corn"},{value:"zucchini",labelKey:"plant_zucchini"},{value:"strawberry",labelKey:"plant_strawberry"},{value:"lemon",labelKey:"plant_lemon"},{value:"orange",labelKey:"plant_orange"},{value:"apple",labelKey:"plant_apple"},{value:"grape",labelKey:"plant_grape"},{value:"watermelon",labelKey:"plant_watermelon"},{value:"melon",labelKey:"plant_melon"},{value:"cherry",labelKey:"plant_cherry"},{value:"peach",labelKey:"plant_peach"},{value:"rose",labelKey:"plant_rose"},{value:"orchid",labelKey:"plant_orchid"},{value:"succulent",labelKey:"plant_succulent"},{value:"tulip",labelKey:"plant_tulip"},{value:"sunflower",labelKey:"plant_sunflower"},{value:"daisy",labelKey:"plant_daisy"},{value:"lavender",labelKey:"plant_lavender"},{value:"cactus",labelKey:"plant_cactus"},{value:"olive",labelKey:"plant_olive"},{value:"pine",labelKey:"plant_pine"},{value:"palm",labelKey:"plant_palm"},{value:"mint",labelKey:"plant_mint"},{value:"basil",labelKey:"plant_basil"},{value:"rosemary",labelKey:"plant_rosemary"},{value:"parsley",labelKey:"plant_parsley"},{value:"other",labelKey:"plant_other"}],rN=["badword","ktgz","kfr","hakaret","aptal","salak","idiot","stupid","xxx","porn"];function sN(n){if(!n)return!0;const t=n.toLowerCase();return!rN.some(r=>t.includes(r))}async function iN(n,t){try{const{error:r}=await ce.from("user_blocks").insert({blocker_id:n,blocked_id:t});if(r)throw r;return!0}catch(r){throw console.error("Error blocking user:",r),r}}async function lN(n,t){try{const{error:r}=await ce.from("user_blocks").delete().match({blocker_id:n,blocked_id:t});if(r)throw r;return!0}catch(r){throw console.error("Error unblocking user:",r),r}}async function oN(n,t){try{const{data:r,error:i}=await ce.from("user_blocks").select("id").match({blocker_id:n,blocked_id:t}).single();return i?!1:!!r}catch{return!1}}function cN({onClose:n,onPostCreated:t}){const{t:r}=nt(),{currentUser:i}=ta(),l=O.useRef(null),[c,u]=O.useState(""),[d,m]=O.useState(""),[p,y]=O.useState(""),[v,b]=O.useState(!1),[w,x]=O.useState("none"),[S,A]=O.useState(null),[T,U]=O.useState(null),[M,$]=O.useState(!1),[K,R]=O.useState(!1),[D,E]=O.useState(""),[j,z]=O.useState(""),[B,I]=O.useState(0);O.useEffect(()=>{if(d){const k=wo.find(Q=>Q.value===d);k&&y(r(k.labelKey))}},[d,r]);const F=async k=>{const Q=k.target.files[0];if(Q){const G=new FileReader;G.onloadend=()=>U(G.result),G.readAsDataURL(Q),A(Q)}},q=async()=>{if(S){R(!0);try{let k=S;try{k=await xt(S,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0})}catch(G){console.warn("Compression failed for analysis, using original",G)}const Q=new FileReader;Q.readAsDataURL(k),Q.onloadend=async()=>{const G=Q.result,Y=await qy(G,"en"),L=(Y.plant_name+" "+Y.disease_name).toLowerCase();let H=null;for(const ee of wo)if(L.includes(ee.value)){H=ee;break}H?(m(H.value),y(r(H.labelKey)),z(`${r("auto_detect")}: ${r(H.labelKey)}`)):z("Plant detected but not in our list yet."),setTimeout(()=>z(""),3e3),R(!1)}}catch(k){console.error("Auto detect failed",k),E(r("error_diagnosis_failed")),R(!1)}}},X=async k=>{if(k.preventDefault(),!!c.trim()){if(!sN(c)){E(r("unsafe_content_warning")||"Your post contains inappropriate language.");return}$(!0),E(""),I(0);try{let Q=null;if(S)try{console.log("Compressing for Base64 storage...");const Y=await xt(S,{maxSizeMB:.15,maxWidthOrHeight:800,useWebWorker:!0,initialQuality:.7});Q=await new Promise((L,H)=>{const ee=new FileReader;ee.readAsDataURL(Y),ee.onload=()=>L(ee.result),ee.onerror=Z=>H(Z)}),console.log("Base64 string ready, length:",Q.length)}catch(G){console.error("Compression failed:",G),E("Image is too large and could not be compressed."),$(!1);return}await ih(i.uid,{authorName:i.displayName||"Gardener",userAvatar:i.photoURL||i.avatar||null,content:c,plantType:d||"other",image:Q}),t(),n()}catch(Q){console.error("FULL POST ERROR:",Q),E(Q.message||r("error_diagnosis_failed")||"Failed to share post.")}finally{$(!1)}}},N=wo.filter(k=>r(k.labelKey).toLowerCase().includes(p.toLowerCase()));return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[f.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[f.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:r("ask_question")}),f.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:f.jsx(Ta,{className:"w-5 h-5 text-gray-500"})})]}),f.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[D&&f.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:D}),j&&f.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg text-sm",children:j}),f.jsxs("form",{onSubmit:X,className:"space-y-4",children:[f.jsx("textarea",{className:"w-full p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none resize-none min-h-[120px]",placeholder:r("what_plant_placeholder"),value:c,onChange:k=>u(k.target.value),required:!0}),f.jsxs("div",{className:"relative",children:[f.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1 ml-1 uppercase",children:r("plant_diagnosis")}),f.jsxs("div",{className:"relative",children:[f.jsx(Ay,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),f.jsx("input",{type:"text",className:"w-full pl-9 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:r("select_plant"),value:p,onChange:k=>{y(k.target.value),b(!0),k.target.value===""&&m("")},onFocus:()=>b(!0)}),f.jsx(nh,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),v&&f.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar",children:N.length>0?N.map(k=>f.jsx("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200",onClick:()=>{m(k.value),y(r(k.labelKey)),b(!1)},children:r(k.labelKey)},k.value)):f.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:"No Match"})}),v&&f.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>b(!1)})]}),T&&f.jsxs("div",{className:"relative rounded-xl overflow-hidden max-h-48 bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[f.jsx("img",{src:T,alt:"Preview",className:"w-full h-full object-cover"}),f.jsx("button",{type:"button",onClick:()=>{A(null),U(null)},className:"absolute top-2 right-2 p-1 bg-black/50 text-white rounded-full hover:bg-black/70",disabled:M,children:f.jsx(Ta,{className:"w-4 h-4"})}),f.jsxs("button",{type:"button",onClick:q,disabled:K,className:"absolute bottom-2 right-2 px-3 py-1.5 bg-blue-600/90 text-white rounded-lg text-xs font-bold flex items-center gap-1.5 hover:bg-blue-700 backdrop-blur-sm shadow-lg transition-transform hover:scale-105",children:[K?f.jsx(Aa,{className:"w-3 h-3 animate-spin"}):f.jsx(DE,{className:"w-3 h-3"}),r(K?"detecting":"auto_detect")]})]}),M&&B>0&&f.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:[f.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${B}%`}}),f.jsxs("p",{className:"text-xs text-center mt-1 text-gray-500",children:[Math.round(B),"%"]})]}),f.jsxs("div",{className:"flex justify-between items-center pt-2",children:[f.jsxs("button",{type:"button",onClick:()=>l.current?.click(),disabled:M,className:"flex items-center gap-2 text-gray-500 hover:text-green-600 transition-colors px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:[f.jsx(_y,{className:"w-5 h-5"}),f.jsx("span",{className:"text-sm font-medium",children:r("upload_photo")})]}),f.jsx("input",{type:"file",ref:l,onChange:F,accept:"image/*",className:"hidden"}),f.jsxs("button",{type:"submit",disabled:M||!c.trim(),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl active:scale-95",children:[M?f.jsx(Aa,{className:"w-4 h-4 animate-spin"}):f.jsx(ks,{className:"w-4 h-4"}),M?"...":r("ask_question")]})]})]})]})]})})}function uN({user:n,onClose:t}){const{currentUser:r}=ta(),i=ea(),[l,c]=O.useState(!1),{t:u,i18n:d}=nt(),{addToast:m}=Qa(),{openLogin:p}=dh(),[y,v]=O.useState(n),[b,w]=O.useState(!1);O.useEffect(()=>{if(!n)return;const E=n.uid||n.id;if(!E)return;const j=ce.channel(`public:profiles:id=eq.${E}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`id=eq.${E}`},z=>{v({uid:z.new.id,...z.new,avatar:z.new.avatar_url,name:z.new.full_name,lastSeen:z.new.last_seen})}).subscribe();return ce.from("profiles").select("*").eq("id",E).single().then(({data:z})=>{z&&v({uid:z.id,...z,avatar:z.avatar_url,name:z.full_name,lastSeen:z.last_seen})}),()=>{ce.removeChannel(j)}},[n]);const x=n?{...n,...y,uid:y?.uid||n.uid||n.id}:null,[S,A]=O.useState(!1),[T,U]=O.useState(!1);O.useEffect(()=>{(async()=>{if(r&&x){const{isFollowing:j,isRequested:z}=await Ry(r.uid,x.uid);A(j),U(z)}})()},[r,x]);const[M,$]=O.useState(!1);O.useEffect(()=>{r&&x&&oN(r.uid,x.uid).then($)},[r,x]);const K=async()=>{if(!(!r||!x))try{M?(await lN(r.uid,x.uid),$(!1),m(u("user_unblocked")||"User unblocked","success")):window.confirm(u("confirm_block")||"Block this user? They won't be able to message you.")&&(await iN(r.uid,x.uid),$(!0),m(u("user_blocked")||"User blocked","success"))}catch(E){console.error(E),m("Action failed","error")}},R=async()=>{if(!r){p();return}if(!b){w(!0);try{S?(await po(r.uid,x.uid),A(!1),U(!1),m(u("unfollowed_user")||"Takipten kld","info")):T?(await My(r.uid,x.uid),U(!1),m(u("request_cancelled")||"stek iptal edildi","info")):(await Oy(r.uid,{displayName:r.displayName||"Unknown User",photoURL:r.photoURL||null},x.uid),U(!0),m(u("request_sent")||"Takip istei gnderildi","success"))}catch(E){console.error("Follow Error:",E),m(u("error_occurred")||"Bir hata olutu: "+E.message,"error")}finally{w(!1)}}},D=E=>{if(!E?.lastSeen)return!1;const j=new Date(E.lastSeen);return new Date-j<180*1e3};return!n||!x?null:f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",onClick:t,children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl transform transition-all scale-100",onClick:E=>E.stopPropagation(),children:[f.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 bg-black/10 hover:bg-black/20 rounded-full transition-colors z-10",children:f.jsx(Ta,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),f.jsxs("div",{className:"flex flex-col items-center relative",children:[f.jsx("img",{src:x.photoURL||x.avatar||`https://ui-avatars.com/api/?name=${x.name}`,alt:x.name,className:"w-24 h-24 rounded-full object-cover mb-4 shadow-lg border-4 border-green-50 dark:border-green-900"}),f.jsxs("div",{className:`absolute top-2 right-2 px-3 py-1 rounded-full text-xs font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 ${D(x)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${D(x)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),D(x)?"Online":"Offline"]}),f.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:x.name||"User"}),f.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6 flex items-center gap-1",children:[f.jsx(Di,{className:"w-3 h-3"}),f.jsxs("span",{children:[u("joined")||"Katlma Tarihi",": ",x.createdAt?.seconds?new Date(x.createdAt.seconds*1e3).toLocaleDateString(d.language,{day:"numeric",month:"long",year:"numeric"}):u("unknown_date")]})]}),f.jsxs("div",{className:"flex flex-col gap-3 w-full mt-6",children:[f.jsxs("button",{onClick:()=>{t(),i(`/profile/${x.uid}`)},className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-300 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 transition-transform active:scale-95",children:[f.jsx(Di,{className:"w-5 h-5"}),u("view_profile")||"Profili Gr"]}),f.jsxs("div",{className:"flex gap-3 w-full",children:[r&&r.uid!==x.uid&&f.jsx("button",{onClick:R,disabled:b,className:`flex-1 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95 ${S?"bg-gray-200 text-gray-800 hover:bg-gray-300 dark:bg-gray-700 dark:text-white":T?"bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-white":"bg-green-600 text-white hover:bg-green-700"}`,children:S?f.jsxs(f.Fragment,{children:[f.jsx(TE,{className:"w-5 h-5"}),u("following")||"Following"]}):T?f.jsxs(f.Fragment,{children:[f.jsx(Lo,{className:"w-5 h-5"}),u("requested")||"Requested"]}):f.jsxs(f.Fragment,{children:[f.jsx(rh,{className:"w-5 h-5"}),u("follow")||"Follow"]})}),r&&r.uid!==x.uid&&f.jsxs("button",{onClick:async()=>{if(S){t();const E={uid:x.uid,name:x.name||x.displayName||"User",photoURL:x.photoURL||x.avatar||null};i("/messages/new",{state:{targetUser:E}})}else m(u("must_follow_to_message")||"Mesaj gndermek iin takip etmelisin","info")},className:`flex-1 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 shadow-sm transition-transform active:scale-95 ${S?"bg-blue-500 hover:bg-blue-600 text-white shadow-blue-200":"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[f.jsx(Mi,{className:"w-5 h-5"}),u("send_message")||"Mesaj Gnder"]})]}),r&&r.uid!==x.uid&&f.jsx("button",{onClick:K,className:`w-full py-2.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors ${M?"bg-gray-200 text-gray-700 hover:bg-gray-300":"text-red-500 hover:bg-red-50 border border-red-100"}`,children:M?u("unblock_user")||"Unblock User":u("block_user")||"Block User"})]})]})]})})}function qo(){return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white dark:bg-gray-900 transition-opacity duration-300",children:f.jsxs("div",{className:"flex flex-col items-center animate-fade-in",children:[f.jsxs("div",{className:"relative w-24 h-24 flex items-center justify-center",children:[f.jsx("div",{className:"absolute inset-0 border-4 border-green-100 dark:border-green-900 rounded-full"}),f.jsx("div",{className:"absolute inset-0 border-4 border-green-500 rounded-full border-t-transparent animate-spin"}),f.jsx(Zt,{className:"w-10 h-10 text-green-600 dark:text-green-400 animate-pulse"})]}),f.jsx("h3",{className:"mt-6 text-lg font-bold text-gray-800 dark:text-gray-200 animate-pulse tracking-wide",children:"Plant AI"})]})})}const dN=({fact:n})=>{const{t}=nt(),[r,i]=O.useState(null);if(O.useEffect(()=>{if(!n)return;const d=Math.floor(Math.random()*1e3);i(`https://source.unsplash.com/featured/?${encodeURIComponent(n.imageKeyword)},nature,plant&sig=${d}`);const m=`https://image.pollinations.ai/prompt/${encodeURIComponent("realistic nature photography "+n.imageKeyword)}?nologo=true`;i(m)},[n]),!n)return null;const l=()=>{switch(n.type){case"pest":return f.jsx(jS,{className:"text-red-500 w-6 h-6"});case"disease":return f.jsx(Ey,{className:"text-yellow-500 w-6 h-6"});case"tip":return f.jsx(KS,{className:"text-yellow-400 w-6 h-6"});default:return f.jsx(Zt,{className:"text-green-500 w-6 h-6"})}},c=()=>{switch(n.type){case"pest":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";case"disease":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";case"tip":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800";default:return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}},u=async()=>{const d={title:`Plant AI Daily Tip: ${n.title}`,text:n.content,url:window.location.origin};if(navigator.share)try{await navigator.share(d)}catch{}else navigator.clipboard.writeText(n.content),alert("Copied to clipboard!")};return f.jsxs("div",{className:`mb-6 rounded-xl border p-4 shadow-sm relative overflow-hidden ${c()} transition-all hover:shadow-md`,children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-full shadow-sm",children:f.jsx(Zt,{className:"text-green-600 w-5 h-5"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t("daily_bot_title")||"Plant AI Gnlk Bilgi"}),f.jsx("div",{className:"text-xs text-gray-400",children:new Date().toLocaleDateString()})]})]}),f.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[f.jsxs("div",{className:"w-full md:w-1/3 h-48 md:h-auto relative rounded-lg overflow-hidden bg-gray-200 dark:bg-gray-700 shadow-inner group",children:[r&&f.jsx("img",{src:r,alt:n.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",loading:"lazy"}),f.jsx("div",{className:"absolute top-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded backdrop-blur-sm",children:"AI Generated"})]}),f.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l(),f.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 leading-tight",children:n.title})]}),f.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-4",children:n.content}),f.jsx("div",{className:"mt-auto flex justify-end border-t border-gray-200 dark:border-gray-700/50 pt-3",children:f.jsxs("button",{onClick:u,className:"text-gray-500 hover:text-green-600 transition-colors flex items-center gap-1",children:[f.jsx(ko,{className:"w-5 h-5"}),f.jsx("span",{className:"text-sm font-medium",children:t("share_generic")||"payla"})]})})]})]})]})},Tp="daily_posts",hN=async()=>{const n=new Date().toISOString().split("T")[0];try{const{data:t,error:r}=await ce.from(Tp).select("*").eq("date",n).single();if(t)return t;{const l={...await kk("tr"),date:n,created_at:new Date().toISOString(),likes:0,views:0},{data:c,error:u}=await ce.from(Tp).insert(l).select().single();if(u)throw u;return c}}catch(t){return console.error("Error fetching/creating daily post:",t),null}};function fN({analysisId:n,onClose:t}){const[r,i]=O.useState(null),[l,c]=O.useState(!0);return O.useEffect(()=>{async function u(){try{const{data:d,error:m}=await ce.from("analyses").select("*, analysis_updates(*)").eq("id",n).single();d&&i({...d,plantType:d.plant_type,mainImage:d.main_image,macroImage:d.macro_image,updates:(d.analysis_updates||[]).map(p=>({imageUrl:p.image_url,note:p.note,createdAt:{seconds:new Date(p.created_at).getTime()/1e3}})).sort((p,y)=>y.createdAt.seconds-p.createdAt.seconds)})}catch(d){console.error(d)}finally{c(!1)}}u()},[n]),O.useEffect(()=>{const u=d=>{d.key==="Escape"&&t()};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[t]),l?f.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:f.jsx(Aa,{className:"animate-spin text-white w-8 h-8"})}):r?f.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:t,children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto custom-scrollbar shadow-2xl p-6 relative",onClick:u=>u.stopPropagation(),children:[f.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-full dark:hover:bg-gray-700 transition-colors z-10",children:f.jsx(Ta,{className:"w-5 h-5 text-gray-500"})}),f.jsx("div",{className:"flex justify-between items-start mb-6 pr-8",children:f.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize flex items-center gap-2",children:[f.jsx("span",{className:"text-green-600",children:r.plantType})," Diagnosis"]})}),f.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("img",{src:r.mainImage,alt:"Main",className:"rounded-xl object-cover w-full h-48 bg-gray-100 border border-gray-200 dark:border-gray-700"}),r.macroImage&&f.jsx("img",{src:r.macroImage,alt:"Macro",className:"rounded-xl object-cover w-20 h-20 bg-gray-100 border border-gray-200 dark:border-gray-700"})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/10 rounded-xl border border-red-100 dark:border-red-900/30",children:[f.jsx("span",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase tracking-wider block mb-1",children:"Detected Issue"}),f.jsx("p",{className:"text-2xl font-bold text-red-700 dark:text-red-400",children:r.result.disease_name})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider block mb-1",children:"Confidence"}),f.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:f.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:`${Math.min((r.result.confidence>1?r.result.confidence:r.result.confidence*100)||80,100)}%`}})}),f.jsxs("span",{className:"text-xs text-gray-500 mt-1 block text-right",children:[Math.round((r.result.confidence>1?r.result.confidence:r.result.confidence*100)||80),"% Match"]})]})]})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-green-50 dark:bg-green-900/10 p-5 rounded-xl border border-green-100 dark:border-green-900/30",children:[f.jsx("h3",{className:"font-bold text-green-800 dark:text-green-400 mb-2 text-lg",children:"Analysis"}),f.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:r.result.description})]}),r.result.treatment_steps&&f.jsxs("div",{className:"border border-gray-100 dark:border-gray-700 p-5 rounded-xl bg-gray-50 dark:bg-gray-800/50",children:[f.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 text-lg",children:"Treatment Plan"}),f.jsx("ul",{className:"space-y-3",children:r.result.treatment_steps.map((u,d)=>f.jsxs("li",{className:"flex gap-3 text-gray-700 dark:text-gray-300",children:[f.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full flex items-center justify-center font-bold text-xs mt-0.5",children:d+1}),f.jsx("span",{children:u})]},d))})]}),r.updates&&r.updates.length>0&&f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Progress Updates"}),f.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.updates.map((u,d)=>f.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-100 dark:border-gray-700",children:[u.imageUrl&&f.jsx("img",{src:u.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),f.jsx("p",{className:"text-xs text-gray-500 mb-1",children:u.createdAt?.seconds?new Date(u.createdAt.seconds*1e3).toLocaleDateString():""}),f.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:u.note})]},d))})]})]})]})}):null}function mN(){const{t:n}=nt(),{currentUser:t}=ta(),r=Bt(),[i,l]=O.useState([]),[c,u]=O.useState(!0),[d,m]=O.useState(!1),[p,y]=O.useState(null),[v,b]=O.useState(null),[w,x]=O.useState(null),[S,A]=O.useState("All"),[T,U]=O.useState(!1),[M,$]=O.useState(""),K=20,D=[{value:"All",labelKey:"community"},...wo].filter(E=>(E.value==="All"?n("community")+" (All)":n(E.labelKey)).toLowerCase().includes(M.toLowerCase()));return O.useEffect(()=>{r.state?.refreshId&&(A("All"),$(""),window.scrollTo(0,0))},[r.state]),O.useEffect(()=>{u(!0),(async()=>{let z=ce.from("posts").select("*");S!=="All"&&(z=z.eq("plant_type",S)),z=z.order("created_at",{ascending:!1}).limit(K);const{data:B,error:I}=await z;if(I)console.error(I);else{const F=B.map(q=>({id:q.id,userId:q.user_id,authorName:q.author_name,userAvatar:q.user_avatar,title:q.title,content:q.content,image:q.image_url,plantType:q.plant_type,relatedAnalysisId:q.related_analysis_id,likes:q.likes||[],comments:q.comments||[],createdAt:{seconds:new Date(q.created_at).getTime()/1e3}}));l(F)}u(!1)})();const j=ce.channel("community_posts").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},z=>{const B=z.new;(S==="All"||B.plant_type===S)&&l(I=>[{id:B.id,userId:B.user_id,authorName:B.author_name,userAvatar:B.user_avatar,title:B.title,content:B.content,image:B.image_url,plantType:B.plant_type,relatedAnalysisId:B.related_analysis_id,likes:B.likes||[],comments:B.comments||[],createdAt:{seconds:new Date(B.created_at).getTime()/1e3}},...I])}).subscribe();return()=>{ce.removeChannel(j)}},[S,r.state?.refreshId]),O.useEffect(()=>{async function E(){const j=await hN();j&&x(j)}E()},[]),f.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 pb-20 p-4",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 sticky top-0 z-20 gap-4",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white shrink-0",children:n("community")}),f.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[f.jsxs("div",{className:"relative w-full sm:w-64",children:[f.jsxs("div",{className:"relative",children:[f.jsx(Ay,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),f.jsx("input",{type:"text",className:"w-full pl-9 pr-8 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:n("select_plant"),value:M,onFocus:()=>U(!0),onChange:E=>{$(E.target.value),U(!0)}}),S!=="All"?f.jsx("button",{onClick:()=>{A("All"),$("")},className:"absolute right-2 top-2 p-0.5 hover:bg-gray-200 rounded-full",children:f.jsx(Ta,{className:"w-4 h-4 text-gray-500"})}):f.jsx(nh,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),T&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>U(!1)}),f.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-y-auto custom-scrollbar",children:[D.map(E=>f.jsxs("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200 flex justify-between items-center",onClick:()=>{A(E.value),$(E.value==="All"?"":n(E.labelKey)),U(!1)},children:[f.jsx("span",{children:E.value==="All"?n("community"):n(E.labelKey)}),S===E.value&&f.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]},E.value)),D.length===0&&f.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:n("no_results")||"No results"})]})]})]}),f.jsxs("button",{onClick:()=>{if(!t){alert(n("login_to_post")||"Please login to post.");return}m(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow-md transition-all active:scale-95 shrink-0 whitespace-nowrap",children:[f.jsx(dE,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden sm:inline",children:n("ask_question")}),f.jsx("span",{className:"sm:hidden",children:n("ask_question")})]})]})]}),c?f.jsx(qo,{}):f.jsxs("div",{className:"space-y-6",children:[w&&f.jsx(dN,{fact:w}),i.length>0?i.map(E=>f.jsx(hh,{post:E,onViewAnalysis:j=>b(j),onUserClick:j=>{y({id:j,name:E.authorName||"Gardener",avatar:E.userAvatar})}},E.id)):f.jsxs("div",{className:"text-center py-20 text-gray-500 bg-white dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700",children:[f.jsx("p",{className:"text-lg mb-2",children:n("no_posts_yet")}),f.jsx("p",{className:"text-sm",children:n("be_the_first")})]})]}),d&&f.jsx(cN,{onClose:()=>m(!1),onPostCreated:()=>{}}),v&&f.jsx(fN,{analysisId:v,onClose:()=>b(null)}),p&&f.jsx(uN,{user:p,onClose:()=>y(null)})]})}function gN(){const{postId:n}=Hi(),t=ea(),{t:r}=nt(),{currentUser:i}=ta(),[l,c]=O.useState(null),[u,d]=O.useState(!0),[m,p]=O.useState(null),[y,v]=O.useState(null);O.useEffect(()=>{if(!n)return;d(!0),(async()=>{const{data:S,error:A}=await ce.from("posts").select("*").eq("id",n).single();if(A)console.error("Error fetching post:",A),p(r("error_fetching_post")||"Error loading post"),c(null);else if(S){const T={id:S.id,userId:S.user_id,authorName:S.author_name,userAvatar:S.user_avatar,content:S.content,image:S.image_url,plantType:S.plant_type,relatedAnalysisId:S.related_analysis_id,likes:S.likes||[],comments:S.comments||[],createdAt:{seconds:new Date(S.created_at).getTime()/1e3},title:S.title};if(c(T),p(null),S.user_id){const{data:U}=await ce.from("profiles").select("*").eq("id",S.user_id).single();U&&v({...U,name:U.full_name,avatar:U.avatar_url,photoURL:U.avatar_url})}}else p(r("post_not_found")||"Post not found"),c(null);d(!1)})();const x=ce.channel(`public:posts:id=eq.${n}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"posts",filter:`id=eq.${n}`},S=>{const A=S.new,T={id:A.id,userId:A.user_id,authorName:A.author_name,userAvatar:A.user_avatar,content:A.content,image:A.image_url,plantType:A.plant_type,relatedAnalysisId:A.related_analysis_id,likes:A.likes||[],comments:A.comments||[],createdAt:{seconds:new Date(A.created_at).getTime()/1e3},title:A.title};c(T)}).subscribe();return()=>{ce.removeChannel(x)}},[n,r]);const b=()=>{t("/community")};return u?f.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:f.jsx(Aa,{className:"w-8 h-8 animate-spin text-green-600"})}):m?f.jsxs("div",{className:"max-w-2xl mx-auto p-4 text-center",children:[f.jsx("div",{className:"bg-red-50 dark:bg-red-900/10 text-red-600 dark:text-red-400 p-4 rounded-lg mb-4",children:m}),f.jsxs("button",{onClick:b,className:"flex items-center gap-2 text-green-600 hover:text-green-700 font-medium mx-auto",children:[f.jsx(zd,{className:"w-4 h-4"}),r("back_to_community")||"Back to Community"]})]}):f.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 pb-20 flex flex-col gap-4",children:[f.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[f.jsx("button",{onClick:b,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:f.jsx(zd,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),f.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r("back_to_community")||"Toplulua Dn"})]}),l&&f.jsx("div",{className:"w-full",children:f.jsx(hh,{post:l,isDetailView:!0,onUserClick:w=>t(`/profile/${w}`),authorOverride:y})})]})}function pN({chat:n,currentUser:t}){const[r,i]=O.useState(null),{t:l}=nt(),{addToast:c}=Qa(),u=n.participants.find(b=>b!==t.uid);O.useEffect(()=>{(async()=>{if(u)try{const{data:w}=await ce.from("profiles").select("*").eq("id",u).single();w&&i({...w,name:w.full_name,photoURL:w.avatar_url})}catch(w){console.error("Error fetching user",w)}})()},[u]);const d=r||{name:"Unknown User",photoURL:null},m=async b=>{if(b.preventDefault(),!!window.confirm(l("confirm_delete_chat")||"Delete this chat permanently?"))try{const{error:w}=await ce.from("chats").delete().eq("id",n.id);if(w)throw w;c("Chat deleted","success")}catch(w){console.error("Delete Chat Error",w),c("Failed to delete chat","error")}},{i18n:p}=nt(),y=p.language==="tr"?Ho:Gi,v=b=>b?b===" Photo"||b.includes(" Photo")?` ${l("photo")||"Photo"}`:b===" Voice Message"||b.includes(" Voice Message")?` ${l("voice_message")||"Voice Message"}`:b:l("new_conversation")||"Yeni Sohbet";return f.jsxs("div",{className:"relative group",children:[f.jsxs(Na,{to:`/messages/${n.id}`,className:"flex items-center gap-4 p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors pr-12",children:[f.jsx("img",{src:d.photoURL||d.avatar||`https://ui-avatars.com/api/?name=${d.name||"User"}`,alt:d.name,className:"w-12 h-12 rounded-full object-cover border border-gray-100 bg-white"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[f.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:d.name||d.displayName||"Loading..."}),n.updated_at&&f.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:Bo(new Date(n.updated_at),{addSuffix:!0,locale:y})})]}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:v(n.last_message)})]})]}),f.jsx("button",{onClick:m,className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full opacity-0 group-hover:opacity-100 transition-all z-10",title:"Delete Chat",children:f.jsx(Ui,{className:"w-5 h-5"})})]})}function yN(){const{currentUser:n}=ta(),{t}=nt(),[r,i]=O.useState([]),[l,c]=O.useState(!0);return O.useEffect(()=>{if(!n)return;const u=async()=>{const{data:m}=await ce.from("chats").select("*").contains("participants",[n.uid]).order("updated_at",{ascending:!1});m&&i(m),c(!1)};u();const d=ce.channel("chats_list").on("postgres_changes",{event:"*",schema:"public",table:"chats"},()=>{u()}).subscribe();return()=>{ce.removeChannel(d)}},[n]),l?f.jsx(qo,{}):f.jsxs("div",{className:"max-w-2xl mx-auto w-full",children:[f.jsx("h1",{className:"text-2xl font-bold mb-6 px-4",children:t("messages")}),f.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 divide-y divide-gray-100 dark:divide-gray-700",children:r.length===0?f.jsx("div",{className:"p-8 text-center text-gray-500",children:t("no_messages")||"No messages yet. Start a conversation!"}):r.map(u=>f.jsx(pN,{chat:u,currentUser:n},u.id))})]})}const vN="modulepreload",bN=function(n){return"/"+n},Cp={},wN=function(t,r,i){let l=Promise.resolve();if(r&&r.length>0){let p=function(y){return Promise.all(y.map(v=>Promise.resolve(v).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};var u=p;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=d?.nonce||d?.getAttribute("nonce");l=p(r.map(y=>{if(y=bN(y),y in Cp)return;Cp[y]=!0;const v=y.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${b}`))return;const w=document.createElement("link");if(w.rel=v?"stylesheet":vN,v||(w.as="script"),w.crossOrigin="",w.href=y,m&&w.setAttribute("nonce",m),document.head.appendChild(w),v)return new Promise((x,S)=>{w.addEventListener("load",x),w.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${y}`)))})}))}function c(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return l.then(d=>{for(const m of d||[])m.status==="rejected"&&c(m.reason);return t().catch(c)})};function Pt(n,t,r,i){return new(r||(r=Promise))((function(l,c){function u(p){try{m(i.next(p))}catch(y){c(y)}}function d(p){try{m(i.throw(p))}catch(y){c(y)}}function m(p){var y;p.done?l(p.value):(y=p.value,y instanceof r?y:new r((function(v){v(y)}))).then(u,d)}m((i=i.apply(n,t||[])).next())}))}class Ki{constructor(){this.listeners={}}on(t,r,i){if(this.listeners[t]||(this.listeners[t]=new Set),i?.once){const l=(...c)=>{this.un(t,l),r(...c)};return this.listeners[t].add(l),()=>this.un(t,l)}return this.listeners[t].add(r),()=>this.un(t,r)}un(t,r){var i;(i=this.listeners[t])===null||i===void 0||i.delete(r)}once(t,r){return this.on(t,r,{once:!0})}unAll(){this.listeners={}}emit(t,...r){this.listeners[t]&&this.listeners[t].forEach((i=>i(...r)))}}const fo={decode:function(n,t){return Pt(this,void 0,void 0,(function*(){const r=new AudioContext({sampleRate:t});try{return yield r.decodeAudioData(n)}finally{r.close()}}))},createBuffer:function(n,t){if(!n||n.length===0)throw new Error("channelData must be a non-empty array");if(t<=0)throw new Error("duration must be greater than 0");if(typeof n[0]=="number"&&(n=[n]),!n[0]||n[0].length===0)throw new Error("channelData must contain non-empty channel arrays");(function(i){const l=i[0];if(l.some((c=>c>1||c<-1))){const c=l.length;let u=0;for(let d=0;d<c;d++){const m=Math.abs(l[d]);m>u&&(u=m)}for(const d of i)for(let m=0;m<c;m++)d[m]/=u}})(n);const r=n.map((i=>i instanceof Float32Array?i:Float32Array.from(i)));return{duration:t,length:r[0].length,sampleRate:r[0].length/t,numberOfChannels:r.length,getChannelData:i=>{const l=r[i];if(!l)throw new Error(`Channel ${i} not found`);return l},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function dv(n,t){const r=t.xmlns?document.createElementNS(t.xmlns,n):document.createElement(n);for(const[i,l]of Object.entries(t))if(i==="children"&&l)for(const[c,u]of Object.entries(l))u instanceof Node?r.appendChild(u):typeof u=="string"?r.appendChild(document.createTextNode(u)):r.appendChild(dv(c,u));else i==="style"?Object.assign(r.style,l):i==="textContent"?r.textContent=l:r.setAttribute(i,l.toString());return r}function Rp(n,t,r){const i=dv(n,t||{});return r?.appendChild(i),i}var xN=Object.freeze({__proto__:null,createElement:Rp,default:Rp});const _N={fetchBlob:function(n,t,r){return Pt(this,void 0,void 0,(function*(){const i=yield fetch(n,r);if(i.status>=400)throw new Error(`Failed to fetch ${n}: ${i.status} (${i.statusText})`);return(function(l,c){Pt(this,void 0,void 0,(function*(){if(!l.body||!l.headers)return;const u=l.body.getReader(),d=Number(l.headers.get("Content-Length"))||0;let m=0;const p=y=>{m+=y?.length||0;const v=Math.round(m/d*100);c(v)};try{for(;;){const y=yield u.read();if(y.done)break;p(y.value)}}catch(y){console.warn("Progress tracking error:",y)}}))})(i.clone(),t),i.blob()}))}};function gt(n){let t=n;const r=new Set;return{get value(){return t},set(i){Object.is(t,i)||(t=i,r.forEach((l=>l(t))))},update(i){this.set(i(t))},subscribe:i=>(r.add(i),()=>r.delete(i))}}function br(n,t){const r=gt(n());return t.forEach((i=>i.subscribe((()=>{const l=n();Object.is(r.value,l)||r.set(l)})))),{get value(){return r.value},subscribe:i=>r.subscribe(i)}}function Yn(n,t){let r;const i=()=>{r&&(r(),r=void 0),r=n()},l=t.map((c=>c.subscribe(i)));return i(),()=>{r&&(r(),r=void 0),l.forEach((c=>c()))}}class SN extends Ki{get isPlayingSignal(){return this._isPlaying}get currentTimeSignal(){return this._currentTime}get durationSignal(){return this._duration}get volumeSignal(){return this._volume}get mutedSignal(){return this._muted}get playbackRateSignal(){return this._playbackRate}get seekingSignal(){return this._seeking}constructor(t){super(),this.isExternalMedia=!1,this.reactiveMediaEventCleanups=[],t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),this._isPlaying=gt(!1),this._currentTime=gt(0),this._duration=gt(0),this._volume=gt(this.media.volume),this._muted=gt(this.media.muted),this._playbackRate=gt(this.media.playbackRate||1),this._seeking=gt(!1),this.setupReactiveMediaEvents(),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)}),{once:!0})}setupReactiveMediaEvents(){this.reactiveMediaEventCleanups.push(this.onMediaEvent("play",(()=>{this._isPlaying.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("pause",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ended",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("timeupdate",(()=>{this._currentTime.set(this.media.currentTime)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("durationchange",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("loadedmetadata",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeking",(()=>{this._seeking.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeked",(()=>{this._seeking.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("volumechange",(()=>{this._volume.set(this.media.volume),this._muted.set(this.media.muted)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ratechange",(()=>{this._playbackRate.set(this.media.playbackRate)})))}onMediaEvent(t,r,i){return this.media.addEventListener(t,r,i),()=>this.media.removeEventListener(t,r,i)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,r){const i=this.getSrc();if(t&&i===t)return;this.revokeSrc();const l=r instanceof Blob&&(this.canPlayType(r.type)||!t)?URL.createObjectURL(r):t;if(i&&this.media.removeAttribute("src"),l||t)try{this.media.src=l}catch{this.media.src=t}}destroy(){this.reactiveMediaEventCleanups.forEach((t=>t())),this.reactiveMediaEventCleanups=[],this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(t){this.reactiveMediaEventCleanups.forEach((r=>r())),this.reactiveMediaEventCleanups=[],this.media=t,this.setupReactiveMediaEvents()}play(){return Pt(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(t){if(t instanceof DOMException&&t.name==="AbortError")return;throw t}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=Math.max(0,Math.min(t,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,r){r!=null&&(this.media.preservesPitch=r),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}function EN({maxTop:n,maxBottom:t,halfHeight:r,vScale:i,barMinHeight:l=0,barAlign:c}){let u=Math.round(n*r*i),d=u+Math.round(t*r*i)||1;return d<l&&(d=l,c||(u=d/2)),{topHeight:u,totalHeight:d}}function kN({barAlign:n,halfHeight:t,topHeight:r,totalHeight:i,canvasHeight:l}){return n==="top"?0:n==="bottom"?l-i:t-r}function Op(n,t,r){const i=t-n.left,l=r-n.top;return[i/n.width,l/n.height]}function hv(n){return!!(n.barWidth||n.barGap||n.barAlign)}function Mp(n,t){if(!hv(t))return n;const r=t.barWidth||.5,i=r+(t.barGap||r/2);return i===0?n:Math.floor(n/i)*i}function Up({scrollLeft:n,totalWidth:t,numCanvases:r}){if(t===0)return[0];const i=n/t,l=Math.floor(i*r);return[l-1,l,l+1]}function fv(n){const t=n._cleanup;typeof t=="function"&&t()}function jN(n){const t=gt({scrollLeft:n.scrollLeft,scrollWidth:n.scrollWidth,clientWidth:n.clientWidth}),r=br((()=>(function(c){const{scrollLeft:u,scrollWidth:d,clientWidth:m}=c;if(d===0)return{startX:0,endX:1};const p=u/d,y=(u+m)/d;return{startX:Math.max(0,Math.min(1,p)),endX:Math.max(0,Math.min(1,y))}})(t.value)),[t]),i=br((()=>(function(c){return{left:c.scrollLeft,right:c.scrollLeft+c.clientWidth}})(t.value)),[t]),l=()=>{t.set({scrollLeft:n.scrollLeft,scrollWidth:n.scrollWidth,clientWidth:n.clientWidth})};return n.addEventListener("scroll",l,{passive:!0}),{scrollData:t,percentages:r,bounds:i,cleanup:()=>{n.removeEventListener("scroll",l),fv(t)}}}class NN extends Ki{constructor(t,r){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragStream=null,this.scrollStream=null,this.subscriptions=[],this.options=t;const i=this.parentFromOptionsContainer(t.container);this.parent=i;const[l,c]=this.initHtml();i.appendChild(l),this.container=l,this.scrollContainer=c.querySelector(".scroll"),this.wrapper=c.querySelector(".wrapper"),this.canvasWrapper=c.querySelector(".canvases"),this.progressWrapper=c.querySelector(".progress"),this.cursor=c.querySelector(".cursor"),r&&c.appendChild(r),this.initEvents()}parentFromOptionsContainer(t){let r;if(typeof t=="string"?r=document.querySelector(t):t instanceof HTMLElement&&(r=t),!r)throw new Error("Container not found");return r}initEvents(){this.wrapper.addEventListener("click",(r=>{const i=this.wrapper.getBoundingClientRect(),[l,c]=Op(i,r.clientX,r.clientY);this.emit("click",l,c)})),this.wrapper.addEventListener("dblclick",(r=>{const i=this.wrapper.getBoundingClientRect(),[l,c]=Op(i,r.clientX,r.clientY);this.emit("dblclick",l,c)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollStream=jN(this.scrollContainer);const t=Yn((()=>{const{startX:r,endX:i}=this.scrollStream.percentages.value,{left:l,right:c}=this.scrollStream.bounds.value;this.emit("scroll",r,i,l,c)}),[this.scrollStream.percentages,this.scrollStream.bounds]);if(this.subscriptions.push(t),typeof ResizeObserver=="function"){const r=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{r().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender(),this.emit("resize"))}initDrag(){if(this.dragStream)return;this.dragStream=(function(r,i={}){const{threshold:l=3,mouseButton:c=0,touchDelay:u=100}=i,d=gt(null),m=new Map,p=matchMedia("(pointer: coarse)").matches;let y=()=>{};const v=b=>{if(b.button!==c||(m.set(b.pointerId,b),m.size>1))return;let w=b.clientX,x=b.clientY,S=!1;const A=Date.now(),T=r.getBoundingClientRect(),{left:U,top:M}=T,$=j=>{if(j.defaultPrevented||m.size>1||p&&Date.now()-A<u)return;const z=j.clientX,B=j.clientY,I=z-w,F=B-x;(S||Math.abs(I)>l||Math.abs(F)>l)&&(j.preventDefault(),j.stopPropagation(),S||(d.set({type:"start",x:w-U,y:x-M}),S=!0),d.set({type:"move",x:z-U,y:B-M,deltaX:I,deltaY:F}),w=z,x=B)},K=j=>{if(m.delete(j.pointerId),S){const z=j.clientX,B=j.clientY;d.set({type:"end",x:z-U,y:B-M})}y()},R=j=>{m.delete(j.pointerId),j.relatedTarget&&j.relatedTarget!==document.documentElement||K(j)},D=j=>{S&&(j.stopPropagation(),j.preventDefault())},E=j=>{j.defaultPrevented||m.size>1||S&&j.preventDefault()};document.addEventListener("pointermove",$),document.addEventListener("pointerup",K),document.addEventListener("pointerout",R),document.addEventListener("pointercancel",R),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("click",D,{capture:!0}),y=()=>{document.removeEventListener("pointermove",$),document.removeEventListener("pointerup",K),document.removeEventListener("pointerout",R),document.removeEventListener("pointercancel",R),document.removeEventListener("touchmove",E),setTimeout((()=>{document.removeEventListener("click",D,{capture:!0})}),10)}};return r.addEventListener("pointerdown",v),{signal:d,cleanup:()=>{y(),r.removeEventListener("pointerdown",v),m.clear(),fv(d)}}})(this.wrapper);const t=Yn((()=>{const r=this.dragStream.signal.value;if(!r)return;const i=this.wrapper.getBoundingClientRect().width,l=(c=r.x/i)<0?0:c>1?1:c;var c;r.type==="start"?(this.isDragging=!0,this.emit("dragstart",l)):r.type==="move"?this.emit("drag",l):r.type==="end"&&(this.isDragging=!1,this.emit("dragend",l))}),[this.dragStream.signal]);this.subscriptions.push(t)}initHtml(){const t=document.createElement("div"),r=t.attachShadow({mode:"open"}),i=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return r.innerHTML=`
      <style${i?` nonce="${i}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
          pointer-events: none;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,r]}setOptions(t){if(this.options.container!==t.container){const r=this.parentFromOptionsContainer(t.container);r.appendChild(this.container),this.parent=r}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:r}=this.scrollContainer,i=r*t;this.setScroll(i)}destroy(){var t;this.subscriptions.forEach((r=>r())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(t=this.unsubscribeOnScroll)===null||t===void 0||t.forEach((r=>r())),this.unsubscribeOnScroll=[],this.dragStream&&(this.dragStream.cleanup(),this.dragStream=null),this.scrollStream&&(this.scrollStream.cleanup(),this.scrollStream=null)}createDelay(t=10){let r,i;const l=()=>{r&&(clearTimeout(r),r=void 0),i&&(i(),i=void 0)};return this.timeouts.push(l),()=>new Promise(((c,u)=>{l(),i=u,r=setTimeout((()=>{r=void 0,i=void 0,c()}),t)}))}getHeight(t,r){var i;const l=((i=this.audioData)===null||i===void 0?void 0:i.numberOfChannels)||1;return(function({optionsHeight:c,optionsSplitChannels:u,parentHeight:d,numberOfChannels:m,defaultHeight:p=128}){if(c==null)return p;const y=Number(c);if(!isNaN(y))return y;if(c==="auto"){const v=d||p;return u?.every((b=>!b.overlay))?v/m:v}return p})({optionsHeight:t,optionsSplitChannels:r,parentHeight:this.parent.clientHeight,numberOfChannels:l,defaultHeight:128})}convertColorValues(t,r){return(function(i,l,c){if(!Array.isArray(i))return i||"";if(i.length===0)return"#999";if(i.length<2)return i[0]||"";const u=document.createElement("canvas"),d=u.getContext("2d"),m=c??u.height*l,p=d.createLinearGradient(0,0,0,m||l),y=1/(i.length-1);return i.forEach(((v,b)=>{p.addColorStop(b*y,v)})),p})(t,this.getPixelRatio(),r?.canvas.height)}getPixelRatio(){return t=window.devicePixelRatio,Math.max(1,t||1);var t}renderBarWaveform(t,r,i,l){const{width:c,height:u}=i.canvas,{halfHeight:d,barWidth:m,barRadius:p,barIndexScale:y,barSpacing:v,barMinHeight:b}=(function({width:x,height:S,length:A,options:T,pixelRatio:U}){const M=S/2,$=T.barWidth?T.barWidth*U:1,K=T.barGap?T.barGap*U:T.barWidth?$/2:0,R=$+K||1;return{halfHeight:M,barWidth:$,barGap:K,barRadius:T.barRadius||0,barMinHeight:T.barMinHeight?T.barMinHeight*U:0,barIndexScale:A>0?x/R/A:0,barSpacing:R}})({width:c,height:u,length:(t[0]||[]).length,options:r,pixelRatio:this.getPixelRatio()}),w=(function({channelData:x,barIndexScale:S,barSpacing:A,barWidth:T,halfHeight:U,vScale:M,canvasHeight:$,barAlign:K,barMinHeight:R}){const D=x[0]||[],E=x[1]||D,j=D.length,z=[];let B=0,I=0,F=0;for(let q=0;q<=j;q++){const X=Math.round(q*S);if(X>B){const{topHeight:Q,totalHeight:G}=EN({maxTop:I,maxBottom:F,halfHeight:U,vScale:M,barMinHeight:R,barAlign:K}),Y=kN({barAlign:K,halfHeight:U,topHeight:Q,totalHeight:G,canvasHeight:$});z.push({x:B*A,y:Y,width:T,height:G}),B=X,I=0,F=0}const N=Math.abs(D[q]||0),k=Math.abs(E[q]||0);N>I&&(I=N),k>F&&(F=k)}return z})({channelData:t,barIndexScale:y,barSpacing:v,barWidth:m,halfHeight:d,vScale:l,canvasHeight:u,barAlign:r.barAlign,barMinHeight:b});i.beginPath();for(const x of w)p&&"roundRect"in i?i.roundRect(x.x,x.y,x.width,x.height,p):i.rect(x.x,x.y,x.width,x.height);i.fill(),i.closePath()}renderLineWaveform(t,r,i,l){const{width:c,height:u}=i.canvas,d=(function({channelData:m,width:p,height:y,vScale:v}){const b=y/2,w=m[0]||[];return[w,m[1]||w].map(((x,S)=>{const A=x.length,T=A?p/A:0,U=b,M=S===0?-1:1,$=[{x:0,y:U}];let K=0,R=0;for(let D=0;D<=A;D++){const E=Math.round(D*T);if(E>K){const z=U+(Math.round(R*b*v)||1)*M;$.push({x:K,y:z}),K=E,R=0}const j=Math.abs(x[D]||0);j>R&&(R=j)}return $.push({x:K,y:U}),$}))})({channelData:t,width:c,height:u,vScale:l});i.beginPath();for(const m of d)if(m.length){i.moveTo(m[0].x,m[0].y);for(let p=1;p<m.length;p++){const y=m[p];i.lineTo(y.x,y.y)}}i.fill(),i.closePath()}renderWaveform(t,r,i){if(i.fillStyle=this.convertColorValues(r.waveColor,i),r.renderFunction)return void r.renderFunction(t,i);const l=(function({channelData:c,barHeight:u,normalize:d,maxPeak:m}){var p;const y=u||1;if(!d)return y;const v=c[0];if(!v||v.length===0)return y;let b=m??0;if(!m)for(let w=0;w<v.length;w++){const x=(p=v[w])!==null&&p!==void 0?p:0,S=Math.abs(x);S>b&&(b=S)}return b?y/b:y})({channelData:t,barHeight:r.barHeight,normalize:r.normalize,maxPeak:r.maxPeak});hv(r)?this.renderBarWaveform(t,r,i,l):this.renderLineWaveform(t,r,i,l)}renderSingleCanvas(t,r,i,l,c,u,d){const m=this.getPixelRatio(),p=document.createElement("canvas");p.width=Math.round(i*m),p.height=Math.round(l*m),p.style.width=`${i}px`,p.style.height=`${l}px`,p.style.left=`${Math.round(c)}px`,u.appendChild(p);const y=p.getContext("2d");if(r.renderFunction?(y.fillStyle=this.convertColorValues(r.waveColor,y),r.renderFunction(t,y)):this.renderWaveform(t,r,y),p.width>0&&p.height>0){const v=p.cloneNode(),b=v.getContext("2d");b.drawImage(p,0,0),b.globalCompositeOperation="source-in",b.fillStyle=this.convertColorValues(r.progressColor,b),b.fillRect(0,0,p.width,p.height),d.appendChild(v)}}renderMultiCanvas(t,r,i,l,c,u){const d=this.getPixelRatio(),{clientWidth:m}=this.scrollContainer,p=i/d,y=(function({clientWidth:x,totalWidth:S,options:A}){return Mp(Math.min(8e3,x,S),A)})({clientWidth:m,totalWidth:p,options:r});let v={};if(y===0)return;const b=x=>{if(x<0||x>=w||v[x])return;v[x]=!0;const S=x*y;let A=Math.min(p-S,y);if(A=Mp(A,r),A<=0)return;const T=(function({channelData:U,offset:M,clampedWidth:$,totalWidth:K}){return U.map((R=>{const D=Math.floor(M/K*R.length),E=Math.floor((M+$)/K*R.length);return R.slice(D,E)}))})({channelData:t,offset:S,clampedWidth:A,totalWidth:p});this.renderSingleCanvas(T,r,A,l,S,c,u)},w=Math.ceil(p/y);if(!this.isScrollable){for(let x=0;x<w;x++)b(x);return}if(Up({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:p,numCanvases:w}).forEach((x=>b(x))),w>1){const x=this.on("scroll",(()=>{const{scrollLeft:S}=this.scrollContainer;Object.keys(v).length>10&&(c.innerHTML="",u.innerHTML="",v={}),Up({scrollLeft:S,totalWidth:p,numCanvases:w}).forEach((A=>b(A)))}));this.unsubscribeOnScroll.push(x)}}renderChannel(t,r,i,l){var{overlay:c}=r,u=(function(y,v){var b={};for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&v.indexOf(w)<0&&(b[w]=y[w]);if(y!=null&&typeof Object.getOwnPropertySymbols=="function"){var x=0;for(w=Object.getOwnPropertySymbols(y);x<w.length;x++)v.indexOf(w[x])<0&&Object.prototype.propertyIsEnumerable.call(y,w[x])&&(b[w[x]]=y[w[x]])}return b})(r,["overlay"]);const d=document.createElement("div"),m=this.getHeight(u.height,u.splitChannels);d.style.height=`${m}px`,c&&l>0&&(d.style.marginTop=`-${m}px`),this.canvasWrapper.style.minHeight=`${m}px`,this.canvasWrapper.appendChild(d);const p=d.cloneNode();this.progressWrapper.appendChild(p),this.renderMultiCanvas(t,u,i,m,d,p)}render(t){return Pt(this,void 0,void 0,(function*(){var r;this.timeouts.forEach((p=>p())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const i=this.getPixelRatio(),l=this.scrollContainer.clientWidth,{scrollWidth:c,isScrollable:u,useParentWidth:d,width:m}=(function({duration:p,minPxPerSec:y=0,parentWidth:v,fillParent:b,pixelRatio:w}){const x=Math.ceil(p*y),S=x>v,A=!!(b&&!S);return{scrollWidth:x,isScrollable:S,useParentWidth:A,width:(A?v:x)*w}})({duration:t.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:l,fillParent:this.options.fillParent,pixelRatio:i});if(this.isScrollable=u,this.wrapper.style.width=d?"100%":`${c}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let p=0;p<t.numberOfChannels;p++){const y=Object.assign(Object.assign({},this.options),(r=this.options.splitChannels)===null||r===void 0?void 0:r[p]);this.renderChannel([t.getChannelData(p)],y,m,p)}else{const p=[t.getChannelData(0)];t.numberOfChannels>1&&p.push(t.getChannelData(1)),this.renderChannel(p,this.options,m,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((i=>i())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:r}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:i}=this.progressWrapper.getBoundingClientRect(),l=(function(c){const u=2*c;return(u<0?Math.floor(u):Math.ceil(u))/2})(i-r);this.scrollContainer.scrollLeft+=l}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,r=!1){const{scrollLeft:i,scrollWidth:l,clientWidth:c}=this.scrollContainer,u=t*l,d=i,m=i+c,p=c/2;if(this.isDragging)u+30>m?this.scrollContainer.scrollLeft+=30:u-30<d&&(this.scrollContainer.scrollLeft-=30);else{(u<d||u>m)&&(this.scrollContainer.scrollLeft=u-(this.options.autoCenter?p:0));const y=u-i-p;r&&this.options.autoCenter&&y>0&&(this.scrollContainer.scrollLeft+=y)}}renderProgress(t,r){if(isNaN(t))return;const i=100*t;this.canvasWrapper.style.clipPath=`polygon(${i}% 0%, 100% 0%, 100% 100%, ${i}% 100%)`,this.progressWrapper.style.width=`${i}%`,this.cursor.style.left=`${i}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${t*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.audioData&&this.audioData.duration>0&&this.scrollIntoView(t,r)}exportImage(t,r,i){return Pt(this,void 0,void 0,(function*(){const l=this.canvasWrapper.querySelectorAll("canvas");if(!l.length)throw new Error("No waveform data");if(i==="dataURL"){const c=Array.from(l).map((u=>u.toDataURL(t,r)));return Promise.resolve(c)}return Promise.all(Array.from(l).map((c=>new Promise(((u,d)=>{c.toBlob((m=>{m?u(m):d(new Error("Could not export image"))}),t,r)})))))}))}}class AN extends Ki{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const t=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(t))};t()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class wd extends Ki{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Pt(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then((r=>{if(r.status>=400)throw new Error(`Failed to fetch ${t}: ${r.status} (${r.statusText})`);return r.arrayBuffer()})).then((r=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(r))).then((r=>{this.currentSrc===t&&(this.buffer=r,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})).catch((r=>{console.error("WebAudioPlayer load error:",r)}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let t=this.playedDuration*this._playbackRate;(t>=this.duration||t<0)&&(t=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,t),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Pt(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){const r=t-this.currentTime,i=this.bufferNode;i?.stop(this.audioContext.currentTime+r),i?.addEventListener("ended",(()=>{i===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(t){return Pt(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(t)}))}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const r=!this.paused;r&&this._pause(),this.playedDuration=t/this._playbackRate,r&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,r;return(t=this._duration)!==null&&t!==void 0?t:((r=this.buffer)===null||r===void 0?void 0:r.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const r=this.buffer.numberOfChannels;for(let i=0;i<r;i++)t.push(this.buffer.getChannelData(i));return t}removeAttribute(t){switch(t){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const TN={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class $i extends SN{static create(t){return new $i(t)}getState(){return this.wavesurferState}getRenderer(){return this.renderer}constructor(t){const r=t.media||(t.backend==="WebAudio"?new wd:void 0);super({media:r,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.reactiveCleanups=[],this.options=Object.assign({},TN,t);const{state:i,actions:l}=(function(d){var m,p,y,v,b,w;const x=(m=d?.currentTime)!==null&&m!==void 0?m:gt(0),S=(p=d?.duration)!==null&&p!==void 0?p:gt(0),A=(y=d?.isPlaying)!==null&&y!==void 0?y:gt(!1),T=(v=d?.isSeeking)!==null&&v!==void 0?v:gt(!1),U=(b=d?.volume)!==null&&b!==void 0?b:gt(1),M=(w=d?.playbackRate)!==null&&w!==void 0?w:gt(1),$=gt(null),K=gt(null),R=gt(""),D=gt(0),E=gt(0),j=br((()=>!A.value),[A]),z=br((()=>$.value!==null),[$]),B=br((()=>z.value&&S.value>0),[z,S]),I=br((()=>x.value),[x]),F=br((()=>S.value>0?x.value/S.value:0),[x,S]);return{state:{currentTime:x,duration:S,isPlaying:A,isPaused:j,isSeeking:T,volume:U,playbackRate:M,audioBuffer:$,peaks:K,url:R,zoom:D,scrollPosition:E,canPlay:z,isReady:B,progress:I,progressPercent:F},actions:{setCurrentTime:q=>{const X=Math.max(0,Math.min(S.value||1/0,q));x.set(X)},setDuration:q=>{S.set(Math.max(0,q))},setPlaying:q=>{A.set(q)},setSeeking:q=>{T.set(q)},setVolume:q=>{const X=Math.max(0,Math.min(1,q));U.set(X)},setPlaybackRate:q=>{const X=Math.max(.1,Math.min(16,q));M.set(X)},setAudioBuffer:q=>{$.set(q),q&&S.set(q.duration)},setPeaks:q=>{K.set(q)},setUrl:q=>{R.set(q)},setZoom:q=>{D.set(Math.max(0,q))},setScrollPosition:q=>{E.set(Math.max(0,q))}}}})({isPlaying:this.isPlayingSignal,currentTime:this.currentTimeSignal,duration:this.durationSignal,volume:this.volumeSignal,playbackRate:this.playbackRateSignal,isSeeking:this.seekingSignal});this.wavesurferState=i,this.wavesurferActions=l,this.timer=new AN;const c=r?void 0:this.getMediaElement();this.renderer=new NN(this.options,c),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initReactiveState(),this.initPlugins();const u=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:d,duration:m}=this.options;(u||d&&m)&&this.load(u,d,m).catch((p=>{this.emit("error",p instanceof Error?p:new Error(String(p)))}))}))}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t),this.stopAtPosition!=null&&this.isPlaying()&&t>=this.stopAtPosition&&this.pause()}})))}initReactiveState(){this.reactiveCleanups.push((function(t,r){const i=[];i.push(Yn((()=>{const u=t.isPlaying.value;r.emit(u?"play":"pause")}),[t.isPlaying])),i.push(Yn((()=>{const u=t.currentTime.value;r.emit("timeupdate",u),t.isPlaying.value&&r.emit("audioprocess",u)}),[t.currentTime,t.isPlaying])),i.push(Yn((()=>{t.isSeeking.value&&r.emit("seeking",t.currentTime.value)}),[t.isSeeking,t.currentTime]));let l=!1;i.push(Yn((()=>{t.isReady.value&&!l&&(l=!0,r.emit("ready",t.duration.value))}),[t.isReady,t.duration]));let c=!1;return i.push(Yn((()=>{const u=t.isPlaying.value,d=t.currentTime.value,m=t.duration.value,p=m>0&&d>=m;c&&!u&&p&&r.emit("finish"),c=u&&p}),[t.isPlaying,t.currentTime,t.duration])),i.push(Yn((()=>{const u=t.zoom.value;u>0&&r.emit("zoom",u)}),[t.zoom])),()=>{i.forEach((u=>u()))}})(this.wavesurferState,{emit:this.emit.bind(this)}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const t=this.updateProgress();this.emit("timeupdate",t)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var t;this.emit("error",(t=this.getMediaElement().error)!==null&&t!==void 0?t:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((t,r)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,r))})),this.renderer.on("dblclick",((t,r)=>{this.emit("dblclick",t,r)})),this.renderer.on("scroll",((t,r,i,l)=>{const c=this.getDuration();this.emit("scroll",t*c,r*c,i,l)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(t=>{this.emit("dragstart",t)})),this.renderer.on("dragend",(t=>{this.emit("dragend",t)})),this.renderer.on("resize",(()=>{this.emit("resize")})));{let t;const r=this.renderer.on("drag",(i=>{var l;if(!this.options.interact)return;this.renderer.renderProgress(i),clearTimeout(t);let c=0;const u=this.options.dragToSeek;this.isPlaying()?c=0:u===!0?c=200:u&&typeof u=="object"&&(c=(l=u.debounceTime)!==null&&l!==void 0?l:200),t=setTimeout((()=>{this.seekTo(i)}),c),this.emit("interaction",i*this.getDuration()),this.emit("drag",i)}));this.subscriptions.push((()=>{clearTimeout(t),r()}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach((r=>{this.registerPlugin(r)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((t=>t())),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=fo.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=fo.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){if(this.plugins.includes(t))return t;t._init(this),this.plugins.push(t);const r=t.once("destroy",(()=>{this.plugins=this.plugins.filter((i=>i!==t)),this.subscriptions=this.subscriptions.filter((i=>i!==r))}));return this.subscriptions.push(r),t}unregisterPlugin(t){this.plugins=this.plugins.filter((r=>r!==t)),t.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const r=t/this.getDuration();this.renderer.setScrollPercentage(r)}getActivePlugins(){return this.plugins}loadAudio(t,r,i,l){return Pt(this,void 0,void 0,(function*(){var c;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(c=this.abortController)===null||c===void 0||c.abort(),this.abortController=null,!r&&!i){const d=this.options.fetchParams||{};window.AbortController&&!d.signal&&(this.abortController=new AbortController,d.signal=this.abortController.signal);const m=y=>this.emit("loading",y);r=yield _N.fetchBlob(t,m,d);const p=this.options.blobMimeType;p&&(r=new Blob([r],{type:p}))}this.setSrc(t,r);const u=yield new Promise((d=>{const m=l||this.getDuration();m?d(m):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>d(this.getDuration())),{once:!0}))}));if(!t&&!r){const d=this.getMediaElement();d instanceof wd&&(d.duration=u)}if(i)this.decodedData=fo.createBuffer(i,u||0);else if(r){const d=yield r.arrayBuffer();this.decodedData=yield fo.decode(d,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(t,r,i){return Pt(this,void 0,void 0,(function*(){try{return yield this.loadAudio(t,void 0,r,i)}catch(l){throw this.emit("error",l),l}}))}loadBlob(t,r,i){return Pt(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",t,r,i)}catch(l){throw this.emit("error",l),l}}))}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:r=8e3,precision:i=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const l=Math.min(t,this.decodedData.numberOfChannels),c=[];for(let u=0;u<l;u++){const d=this.decodedData.getChannelData(u),m=[],p=d.length/r;for(let y=0;y<r;y++){const v=d.slice(Math.floor(y*p),Math.ceil((y+1)*p));let b=0;for(let w=0;w<v.length;w++){const x=v[w];Math.abs(x)>Math.abs(b)&&(b=x)}m.push(Math.round(b*i)/i)}c.push(m)}return c}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){this.stopAtPosition=null,super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const r=this.getDuration()*t;this.setTime(r)}play(t,r){const i=Object.create(null,{play:{get:()=>super.play}});return Pt(this,void 0,void 0,(function*(){t!=null&&this.setTime(t);const l=yield i.play.call(this);return r!=null&&(this.media instanceof wd?this.media.stopAt(r):this.stopAtPosition=r),l}))}playPause(){return Pt(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return Pt(this,arguments,void 0,(function*(t="image/png",r=1,i="dataURL"){return this.renderer.exportImage(t,r,i)}))}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach((r=>r.destroy())),this.subscriptions.forEach((r=>r())),this.unsubscribePlayerEvents(),this.reactiveCleanups.forEach((r=>r())),this.reactiveCleanups=[],this.timer.destroy(),this.renderer.destroy(),super.destroy()}}$i.BasePlugin=class extends Ki{constructor(n){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=n}onInit(){}_init(n){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=n,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((n=>n())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},$i.dom=xN;const CN=n=>new Promise((t,r)=>{const i=new FileReader;i.onloadend=()=>t(i.result),i.onerror=r,i.readAsDataURL(n)}),RN=({src:n,isMine:t,messageId:r})=>{const i=O.useRef(null),l=O.useRef(null),[c,u]=O.useState(!1),[d,m]=O.useState(0),[p,y]=O.useState(0);O.useEffect(()=>{if(i.current)return l.current&&l.current.destroy(),l.current=$i.create({container:i.current,waveColor:t?"rgba(0, 0, 0, 0.2)":"#9ca3af",progressColor:t?"#ffffff":"#16a34a",cursorColor:"transparent",barWidth:3,barRadius:2,cursorWidth:0,height:48,barGap:3,normalize:!0,url:n}),l.current.on("play",()=>u(!0)),l.current.on("pause",()=>u(!1)),l.current.on("timeupdate",w=>y(w)),l.current.on("ready",w=>m(w)),l.current.on("finish",()=>u(!1)),()=>{l.current&&l.current.destroy()}},[n,t]);const v=()=>{l.current&&l.current.playPause()},b=w=>{if(!w)return"0:00";const x=Math.floor(w/60),S=Math.floor(w%60);return`${x}:${S<10?"0":""}${S}`};return f.jsxs("div",{className:"flex items-center gap-3 min-w-[200px] sm:min-w-[240px] pr-2",children:[f.jsx("button",{onClick:v,className:`p-2 rounded-full transition-colors flex-shrink-0 cursor-pointer z-10 ${t?"bg-green-500 text-white hover:bg-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:c?f.jsx(iE,{className:"w-5 h-5 fill-current"}):f.jsx(cE,{className:"w-5 h-5 fill-current ml-0.5"})}),f.jsx("div",{className:"flex-1 overflow-hidden relative",ref:i}),f.jsx("span",{className:`text-[11px] font-medium w-9 text-right tabular-nums ${t?"text-green-100":"text-gray-500"}`,children:b(c?p:d)})]})};function ON(){const{chatId:n}=Hi(),{currentUser:t}=ta(),{t:r,i18n:i}=nt(),l=ea(),c=O.useRef(null),u=O.useRef(null),{addToast:d}=Qa();O.useEffect(()=>{t||l("/login")},[t,l]);const[m,p]=O.useState([]),[y,v]=O.useState(""),[b,w]=O.useState(!0),[x,S]=O.useState(null),[A,T]=O.useState(null),[U,M]=O.useState(null),[$,K]=O.useState(!1),[R,D]=O.useState(null),[E,j]=O.useState(0),[z,B]=O.useState(null),[I,F]=O.useState(!1),[q,X]=O.useState(null),N=Bt(),[k,Q]=O.useState(N.state?.targetUser||null),[G,Y]=O.useState(n==="new"?null:n);O.useEffect(()=>{n!=="new"&&Y(n)},[n]),O.useEffect(()=>{n==="new"&&k&&t&&(async()=>{try{S(k);const me=query(collection(db,"chats"),where("participants","array-contains",t.uid)),ve=(await getDocs(me)).docs.find(fe=>fe.data().participants.includes(k.uid));ve?(Y(ve.id),l(`/messages/${ve.id}`,{replace:!0})):w(!1)}catch(me){console.warn("Error checking existing chats:",me)}})()},[n,k,t]),O.useEffect(()=>{if(n==="new"){w(!1);return}if(!G||!t)return;w(!0),(async()=>{const{data:je,error:ve}=await ce.from("messages").select("*").eq("chat_id",G).order("created_at",{ascending:!0});je&&p(je.map(fe=>({...fe,createdAt:{seconds:new Date(fe.created_at).getTime()/1e3},editedAt:fe.edited_at?{seconds:new Date(fe.edited_at).getTime()/1e3}:null,fileUrl:fe.file_url,fileName:fe.file_name,senderId:fe.sender_id}))),w(!1),setTimeout(()=>c.current?.scrollIntoView({behavior:"smooth"}),100)})();const me=ce.channel(`chat:${G}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`chat_id=eq.${G}`},je=>{const ve=je.new;p(fe=>[...fe,{...ve,createdAt:{seconds:new Date(ve.created_at).getTime()/1e3},fileUrl:ve.file_url,fileName:ve.file_name,senderId:ve.sender_id}]),setTimeout(()=>c.current?.scrollIntoView({behavior:"smooth"}),100)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages",filter:`chat_id=eq.${G}`},je=>{p(ve=>ve.filter(fe=>fe.id!==je.old.id))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`chat_id=eq.${G}`},je=>{const ve=je.new;p(fe=>fe.map(Je=>Je.id===ve.id?{...ve,createdAt:{seconds:new Date(ve.created_at).getTime()/1e3},editedAt:ve.edited_at?{seconds:new Date(ve.edited_at).getTime()/1e3}:null,text:ve.text}:Je))}).subscribe();return()=>{ce.removeChannel(me)}},[G,t,n,l]),O.useEffect(()=>{if(!A)return;const de=onSnapshot(doc(db,"users",A),me=>{if(me.exists()){const je=me.data();S(ve=>({...ve,...je}))}});return()=>de()},[A]);const L=async(de,me=null,je=null,ve="text")=>{F(!0);try{let fe=G;if(!fe&&n==="new"){if(!k)throw new Error("Target user missing");const{startChat:$e}=await wN(async()=>{const{startChat:aa}=await Promise.resolve().then(()=>Nk);return{startChat:aa}},[]);fe=await $e(t.uid,k.uid,{name:k.name,avatar:k.photoURL},{name:t.displayName,avatar:t.photoURL}),Y(fe),window.history.replaceState(null,"",`/messages/${fe}`)}let Je=null,st=ve,pa=je;if(me||z){let $e=me||z.file;if(st==="image"||z?.type==="image"){st="image",pa=pa||z?.file.name;const aa={maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0};try{$e=await xt($e,aa)}catch(pt){console.warn("Compression failed, using original",pt)}}else z&&(st=z.type,pa=z.file.name);if(Je=await CN($e),Je.length>95e4)throw new Error("File is too large for database storage even after compression.")}if(U){const{error:$e}=await ce.from("messages").update({text:de,edited_at:new Date().toISOString()}).eq("id",U);if($e)throw $e;M(null)}else{const{error:$e}=await ce.from("messages").insert({chat_id:fe,text:de||"",type:st,file_url:Je,file_name:pa,sender_id:t.uid});if($e)throw $e;await ce.from("chats").update({last_message:st==="audio"?" Voice Message":st==="image"?" Photo":de||" File",updated_at:new Date().toISOString()}).eq("id",fe)}v(""),B(null)}catch(fe){console.error("Send failed",fe),d(fe.message||"Failed to send message","error")}finally{F(!1)}},H=async de=>{de.preventDefault(),!(!y.trim()&&!z)&&await L(y)},ee=async de=>{if(window.confirm("Delete this message?"))try{const{error:me}=await ce.from("messages").delete().eq("id",de);if(me)throw me;d("Message deleted","success")}catch(me){console.error("Delete failed",me),d("Could not delete message","error")}},Z=i.language==="tr"?Ho:Gi,J=de=>{if(!de?.lastSeen)return"Offline";const me=de.lastSeen.seconds*1e3;return Date.now()-me<180*1e3?"Online":`${r("last_seen")||"Last seen"} ${Bo(new Date(me),{addSuffix:!0,locale:Z})}`},oe=de=>de?.lastSeen?Date.now()-de.lastSeen.seconds*1e3<180*1e3:!1,pe=de=>de?new Date(de.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"...",ke=de=>{const me=de.target.files[0];if(!me)return;if(me.size>10*1024*1024){d("File too large (Max 10MB)","error");return}const je=me.type.startsWith("image/")?"image":"file",ve=je==="image"?URL.createObjectURL(me):null;B({file:me,type:je,previewUrl:ve})},ue=de=>{v(de.text||""),M(de.id),B(null),u.current&&(u.current.value="")},he=()=>{M(null),v(""),B(null)},Ce=O.useRef("cancel"),ze=O.useRef(null),Ae=O.useRef(null),Ge=O.useRef(null),[qe,et]=O.useState(0);O.useEffect(()=>{let de;return $?(j(0),de=setInterval(()=>j(me=>me+1),1e3)):(j(0),et(0)),()=>{clearInterval(de),Ge.current&&cancelAnimationFrame(Ge.current),ze.current&&ze.current.close()}},[$]);const Ke=()=>{if(!Ae.current)return;const de=new Uint8Array(Ae.current.fftSize);Ae.current.getByteTimeDomainData(de);let me=0;for(let ve=0;ve<de.length;ve++)me+=Math.abs(de[ve]-128);const je=me/de.length;et(je*10),Ge.current=requestAnimationFrame(Ke)},Pe=async()=>{try{const de=await navigator.mediaDevices.getUserMedia({audio:!0}),me=new(window.AudioContext||window.webkitAudioContext);await me.resume();const je=me.createAnalyser();me.createMediaStreamSource(de).connect(je),je.fftSize=256,ze.current=me,Ae.current=je,Ke();const fe=new MediaRecorder(de),Je=[];fe.ondataavailable=st=>Je.push(st.data),fe.onstop=async()=>{if(de.getTracks().forEach(st=>st.stop()),ze.current&&ze.current.close(),Ge.current&&cancelAnimationFrame(Ge.current),Ce.current==="send"){const st=new Blob(Je,{type:"audio/webm"});await L(null,st,`voice_${Date.now()}.webm`,"audio")}else console.log("Recording cancelled")},fe.start(),D(fe),K(!0),Ce.current="cancel"}catch(de){console.error("Mic error:",de),d(r("mic_error")||"Microphone error","error")}},rt=de=>{!R||R.state==="inactive"||(Ce.current=de,R.stop(),K(!1))};return f.jsxs("div",{className:"flex flex-col h-[calc(100vh-theme(spacing.32))] md:h-[calc(100vh-theme(spacing.16))] max-w-2xl mx-auto w-full bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden relative",children:[b&&f.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-50 flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),f.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 bg-white dark:bg-gray-800 z-10 shadow-sm",children:[f.jsx("button",{onClick:()=>l("/messages"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:f.jsx(zd,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),x?f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("img",{src:x.photoURL||x.avatar||`https://ui-avatars.com/api/?name=${x.name||"User"}`,alt:x.name,className:"w-10 h-10 rounded-full object-cover border border-gray-100"}),f.jsxs("div",{children:[f.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100 leading-tight",children:x.name||x.displayName||"User"}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("span",{className:`w-2 h-2 rounded-full ${oe(x)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),f.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:J(x)})]})]})]}):f.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100",children:"Chat"})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 bg-gray-50 dark:bg-gray-900/50",children:[m.map(de=>{const me=de.senderId===t.uid,je=de.type==="audio",ve=de.type==="image",fe=de.type==="file";return f.jsxs("div",{className:`flex flex-col ${me?"items-end":"items-start"} group`,children:[f.jsxs("div",{className:`flex items-end gap-2 max-w-[85%] ${me?"flex-row-reverse":"flex-row"}`,children:[f.jsxs("div",{className:`px-4 py-2.5 shadow-sm text-sm md:text-base relative group-hover:shadow-md transition-all ${me?"bg-green-600 text-white rounded-2xl rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-2xl rounded-bl-none border border-gray-100 dark:border-gray-700"} ${je?"min-w-[150px]":""}`,children:[ve&&f.jsx("a",{href:de.fileUrl,target:"_blank",rel:"noopener noreferrer",children:f.jsx("img",{src:de.fileUrl,alt:"attachment",className:"max-w-full h-48 object-cover rounded-lg mb-2"})}),je&&f.jsx(RN,{src:de.fileUrl,isMine:me,messageId:de.id}),fe&&f.jsxs("a",{href:de.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 underline decoration-current",children:[f.jsx(ap,{className:"w-4 h-4"}),f.jsx("span",{className:"truncate max-w-[150px]",children:de.fileName||"File"})]}),de.text&&f.jsx("p",{className:"whitespace-pre-wrap",children:de.text}),de.editedAt&&f.jsxs("span",{className:`text-[10px] block text-right mt-1 opacity-60 ${me?"text-green-100":"text-gray-400"}`,children:["(",r("edited")||"Edited"," ",pe(de.editedAt),")"]})]}),me&&f.jsxs("div",{className:"flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{onClick:()=>ue(de),className:"p-1 text-gray-400 hover:text-blue-500",title:"Edit",children:f.jsx(jy,{className:"w-3 h-3"})}),f.jsx("button",{onClick:()=>ee(de.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Delete",children:f.jsx(Ui,{className:"w-3 h-3"})})]})]}),f.jsx("span",{className:"text-[10px] text-gray-400 mt-1 px-1 font-medium",children:pe(de.createdAt)})]},de.id)}),f.jsx("div",{ref:c})]}),U&&f.jsxs("div",{className:"px-4 py-2 bg-yellow-50 dark:bg-gray-700 flex items-center justify-between text-xs text-yellow-700 dark:text-yellow-300",children:[f.jsx("span",{children:r("editing_message")||"Editing message..."}),f.jsx("button",{onClick:he,children:f.jsx(Ta,{className:"w-4 h-4"})})]}),z&&f.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-100 dark:border-gray-600 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[z.type==="image"?f.jsx("img",{src:z.previewUrl,alt:"preview",className:"w-10 h-10 rounded object-cover"}):f.jsx(LS,{className:"w-8 h-8 text-gray-500"}),f.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 truncate max-w-[200px]",children:z.file.name})]}),f.jsx("button",{onClick:()=>B(null),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",children:f.jsx(Ta,{className:"w-4 h-4 text-gray-500"})})]}),f.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700 flex gap-2 items-end",children:$?f.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-gray-50 dark:bg-gray-700 rounded-xl px-2 py-2 animate-fade-in text-red-500",children:[f.jsx("button",{onClick:()=>rt("cancel"),className:"p-3 text-gray-500 hover:text-red-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-colors",children:f.jsx(Ui,{className:"w-5 h-5"})}),f.jsxs("div",{className:"flex-1 flex items-center justify-center gap-4",children:[f.jsx("span",{className:"font-mono font-medium text-red-600 dark:text-red-400",children:new Date(E*1e3).toISOString().substr(14,5)}),f.jsx("div",{className:"flex items-center gap-0.5 h-10 items-end",children:[...Array(24)].map((de,me)=>{const je=Math.max(0,qe-5),ve=Math.min(1,je/40),fe=Math.sin(me*.5+Date.now()/100)*.2+.8;return f.jsx("div",{className:"w-1 bg-red-500 rounded-full transition-all duration-75",style:{height:`${Math.max(4,ve*36*fe)}px`,opacity:.5+ve*.5}},me)})})]}),f.jsx("button",{onClick:()=>rt("send"),className:"p-3 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg transition-transform transform active:scale-95",children:f.jsx(ks,{className:"w-5 h-5"})})]}):f.jsxs(f.Fragment,{children:[f.jsx("input",{type:"file",ref:u,onChange:ke,className:"hidden",accept:"image/*,.pdf,.doc,.docx,.txt"}),f.jsx("button",{onClick:()=>u.current?.click(),className:"p-3 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition-all",disabled:U,children:f.jsx(ap,{className:"w-5 h-5"})}),f.jsx("div",{className:"flex-1 bg-gray-50 dark:bg-gray-700 rounded-2xl flex items-center min-h-[48px]",children:f.jsx("textarea",{value:y,onChange:de=>v(de.target.value),placeholder:U?r("edit_message_placeholder")||"Edit your message...":r("type_message")||"Mesaj yazn...",className:"w-full bg-transparent px-4 py-3 max-h-32 focus:outline-none text-gray-800 dark:text-white resize-none",rows:1,style:{height:"auto",minHeight:"48px"}})}),y.trim()||z?f.jsx("button",{onClick:H,disabled:I,className:"p-3 bg-green-600 hover:bg-green-700 text-white rounded-xl shadow-lg shadow-green-200 dark:shadow-none transition-all disabled:opacity-50 transform active:scale-95",children:I?f.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):f.jsx(ks,{className:"w-5 h-5"})}):f.jsx("button",{onClick:Pe,className:"p-3 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl transition-all transform active:scale-95 shadow-lg",children:f.jsx(aE,{className:"w-5 h-5"})})]})})]})}const MN=({isOpen:n,onClose:t,title:r,users:i,loading:l,actionLabel:c,onAction:u})=>{const{t:d}=nt(),m=ea();if(!n)return null;const p=y=>{t(),m(`/profile/${y}`)};return f.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:t,children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl relative overflow-hidden flex flex-col max-h-[80vh] animate-scale-up",onClick:y=>y.stopPropagation(),children:[f.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-white dark:bg-gray-800 z-10",children:[f.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:r}),f.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:f.jsx(Ta,{className:"w-5 h-5 text-gray-500"})})]}),f.jsx("div",{className:"overflow-y-auto p-4 space-y-3 flex-1",children:l?f.jsx("div",{className:"flex justify-center p-8",children:f.jsx("div",{className:"w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full animate-spin"})}):i.length===0?f.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[f.jsx(Di,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),f.jsx("p",{children:d("no_results")})]}):i.map(y=>f.jsxs("div",{onClick:()=>p(y.id),className:"flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-xl cursor-pointer transition-colors",children:[f.jsx("img",{src:y.photoURL||y.avatar||`https://ui-avatars.com/api/?name=${y.displayName||y.name||"User"}&background=random`,alt:y.displayName||y.name,className:"w-12 h-12 rounded-full object-cover border border-gray-100 dark:border-gray-700"}),f.jsx("div",{className:"flex-1 min-w-0",children:f.jsx("h4",{className:"font-bold text-gray-900 dark:text-white truncate",children:y.displayName||y.name||"Unknown User"})}),u&&c&&f.jsx("button",{onClick:v=>{v.stopPropagation(),u(y.id)},className:"text-xs font-bold text-red-600 bg-red-50 dark:bg-red-900/20 px-3 py-1.5 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors mr-2",children:c}),f.jsx("button",{className:"text-xs font-bold text-green-600 bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:d("view_profile")})]},y.id))})]})})};function Dp(){const{t:n,i18n:t}=nt(),r=ea(),i=Bt(),{currentUser:l,refreshUser:c}=ta(),{addToast:u}=Qa(),{userId:d}=Hi(),[m,p]=O.useState(null),[y,v]=O.useState(""),[b,w]=O.useState(""),[x,S]=O.useState(!1),[A,T]=O.useState([]),[U,M]=O.useState(!0),[$,K]=O.useState(!1),[R,D]=O.useState(!1),[E,j]=O.useState({followersCount:0,followingCount:0}),[z,B]=O.useState(!1),[I,F]=O.useState("followers"),[q,X]=O.useState([]),[N,k]=O.useState(!1),Q=O.useRef(null),G=!d||l&&d===l.uid,Y=d||l?.uid;O.useEffect(()=>{(async()=>{if(Y){M(!0);try{let he=null;if(G&&l)he=l,p(he),v(he.full_name||he.name||""),w(he.avatar_url||he.avatar||""),j({followersCount:he.followers_count||he.followersCount||0,followingCount:he.following_count||he.followingCount||0});else{const{data:Ae,error:Ge}=await ce.from("profiles").select("*").eq("id",Y).single();Ae?he={uid:Ae.id,...Ae,name:Ae.full_name,avatar:Ae.avatar_url,followersCount:Ae.followers_count||0,followingCount:Ae.following_count||0}:he={uid:Y,name:"Gardener"},p(he),j({followersCount:he.followersCount||0,followingCount:he.followingCount||0})}const{data:Ce}=await ce.from("posts").select("*").eq("user_id",Y).order("created_at",{ascending:!1}),ze=(Ce||[]).map(Ae=>({id:Ae.id,userId:Ae.user_id,authorName:Ae.author_name,userAvatar:Ae.user_avatar,content:Ae.content,image:Ae.image_url,plantType:Ae.plant_type,relatedAnalysisId:Ae.related_analysis_id,likes:Ae.likes||[],comments:Ae.comments||[],createdAt:{seconds:new Date(Ae.created_at).getTime()/1e3},title:Ae.title}));if(T(ze),l&&!G){const{isFollowing:Ae,isRequested:Ge}=await Ry(l.uid,Y);K(Ae),D(Ge)}}catch(he){console.error("Failed to load profile data",he)}finally{M(!1)}}})()},[Y,G,l,i.state?.refreshId]);const L=async()=>{if(!l){u(n("login_required"),"info");return}if(!x){S(!0);try{$?(await po(l.uid,Y),j(ue=>({...ue,followersCount:Math.max(0,ue.followersCount-1)})),K(!1),D(!1),u(n("unfollowed_user")||"Takipten kld","info")):R?(await My(l.uid,Y),D(!1),u(n("request_cancelled")||"stek iptal edildi","info")):(await Oy(l.uid,{displayName:l.full_name||l.name||"Unknown User",photoURL:l.avatar_url||l.avatar||null},Y),D(!0),u(n("request_sent")||"Takip istei gnderildi","success"))}catch(ue){console.error("Profile Follow Error:",ue),u(n("something_went_wrong")+`: ${ue.message}`,"error")}finally{S(!1)}}},H=async ue=>{F(ue),B(!0),k(!0);try{const he=ue==="followers"?await IE(Y):await PE(Y);X(he)}catch(he){console.error(he)}finally{k(!1)}},ee=async ue=>{if(!G)return;const he=ue.target.files[0];if(he){S(!0);try{const ze=await xt(he,{maxSizeMB:.1,maxWidthOrHeight:400,useWebWorker:!0}),Ae=await new Promise(Ge=>{const qe=new FileReader;qe.readAsDataURL(ze),qe.onload=et=>Ge(et.target.result)});await ce.from("profiles").update({avatar_url:Ae,updated_at:new Date}).eq("id",l.uid),await ce.auth.updateUser({data:{avatar_url:Ae}}),w(Ae),qd(l.uid,y,Ae),await c(),u(n("profile_updated")||"Profile updated!","success")}catch(Ce){console.error(Ce),u("Error updating avatar.","error")}finally{S(!1)}}},Z=async ue=>{if(ue.preventDefault(),!!G&&y.trim()){S(!0);try{await ce.from("profiles").update({full_name:y,updated_at:new Date}).eq("id",l.uid),await ce.auth.updateUser({data:{full_name:y}}),qd(l.uid,y,b),await c(),u(n("profile_updated")||"Profile updated!","success")}catch{u("Failed to update profile.","error")}finally{S(!1)}}};if(!Y)return f.jsx("div",{className:"p-10 text-center",children:n("login_required")});if(U&&!m)return f.jsx(qo,{});const J=ue=>{if(!ue?.last_seen)return!1;const he=new Date(ue.last_seen);return new Date-he<180*1e3},oe=ue=>ue?.last_seen?Bo(new Date(ue.last_seen),{addSuffix:!0,locale:t.language==="tr"?Ho:Gi}):"Offline",pe=async ue=>{if(confirm(n("confirm_unfollow")||"Takipten kmak istediinize emin misiniz?"))try{await po(l.uid,ue),X(he=>he.filter(Ce=>Ce.id!==ue)),j(he=>({...he,followingCount:Math.max(0,he.followingCount-1)})),u(n("unfollowed_user")||"Takipten kld","success")}catch(he){console.error(he),u("Error","error")}},ke=async ue=>{if(confirm(n("confirm_remove_follower")||"Bu takipiyi karmak istediinize emin misiniz?"))try{await po(ue,l.uid),X(he=>he.filter(Ce=>Ce.id!==ue)),j(he=>({...he,followersCount:Math.max(0,he.followersCount-1)})),u(n("follower_removed")||"Takipi karld","success")}catch(he){console.error(he),u("Error","error")}};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"max-w-4xl mx-auto w-full pb-20 animate-fade-in p-4",children:f.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mt-6",children:[f.jsx("div",{className:"w-full md:w-1/3",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-6 sticky top-24 border border-gray-100 dark:border-gray-700",children:[f.jsxs("div",{className:"flex flex-col items-center mb-6 relative",children:[f.jsxs("div",{className:`relative ${G?"group cursor-pointer":""} mt-2`,onClick:()=>G&&Q.current?.click(),children:[f.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-green-50 dark:border-green-900/30 shadow-xl bg-gray-100 relative z-10",children:(G?b:m?.avatar||m?.photoURL)?f.jsx("img",{src:G?b:m?.avatar||m?.photoURL,className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:f.jsx("img",{src:`https://ui-avatars.com/api/?name=${G?y||l?.displayName||"Gardener":m?.name||m?.displayName||A.length>0&&A[0].authorName||"Gardener"}&background=random&size=128`,alt:"Avatar",className:"w-full h-full object-cover"})})}),!G&&m&&f.jsxs("div",{className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 whitespace-nowrap px-3 py-1 rounded-full text-[10px] font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 shadow-sm z-20 ${J(m)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[f.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${J(m)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),J(m)?"Online":oe(m)]}),G&&f.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(Ss,{className:"w-8 h-8 text-white"})}),x&&f.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center rounded-full",children:f.jsx(Aa,{className:"animate-spin text-green-600"})})]}),G&&f.jsx("input",{type:"file",ref:Q,onChange:ee,className:"hidden",accept:"image/*"}),f.jsx("h2",{className:"text-xl font-bold mt-4 text-gray-900 dark:text-white capitalize text-center",children:G?y||l?.displayName||n("gardener")||"Bahvan":m?.name||m?.displayName||A.length>0&&A[0].authorName||n("gardener")||"Bahvan"}),G&&f.jsx("p",{className:"text-sm text-gray-500",children:l.email})]}),G?f.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide ml-1",children:n("display_name")}),f.jsx("input",{type:"text",value:y,onChange:ue=>v(ue.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-green-500 outline-none"})]}),f.jsxs("button",{type:"submit",disabled:x,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-3 rounded-xl shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[x?f.jsx(Aa,{className:"animate-spin w-4 h-4"}):f.jsx(Ny,{className:"w-4 h-4"}),f.jsx("span",{children:n("save_changes")})]})]}):f.jsxs("div",{className:"text-center",children:[f.jsxs("p",{className:"text-sm text-gray-500 italic mb-4",children:[n("joined")||"Katlma Tarihi",": ",m?.created_at?new Date(m.created_at).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):n("unknown_date")]}),$&&f.jsxs("button",{onClick:()=>{const ue={uid:m.uid||Y,name:m.name||m.displayName||A.length>0&&A[0].authorName||"Gardener",photoURL:m.photoURL||m.avatar||null};r("/messages/new",{state:{targetUser:ue}})},className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-green-700 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[f.jsx(Mi,{className:"w-5 h-5"}),f.jsx("span",{children:n("send_message")})]})]}),f.jsxs("div",{className:"flex items-center justify-center gap-6 mb-6",children:[f.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-3 text-center min-w-[80px] cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:()=>H("followers"),children:[f.jsx("span",{className:"block text-xl font-bold text-gray-900 dark:text-white",children:E.followersCount}),f.jsx("span",{className:"text-xs text-gray-500 font-medium",children:n("followers")})]}),f.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-3 text-center min-w-[80px] cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:()=>H("following"),children:[f.jsx("span",{className:"block text-xl font-bold text-gray-900 dark:text-white",children:E.followingCount}),f.jsx("span",{className:"text-xs text-gray-500 font-medium",children:n("following_count")})]})]}),!G&&f.jsx("div",{className:"flex gap-2 w-full px-6 mb-6",children:f.jsxs("button",{onClick:L,disabled:x,className:`flex-1 py-2.5 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${$?"bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600":R?"bg-gray-100 text-gray-500 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400":"bg-green-600 text-white hover:bg-green-700 shadow-lg shadow-green-500/20"}`,children:[x?f.jsx(Aa,{className:"w-4 h-4 animate-spin"}):$?f.jsx(RE,{className:"w-4 h-4"}):R?f.jsx(Lo,{className:"w-4 h-4"}):f.jsx(rh,{className:"w-4 h-4"}),$?n("unfollow"):R?n("requested")||"Requested":n("follow")]})})]})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:f.jsx("span",{children:G?n("my_posts")||"Gnderilerim":n("user_posts_title",{name:m?.name||"Kullanc"})||`${m?.name||"Kullanc"} Gnderileri`})}),U?f.jsx("div",{className:"flex justify-center py-20",children:f.jsx(Aa,{className:"w-8 h-8 animate-spin text-gray-300"})}):A.length>0?f.jsx("div",{className:"columns-1 gap-6 space-y-6",children:A.map(ue=>f.jsx("div",{className:"break-inside-avoid",children:f.jsx(hh,{post:{...ue,hideAuthor:G},onViewAnalysis:()=>{},onDelete:he=>T(Ce=>Ce.filter(ze=>ze.id!==he))})},ue.id))}):f.jsxs("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/50 rounded-3xl border border-dashed border-gray-200 dark:border-gray-700",children:[f.jsx(Ey,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),f.jsx("p",{className:"text-gray-500",children:n("no_posts_yet")})]})]})]})}),f.jsx(MN,{isOpen:z,onClose:()=>B(!1),title:n(I==="followers"?"followers":"following"),users:q,loading:N,actionLabel:G?I==="following"?n("unfollow")||"Takipten kar":n("remove")||"Takipten kar":null,onAction:G?I==="following"?pe:ke:null})]})}function UN(){const{t:n,i18n:t}=nt(),r={en:{intro:"This project aims to facilitate the detection and control of agricultural pests using an AI-based system.",sections:[{title:"Global Agriculture Network",text:"PlantAI is an advanced AI assistant developed to increase agricultural productivity and minimize crop losses.",icon:Zt},{title:"Collective Intelligence",text:"Not just a diagnostic tool, but a massive community of farmers.",icon:$d},{title:"Our Mission",text:"We are putting technology in everyone's pocket for sustainable agriculture.",icon:ip}]},tr:{intro:"Bu proje, tarm zararllarnn tespitini ve onlarla mcadeleyi kolaylatrmak amacyla yapay zeka tabanl bir sistem gelitirilmesini kapsamaktadr.",sections:[{title:"Kresel Tarm A",text:"PlantAI, tarmsal verimlilii artrmak ve rn kayplarn en aza indirmek iin gelitirilmi gelimi bir yapay zeka asistandr.",icon:Zt},{title:"Kolektif Bilgi Gc",text:"Sadece bir tehis arac deil, ayn zamanda dev bir ifti topluluudur.",icon:$d},{title:"Misyonumuz",text:"Srdrlebilir tarm iin teknolojiyi herkesin cebine sokuyoruz.",icon:ip}]}},i=r[t.language]||r.en;return f.jsxs("div",{className:"max-w-2xl mx-auto w-full pb-8",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full mb-4",children:f.jsx(wy,{className:"w-8 h-8 text-green-600 dark:text-green-500"})}),f.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:n("about")}),f.jsxs("p",{className:"text-lg text-gray-600 dark:text-gray-300 italic",children:['"',i.intro,'"']})]}),f.jsx("div",{className:"space-y-6",children:i.sections.map((l,c)=>{const u=l.icon;return f.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 flex gap-4 items-start hover:shadow-md transition-shadow",children:[f.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-xl",children:f.jsx(u,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white mb-2",children:l.title}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:l.text})]})]},c)})})]})}function DN(){const{t:n}=nt(),{currentUser:t}=ta();ea();const r=Bt(),[i,l]=O.useState([]),[c,u]=O.useState(!0),[d,m]=O.useState(null),[p,y]=O.useState(!1),[v,b]=O.useState(null),[w,x]=O.useState(""),[S,A]=O.useState(!1),T=O.useRef(null),U=async(D,E)=>{if(D.stopPropagation(),!!window.confirm(n("confirm_delete")||"Are you sure you want to delete this analysis?"))try{await Gy(E),l(j=>j.filter(z=>z.id!==E))}catch(j){console.error("Delete failed",j),alert("Failed to delete analysis.")}};O.useEffect(()=>{t&&M()},[t,r.state?.refreshId]),O.useEffect(()=>{r.state?.showTreatmentGuide&&(y(!0),window.history.replaceState({},document.title))},[r]);const M=async()=>{u(!0);const D=await Py(t.uid);l(D),u(!1),r.state?.newAnalysisId?m(r.state.newAnalysisId):D.length>0&&r.state?.showTreatmentGuide&&m(D[0].id)},$=D=>{m(E=>E===D?null:D),b(null)},K=async(D,E)=>{if(D.stopPropagation(),!E.isPublic&&window.confirm(n("confirm_share")||"Share this diagnosis with the community?"))try{await Vy(E.id,E,E.plantType||"plant",t.displayName||n("gardener")||"Bahvan",t.photoURL),l(j=>j.map(z=>z.id===E.id?{...z,isPublic:!0}:z))}catch(j){console.error("Share failed",j),alert("Failed to share.")}},R=async D=>{if(w.trim()){A(!0);try{let E=null;if(T.current?.files?.[0]){const j=T.current.files[0];E=await new Promise(z=>{const B=new FileReader;B.onload=I=>z(I.target.result),B.readAsDataURL(j)})}await Yy(D.id,E,w),b(null),x(""),M()}catch(E){console.error("Feedback failed",E),alert("Failed to save update.")}finally{A(!1)}}};return c?f.jsx(qo,{}):i.length===0?f.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center text-gray-500 animate-fade-in",children:[f.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6",children:f.jsx(Zt,{className:"w-12 h-12 text-green-600"})}),f.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:n("no_analyses_title")||"Henz Bir Analiz Yok"}),f.jsx("p",{className:"mb-8 max-w-md",children:n("no_analyses_desc")||"Bitkilerinizin saln takip etmek iin ilk analizinizi yapn."}),f.jsxs(Na,{to:"/",className:"bg-green-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[f.jsx(Ss,{className:"w-5 h-5"}),n("start_diagnosis")||"Analiz Balat"]})]}):f.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-24 px-4 animate-fade-in relative",children:[f.jsxs("div",{className:"flex items-center justify-between mb-8 mt-6",children:[f.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3 text-gray-900 dark:text-white",children:[f.jsx(th,{className:"w-7 h-7 text-green-600"}),n("treatment_updates")||"Tedavi & Takip"]}),f.jsxs("span",{className:"text-sm font-medium text-gray-500 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:[i.length," ",n("records")||"Kayt"]})]}),f.jsx("div",{className:"grid gap-6",children:i.map(D=>f.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-3xl shadow-sm border transition-all duration-300 overflow-hidden ${d===D.id?"border-green-500 ring-4 ring-green-500/10 shadow-lg":"border-gray-100 dark:border-gray-700 hover:shadow-md"} relative group`,children:[f.jsxs("div",{className:"p-5 flex gap-5 cursor-pointer items-center relative",onClick:()=>$(D.id),children:[f.jsx("img",{src:D.mainImage,alt:D.plantType,className:"w-20 h-20 md:w-28 md:h-28 rounded-2xl object-cover bg-gray-100 shadow-sm shrink-0"}),f.jsxs("div",{className:"flex-1 flex flex-col justify-center min-w-0",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2 gap-2",children:[f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white leading-tight break-words",children:D.plantType||"Unknown Plant"}),(D.result.plant_latin_name||D.result.latin_name)&&f.jsxs("p",{className:"text-sm text-gray-500 italic font-medium mt-0.5",children:["(",D.result.plant_latin_name||D.result.latin_name,")"]})]}),f.jsxs("span",{className:"text-xs font-medium text-gray-400 flex items-center gap-1 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-lg shrink-0 h-fit mt-1",children:[f.jsx(Lo,{className:"w-3 h-3"}),D.createdAt?.seconds?new Date(D.createdAt.seconds*1e3).toLocaleDateString():"Today"]})]}),f.jsxs("p",{className:"text-red-600 dark:text-red-400 font-bold mb-1 text-sm flex items-center gap-2",children:[f.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse shrink-0"}),f.jsx("span",{className:"break-words line-clamp-2",children:D.result.disease_name})]}),f.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-bold text-gray-400 mt-2",children:[f.jsx("span",{className:"text-green-600 bg-green-50 dark:bg-green-900/20 px-2 py-0.5 rounded",children:"7 Gnlk Program"}),D.isPublic&&f.jsxs("span",{className:"text-blue-500 flex items-center gap-1",children:[f.jsx(ko,{className:"w-3 h-3"}),"Paylald"]})]})]})]}),f.jsx(nh,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${d===D.id?"rotate-180":""}`}),d===D.id&&f.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 p-6 animate-fade-in-down",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:n("description")}),f.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap text-sm",children:D.result.description})]}),f.jsxs("div",{className:"mb-6",children:[f.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[f.jsx(rp,{className:"w-5 h-5 text-green-600"}),D.result.is_treatable===!1?n("prevention_tips")||"Koruyucu nlemler":n("treatment_steps")||"Tedavi Admlar"]}),D.result.is_treatable===!1&&f.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100 dark:bg-red-900/20 dark:text-red-300 dark:border-red-900/30",children:n("plant_not_recoverable")||"Bu bitki ne yazk ki kurtarlamayabilir."}),f.jsx("div",{className:"space-y-3",children:(D.result.is_treatable===!1?D.result.preventive_measures:D.result.treatment_steps)?.map((E,j)=>f.jsxs("div",{className:"flex gap-4 p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-100 dark:border-gray-600 shadow-sm",children:[f.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center font-bold text-xs shrink-0 ${D.result.is_treatable===!1?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:j+1}),f.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm leading-relaxed",children:E})]},j))})]}),D.updates&&D.updates.length>0&&f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Gelimeler"}),f.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 custom-scrollbar",children:D.updates.map((E,j)=>f.jsxs("div",{className:"min-w-[200px] bg-white dark:bg-gray-700 p-3 rounded-xl border border-gray-100 shadow-sm shrink-0",children:[E.imageUrl&&f.jsx("img",{src:E.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),f.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(E.createdAt?.seconds*1e3).toLocaleDateString()}),f.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:E.note})]},j))})]}),f.jsxs("div",{className:"flex flex-col gap-3",children:[f.jsxs("div",{className:"flex gap-3",children:[D.result.is_treatable&&f.jsxs("button",{onClick:()=>b(v===D.id?null:D.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 shadow-lg shadow-green-500/20 transition-all active:scale-95",children:[f.jsx(Ss,{className:"w-5 h-5"}),n("add_update")||"Gelime Ekle"]}),f.jsxs("button",{onClick:E=>K(E,D),disabled:D.isPublic,className:`flex-1 px-6 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all ${D.isPublic?"bg-blue-50 text-blue-400 cursor-default":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[f.jsx(ko,{className:"w-5 h-5"}),D.isPublic?n("shared")||"Paylald":n("share")||"Payla"]})]}),f.jsxs("button",{onClick:E=>U(E,D.id),className:"w-full py-3 mt-2 rounded-xl text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[f.jsx(Ui,{className:"w-4 h-4"}),n("delete_analysis")||"Analizi Sil"]})]}),v===D.id&&f.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-2xl border border-green-200 dark:border-green-800 shadow-inner animate-fade-in",children:[f.jsx("textarea",{value:w,onChange:E=>x(E.target.value),placeholder:"Bitkinin durumu nasl? rnein: 'Yapraklar tekrar yeerdi...'",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-700 dark:bg-gray-900 mb-3 text-sm focus:ring-2 focus:ring-green-500 outline-none resize-none",rows:3}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("input",{type:"file",ref:T,className:"text-xs text-gray-500 file:mr-2 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"}),f.jsx("button",{onClick:()=>R(D),disabled:S,className:"bg-green-600 text-white p-2.5 rounded-full hover:bg-green-700 disabled:opacity-50 transition-colors",children:S?f.jsx(Aa,{className:"w-5 h-5 animate-spin"}):f.jsx(ks,{className:"w-5 h-5"})})]})]})]})]},D.id))}),p&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-fade-in",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl max-w-lg w-full p-8 shadow-2xl relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full blur-3xl -mr-10 -mt-10"}),f.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -ml-10 -mb-10"}),f.jsxs("div",{className:"text-center relative z-10",children:[f.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm",children:f.jsx(US,{className:"w-10 h-10 text-green-600"})}),f.jsx("h2",{className:"text-2xl font-extrabold text-gray-900 dark:text-white mb-2",children:"Tedavi Sreci Balad!"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 leading-relaxed",children:"Bitki analizi baaryla kaydedildi. yileme srecini buradan adm adm takip edebilirsin."}),f.jsxs("div",{className:"space-y-4 text-left mb-8",children:[f.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[f.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:f.jsx(rp,{className:"w-5 h-5 text-blue-500"})}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Uygula"}),f.jsx("p",{className:"text-xs text-gray-500",children:"nerilen tedavi admlarn dzenli olarak uygula."})]})]}),f.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[f.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:f.jsx(Ss,{className:"w-5 h-5 text-purple-500"})}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Raporla"}),f.jsx("p",{className:"text-xs text-gray-500",children:"Haftalk yeni fotoraflar ykleyerek geliimi kaydet."})]})]})]}),f.jsx("button",{onClick:()=>y(!1),className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-4 rounded-xl hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Anladm, Bala"})]})]})})]})}function zN(){const{isOpen:n,view:t,closeModal:r,toggleView:i}=dh(),{t:l}=nt(),{addToast:c}=Qa(),[u,d]=O.useState(""),[m,p]=O.useState(""),[y,v]=O.useState(""),[b,w]=O.useState(!1),[x,S]=O.useState("");if(!n)return null;const A=async T=>{T.preventDefault(),S(""),w(!0);try{if(t==="login"){const{error:U}=await ce.auth.signInWithPassword({email:u,password:m});if(U)throw U}else{const{data:U,error:M}=await ce.auth.signUp({email:u,password:m,options:{data:{full_name:y,avatar_url:`https://ui-avatars.com/api/?name=${y}&background=random`}}});if(M)throw M;U.user&&!U.session&&c(l("check_email_confirmation")||"Please check your email to confirm your account.","info")}r(),d(""),p(""),v("")}catch(U){console.error(U),U.message.includes("Invalid login credentials")?S(l("error_invalid_credential")||"Hatal e-posta veya ifre"):U.message.includes("User already registered")?S(l("error_email_in_use")||"Bu e-posta zaten kullanmda"):S(U.message||l("error_generic")||"Bir hata olutu")}finally{w(!1)}};return f.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden relative animate-slide-up",children:[f.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors z-10",children:f.jsx(Ta,{className:"w-5 h-5"})}),f.jsxs("div",{className:"p-8",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:t==="login"?l("welcome_back")||"Tekrar Hogeldiniz":l("create_account")||"Hesap Olutur"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:t==="login"?l("login_desc")||"Devam etmek iin giri yapn":l("register_desc")||"Toplulua katlmak iin kayt olun"})]}),f.jsxs("form",{onSubmit:A,className:"space-y-4",children:[t==="register"&&f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 ml-1",children:l("full_name")}),f.jsxs("div",{className:"relative",children:[f.jsx(Di,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),f.jsx("input",{type:"text",required:!0,value:y,onChange:T=>v(T.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:"Ad Soyad"})]})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 ml-1",children:l("email")}),f.jsxs("div",{className:"relative",children:[f.jsx(ky,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),f.jsx("input",{type:"email",required:!0,value:u,onChange:T=>d(T.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:"ornek@email.com"})]})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 ml-1",children:l("password")}),f.jsxs("div",{className:"relative",children:[f.jsx(FS,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),f.jsx("input",{type:"password",required:!0,value:m,onChange:T=>p(T.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:""})]})]}),x&&f.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg text-center",children:x}),f.jsx("button",{type:"submit",disabled:b,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl transition-all shadow-lg shadow-green-600/20 flex items-center justify-center gap-2",children:b?f.jsx(Aa,{className:"w-5 h-5 animate-spin"}):f.jsxs(f.Fragment,{children:[f.jsx("span",{children:t==="login"?l("login")||"Giri Yap":l("register")||"Kayt Ol"}),f.jsx(ah,{className:"w-4 h-4"})]})})]}),f.jsx("div",{className:"mt-6 text-center",children:f.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t==="login"?l("no_account")||"Hesabnz yok mu?":l("already_have_account")||"Zaten hesabnz var m?"," ",f.jsx("button",{onClick:i,className:"font-bold text-green-600 hover:text-green-700 transition-colors",children:t==="login"?l("register_now")||"Hemen Kaydol":l("login_now")||"Giri Yap"})]})})]})]})})}var zp={},LN="@vercel/analytics",$N="1.6.1",BN=()=>{window.va||(window.va=function(...t){(window.vaq=window.vaq||[]).push(t)})};function mv(){return typeof window<"u"}function gv(){try{const n="production"}catch{}return"production"}function HN(n="auto"){if(n==="auto"){window.vam=gv();return}window.vam=n}function qN(){return(mv()?window.vam:gv())||"production"}function Id(){return qN()==="development"}function IN(n){return n.scriptSrc?n.scriptSrc:Id()?"https://va.vercel-scripts.com/v1/script.debug.js":n.basePath?`${n.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function PN(n={debug:!0}){var t;if(!mv())return;HN(n.mode),BN(),n.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",n.beforeSend));const r=IN(n);if(document.head.querySelector(`script[src*="${r}"]`))return;const i=document.createElement("script");i.src=r,i.defer=!0,i.dataset.sdkn=LN+(n.framework?`/${n.framework}`:""),i.dataset.sdkv=$N,n.disableAutoTrack&&(i.dataset.disableAutoTrack="1"),n.endpoint?i.dataset.endpoint=n.endpoint:n.basePath&&(i.dataset.endpoint=`${n.basePath}/insights`),n.dsn&&(i.dataset.dsn=n.dsn),i.onerror=()=>{const l=Id()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${r}. ${l}`)},Id()&&n.debug===!1&&(i.dataset.debug="false"),document.head.appendChild(i)}function GN({route:n,path:t}){var r;(r=window.va)==null||r.call(window,"pageview",{route:n,path:t})}function KN(){if(!(typeof process>"u"||typeof zp>"u"))return zp.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function VN(n){return O.useEffect(()=>{var t;n.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]),O.useEffect(()=>{PN({framework:n.framework||"react",basePath:n.basePath??KN(),...n.route!==void 0&&{disableAutoTrack:!0},...n})},[]),O.useEffect(()=>{n.route&&n.path&&GN({route:n.route,path:n.path})},[n.route,n.path]),null}function xd(){const{lang:n}=Hi(),{i18n:t}=nt();return O.useEffect(()=>{n&&["en","tr"].includes(n)&&t&&typeof t.changeLanguage=="function"&&t.language!==n&&t.changeLanguage(n)},[n,t]),null}function YN(){const{i18n:n}=nt(),{currentUser:t,loading:r}=ta();if(r)return null;let i="en";return t?.language&&["en","tr"].includes(t.language)?i=t.language:["en","tr"].includes(n.language)?i=n.language:i=navigator.language.startsWith("tr")?"tr":"en",f.jsx(Vp,{to:`/${i}`,replace:!0})}function FN(){return f.jsx(r1,{children:f.jsx(BE,{children:f.jsx(fS,{children:f.jsxs(nN,{children:[f.jsxs(Dx,{children:[f.jsx(It,{path:"/",element:f.jsx(YN,{})}),f.jsx(It,{path:"/:lang/login",element:f.jsxs(f.Fragment,{children:[f.jsx(xd,{}),f.jsx(VE,{})]})}),f.jsx(It,{path:"/:lang/register",element:f.jsxs(f.Fragment,{children:[f.jsx(xd,{}),f.jsx(FE,{})]})}),f.jsxs(It,{path:"/:lang",element:f.jsxs(f.Fragment,{children:[f.jsx(xd,{}),f.jsx(KE,{})]}),children:[f.jsx(It,{index:!0,element:f.jsx($k,{})}),f.jsx(It,{path:"community",element:f.jsx(mN,{})}),f.jsx(It,{path:"community/post/:postId",element:f.jsx(gN,{})}),f.jsx(It,{path:"messages",element:f.jsx(yN,{})}),f.jsx(It,{path:"messages/:chatId",element:f.jsx(ON,{})}),f.jsx(It,{path:"analyses",element:f.jsx(DN,{})}),f.jsx(It,{path:"profile",element:f.jsx(Dp,{})}),f.jsx(It,{path:"profile/:userId",element:f.jsx(Dp,{})}),f.jsx(It,{path:"about",element:f.jsx(UN,{})})]}),f.jsx(It,{path:"*",element:f.jsx(Vp,{to:"/",replace:!0})})]}),f.jsx(zN,{}),f.jsx(VN,{})]})})})})}Hw.createRoot(document.getElementById("root")).render(f.jsx(O.StrictMode,{children:f.jsx(Cy,{children:f.jsx(FN,{})})}));
