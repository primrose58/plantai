(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function rN(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var fy={exports:{}},Su={};var Sw;function iN(){if(Sw)return Su;Sw=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:r,type:n,key:c,ref:s!==void 0?s:null,props:o}}return Su.Fragment=e,Su.jsx=t,Su.jsxs=t,Su}var Aw;function sN(){return Aw||(Aw=1,fy.exports=iN()),fy.exports}var b=sN(),my={exports:{}},ze={};var Iw;function aN(){if(Iw)return ze;Iw=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function w(q){return q===null||typeof q!="object"?null:(q=v&&q[v]||q["@@iterator"],typeof q=="function"?q:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,M={};function V(q,Q,ie){this.props=q,this.context=Q,this.refs=M,this.updater=ie||E}V.prototype.isReactComponent={},V.prototype.setState=function(q,Q){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,Q,"setState")},V.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function H(){}H.prototype=V.prototype;function F(q,Q,ie){this.props=q,this.context=Q,this.refs=M,this.updater=ie||E}var B=F.prototype=new H;B.constructor=F,D(B,V.prototype),B.isPureReactComponent=!0;var Y=Array.isArray;function U(){}var R={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function S(q,Q,ie){var se=ie.ref;return{$$typeof:r,type:q,key:Q,ref:se!==void 0?se:null,props:ie}}function I(q,Q){return S(q.type,Q,q.props)}function k(q){return typeof q=="object"&&q!==null&&q.$$typeof===r}function j(q){var Q={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ie){return Q[ie]})}var N=/\/+/g;function G(q,Q){return typeof q=="object"&&q!==null&&q.key!=null?j(""+q.key):Q.toString(36)}function J(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(U,U):(q.status="pending",q.then(function(Q){q.status==="pending"&&(q.status="fulfilled",q.value=Q)},function(Q){q.status==="pending"&&(q.status="rejected",q.reason=Q)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function P(q,Q,ie,se,ne){var _e=typeof q;(_e==="undefined"||_e==="boolean")&&(q=null);var Ae=!1;if(q===null)Ae=!0;else switch(_e){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(q.$$typeof){case r:case e:Ae=!0;break;case g:return Ae=q._init,P(Ae(q._payload),Q,ie,se,ne)}}if(Ae)return ne=ne(q),Ae=se===""?"."+G(q,0):se,Y(ne)?(ie="",Ae!=null&&(ie=Ae.replace(N,"$&/")+"/"),P(ne,Q,ie,"",function(et){return et})):ne!=null&&(k(ne)&&(ne=I(ne,ie+(ne.key==null||q&&q.key===ne.key?"":(""+ne.key).replace(N,"$&/")+"/")+Ae)),Q.push(ne)),1;Ae=0;var Pe=se===""?".":se+":";if(Y(q))for(var Ce=0;Ce<q.length;Ce++)se=q[Ce],_e=Pe+G(se,Ce),Ae+=P(se,Q,ie,_e,ne);else if(Ce=w(q),typeof Ce=="function")for(q=Ce.call(q),Ce=0;!(se=q.next()).done;)se=se.value,_e=Pe+G(se,Ce++),Ae+=P(se,Q,ie,_e,ne);else if(_e==="object"){if(typeof q.then=="function")return P(J(q),Q,ie,se,ne);throw Q=String(q),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function O(q,Q,ie){if(q==null)return q;var se=[],ne=0;return P(q,se,"","",function(_e){return Q.call(ie,_e,ne++)}),se}function ee(q){if(q._status===-1){var Q=q._result;Q=Q(),Q.then(function(ie){(q._status===0||q._status===-1)&&(q._status=1,q._result=ie)},function(ie){(q._status===0||q._status===-1)&&(q._status=2,q._result=ie)}),q._status===-1&&(q._status=0,q._result=Q)}if(q._status===1)return q._result.default;throw q._result}var W=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Z={map:O,forEach:function(q,Q,ie){O(q,function(){Q.apply(this,arguments)},ie)},count:function(q){var Q=0;return O(q,function(){Q++}),Q},toArray:function(q){return O(q,function(Q){return Q})||[]},only:function(q){if(!k(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return ze.Activity=y,ze.Children=Z,ze.Component=V,ze.Fragment=t,ze.Profiler=s,ze.PureComponent=F,ze.StrictMode=n,ze.Suspense=d,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ze.__COMPILER_RUNTIME={__proto__:null,c:function(q){return R.H.useMemoCache(q)}},ze.cache=function(q){return function(){return q.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(q,Q,ie){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var se=D({},q.props),ne=q.key;if(Q!=null)for(_e in Q.key!==void 0&&(ne=""+Q.key),Q)!T.call(Q,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&Q.ref===void 0||(se[_e]=Q[_e]);var _e=arguments.length-2;if(_e===1)se.children=ie;else if(1<_e){for(var Ae=Array(_e),Pe=0;Pe<_e;Pe++)Ae[Pe]=arguments[Pe+2];se.children=Ae}return S(q.type,ne,se)},ze.createContext=function(q){return q={$$typeof:c,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:o,_context:q},q},ze.createElement=function(q,Q,ie){var se,ne={},_e=null;if(Q!=null)for(se in Q.key!==void 0&&(_e=""+Q.key),Q)T.call(Q,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ne[se]=Q[se]);var Ae=arguments.length-2;if(Ae===1)ne.children=ie;else if(1<Ae){for(var Pe=Array(Ae),Ce=0;Ce<Ae;Ce++)Pe[Ce]=arguments[Ce+2];ne.children=Pe}if(q&&q.defaultProps)for(se in Ae=q.defaultProps,Ae)ne[se]===void 0&&(ne[se]=Ae[se]);return S(q,_e,ne)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(q){return{$$typeof:u,render:q}},ze.isValidElement=k,ze.lazy=function(q){return{$$typeof:g,_payload:{_status:-1,_result:q},_init:ee}},ze.memo=function(q,Q){return{$$typeof:f,type:q,compare:Q===void 0?null:Q}},ze.startTransition=function(q){var Q=R.T,ie={};R.T=ie;try{var se=q(),ne=R.S;ne!==null&&ne(ie,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(U,W)}catch(_e){W(_e)}finally{Q!==null&&ie.types!==null&&(Q.types=ie.types),R.T=Q}},ze.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ze.use=function(q){return R.H.use(q)},ze.useActionState=function(q,Q,ie){return R.H.useActionState(q,Q,ie)},ze.useCallback=function(q,Q){return R.H.useCallback(q,Q)},ze.useContext=function(q){return R.H.useContext(q)},ze.useDebugValue=function(){},ze.useDeferredValue=function(q,Q){return R.H.useDeferredValue(q,Q)},ze.useEffect=function(q,Q){return R.H.useEffect(q,Q)},ze.useEffectEvent=function(q){return R.H.useEffectEvent(q)},ze.useId=function(){return R.H.useId()},ze.useImperativeHandle=function(q,Q,ie){return R.H.useImperativeHandle(q,Q,ie)},ze.useInsertionEffect=function(q,Q){return R.H.useInsertionEffect(q,Q)},ze.useLayoutEffect=function(q,Q){return R.H.useLayoutEffect(q,Q)},ze.useMemo=function(q,Q){return R.H.useMemo(q,Q)},ze.useOptimistic=function(q,Q){return R.H.useOptimistic(q,Q)},ze.useReducer=function(q,Q,ie){return R.H.useReducer(q,Q,ie)},ze.useRef=function(q){return R.H.useRef(q)},ze.useState=function(q){return R.H.useState(q)},ze.useSyncExternalStore=function(q,Q,ie){return R.H.useSyncExternalStore(q,Q,ie)},ze.useTransition=function(){return R.H.useTransition()},ze.version="19.2.3",ze}var Rw;function Nm(){return Rw||(Rw=1,my.exports=aN()),my.exports}var $=Nm();const oN=rN($);var gy={exports:{}},Au={},py={exports:{}},yy={};var Cw;function lN(){return Cw||(Cw=1,(function(r){function e(P,O){var ee=P.length;P.push(O);e:for(;0<ee;){var W=ee-1>>>1,Z=P[W];if(0<s(Z,O))P[W]=O,P[ee]=Z,ee=W;else break e}}function t(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var O=P[0],ee=P.pop();if(ee!==O){P[0]=ee;e:for(var W=0,Z=P.length,q=Z>>>1;W<q;){var Q=2*(W+1)-1,ie=P[Q],se=Q+1,ne=P[se];if(0>s(ie,ee))se<Z&&0>s(ne,ie)?(P[W]=ne,P[se]=ee,W=se):(P[W]=ie,P[Q]=ee,W=Q);else if(se<Z&&0>s(ne,ee))P[W]=ne,P[se]=ee,W=se;else break e}}return O}function s(P,O){var ee=P.sortIndex-O.sortIndex;return ee!==0?ee:P.id-O.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var d=[],f=[],g=1,y=null,v=3,w=!1,E=!1,D=!1,M=!1,V=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function B(P){for(var O=t(f);O!==null;){if(O.callback===null)n(f);else if(O.startTime<=P)n(f),O.sortIndex=O.expirationTime,e(d,O);else break;O=t(f)}}function Y(P){if(D=!1,B(P),!E)if(t(d)!==null)E=!0,U||(U=!0,j());else{var O=t(f);O!==null&&J(Y,O.startTime-P)}}var U=!1,R=-1,T=5,S=-1;function I(){return M?!0:!(r.unstable_now()-S<T)}function k(){if(M=!1,U){var P=r.unstable_now();S=P;var O=!0;try{e:{E=!1,D&&(D=!1,H(R),R=-1),w=!0;var ee=v;try{t:{for(B(P),y=t(d);y!==null&&!(y.expirationTime>P&&I());){var W=y.callback;if(typeof W=="function"){y.callback=null,v=y.priorityLevel;var Z=W(y.expirationTime<=P);if(P=r.unstable_now(),typeof Z=="function"){y.callback=Z,B(P),O=!0;break t}y===t(d)&&n(d),B(P)}else n(d);y=t(d)}if(y!==null)O=!0;else{var q=t(f);q!==null&&J(Y,q.startTime-P),O=!1}}break e}finally{y=null,v=ee,w=!1}O=void 0}}finally{O?j():U=!1}}}var j;if(typeof F=="function")j=function(){F(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,G=N.port2;N.port1.onmessage=k,j=function(){G.postMessage(null)}}else j=function(){V(k,0)};function J(P,O){R=V(function(){P(r.unstable_now())},O)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(P){switch(v){case 1:case 2:case 3:var O=3;break;default:O=v}var ee=v;v=O;try{return P()}finally{v=ee}},r.unstable_requestPaint=function(){M=!0},r.unstable_runWithPriority=function(P,O){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ee=v;v=P;try{return O()}finally{v=ee}},r.unstable_scheduleCallback=function(P,O,ee){var W=r.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?W+ee:W):ee=W,P){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ee+Z,P={id:g++,callback:O,priorityLevel:P,startTime:ee,expirationTime:Z,sortIndex:-1},ee>W?(P.sortIndex=ee,e(f,P),t(d)===null&&P===t(f)&&(D?(H(R),R=-1):D=!0,J(Y,ee-W))):(P.sortIndex=Z,e(d,P),E||w||(E=!0,U||(U=!0,j()))),P},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(P){var O=v;return function(){var ee=v;v=O;try{return P.apply(this,arguments)}finally{v=ee}}}})(yy)),yy}var Nw;function cN(){return Nw||(Nw=1,py.exports=lN()),py.exports}var _y={exports:{}},Mn={};var kw;function uN(){if(kw)return Mn;kw=1;var r=Nm();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:f,implementation:g}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Mn.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,g)},Mn.flushSync=function(d){var f=c.T,g=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=f,n.p=g,n.d.f()}},Mn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},Mn.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Mn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:w}):g==="script"&&n.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Mn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},Mn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);n.d.L(d,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Mn.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},Mn.requestFormReset=function(d){n.d.r(d)},Mn.unstable_batchedUpdates=function(d,f){return d(f)},Mn.useFormState=function(d,f,g){return c.H.useFormState(d,f,g)},Mn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Mn.version="19.2.3",Mn}var Dw;function hN(){if(Dw)return _y.exports;Dw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),_y.exports=uN(),_y.exports}var Ow;function dN(){if(Ow)return Au;Ow=1;var r=cN(),e=Nm(),t=hN();function n(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function c(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(n(188));return a!==i?null:i}for(var l=i,h=a;;){var p=l.return;if(p===null)break;var _=p.alternate;if(_===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===_.child){for(_=p.child;_;){if(_===l)return d(p),i;if(_===h)return d(p),a;_=_.sibling}throw Error(n(188))}if(l.return!==h.return)l=p,h=_;else{for(var A=!1,L=p.child;L;){if(L===l){A=!0,l=p,h=_;break}if(L===h){A=!0,h=p,l=_;break}L=L.sibling}if(!A){for(L=_.child;L;){if(L===l){A=!0,l=_,h=p;break}if(L===h){A=!0,h=_,l=p;break}L=L.sibling}if(!A)throw Error(n(189))}}if(l.alternate!==h)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?i:a}function g(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=g(i),a!==null)return a;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),F=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function j(i){return i===null||typeof i!="object"?null:(i=k&&i[k]||i["@@iterator"],typeof i=="function"?i:null)}var N=Symbol.for("react.client.reference");function G(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===N?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case V:return"Profiler";case M:return"StrictMode";case Y:return"Suspense";case U:return"SuspenseList";case S:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case E:return"Portal";case F:return i.displayName||"Context";case H:return(i._context.displayName||"Context")+".Consumer";case B:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return a=i.displayName||null,a!==null?a:G(i.type)||"Memo";case T:a=i._payload,i=i._init;try{return G(i(a))}catch{}}return null}var J=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},W=[],Z=-1;function q(i){return{current:i}}function Q(i){0>Z||(i.current=W[Z],W[Z]=null,Z--)}function ie(i,a){Z++,W[Z]=i.current,i.current=a}var se=q(null),ne=q(null),_e=q(null),Ae=q(null);function Pe(i,a){switch(ie(_e,a),ie(ne,i),ie(se,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?Y1(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=Y1(a),i=Q1(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Q(se),ie(se,i)}function Ce(){Q(se),Q(ne),Q(_e)}function et(i){i.memoizedState!==null&&ie(Ae,i);var a=se.current,l=Q1(a,i.type);a!==l&&(ie(ne,i),ie(se,l))}function at(i){ne.current===i&&(Q(se),Q(ne)),Ae.current===i&&(Q(Ae),wu._currentValue=ee)}var ot,un;function Rt(i){if(ot===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);ot=a&&a[1]||"",un=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ot+i+un}var mt=!1;function Ct(i,a){if(!i||mt)return"";mt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(he){var ce=he}Reflect.construct(i,[],ge)}else{try{ge.call()}catch(he){ce=he}i.call(ge.prototype)}}else{try{throw Error()}catch(he){ce=he}(ge=i())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(he){if(he&&ce&&typeof he.stack=="string")return[he.stack,ce.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=h.DetermineComponentFrameRoot(),A=_[0],L=_[1];if(A&&L){var K=A.split(`
`),le=L.split(`
`);for(p=h=0;h<K.length&&!K[h].includes("DetermineComponentFrameRoot");)h++;for(;p<le.length&&!le[p].includes("DetermineComponentFrameRoot");)p++;if(h===K.length||p===le.length)for(h=K.length-1,p=le.length-1;1<=h&&0<=p&&K[h]!==le[p];)p--;for(;1<=h&&0<=p;h--,p--)if(K[h]!==le[p]){if(h!==1||p!==1)do if(h--,p--,0>p||K[h]!==le[p]){var fe=`
`+K[h].replace(" at new "," at ");return i.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",i.displayName)),fe}while(1<=h&&0<=p);break}}}finally{mt=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Rt(l):""}function it(i,a){switch(i.tag){case 26:case 27:case 5:return Rt(i.type);case 16:return Rt("Lazy");case 13:return i.child!==a&&a!==null?Rt("Suspense Fallback"):Rt("Suspense");case 19:return Rt("SuspenseList");case 0:case 15:return Ct(i.type,!1);case 11:return Ct(i.type.render,!1);case 1:return Ct(i.type,!0);case 31:return Rt("Activity");default:return""}}function st(i){try{var a="",l=null;do a+=it(i,l),l=i,i=i.return;while(i);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var $e=Object.prototype.hasOwnProperty,pe=r.unstable_scheduleCallback,Ee=r.unstable_cancelCallback,Be=r.unstable_shouldYield,Me=r.unstable_requestPaint,xe=r.unstable_now,tt=r.unstable_getCurrentPriorityLevel,gt=r.unstable_ImmediatePriority,Fn=r.unstable_UserBlockingPriority,ut=r.unstable_NormalPriority,Hn=r.unstable_LowPriority,Bt=r.unstable_IdlePriority,Dn=r.log,xn=r.unstable_setDisableYieldValue,Gt=null,Et=null;function Jt(i){if(typeof Dn=="function"&&xn(i),Et&&typeof Et.setStrictMode=="function")try{Et.setStrictMode(Gt,i)}catch{}}var Dt=Math.clz32?Math.clz32:Oa,Qo=Math.log,oi=Math.LN2;function Oa(i){return i>>>=0,i===0?32:31-(Qo(i)/oi|0)|0}var On=256,qi=262144,pt=4194304;function hn(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function En(i,a,l){var h=i.pendingLanes;if(h===0)return 0;var p=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var L=h&134217727;return L!==0?(h=L&~_,h!==0?p=hn(h):(A&=L,A!==0?p=hn(A):l||(l=L&~i,l!==0&&(p=hn(l))))):(L=h&~_,L!==0?p=hn(L):A!==0?p=hn(A):l||(l=h&~i,l!==0&&(p=hn(l)))),p===0?0:a!==0&&a!==p&&(a&_)===0&&(_=p&-p,l=a&-a,_>=l||_===32&&(l&4194048)!==0)?a:p}function Tn(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Wo(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xr(){var i=pt;return pt<<=1,(pt&62914560)===0&&(pt=4194304),i}function pn(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Ma(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function _g(i,a,l,h,p,_){var A=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var L=i.entanglements,K=i.expirationTimes,le=i.hiddenUpdates;for(l=A&~l;0<l;){var fe=31-Dt(l),ge=1<<fe;L[fe]=0,K[fe]=-1;var ce=le[fe];if(ce!==null)for(le[fe]=null,fe=0;fe<ce.length;fe++){var he=ce[fe];he!==null&&(he.lane&=-536870913)}l&=~ge}h!==0&&Pa(i,h,0),_!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~a))}function Pa(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var h=31-Dt(a);i.entangledLanes|=a,i.entanglements[h]=i.entanglements[h]|1073741824|l&261930}function Ac(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var h=31-Dt(l),p=1<<h;p&a|i[h]&a&&(i[h]|=a),l&=~p}}function Ic(i,a){var l=a&-a;return l=(l&42)!==0?1:ja(l),(l&(i.suspendedLanes|a))!==0?0:l}function ja(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function $i(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function $h(){var i=O.p;return i!==0?i:(i=window.event,i===void 0?32:_w(i.type))}function Hr(i,a){var l=O.p;try{return O.p=i,a()}finally{O.p=l}}var qr=Math.random().toString(36).slice(2),Zt="__reactFiber$"+qr,yn="__reactProps$"+qr,li="__reactContainer$"+qr,Xo="__reactEvents$"+qr,vg="__reactListeners$"+qr,Gh="__reactHandles$"+qr,Kh="__reactResources$"+qr,ci="__reactMarker$"+qr;function Jo(i){delete i[Zt],delete i[yn],delete i[Xo],delete i[vg],delete i[Gh]}function ui(i){var a=i[Zt];if(a)return a;for(var l=i.parentNode;l;){if(a=l[li]||l[Zt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=nw(i);i!==null;){if(l=i[Zt])return l;i=nw(i)}return a}i=l,l=i.parentNode}return null}function Er(i){if(i=i[Zt]||i[li]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function or(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(n(33))}function hi(i){var a=i[Kh];return a||(a=i[Kh]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function en(i){i[ci]=!0}var Rc=new Set,Cc={};function di(i,a){fi(i,a),fi(i+"Capture",a)}function fi(i,a){for(Cc[i]=a,i=0;i<a.length;i++)Rc.add(a[i])}var Nc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kc={},Dc={};function Yh(i){return $e.call(Dc,i)?!0:$e.call(kc,i)?!1:Nc.test(i)?Dc[i]=!0:(kc[i]=!0,!1)}function Zo(i,a,l){if(Yh(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function lr(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function tn(i,a,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+h)}}function _n(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Rs(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Oc(i,a,l){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var p=h.get,_=h.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return p.call(this)},set:function(A){l=""+A,_.call(this,A)}}),Object.defineProperty(i,a,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function yt(i){if(!i._valueTracker){var a=Rs(i)?"checked":"value";i._valueTracker=Oc(i,a,""+i[a])}}function Va(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return i&&(h=Rs(i)?i.checked?"true":"false":i.value),i=h,i!==l?(a.setValue(i),!0):!1}function mi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var La=/[\n"\\]/g;function Xn(i){return i.replace(La,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function el(i,a,l,h,p,_,A,L){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),a!=null?A==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+_n(a)):i.value!==""+_n(a)&&(i.value=""+_n(a)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),a!=null?Mc(i,A,_n(a)):l!=null?Mc(i,A,_n(l)):h!=null&&i.removeAttribute("value"),p==null&&_!=null&&(i.defaultChecked=!!_),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?i.name=""+_n(L):i.removeAttribute("name")}function Qh(i,a,l,h,p,_,A,L){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),a!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||a!=null)){yt(i);return}l=l!=null?""+_n(l):"",a=a!=null?""+_n(a):l,L||a===i.value||(i.value=a),i.defaultValue=a}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=L?i.checked:!!h,i.defaultChecked=!!h,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),yt(i)}function Mc(i,a,l){a==="number"&&mi(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Cs(i,a,l,h){if(i=i.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=a.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+_n(l),a=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}a!==null||i[p].disabled||(a=i[p])}a!==null&&(a.selected=!0)}}function Wh(i,a,l){if(a!=null&&(a=""+_n(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+_n(l):""}function Ns(i,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(n(92));if(J(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=_n(a),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h),yt(i)}function Jn(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Xh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pc(i,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":h?i.setProperty(a,l):typeof l!="number"||l===0||Xh.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function jc(i,a,l){if(a!=null&&typeof a!="object")throw Error(n(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var p in a)h=a[p],a.hasOwnProperty(p)&&l[p]!==h&&Pc(i,p,h)}else for(var _ in a)a.hasOwnProperty(_)&&Pc(i,_,a[_])}function tl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ks=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nl(i){return ks.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function $r(){}var Vc=null;function Tr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ds=null,gi=null;function Ua(i){var a=Er(i);if(a&&(i=a.stateNode)){var l=i[yn]||null;e:switch(i=a.stateNode,a.type){case"input":if(el(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Xn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==i&&h.form===i.form){var p=h[yn]||null;if(!p)throw Error(n(90));el(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===i.form&&Va(h)}break e;case"textarea":Wh(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Cs(i,!!l.multiple,a,!1)}}}var rl=!1;function Os(i,a,l){if(rl)return i(a,l);rl=!0;try{var h=i(a);return h}finally{if(rl=!1,(Ds!==null||gi!==null)&&($d(),Ds&&(a=Ds,i=gi,gi=Ds=null,Ua(a),i)))for(a=0;a<i.length;a++)Ua(i[a])}}function Gr(i,a){var l=i.stateNode;if(l===null)return null;var h=l[yn]||null;if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(n(231,a,typeof l));return l}var Sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),za=!1;if(Sr)try{var Tt={};Object.defineProperty(Tt,"passive",{get:function(){za=!0}}),window.addEventListener("test",Tt,Tt),window.removeEventListener("test",Tt,Tt)}catch{za=!1}var pi=null,Lc=null,Ba=null;function Uc(){if(Ba)return Ba;var i,a=Lc,l=a.length,h,p="value"in pi?pi.value:pi.textContent,_=p.length;for(i=0;i<l&&a[i]===p[i];i++);var A=l-i;for(h=1;h<=A&&a[l-h]===p[_-h];h++);return Ba=p.slice(i,1<h?1-h:void 0)}function Fa(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Gi(){return!0}function Kr(){return!1}function Sn(i){function a(l,h,p,_,A){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(l=i[L],this[L]=l?l(_):_[L]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Gi:Kr,this.isPropagationStopped=Kr,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),a}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yi=Sn(Ki),Ms=y({},Ki,{view:0,detail:0}),zc=Sn(Ms),Ps,il,_i,sl=y({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:js,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==_i&&(_i&&i.type==="mousemove"?(Ps=i.screenX-_i.screenX,il=i.screenY-_i.screenY):il=Ps=0,_i=i),Ps)},movementY:function(i){return"movementY"in i?i.movementY:il}}),Bc=Sn(sl),Ha=y({},sl,{dataTransfer:0}),Zh=Sn(Ha),ed=y({},Ms,{relatedTarget:0}),qa=Sn(ed),Fc=y({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),td=Sn(Fc),al=y({},Ki,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),nd=Sn(al),rd=y({},Ki,{data:0}),vi=Sn(rd),id={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ad={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function od(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=ad[i])?!!a[i]:!1}function js(){return od}var qn=y({},Ms,{key:function(i){if(i.key){var a=id[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Fa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?sd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:js,charCode:function(i){return i.type==="keypress"?Fa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Fa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ld=Sn(qn),cd=y({},sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yi=Sn(cd),m=y({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:js}),x=Sn(m),C=y({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),z=Sn(C),ae=y({},sl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ue=Sn(ae),be=y({},Ki,{newState:0,oldState:0}),He=Sn(be),Kt=[9,13,27,32],ht=Sr&&"CompositionEvent"in window,Pt=null;Sr&&"documentMode"in document&&(Pt=document.documentMode);var Ar=Sr&&"TextEvent"in window&&!Pt,bi=Sr&&(!ht||Pt&&8<Pt&&11>=Pt),Yr=" ",Qr=!1;function $a(i,a){switch(i){case"keyup":return Kt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ol(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ll=!1;function IR(i,a){switch(i){case"compositionend":return ol(a);case"keypress":return a.which!==32?null:(Qr=!0,Yr);case"textInput":return i=a.data,i===Yr&&Qr?null:i;default:return null}}function RR(i,a){if(ll)return i==="compositionend"||!ht&&$a(i,a)?(i=Uc(),Ba=Lc=pi=null,ll=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return bi&&a.locale!=="ko"?null:a.data;default:return null}}var CR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!CR[i.type]:a==="textarea"}function av(i,a,l,h){Ds?gi?gi.push(h):gi=[h]:Ds=h,a=Jd(a,"onChange"),0<a.length&&(l=new yi("onChange","change",null,l,h),i.push({event:l,listeners:a}))}var Hc=null,qc=null;function NR(i){F1(i,0)}function ud(i){var a=or(i);if(Va(a))return i}function ov(i,a){if(i==="change")return a}var lv=!1;if(Sr){var bg;if(Sr){var wg="oninput"in document;if(!wg){var cv=document.createElement("div");cv.setAttribute("oninput","return;"),wg=typeof cv.oninput=="function"}bg=wg}else bg=!1;lv=bg&&(!document.documentMode||9<document.documentMode)}function uv(){Hc&&(Hc.detachEvent("onpropertychange",hv),qc=Hc=null)}function hv(i){if(i.propertyName==="value"&&ud(qc)){var a=[];av(a,qc,i,Tr(i)),Os(NR,a)}}function kR(i,a,l){i==="focusin"?(uv(),Hc=a,qc=l,Hc.attachEvent("onpropertychange",hv)):i==="focusout"&&uv()}function DR(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ud(qc)}function OR(i,a){if(i==="click")return ud(a)}function MR(i,a){if(i==="input"||i==="change")return ud(a)}function PR(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var cr=typeof Object.is=="function"?Object.is:PR;function $c(i,a){if(cr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!$e.call(a,p)||!cr(i[p],a[p]))return!1}return!0}function dv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function fv(i,a){var l=dv(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=a&&h>=a)return{node:l,offset:a-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=dv(l)}}function mv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?mv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function gv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=mi(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=mi(i.document)}return a}function xg(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var jR=Sr&&"documentMode"in document&&11>=document.documentMode,cl=null,Eg=null,Gc=null,Tg=!1;function pv(i,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Tg||cl==null||cl!==mi(h)||(h=cl,"selectionStart"in h&&xg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Gc&&$c(Gc,h)||(Gc=h,h=Jd(Eg,"onSelect"),0<h.length&&(a=new yi("onSelect","select",null,a,l),i.push({event:a,listeners:h}),a.target=cl)))}function Ga(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var ul={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionrun:Ga("Transition","TransitionRun"),transitionstart:Ga("Transition","TransitionStart"),transitioncancel:Ga("Transition","TransitionCancel"),transitionend:Ga("Transition","TransitionEnd")},Sg={},yv={};Sr&&(yv=document.createElement("div").style,"AnimationEvent"in window||(delete ul.animationend.animation,delete ul.animationiteration.animation,delete ul.animationstart.animation),"TransitionEvent"in window||delete ul.transitionend.transition);function Ka(i){if(Sg[i])return Sg[i];if(!ul[i])return i;var a=ul[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in yv)return Sg[i]=a[l];return i}var _v=Ka("animationend"),vv=Ka("animationiteration"),bv=Ka("animationstart"),VR=Ka("transitionrun"),LR=Ka("transitionstart"),UR=Ka("transitioncancel"),wv=Ka("transitionend"),xv=new Map,Ag="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ag.push("scrollEnd");function Wr(i,a){xv.set(i,a),di(a,[i])}var hd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Ir=[],hl=0,Ig=0;function dd(){for(var i=hl,a=Ig=hl=0;a<i;){var l=Ir[a];Ir[a++]=null;var h=Ir[a];Ir[a++]=null;var p=Ir[a];Ir[a++]=null;var _=Ir[a];if(Ir[a++]=null,h!==null&&p!==null){var A=h.pending;A===null?p.next=p:(p.next=A.next,A.next=p),h.pending=p}_!==0&&Ev(l,p,_)}}function fd(i,a,l,h){Ir[hl++]=i,Ir[hl++]=a,Ir[hl++]=l,Ir[hl++]=h,Ig|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Rg(i,a,l,h){return fd(i,a,l,h),md(i)}function Ya(i,a){return fd(i,null,null,a),md(i)}function Ev(i,a,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var p=!1,_=i.return;_!==null;)_.childLanes|=l,h=_.alternate,h!==null&&(h.childLanes|=l),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(p=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,p&&a!==null&&(p=31-Dt(l),i=_.hiddenUpdates,h=i[p],h===null?i[p]=[a]:h.push(a),a.lane=l|536870912),_):null}function md(i){if(50<mu)throw mu=0,Vp=null,Error(n(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var dl={};function zR(i,a,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(i,a,l,h){return new zR(i,a,l,h)}function Cg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Qi(i,a){var l=i.alternate;return l===null?(l=ur(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function Tv(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function gd(i,a,l,h,p,_){var A=0;if(h=i,typeof i=="function")Cg(i)&&(A=1);else if(typeof i=="string")A=$C(i,l,se.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case S:return i=ur(31,l,a,p),i.elementType=S,i.lanes=_,i;case D:return Qa(l.children,p,_,a);case M:A=8,p|=24;break;case V:return i=ur(12,l,a,p|2),i.elementType=V,i.lanes=_,i;case Y:return i=ur(13,l,a,p),i.elementType=Y,i.lanes=_,i;case U:return i=ur(19,l,a,p),i.elementType=U,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case F:A=10;break e;case H:A=9;break e;case B:A=11;break e;case R:A=14;break e;case T:A=16,h=null;break e}A=29,l=Error(n(130,i===null?"null":typeof i,"")),h=null}return a=ur(A,l,a,p),a.elementType=i,a.type=h,a.lanes=_,a}function Qa(i,a,l,h){return i=ur(7,i,h,a),i.lanes=l,i}function Ng(i,a,l){return i=ur(6,i,null,a),i.lanes=l,i}function Sv(i){var a=ur(18,null,null,0);return a.stateNode=i,a}function kg(i,a,l){return a=ur(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Av=new WeakMap;function Rr(i,a){if(typeof i=="object"&&i!==null){var l=Av.get(i);return l!==void 0?l:(a={value:i,source:a,stack:st(a)},Av.set(i,a),a)}return{value:i,source:a,stack:st(a)}}var fl=[],ml=0,pd=null,Kc=0,Cr=[],Nr=0,Vs=null,wi=1,xi="";function Wi(i,a){fl[ml++]=Kc,fl[ml++]=pd,pd=i,Kc=a}function Iv(i,a,l){Cr[Nr++]=wi,Cr[Nr++]=xi,Cr[Nr++]=Vs,Vs=i;var h=wi;i=xi;var p=32-Dt(h)-1;h&=~(1<<p),l+=1;var _=32-Dt(a)+p;if(30<_){var A=p-p%5;_=(h&(1<<A)-1).toString(32),h>>=A,p-=A,wi=1<<32-Dt(a)+p|l<<p|h,xi=_+i}else wi=1<<_|l<<p|h,xi=i}function Dg(i){i.return!==null&&(Wi(i,1),Iv(i,1,0))}function Og(i){for(;i===pd;)pd=fl[--ml],fl[ml]=null,Kc=fl[--ml],fl[ml]=null;for(;i===Vs;)Vs=Cr[--Nr],Cr[Nr]=null,xi=Cr[--Nr],Cr[Nr]=null,wi=Cr[--Nr],Cr[Nr]=null}function Rv(i,a){Cr[Nr++]=wi,Cr[Nr++]=xi,Cr[Nr++]=Vs,wi=a.id,xi=a.overflow,Vs=i}var An=null,Ot=null,nt=!1,Ls=null,kr=!1,Mg=Error(n(519));function Us(i){var a=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yc(Rr(a,i)),Mg}function Cv(i){var a=i.stateNode,l=i.type,h=i.memoizedProps;switch(a[Zt]=i,a[yn]=h,l){case"dialog":Qe("cancel",a),Qe("close",a);break;case"iframe":case"object":case"embed":Qe("load",a);break;case"video":case"audio":for(l=0;l<pu.length;l++)Qe(pu[l],a);break;case"source":Qe("error",a);break;case"img":case"image":case"link":Qe("error",a),Qe("load",a);break;case"details":Qe("toggle",a);break;case"input":Qe("invalid",a),Qh(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Qe("invalid",a);break;case"textarea":Qe("invalid",a),Ns(a,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||G1(a.textContent,l)?(h.popover!=null&&(Qe("beforetoggle",a),Qe("toggle",a)),h.onScroll!=null&&Qe("scroll",a),h.onScrollEnd!=null&&Qe("scrollend",a),h.onClick!=null&&(a.onclick=$r),a=!0):a=!1,a||Us(i,!0)}function Nv(i){for(An=i.return;An;)switch(An.tag){case 5:case 31:case 13:kr=!1;return;case 27:case 3:kr=!0;return;default:An=An.return}}function gl(i){if(i!==An)return!1;if(!nt)return Nv(i),nt=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Jp(i.type,i.memoizedProps)),l=!l),l&&Ot&&Us(i),Nv(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Ot=tw(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Ot=tw(i)}else a===27?(a=Ot,Zs(i.type)?(i=ry,ry=null,Ot=i):Ot=a):Ot=An?Or(i.stateNode.nextSibling):null;return!0}function Wa(){Ot=An=null,nt=!1}function Pg(){var i=Ls;return i!==null&&(nr===null?nr=i:nr.push.apply(nr,i),Ls=null),i}function Yc(i){Ls===null?Ls=[i]:Ls.push(i)}var jg=q(null),Xa=null,Xi=null;function zs(i,a,l){ie(jg,a._currentValue),a._currentValue=l}function Ji(i){i._currentValue=jg.current,Q(jg)}function Vg(i,a,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),i===l)break;i=i.return}}function Lg(i,a,l,h){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var _=p.dependencies;if(_!==null){var A=p.child;_=_.firstContext;e:for(;_!==null;){var L=_;_=p;for(var K=0;K<a.length;K++)if(L.context===a[K]){_.lanes|=l,L=_.alternate,L!==null&&(L.lanes|=l),Vg(_.return,l,i),h||(A=null);break e}_=L.next}}else if(p.tag===18){if(A=p.return,A===null)throw Error(n(341));A.lanes|=l,_=A.alternate,_!==null&&(_.lanes|=l),Vg(A,l,i),A=null}else A=p.child;if(A!==null)A.return=p;else for(A=p;A!==null;){if(A===i){A=null;break}if(p=A.sibling,p!==null){p.return=A.return,A=p;break}A=A.return}p=A}}function pl(i,a,l,h){i=null;for(var p=a,_=!1;p!==null;){if(!_){if((p.flags&524288)!==0)_=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var A=p.alternate;if(A===null)throw Error(n(387));if(A=A.memoizedProps,A!==null){var L=p.type;cr(p.pendingProps.value,A.value)||(i!==null?i.push(L):i=[L])}}else if(p===Ae.current){if(A=p.alternate,A===null)throw Error(n(387));A.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(wu):i=[wu])}p=p.return}i!==null&&Lg(a,i,l,h),a.flags|=262144}function yd(i){for(i=i.firstContext;i!==null;){if(!cr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ja(i){Xa=i,Xi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function In(i){return kv(Xa,i)}function _d(i,a){return Xa===null&&Ja(i),kv(i,a)}function kv(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Xi===null){if(i===null)throw Error(n(308));Xi=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Xi=Xi.next=a;return l}var BR=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},FR=r.unstable_scheduleCallback,HR=r.unstable_NormalPriority,nn={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ug(){return{controller:new BR,data:new Map,refCount:0}}function Qc(i){i.refCount--,i.refCount===0&&FR(HR,function(){i.controller.abort()})}var Wc=null,zg=0,yl=0,_l=null;function qR(i,a){if(Wc===null){var l=Wc=[];zg=0,yl=Hp(),_l={status:"pending",value:void 0,then:function(h){l.push(h)}}}return zg++,a.then(Dv,Dv),a}function Dv(){if(--zg===0&&Wc!==null){_l!==null&&(_l.status="fulfilled");var i=Wc;Wc=null,yl=0,_l=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function $R(i,a){var l=[],h={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return i.then(function(){h.status="fulfilled",h.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(h.status="rejected",h.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),h}var Ov=P.S;P.S=function(i,a){p1=xe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&qR(i,a),Ov!==null&&Ov(i,a)};var Za=q(null);function Bg(){var i=Za.current;return i!==null?i:Nt.pooledCache}function vd(i,a){a===null?ie(Za,Za.current):ie(Za,a.pool)}function Mv(){var i=Bg();return i===null?null:{parent:nn._currentValue,pool:i}}var vl=Error(n(460)),Fg=Error(n(474)),bd=Error(n(542)),wd={then:function(){}};function Pv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function jv(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then($r,$r),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Lv(i),i;default:if(typeof a.status=="string")a.then($r,$r);else{if(i=Nt,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=a,i.status="pending",i.then(function(h){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=h}},function(h){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Lv(i),i}throw to=a,vl}}function eo(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(to=l,vl):l}}var to=null;function Vv(){if(to===null)throw Error(n(459));var i=to;return to=null,i}function Lv(i){if(i===vl||i===bd)throw Error(n(483))}var bl=null,Xc=0;function xd(i){var a=Xc;return Xc+=1,bl===null&&(bl=[]),jv(bl,i,a)}function Jc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Ed(i,a){throw a.$$typeof===v?Error(n(525)):(i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Uv(i){function a(te,X){if(i){var oe=te.deletions;oe===null?(te.deletions=[X],te.flags|=16):oe.push(X)}}function l(te,X){if(!i)return null;for(;X!==null;)a(te,X),X=X.sibling;return null}function h(te){for(var X=new Map;te!==null;)te.key!==null?X.set(te.key,te):X.set(te.index,te),te=te.sibling;return X}function p(te,X){return te=Qi(te,X),te.index=0,te.sibling=null,te}function _(te,X,oe){return te.index=oe,i?(oe=te.alternate,oe!==null?(oe=oe.index,oe<X?(te.flags|=67108866,X):oe):(te.flags|=67108866,X)):(te.flags|=1048576,X)}function A(te){return i&&te.alternate===null&&(te.flags|=67108866),te}function L(te,X,oe,me){return X===null||X.tag!==6?(X=Ng(oe,te.mode,me),X.return=te,X):(X=p(X,oe),X.return=te,X)}function K(te,X,oe,me){var Ne=oe.type;return Ne===D?fe(te,X,oe.props.children,me,oe.key):X!==null&&(X.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===T&&eo(Ne)===X.type)?(X=p(X,oe.props),Jc(X,oe),X.return=te,X):(X=gd(oe.type,oe.key,oe.props,null,te.mode,me),Jc(X,oe),X.return=te,X)}function le(te,X,oe,me){return X===null||X.tag!==4||X.stateNode.containerInfo!==oe.containerInfo||X.stateNode.implementation!==oe.implementation?(X=kg(oe,te.mode,me),X.return=te,X):(X=p(X,oe.children||[]),X.return=te,X)}function fe(te,X,oe,me,Ne){return X===null||X.tag!==7?(X=Qa(oe,te.mode,me,Ne),X.return=te,X):(X=p(X,oe),X.return=te,X)}function ge(te,X,oe){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=Ng(""+X,te.mode,oe),X.return=te,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case w:return oe=gd(X.type,X.key,X.props,null,te.mode,oe),Jc(oe,X),oe.return=te,oe;case E:return X=kg(X,te.mode,oe),X.return=te,X;case T:return X=eo(X),ge(te,X,oe)}if(J(X)||j(X))return X=Qa(X,te.mode,oe,null),X.return=te,X;if(typeof X.then=="function")return ge(te,xd(X),oe);if(X.$$typeof===F)return ge(te,_d(te,X),oe);Ed(te,X)}return null}function ce(te,X,oe,me){var Ne=X!==null?X.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Ne!==null?null:L(te,X,""+oe,me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:return oe.key===Ne?K(te,X,oe,me):null;case E:return oe.key===Ne?le(te,X,oe,me):null;case T:return oe=eo(oe),ce(te,X,oe,me)}if(J(oe)||j(oe))return Ne!==null?null:fe(te,X,oe,me,null);if(typeof oe.then=="function")return ce(te,X,xd(oe),me);if(oe.$$typeof===F)return ce(te,X,_d(te,oe),me);Ed(te,oe)}return null}function he(te,X,oe,me,Ne){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return te=te.get(oe)||null,L(X,te,""+me,Ne);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case w:return te=te.get(me.key===null?oe:me.key)||null,K(X,te,me,Ne);case E:return te=te.get(me.key===null?oe:me.key)||null,le(X,te,me,Ne);case T:return me=eo(me),he(te,X,oe,me,Ne)}if(J(me)||j(me))return te=te.get(oe)||null,fe(X,te,me,Ne,null);if(typeof me.then=="function")return he(te,X,oe,xd(me),Ne);if(me.$$typeof===F)return he(te,X,oe,_d(X,me),Ne);Ed(X,me)}return null}function Te(te,X,oe,me){for(var Ne=null,lt=null,Ie=X,Ge=X=0,Xe=null;Ie!==null&&Ge<oe.length;Ge++){Ie.index>Ge?(Xe=Ie,Ie=null):Xe=Ie.sibling;var ct=ce(te,Ie,oe[Ge],me);if(ct===null){Ie===null&&(Ie=Xe);break}i&&Ie&&ct.alternate===null&&a(te,Ie),X=_(ct,X,Ge),lt===null?Ne=ct:lt.sibling=ct,lt=ct,Ie=Xe}if(Ge===oe.length)return l(te,Ie),nt&&Wi(te,Ge),Ne;if(Ie===null){for(;Ge<oe.length;Ge++)Ie=ge(te,oe[Ge],me),Ie!==null&&(X=_(Ie,X,Ge),lt===null?Ne=Ie:lt.sibling=Ie,lt=Ie);return nt&&Wi(te,Ge),Ne}for(Ie=h(Ie);Ge<oe.length;Ge++)Xe=he(Ie,te,Ge,oe[Ge],me),Xe!==null&&(i&&Xe.alternate!==null&&Ie.delete(Xe.key===null?Ge:Xe.key),X=_(Xe,X,Ge),lt===null?Ne=Xe:lt.sibling=Xe,lt=Xe);return i&&Ie.forEach(function(ia){return a(te,ia)}),nt&&Wi(te,Ge),Ne}function De(te,X,oe,me){if(oe==null)throw Error(n(151));for(var Ne=null,lt=null,Ie=X,Ge=X=0,Xe=null,ct=oe.next();Ie!==null&&!ct.done;Ge++,ct=oe.next()){Ie.index>Ge?(Xe=Ie,Ie=null):Xe=Ie.sibling;var ia=ce(te,Ie,ct.value,me);if(ia===null){Ie===null&&(Ie=Xe);break}i&&Ie&&ia.alternate===null&&a(te,Ie),X=_(ia,X,Ge),lt===null?Ne=ia:lt.sibling=ia,lt=ia,Ie=Xe}if(ct.done)return l(te,Ie),nt&&Wi(te,Ge),Ne;if(Ie===null){for(;!ct.done;Ge++,ct=oe.next())ct=ge(te,ct.value,me),ct!==null&&(X=_(ct,X,Ge),lt===null?Ne=ct:lt.sibling=ct,lt=ct);return nt&&Wi(te,Ge),Ne}for(Ie=h(Ie);!ct.done;Ge++,ct=oe.next())ct=he(Ie,te,Ge,ct.value,me),ct!==null&&(i&&ct.alternate!==null&&Ie.delete(ct.key===null?Ge:ct.key),X=_(ct,X,Ge),lt===null?Ne=ct:lt.sibling=ct,lt=ct);return i&&Ie.forEach(function(nN){return a(te,nN)}),nt&&Wi(te,Ge),Ne}function It(te,X,oe,me){if(typeof oe=="object"&&oe!==null&&oe.type===D&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:e:{for(var Ne=oe.key;X!==null;){if(X.key===Ne){if(Ne=oe.type,Ne===D){if(X.tag===7){l(te,X.sibling),me=p(X,oe.props.children),me.return=te,te=me;break e}}else if(X.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===T&&eo(Ne)===X.type){l(te,X.sibling),me=p(X,oe.props),Jc(me,oe),me.return=te,te=me;break e}l(te,X);break}else a(te,X);X=X.sibling}oe.type===D?(me=Qa(oe.props.children,te.mode,me,oe.key),me.return=te,te=me):(me=gd(oe.type,oe.key,oe.props,null,te.mode,me),Jc(me,oe),me.return=te,te=me)}return A(te);case E:e:{for(Ne=oe.key;X!==null;){if(X.key===Ne)if(X.tag===4&&X.stateNode.containerInfo===oe.containerInfo&&X.stateNode.implementation===oe.implementation){l(te,X.sibling),me=p(X,oe.children||[]),me.return=te,te=me;break e}else{l(te,X);break}else a(te,X);X=X.sibling}me=kg(oe,te.mode,me),me.return=te,te=me}return A(te);case T:return oe=eo(oe),It(te,X,oe,me)}if(J(oe))return Te(te,X,oe,me);if(j(oe)){if(Ne=j(oe),typeof Ne!="function")throw Error(n(150));return oe=Ne.call(oe),De(te,X,oe,me)}if(typeof oe.then=="function")return It(te,X,xd(oe),me);if(oe.$$typeof===F)return It(te,X,_d(te,oe),me);Ed(te,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,X!==null&&X.tag===6?(l(te,X.sibling),me=p(X,oe),me.return=te,te=me):(l(te,X),me=Ng(oe,te.mode,me),me.return=te,te=me),A(te)):l(te,X)}return function(te,X,oe,me){try{Xc=0;var Ne=It(te,X,oe,me);return bl=null,Ne}catch(Ie){if(Ie===vl||Ie===bd)throw Ie;var lt=ur(29,Ie,null,te.mode);return lt.lanes=me,lt.return=te,lt}finally{}}}var no=Uv(!0),zv=Uv(!1),Bs=!1;function Hg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Fs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Hs(i,a,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(dt&2)!==0){var p=h.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),h.pending=a,a=md(i),Ev(i,null,l),a}return fd(i,h,a,l),md(i)}function Zc(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Ac(i,l)}}function $g(i,a){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?p=_=A:_=_.next=A,l=l.next}while(l!==null);_===null?p=_=a:_=_.next=a}else p=_=a;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:_,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Gg=!1;function eu(){if(Gg){var i=_l;if(i!==null)throw i}}function tu(i,a,l,h){Gg=!1;var p=i.updateQueue;Bs=!1;var _=p.firstBaseUpdate,A=p.lastBaseUpdate,L=p.shared.pending;if(L!==null){p.shared.pending=null;var K=L,le=K.next;K.next=null,A===null?_=le:A.next=le,A=K;var fe=i.alternate;fe!==null&&(fe=fe.updateQueue,L=fe.lastBaseUpdate,L!==A&&(L===null?fe.firstBaseUpdate=le:L.next=le,fe.lastBaseUpdate=K))}if(_!==null){var ge=p.baseState;A=0,fe=le=K=null,L=_;do{var ce=L.lane&-536870913,he=ce!==L.lane;if(he?(We&ce)===ce:(h&ce)===ce){ce!==0&&ce===yl&&(Gg=!0),fe!==null&&(fe=fe.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Te=i,De=L;ce=a;var It=l;switch(De.tag){case 1:if(Te=De.payload,typeof Te=="function"){ge=Te.call(It,ge,ce);break e}ge=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=De.payload,ce=typeof Te=="function"?Te.call(It,ge,ce):Te,ce==null)break e;ge=y({},ge,ce);break e;case 2:Bs=!0}}ce=L.callback,ce!==null&&(i.flags|=64,he&&(i.flags|=8192),he=p.callbacks,he===null?p.callbacks=[ce]:he.push(ce))}else he={lane:ce,tag:L.tag,payload:L.payload,callback:L.callback,next:null},fe===null?(le=fe=he,K=ge):fe=fe.next=he,A|=ce;if(L=L.next,L===null){if(L=p.shared.pending,L===null)break;he=L,L=he.next,he.next=null,p.lastBaseUpdate=he,p.shared.pending=null}}while(!0);fe===null&&(K=ge),p.baseState=K,p.firstBaseUpdate=le,p.lastBaseUpdate=fe,_===null&&(p.shared.lanes=0),Ys|=A,i.lanes=A,i.memoizedState=ge}}function Bv(i,a){if(typeof i!="function")throw Error(n(191,i));i.call(a)}function Fv(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Bv(l[i],a)}var wl=q(null),Td=q(0);function Hv(i,a){i=os,ie(Td,i),ie(wl,a),os=i|a.baseLanes}function Kg(){ie(Td,os),ie(wl,wl.current)}function Yg(){os=Td.current,Q(wl),Q(Td)}var hr=q(null),Dr=null;function qs(i){var a=i.alternate;ie(Yt,Yt.current&1),ie(hr,i),Dr===null&&(a===null||wl.current!==null||a.memoizedState!==null)&&(Dr=i)}function Qg(i){ie(Yt,Yt.current),ie(hr,i),Dr===null&&(Dr=i)}function qv(i){i.tag===22?(ie(Yt,Yt.current),ie(hr,i),Dr===null&&(Dr=i)):$s()}function $s(){ie(Yt,Yt.current),ie(hr,hr.current)}function dr(i){Q(hr),Dr===i&&(Dr=null),Q(Yt)}var Yt=q(0);function Sd(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||ty(l)||ny(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Zi=0,qe=null,St=null,rn=null,Ad=!1,xl=!1,ro=!1,Id=0,nu=0,El=null,GR=0;function Ft(){throw Error(n(321))}function Wg(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!cr(i[l],a[l]))return!1;return!0}function Xg(i,a,l,h,p,_){return Zi=_,qe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,P.H=i===null||i.memoizedState===null?Ib:dp,ro=!1,_=l(h,p),ro=!1,xl&&(_=Gv(a,l,h,p)),$v(i),_}function $v(i){P.H=su;var a=St!==null&&St.next!==null;if(Zi=0,rn=St=qe=null,Ad=!1,nu=0,El=null,a)throw Error(n(300));i===null||sn||(i=i.dependencies,i!==null&&yd(i)&&(sn=!0))}function Gv(i,a,l,h){qe=i;var p=0;do{if(xl&&(El=null),nu=0,xl=!1,25<=p)throw Error(n(301));if(p+=1,rn=St=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}P.H=Rb,_=a(l,h)}while(xl);return _}function KR(){var i=P.H,a=i.useState()[0];return a=typeof a.then=="function"?ru(a):a,i=i.useState()[0],(St!==null?St.memoizedState:null)!==i&&(qe.flags|=1024),a}function Jg(){var i=Id!==0;return Id=0,i}function Zg(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function ep(i){if(Ad){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Ad=!1}Zi=0,rn=St=qe=null,xl=!1,nu=Id=0,El=null}function $n(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?qe.memoizedState=rn=i:rn=rn.next=i,rn}function Qt(){if(St===null){var i=qe.alternate;i=i!==null?i.memoizedState:null}else i=St.next;var a=rn===null?qe.memoizedState:rn.next;if(a!==null)rn=a,St=i;else{if(i===null)throw qe.alternate===null?Error(n(467)):Error(n(310));St=i,i={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},rn===null?qe.memoizedState=rn=i:rn=rn.next=i}return rn}function Rd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ru(i){var a=nu;return nu+=1,El===null&&(El=[]),i=jv(El,i,a),a=qe,(rn===null?a.memoizedState:rn.next)===null&&(a=a.alternate,P.H=a===null||a.memoizedState===null?Ib:dp),i}function Cd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ru(i);if(i.$$typeof===F)return In(i)}throw Error(n(438,String(i)))}function tp(i){var a=null,l=qe.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=qe.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Rd(),qe.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),h=0;h<i;h++)l[h]=I;return a.index++,l}function es(i,a){return typeof a=="function"?a(i):a}function Nd(i){var a=Qt();return np(a,St,i)}function np(i,a,l){var h=i.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=l;var p=i.baseQueue,_=h.pending;if(_!==null){if(p!==null){var A=p.next;p.next=_.next,_.next=A}a.baseQueue=p=_,h.pending=null}if(_=i.baseState,p===null)i.memoizedState=_;else{a=p.next;var L=A=null,K=null,le=a,fe=!1;do{var ge=le.lane&-536870913;if(ge!==le.lane?(We&ge)===ge:(Zi&ge)===ge){var ce=le.revertLane;if(ce===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ge===yl&&(fe=!0);else if((Zi&ce)===ce){le=le.next,ce===yl&&(fe=!0);continue}else ge={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(L=K=ge,A=_):K=K.next=ge,qe.lanes|=ce,Ys|=ce;ge=le.action,ro&&l(_,ge),_=le.hasEagerState?le.eagerState:l(_,ge)}else ce={lane:ge,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(L=K=ce,A=_):K=K.next=ce,qe.lanes|=ge,Ys|=ge;le=le.next}while(le!==null&&le!==a);if(K===null?A=_:K.next=L,!cr(_,i.memoizedState)&&(sn=!0,fe&&(l=_l,l!==null)))throw l;i.memoizedState=_,i.baseState=A,i.baseQueue=K,h.lastRenderedState=_}return p===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function rp(i){var a=Qt(),l=a.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,_=a.memoizedState;if(p!==null){l.pending=null;var A=p=p.next;do _=i(_,A.action),A=A.next;while(A!==p);cr(_,a.memoizedState)||(sn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),l.lastRenderedState=_}return[_,h]}function Kv(i,a,l){var h=qe,p=Qt(),_=nt;if(_){if(l===void 0)throw Error(n(407));l=l()}else l=a();var A=!cr((St||p).memoizedState,l);if(A&&(p.memoizedState=l,sn=!0),p=p.queue,ap(Wv.bind(null,h,p,i),[i]),p.getSnapshot!==a||A||rn!==null&&rn.memoizedState.tag&1){if(h.flags|=2048,Tl(9,{destroy:void 0},Qv.bind(null,h,p,l,a),null),Nt===null)throw Error(n(349));_||(Zi&127)!==0||Yv(h,a,l)}return l}function Yv(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=qe.updateQueue,a===null?(a=Rd(),qe.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function Qv(i,a,l,h){a.value=l,a.getSnapshot=h,Xv(a)&&Jv(i)}function Wv(i,a,l){return l(function(){Xv(a)&&Jv(i)})}function Xv(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!cr(i,l)}catch{return!0}}function Jv(i){var a=Ya(i,2);a!==null&&rr(a,i,2)}function ip(i){var a=$n();if(typeof i=="function"){var l=i;if(i=l(),ro){Jt(!0);try{l()}finally{Jt(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:i},a}function Zv(i,a,l,h){return i.baseState=l,np(i,St,typeof h=="function"?h:es)}function YR(i,a,l,h,p){if(Od(i))throw Error(n(485));if(i=a.action,i!==null){var _={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};P.T!==null?l(!0):_.isTransition=!1,h(_),l=a.pending,l===null?(_.next=a.pending=_,eb(a,_)):(_.next=l.next,a.pending=l.next=_)}}function eb(i,a){var l=a.action,h=a.payload,p=i.state;if(a.isTransition){var _=P.T,A={};P.T=A;try{var L=l(p,h),K=P.S;K!==null&&K(A,L),tb(i,a,L)}catch(le){sp(i,a,le)}finally{_!==null&&A.types!==null&&(_.types=A.types),P.T=_}}else try{_=l(p,h),tb(i,a,_)}catch(le){sp(i,a,le)}}function tb(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){nb(i,a,h)},function(h){return sp(i,a,h)}):nb(i,a,l)}function nb(i,a,l){a.status="fulfilled",a.value=l,rb(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,eb(i,l)))}function sp(i,a,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,rb(a),a=a.next;while(a!==h)}i.action=null}function rb(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function ib(i,a){return a}function sb(i,a){if(nt){var l=Nt.formState;if(l!==null){e:{var h=qe;if(nt){if(Ot){t:{for(var p=Ot,_=kr;p.nodeType!==8;){if(!_){p=null;break t}if(p=Or(p.nextSibling),p===null){p=null;break t}}_=p.data,p=_==="F!"||_==="F"?p:null}if(p){Ot=Or(p.nextSibling),h=p.data==="F!";break e}}Us(h)}h=!1}h&&(a=l[0])}}return l=$n(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ib,lastRenderedState:a},l.queue=h,l=Tb.bind(null,qe,h),h.dispatch=l,h=ip(!1),_=hp.bind(null,qe,!1,h.queue),h=$n(),p={state:a,dispatch:null,action:i,pending:null},h.queue=p,l=YR.bind(null,qe,p,_,l),p.dispatch=l,h.memoizedState=i,[a,l,!1]}function ab(i){var a=Qt();return ob(a,St,i)}function ob(i,a,l){if(a=np(i,a,ib)[0],i=Nd(es)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=ru(a)}catch(A){throw A===vl?bd:A}else h=a;a=Qt();var p=a.queue,_=p.dispatch;return l!==a.memoizedState&&(qe.flags|=2048,Tl(9,{destroy:void 0},QR.bind(null,p,l),null)),[h,_,i]}function QR(i,a){i.action=a}function lb(i){var a=Qt(),l=St;if(l!==null)return ob(a,l,i);Qt(),a=a.memoizedState,l=Qt();var h=l.queue.dispatch;return l.memoizedState=i,[a,h,!1]}function Tl(i,a,l,h){return i={tag:i,create:l,deps:h,inst:a,next:null},a=qe.updateQueue,a===null&&(a=Rd(),qe.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,a.lastEffect=i),i}function cb(){return Qt().memoizedState}function kd(i,a,l,h){var p=$n();qe.flags|=i,p.memoizedState=Tl(1|a,{destroy:void 0},l,h===void 0?null:h)}function Dd(i,a,l,h){var p=Qt();h=h===void 0?null:h;var _=p.memoizedState.inst;St!==null&&h!==null&&Wg(h,St.memoizedState.deps)?p.memoizedState=Tl(a,_,l,h):(qe.flags|=i,p.memoizedState=Tl(1|a,_,l,h))}function ub(i,a){kd(8390656,8,i,a)}function ap(i,a){Dd(2048,8,i,a)}function WR(i){qe.flags|=4;var a=qe.updateQueue;if(a===null)a=Rd(),qe.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function hb(i){var a=Qt().memoizedState;return WR({ref:a,nextImpl:i}),function(){if((dt&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}function db(i,a){return Dd(4,2,i,a)}function fb(i,a){return Dd(4,4,i,a)}function mb(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function gb(i,a,l){l=l!=null?l.concat([i]):null,Dd(4,4,mb.bind(null,a,i),l)}function op(){}function pb(i,a){var l=Qt();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&Wg(a,h[1])?h[0]:(l.memoizedState=[i,a],i)}function yb(i,a){var l=Qt();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&Wg(a,h[1]))return h[0];if(h=i(),ro){Jt(!0);try{i()}finally{Jt(!1)}}return l.memoizedState=[h,a],h}function lp(i,a,l){return l===void 0||(Zi&1073741824)!==0&&(We&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=_1(),qe.lanes|=i,Ys|=i,l)}function _b(i,a,l,h){return cr(l,a)?l:wl.current!==null?(i=lp(i,l,h),cr(i,a)||(sn=!0),i):(Zi&42)===0||(Zi&1073741824)!==0&&(We&261930)===0?(sn=!0,i.memoizedState=l):(i=_1(),qe.lanes|=i,Ys|=i,a)}function vb(i,a,l,h,p){var _=O.p;O.p=_!==0&&8>_?_:8;var A=P.T,L={};P.T=L,hp(i,!1,a,l);try{var K=p(),le=P.S;if(le!==null&&le(L,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var fe=$R(K,h);iu(i,a,fe,gr(i))}else iu(i,a,h,gr(i))}catch(ge){iu(i,a,{then:function(){},status:"rejected",reason:ge},gr())}finally{O.p=_,A!==null&&L.types!==null&&(A.types=L.types),P.T=A}}function XR(){}function cp(i,a,l,h){if(i.tag!==5)throw Error(n(476));var p=bb(i).queue;vb(i,p,a,ee,l===null?XR:function(){return wb(i),l(h)})}function bb(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:ee},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function wb(i){var a=bb(i);a.next===null&&(a=i.alternate.memoizedState),iu(i,a.next.queue,{},gr())}function up(){return In(wu)}function xb(){return Qt().memoizedState}function Eb(){return Qt().memoizedState}function JR(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=gr();i=Fs(l);var h=Hs(a,i,l);h!==null&&(rr(h,a,l),Zc(h,a,l)),a={cache:Ug()},i.payload=a;return}a=a.return}}function ZR(i,a,l){var h=gr();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Od(i)?Sb(a,l):(l=Rg(i,a,l,h),l!==null&&(rr(l,i,h),Ab(l,a,h)))}function Tb(i,a,l){var h=gr();iu(i,a,l,h)}function iu(i,a,l,h){var p={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Od(i))Sb(a,p);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var A=a.lastRenderedState,L=_(A,l);if(p.hasEagerState=!0,p.eagerState=L,cr(L,A))return fd(i,a,p,0),Nt===null&&dd(),!1}catch{}finally{}if(l=Rg(i,a,p,h),l!==null)return rr(l,i,h),Ab(l,a,h),!0}return!1}function hp(i,a,l,h){if(h={lane:2,revertLane:Hp(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Od(i)){if(a)throw Error(n(479))}else a=Rg(i,l,h,2),a!==null&&rr(a,i,2)}function Od(i){var a=i.alternate;return i===qe||a!==null&&a===qe}function Sb(i,a){xl=Ad=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function Ab(i,a,l){if((l&4194048)!==0){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Ac(i,l)}}var su={readContext:In,use:Cd,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft};su.useEffectEvent=Ft;var Ib={readContext:In,use:Cd,useCallback:function(i,a){return $n().memoizedState=[i,a===void 0?null:a],i},useContext:In,useEffect:ub,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,kd(4194308,4,mb.bind(null,a,i),l)},useLayoutEffect:function(i,a){return kd(4194308,4,i,a)},useInsertionEffect:function(i,a){kd(4,2,i,a)},useMemo:function(i,a){var l=$n();a=a===void 0?null:a;var h=i();if(ro){Jt(!0);try{i()}finally{Jt(!1)}}return l.memoizedState=[h,a],h},useReducer:function(i,a,l){var h=$n();if(l!==void 0){var p=l(a);if(ro){Jt(!0);try{l(a)}finally{Jt(!1)}}}else p=a;return h.memoizedState=h.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},h.queue=i,i=i.dispatch=ZR.bind(null,qe,i),[h.memoizedState,i]},useRef:function(i){var a=$n();return i={current:i},a.memoizedState=i},useState:function(i){i=ip(i);var a=i.queue,l=Tb.bind(null,qe,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:op,useDeferredValue:function(i,a){var l=$n();return lp(l,i,a)},useTransition:function(){var i=ip(!1);return i=vb.bind(null,qe,i.queue,!0,!1),$n().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var h=qe,p=$n();if(nt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=a(),Nt===null)throw Error(n(349));(We&127)!==0||Yv(h,a,l)}p.memoizedState=l;var _={value:l,getSnapshot:a};return p.queue=_,ub(Wv.bind(null,h,_,i),[i]),h.flags|=2048,Tl(9,{destroy:void 0},Qv.bind(null,h,_,l,a),null),l},useId:function(){var i=$n(),a=Nt.identifierPrefix;if(nt){var l=xi,h=wi;l=(h&~(1<<32-Dt(h)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Id++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=GR++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:up,useFormState:sb,useActionState:sb,useOptimistic:function(i){var a=$n();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=hp.bind(null,qe,!0,l),l.dispatch=a,[i,a]},useMemoCache:tp,useCacheRefresh:function(){return $n().memoizedState=JR.bind(null,qe)},useEffectEvent:function(i){var a=$n(),l={impl:i};return a.memoizedState=l,function(){if((dt&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},dp={readContext:In,use:Cd,useCallback:pb,useContext:In,useEffect:ap,useImperativeHandle:gb,useInsertionEffect:db,useLayoutEffect:fb,useMemo:yb,useReducer:Nd,useRef:cb,useState:function(){return Nd(es)},useDebugValue:op,useDeferredValue:function(i,a){var l=Qt();return _b(l,St.memoizedState,i,a)},useTransition:function(){var i=Nd(es)[0],a=Qt().memoizedState;return[typeof i=="boolean"?i:ru(i),a]},useSyncExternalStore:Kv,useId:xb,useHostTransitionStatus:up,useFormState:ab,useActionState:ab,useOptimistic:function(i,a){var l=Qt();return Zv(l,St,i,a)},useMemoCache:tp,useCacheRefresh:Eb};dp.useEffectEvent=hb;var Rb={readContext:In,use:Cd,useCallback:pb,useContext:In,useEffect:ap,useImperativeHandle:gb,useInsertionEffect:db,useLayoutEffect:fb,useMemo:yb,useReducer:rp,useRef:cb,useState:function(){return rp(es)},useDebugValue:op,useDeferredValue:function(i,a){var l=Qt();return St===null?lp(l,i,a):_b(l,St.memoizedState,i,a)},useTransition:function(){var i=rp(es)[0],a=Qt().memoizedState;return[typeof i=="boolean"?i:ru(i),a]},useSyncExternalStore:Kv,useId:xb,useHostTransitionStatus:up,useFormState:lb,useActionState:lb,useOptimistic:function(i,a){var l=Qt();return St!==null?Zv(l,St,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:tp,useCacheRefresh:Eb};Rb.useEffectEvent=hb;function fp(i,a,l,h){a=i.memoizedState,l=l(h,a),l=l==null?a:y({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var mp={enqueueSetState:function(i,a,l){i=i._reactInternals;var h=gr(),p=Fs(h);p.payload=a,l!=null&&(p.callback=l),a=Hs(i,p,h),a!==null&&(rr(a,i,h),Zc(a,i,h))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var h=gr(),p=Fs(h);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=Hs(i,p,h),a!==null&&(rr(a,i,h),Zc(a,i,h))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=gr(),h=Fs(l);h.tag=2,a!=null&&(h.callback=a),a=Hs(i,h,l),a!==null&&(rr(a,i,l),Zc(a,i,l))}};function Cb(i,a,l,h,p,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,_,A):a.prototype&&a.prototype.isPureReactComponent?!$c(l,h)||!$c(p,_):!0}function Nb(i,a,l,h){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==i&&mp.enqueueReplaceState(a,a.state,null)}function io(i,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(i=i.defaultProps){l===a&&(l=y({},l));for(var p in i)l[p]===void 0&&(l[p]=i[p])}return l}function kb(i){hd(i)}function Db(i){console.error(i)}function Ob(i){hd(i)}function Md(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function Mb(i,a,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function gp(i,a,l){return l=Fs(l),l.tag=3,l.payload={element:null},l.callback=function(){Md(i,a)},l}function Pb(i){return i=Fs(i),i.tag=3,i}function jb(i,a,l,h){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var _=h.value;i.payload=function(){return p(_)},i.callback=function(){Mb(a,l,h)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Mb(a,l,h),typeof p!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var L=h.stack;this.componentDidCatch(h.value,{componentStack:L!==null?L:""})})}function eC(i,a,l,h,p){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&pl(a,l,p,!0),l=hr.current,l!==null){switch(l.tag){case 31:case 13:return Dr===null?Gd():l.alternate===null&&Ht===0&&(Ht=3),l.flags&=-257,l.flags|=65536,l.lanes=p,h===wd?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),zp(i,h,p)),!1;case 22:return l.flags|=65536,h===wd?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),zp(i,h,p)),!1}throw Error(n(435,l.tag))}return zp(i,h,p),Gd(),!1}if(nt)return a=hr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,h!==Mg&&(i=Error(n(422),{cause:h}),Yc(Rr(i,l)))):(h!==Mg&&(a=Error(n(423),{cause:h}),Yc(Rr(a,l))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,h=Rr(h,l),p=gp(i.stateNode,h,p),$g(i,p),Ht!==4&&(Ht=2)),!1;var _=Error(n(520),{cause:h});if(_=Rr(_,l),fu===null?fu=[_]:fu.push(_),Ht!==4&&(Ht=2),a===null)return!0;h=Rr(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=p&-p,l.lanes|=i,i=gp(l.stateNode,h,i),$g(l,i),!1;case 1:if(a=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Qs===null||!Qs.has(_))))return l.flags|=65536,p&=-p,l.lanes|=p,p=Pb(p),jb(p,i,l,h),$g(l,p),!1}l=l.return}while(l!==null);return!1}var pp=Error(n(461)),sn=!1;function Rn(i,a,l,h){a.child=i===null?zv(a,null,l,h):no(a,i.child,l,h)}function Vb(i,a,l,h,p){l=l.render;var _=a.ref;if("ref"in h){var A={};for(var L in h)L!=="ref"&&(A[L]=h[L])}else A=h;return Ja(a),h=Xg(i,a,l,A,_,p),L=Jg(),i!==null&&!sn?(Zg(i,a,p),ts(i,a,p)):(nt&&L&&Dg(a),a.flags|=1,Rn(i,a,h,p),a.child)}function Lb(i,a,l,h,p){if(i===null){var _=l.type;return typeof _=="function"&&!Cg(_)&&_.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=_,Ub(i,a,_,h,p)):(i=gd(l.type,null,h,a,a.mode,p),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,!Tp(i,p)){var A=_.memoizedProps;if(l=l.compare,l=l!==null?l:$c,l(A,h)&&i.ref===a.ref)return ts(i,a,p)}return a.flags|=1,i=Qi(_,h),i.ref=a.ref,i.return=a,a.child=i}function Ub(i,a,l,h,p){if(i!==null){var _=i.memoizedProps;if($c(_,h)&&i.ref===a.ref)if(sn=!1,a.pendingProps=h=_,Tp(i,p))(i.flags&131072)!==0&&(sn=!0);else return a.lanes=i.lanes,ts(i,a,p)}return yp(i,a,l,h,p)}function zb(i,a,l,h){var p=h.children,_=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,i!==null){for(h=a.child=i.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;h=p&~_}else h=0,a.child=null;return Bb(i,a,_,l,h)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&vd(a,_!==null?_.cachePool:null),_!==null?Hv(a,_):Kg(),qv(a);else return h=a.lanes=536870912,Bb(i,a,_!==null?_.baseLanes|l:l,l,h)}else _!==null?(vd(a,_.cachePool),Hv(a,_),$s(),a.memoizedState=null):(i!==null&&vd(a,null),Kg(),$s());return Rn(i,a,p,l),a.child}function au(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Bb(i,a,l,h,p){var _=Bg();return _=_===null?null:{parent:nn._currentValue,pool:_},a.memoizedState={baseLanes:l,cachePool:_},i!==null&&vd(a,null),Kg(),qv(a),i!==null&&pl(i,a,h,!0),a.childLanes=p,null}function Pd(i,a){return a=Vd({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function Fb(i,a,l){return no(a,i.child,null,l),i=Pd(a,a.pendingProps),i.flags|=2,dr(a),a.memoizedState=null,i}function tC(i,a,l){var h=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(nt){if(h.mode==="hidden")return i=Pd(a,h),a.lanes=536870912,au(null,i);if(Qg(a),(i=Ot)?(i=ew(i,kr),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Vs!==null?{id:wi,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},l=Sv(i),l.return=a,a.child=l,An=a,Ot=null)):i=null,i===null)throw Us(a);return a.lanes=536870912,null}return Pd(a,h)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(Qg(a),p)if(a.flags&256)a.flags&=-257,a=Fb(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(n(558));else if(sn||pl(i,a,l,!1),p=(l&i.childLanes)!==0,sn||p){if(h=Nt,h!==null&&(A=Ic(h,l),A!==0&&A!==_.retryLane))throw _.retryLane=A,Ya(i,A),rr(h,i,A),pp;Gd(),a=Fb(i,a,l)}else i=_.treeContext,Ot=Or(A.nextSibling),An=a,nt=!0,Ls=null,kr=!1,i!==null&&Rv(a,i),a=Pd(a,h),a.flags|=4096;return a}return i=Qi(i.child,{mode:h.mode,children:h.children}),i.ref=a.ref,a.child=i,i.return=a,i}function jd(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function yp(i,a,l,h,p){return Ja(a),l=Xg(i,a,l,h,void 0,p),h=Jg(),i!==null&&!sn?(Zg(i,a,p),ts(i,a,p)):(nt&&h&&Dg(a),a.flags|=1,Rn(i,a,l,p),a.child)}function Hb(i,a,l,h,p,_){return Ja(a),a.updateQueue=null,l=Gv(a,h,l,p),$v(i),h=Jg(),i!==null&&!sn?(Zg(i,a,_),ts(i,a,_)):(nt&&h&&Dg(a),a.flags|=1,Rn(i,a,l,_),a.child)}function qb(i,a,l,h,p){if(Ja(a),a.stateNode===null){var _=dl,A=l.contextType;typeof A=="object"&&A!==null&&(_=In(A)),_=new l(h,_),a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=mp,a.stateNode=_,_._reactInternals=a,_=a.stateNode,_.props=h,_.state=a.memoizedState,_.refs={},Hg(a),A=l.contextType,_.context=typeof A=="object"&&A!==null?In(A):dl,_.state=a.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(fp(a,l,A,h),_.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&mp.enqueueReplaceState(_,_.state,null),tu(a,h,_,p),eu(),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(i===null){_=a.stateNode;var L=a.memoizedProps,K=io(l,L);_.props=K;var le=_.context,fe=l.contextType;A=dl,typeof fe=="object"&&fe!==null&&(A=In(fe));var ge=l.getDerivedStateFromProps;fe=typeof ge=="function"||typeof _.getSnapshotBeforeUpdate=="function",L=a.pendingProps!==L,fe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(L||le!==A)&&Nb(a,_,h,A),Bs=!1;var ce=a.memoizedState;_.state=ce,tu(a,h,_,p),eu(),le=a.memoizedState,L||ce!==le||Bs?(typeof ge=="function"&&(fp(a,l,ge,h),le=a.memoizedState),(K=Bs||Cb(a,l,K,h,ce,le,A))?(fe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(a.flags|=4194308)):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=le),_.props=h,_.state=le,_.context=A,h=K):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{_=a.stateNode,qg(i,a),A=a.memoizedProps,fe=io(l,A),_.props=fe,ge=a.pendingProps,ce=_.context,le=l.contextType,K=dl,typeof le=="object"&&le!==null&&(K=In(le)),L=l.getDerivedStateFromProps,(le=typeof L=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ge||ce!==K)&&Nb(a,_,h,K),Bs=!1,ce=a.memoizedState,_.state=ce,tu(a,h,_,p),eu();var he=a.memoizedState;A!==ge||ce!==he||Bs||i!==null&&i.dependencies!==null&&yd(i.dependencies)?(typeof L=="function"&&(fp(a,l,L,h),he=a.memoizedState),(fe=Bs||Cb(a,l,fe,h,ce,he,K)||i!==null&&i.dependencies!==null&&yd(i.dependencies))?(le||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,he,K),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,he,K)),typeof _.componentDidUpdate=="function"&&(a.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=he),_.props=h,_.state=he,_.context=K,h=fe):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=1024),h=!1)}return _=h,jd(i,a),h=(a.flags&128)!==0,_||h?(_=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:_.render(),a.flags|=1,i!==null&&h?(a.child=no(a,i.child,null,p),a.child=no(a,null,l,p)):Rn(i,a,l,p),a.memoizedState=_.state,i=a.child):i=ts(i,a,p),i}function $b(i,a,l,h){return Wa(),a.flags|=256,Rn(i,a,l,h),a.child}var _p={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vp(i){return{baseLanes:i,cachePool:Mv()}}function bp(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=mr),i}function Gb(i,a,l){var h=a.pendingProps,p=!1,_=(a.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(Yt.current&2)!==0),A&&(p=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,i===null){if(nt){if(p?qs(a):$s(),(i=Ot)?(i=ew(i,kr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Vs!==null?{id:wi,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},l=Sv(i),l.return=a,a.child=l,An=a,Ot=null)):i=null,i===null)throw Us(a);return ny(i)?a.lanes=32:a.lanes=536870912,null}var L=h.children;return h=h.fallback,p?($s(),p=a.mode,L=Vd({mode:"hidden",children:L},p),h=Qa(h,p,l,null),L.return=a,h.return=a,L.sibling=h,a.child=L,h=a.child,h.memoizedState=vp(l),h.childLanes=bp(i,A,l),a.memoizedState=_p,au(null,h)):(qs(a),wp(a,L))}var K=i.memoizedState;if(K!==null&&(L=K.dehydrated,L!==null)){if(_)a.flags&256?(qs(a),a.flags&=-257,a=xp(i,a,l)):a.memoizedState!==null?($s(),a.child=i.child,a.flags|=128,a=null):($s(),L=h.fallback,p=a.mode,h=Vd({mode:"visible",children:h.children},p),L=Qa(L,p,l,null),L.flags|=2,h.return=a,L.return=a,h.sibling=L,a.child=h,no(a,i.child,null,l),h=a.child,h.memoizedState=vp(l),h.childLanes=bp(i,A,l),a.memoizedState=_p,a=au(null,h));else if(qs(a),ny(L)){if(A=L.nextSibling&&L.nextSibling.dataset,A)var le=A.dgst;A=le,h=Error(n(419)),h.stack="",h.digest=A,Yc({value:h,source:null,stack:null}),a=xp(i,a,l)}else if(sn||pl(i,a,l,!1),A=(l&i.childLanes)!==0,sn||A){if(A=Nt,A!==null&&(h=Ic(A,l),h!==0&&h!==K.retryLane))throw K.retryLane=h,Ya(i,h),rr(A,i,h),pp;ty(L)||Gd(),a=xp(i,a,l)}else ty(L)?(a.flags|=192,a.child=i.child,a=null):(i=K.treeContext,Ot=Or(L.nextSibling),An=a,nt=!0,Ls=null,kr=!1,i!==null&&Rv(a,i),a=wp(a,h.children),a.flags|=4096);return a}return p?($s(),L=h.fallback,p=a.mode,K=i.child,le=K.sibling,h=Qi(K,{mode:"hidden",children:h.children}),h.subtreeFlags=K.subtreeFlags&65011712,le!==null?L=Qi(le,L):(L=Qa(L,p,l,null),L.flags|=2),L.return=a,h.return=a,h.sibling=L,a.child=h,au(null,h),h=a.child,L=i.child.memoizedState,L===null?L=vp(l):(p=L.cachePool,p!==null?(K=nn._currentValue,p=p.parent!==K?{parent:K,pool:K}:p):p=Mv(),L={baseLanes:L.baseLanes|l,cachePool:p}),h.memoizedState=L,h.childLanes=bp(i,A,l),a.memoizedState=_p,au(i.child,h)):(qs(a),l=i.child,i=l.sibling,l=Qi(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,i!==null&&(A=a.deletions,A===null?(a.deletions=[i],a.flags|=16):A.push(i)),a.child=l,a.memoizedState=null,l)}function wp(i,a){return a=Vd({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Vd(i,a){return i=ur(22,i,null,a),i.lanes=0,i}function xp(i,a,l){return no(a,i.child,null,l),i=wp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Kb(i,a,l){i.lanes|=a;var h=i.alternate;h!==null&&(h.lanes|=a),Vg(i.return,a,l)}function Ep(i,a,l,h,p,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p,treeForkCount:_}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=h,A.tail=l,A.tailMode=p,A.treeForkCount=_)}function Yb(i,a,l){var h=a.pendingProps,p=h.revealOrder,_=h.tail;h=h.children;var A=Yt.current,L=(A&2)!==0;if(L?(A=A&1|2,a.flags|=128):A&=1,ie(Yt,A),Rn(i,a,h,l),h=nt?Kc:0,!L&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Kb(i,l,a);else if(i.tag===19)Kb(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(l=a.child,p=null;l!==null;)i=l.alternate,i!==null&&Sd(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),Ep(a,!1,p,l,_,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(i=p.alternate,i!==null&&Sd(i)===null){a.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Ep(a,!0,l,null,_,h);break;case"together":Ep(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function ts(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),Ys|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(pl(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,l=Qi(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Qi(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function Tp(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&yd(i)))}function nC(i,a,l){switch(a.tag){case 3:Pe(a,a.stateNode.containerInfo),zs(a,nn,i.memoizedState.cache),Wa();break;case 27:case 5:et(a);break;case 4:Pe(a,a.stateNode.containerInfo);break;case 10:zs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Qg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(qs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Gb(i,a,l):(qs(a),i=ts(i,a,l),i!==null?i.sibling:null);qs(a);break;case 19:var p=(i.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(pl(i,a,l,!1),h=(l&a.childLanes)!==0),p){if(h)return Yb(i,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ie(Yt,Yt.current),h)break;return null;case 22:return a.lanes=0,zb(i,a,l,a.pendingProps);case 24:zs(a,nn,i.memoizedState.cache)}return ts(i,a,l)}function Qb(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)sn=!0;else{if(!Tp(i,l)&&(a.flags&128)===0)return sn=!1,nC(i,a,l);sn=(i.flags&131072)!==0}else sn=!1,nt&&(a.flags&1048576)!==0&&Iv(a,Kc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(i=eo(a.elementType),a.type=i,typeof i=="function")Cg(i)?(h=io(i,h),a.tag=1,a=qb(null,a,i,h,l)):(a.tag=0,a=yp(null,a,i,h,l));else{if(i!=null){var p=i.$$typeof;if(p===B){a.tag=11,a=Vb(null,a,i,h,l);break e}else if(p===R){a.tag=14,a=Lb(null,a,i,h,l);break e}}throw a=G(i)||i,Error(n(306,a,""))}}return a;case 0:return yp(i,a,a.type,a.pendingProps,l);case 1:return h=a.type,p=io(h,a.pendingProps),qb(i,a,h,p,l);case 3:e:{if(Pe(a,a.stateNode.containerInfo),i===null)throw Error(n(387));h=a.pendingProps;var _=a.memoizedState;p=_.element,qg(i,a),tu(a,h,null,l);var A=a.memoizedState;if(h=A.cache,zs(a,nn,h),h!==_.cache&&Lg(a,[nn],l,!0),eu(),h=A.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){a=$b(i,a,h,l);break e}else if(h!==p){p=Rr(Error(n(424)),a),Yc(p),a=$b(i,a,h,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ot=Or(i.firstChild),An=a,nt=!0,Ls=null,kr=!0,l=zv(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Wa(),h===p){a=ts(i,a,l);break e}Rn(i,a,h,l)}a=a.child}return a;case 26:return jd(i,a),i===null?(l=aw(a.type,null,a.pendingProps,null))?a.memoizedState=l:nt||(l=a.type,i=a.pendingProps,h=Zd(_e.current).createElement(l),h[Zt]=a,h[yn]=i,Cn(h,l,i),en(h),a.stateNode=h):a.memoizedState=aw(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return et(a),i===null&&nt&&(h=a.stateNode=rw(a.type,a.pendingProps,_e.current),An=a,kr=!0,p=Ot,Zs(a.type)?(ry=p,Ot=Or(h.firstChild)):Ot=p),Rn(i,a,a.pendingProps.children,l),jd(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&nt&&((p=h=Ot)&&(h=DC(h,a.type,a.pendingProps,kr),h!==null?(a.stateNode=h,An=a,Ot=Or(h.firstChild),kr=!1,p=!0):p=!1),p||Us(a)),et(a),p=a.type,_=a.pendingProps,A=i!==null?i.memoizedProps:null,h=_.children,Jp(p,_)?h=null:A!==null&&Jp(p,A)&&(a.flags|=32),a.memoizedState!==null&&(p=Xg(i,a,KR,null,null,l),wu._currentValue=p),jd(i,a),Rn(i,a,h,l),a.child;case 6:return i===null&&nt&&((i=l=Ot)&&(l=OC(l,a.pendingProps,kr),l!==null?(a.stateNode=l,An=a,Ot=null,i=!0):i=!1),i||Us(a)),null;case 13:return Gb(i,a,l);case 4:return Pe(a,a.stateNode.containerInfo),h=a.pendingProps,i===null?a.child=no(a,null,h,l):Rn(i,a,h,l),a.child;case 11:return Vb(i,a,a.type,a.pendingProps,l);case 7:return Rn(i,a,a.pendingProps,l),a.child;case 8:return Rn(i,a,a.pendingProps.children,l),a.child;case 12:return Rn(i,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,zs(a,a.type,h.value),Rn(i,a,h.children,l),a.child;case 9:return p=a.type._context,h=a.pendingProps.children,Ja(a),p=In(p),h=h(p),a.flags|=1,Rn(i,a,h,l),a.child;case 14:return Lb(i,a,a.type,a.pendingProps,l);case 15:return Ub(i,a,a.type,a.pendingProps,l);case 19:return Yb(i,a,l);case 31:return tC(i,a,l);case 22:return zb(i,a,l,a.pendingProps);case 24:return Ja(a),h=In(nn),i===null?(p=Bg(),p===null&&(p=Nt,_=Ug(),p.pooledCache=_,_.refCount++,_!==null&&(p.pooledCacheLanes|=l),p=_),a.memoizedState={parent:h,cache:p},Hg(a),zs(a,nn,p)):((i.lanes&l)!==0&&(qg(i,a),tu(a,null,null,l),eu()),p=i.memoizedState,_=a.memoizedState,p.parent!==h?(p={parent:h,cache:h},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),zs(a,nn,h)):(h=_.cache,zs(a,nn,h),h!==p.cache&&Lg(a,[nn],l,!0))),Rn(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function ns(i){i.flags|=4}function Sp(i,a,l,h,p){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(x1())i.flags|=8192;else throw to=wd,Fg}else i.flags&=-16777217}function Wb(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!hw(a))if(x1())i.flags|=8192;else throw to=wd,Fg}function Ld(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?xr():536870912,i.lanes|=a,Rl|=a)}function ou(i,a){if(!nt)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Mt(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(a)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&65011712,h|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,a}function rC(i,a,l){var h=a.pendingProps;switch(Og(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(a),null;case 1:return Mt(a),null;case 3:return l=a.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Ji(nn),Ce(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(gl(a)?ns(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Pg())),Mt(a),null;case 26:var p=a.type,_=a.memoizedState;return i===null?(ns(a),_!==null?(Mt(a),Wb(a,_)):(Mt(a),Sp(a,p,null,h,l))):_?_!==i.memoizedState?(ns(a),Mt(a),Wb(a,_)):(Mt(a),a.flags&=-16777217):(i=i.memoizedProps,i!==h&&ns(a),Mt(a),Sp(a,p,i,h,l)),null;case 27:if(at(a),l=_e.current,p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return Mt(a),null}i=se.current,gl(a)?Cv(a):(i=rw(p,h,l),a.stateNode=i,ns(a))}return Mt(a),null;case 5:if(at(a),p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return Mt(a),null}if(_=se.current,gl(a))Cv(a);else{var A=Zd(_e.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof h.is=="string"?A.createElement("select",{is:h.is}):A.createElement("select"),h.multiple?_.multiple=!0:h.size&&(_.size=h.size);break;default:_=typeof h.is=="string"?A.createElement(p,{is:h.is}):A.createElement(p)}}_[Zt]=a,_[yn]=h;e:for(A=a.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break e;for(;A.sibling===null;){if(A.return===null||A.return===a)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}a.stateNode=_;e:switch(Cn(_,p,h),p){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&ns(a)}}return Mt(a),Sp(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(n(166));if(i=_e.current,gl(a)){if(i=a.stateNode,l=a.memoizedProps,h=null,p=An,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}i[Zt]=a,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||G1(i.nodeValue,l)),i||Us(a,!0)}else i=Zd(i).createTextNode(h),i[Zt]=a,a.stateNode=i}return Mt(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(h=gl(a),l!==null){if(i===null){if(!h)throw Error(n(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Zt]=a}else Wa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Mt(a),i=!1}else l=Pg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(dr(a),a):(dr(a),null);if((a.flags&128)!==0)throw Error(n(558))}return Mt(a),null;case 13:if(h=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=gl(a),h!==null&&h.dehydrated!==null){if(i===null){if(!p)throw Error(n(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Zt]=a}else Wa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Mt(a),p=!1}else p=Pg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(dr(a),a):(dr(a),null)}return dr(a),(a.flags&128)!==0?(a.lanes=l,a):(l=h!==null,i=i!==null&&i.memoizedState!==null,l&&(h=a.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool),_=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),_!==p&&(h.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),Ld(a,a.updateQueue),Mt(a),null);case 4:return Ce(),i===null&&Kp(a.stateNode.containerInfo),Mt(a),null;case 10:return Ji(a.type),Mt(a),null;case 19:if(Q(Yt),h=a.memoizedState,h===null)return Mt(a),null;if(p=(a.flags&128)!==0,_=h.rendering,_===null)if(p)ou(h,!1);else{if(Ht!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(_=Sd(i),_!==null){for(a.flags|=128,ou(h,!1),i=_.updateQueue,a.updateQueue=i,Ld(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)Tv(l,i),l=l.sibling;return ie(Yt,Yt.current&1|2),nt&&Wi(a,h.treeForkCount),a.child}i=i.sibling}h.tail!==null&&xe()>Hd&&(a.flags|=128,p=!0,ou(h,!1),a.lanes=4194304)}else{if(!p)if(i=Sd(_),i!==null){if(a.flags|=128,p=!0,i=i.updateQueue,a.updateQueue=i,Ld(a,i),ou(h,!0),h.tail===null&&h.tailMode==="hidden"&&!_.alternate&&!nt)return Mt(a),null}else 2*xe()-h.renderingStartTime>Hd&&l!==536870912&&(a.flags|=128,p=!0,ou(h,!1),a.lanes=4194304);h.isBackwards?(_.sibling=a.child,a.child=_):(i=h.last,i!==null?i.sibling=_:a.child=_,h.last=_)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=xe(),i.sibling=null,l=Yt.current,ie(Yt,p?l&1|2:l&1),nt&&Wi(a,h.treeForkCount),i):(Mt(a),null);case 22:case 23:return dr(a),Yg(),h=a.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(Mt(a),a.subtreeFlags&6&&(a.flags|=8192)):Mt(a),l=a.updateQueue,l!==null&&Ld(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),i!==null&&Q(Za),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ji(nn),Mt(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function iC(i,a){switch(Og(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ji(nn),Ce(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return at(a),null;case 31:if(a.memoizedState!==null){if(dr(a),a.alternate===null)throw Error(n(340));Wa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(dr(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Wa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Q(Yt),null;case 4:return Ce(),null;case 10:return Ji(a.type),null;case 22:case 23:return dr(a),Yg(),i!==null&&Q(Za),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Ji(nn),null;case 25:return null;default:return null}}function Xb(i,a){switch(Og(a),a.tag){case 3:Ji(nn),Ce();break;case 26:case 27:case 5:at(a);break;case 4:Ce();break;case 31:a.memoizedState!==null&&dr(a);break;case 13:dr(a);break;case 19:Q(Yt);break;case 10:Ji(a.type);break;case 22:case 23:dr(a),Yg(),i!==null&&Q(Za);break;case 24:Ji(nn)}}function lu(i,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var p=h.next;l=p;do{if((l.tag&i)===i){h=void 0;var _=l.create,A=l.inst;h=_(),A.destroy=h}l=l.next}while(l!==p)}}catch(L){vt(a,a.return,L)}}function Gs(i,a,l){try{var h=a.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var _=p.next;h=_;do{if((h.tag&i)===i){var A=h.inst,L=A.destroy;if(L!==void 0){A.destroy=void 0,p=a;var K=l,le=L;try{le()}catch(fe){vt(p,K,fe)}}}h=h.next}while(h!==_)}}catch(fe){vt(a,a.return,fe)}}function Jb(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{Fv(a,l)}catch(h){vt(i,i.return,h)}}}function Zb(i,a,l){l.props=io(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){vt(i,a,h)}}function cu(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(p){vt(i,a,p)}}function Ei(i,a){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(p){vt(i,a,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){vt(i,a,p)}else l.current=null}function e1(i){var a=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(p){vt(i,i.return,p)}}function Ap(i,a,l){try{var h=i.stateNode;AC(h,i.type,l,a),h[yn]=a}catch(p){vt(i,i.return,p)}}function t1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Zs(i.type)||i.tag===4}function Ip(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||t1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Zs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Rp(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=$r));else if(h!==4&&(h===27&&Zs(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(Rp(i,a,l),i=i.sibling;i!==null;)Rp(i,a,l),i=i.sibling}function Ud(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(h!==4&&(h===27&&Zs(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Ud(i,a,l),i=i.sibling;i!==null;)Ud(i,a,l),i=i.sibling}function n1(i){var a=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Cn(a,h,l),a[Zt]=i,a[yn]=l}catch(_){vt(i,i.return,_)}}var rs=!1,an=!1,Cp=!1,r1=typeof WeakSet=="function"?WeakSet:Set,vn=null;function sC(i,a){if(i=i.containerInfo,Wp=of,i=gv(i),xg(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var A=0,L=-1,K=-1,le=0,fe=0,ge=i,ce=null;t:for(;;){for(var he;ge!==l||p!==0&&ge.nodeType!==3||(L=A+p),ge!==_||h!==0&&ge.nodeType!==3||(K=A+h),ge.nodeType===3&&(A+=ge.nodeValue.length),(he=ge.firstChild)!==null;)ce=ge,ge=he;for(;;){if(ge===i)break t;if(ce===l&&++le===p&&(L=A),ce===_&&++fe===h&&(K=A),(he=ge.nextSibling)!==null)break;ge=ce,ce=ge.parentNode}ge=he}l=L===-1||K===-1?null:{start:L,end:K}}else l=null}l=l||{start:0,end:0}}else l=null;for(Xp={focusedElem:i,selectionRange:l},of=!1,vn=a;vn!==null;)if(a=vn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,vn=i;else for(;vn!==null;){switch(a=vn,_=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)p=i[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,l=a,p=_.memoizedProps,_=_.memoizedState,h=l.stateNode;try{var Te=io(l.type,p);i=h.getSnapshotBeforeUpdate(Te,_),h.__reactInternalSnapshotBeforeUpdate=i}catch(De){vt(l,l.return,De)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)ey(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":ey(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=a.sibling,i!==null){i.return=a.return,vn=i;break}vn=a.return}}function i1(i,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:ss(i,l),h&4&&lu(5,l);break;case 1:if(ss(i,l),h&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(A){vt(l,l.return,A)}else{var p=io(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(p,a,i.__reactInternalSnapshotBeforeUpdate)}catch(A){vt(l,l.return,A)}}h&64&&Jb(l),h&512&&cu(l,l.return);break;case 3:if(ss(i,l),h&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Fv(i,a)}catch(A){vt(l,l.return,A)}}break;case 27:a===null&&h&4&&n1(l);case 26:case 5:ss(i,l),a===null&&h&4&&e1(l),h&512&&cu(l,l.return);break;case 12:ss(i,l);break;case 31:ss(i,l),h&4&&o1(i,l);break;case 13:ss(i,l),h&4&&l1(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=mC.bind(null,l),MC(i,l))));break;case 22:if(h=l.memoizedState!==null||rs,!h){a=a!==null&&a.memoizedState!==null||an,p=rs;var _=an;rs=h,(an=a)&&!_?as(i,l,(l.subtreeFlags&8772)!==0):ss(i,l),rs=p,an=_}break;case 30:break;default:ss(i,l)}}function s1(i){var a=i.alternate;a!==null&&(i.alternate=null,s1(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Jo(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var jt=null,Zn=!1;function is(i,a,l){for(l=l.child;l!==null;)a1(i,a,l),l=l.sibling}function a1(i,a,l){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(Gt,l)}catch{}switch(l.tag){case 26:an||Ei(l,a),is(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:an||Ei(l,a);var h=jt,p=Zn;Zs(l.type)&&(jt=l.stateNode,Zn=!1),is(i,a,l),_u(l.stateNode),jt=h,Zn=p;break;case 5:an||Ei(l,a);case 6:if(h=jt,p=Zn,jt=null,is(i,a,l),jt=h,Zn=p,jt!==null)if(Zn)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(l.stateNode)}catch(_){vt(l,a,_)}else try{jt.removeChild(l.stateNode)}catch(_){vt(l,a,_)}break;case 18:jt!==null&&(Zn?(i=jt,J1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),jl(i)):J1(jt,l.stateNode));break;case 4:h=jt,p=Zn,jt=l.stateNode.containerInfo,Zn=!0,is(i,a,l),jt=h,Zn=p;break;case 0:case 11:case 14:case 15:Gs(2,l,a),an||Gs(4,l,a),is(i,a,l);break;case 1:an||(Ei(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&Zb(l,a,h)),is(i,a,l);break;case 21:is(i,a,l);break;case 22:an=(h=an)||l.memoizedState!==null,is(i,a,l),an=h;break;default:is(i,a,l)}}function o1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{jl(i)}catch(l){vt(a,a.return,l)}}}function l1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{jl(i)}catch(l){vt(a,a.return,l)}}function aC(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new r1),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new r1),a;default:throw Error(n(435,i.tag))}}function zd(i,a){var l=aC(i);a.forEach(function(h){if(!l.has(h)){l.add(h);var p=gC.bind(null,i,h);h.then(p,p)}})}function er(i,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h],_=i,A=a,L=A;e:for(;L!==null;){switch(L.tag){case 27:if(Zs(L.type)){jt=L.stateNode,Zn=!1;break e}break;case 5:jt=L.stateNode,Zn=!1;break e;case 3:case 4:jt=L.stateNode.containerInfo,Zn=!0;break e}L=L.return}if(jt===null)throw Error(n(160));a1(_,A,p),jt=null,Zn=!1,_=p.alternate,_!==null&&(_.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)c1(a,i),a=a.sibling}var Xr=null;function c1(i,a){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:er(a,i),tr(i),h&4&&(Gs(3,i,i.return),lu(3,i),Gs(5,i,i.return));break;case 1:er(a,i),tr(i),h&512&&(an||l===null||Ei(l,l.return)),h&64&&rs&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var p=Xr;if(er(a,i),tr(i),h&512&&(an||l===null||Ei(l,l.return)),h&4){var _=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,p=p.ownerDocument||p;t:switch(h){case"title":_=p.getElementsByTagName("title")[0],(!_||_[ci]||_[Zt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=p.createElement(h),p.head.insertBefore(_,p.querySelector("head > title"))),Cn(_,h,l),_[Zt]=i,en(_),h=_;break e;case"link":var A=cw("link","href",p).get(h+(l.href||""));if(A){for(var L=0;L<A.length;L++)if(_=A[L],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(L,1);break t}}_=p.createElement(h),Cn(_,h,l),p.head.appendChild(_);break;case"meta":if(A=cw("meta","content",p).get(h+(l.content||""))){for(L=0;L<A.length;L++)if(_=A[L],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(L,1);break t}}_=p.createElement(h),Cn(_,h,l),p.head.appendChild(_);break;default:throw Error(n(468,h))}_[Zt]=i,en(_),h=_}i.stateNode=h}else uw(p,i.type,i.stateNode);else i.stateNode=lw(p,h,i.memoizedProps);else _!==h?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,h===null?uw(p,i.type,i.stateNode):lw(p,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Ap(i,i.memoizedProps,l.memoizedProps)}break;case 27:er(a,i),tr(i),h&512&&(an||l===null||Ei(l,l.return)),l!==null&&h&4&&Ap(i,i.memoizedProps,l.memoizedProps);break;case 5:if(er(a,i),tr(i),h&512&&(an||l===null||Ei(l,l.return)),i.flags&32){p=i.stateNode;try{Jn(p,"")}catch(Te){vt(i,i.return,Te)}}h&4&&i.stateNode!=null&&(p=i.memoizedProps,Ap(i,p,l!==null?l.memoizedProps:p)),h&1024&&(Cp=!0);break;case 6:if(er(a,i),tr(i),h&4){if(i.stateNode===null)throw Error(n(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(Te){vt(i,i.return,Te)}}break;case 3:if(nf=null,p=Xr,Xr=ef(a.containerInfo),er(a,i),Xr=p,tr(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{jl(a.containerInfo)}catch(Te){vt(i,i.return,Te)}Cp&&(Cp=!1,u1(i));break;case 4:h=Xr,Xr=ef(i.stateNode.containerInfo),er(a,i),tr(i),Xr=h;break;case 12:er(a,i),tr(i);break;case 31:er(a,i),tr(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,zd(i,h)));break;case 13:er(a,i),tr(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Fd=xe()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,zd(i,h)));break;case 22:p=i.memoizedState!==null;var K=l!==null&&l.memoizedState!==null,le=rs,fe=an;if(rs=le||p,an=fe||K,er(a,i),an=fe,rs=le,tr(i),h&8192)e:for(a=i.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||K||rs||an||so(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){K=l=a;try{if(_=K.stateNode,p)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{L=K.stateNode;var ge=K.memoizedProps.style,ce=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;L.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Te){vt(K,K.return,Te)}}}else if(a.tag===6){if(l===null){K=a;try{K.stateNode.nodeValue=p?"":K.memoizedProps}catch(Te){vt(K,K.return,Te)}}}else if(a.tag===18){if(l===null){K=a;try{var he=K.stateNode;p?Z1(he,!0):Z1(K.stateNode,!1)}catch(Te){vt(K,K.return,Te)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,zd(i,l))));break;case 19:er(a,i),tr(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,zd(i,h)));break;case 30:break;case 21:break;default:er(a,i),tr(i)}}function tr(i){var a=i.flags;if(a&2){try{for(var l,h=i.return;h!==null;){if(t1(h)){l=h;break}h=h.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var p=l.stateNode,_=Ip(i);Ud(i,_,p);break;case 5:var A=l.stateNode;l.flags&32&&(Jn(A,""),l.flags&=-33);var L=Ip(i);Ud(i,L,A);break;case 3:case 4:var K=l.stateNode.containerInfo,le=Ip(i);Rp(i,le,K);break;default:throw Error(n(161))}}catch(fe){vt(i,i.return,fe)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function u1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;u1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function ss(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)i1(i,a.alternate,a),a=a.sibling}function so(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Gs(4,a,a.return),so(a);break;case 1:Ei(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Zb(a,a.return,l),so(a);break;case 27:_u(a.stateNode);case 26:case 5:Ei(a,a.return),so(a);break;case 22:a.memoizedState===null&&so(a);break;case 30:so(a);break;default:so(a)}i=i.sibling}}function as(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,p=i,_=a,A=_.flags;switch(_.tag){case 0:case 11:case 15:as(p,_,l),lu(4,_);break;case 1:if(as(p,_,l),h=_,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(le){vt(h,h.return,le)}if(h=_,p=h.updateQueue,p!==null){var L=h.stateNode;try{var K=p.shared.hiddenCallbacks;if(K!==null)for(p.shared.hiddenCallbacks=null,p=0;p<K.length;p++)Bv(K[p],L)}catch(le){vt(h,h.return,le)}}l&&A&64&&Jb(_),cu(_,_.return);break;case 27:n1(_);case 26:case 5:as(p,_,l),l&&h===null&&A&4&&e1(_),cu(_,_.return);break;case 12:as(p,_,l);break;case 31:as(p,_,l),l&&A&4&&o1(p,_);break;case 13:as(p,_,l),l&&A&4&&l1(p,_);break;case 22:_.memoizedState===null&&as(p,_,l),cu(_,_.return);break;case 30:break;default:as(p,_,l)}a=a.sibling}}function Np(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Qc(l))}function kp(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Qc(i))}function Jr(i,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)h1(i,a,l,h),a=a.sibling}function h1(i,a,l,h){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Jr(i,a,l,h),p&2048&&lu(9,a);break;case 1:Jr(i,a,l,h);break;case 3:Jr(i,a,l,h),p&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Qc(i)));break;case 12:if(p&2048){Jr(i,a,l,h),i=a.stateNode;try{var _=a.memoizedProps,A=_.id,L=_.onPostCommit;typeof L=="function"&&L(A,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(K){vt(a,a.return,K)}}else Jr(i,a,l,h);break;case 31:Jr(i,a,l,h);break;case 13:Jr(i,a,l,h);break;case 23:break;case 22:_=a.stateNode,A=a.alternate,a.memoizedState!==null?_._visibility&2?Jr(i,a,l,h):uu(i,a):_._visibility&2?Jr(i,a,l,h):(_._visibility|=2,Sl(i,a,l,h,(a.subtreeFlags&10256)!==0||!1)),p&2048&&Np(A,a);break;case 24:Jr(i,a,l,h),p&2048&&kp(a.alternate,a);break;default:Jr(i,a,l,h)}}function Sl(i,a,l,h,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var _=i,A=a,L=l,K=h,le=A.flags;switch(A.tag){case 0:case 11:case 15:Sl(_,A,L,K,p),lu(8,A);break;case 23:break;case 22:var fe=A.stateNode;A.memoizedState!==null?fe._visibility&2?Sl(_,A,L,K,p):uu(_,A):(fe._visibility|=2,Sl(_,A,L,K,p)),p&&le&2048&&Np(A.alternate,A);break;case 24:Sl(_,A,L,K,p),p&&le&2048&&kp(A.alternate,A);break;default:Sl(_,A,L,K,p)}a=a.sibling}}function uu(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,h=a,p=h.flags;switch(h.tag){case 22:uu(l,h),p&2048&&Np(h.alternate,h);break;case 24:uu(l,h),p&2048&&kp(h.alternate,h);break;default:uu(l,h)}a=a.sibling}}var hu=8192;function Al(i,a,l){if(i.subtreeFlags&hu)for(i=i.child;i!==null;)d1(i,a,l),i=i.sibling}function d1(i,a,l){switch(i.tag){case 26:Al(i,a,l),i.flags&hu&&i.memoizedState!==null&&GC(l,Xr,i.memoizedState,i.memoizedProps);break;case 5:Al(i,a,l);break;case 3:case 4:var h=Xr;Xr=ef(i.stateNode.containerInfo),Al(i,a,l),Xr=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=hu,hu=16777216,Al(i,a,l),hu=h):Al(i,a,l));break;default:Al(i,a,l)}}function f1(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function du(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];vn=h,g1(h,i)}f1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)m1(i),i=i.sibling}function m1(i){switch(i.tag){case 0:case 11:case 15:du(i),i.flags&2048&&Gs(9,i,i.return);break;case 3:du(i);break;case 12:du(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Bd(i)):du(i);break;default:du(i)}}function Bd(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];vn=h,g1(h,i)}f1(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Gs(8,a,a.return),Bd(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Bd(a));break;default:Bd(a)}i=i.sibling}}function g1(i,a){for(;vn!==null;){var l=vn;switch(l.tag){case 0:case 11:case 15:Gs(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Qc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,vn=h;else e:for(l=i;vn!==null;){h=vn;var p=h.sibling,_=h.return;if(s1(h),h===l){vn=null;break e}if(p!==null){p.return=_,vn=p;break e}vn=_}}}var oC={getCacheForType:function(i){var a=In(nn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return In(nn).controller.signal}},lC=typeof WeakMap=="function"?WeakMap:Map,dt=0,Nt=null,Ye=null,We=0,_t=0,fr=null,Ks=!1,Il=!1,Dp=!1,os=0,Ht=0,Ys=0,ao=0,Op=0,mr=0,Rl=0,fu=null,nr=null,Mp=!1,Fd=0,p1=0,Hd=1/0,qd=null,Qs=null,dn=0,Ws=null,Cl=null,ls=0,Pp=0,jp=null,y1=null,mu=0,Vp=null;function gr(){return(dt&2)!==0&&We!==0?We&-We:P.T!==null?Hp():$h()}function _1(){if(mr===0)if((We&536870912)===0||nt){var i=qi;qi<<=1,(qi&3932160)===0&&(qi=262144),mr=i}else mr=536870912;return i=hr.current,i!==null&&(i.flags|=32),mr}function rr(i,a,l){(i===Nt&&(_t===2||_t===9)||i.cancelPendingCommit!==null)&&(Nl(i,0),Xs(i,We,mr,!1)),Ma(i,l),((dt&2)===0||i!==Nt)&&(i===Nt&&((dt&2)===0&&(ao|=l),Ht===4&&Xs(i,We,mr,!1)),Ti(i))}function v1(i,a,l){if((dt&6)!==0)throw Error(n(327));var h=!l&&(a&127)===0&&(a&i.expiredLanes)===0||Tn(i,a),p=h?hC(i,a):Up(i,a,!0),_=h;do{if(p===0){Il&&!h&&Xs(i,a,0,!1);break}else{if(l=i.current.alternate,_&&!cC(l)){p=Up(i,a,!1),_=!1;continue}if(p===2){if(_=a,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var L=i;p=fu;var K=L.current.memoizedState.isDehydrated;if(K&&(Nl(L,A).flags|=256),A=Up(L,A,!1),A!==2){if(Dp&&!K){L.errorRecoveryDisabledLanes|=_,ao|=_,p=4;break e}_=nr,nr=p,_!==null&&(nr===null?nr=_:nr.push.apply(nr,_))}p=A}if(_=!1,p!==2)continue}}if(p===1){Nl(i,0),Xs(i,a,0,!0);break}e:{switch(h=i,_=p,_){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:Xs(h,a,mr,!Ks);break e;case 2:nr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(p=Fd+300-xe(),10<p)){if(Xs(h,a,mr,!Ks),En(h,0,!0)!==0)break e;ls=a,h.timeoutHandle=W1(b1.bind(null,h,l,nr,qd,Mp,a,mr,ao,Rl,Ks,_,"Throttled",-0,0),p);break e}b1(h,l,nr,qd,Mp,a,mr,ao,Rl,Ks,_,null,-0,0)}}break}while(!0);Ti(i)}function b1(i,a,l,h,p,_,A,L,K,le,fe,ge,ce,he){if(i.timeoutHandle=-1,ge=a.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$r},d1(a,_,ge);var Te=(_&62914560)===_?Fd-xe():(_&4194048)===_?p1-xe():0;if(Te=KC(ge,Te),Te!==null){ls=_,i.cancelPendingCommit=Te(R1.bind(null,i,a,_,l,h,p,A,L,K,fe,ge,null,ce,he)),Xs(i,_,A,!le);return}}R1(i,a,_,l,h,p,A,L,K)}function cC(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var p=l[h],_=p.getSnapshot;p=p.value;try{if(!cr(_(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Xs(i,a,l,h){a&=~Op,a&=~ao,i.suspendedLanes|=a,i.pingedLanes&=~a,h&&(i.warmLanes|=a),h=i.expirationTimes;for(var p=a;0<p;){var _=31-Dt(p),A=1<<_;h[_]=-1,p&=~A}l!==0&&Pa(i,l,a)}function $d(){return(dt&6)===0?(gu(0),!1):!0}function Lp(){if(Ye!==null){if(_t===0)var i=Ye.return;else i=Ye,Xi=Xa=null,ep(i),bl=null,Xc=0,i=Ye;for(;i!==null;)Xb(i.alternate,i),i=i.return;Ye=null}}function Nl(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,CC(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),ls=0,Lp(),Nt=i,Ye=l=Qi(i.current,null),We=a,_t=0,fr=null,Ks=!1,Il=Tn(i,a),Dp=!1,Rl=mr=Op=ao=Ys=Ht=0,nr=fu=null,Mp=!1,(a&8)!==0&&(a|=a&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=a;0<h;){var p=31-Dt(h),_=1<<p;a|=i[p],h&=~_}return os=a,dd(),l}function w1(i,a){qe=null,P.H=su,a===vl||a===bd?(a=Vv(),_t=3):a===Fg?(a=Vv(),_t=4):_t=a===pp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,fr=a,Ye===null&&(Ht=1,Md(i,Rr(a,i.current)))}function x1(){var i=hr.current;return i===null?!0:(We&4194048)===We?Dr===null:(We&62914560)===We||(We&536870912)!==0?i===Dr:!1}function E1(){var i=P.H;return P.H=su,i===null?su:i}function T1(){var i=P.A;return P.A=oC,i}function Gd(){Ht=4,Ks||(We&4194048)!==We&&hr.current!==null||(Il=!0),(Ys&134217727)===0&&(ao&134217727)===0||Nt===null||Xs(Nt,We,mr,!1)}function Up(i,a,l){var h=dt;dt|=2;var p=E1(),_=T1();(Nt!==i||We!==a)&&(qd=null,Nl(i,a)),a=!1;var A=Ht;e:do try{if(_t!==0&&Ye!==null){var L=Ye,K=fr;switch(_t){case 8:Lp(),A=6;break e;case 3:case 2:case 9:case 6:hr.current===null&&(a=!0);var le=_t;if(_t=0,fr=null,kl(i,L,K,le),l&&Il){A=0;break e}break;default:le=_t,_t=0,fr=null,kl(i,L,K,le)}}uC(),A=Ht;break}catch(fe){w1(i,fe)}while(!0);return a&&i.shellSuspendCounter++,Xi=Xa=null,dt=h,P.H=p,P.A=_,Ye===null&&(Nt=null,We=0,dd()),A}function uC(){for(;Ye!==null;)S1(Ye)}function hC(i,a){var l=dt;dt|=2;var h=E1(),p=T1();Nt!==i||We!==a?(qd=null,Hd=xe()+500,Nl(i,a)):Il=Tn(i,a);e:do try{if(_t!==0&&Ye!==null){a=Ye;var _=fr;t:switch(_t){case 1:_t=0,fr=null,kl(i,a,_,1);break;case 2:case 9:if(Pv(_)){_t=0,fr=null,A1(a);break}a=function(){_t!==2&&_t!==9||Nt!==i||(_t=7),Ti(i)},_.then(a,a);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:Pv(_)?(_t=0,fr=null,A1(a)):(_t=0,fr=null,kl(i,a,_,7));break;case 5:var A=null;switch(Ye.tag){case 26:A=Ye.memoizedState;case 5:case 27:var L=Ye;if(A?hw(A):L.stateNode.complete){_t=0,fr=null;var K=L.sibling;if(K!==null)Ye=K;else{var le=L.return;le!==null?(Ye=le,Kd(le)):Ye=null}break t}}_t=0,fr=null,kl(i,a,_,5);break;case 6:_t=0,fr=null,kl(i,a,_,6);break;case 8:Lp(),Ht=6;break e;default:throw Error(n(462))}}dC();break}catch(fe){w1(i,fe)}while(!0);return Xi=Xa=null,P.H=h,P.A=p,dt=l,Ye!==null?0:(Nt=null,We=0,dd(),Ht)}function dC(){for(;Ye!==null&&!Be();)S1(Ye)}function S1(i){var a=Qb(i.alternate,i,os);i.memoizedProps=i.pendingProps,a===null?Kd(i):Ye=a}function A1(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=Hb(l,a,a.pendingProps,a.type,void 0,We);break;case 11:a=Hb(l,a,a.pendingProps,a.type.render,a.ref,We);break;case 5:ep(a);default:Xb(l,a),a=Ye=Tv(a,os),a=Qb(l,a,os)}i.memoizedProps=i.pendingProps,a===null?Kd(i):Ye=a}function kl(i,a,l,h){Xi=Xa=null,ep(a),bl=null,Xc=0;var p=a.return;try{if(eC(i,p,a,l,We)){Ht=1,Md(i,Rr(l,i.current)),Ye=null;return}}catch(_){if(p!==null)throw Ye=p,_;Ht=1,Md(i,Rr(l,i.current)),Ye=null;return}a.flags&32768?(nt||h===1?i=!0:Il||(We&536870912)!==0?i=!1:(Ks=i=!0,(h===2||h===9||h===3||h===6)&&(h=hr.current,h!==null&&h.tag===13&&(h.flags|=16384))),I1(a,i)):Kd(a)}function Kd(i){var a=i;do{if((a.flags&32768)!==0){I1(a,Ks);return}i=a.return;var l=rC(a.alternate,a,os);if(l!==null){Ye=l;return}if(a=a.sibling,a!==null){Ye=a;return}Ye=a=i}while(a!==null);Ht===0&&(Ht=5)}function I1(i,a){do{var l=iC(i.alternate,i);if(l!==null){l.flags&=32767,Ye=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){Ye=i;return}Ye=i=l}while(i!==null);Ht=6,Ye=null}function R1(i,a,l,h,p,_,A,L,K){i.cancelPendingCommit=null;do Yd();while(dn!==0);if((dt&6)!==0)throw Error(n(327));if(a!==null){if(a===i.current)throw Error(n(177));if(_=a.lanes|a.childLanes,_|=Ig,_g(i,l,_,A,L,K),i===Nt&&(Ye=Nt=null,We=0),Cl=a,Ws=i,ls=l,Pp=_,jp=p,y1=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,pC(ut,function(){return O1(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=P.T,P.T=null,p=O.p,O.p=2,A=dt,dt|=4;try{sC(i,a,l)}finally{dt=A,O.p=p,P.T=h}}dn=1,C1(),N1(),k1()}}function C1(){if(dn===1){dn=0;var i=Ws,a=Cl,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=P.T,P.T=null;var h=O.p;O.p=2;var p=dt;dt|=4;try{c1(a,i);var _=Xp,A=gv(i.containerInfo),L=_.focusedElem,K=_.selectionRange;if(A!==L&&L&&L.ownerDocument&&mv(L.ownerDocument.documentElement,L)){if(K!==null&&xg(L)){var le=K.start,fe=K.end;if(fe===void 0&&(fe=le),"selectionStart"in L)L.selectionStart=le,L.selectionEnd=Math.min(fe,L.value.length);else{var ge=L.ownerDocument||document,ce=ge&&ge.defaultView||window;if(ce.getSelection){var he=ce.getSelection(),Te=L.textContent.length,De=Math.min(K.start,Te),It=K.end===void 0?De:Math.min(K.end,Te);!he.extend&&De>It&&(A=It,It=De,De=A);var te=fv(L,De),X=fv(L,It);if(te&&X&&(he.rangeCount!==1||he.anchorNode!==te.node||he.anchorOffset!==te.offset||he.focusNode!==X.node||he.focusOffset!==X.offset)){var oe=ge.createRange();oe.setStart(te.node,te.offset),he.removeAllRanges(),De>It?(he.addRange(oe),he.extend(X.node,X.offset)):(oe.setEnd(X.node,X.offset),he.addRange(oe))}}}}for(ge=[],he=L;he=he.parentNode;)he.nodeType===1&&ge.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<ge.length;L++){var me=ge[L];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}of=!!Wp,Xp=Wp=null}finally{dt=p,O.p=h,P.T=l}}i.current=a,dn=2}}function N1(){if(dn===2){dn=0;var i=Ws,a=Cl,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=P.T,P.T=null;var h=O.p;O.p=2;var p=dt;dt|=4;try{i1(i,a.alternate,a)}finally{dt=p,O.p=h,P.T=l}}dn=3}}function k1(){if(dn===4||dn===3){dn=0,Me();var i=Ws,a=Cl,l=ls,h=y1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?dn=5:(dn=0,Cl=Ws=null,D1(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(Qs=null),$i(l),a=a.stateNode,Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(Gt,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=P.T,p=O.p,O.p=2,P.T=null;try{for(var _=i.onRecoverableError,A=0;A<h.length;A++){var L=h[A];_(L.value,{componentStack:L.stack})}}finally{P.T=a,O.p=p}}(ls&3)!==0&&Yd(),Ti(i),p=i.pendingLanes,(l&261930)!==0&&(p&42)!==0?i===Vp?mu++:(mu=0,Vp=i):mu=0,gu(0)}}function D1(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Qc(a)))}function Yd(){return C1(),N1(),k1(),O1()}function O1(){if(dn!==5)return!1;var i=Ws,a=Pp;Pp=0;var l=$i(ls),h=P.T,p=O.p;try{O.p=32>l?32:l,P.T=null,l=jp,jp=null;var _=Ws,A=ls;if(dn=0,Cl=Ws=null,ls=0,(dt&6)!==0)throw Error(n(331));var L=dt;if(dt|=4,m1(_.current),h1(_,_.current,A,l),dt=L,gu(0,!1),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(Gt,_)}catch{}return!0}finally{O.p=p,P.T=h,D1(i,a)}}function M1(i,a,l){a=Rr(l,a),a=gp(i.stateNode,a,2),i=Hs(i,a,2),i!==null&&(Ma(i,2),Ti(i))}function vt(i,a,l){if(i.tag===3)M1(i,i,l);else for(;a!==null;){if(a.tag===3){M1(a,i,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Qs===null||!Qs.has(h))){i=Rr(l,i),l=Pb(2),h=Hs(a,l,2),h!==null&&(jb(l,h,a,i),Ma(h,2),Ti(h));break}}a=a.return}}function zp(i,a,l){var h=i.pingCache;if(h===null){h=i.pingCache=new lC;var p=new Set;h.set(a,p)}else p=h.get(a),p===void 0&&(p=new Set,h.set(a,p));p.has(l)||(Dp=!0,p.add(l),i=fC.bind(null,i,a,l),a.then(i,i))}function fC(i,a,l){var h=i.pingCache;h!==null&&h.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Nt===i&&(We&l)===l&&(Ht===4||Ht===3&&(We&62914560)===We&&300>xe()-Fd?(dt&2)===0&&Nl(i,0):Op|=l,Rl===We&&(Rl=0)),Ti(i)}function P1(i,a){a===0&&(a=xr()),i=Ya(i,a),i!==null&&(Ma(i,a),Ti(i))}function mC(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),P1(i,l)}function gC(i,a){var l=0;switch(i.tag){case 31:case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(a),P1(i,l)}function pC(i,a){return pe(i,a)}var Qd=null,Dl=null,Bp=!1,Wd=!1,Fp=!1,Js=0;function Ti(i){i!==Dl&&i.next===null&&(Dl===null?Qd=Dl=i:Dl=Dl.next=i),Wd=!0,Bp||(Bp=!0,_C())}function gu(i,a){if(!Fp&&Wd){Fp=!0;do for(var l=!1,h=Qd;h!==null;){if(i!==0){var p=h.pendingLanes;if(p===0)var _=0;else{var A=h.suspendedLanes,L=h.pingedLanes;_=(1<<31-Dt(42|i)+1)-1,_&=p&~(A&~L),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,U1(h,_))}else _=We,_=En(h,h===Nt?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(_&3)===0||Tn(h,_)||(l=!0,U1(h,_));h=h.next}while(l);Fp=!1}}function yC(){j1()}function j1(){Wd=Bp=!1;var i=0;Js!==0&&RC()&&(i=Js);for(var a=xe(),l=null,h=Qd;h!==null;){var p=h.next,_=V1(h,a);_===0?(h.next=null,l===null?Qd=p:l.next=p,p===null&&(Dl=l)):(l=h,(i!==0||(_&3)!==0)&&(Wd=!0)),h=p}dn!==0&&dn!==5||gu(i),Js!==0&&(Js=0)}function V1(i,a){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-Dt(_),L=1<<A,K=p[A];K===-1?((L&l)===0||(L&h)!==0)&&(p[A]=Wo(L,a)):K<=a&&(i.expiredLanes|=L),_&=~L}if(a=Nt,l=We,l=En(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===a&&(_t===2||_t===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Ee(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Tn(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(h!==null&&Ee(h),$i(l)){case 2:case 8:l=Fn;break;case 32:l=ut;break;case 268435456:l=Bt;break;default:l=ut}return h=L1.bind(null,i),l=pe(l,h),i.callbackPriority=a,i.callbackNode=l,a}return h!==null&&h!==null&&Ee(h),i.callbackPriority=2,i.callbackNode=null,2}function L1(i,a){if(dn!==0&&dn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Yd()&&i.callbackNode!==l)return null;var h=We;return h=En(i,i===Nt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(v1(i,h,a),V1(i,xe()),i.callbackNode!=null&&i.callbackNode===l?L1.bind(null,i):null)}function U1(i,a){if(Yd())return null;v1(i,a,!0)}function _C(){NC(function(){(dt&6)!==0?pe(gt,yC):j1()})}function Hp(){if(Js===0){var i=yl;i===0&&(i=On,On<<=1,(On&261888)===0&&(On=256)),Js=i}return Js}function z1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:nl(""+i)}function B1(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function vC(i,a,l,h,p){if(a==="submit"&&l&&l.stateNode===p){var _=z1((p[yn]||null).action),A=h.submitter;A&&(a=(a=A[yn]||null)?z1(a.formAction):A.getAttribute("formAction"),a!==null&&(_=a,A=null));var L=new yi("action","action",null,h,p);i.push({event:L,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Js!==0){var K=A?B1(p,A):new FormData(p);cp(l,{pending:!0,data:K,method:p.method,action:_},null,K)}}else typeof _=="function"&&(L.preventDefault(),K=A?B1(p,A):new FormData(p),cp(l,{pending:!0,data:K,method:p.method,action:_},_,K))},currentTarget:p}]})}}for(var qp=0;qp<Ag.length;qp++){var $p=Ag[qp],bC=$p.toLowerCase(),wC=$p[0].toUpperCase()+$p.slice(1);Wr(bC,"on"+wC)}Wr(_v,"onAnimationEnd"),Wr(vv,"onAnimationIteration"),Wr(bv,"onAnimationStart"),Wr("dblclick","onDoubleClick"),Wr("focusin","onFocus"),Wr("focusout","onBlur"),Wr(VR,"onTransitionRun"),Wr(LR,"onTransitionStart"),Wr(UR,"onTransitionCancel"),Wr(wv,"onTransitionEnd"),fi("onMouseEnter",["mouseout","mouseover"]),fi("onMouseLeave",["mouseout","mouseover"]),fi("onPointerEnter",["pointerout","pointerover"]),fi("onPointerLeave",["pointerout","pointerover"]),di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),di("onBeforeInput",["compositionend","keypress","textInput","paste"]),di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pu));function F1(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var _=void 0;if(a)for(var A=h.length-1;0<=A;A--){var L=h[A],K=L.instance,le=L.currentTarget;if(L=L.listener,K!==_&&p.isPropagationStopped())break e;_=L,p.currentTarget=le;try{_(p)}catch(fe){hd(fe)}p.currentTarget=null,_=K}else for(A=0;A<h.length;A++){if(L=h[A],K=L.instance,le=L.currentTarget,L=L.listener,K!==_&&p.isPropagationStopped())break e;_=L,p.currentTarget=le;try{_(p)}catch(fe){hd(fe)}p.currentTarget=null,_=K}}}}function Qe(i,a){var l=a[Xo];l===void 0&&(l=a[Xo]=new Set);var h=i+"__bubble";l.has(h)||(H1(a,i,2,!1),l.add(h))}function Gp(i,a,l){var h=0;a&&(h|=4),H1(l,i,h,a)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Kp(i){if(!i[Xd]){i[Xd]=!0,Rc.forEach(function(l){l!=="selectionchange"&&(xC.has(l)||Gp(l,!1,i),Gp(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Xd]||(a[Xd]=!0,Gp("selectionchange",!1,a))}}function H1(i,a,l,h){switch(_w(a)){case 2:var p=WC;break;case 8:p=XC;break;default:p=ly}l=p.bind(null,a,l,i),p=void 0,!za||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(a,l,{capture:!0,passive:p}):i.addEventListener(a,l,!0):p!==void 0?i.addEventListener(a,l,{passive:p}):i.addEventListener(a,l,!1)}function Yp(i,a,l,h,p){var _=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var A=h.tag;if(A===3||A===4){var L=h.stateNode.containerInfo;if(L===p)break;if(A===4)for(A=h.return;A!==null;){var K=A.tag;if((K===3||K===4)&&A.stateNode.containerInfo===p)return;A=A.return}for(;L!==null;){if(A=ui(L),A===null)return;if(K=A.tag,K===5||K===6||K===26||K===27){h=_=A;continue e}L=L.parentNode}}h=h.return}Os(function(){var le=_,fe=Tr(l),ge=[];e:{var ce=xv.get(i);if(ce!==void 0){var he=yi,Te=i;switch(i){case"keypress":if(Fa(l)===0)break e;case"keydown":case"keyup":he=ld;break;case"focusin":Te="focus",he=qa;break;case"focusout":Te="blur",he=qa;break;case"beforeblur":case"afterblur":he=qa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Zh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=x;break;case _v:case vv:case bv:he=td;break;case wv:he=z;break;case"scroll":case"scrollend":he=zc;break;case"wheel":he=ue;break;case"copy":case"cut":case"paste":he=nd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Yi;break;case"toggle":case"beforetoggle":he=He}var De=(a&4)!==0,It=!De&&(i==="scroll"||i==="scrollend"),te=De?ce!==null?ce+"Capture":null:ce;De=[];for(var X=le,oe;X!==null;){var me=X;if(oe=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||oe===null||te===null||(me=Gr(X,te),me!=null&&De.push(yu(X,me,oe))),It)break;X=X.return}0<De.length&&(ce=new he(ce,Te,null,l,fe),ge.push({event:ce,listeners:De}))}}if((a&7)===0){e:{if(ce=i==="mouseover"||i==="pointerover",he=i==="mouseout"||i==="pointerout",ce&&l!==Vc&&(Te=l.relatedTarget||l.fromElement)&&(ui(Te)||Te[li]))break e;if((he||ce)&&(ce=fe.window===fe?fe:(ce=fe.ownerDocument)?ce.defaultView||ce.parentWindow:window,he?(Te=l.relatedTarget||l.toElement,he=le,Te=Te?ui(Te):null,Te!==null&&(It=o(Te),De=Te.tag,Te!==It||De!==5&&De!==27&&De!==6)&&(Te=null)):(he=null,Te=le),he!==Te)){if(De=Bc,me="onMouseLeave",te="onMouseEnter",X="mouse",(i==="pointerout"||i==="pointerover")&&(De=Yi,me="onPointerLeave",te="onPointerEnter",X="pointer"),It=he==null?ce:or(he),oe=Te==null?ce:or(Te),ce=new De(me,X+"leave",he,l,fe),ce.target=It,ce.relatedTarget=oe,me=null,ui(fe)===le&&(De=new De(te,X+"enter",Te,l,fe),De.target=oe,De.relatedTarget=It,me=De),It=me,he&&Te)t:{for(De=EC,te=he,X=Te,oe=0,me=te;me;me=De(me))oe++;me=0;for(var Ne=X;Ne;Ne=De(Ne))me++;for(;0<oe-me;)te=De(te),oe--;for(;0<me-oe;)X=De(X),me--;for(;oe--;){if(te===X||X!==null&&te===X.alternate){De=te;break t}te=De(te),X=De(X)}De=null}else De=null;he!==null&&q1(ge,ce,he,De,!1),Te!==null&&It!==null&&q1(ge,It,Te,De,!0)}}e:{if(ce=le?or(le):window,he=ce.nodeName&&ce.nodeName.toLowerCase(),he==="select"||he==="input"&&ce.type==="file")var lt=ov;else if(sv(ce))if(lv)lt=MR;else{lt=DR;var Ie=kR}else he=ce.nodeName,!he||he.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?le&&tl(le.elementType)&&(lt=ov):lt=OR;if(lt&&(lt=lt(i,le))){av(ge,lt,l,fe);break e}Ie&&Ie(i,ce,le),i==="focusout"&&le&&ce.type==="number"&&le.memoizedProps.value!=null&&Mc(ce,"number",ce.value)}switch(Ie=le?or(le):window,i){case"focusin":(sv(Ie)||Ie.contentEditable==="true")&&(cl=Ie,Eg=le,Gc=null);break;case"focusout":Gc=Eg=cl=null;break;case"mousedown":Tg=!0;break;case"contextmenu":case"mouseup":case"dragend":Tg=!1,pv(ge,l,fe);break;case"selectionchange":if(jR)break;case"keydown":case"keyup":pv(ge,l,fe)}var Ge;if(ht)e:{switch(i){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else ll?$a(i,l)&&(Xe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Xe="onCompositionStart");Xe&&(bi&&l.locale!=="ko"&&(ll||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&ll&&(Ge=Uc()):(pi=fe,Lc="value"in pi?pi.value:pi.textContent,ll=!0)),Ie=Jd(le,Xe),0<Ie.length&&(Xe=new vi(Xe,i,null,l,fe),ge.push({event:Xe,listeners:Ie}),Ge?Xe.data=Ge:(Ge=ol(l),Ge!==null&&(Xe.data=Ge)))),(Ge=Ar?IR(i,l):RR(i,l))&&(Xe=Jd(le,"onBeforeInput"),0<Xe.length&&(Ie=new vi("onBeforeInput","beforeinput",null,l,fe),ge.push({event:Ie,listeners:Xe}),Ie.data=Ge)),vC(ge,i,le,l,fe)}F1(ge,a)})}function yu(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Jd(i,a){for(var l=a+"Capture",h=[];i!==null;){var p=i,_=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||_===null||(p=Gr(i,l),p!=null&&h.unshift(yu(i,p,_)),p=Gr(i,a),p!=null&&h.push(yu(i,p,_))),i.tag===3)return h;i=i.return}return[]}function EC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function q1(i,a,l,h,p){for(var _=a._reactName,A=[];l!==null&&l!==h;){var L=l,K=L.alternate,le=L.stateNode;if(L=L.tag,K!==null&&K===h)break;L!==5&&L!==26&&L!==27||le===null||(K=le,p?(le=Gr(l,_),le!=null&&A.unshift(yu(l,le,K))):p||(le=Gr(l,_),le!=null&&A.push(yu(l,le,K)))),l=l.return}A.length!==0&&i.push({event:a,listeners:A})}var TC=/\r\n?/g,SC=/\u0000|\uFFFD/g;function $1(i){return(typeof i=="string"?i:""+i).replace(TC,`
`).replace(SC,"")}function G1(i,a){return a=$1(a),$1(i)===a}function At(i,a,l,h,p,_){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Jn(i,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Jn(i,""+h);break;case"className":lr(i,"class",h);break;case"tabIndex":lr(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":lr(i,l,h);break;case"style":jc(i,h,_);break;case"data":if(a!=="object"){lr(i,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=nl(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(a!=="input"&&At(i,a,"name",p.name,p,null),At(i,a,"formEncType",p.formEncType,p,null),At(i,a,"formMethod",p.formMethod,p,null),At(i,a,"formTarget",p.formTarget,p,null)):(At(i,a,"encType",p.encType,p,null),At(i,a,"method",p.method,p,null),At(i,a,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=nl(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=$r);break;case"onScroll":h!=null&&Qe("scroll",i);break;case"onScrollEnd":h!=null&&Qe("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=nl(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":Qe("beforetoggle",i),Qe("toggle",i),Zo(i,"popover",h);break;case"xlinkActuate":tn(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":tn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":tn(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":tn(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":tn(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":tn(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":tn(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":tn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":tn(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Zo(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Jh.get(l)||l,Zo(i,l,h))}}function Qp(i,a,l,h,p,_){switch(l){case"style":jc(i,h,_);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"children":typeof h=="string"?Jn(i,h):(typeof h=="number"||typeof h=="bigint")&&Jn(i,""+h);break;case"onScroll":h!=null&&Qe("scroll",i);break;case"onScrollEnd":h!=null&&Qe("scrollend",i);break;case"onClick":h!=null&&(i.onclick=$r);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),_=i[yn]||null,_=_!=null?_[l]:null,typeof _=="function"&&i.removeEventListener(a,_,p),typeof h=="function")){typeof _!="function"&&_!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,h,p);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):Zo(i,l,h)}}}function Cn(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",i),Qe("load",i);var h=!1,p=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var A=l[_];if(A!=null)switch(_){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:At(i,a,_,A,l,null)}}p&&At(i,a,"srcSet",l.srcSet,l,null),h&&At(i,a,"src",l.src,l,null);return;case"input":Qe("invalid",i);var L=_=A=p=null,K=null,le=null;for(h in l)if(l.hasOwnProperty(h)){var fe=l[h];if(fe!=null)switch(h){case"name":p=fe;break;case"type":A=fe;break;case"checked":K=fe;break;case"defaultChecked":le=fe;break;case"value":_=fe;break;case"defaultValue":L=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(n(137,a));break;default:At(i,a,h,fe,l,null)}}Qh(i,_,L,K,le,A,p,!1);return;case"select":Qe("invalid",i),h=A=_=null;for(p in l)if(l.hasOwnProperty(p)&&(L=l[p],L!=null))switch(p){case"value":_=L;break;case"defaultValue":A=L;break;case"multiple":h=L;default:At(i,a,p,L,l,null)}a=_,l=A,i.multiple=!!h,a!=null?Cs(i,!!h,a,!1):l!=null&&Cs(i,!!h,l,!0);return;case"textarea":Qe("invalid",i),_=p=h=null;for(A in l)if(l.hasOwnProperty(A)&&(L=l[A],L!=null))switch(A){case"value":h=L;break;case"defaultValue":p=L;break;case"children":_=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(n(91));break;default:At(i,a,A,L,l,null)}Ns(i,h,p,_);return;case"option":for(K in l)if(l.hasOwnProperty(K)&&(h=l[K],h!=null))switch(K){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:At(i,a,K,h,l,null)}return;case"dialog":Qe("beforetoggle",i),Qe("toggle",i),Qe("cancel",i),Qe("close",i);break;case"iframe":case"object":Qe("load",i);break;case"video":case"audio":for(h=0;h<pu.length;h++)Qe(pu[h],i);break;case"image":Qe("error",i),Qe("load",i);break;case"details":Qe("toggle",i);break;case"embed":case"source":case"link":Qe("error",i),Qe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in l)if(l.hasOwnProperty(le)&&(h=l[le],h!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:At(i,a,le,h,l,null)}return;default:if(tl(a)){for(fe in l)l.hasOwnProperty(fe)&&(h=l[fe],h!==void 0&&Qp(i,a,fe,h,l,void 0));return}}for(L in l)l.hasOwnProperty(L)&&(h=l[L],h!=null&&At(i,a,L,h,l,null))}function AC(i,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,_=null,A=null,L=null,K=null,le=null,fe=null;for(he in l){var ge=l[he];if(l.hasOwnProperty(he)&&ge!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":K=ge;default:h.hasOwnProperty(he)||At(i,a,he,null,h,ge)}}for(var ce in h){var he=h[ce];if(ge=l[ce],h.hasOwnProperty(ce)&&(he!=null||ge!=null))switch(ce){case"type":_=he;break;case"name":p=he;break;case"checked":le=he;break;case"defaultChecked":fe=he;break;case"value":A=he;break;case"defaultValue":L=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(n(137,a));break;default:he!==ge&&At(i,a,ce,he,h,ge)}}el(i,A,L,K,le,fe,_,p);return;case"select":he=A=L=ce=null;for(_ in l)if(K=l[_],l.hasOwnProperty(_)&&K!=null)switch(_){case"value":break;case"multiple":he=K;default:h.hasOwnProperty(_)||At(i,a,_,null,h,K)}for(p in h)if(_=h[p],K=l[p],h.hasOwnProperty(p)&&(_!=null||K!=null))switch(p){case"value":ce=_;break;case"defaultValue":L=_;break;case"multiple":A=_;default:_!==K&&At(i,a,p,_,h,K)}a=L,l=A,h=he,ce!=null?Cs(i,!!l,ce,!1):!!h!=!!l&&(a!=null?Cs(i,!!l,a,!0):Cs(i,!!l,l?[]:"",!1));return;case"textarea":he=ce=null;for(L in l)if(p=l[L],l.hasOwnProperty(L)&&p!=null&&!h.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:At(i,a,L,null,h,p)}for(A in h)if(p=h[A],_=l[A],h.hasOwnProperty(A)&&(p!=null||_!=null))switch(A){case"value":ce=p;break;case"defaultValue":he=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(n(91));break;default:p!==_&&At(i,a,A,p,h,_)}Wh(i,ce,he);return;case"option":for(var Te in l)if(ce=l[Te],l.hasOwnProperty(Te)&&ce!=null&&!h.hasOwnProperty(Te))switch(Te){case"selected":i.selected=!1;break;default:At(i,a,Te,null,h,ce)}for(K in h)if(ce=h[K],he=l[K],h.hasOwnProperty(K)&&ce!==he&&(ce!=null||he!=null))switch(K){case"selected":i.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:At(i,a,K,ce,h,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in l)ce=l[De],l.hasOwnProperty(De)&&ce!=null&&!h.hasOwnProperty(De)&&At(i,a,De,null,h,ce);for(le in h)if(ce=h[le],he=l[le],h.hasOwnProperty(le)&&ce!==he&&(ce!=null||he!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(n(137,a));break;default:At(i,a,le,ce,h,he)}return;default:if(tl(a)){for(var It in l)ce=l[It],l.hasOwnProperty(It)&&ce!==void 0&&!h.hasOwnProperty(It)&&Qp(i,a,It,void 0,h,ce);for(fe in h)ce=h[fe],he=l[fe],!h.hasOwnProperty(fe)||ce===he||ce===void 0&&he===void 0||Qp(i,a,fe,ce,h,he);return}}for(var te in l)ce=l[te],l.hasOwnProperty(te)&&ce!=null&&!h.hasOwnProperty(te)&&At(i,a,te,null,h,ce);for(ge in h)ce=h[ge],he=l[ge],!h.hasOwnProperty(ge)||ce===he||ce==null&&he==null||At(i,a,ge,ce,h,he)}function K1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function IC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var p=l[h],_=p.transferSize,A=p.initiatorType,L=p.duration;if(_&&L&&K1(A)){for(A=0,L=p.responseEnd,h+=1;h<l.length;h++){var K=l[h],le=K.startTime;if(le>L)break;var fe=K.transferSize,ge=K.initiatorType;fe&&K1(ge)&&(K=K.responseEnd,A+=fe*(K<L?1:(L-le)/(K-le)))}if(--h,a+=8*(_+A)/(p.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Wp=null,Xp=null;function Zd(i){return i.nodeType===9?i:i.ownerDocument}function Y1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Q1(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Jp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Zp=null;function RC(){var i=window.event;return i&&i.type==="popstate"?i===Zp?!1:(Zp=i,!0):(Zp=null,!1)}var W1=typeof setTimeout=="function"?setTimeout:void 0,CC=typeof clearTimeout=="function"?clearTimeout:void 0,X1=typeof Promise=="function"?Promise:void 0,NC=typeof queueMicrotask=="function"?queueMicrotask:typeof X1<"u"?function(i){return X1.resolve(null).then(i).catch(kC)}:W1;function kC(i){setTimeout(function(){throw i})}function Zs(i){return i==="head"}function J1(i,a){var l=a,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(h===0){i.removeChild(p),jl(a);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")_u(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,_u(l);for(var _=l.firstChild;_;){var A=_.nextSibling,L=_.nodeName;_[ci]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=A}}else l==="body"&&_u(i.ownerDocument.body);l=p}while(l);jl(a)}function Z1(i,a){var l=i;i=0;do{var h=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=h}while(l)}function ey(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ey(l),Jo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function DC(i,a,l,h){for(;i.nodeType===1;){var p=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[ci])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var _=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Or(i.nextSibling),i===null)break}return null}function OC(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Or(i.nextSibling),i===null))return null;return i}function ew(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Or(i.nextSibling),i===null))return null;return i}function ty(i){return i.data==="$?"||i.data==="$~"}function ny(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function MC(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Or(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var ry=null;function tw(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return Or(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function nw(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function rw(i,a,l){switch(a=Zd(l),i){case"html":if(i=a.documentElement,!i)throw Error(n(452));return i;case"head":if(i=a.head,!i)throw Error(n(453));return i;case"body":if(i=a.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function _u(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Jo(i)}var Mr=new Map,iw=new Set;function ef(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var cs=O.d;O.d={f:PC,r:jC,D:VC,C:LC,L:UC,m:zC,X:FC,S:BC,M:HC};function PC(){var i=cs.f(),a=$d();return i||a}function jC(i){var a=Er(i);a!==null&&a.tag===5&&a.type==="form"?wb(a):cs.r(i)}var Ol=typeof document>"u"?null:document;function sw(i,a,l){var h=Ol;if(h&&typeof a=="string"&&a){var p=Xn(a);p='link[rel="'+i+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),iw.has(p)||(iw.add(p),i={rel:i,crossOrigin:l,href:a},h.querySelector(p)===null&&(a=h.createElement("link"),Cn(a,"link",i),en(a),h.head.appendChild(a)))}}function VC(i){cs.D(i),sw("dns-prefetch",i,null)}function LC(i,a){cs.C(i,a),sw("preconnect",i,a)}function UC(i,a,l){cs.L(i,a,l);var h=Ol;if(h&&i&&a){var p='link[rel="preload"][as="'+Xn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Xn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Xn(l.imageSizes)+'"]')):p+='[href="'+Xn(i)+'"]';var _=p;switch(a){case"style":_=Ml(i);break;case"script":_=Pl(i)}Mr.has(_)||(i=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Mr.set(_,i),h.querySelector(p)!==null||a==="style"&&h.querySelector(vu(_))||a==="script"&&h.querySelector(bu(_))||(a=h.createElement("link"),Cn(a,"link",i),en(a),h.head.appendChild(a)))}}function zC(i,a){cs.m(i,a);var l=Ol;if(l&&i){var h=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Xn(h)+'"][href="'+Xn(i)+'"]',_=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Pl(i)}if(!Mr.has(_)&&(i=y({rel:"modulepreload",href:i},a),Mr.set(_,i),l.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(bu(_)))return}h=l.createElement("link"),Cn(h,"link",i),en(h),l.head.appendChild(h)}}}function BC(i,a,l){cs.S(i,a,l);var h=Ol;if(h&&i){var p=hi(h).hoistableStyles,_=Ml(i);a=a||"default";var A=p.get(_);if(!A){var L={loading:0,preload:null};if(A=h.querySelector(vu(_)))L.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Mr.get(_))&&iy(i,l);var K=A=h.createElement("link");en(K),Cn(K,"link",i),K._p=new Promise(function(le,fe){K.onload=le,K.onerror=fe}),K.addEventListener("load",function(){L.loading|=1}),K.addEventListener("error",function(){L.loading|=2}),L.loading|=4,tf(A,a,h)}A={type:"stylesheet",instance:A,count:1,state:L},p.set(_,A)}}}function FC(i,a){cs.X(i,a);var l=Ol;if(l&&i){var h=hi(l).hoistableScripts,p=Pl(i),_=h.get(p);_||(_=l.querySelector(bu(p)),_||(i=y({src:i,async:!0},a),(a=Mr.get(p))&&sy(i,a),_=l.createElement("script"),en(_),Cn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(p,_))}}function HC(i,a){cs.M(i,a);var l=Ol;if(l&&i){var h=hi(l).hoistableScripts,p=Pl(i),_=h.get(p);_||(_=l.querySelector(bu(p)),_||(i=y({src:i,async:!0,type:"module"},a),(a=Mr.get(p))&&sy(i,a),_=l.createElement("script"),en(_),Cn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(p,_))}}function aw(i,a,l,h){var p=(p=_e.current)?ef(p):null;if(!p)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Ml(l.href),l=hi(p).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Ml(l.href);var _=hi(p).hoistableStyles,A=_.get(i);if(A||(p=p.ownerDocument||p,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=p.querySelector(vu(i)))&&!_._p&&(A.instance=_,A.state.loading=5),Mr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Mr.set(i,l),_||qC(p,i,l,A.state))),a&&h===null)throw Error(n(528,""));return A}if(a&&h!==null)throw Error(n(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Pl(l),l=hi(p).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Ml(i){return'href="'+Xn(i)+'"'}function vu(i){return'link[rel="stylesheet"]['+i+"]"}function ow(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function qC(i,a,l,h){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=i.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Cn(a,"link",l),en(a),i.head.appendChild(a))}function Pl(i){return'[src="'+Xn(i)+'"]'}function bu(i){return"script[async]"+i}function lw(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=i.querySelector('style[data-href~="'+Xn(l.href)+'"]');if(h)return a.instance=h,en(h),h;var p=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),en(h),Cn(h,"style",p),tf(h,l.precedence,i),a.instance=h;case"stylesheet":p=Ml(l.href);var _=i.querySelector(vu(p));if(_)return a.state.loading|=4,a.instance=_,en(_),_;h=ow(l),(p=Mr.get(p))&&iy(h,p),_=(i.ownerDocument||i).createElement("link"),en(_);var A=_;return A._p=new Promise(function(L,K){A.onload=L,A.onerror=K}),Cn(_,"link",h),a.state.loading|=4,tf(_,l.precedence,i),a.instance=_;case"script":return _=Pl(l.src),(p=i.querySelector(bu(_)))?(a.instance=p,en(p),p):(h=l,(p=Mr.get(_))&&(h=y({},l),sy(h,p)),i=i.ownerDocument||i,p=i.createElement("script"),en(p),Cn(p,"link",h),i.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,tf(h,l.precedence,i));return a.instance}function tf(i,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,_=p,A=0;A<h.length;A++){var L=h[A];if(L.dataset.precedence===a)_=L;else if(_!==p)break}_?_.parentNode.insertBefore(i,_.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function iy(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function sy(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var nf=null;function cw(i,a,l){if(nf===null){var h=new Map,p=nf=new Map;p.set(l,h)}else p=nf,h=p.get(l),h||(h=new Map,p.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),p=0;p<l.length;p++){var _=l[p];if(!(_[ci]||_[Zt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(a)||"";A=i+A;var L=h.get(A);L?L.push(_):h.set(A,[_])}}return h}function uw(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function $C(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function hw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function GC(i,a,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Ml(h.href),_=a.querySelector(vu(p));if(_){a=_._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=rf.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=_,en(_);return}_=a.ownerDocument||a,h=ow(h),(p=Mr.get(p))&&iy(h,p),_=_.createElement("link"),en(_);var A=_;A._p=new Promise(function(L,K){A.onload=L,A.onerror=K}),Cn(_,"link",h),l.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=rf.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var ay=0;function KC(i,a){return i.stylesheets&&i.count===0&&af(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var h=setTimeout(function(){if(i.stylesheets&&af(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+a);0<i.imgBytes&&ay===0&&(ay=62500*IC());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&af(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>ay?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(p)}}:null}function rf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)af(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var sf=null;function af(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,sf=new Map,a.forEach(YC,i),sf=null,rf.call(i))}function YC(i,a){if(!(a.state.loading&4)){var l=sf.get(i);if(l)var h=l.get(null);else{l=new Map,sf.set(i,l);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<p.length;_++){var A=p[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),h=A)}h&&l.set(null,h)}p=a.instance,A=p.getAttribute("data-precedence"),_=l.get(A)||h,_===h&&l.set(null,p),l.set(A,p),this.count++,h=rf.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),_?_.parentNode.insertBefore(p,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),a.state.loading|=4}}var wu={$$typeof:F,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function QC(i,a,l,h,p,_,A,L,K){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pn(0),this.hiddenUpdates=pn(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function dw(i,a,l,h,p,_,A,L,K,le,fe,ge){return i=new QC(i,a,l,A,K,le,fe,ge,L),a=1,_===!0&&(a|=24),_=ur(3,null,null,a),i.current=_,_.stateNode=i,a=Ug(),a.refCount++,i.pooledCache=a,a.refCount++,_.memoizedState={element:h,isDehydrated:l,cache:a},Hg(_),i}function fw(i){return i?(i=dl,i):dl}function mw(i,a,l,h,p,_){p=fw(p),h.context===null?h.context=p:h.pendingContext=p,h=Fs(a),h.payload={element:l},_=_===void 0?null:_,_!==null&&(h.callback=_),l=Hs(i,h,a),l!==null&&(rr(l,i,a),Zc(l,i,a))}function gw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function oy(i,a){gw(i,a),(i=i.alternate)&&gw(i,a)}function pw(i){if(i.tag===13||i.tag===31){var a=Ya(i,67108864);a!==null&&rr(a,i,67108864),oy(i,67108864)}}function yw(i){if(i.tag===13||i.tag===31){var a=gr();a=ja(a);var l=Ya(i,a);l!==null&&rr(l,i,a),oy(i,a)}}var of=!0;function WC(i,a,l,h){var p=P.T;P.T=null;var _=O.p;try{O.p=2,ly(i,a,l,h)}finally{O.p=_,P.T=p}}function XC(i,a,l,h){var p=P.T;P.T=null;var _=O.p;try{O.p=8,ly(i,a,l,h)}finally{O.p=_,P.T=p}}function ly(i,a,l,h){if(of){var p=cy(h);if(p===null)Yp(i,a,h,lf,l),vw(i,h);else if(ZC(p,i,a,l,h))h.stopPropagation();else if(vw(i,h),a&4&&-1<JC.indexOf(i)){for(;p!==null;){var _=Er(p);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=hn(_.pendingLanes);if(A!==0){var L=_;for(L.pendingLanes|=2,L.entangledLanes|=2;A;){var K=1<<31-Dt(A);L.entanglements[1]|=K,A&=~K}Ti(_),(dt&6)===0&&(Hd=xe()+500,gu(0))}}break;case 31:case 13:L=Ya(_,2),L!==null&&rr(L,_,2),$d(),oy(_,2)}if(_=cy(h),_===null&&Yp(i,a,h,lf,l),_===p)break;p=_}p!==null&&h.stopPropagation()}else Yp(i,a,h,null,l)}}function cy(i){return i=Tr(i),uy(i)}var lf=null;function uy(i){if(lf=null,i=ui(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=c(a),i!==null)return i;i=null}else if(l===31){if(i=u(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return lf=i,null}function _w(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tt()){case gt:return 2;case Fn:return 8;case ut:case Hn:return 32;case Bt:return 268435456;default:return 32}default:return 32}}var hy=!1,ea=null,ta=null,na=null,xu=new Map,Eu=new Map,ra=[],JC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vw(i,a){switch(i){case"focusin":case"focusout":ea=null;break;case"dragenter":case"dragleave":ta=null;break;case"mouseover":case"mouseout":na=null;break;case"pointerover":case"pointerout":xu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eu.delete(a.pointerId)}}function Tu(i,a,l,h,p,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:_,targetContainers:[p]},a!==null&&(a=Er(a),a!==null&&pw(a)),i):(i.eventSystemFlags|=h,a=i.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),i)}function ZC(i,a,l,h,p){switch(a){case"focusin":return ea=Tu(ea,i,a,l,h,p),!0;case"dragenter":return ta=Tu(ta,i,a,l,h,p),!0;case"mouseover":return na=Tu(na,i,a,l,h,p),!0;case"pointerover":var _=p.pointerId;return xu.set(_,Tu(xu.get(_)||null,i,a,l,h,p)),!0;case"gotpointercapture":return _=p.pointerId,Eu.set(_,Tu(Eu.get(_)||null,i,a,l,h,p)),!0}return!1}function bw(i){var a=ui(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){i.blockedOn=a,Hr(i.priority,function(){yw(l)});return}}else if(a===31){if(a=u(l),a!==null){i.blockedOn=a,Hr(i.priority,function(){yw(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function cf(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=cy(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);Vc=h,l.target.dispatchEvent(h),Vc=null}else return a=Er(l),a!==null&&pw(a),i.blockedOn=l,!1;a.shift()}return!0}function ww(i,a,l){cf(i)&&l.delete(a)}function eN(){hy=!1,ea!==null&&cf(ea)&&(ea=null),ta!==null&&cf(ta)&&(ta=null),na!==null&&cf(na)&&(na=null),xu.forEach(ww),Eu.forEach(ww)}function uf(i,a){i.blockedOn===a&&(i.blockedOn=null,hy||(hy=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,eN)))}var hf=null;function xw(i){hf!==i&&(hf=i,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){hf===i&&(hf=null);for(var a=0;a<i.length;a+=3){var l=i[a],h=i[a+1],p=i[a+2];if(typeof h!="function"){if(uy(h||l)===null)continue;break}var _=Er(l);_!==null&&(i.splice(a,3),a-=3,cp(_,{pending:!0,data:p,method:l.method,action:h},h,p))}}))}function jl(i){function a(K){return uf(K,i)}ea!==null&&uf(ea,i),ta!==null&&uf(ta,i),na!==null&&uf(na,i),xu.forEach(a),Eu.forEach(a);for(var l=0;l<ra.length;l++){var h=ra[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<ra.length&&(l=ra[0],l.blockedOn===null);)bw(l),l.blockedOn===null&&ra.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var p=l[h],_=l[h+1],A=p[yn]||null;if(typeof _=="function")A||xw(l);else if(A){var L=null;if(_&&_.hasAttribute("formAction")){if(p=_,A=_[yn]||null)L=A.formAction;else if(uy(p)!==null)continue}else L=A.action;typeof L=="function"?l[h+1]=L:(l.splice(h,3),h-=3),xw(l)}}}function Ew(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return p=A})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function dy(i){this._internalRoot=i}df.prototype.render=dy.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));var l=a.current,h=gr();mw(l,h,i,a,null,null)},df.prototype.unmount=dy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;mw(i.current,2,null,i,null,null),$d(),a[li]=null}};function df(i){this._internalRoot=i}df.prototype.unstable_scheduleHydration=function(i){if(i){var a=$h();i={blockedOn:null,target:i,priority:a};for(var l=0;l<ra.length&&a!==0&&a<ra[l].priority;l++);ra.splice(l,0,i),l===0&&bw(i)}};var Tw=e.version;if(Tw!=="19.2.3")throw Error(n(527,Tw,"19.2.3"));O.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(a),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var tN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{Gt=ff.inject(tN),Et=ff}catch{}}return Au.createRoot=function(i,a){if(!s(i))throw Error(n(299));var l=!1,h="",p=kb,_=Db,A=Ob;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError)),a=dw(i,1,!1,null,null,l,h,null,p,_,A,Ew),i[li]=a.current,Kp(i),new dy(a)},Au.hydrateRoot=function(i,a,l){if(!s(i))throw Error(n(299));var h=!1,p="",_=kb,A=Db,L=Ob,K=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(L=l.onRecoverableError),l.formState!==void 0&&(K=l.formState)),a=dw(i,1,!0,a,l??null,h,p,K,_,A,L,Ew),a.context=fw(null),l=a.current,h=gr(),h=ja(h),p=Fs(h),p.callback=null,Hs(l,p,h),l=h,a.current.lanes=l,Ma(a,l),Ti(a),i[li]=a.current,Kp(i),new df(a)},Au.version="19.2.3",Au}var Mw;function fN(){if(Mw)return gy.exports;Mw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),gy.exports=dN(),gy.exports}var mN=fN();var Pw="popstate";function gN(r={}){function e(s,o){let{pathname:c="/",search:u="",hash:d=""}=zo(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Fy("",{pathname:c,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let c=s.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");u=f===-1?d:d.slice(0,f)}return u+"#"+(typeof o=="string"?o:eh(o))}function n(s,o){Br(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return yN(e,t,n,r)}function zt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Br(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pN(){return Math.random().toString(36).substring(2,10)}function jw(r,e){return{usr:r.state,key:r.key,idx:e}}function Fy(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?zo(e):e,state:t,key:e&&e.key||n||pN()}}function eh({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function zo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function yN(r,e,t,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,c=s.history,u="POP",d=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let M=g(),V=M==null?null:M-f;f=M,d&&d({action:u,location:D.location,delta:V})}function v(M,V){u="PUSH";let H=Fy(D.location,M,V);t&&t(H,M),f=g()+1;let F=jw(H,f),B=D.createHref(H);try{c.pushState(F,"",B)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;s.location.assign(B)}o&&d&&d({action:u,location:D.location,delta:1})}function w(M,V){u="REPLACE";let H=Fy(D.location,M,V);t&&t(H,M),f=g();let F=jw(H,f),B=D.createHref(H);c.replaceState(F,"",B),o&&d&&d({action:u,location:D.location,delta:0})}function E(M){return _N(M)}let D={get action(){return u},get location(){return r(s,c)},listen(M){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Pw,y),d=M,()=>{s.removeEventListener(Pw,y),d=null}},createHref(M){return e(s,M)},createURL:E,encodeLocation(M){let V=E(M);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:v,replace:w,go(M){return c.go(M)}};return D}function _N(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),zt(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:eh(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function KT(r,e,t="/"){return vN(r,e,t,!1)}function vN(r,e,t,n){let s=typeof e=="string"?zo(e):e,o=ps(s.pathname||"/",t);if(o==null)return null;let c=YT(r);bN(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=kN(o);u=CN(c[d],f,n)}return u}function YT(r,e=[],t=[],n="",s=!1){let o=(c,u,d=s,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&d)return;zt(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let y=ms([n,g.relativePath]),v=t.concat(g);c.children&&c.children.length>0&&(zt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),YT(c.children,e,v,y,d)),!(c.path==null&&!c.index)&&e.push({path:y,score:IN(y,c.index),routesMeta:v})};return r.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let d of QT(c.path))o(c,u,!0,d)}),e}function QT(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let c=QT(n.join("/")),u=[];return u.push(...c.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...c),u.map(d=>r.startsWith("/")&&d===""?"/":d)}function bN(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:RN(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var wN=/^:[\w-]+$/,xN=3,EN=2,TN=1,SN=10,AN=-2,Vw=r=>r==="*";function IN(r,e){let t=r.split("/"),n=t.length;return t.some(Vw)&&(n+=AN),e&&(n+=EN),t.filter(s=>!Vw(s)).reduce((s,o)=>s+(wN.test(o)?xN:o===""?TN:SN),n)}function RN(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function CN(r,e,t=!1){let{routesMeta:n}=r,s={},o="/",c=[];for(let u=0;u<n.length;++u){let d=n[u],f=u===n.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=Qf({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),v=d.route;if(!y&&f&&t&&!n[n.length-1].route.index&&(y=Qf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:ms([o,y.pathname]),pathnameBase:jN(ms([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=ms([o,y.pathnameBase]))}return c}function Qf(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=NN(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((f,{paramName:g,isOptional:y},v)=>{if(g==="*"){let E=u[v]||"";c=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const w=u[v];return y&&!w?f[g]=void 0:f[g]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:r}}function NN(r,e=!1,t=!0){Br(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function kN(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Br(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function ps(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}var DN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ON=r=>DN.test(r);function MN(r,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?zo(r):r,o;if(t)if(ON(t))o=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Br(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?o=Lw(t.substring(1),"/"):o=Lw(t,e)}else o=e;return{pathname:o,search:VN(n),hash:LN(s)}}function Lw(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function vy(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function PN(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function WT(r){let e=PN(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function XT(r,e,t,n=!1){let s;typeof r=="string"?s=zo(r):(s={...r},zt(!s.pathname||!s.pathname.includes("?"),vy("?","pathname","search",s)),zt(!s.pathname||!s.pathname.includes("#"),vy("#","pathname","hash",s)),zt(!s.search||!s.search.includes("#"),vy("#","search","hash",s)));let o=r===""||s.pathname==="",c=o?"/":s.pathname,u;if(c==null)u=t;else{let y=e.length-1;if(!n&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let d=MN(s,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var ms=r=>r.join("/").replace(/\/\/+/g,"/"),jN=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),VN=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,LN=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function UN(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function zN(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var JT=["POST","PUT","PATCH","DELETE"];new Set(JT);var BN=["GET",...JT];new Set(BN);var vc=$.createContext(null);vc.displayName="DataRouter";var km=$.createContext(null);km.displayName="DataRouterState";$.createContext(!1);var ZT=$.createContext({isTransitioning:!1});ZT.displayName="ViewTransition";var FN=$.createContext(new Map);FN.displayName="Fetchers";var HN=$.createContext(null);HN.displayName="Await";var ii=$.createContext(null);ii.displayName="Navigation";var Eh=$.createContext(null);Eh.displayName="Location";var si=$.createContext({outlet:null,matches:[],isDataRoute:!1});si.displayName="Route";var j0=$.createContext(null);j0.displayName="RouteError";function qN(r,{relative:e}={}){zt(Th(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=$.useContext(ii),{hash:s,pathname:o,search:c}=Sh(r,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:ms([t,o])),n.createHref({pathname:u,search:c,hash:s})}function Th(){return $.useContext(Eh)!=null}function wr(){return zt(Th(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(Eh).location}var eS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tS(r){$.useContext(ii).static||$.useLayoutEffect(r)}function Es(){let{isDataRoute:r}=$.useContext(si);return r?sk():$N()}function $N(){zt(Th(),"useNavigate() may be used only in the context of a <Router> component.");let r=$.useContext(vc),{basename:e,navigator:t}=$.useContext(ii),{matches:n}=$.useContext(si),{pathname:s}=wr(),o=JSON.stringify(WT(n)),c=$.useRef(!1);return tS(()=>{c.current=!0}),$.useCallback((d,f={})=>{if(Br(c.current,eS),!c.current)return;if(typeof d=="number"){t.go(d);return}let g=XT(d,JSON.parse(o),s,f.relative==="path");r==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ms([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,s,r])}var GN=$.createContext(null);function KN(r){let e=$.useContext(si).outlet;return $.useMemo(()=>e&&$.createElement(GN.Provider,{value:r},e),[e,r])}function nS(){let{matches:r}=$.useContext(si),e=r[r.length-1];return e?e.params:{}}function Sh(r,{relative:e}={}){let{matches:t}=$.useContext(si),{pathname:n}=wr(),s=JSON.stringify(WT(t));return $.useMemo(()=>XT(r,JSON.parse(s),n,e==="path"),[r,s,n,e])}function YN(r,e){return rS(r,e)}function rS(r,e,t,n,s){zt(Th(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=$.useContext(ii),{matches:c}=$.useContext(si),u=c[c.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let H=y&&y.path||"";iS(f,!y||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let v=wr(),w;if(e){let H=typeof e=="string"?zo(e):e;zt(g==="/"||H.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${H.pathname}" was given in the \`location\` prop.`),w=H}else w=v;let E=w.pathname||"/",D=E;if(g!=="/"){let H=g.replace(/^\//,"").split("/");D="/"+E.replace(/^\//,"").split("/").slice(H.length).join("/")}let M=KT(r,{pathname:D});Br(y||M!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Br(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=ZN(M&&M.map(H=>Object.assign({},H,{params:Object.assign({},d,H.params),pathname:ms([g,o.encodeLocation?o.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?g:ms([g,o.encodeLocation?o.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),c,t,n,s);return e&&V?$.createElement(Eh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},V):V}function QN(){let r=ik(),e=UN(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=$.createElement($.Fragment,null,$.createElement("p",null," Hey developer "),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:o},"ErrorBoundary")," or"," ",$.createElement("code",{style:o},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:s},t):null,c)}var WN=$.createElement(QN,null),XN=class extends $.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?$.createElement(si.Provider,{value:this.props.routeContext},$.createElement(j0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function JN({routeContext:r,match:e,children:t}){let n=$.useContext(vc);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(si.Provider,{value:r},t)}function ZN(r,e=[],t=null,n=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,c=t?.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);zt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,d=-1;if(t)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:v,errors:w}=t,E=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||E){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=t&&n?(g,y)=>{n(g,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:zN(t.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,v)=>{let w,E=!1,D=null,M=null;t&&(w=c&&y.route.id?c[y.route.id]:void 0,D=y.route.errorElement||WN,u&&(d<0&&v===0?(iS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,M=null):d===v&&(E=!0,M=y.route.hydrateFallbackElement||null)));let V=e.concat(o.slice(0,v+1)),H=()=>{let F;return w?F=D:E?F=M:y.route.Component?F=$.createElement(y.route.Component,null):y.route.element?F=y.route.element:F=g,$.createElement(JN,{match:y,routeContext:{outlet:g,matches:V,isDataRoute:t!=null},children:F})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?$.createElement(XN,{location:t.location,revalidation:t.revalidation,component:D,error:w,children:H(),routeContext:{outlet:null,matches:V,isDataRoute:!0},onError:f}):H()},null)}function V0(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ek(r){let e=$.useContext(vc);return zt(e,V0(r)),e}function tk(r){let e=$.useContext(km);return zt(e,V0(r)),e}function nk(r){let e=$.useContext(si);return zt(e,V0(r)),e}function L0(r){let e=nk(r),t=e.matches[e.matches.length-1];return zt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function rk(){return L0("useRouteId")}function ik(){let r=$.useContext(j0),e=tk("useRouteError"),t=L0("useRouteError");return r!==void 0?r:e.errors?.[t]}function sk(){let{router:r}=ek("useNavigate"),e=L0("useNavigate"),t=$.useRef(!1);return tS(()=>{t.current=!0}),$.useCallback(async(s,o={})=>{Br(t.current,eS),t.current&&(typeof s=="number"?await r.navigate(s):await r.navigate(s,{fromRouteId:e,...o}))},[r,e])}var Uw={};function iS(r,e,t){!e&&!Uw[r]&&(Uw[r]=!0,Br(!1,t))}$.memo(ak);function ak({routes:r,future:e,state:t,unstable_onError:n}){return rS(r,void 0,t,n,e)}function ok(r){return KN(r.context)}function Pr(r){zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lk({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:o=!1,unstable_useTransitions:c}){zt(!Th(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),d=$.useMemo(()=>({basename:u,navigator:s,static:o,unstable_useTransitions:c,future:{}}),[u,s,o,c]);typeof t=="string"&&(t=zo(t));let{pathname:f="/",search:g="",hash:y="",state:v=null,key:w="default"}=t,E=$.useMemo(()=>{let D=ps(f,u);return D==null?null:{location:{pathname:D,search:g,hash:y,state:v,key:w},navigationType:n}},[u,f,g,y,v,w,n]);return Br(E!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:$.createElement(ii.Provider,{value:d},$.createElement(Eh.Provider,{children:e,value:E}))}function ck({children:r,location:e}){return YN(Hy(r),e)}function Hy(r,e=[]){let t=[];return $.Children.forEach(r,(n,s)=>{if(!$.isValidElement(n))return;let o=[...e,s];if(n.type===$.Fragment){t.push.apply(t,Hy(n.props.children,o));return}zt(n.type===Pr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=Hy(n.props.children,o)),t.push(c)}),t}var If="get",Rf="application/x-www-form-urlencoded";function Dm(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function uk(r){return Dm(r)&&r.tagName.toLowerCase()==="button"}function hk(r){return Dm(r)&&r.tagName.toLowerCase()==="form"}function dk(r){return Dm(r)&&r.tagName.toLowerCase()==="input"}function fk(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function mk(r,e){return r.button===0&&(!e||e==="_self")&&!fk(r)}var mf=null;function gk(){if(mf===null)try{new FormData(document.createElement("form"),0),mf=!1}catch{mf=!0}return mf}var pk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function by(r){return r!=null&&!pk.has(r)?(Br(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rf}"`),null):r}function yk(r,e){let t,n,s,o,c;if(hk(r)){let u=r.getAttribute("action");n=u?ps(u,e):null,t=r.getAttribute("method")||If,s=by(r.getAttribute("enctype"))||Rf,o=new FormData(r)}else if(uk(r)||dk(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||u.getAttribute("action");if(n=d?ps(d,e):null,t=r.getAttribute("formmethod")||u.getAttribute("method")||If,s=by(r.getAttribute("formenctype"))||by(u.getAttribute("enctype"))||Rf,o=new FormData(u,r),!gk()){let{name:f,type:g,value:y}=r;if(g==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,y)}}else{if(Dm(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=If,n=null,s=Rf,c=r}return o&&s==="text/plain"&&(c=o,o=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function U0(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function _k(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&ps(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function vk(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bk(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function wk(r,e,t){let n=await Promise.all(r.map(async s=>{let o=e.routes[s.route.id];if(o){let c=await vk(o,t);return c.links?c.links():[]}return[]}));return Sk(n.flat(1).filter(bk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function zw(r,e,t,n,s,o){let c=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,u=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>c(d,f)||u(d,f)):o==="data"?e.filter((d,f)=>{let g=n.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function xk(r,e,{includeHydrateFallback:t}={}){return Ek(r.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function Ek(r){return[...new Set(r)]}function Tk(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function Sk(r,e){let t=new Set;return new Set(e),r.reduce((n,s)=>{let o=JSON.stringify(Tk(s));return t.has(o)||(t.add(o),n.push({key:o,link:s})),n},[])}function sS(){let r=$.useContext(vc);return U0(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Ak(){let r=$.useContext(km);return U0(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var z0=$.createContext(void 0);z0.displayName="FrameworkContext";function aS(){let r=$.useContext(z0);return U0(r,"You must render this element inside a <HydratedRouter> element"),r}function Ik(r,e){let t=$.useContext(z0),[n,s]=$.useState(!1),[o,c]=$.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=e,v=$.useRef(null);$.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let D=V=>{V.forEach(H=>{c(H.isIntersecting)})},M=new IntersectionObserver(D,{threshold:.5});return v.current&&M.observe(v.current),()=>{M.disconnect()}}},[r]),$.useEffect(()=>{if(n){let D=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(D)}}},[n]);let w=()=>{s(!0)},E=()=>{s(!1),c(!1)};return t?r!=="intent"?[o,v,{}]:[o,v,{onFocus:Iu(u,w),onBlur:Iu(d,E),onMouseEnter:Iu(f,w),onMouseLeave:Iu(g,E),onTouchStart:Iu(y,w)}]:[!1,v,{}]}function Iu(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function Rk({page:r,...e}){let{router:t}=sS(),n=$.useMemo(()=>KT(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?$.createElement(Nk,{page:r,matches:n,...e}):null}function Ck(r){let{manifest:e,routeModules:t}=aS(),[n,s]=$.useState([]);return $.useEffect(()=>{let o=!1;return wk(r,e,t).then(c=>{o||s(c)}),()=>{o=!0}},[r,e,t]),n}function Nk({page:r,matches:e,...t}){let n=wr(),{manifest:s,routeModules:o}=aS(),{basename:c}=sS(),{loaderData:u,matches:d}=Ak(),f=$.useMemo(()=>zw(r,e,d,s,n,"data"),[r,e,d,s,n]),g=$.useMemo(()=>zw(r,e,d,s,n,"assets"),[r,e,d,s,n]),y=$.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let E=new Set,D=!1;if(e.forEach(V=>{let H=s.routes[V.route.id];!H||!H.hasLoader||(!f.some(F=>F.route.id===V.route.id)&&V.route.id in u&&o[V.route.id]?.shouldRevalidate||H.hasClientLoader?D=!0:E.add(V.route.id))}),E.size===0)return[];let M=_k(r,c,"data");return D&&E.size>0&&M.searchParams.set("_routes",e.filter(V=>E.has(V.route.id)).map(V=>V.route.id).join(",")),[M.pathname+M.search]},[c,u,n,s,f,e,r,o]),v=$.useMemo(()=>xk(g,s),[g,s]),w=Ck(g);return $.createElement($.Fragment,null,y.map(E=>$.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...t})),v.map(E=>$.createElement("link",{key:E,rel:"modulepreload",href:E,...t})),w.map(({key:E,link:D})=>$.createElement("link",{key:E,nonce:t.nonce,...D})))}function kk(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var oS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oS&&(window.__reactRouterVersion="7.10.1")}catch{}function Dk({basename:r,children:e,unstable_useTransitions:t,window:n}){let s=$.useRef();s.current==null&&(s.current=gN({window:n,v5Compat:!0}));let o=s.current,[c,u]=$.useState({action:o.action,location:o.location}),d=$.useCallback(f=>{t===!1?u(f):$.startTransition(()=>u(f))},[t]);return $.useLayoutEffect(()=>o.listen(d),[o,d]),$.createElement(lk,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:t===!0})}var lS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jr=$.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:o,replace:c,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,...v},w){let{basename:E,unstable_useTransitions:D}=$.useContext(ii),M=typeof f=="string"&&lS.test(f),V,H=!1;if(typeof f=="string"&&M&&(V=f,oS))try{let I=new URL(window.location.href),k=f.startsWith("//")?new URL(I.protocol+f):new URL(f),j=ps(k.pathname,E);k.origin===I.origin&&j!=null?f=j+k.search+k.hash:H=!0}catch{Br(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=qN(f,{relative:s}),[B,Y,U]=Ik(n,v),R=jk(f,{replace:c,state:u,target:d,preventScrollReset:g,relative:s,viewTransition:y,unstable_useTransitions:D});function T(I){e&&e(I),I.defaultPrevented||R(I)}let S=$.createElement("a",{...v,...U,href:V||F,onClick:H||o?e:T,ref:kk(w,Y),target:d,"data-discover":!M&&t==="render"?"true":void 0});return B&&!M?$.createElement($.Fragment,null,S,$.createElement(Rk,{page:F})):S});jr.displayName="Link";var Ok=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:o,to:c,viewTransition:u,children:d,...f},g){let y=Sh(c,{relative:f.relative}),v=wr(),w=$.useContext(km),{navigator:E,basename:D}=$.useContext(ii),M=w!=null&&Bk(y)&&u===!0,V=E.encodeLocation?E.encodeLocation(y).pathname:y.pathname,H=v.pathname,F=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(H=H.toLowerCase(),F=F?F.toLowerCase():null,V=V.toLowerCase()),F&&D&&(F=ps(F,D)||F);const B=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let Y=H===V||!s&&H.startsWith(V)&&H.charAt(B)==="/",U=F!=null&&(F===V||!s&&F.startsWith(V)&&F.charAt(V.length)==="/"),R={isActive:Y,isPending:U,isTransitioning:M},T=Y?e:void 0,S;typeof n=="function"?S=n(R):S=[n,Y?"active":null,U?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let I=typeof o=="function"?o(R):o;return $.createElement(jr,{...f,"aria-current":T,className:S,ref:g,style:I,to:c,viewTransition:u},typeof d=="function"?d(R):d)});Ok.displayName="NavLink";var Mk=$.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:o,method:c=If,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,...v},w)=>{let{unstable_useTransitions:E}=$.useContext(ii),D=Uk(),M=zk(u,{relative:f}),V=c.toLowerCase()==="get"?"get":"post",H=typeof u=="string"&&lS.test(u),F=B=>{if(d&&d(B),B.defaultPrevented)return;B.preventDefault();let Y=B.nativeEvent.submitter,U=Y?.getAttribute("formmethod")||c,R=()=>D(Y||B.currentTarget,{fetcherKey:e,method:U,navigate:t,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:y});E&&t!==!1?$.startTransition(()=>R()):R()};return $.createElement("form",{ref:w,method:V,action:M,onSubmit:n?d:F,...v,"data-discover":!H&&r==="render"?"true":void 0})});Mk.displayName="Form";function Pk(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cS(r){let e=$.useContext(vc);return zt(e,Pk(r)),e}function jk(r,{target:e,replace:t,state:n,preventScrollReset:s,relative:o,viewTransition:c,unstable_useTransitions:u}={}){let d=Es(),f=wr(),g=Sh(r,{relative:o});return $.useCallback(y=>{if(mk(y,e)){y.preventDefault();let v=t!==void 0?t:eh(f)===eh(g),w=()=>d(r,{replace:v,state:n,preventScrollReset:s,relative:o,viewTransition:c});u?$.startTransition(()=>w()):w()}},[f,d,g,t,n,e,r,s,o,c,u])}var Vk=0,Lk=()=>`__${String(++Vk)}__`;function Uk(){let{router:r}=cS("useSubmit"),{basename:e}=$.useContext(ii),t=rk(),n=r.fetch,s=r.navigate;return $.useCallback(async(o,c={})=>{let{action:u,method:d,encType:f,formData:g,body:y}=yk(o,e);if(c.navigate===!1){let v=c.fetcherKey||Lk();await n(v,t,c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,flushSync:c.flushSync})}else await s(c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,s,e,t])}function zk(r,{relative:e}={}){let{basename:t}=$.useContext(ii),n=$.useContext(si);zt(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...Sh(r||".",{relative:e})},c=wr();if(r==null){o.search=c.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!r||r===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:ms([t,o.pathname])),eh(o)}function Bk(r,{relative:e}={}){let t=$.useContext(ZT);zt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=cS("useViewTransitionState"),s=Sh(r,{relative:e});if(!t.isTransitioning)return!1;let o=ps(t.currentLocation.pathname,n)||t.currentLocation.pathname,c=ps(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Qf(s.pathname,c)!=null||Qf(s.pathname,o)!=null}const Ve=r=>typeof r=="string",Ru=()=>{let r,e;const t=new Promise((n,s)=>{r=n,e=s});return t.resolve=r,t.reject=e,t},Bw=r=>r==null?"":""+r,Fk=(r,e,t)=>{r.forEach(n=>{e[n]&&(t[n]=e[n])})},Hk=/###/g,Fw=r=>r&&r.indexOf("###")>-1?r.replace(Hk,"."):r,Hw=r=>!r||Ve(r),Bu=(r,e,t)=>{const n=Ve(e)?e.split("."):e;let s=0;for(;s<n.length-1;){if(Hw(r))return{};const o=Fw(n[s]);!r[o]&&t&&(r[o]=new t),Object.prototype.hasOwnProperty.call(r,o)?r=r[o]:r={},++s}return Hw(r)?{}:{obj:r,k:Fw(n[s])}},qw=(r,e,t)=>{const{obj:n,k:s}=Bu(r,e,Object);if(n!==void 0||e.length===1){n[s]=t;return}let o=e[e.length-1],c=e.slice(0,e.length-1),u=Bu(r,c,Object);for(;u.obj===void 0&&c.length;)o=`${c[c.length-1]}.${o}`,c=c.slice(0,c.length-1),u=Bu(r,c,Object),u?.obj&&typeof u.obj[`${u.k}.${o}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${o}`]=t},qk=(r,e,t,n)=>{const{obj:s,k:o}=Bu(r,e,Object);s[o]=s[o]||[],s[o].push(t)},Wf=(r,e)=>{const{obj:t,k:n}=Bu(r,e);if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n]},$k=(r,e,t)=>{const n=Wf(r,t);return n!==void 0?n:Wf(e,t)},uS=(r,e,t)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in r?Ve(r[n])||r[n]instanceof String||Ve(e[n])||e[n]instanceof String?t&&(r[n]=e[n]):uS(r[n],e[n],t):r[n]=e[n]);return r},Vl=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Gk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Kk=r=>Ve(r)?r.replace(/[&<>"'\/]/g,e=>Gk[e]):r;class Yk{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const Qk=[" ",",","?","!",";"],Wk=new Yk(20),Xk=(r,e,t)=>{e=e||"",t=t||"";const n=Qk.filter(c=>e.indexOf(c)<0&&t.indexOf(c)<0);if(n.length===0)return!0;const s=Wk.getRegExp(`(${n.map(c=>c==="?"?"\\?":c).join("|")})`);let o=!s.test(r);if(!o){const c=r.indexOf(t);c>0&&!s.test(r.substring(0,c))&&(o=!0)}return o},qy=(r,e,t=".")=>{if(!r)return;if(r[e])return Object.prototype.hasOwnProperty.call(r,e)?r[e]:void 0;const n=e.split(t);let s=r;for(let o=0;o<n.length;){if(!s||typeof s!="object")return;let c,u="";for(let d=o;d<n.length;++d)if(d!==o&&(u+=t),u+=n[d],c=s[u],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&d<n.length-1)continue;o+=d-o+1;break}s=c}return s},th=r=>r?.replace("_","-"),Jk={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){console?.[r]?.apply?.(console,e)}};let Zk=class $y{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Jk,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,s){return s&&!this.debug?null:(Ve(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new $y(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new $y(this.logger,e)}};var Ci=new Zk;class Om{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(t)||0;this.observers[n].set(t,s+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,o])=>{for(let c=0;c<o;c++)s(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,o])=>{for(let c=0;c<o;c++)s.apply(s,[e,...t])})}}class $w extends Om{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,s={}){const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,c=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;e.indexOf(".")>-1?u=e.split("."):(u=[e,t],n&&(Array.isArray(n)?u.push(...n):Ve(n)&&o?u.push(...n.split(o)):u.push(n)));const d=Wf(this.data,u);return!d&&!t&&!n&&e.indexOf(".")>-1&&(e=u[0],t=u[1],n=u.slice(2).join(".")),d||!c||!Ve(n)?d:qy(this.data?.[e]?.[t],n,o)}addResource(e,t,n,s,o={silent:!1}){const c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let u=[e,t];n&&(u=u.concat(c?n.split(c):n)),e.indexOf(".")>-1&&(u=e.split("."),s=t,t=u[1]),this.addNamespaces(t),qw(this.data,u,s),o.silent||this.emit("added",e,t,n,s)}addResources(e,t,n,s={silent:!1}){for(const o in n)(Ve(n[o])||Array.isArray(n[o]))&&this.addResource(e,t,o,n[o],{silent:!0});s.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,s,o,c={silent:!1,skipCopy:!1}){let u=[e,t];e.indexOf(".")>-1&&(u=e.split("."),s=n,n=t,t=u[1]),this.addNamespaces(t);let d=Wf(this.data,u)||{};c.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?uS(d,n,o):d={...d,...n},qw(this.data,u,d),c.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var hS={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,n,s){return r.forEach(o=>{e=this.processors[o]?.process(e,t,n,s)??e}),e}};const dS=Symbol("i18next/PATH_KEY");function eD(){const r=[],e=Object.create(null);let t;return e.get=(n,s)=>(t?.revoke?.(),s===dS?r:(r.push(s),t=Proxy.revocable(n,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function Gy(r,e){const{[dS]:t}=r(eD());return t.join(e?.keySeparator??".")}const Gw={},wy=r=>!Ve(r)&&typeof r!="boolean"&&typeof r!="number";class Xf extends Om{constructor(e,t={}){super(),Fk(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ci.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const n={...t};if(e==null)return!1;const s=this.resolve(e,n);if(s?.res===void 0)return!1;const o=wy(s.res);return!(n.returnObjects===!1&&o)}extractFromKey(e,t){let n=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const c=n&&e.indexOf(n)>-1,u=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Xk(e,n,s);if(c&&!u){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:Ve(o)?[o]:o};const f=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(f[0])>-1)&&(o=f.shift()),e=f.join(s)}return{key:e,namespaces:Ve(o)?[o]:o}}translate(e,t,n){let s=typeof t=="object"?{...t}:t;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=Gy(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const o=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,c=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:u,namespaces:d}=this.extractFromKey(e[e.length-1],s),f=d[d.length-1];let g=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;g===void 0&&(g=":");const y=s.lng||this.language,v=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y?.toLowerCase()==="cimode")return v?o?{res:`${f}${g}${u}`,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(s)}:`${f}${g}${u}`:o?{res:u,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(s)}:u;const w=this.resolve(e,s);let E=w?.res;const D=w?.usedKey||u,M=w?.exactUsedKey||u,V=["[object Number]","[object Function]","[object RegExp]"],H=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,F=!this.i18nFormat||this.i18nFormat.handleAsObject,B=s.count!==void 0&&!Ve(s.count),Y=Xf.hasDefaultValue(s),U=B?this.pluralResolver.getSuffix(y,s.count,s):"",R=s.ordinal&&B?this.pluralResolver.getSuffix(y,s.count,{ordinal:!1}):"",T=B&&!s.ordinal&&s.count===0,S=T&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${U}`]||s[`defaultValue${R}`]||s.defaultValue;let I=E;F&&!E&&Y&&(I=S);const k=wy(I),j=Object.prototype.toString.apply(I);if(F&&I&&k&&V.indexOf(j)<0&&!(Ve(H)&&Array.isArray(I))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const N=this.options.returnedObjectHandler?this.options.returnedObjectHandler(D,I,{...s,ns:d}):`key '${u} (${this.language})' returned an object instead of string.`;return o?(w.res=N,w.usedParams=this.getUsedParamsDetails(s),w):N}if(c){const N=Array.isArray(I),G=N?[]:{},J=N?M:D;for(const P in I)if(Object.prototype.hasOwnProperty.call(I,P)){const O=`${J}${c}${P}`;Y&&!E?G[P]=this.translate(O,{...s,defaultValue:wy(S)?S[P]:void 0,joinArrays:!1,ns:d}):G[P]=this.translate(O,{...s,joinArrays:!1,ns:d}),G[P]===O&&(G[P]=I[P])}E=G}}else if(F&&Ve(H)&&Array.isArray(E))E=E.join(H),E&&(E=this.extendTranslation(E,e,s,n));else{let N=!1,G=!1;!this.isValidLookup(E)&&Y&&(N=!0,E=S),this.isValidLookup(E)||(G=!0,E=u);const P=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&G?void 0:E,O=Y&&S!==E&&this.options.updateMissing;if(G||N||O){if(this.logger.log(O?"updateKey":"missingKey",y,f,u,O?S:E),c){const q=this.resolve(u,{...s,keySeparator:!1});q&&q.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ee=[];const W=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&W&&W[0])for(let q=0;q<W.length;q++)ee.push(W[q]);else this.options.saveMissingTo==="all"?ee=this.languageUtils.toResolveHierarchy(s.lng||this.language):ee.push(s.lng||this.language);const Z=(q,Q,ie)=>{const se=Y&&ie!==E?ie:P;this.options.missingKeyHandler?this.options.missingKeyHandler(q,f,Q,se,O,s):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(q,f,Q,se,O,s),this.emit("missingKey",q,f,Q,E)};this.options.saveMissing&&(this.options.saveMissingPlurals&&B?ee.forEach(q=>{const Q=this.pluralResolver.getSuffixes(q,s);T&&s[`defaultValue${this.options.pluralSeparator}zero`]&&Q.indexOf(`${this.options.pluralSeparator}zero`)<0&&Q.push(`${this.options.pluralSeparator}zero`),Q.forEach(ie=>{Z([q],u+ie,s[`defaultValue${ie}`]||S)})}):Z(ee,u,S))}E=this.extendTranslation(E,e,s,w,n),G&&E===u&&this.options.appendNamespaceToMissingKey&&(E=`${f}${g}${u}`),(G||N)&&this.options.parseMissingKeyHandler&&(E=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}${g}${u}`:u,N?E:void 0,s))}return o?(w.res=E,w.usedParams=this.getUsedParamsDetails(s),w):E}extendTranslation(e,t,n,s,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=Ve(e)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(d){const y=e.match(this.interpolator.nestingRegexp);f=y&&y.length}let g=n.replace&&!Ve(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,n.lng||this.language||s.usedLng,n),d){const y=e.match(this.interpolator.nestingRegexp),v=y&&y.length;f<v&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,(...y)=>o?.[0]===y[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${t[0]}`),null):this.translate(...y,t),n)),n.interpolation&&this.interpolator.reset()}const c=n.postProcess||this.options.postProcess,u=Ve(c)?[c]:c;return e!=null&&u?.length&&n.applyPostProcessor!==!1&&(e=hS.handle(u,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,t={}){let n,s,o,c,u;return Ve(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(n))return;const f=this.extractFromKey(d,t),g=f.key;s=g;let y=f.namespaces;this.options.fallbackNS&&(y=y.concat(this.options.fallbackNS));const v=t.count!==void 0&&!Ve(t.count),w=v&&!t.ordinal&&t.count===0,E=t.context!==void 0&&(Ve(t.context)||typeof t.context=="number")&&t.context!=="",D=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);y.forEach(M=>{this.isValidLookup(n)||(u=M,!Gw[`${D[0]}-${M}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(u)&&(Gw[`${D[0]}-${M}`]=!0,this.logger.warn(`key "${s}" for languages "${D.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),D.forEach(V=>{if(this.isValidLookup(n))return;c=V;const H=[g];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(H,g,V,M,t);else{let B;v&&(B=this.pluralResolver.getSuffix(V,t.count,t));const Y=`${this.options.pluralSeparator}zero`,U=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(t.ordinal&&B.indexOf(U)===0&&H.push(g+B.replace(U,this.options.pluralSeparator)),H.push(g+B),w&&H.push(g+Y)),E){const R=`${g}${this.options.contextSeparator||"_"}${t.context}`;H.push(R),v&&(t.ordinal&&B.indexOf(U)===0&&H.push(R+B.replace(U,this.options.pluralSeparator)),H.push(R+B),w&&H.push(R+Y))}}let F;for(;F=H.pop();)this.isValidLookup(n)||(o=F,n=this.getResource(V,M,F,t))}))})}),{res:n,usedKey:s,exactUsedKey:o,usedLng:c,usedNS:u}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,n,s={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,n,s):this.resourceStore.getResource(e,t,n,s)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Ve(e.replace);let s=n?e.replace:e;if(n&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const o of t)delete s[o]}return s}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&e[n]!==void 0)return!0;return!1}}class Kw{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ci.create("languageUtils")}getScriptPartFromCode(e){if(e=th(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=th(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Ve(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(n=>{if(t)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(t=s)}),!t&&this.options.supportedLngs&&e.forEach(n=>{if(t)return;const s=this.getScriptPartFromCode(n);if(this.isSupportedCode(s))return t=s;const o=this.getLanguagePartFromCode(n);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(c=>{if(c===o)return c;if(!(c.indexOf("-")<0&&o.indexOf("-")<0)&&(c.indexOf("-")>0&&o.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===o||c.indexOf(o)===0&&o.length>1))return c})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Ve(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),s=[],o=c=>{c&&(this.isSupportedCode(c)?s.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return Ve(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):Ve(e)&&o(this.formatLanguageCode(e)),n.forEach(c=>{s.indexOf(c)<0&&o(this.formatLanguageCode(c))}),s}}const Yw={zero:0,one:1,two:2,few:3,many:4,other:5},Qw={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class tD{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Ci.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const n=th(e==="dev"?"en":e),s=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:n,type:s});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let c;try{c=new Intl.PluralRules(n,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Qw;if(!e.match(/-|_/))return Qw;const d=this.languageUtils.getLanguagePartFromCode(e);c=this.getRule(d,t)}return this.pluralRulesCache[o]=c,c}needsPlural(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(s=>`${t}${s}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((s,o)=>Yw[s]-Yw[o]).map(s=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,t,n={}){const s=this.getRule(e,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const Ww=(r,e,t,n=".",s=!0)=>{let o=$k(r,e,t);return!o&&s&&Ve(t)&&(o=qy(r,t,n),o===void 0&&(o=qy(e,t,n))),o},xy=r=>r.replace(/\$/g,"$$$$");class Xw{constructor(e={}){this.logger=Ci.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:s,prefix:o,prefixEscaped:c,suffix:u,suffixEscaped:d,formatSeparator:f,unescapeSuffix:g,unescapePrefix:y,nestingPrefix:v,nestingPrefixEscaped:w,nestingSuffix:E,nestingSuffixEscaped:D,nestingOptionsSeparator:M,maxReplaces:V,alwaysFormat:H}=e.interpolation;this.escape=t!==void 0?t:Kk,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=o?Vl(o):c||"{{",this.suffix=u?Vl(u):d||"}}",this.formatSeparator=f||",",this.unescapePrefix=g?"":y||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=v?Vl(v):w||Vl("$t("),this.nestingSuffix=E?Vl(E):D||Vl(")"),this.nestingOptionsSeparator=M||",",this.maxReplaces=V||1e3,this.alwaysFormat=H!==void 0?H:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,n)=>t?.source===n?(t.lastIndex=0,t):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,n,s){let o,c,u;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=w=>{if(w.indexOf(this.formatSeparator)<0){const V=Ww(t,d,w,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(V,void 0,n,{...s,...t,interpolationkey:w}):V}const E=w.split(this.formatSeparator),D=E.shift().trim(),M=E.join(this.formatSeparator).trim();return this.format(Ww(t,d,D,this.options.keySeparator,this.options.ignoreJSONStructure),M,n,{...s,...t,interpolationkey:D})};this.resetRegExp();const g=s?.missingInterpolationHandler||this.options.missingInterpolationHandler,y=s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:w=>xy(w)},{regex:this.regexp,safeValue:w=>this.escapeValue?xy(this.escape(w)):xy(w)}].forEach(w=>{for(u=0;o=w.regex.exec(e);){const E=o[1].trim();if(c=f(E),c===void 0)if(typeof g=="function"){const M=g(e,o,s);c=Ve(M)?M:""}else if(s&&Object.prototype.hasOwnProperty.call(s,E))c="";else if(y){c=o[0];continue}else this.logger.warn(`missed to pass in variable ${E} for interpolating ${e}`),c="";else!Ve(c)&&!this.useRawValueToEscape&&(c=Bw(c));const D=w.safeValue(c);if(e=e.replace(o[0],D),y?(w.regex.lastIndex+=c.length,w.regex.lastIndex-=o[0].length):w.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),e}nest(e,t,n={}){let s,o,c;const u=(d,f)=>{const g=this.nestingOptionsSeparator;if(d.indexOf(g)<0)return d;const y=d.split(new RegExp(`${g}[ ]*{`));let v=`{${y[1]}`;d=y[0],v=this.interpolate(v,c);const w=v.match(/'/g),E=v.match(/"/g);((w?.length??0)%2===0&&!E||E.length%2!==0)&&(v=v.replace(/'/g,'"'));try{c=JSON.parse(v),f&&(c={...f,...c})}catch(D){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,D),`${d}${g}${v}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,d};for(;s=this.nestingRegexp.exec(e);){let d=[];c={...n},c=c.replace&&!Ve(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;const f=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(f!==-1&&(d=s[1].slice(f).split(this.formatSeparator).map(g=>g.trim()).filter(Boolean),s[1]=s[1].slice(0,f)),o=t(u.call(this,s[1].trim(),c),c),o&&s[0]===e&&!Ve(o))return o;Ve(o)||(o=Bw(o)),o||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),o=""),d.length&&(o=d.reduce((g,y)=>this.format(g,y,n.lng,{...n,interpolationkey:s[1].trim()}),o.trim())),e=e.replace(s[0],o),this.regexp.lastIndex=0}return e}}const nD=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const n=r.split("(");e=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);e==="currency"&&s.indexOf(":")<0?t.currency||(t.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?t.range||(t.range=s.trim()):s.split(";").forEach(c=>{if(c){const[u,...d]=c.split(":"),f=d.join(":").trim().replace(/^'+|'+$/g,""),g=u.trim();t[g]||(t[g]=f),f==="false"&&(t[g]=!1),f==="true"&&(t[g]=!0),isNaN(f)||(t[g]=parseInt(f,10))}})}return{formatName:e,formatOptions:t}},Jw=r=>{const e={};return(t,n,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o={...o,[s.interpolationkey]:void 0});const c=n+JSON.stringify(o);let u=e[c];return u||(u=r(th(n),s),e[c]=u),u(t)}},rD=r=>(e,t,n)=>r(th(t),n)(e);class iD{constructor(e={}){this.logger=Ci.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?Jw:rD;this.formats={number:n((s,o)=>{const c=new Intl.NumberFormat(s,{...o});return u=>c.format(u)}),currency:n((s,o)=>{const c=new Intl.NumberFormat(s,{...o,style:"currency"});return u=>c.format(u)}),datetime:n((s,o)=>{const c=new Intl.DateTimeFormat(s,{...o});return u=>c.format(u)}),relativetime:n((s,o)=>{const c=new Intl.RelativeTimeFormat(s,{...o});return u=>c.format(u,o.range||"day")}),list:n((s,o)=>{const c=new Intl.ListFormat(s,{...o});return u=>c.format(u)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Jw(t)}format(e,t,n,s={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(u=>u.indexOf(")")>-1)){const u=o.findIndex(d=>d.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,u)].join(this.formatSeparator)}return o.reduce((u,d)=>{const{formatName:f,formatOptions:g}=nD(d);if(this.formats[f]){let y=u;try{const v=s?.formatParams?.[s.interpolationkey]||{},w=v.locale||v.lng||s.locale||s.lng||n;y=this.formats[f](u,w,{...g,...s,...v})}catch(v){this.logger.warn(v)}return y}else this.logger.warn(`there was no format function for ${f}`);return u},e)}}const sD=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class aD extends Om{constructor(e,t,n,s={}){super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=Ci.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,s.backend,s)}queueLoad(e,t,n,s){const o={},c={},u={},d={};return e.forEach(f=>{let g=!0;t.forEach(y=>{const v=`${f}|${y}`;!n.reload&&this.store.hasResourceBundle(f,y)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?c[v]===void 0&&(c[v]=!0):(this.state[v]=1,g=!1,c[v]===void 0&&(c[v]=!0),o[v]===void 0&&(o[v]=!0),d[y]===void 0&&(d[y]=!0)))}),g||(u[f]=!0)}),(Object.keys(o).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(o),pending:Object.keys(c),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(d)}}loaded(e,t,n){const s=e.split("|"),o=s[0],c=s[1];t&&this.emit("failedLoading",o,c,t),!t&&n&&this.store.addResourceBundle(o,c,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const u={};this.queue.forEach(d=>{qk(d.loaded,[o],c),sD(d,e),t&&d.errors.push(t),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(f=>{u[f]||(u[f]={});const g=d.loaded[f];g.length&&g.forEach(y=>{u[f][y]===void 0&&(u[f][y]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(d=>!d.done)}read(e,t,n,s=0,o=this.retryTimeout,c){if(!e.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:s,wait:o,callback:c});return}this.readingCalls++;const u=(f,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const y=this.waitingReads.shift();this.read(y.lng,y.ns,y.fcName,y.tried,y.wait,y.callback)}if(f&&g&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,s+1,o*2,c)},o);return}c(f,g)},d=this.backend[n].bind(this.backend);if(d.length===2){try{const f=d(e,t);f&&typeof f.then=="function"?f.then(g=>u(null,g)).catch(u):u(null,f)}catch(f){u(f)}return}return d(e,t,u)}prepareLoading(e,t,n={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Ve(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ve(t)&&(t=[t]);const o=this.queueLoad(e,t,n,s);if(!o.toLoad.length)return o.pending.length||s(),null;o.toLoad.forEach(c=>{this.loadOne(c)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){const n=e.split("|"),s=n[0],o=n[1];this.read(s,o,"read",void 0,void 0,(c,u)=>{c&&this.logger.warn(`${t}loading namespace ${o} for language ${s} failed`,c),!c&&u&&this.logger.log(`${t}loaded namespace ${o} for language ${s}`,u),this.loaded(e,c,u)})}saveMissing(e,t,n,s,o,c={},u=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const d={...c,isUpdate:o},f=this.backend.create.bind(this.backend);if(f.length<6)try{let g;f.length===5?g=f(e,t,n,s,d):g=f(e,t,n,s),g&&typeof g.then=="function"?g.then(y=>u(null,y)).catch(u):u(null,g)}catch(g){u(g)}else f(e,t,n,s,u,d)}!e||!e[0]||this.store.addResource(e[0],t,n,s)}}}const Zw=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),Ve(r[1])&&(e.defaultValue=r[1]),Ve(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(n=>{e[n]=t[n]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),ex=r=>(Ve(r.ns)&&(r.ns=[r.ns]),Ve(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),Ve(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs?.indexOf?.("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r),gf=()=>{},oD=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};class Fu extends Om{constructor(e={},t){if(super(),this.options=ex(e),this.services={},this.logger=Ci,this.modules={external:[]},oD(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Ve(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=Zw();this.options={...n,...this.options,...ex(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=n.overloadTranslationOptionHandler);const s=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?Ci.init(s(this.modules.logger),this.options):Ci.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:f=iD;const g=new Kw(this.options);this.store=new $w(this.options.resources,this.options);const y=this.services;y.logger=Ci,y.resourceStore=this.store,y.languageUtils=g,y.pluralResolver=new tD(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),f&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(y.formatter=s(f),y.formatter.init&&y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new Xw(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new aD(s(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",(w,...E)=>{this.emit(w,...E)}),this.modules.languageDetector&&(y.languageDetector=s(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=s(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new Xf(this.services,this.options),this.translator.on("*",(w,...E)=>{this.emit(w,...E)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,t||(t=gf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=(...g)=>this.store[f](...g)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=(...g)=>(this.store[f](...g),this)});const u=Ru(),d=()=>{const f=(g,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(y),t(g,y)};if(this.languages&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),u}loadResources(e,t=gf){let n=t;const s=Ve(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(s?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const o=[],c=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(f=>{f!=="cimode"&&o.indexOf(f)<0&&o.push(f)})};s?c(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),this.options.preload?.forEach?.(u=>c(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(u)})}else n(null)}reloadResources(e,t,n){const s=Ru();return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=gf),this.services.backendConnector.reload(e,t,o=>{s.resolve(),n(o)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&hS.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const n=Ru();this.emit("languageChanging",e);const s=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},o=(u,d)=>{d?this.isLanguageChangingTo===e&&(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,n.resolve((...f)=>this.t(...f)),t&&t(u,(...f)=>this.t(...f))},c=u=>{!e&&!u&&this.services.languageDetector&&(u=[]);const d=Ve(u)?u:u&&u[0],f=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(Ve(u)?[u]:u);f&&(this.language||s(f),this.translator.language||this.translator.changeLanguage(f),this.services.languageDetector?.cacheUserLanguage?.(f)),this.loadResources(f,g=>{o(g,f)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),n}getFixedT(e,t,n){const s=(o,c,...u)=>{let d;typeof c!="object"?d=this.options.overloadTranslationOptionHandler([o,c].concat(u)):d={...c},d.lng=d.lng||s.lng,d.lngs=d.lngs||s.lngs,d.ns=d.ns||s.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||n||s.keyPrefix);const f=this.options.keySeparator||".";let g;return d.keyPrefix&&Array.isArray(o)?g=o.map(y=>(typeof y=="function"&&(y=Gy(y,{...this.options,...c})),`${d.keyPrefix}${f}${y}`)):(typeof o=="function"&&(o=Gy(o,{...this.options,...c})),g=d.keyPrefix?`${d.keyPrefix}${f}${o}`:o),this.t(g,d)};return Ve(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=n,s}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const c=(u,d)=>{const f=this.services.backendConnector.state[`${u}|${d}`];return f===-1||f===0||f===2};if(t.precheck){const u=t.precheck(this,c);if(u!==void 0)return u}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(n,e)&&(!s||c(o,e)))}loadNamespaces(e,t){const n=Ru();return this.options.ns?(Ve(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),t&&t(s)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=Ru();Ve(e)&&(e=[e]);const s=this.options.preload||[],o=e.filter(c=>s.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return o.length?(this.options.preload=s.concat(o),this.loadResources(c=>{n.resolve(),t&&t(c)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const s=new Intl.Locale(e);if(s&&s.getTextInfo){const o=s.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new Kw(Zw());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const n=new Fu(e,t);return n.createInstance=Fu.createInstance,n}cloneInstance(e={},t=gf){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},o=new Fu(s);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(u=>{o[u]=this[u]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n){const u=Object.keys(this.store.data).reduce((d,f)=>(d[f]={...this.store.data[f]},d[f]=Object.keys(d[f]).reduce((g,y)=>(g[y]={...d[f][y]},g),d[f]),d),{});o.store=new $w(u,s),o.services.resourceStore=o.store}return e.interpolation&&(o.services.interpolator=new Xw(s)),o.translator=new Xf(o.services,s),o.translator.on("*",(u,...d)=>{o.emit(u,...d)}),o.init(s,t),o.translator.options=s,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Wn=Fu.createInstance();Wn.createInstance;Wn.dir;Wn.init;Wn.loadResources;Wn.reloadResources;Wn.use;Wn.changeLanguage;Wn.getFixedT;Wn.t;Wn.exists;Wn.setDefaultNamespace;Wn.hasLoadedNamespace;Wn.loadNamespaces;Wn.loadLanguages;const lD=(r,e,t,n)=>{const s=[t,{code:e,...n||{}}];if(r?.services?.logger?.forward)return r.services.logger.forward(s,"warn","react-i18next::",!0);So(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),r?.services?.logger?.warn?r.services.logger.warn(...s):console?.warn&&console.warn(...s)},tx={},fS=(r,e,t,n)=>{So(t)&&tx[t]||(So(t)&&(tx[t]=new Date),lD(r,e,t,n))},mS=(r,e)=>()=>{if(r.isInitialized)e();else{const t=()=>{setTimeout(()=>{r.off("initialized",t)},0),e()};r.on("initialized",t)}},Ky=(r,e,t)=>{r.loadNamespaces(e,mS(r,t))},nx=(r,e,t,n)=>{if(So(t)&&(t=[t]),r.options.preload&&r.options.preload.indexOf(e)>-1)return Ky(r,t,n);t.forEach(s=>{r.options.ns.indexOf(s)<0&&r.options.ns.push(s)}),r.loadLanguages(e,mS(r,n))},cD=(r,e,t={})=>!e.languages||!e.languages.length?(fS(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(r,{lng:t.lng,precheck:(n,s)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!s(n.isLanguageChangingTo,r))return!1}}),So=r=>typeof r=="string",uD=r=>typeof r=="object"&&r!==null,hD=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,dD={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},fD=r=>dD[r],mD=r=>r.replace(hD,fD);let Yy={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:mD,transDefaultProps:void 0};const gD=(r={})=>{Yy={...Yy,...r}},pD=()=>Yy;let gS;const yD=r=>{gS=r},_D=()=>gS,vD={type:"3rdParty",init(r){gD(r.options.react),yD(r)}},bD=$.createContext();class wD{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Ey={exports:{}},Ty={};var rx;function xD(){if(rx)return Ty;rx=1;var r=Nm();function e(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,s=r.useEffect,o=r.useLayoutEffect,c=r.useDebugValue;function u(y,v){var w=v(),E=n({inst:{value:w,getSnapshot:v}}),D=E[0].inst,M=E[1];return o(function(){D.value=w,D.getSnapshot=v,d(D)&&M({inst:D})},[y,w,v]),s(function(){return d(D)&&M({inst:D}),y(function(){d(D)&&M({inst:D})})},[y]),c(w),w}function d(y){var v=y.getSnapshot;y=y.value;try{var w=v();return!t(y,w)}catch{return!0}}function f(y,v){return v()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Ty.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:g,Ty}var ix;function ED(){return ix||(ix=1,Ey.exports=xD()),Ey.exports}var TD=ED();const SD=(r,e)=>So(e)?e:uD(e)&&So(e.defaultValue)?e.defaultValue:Array.isArray(r)?r[r.length-1]:r,AD={t:SD,ready:!1},ID=()=>()=>{},wn=(r,e={})=>{const{i18n:t}=e,{i18n:n,defaultNS:s}=$.useContext(bD)||{},o=t||n||_D();o&&!o.reportNamespaces&&(o.reportNamespaces=new wD),o||fS(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const c=$.useMemo(()=>({...pD(),...o?.options?.react,...e}),[o,e]),{useSuspense:u,keyPrefix:d}=c,f=s||o?.options?.defaultNS,g=So(f)?[f]:f||["translation"],y=$.useMemo(()=>g,g);o?.reportNamespaces?.addUsedNamespaces?.(y);const v=$.useRef(0),w=$.useCallback(S=>{if(!o)return ID;const{bindI18n:I,bindI18nStore:k}=c,j=()=>{v.current+=1,S()};return I&&o.on(I,j),k&&o.store.on(k,j),()=>{I&&I.split(" ").forEach(N=>o.off(N,j)),k&&k.split(" ").forEach(N=>o.store.off(N,j))}},[o,c]),E=$.useRef(),D=$.useCallback(()=>{if(!o)return AD;const S=!!(o.isInitialized||o.initializedStoreOnce)&&y.every(J=>cD(J,o,c)),I=e.lng||o.language,k=v.current,j=E.current;if(j&&j.ready===S&&j.lng===I&&j.keyPrefix===d&&j.revision===k)return j;const G={t:o.getFixedT(I,c.nsMode==="fallback"?y:y[0],d),ready:S,lng:I,keyPrefix:d,revision:k};return E.current=G,G},[o,y,d,c,e.lng]),[M,V]=$.useState(0),{t:H,ready:F}=TD.useSyncExternalStore(w,D,D);$.useEffect(()=>{if(o&&!F&&!u){const S=()=>V(I=>I+1);e.lng?nx(o,e.lng,y,S):Ky(o,y,S)}},[o,e.lng,y,F,u,M]);const B=o||{},Y=$.useRef(null),U=$.useRef(),R=S=>{const I=Object.getOwnPropertyDescriptors(S);I.__original&&delete I.__original;const k=Object.create(Object.getPrototypeOf(S),I);if(!Object.prototype.hasOwnProperty.call(k,"__original"))try{Object.defineProperty(k,"__original",{value:S,writable:!1,enumerable:!1,configurable:!1})}catch{}return k},T=$.useMemo(()=>{const S=B,I=S?.language;let k=S;S&&(Y.current&&Y.current.__original===S?U.current!==I?(k=R(S),Y.current=k,U.current=I):k=Y.current:(k=R(S),Y.current=k,U.current=I));const j=[H,k,F];return j.t=H,j.i18n=k,j.ready=F,j},[H,B,F,B.resolvedLanguage,B.language,B.languages]);if(o&&u&&!F)throw new Promise(S=>{const I=()=>S();e.lng?nx(o,e.lng,y,I):Ky(o,y,I)});return T},RD=()=>{};var sx={};const pS=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},CD=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const o=r[t++];e[n++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=r[t++],c=r[t++],u=r[t++],d=((s&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const o=r[t++],c=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},yS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const o=r[s],c=s+1<r.length,u=c?r[s+1]:0,d=s+2<r.length,f=d?r[s+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,w=f&63;d||(w=64,c||(v=64)),n.push(t[g],t[y],t[v],t[w])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(pS(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):CD(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const o=t[r.charAt(s++)],u=s<r.length?t[r.charAt(s)]:0;++s;const f=s<r.length?t[r.charAt(s)]:64;++s;const y=s<r.length?t[r.charAt(s)]:64;if(++s,o==null||u==null||f==null||y==null)throw new ND;const v=o<<2|u>>4;if(n.push(v),f!==64){const w=u<<4&240|f>>2;if(n.push(w),y!==64){const E=f<<6&192|y;n.push(E)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class ND extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kD=function(r){const e=pS(r);return yS.encodeByteArray(e,!0)},Jf=function(r){return kD(r).replace(/\./g,"")},_S=function(r){try{return yS.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const DD=()=>vS().__FIREBASE_DEFAULTS__,OD=()=>{if(typeof process>"u"||typeof sx>"u")return;const r=sx.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},MD=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&_S(r[1]);return e&&JSON.parse(e)},Mm=()=>{try{return RD()||DD()||OD()||MD()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},bS=r=>Mm()?.emulatorHosts?.[r],wS=r=>{const e=bS(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},xS=()=>Mm()?.config,ES=r=>Mm()?.[`_${r}`];class PD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}function Bo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function B0(r){return(await fetch(r,{credentials:"include"})).ok}function TS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,o=r.sub||r.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Jf(JSON.stringify(t)),Jf(JSON.stringify(c)),""].join(".")}const Hu={};function jD(){const r={prod:[],emulator:[]};for(const e of Object.keys(Hu))Hu[e]?r.emulator.push(e):r.prod.push(e);return r}function VD(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let ax=!1;function F0(r,e){if(typeof window>"u"||typeof document>"u"||!Bo(window.location.host)||Hu[r]===e||Hu[r]||ax)return;Hu[r]=e;function t(v){return`__firebase__banner__${v}`}const n="__firebase__banner",o=jD().prod.length>0;function c(){const v=document.getElementById(n);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{ax=!0,c()},v}function g(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=VD(n),w=t("text"),E=document.getElementById(w)||document.createElement("span"),D=t("learnmore"),M=document.getElementById(D)||document.createElement("a"),V=t("preprendIcon"),H=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const F=v.element;u(F),g(M,D);const B=f();d(H,V),F.append(H,E,M,B),document.body.appendChild(F)}o?(E.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function SS(){const r=Mm()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zD(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function BD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FD(){const r=mn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function AS(){return!SS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IS(){return!SS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function RS(){try{return typeof indexedDB=="object"}catch{return!1}}function HD(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const qD="FirebaseError";class Bi extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=qD,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ah.prototype.create)}}class Ah{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?$D(o,n):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new Bi(s,u,n)}}function $D(r,e){return r.replace(GD,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const GD=/\{\$([^}]+)}/g;function KD(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ys(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const o=r[s],c=e[s];if(ox(o)&&ox(c)){if(!ys(o,c))return!1}else if(o!==c)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function ox(r){return r!==null&&typeof r=="object"}function Ih(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Mu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,o]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Pu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function YD(r,e){const t=new QD(r,e);return t.subscribe.bind(t)}class QD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");WD(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=Sy),s.error===void 0&&(s.error=Sy),s.complete===void 0&&(s.complete=Sy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WD(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Sy(){}function Xt(r){return r&&r._delegate?r._delegate:r}class Ea{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const lo="[DEFAULT]";class XD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new PD;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZD(e))try{this.getOrInitializeService({instanceIdentifier:lo})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});n.resolve(o)}catch{}}}}clearInstance(e=lo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lo){return this.instances.has(e)}getOptions(e=lo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);n===u&&c.resolve(s)}return s}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const o=this.instances.get(n);return o&&e(o,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:JD(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=lo){return this.component?this.component.multipleInstances?e:lo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JD(r){return r===lo?void 0:r}function ZD(r){return r.instantiationMode==="EAGER"}class e4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new XD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Je;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Je||(Je={}));const t4={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},n4=Je.INFO,r4={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},i4=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=r4[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class H0{constructor(e){this.name=e,this._logLevel=n4,this._logHandler=i4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?t4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const s4=(r,e)=>e.some(t=>r instanceof t);let lx,cx;function a4(){return lx||(lx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function o4(){return cx||(cx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CS=new WeakMap,Qy=new WeakMap,NS=new WeakMap,Ay=new WeakMap,q0=new WeakMap;function l4(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",o),r.removeEventListener("error",c)},o=()=>{t(pa(r.result)),s()},c=()=>{n(r.error),s()};r.addEventListener("success",o),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&CS.set(t,r)}).catch(()=>{}),q0.set(e,r),e}function c4(r){if(Qy.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",c),r.removeEventListener("abort",c)},o=()=>{t(),s()},c=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",o),r.addEventListener("error",c),r.addEventListener("abort",c)});Qy.set(r,e)}let Wy={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Qy.get(r);if(e==="objectStoreNames")return r.objectStoreNames||NS.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pa(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function u4(r){Wy=r(Wy)}function h4(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Iy(this),e,...t);return NS.set(n,e.sort?e.sort():[e]),pa(n)}:o4().includes(r)?function(...e){return r.apply(Iy(this),e),pa(CS.get(this))}:function(...e){return pa(r.apply(Iy(this),e))}}function d4(r){return typeof r=="function"?h4(r):(r instanceof IDBTransaction&&c4(r),s4(r,a4())?new Proxy(r,Wy):r)}function pa(r){if(r instanceof IDBRequest)return l4(r);if(Ay.has(r))return Ay.get(r);const e=d4(r);return e!==r&&(Ay.set(r,e),q0.set(e,r)),e}const Iy=r=>q0.get(r);function f4(r,e,{blocked:t,upgrade:n,blocking:s,terminated:o}={}){const c=indexedDB.open(r,e),u=pa(c);return n&&c.addEventListener("upgradeneeded",d=>{n(pa(c.result),d.oldVersion,d.newVersion,pa(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const m4=["get","getKey","getAll","getAllKeys","count"],g4=["put","add","delete","clear"],Ry=new Map;function ux(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ry.get(e))return Ry.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=g4.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||m4.includes(t)))return;const o=async function(c,...u){const d=this.transaction(c,s?"readwrite":"readonly");let f=d.store;return n&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),s&&d.done]))[0]};return Ry.set(e,o),o}u4(r=>({...r,get:(e,t,n)=>ux(e,t)||r.get(e,t,n),has:(e,t)=>!!ux(e,t)||r.has(e,t)}));class p4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(y4(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function y4(r){return r.getComponent()?.type==="VERSION"}const Xy="@firebase/app",hx="0.14.6";const _s=new H0("@firebase/app"),_4="@firebase/app-compat",v4="@firebase/analytics-compat",b4="@firebase/analytics",w4="@firebase/app-check-compat",x4="@firebase/app-check",E4="@firebase/auth",T4="@firebase/auth-compat",S4="@firebase/database",A4="@firebase/data-connect",I4="@firebase/database-compat",R4="@firebase/functions",C4="@firebase/functions-compat",N4="@firebase/installations",k4="@firebase/installations-compat",D4="@firebase/messaging",O4="@firebase/messaging-compat",M4="@firebase/performance",P4="@firebase/performance-compat",j4="@firebase/remote-config",V4="@firebase/remote-config-compat",L4="@firebase/storage",U4="@firebase/storage-compat",z4="@firebase/firestore",B4="@firebase/ai",F4="@firebase/firestore-compat",H4="firebase",q4="12.6.0";const Jy="[DEFAULT]",$4={[Xy]:"fire-core",[_4]:"fire-core-compat",[b4]:"fire-analytics",[v4]:"fire-analytics-compat",[x4]:"fire-app-check",[w4]:"fire-app-check-compat",[E4]:"fire-auth",[T4]:"fire-auth-compat",[S4]:"fire-rtdb",[A4]:"fire-data-connect",[I4]:"fire-rtdb-compat",[R4]:"fire-fn",[C4]:"fire-fn-compat",[N4]:"fire-iid",[k4]:"fire-iid-compat",[D4]:"fire-fcm",[O4]:"fire-fcm-compat",[M4]:"fire-perf",[P4]:"fire-perf-compat",[j4]:"fire-rc",[V4]:"fire-rc-compat",[L4]:"fire-gcs",[U4]:"fire-gcs-compat",[z4]:"fire-fst",[F4]:"fire-fst-compat",[B4]:"fire-vertex","fire-js":"fire-js",[H4]:"fire-js-all"};const Zf=new Map,G4=new Map,Zy=new Map;function dx(r,e){try{r.container.addComponent(e)}catch(t){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Ao(r){const e=r.name;if(Zy.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;Zy.set(e,r);for(const t of Zf.values())dx(t,r);for(const t of G4.values())dx(t,r);return!0}function Pm(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function yr(r){return r==null?!1:r.settings!==void 0}const K4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ya=new Ah("app","Firebase",K4);class Y4{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ya.create("app-deleted",{appName:this._name})}}const Fo=q4;function kS(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:Jy,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw ya.create("bad-app-name",{appName:String(s)});if(t||(t=xS()),!t)throw ya.create("no-options");const o=Zf.get(s);if(o){if(ys(t,o.options)&&ys(n,o.config))return o;throw ya.create("duplicate-app",{appName:s})}const c=new e4(s);for(const d of Zy.values())c.addComponent(d);const u=new Y4(t,n,c);return Zf.set(s,u),u}function $0(r=Jy){const e=Zf.get(r);if(!e&&r===Jy&&xS())return kS();if(!e)throw ya.create("no-app",{appName:r});return e}function Di(r,e,t){let n=$4[r]??r;t&&(n+=`-${t}`);const s=n.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${n}" with version "${e}":`];s&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(c.join(" "));return}Ao(new Ea(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const Q4="firebase-heartbeat-database",W4=1,nh="firebase-heartbeat-store";let Cy=null;function DS(){return Cy||(Cy=f4(Q4,W4,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(nh)}catch(t){console.warn(t)}}}}).catch(r=>{throw ya.create("idb-open",{originalErrorMessage:r.message})})),Cy}async function X4(r){try{const t=(await DS()).transaction(nh),n=await t.objectStore(nh).get(OS(r));return await t.done,n}catch(e){if(e instanceof Bi)_s.warn(e.message);else{const t=ya.create("idb-get",{originalErrorMessage:e?.message});_s.warn(t.message)}}}async function fx(r,e){try{const n=(await DS()).transaction(nh,"readwrite");await n.objectStore(nh).put(e,OS(r)),await n.done}catch(t){if(t instanceof Bi)_s.warn(t.message);else{const n=ya.create("idb-set",{originalErrorMessage:t?.message});_s.warn(n.message)}}}function OS(r){return`${r.name}!${r.options.appId}`}const J4=1024,Z4=30;class eO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nO(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=mx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>Z4){const s=rO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_s.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=mx(),{heartbeatsToSend:t,unsentEntries:n}=tO(this._heartbeatsCache.heartbeats),s=Jf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return _s.warn(e),""}}}function mx(){return new Date().toISOString().substring(0,10)}function tO(r,e=J4){const t=[];let n=r.slice();for(const s of r){const o=t.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),gx(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),gx(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class nO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RS()?HD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await X4(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return fx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return fx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function gx(r){return Jf(JSON.stringify({version:2,heartbeats:r})).length}function rO(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}function iO(r){Ao(new Ea("platform-logger",e=>new p4(e),"PRIVATE")),Ao(new Ea("heartbeat",e=>new eO(e),"PRIVATE")),Di(Xy,hx,r),Di(Xy,hx,"esm2020"),Di("fire-js","")}iO("");var sO="firebase",aO="12.6.0";Di(sO,aO,"app");function MS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oO=MS,PS=new Ah("auth","Firebase",MS());const em=new H0("@firebase/auth");function lO(r,...e){em.logLevel<=Je.WARN&&em.warn(`Auth (${Fo}): ${r}`,...e)}function Cf(r,...e){em.logLevel<=Je.ERROR&&em.error(`Auth (${Fo}): ${r}`,...e)}function ri(r,...e){throw G0(r,...e)}function Oi(r,...e){return G0(r,...e)}function jS(r,e,t){const n={...oO(),[e]:t};return new Ah("auth","Firebase",n).create(e,{appName:r.name})}function gs(r){return jS(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function G0(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return PS.create(r,...e)}function je(r,e,...t){if(!r)throw G0(e,...t)}function hs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Cf(e),new Error(e)}function vs(r,e){r||hs(e)}function e0(){return typeof self<"u"&&self.location?.href||""}function cO(){return px()==="http:"||px()==="https:"}function px(){return typeof self<"u"&&self.location?.protocol||null}function uO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cO()||zD()||"connection"in navigator)?navigator.onLine:!0}function hO(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Rh{constructor(e,t){this.shortDelay=e,this.longDelay=t,vs(t>e,"Short delay should be less than long delay!"),this.isMobile=LD()||BD()}get(){return uO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function K0(r,e){vs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class VS{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const dO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const fO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mO=new Rh(3e4,6e4);function Ts(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Fi(r,e,t,n,s={}){return LS(r,s,async()=>{let o={},c={};n&&(e==="GET"?c=n:o={body:JSON.stringify(n)});const u=Ih({key:r.config.apiKey,...c}).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const f={method:e,headers:d,...o};return UD()||(f.referrerPolicy="no-referrer"),r.emulatorConfig&&Bo(r.emulatorConfig.host)&&(f.credentials="include"),VS.fetch()(await US(r,r.config.apiHost,t,u),f)})}async function LS(r,e,t){r._canInitEmulator=!1;const n={...dO,...e};try{const s=new pO(r),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw pf(r,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw pf(r,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw pf(r,"email-already-in-use",c);if(d==="USER_DISABLED")throw pf(r,"user-disabled",c);const g=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw jS(r,g,f);ri(r,g)}}catch(s){if(s instanceof Bi)throw s;ri(r,"network-request-failed",{message:String(s)})}}async function Ch(r,e,t,n,s={}){const o=await Fi(r,e,t,n,s);return"mfaPendingCredential"in o&&ri(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function US(r,e,t,n){const s=`${e}${t}?${n}`,o=r,c=o.config.emulator?K0(r.config,s):`${r.config.apiScheme}://${s}`;return fO.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function gO(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Oi(this.auth,"network-request-failed")),mO.get())})}}function pf(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=Oi(r,e,n);return s.customData._tokenResponse=t,s}function yx(r){return r!==void 0&&r.enterprise!==void 0}class yO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return gO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _O(r,e){return Fi(r,"GET","/v2/recaptchaConfig",Ts(r,e))}async function vO(r,e){return Fi(r,"POST","/v1/accounts:delete",e)}async function tm(r,e){return Fi(r,"POST","/v1/accounts:lookup",e)}function qu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bO(r,e=!1){const t=Xt(r),n=await t.getIdToken(e),s=Y0(n);je(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:n,authTime:qu(Ny(s.auth_time)),issuedAtTime:qu(Ny(s.iat)),expirationTime:qu(Ny(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Ny(r){return Number(r)*1e3}function Y0(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Cf("JWT malformed, contained fewer than 3 sections"),null;try{const s=_S(t);return s?JSON.parse(s):(Cf("Failed to decode base64 JWT payload"),null)}catch(s){return Cf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function _x(r){const e=Y0(r);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ic(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Bi&&wO(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function wO({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class xO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class t0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qu(this.lastLoginAt),this.creationTime=qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function nm(r){const e=r.auth,t=await r.getIdToken(),n=await ic(r,tm(e,{idToken:t}));je(n?.users.length,e,"internal-error");const s=n.users[0];r._notifyReloadListener(s);const o=s.providerUserInfo?.length?zS(s.providerUserInfo):[],c=TO(r.providerData,o),u=r.isAnonymous,d=!(r.email&&s.passwordHash)&&!c?.length,f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new t0(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(r,g)}async function EO(r){const e=Xt(r);await nm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TO(r,e){return[...r.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function zS(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function SO(r,e){const t=await LS(r,{},async()=>{const n=Ih({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=r.config,c=await US(r,s,"/v1/token",`key=${o}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:n};return r.emulatorConfig&&Bo(r.emulatorConfig.host)&&(d.credentials="include"),VS.fetch()(c,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function AO(r,e){return Fi(r,"POST","/v2/accounts:revokeToken",Ts(r,e))}class Jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_x(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=_x(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:o}=await SO(e,t);this.updateTokensAndExpiration(n,s,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:o}=t,c=new Jl;return n&&(je(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),s&&(je(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(je(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jl,this.toJSON())}_performRefresh(){return hs("not implemented")}}function sa(r,e){je(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ti{constructor({uid:e,auth:t,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new xO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new t0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ic(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bO(this,e)}reload(){return EO(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ti({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await nm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yr(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await ic(this,vO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:w,providerData:E,stsTokenManager:D}=t;je(y&&D,e,"internal-error");const M=Jl.fromJSON(this.name,D);je(typeof y=="string",e,"internal-error"),sa(n,e.name),sa(s,e.name),je(typeof v=="boolean",e,"internal-error"),je(typeof w=="boolean",e,"internal-error"),sa(o,e.name),sa(c,e.name),sa(u,e.name),sa(d,e.name),sa(f,e.name),sa(g,e.name);const V=new ti({uid:y,auth:e,email:s,emailVerified:v,displayName:n,isAnonymous:w,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:M,createdAt:f,lastLoginAt:g});return E&&Array.isArray(E)&&(V.providerData=E.map(H=>({...H}))),d&&(V._redirectEventId=d),V}static async _fromIdTokenResponse(e,t,n=!1){const s=new Jl;s.updateFromServerResponse(t);const o=new ti({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await nm(o),o}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];je(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?zS(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,u=new Jl;u.updateFromIdToken(n);const d=new ti({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new t0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}const vx=new Map;function ds(r){vs(r instanceof Function,"Expected a class definition");let e=vx.get(r);return e?(vs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,vx.set(r,e),e)}class BS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}BS.type="NONE";const bx=BS;function Nf(r,e,t){return`firebase:${r}:${e}:${t}`}class Zl{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:o}=this.auth;this.fullUserKey=Nf(this.userKey,s.apiKey,o),this.fullPersistenceKey=Nf("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await tm(this.auth,{idToken:e}).catch(()=>{});return t?ti._fromGetAccountInfoResponse(this.auth,t,e):null}return ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Zl(ds(bx),e,n);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||ds(bx);const c=Nf(n,e.config.apiKey,e.name);let u=null;for(const f of t)try{const g=await f._get(c);if(g){let y;if(typeof g=="string"){const v=await tm(e,{idToken:g}).catch(()=>{});if(!v)break;y=await ti._fromGetAccountInfoResponse(e,v,g)}else y=ti._fromJSON(e,g);f!==o&&(u=y),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Zl(o,e,n):(o=d[0],u&&await o._set(c,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new Zl(o,e,n))}}function wx(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($S(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KS(e))return"Blackberry";if(YS(e))return"Webos";if(HS(e))return"Safari";if((e.includes("chrome/")||qS(e))&&!e.includes("edge/"))return"Chrome";if(GS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if(n?.length===2)return n[1]}return"Other"}function FS(r=mn()){return/firefox\//i.test(r)}function HS(r=mn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qS(r=mn()){return/crios\//i.test(r)}function $S(r=mn()){return/iemobile/i.test(r)}function GS(r=mn()){return/android/i.test(r)}function KS(r=mn()){return/blackberry/i.test(r)}function YS(r=mn()){return/webos/i.test(r)}function Q0(r=mn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function IO(r=mn()){return Q0(r)&&!!window.navigator?.standalone}function RO(){return FD()&&document.documentMode===10}function QS(r=mn()){return Q0(r)||GS(r)||YS(r)||KS(r)||/windows phone/i.test(r)||$S(r)}function WS(r,e=[]){let t;switch(r){case"Browser":t=wx(mn());break;case"Worker":t=`${wx(mn())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fo}/${n}`}class CO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=o=>new Promise((c,u)=>{try{const d=e(o);c(d)}catch(d){u(d)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function NO(r,e={}){return Fi(r,"GET","/v2/passwordPolicy",Ts(r,e))}const kO=6;class DO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??kO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class OO{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xx(this),this.idTokenSubscription=new xx(this),this.beforeStateQueue=new CO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ds(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Zl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await tm(this,{idToken:e}),n=await ti._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(yr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=n?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(n=u.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await nm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yr(this.app))return Promise.reject(gs(this));const t=e?Xt(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yr(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yr(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NO(this),t=new DO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ah("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await AO(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ds(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await Zl.create(this,[ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,s);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&lO(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ho(r){return Xt(r)}class xx{constructor(e){this.auth=e,this.observer=null,this.addObserver=YD(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let jm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MO(r){jm=r}function XS(r){return jm.loadJS(r)}function PO(){return jm.recaptchaEnterpriseScript}function jO(){return jm.gapiScript}function VO(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class LO{constructor(){this.enterprise=new UO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class UO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const zO="recaptcha-enterprise",JS="NO_RECAPTCHA";class BO{constructor(e){this.type=zO,this.auth=Ho(e)}async verify(e="verify",t=!1){async function n(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{_O(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new yO(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(d=>{u(d)})})}function s(o,c,u){const d=window.grecaptcha;yx(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(JS)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new LO().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{n(this.auth).then(u=>{if(!t&&yx(window.grecaptcha))s(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=PO();d.length!==0&&(d+=u),XS(d).then(()=>{s(u,o,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function Ex(r,e,t,n=!1,s=!1){const o=new BO(r);let c;if(s)c=JS;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function n0(r,e,t,n,s){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Ex(r,e,t,t==="getOobCode");return n(r,o)}else return n(r,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Ex(r,e,t,t==="getOobCode");return n(r,c)}else return Promise.reject(o)})}function FO(r,e){const t=Pm(r,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(ys(o,e??{}))return s;ri(s,"already-initialized")}return t.initialize({options:e})}function HO(r,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(ds);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e?.popupRedirectResolver)}function qO(r,e,t){const n=Ho(r);je(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,o=ZS(e),{host:c,port:u}=$O(e),d=u===null?"":`:${u}`,f={url:`${o}//${c}${d}/`},g=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){je(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),je(ys(f,n.config.emulator)&&ys(g,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=f,n.emulatorConfig=g,n.settings.appVerificationDisabledForTesting=!0,Bo(c)?(B0(`${o}//${c}${d}`),F0("Auth",!0)):GO()}function ZS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function $O(r){const e=ZS(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const o=s[1];return{host:o,port:Tx(n.substr(o.length+1))}}else{const[o,c]=n.split(":");return{host:o,port:Tx(c)}}}function Tx(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function GO(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class W0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,t){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}async function KO(r,e){return Fi(r,"POST","/v1/accounts:signUp",e)}async function YO(r,e){return Ch(r,"POST","/v1/accounts:signInWithPassword",Ts(r,e))}async function QO(r,e){return Fi(r,"POST","/v1/accounts:sendOobCode",Ts(r,e))}async function WO(r,e){return QO(r,e)}async function XO(r,e){return Ch(r,"POST","/v1/accounts:signInWithEmailLink",Ts(r,e))}async function JO(r,e){return Ch(r,"POST","/v1/accounts:signInWithEmailLink",Ts(r,e))}class rh extends W0{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new rh(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new rh(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return n0(e,t,"signInWithPassword",YO);case"emailLink":return XO(e,{email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return n0(e,n,"signUpPassword",KO);case"emailLink":return JO(e,{idToken:t,email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ec(r,e){return Ch(r,"POST","/v1/accounts:signInWithIdp",Ts(r,e))}const ZO="http://localhost";class Io extends W0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Io(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ri("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...o}=t;if(!n||!s)return null;const c=new Io(n,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ec(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ec(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ec(e,t)}buildRequest(){const e={requestUri:ZO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ih(t)}return e}}function eM(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tM(r){const e=Mu(Pu(r)).link,t=e?Mu(Pu(e)).deep_link_id:null,n=Mu(Pu(r)).deep_link_id;return(n?Mu(Pu(n)).link:null)||n||t||e||r}class X0{constructor(e){const t=Mu(Pu(e)),n=t.apiKey??null,s=t.oobCode??null,o=eM(t.mode??null);je(n&&s&&o,"argument-error"),this.apiKey=n,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=tM(e);try{return new X0(t)}catch{return null}}}class bc{constructor(){this.providerId=bc.PROVIDER_ID}static credential(e,t){return rh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=X0.parseLink(t);return je(n,"argument-error"),rh._fromEmailAndCode(e,n.code,n.tenantId)}}bc.PROVIDER_ID="password";bc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class eA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Nh extends eA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ha extends Nh{constructor(){super("facebook.com")}static credential(e){return Io._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.FACEBOOK_SIGN_IN_METHOD="facebook.com";ha.PROVIDER_ID="facebook.com";class us extends Nh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Io._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return us.credential(t,n)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";class da extends Nh{constructor(){super("github.com")}static credential(e){return Io._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return da.credential(e.oauthAccessToken)}catch{return null}}}da.GITHUB_SIGN_IN_METHOD="github.com";da.PROVIDER_ID="github.com";class fa extends Nh{constructor(){super("twitter.com")}static credential(e,t){return Io._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return fa.credential(t,n)}catch{return null}}}fa.TWITTER_SIGN_IN_METHOD="twitter.com";fa.PROVIDER_ID="twitter.com";async function nM(r,e){return Ch(r,"POST","/v1/accounts:signUp",Ts(r,e))}class Ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const o=await ti._fromIdTokenResponse(e,n,s),c=Sx(n);return new Ro({user:o,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=Sx(n);return new Ro({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function Sx(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class rm extends Bi{constructor(e,t,n,s){super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,rm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new rm(e,t,n,s)}}function tA(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?rm._fromErrorAndOperation(r,o,e,n):o})}async function rM(r,e,t=!1){const n=await ic(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ro._forOperation(r,"link",n)}async function iM(r,e,t=!1){const{auth:n}=r;if(yr(n.app))return Promise.reject(gs(n));const s="reauthenticate";try{const o=await ic(r,tA(n,s,e,r),t);je(o.idToken,n,"internal-error");const c=Y0(o.idToken);je(c,n,"internal-error");const{sub:u}=c;return je(r.uid===u,n,"user-mismatch"),Ro._forOperation(r,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&ri(n,"user-mismatch"),o}}async function nA(r,e,t=!1){if(yr(r.app))return Promise.reject(gs(r));const n="signIn",s=await tA(r,n,e),o=await Ro._fromIdTokenResponse(r,n,s);return t||await r._updateCurrentUser(o.user),o}async function sM(r,e){return nA(Ho(r),e)}async function rA(r){const e=Ho(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aM(r,e,t){if(yr(r.app))return Promise.reject(gs(r));const n=Ho(r),c=await n0(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nM).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&rA(r),d}),u=await Ro._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(u.user),u}function Ax(r,e,t){return yr(r.app)?Promise.reject(gs(r)):sM(Xt(r),bc.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&rA(r),n})}async function iA(r,e){const t=Xt(r),s={requestType:"VERIFY_EMAIL",idToken:await r.getIdToken()},{email:o}=await WO(t.auth,s);o!==r.email&&await r.reload()}async function oM(r,e){return Fi(r,"POST","/v1/accounts:update",e)}async function r0(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=Xt(r),o={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await ic(n,oM(n.auth,o));n.displayName=c.displayName||null,n.photoURL=c.photoUrl||null;const u=n.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=n.displayName,u.photoURL=n.photoURL),await n._updateTokensIfNecessary(c)}function lM(r,e,t,n){return Xt(r).onIdTokenChanged(e,t,n)}function cM(r,e,t){return Xt(r).beforeAuthStateChanged(e,t)}function uM(r,e,t,n){return Xt(r).onAuthStateChanged(e,t,n)}const im="__sak";class sA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(im,"1"),this.storage.removeItem(im),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const hM=1e3,dM=10;class aA extends sA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(n);!t&&this.localCache[n]===c||this.notifyListeners(n,c)},o=this.storage.getItem(n);RO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,dM):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},hM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aA.type="LOCAL";const fM=aA;class oA extends sA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}oA.type="SESSION";const lA=oA;function mM(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Vm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new Vm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:o}=t.data,c=this.handlersMap[s];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const u=Array.from(c).map(async f=>f(t.origin,o)),d=await mM(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vm.receivers=[];function J0(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}class gM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((u,d)=>{const f=J0("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},n);c={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Mi(){return window}function pM(r){Mi().location.href=r}function cA(){return typeof Mi().WorkerGlobalScope<"u"&&typeof Mi().importScripts=="function"}async function yM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _M(){return navigator?.serviceWorker?.controller||null}function vM(){return cA()?self:null}const uA="firebaseLocalStorageDb",bM=1,sm="firebaseLocalStorage",hA="fbase_key";class kh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lm(r,e){return r.transaction([sm],e?"readwrite":"readonly").objectStore(sm)}function wM(){const r=indexedDB.deleteDatabase(uA);return new kh(r).toPromise()}function i0(){const r=indexedDB.open(uA,bM);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(sm,{keyPath:hA})}catch(s){t(s)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(sm)?e(n):(n.close(),await wM(),e(await i0()))})})}async function Ix(r,e,t){const n=Lm(r,!0).put({[hA]:e,value:t});return new kh(n).toPromise()}async function xM(r,e){const t=Lm(r,!1).get(e),n=await new kh(t).toPromise();return n===void 0?null:n.value}function Rx(r,e){const t=Lm(r,!0).delete(e);return new kh(t).toPromise()}const EM=800,TM=3;class dA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await i0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>TM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vm._getInstance(vM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yM(),!this.activeServiceWorker)return;this.sender=new gM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_M()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await i0();return await Ix(e,im,"1"),await Rx(e,im),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ix(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>xM(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Rx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Lm(s,!1).getAll();return new kh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dA.type="LOCAL";const SM=dA;new Rh(3e4,6e4);function AM(r,e){return e?ds(e):(je(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Z0 extends W0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ec(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ec(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ec(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function IM(r){return nA(r.auth,new Z0(r),r.bypassAuthState)}function RM(r){const{auth:e,user:t}=r;return je(t,e,"internal-error"),iM(t,new Z0(r),r.bypassAuthState)}async function CM(r){const{auth:e,user:t}=r;return je(t,e,"internal-error"),rM(t,new Z0(r),r.bypassAuthState)}class fA{constructor(e,t,n,s,o=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IM;case"linkViaPopup":case"linkViaRedirect":return CM;case"reauthViaPopup":case"reauthViaRedirect":return RM;default:ri(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const NM=new Rh(2e3,1e4);class Wl extends fA{constructor(e,t,n,s,o){super(e,t,s,o),this.provider=n,this.authWindow=null,this.pollId=null,Wl.currentPopupAction&&Wl.currentPopupAction.cancel(),Wl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const e=J0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NM.get())};e()}}Wl.currentPopupAction=null;const kM="pendingRedirect",kf=new Map;class DM extends fA{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=kf.get(this.auth._key());if(!e){try{const n=await OM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}kf.set(this.auth._key(),e)}return this.bypassAuthState||kf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OM(r,e){const t=jM(e),n=PM(r);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function MM(r,e){kf.set(r._key(),e)}function PM(r){return ds(r._redirectPersistence)}function jM(r){return Nf(kM,r.config.apiKey,r.name)}async function VM(r,e,t=!1){if(yr(r.app))return Promise.reject(gs(r));const n=Ho(r),s=AM(n,e),c=await new DM(n,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}const LM=600*1e3;class UM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!mA(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Oi(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cx(e))}saveEventToCache(e){this.cachedEventUids.add(Cx(e)),this.lastProcessedEventTime=Date.now()}}function Cx(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function mA({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function zM(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mA(r);default:return!1}}async function BM(r,e={}){return Fi(r,"GET","/v1/projects",e)}const FM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HM=/^https?/;async function qM(r){if(r.config.emulator)return;const{authorizedDomains:e}=await BM(r);for(const t of e)try{if($M(t))return}catch{}ri(r,"unauthorized-domain")}function $M(r){const e=e0(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===n}if(!HM.test(t))return!1;if(FM.test(r))return n===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}const GM=new Rh(3e4,6e4);function Nx(){const r=Mi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function KM(r){return new Promise((e,t)=>{function n(){Nx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Nx(),t(Oi(r,"network-request-failed"))},timeout:GM.get()})}if(Mi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Mi().gapi?.load)n();else{const s=VO("iframefcb");return Mi()[s]=()=>{gapi.load?n():t(Oi(r,"network-request-failed"))},XS(`${jO()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw Df=null,e})}let Df=null;function YM(r){return Df=Df||KM(r),Df}const QM=new Rh(5e3,15e3),WM="__/auth/iframe",XM="emulator/auth/iframe",JM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function e5(r){const e=r.config;je(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?K0(e,XM):`https://${r.config.authDomain}/${WM}`,n={apiKey:e.apiKey,appName:r.name,v:Fo},s=ZM.get(r.config.apiHost);s&&(n.eid=s);const o=r._getFrameworks();return o.length&&(n.fw=o.join(",")),`${t}?${Ih(n).slice(1)}`}async function t5(r){const e=await YM(r),t=Mi().gapi;return je(t,r,"internal-error"),e.open({where:document.body,url:e5(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JM,dontclear:!0},n=>new Promise(async(s,o)=>{await n.restyle({setHideOnLeave:!1});const c=Oi(r,"network-request-failed"),u=Mi().setTimeout(()=>{o(c)},QM.get());function d(){Mi().clearTimeout(u),s(n)}n.ping(d).then(d,()=>{o(c)})}))}const n5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},r5=500,i5=600,s5="_blank",a5="http://localhost";class kx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function o5(r,e,t,n=r5,s=i5){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const d={...n5,width:n.toString(),height:s.toString(),top:o,left:c},f=mn().toLowerCase();t&&(u=qS(f)?s5:t),FS(f)&&(e=e||a5,d.scrollbars="yes");const g=Object.entries(d).reduce((v,[w,E])=>`${v}${w}=${E},`,"");if(IO(f)&&u!=="_self")return l5(e||"",u),new kx(null);const y=window.open(e||"",u,g);je(y,r,"popup-blocked");try{y.focus()}catch{}return new kx(y)}function l5(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}const c5="__/auth/handler",u5="emulator/auth/handler",h5=encodeURIComponent("fac");async function Dx(r,e,t,n,s,o){je(r.config.authDomain,r,"auth-domain-config-required"),je(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Fo,eventId:s};if(e instanceof eA){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",KD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof Nh){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}r.tenantId&&(c.tid=r.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await r._getAppCheckToken(),f=d?`#${h5}=${encodeURIComponent(d)}`:"";return`${d5(r)}?${Ih(u).slice(1)}${f}`}function d5({config:r}){return r.emulator?K0(r,u5):`https://${r.authDomain}/${c5}`}const ky="webStorageSupport";class f5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lA,this._completeRedirectFn=VM,this._overrideRedirectResult=MM}async _openPopup(e,t,n,s){vs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Dx(e,t,n,e0(),s);return o5(e,o,J0())}async _openRedirect(e,t,n,s){await this._originValidation(e);const o=await Dx(e,t,n,e0(),s);return pM(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(vs(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await t5(e),n=new UM(e);return t.register("authEvent",s=>(je(s?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ky,{type:ky},s=>{const o=s?.[0]?.[ky];o!==void 0&&t(!!o),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=qM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return QS()||HS()||Q0()}}const m5=f5;var Ox="@firebase/auth",Mx="1.11.1";class g5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function p5(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function y5(r){Ao(new Ea("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=n.options;je(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:c,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WS(r)},f=new OO(n,s,o,d);return HO(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ao(new Ea("auth-internal",e=>{const t=Ho(e.getProvider("auth").getImmediate());return(n=>new g5(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Di(Ox,Mx,p5(r)),Di(Ox,Mx,"esm2020")}const _5=300,v5=ES("authIdTokenMaxAge")||_5;let Px=null;const b5=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>v5)return;const s=t?.token;Px!==s&&(Px=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function w5(r=$0()){const e=Pm(r,"auth");if(e.isInitialized())return e.getImmediate();const t=FO(r,{popupRedirectResolver:m5,persistence:[SM,fM,lA]}),n=ES("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const c=b5(o.toString());cM(t,c,()=>c(t.currentUser)),lM(t,u=>c(u))}}const s=bS("auth");return s&&qO(t,`http://${s}`),t}function x5(){return document.getElementsByTagName("head")?.[0]??document}MO({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=s=>{const o=Oi("internal-error");o.customData=s,t(o)},n.type="text/javascript",n.charset="UTF-8",x5().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});y5("Browser");var jx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _a,gA;(function(){var r;function e(R,T){function S(){}S.prototype=T.prototype,R.F=T.prototype,R.prototype=new S,R.prototype.constructor=R,R.D=function(I,k,j){for(var N=Array(arguments.length-2),G=2;G<arguments.length;G++)N[G-2]=arguments[G];return T.prototype[k].apply(I,N)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,T,S){S||(S=0);const I=Array(16);if(typeof T=="string")for(var k=0;k<16;++k)I[k]=T.charCodeAt(S++)|T.charCodeAt(S++)<<8|T.charCodeAt(S++)<<16|T.charCodeAt(S++)<<24;else for(k=0;k<16;++k)I[k]=T[S++]|T[S++]<<8|T[S++]<<16|T[S++]<<24;T=R.g[0],S=R.g[1],k=R.g[2];let j=R.g[3],N;N=T+(j^S&(k^j))+I[0]+3614090360&4294967295,T=S+(N<<7&4294967295|N>>>25),N=j+(k^T&(S^k))+I[1]+3905402710&4294967295,j=T+(N<<12&4294967295|N>>>20),N=k+(S^j&(T^S))+I[2]+606105819&4294967295,k=j+(N<<17&4294967295|N>>>15),N=S+(T^k&(j^T))+I[3]+3250441966&4294967295,S=k+(N<<22&4294967295|N>>>10),N=T+(j^S&(k^j))+I[4]+4118548399&4294967295,T=S+(N<<7&4294967295|N>>>25),N=j+(k^T&(S^k))+I[5]+1200080426&4294967295,j=T+(N<<12&4294967295|N>>>20),N=k+(S^j&(T^S))+I[6]+2821735955&4294967295,k=j+(N<<17&4294967295|N>>>15),N=S+(T^k&(j^T))+I[7]+4249261313&4294967295,S=k+(N<<22&4294967295|N>>>10),N=T+(j^S&(k^j))+I[8]+1770035416&4294967295,T=S+(N<<7&4294967295|N>>>25),N=j+(k^T&(S^k))+I[9]+2336552879&4294967295,j=T+(N<<12&4294967295|N>>>20),N=k+(S^j&(T^S))+I[10]+4294925233&4294967295,k=j+(N<<17&4294967295|N>>>15),N=S+(T^k&(j^T))+I[11]+2304563134&4294967295,S=k+(N<<22&4294967295|N>>>10),N=T+(j^S&(k^j))+I[12]+1804603682&4294967295,T=S+(N<<7&4294967295|N>>>25),N=j+(k^T&(S^k))+I[13]+4254626195&4294967295,j=T+(N<<12&4294967295|N>>>20),N=k+(S^j&(T^S))+I[14]+2792965006&4294967295,k=j+(N<<17&4294967295|N>>>15),N=S+(T^k&(j^T))+I[15]+1236535329&4294967295,S=k+(N<<22&4294967295|N>>>10),N=T+(k^j&(S^k))+I[1]+4129170786&4294967295,T=S+(N<<5&4294967295|N>>>27),N=j+(S^k&(T^S))+I[6]+3225465664&4294967295,j=T+(N<<9&4294967295|N>>>23),N=k+(T^S&(j^T))+I[11]+643717713&4294967295,k=j+(N<<14&4294967295|N>>>18),N=S+(j^T&(k^j))+I[0]+3921069994&4294967295,S=k+(N<<20&4294967295|N>>>12),N=T+(k^j&(S^k))+I[5]+3593408605&4294967295,T=S+(N<<5&4294967295|N>>>27),N=j+(S^k&(T^S))+I[10]+38016083&4294967295,j=T+(N<<9&4294967295|N>>>23),N=k+(T^S&(j^T))+I[15]+3634488961&4294967295,k=j+(N<<14&4294967295|N>>>18),N=S+(j^T&(k^j))+I[4]+3889429448&4294967295,S=k+(N<<20&4294967295|N>>>12),N=T+(k^j&(S^k))+I[9]+568446438&4294967295,T=S+(N<<5&4294967295|N>>>27),N=j+(S^k&(T^S))+I[14]+3275163606&4294967295,j=T+(N<<9&4294967295|N>>>23),N=k+(T^S&(j^T))+I[3]+4107603335&4294967295,k=j+(N<<14&4294967295|N>>>18),N=S+(j^T&(k^j))+I[8]+1163531501&4294967295,S=k+(N<<20&4294967295|N>>>12),N=T+(k^j&(S^k))+I[13]+2850285829&4294967295,T=S+(N<<5&4294967295|N>>>27),N=j+(S^k&(T^S))+I[2]+4243563512&4294967295,j=T+(N<<9&4294967295|N>>>23),N=k+(T^S&(j^T))+I[7]+1735328473&4294967295,k=j+(N<<14&4294967295|N>>>18),N=S+(j^T&(k^j))+I[12]+2368359562&4294967295,S=k+(N<<20&4294967295|N>>>12),N=T+(S^k^j)+I[5]+4294588738&4294967295,T=S+(N<<4&4294967295|N>>>28),N=j+(T^S^k)+I[8]+2272392833&4294967295,j=T+(N<<11&4294967295|N>>>21),N=k+(j^T^S)+I[11]+1839030562&4294967295,k=j+(N<<16&4294967295|N>>>16),N=S+(k^j^T)+I[14]+4259657740&4294967295,S=k+(N<<23&4294967295|N>>>9),N=T+(S^k^j)+I[1]+2763975236&4294967295,T=S+(N<<4&4294967295|N>>>28),N=j+(T^S^k)+I[4]+1272893353&4294967295,j=T+(N<<11&4294967295|N>>>21),N=k+(j^T^S)+I[7]+4139469664&4294967295,k=j+(N<<16&4294967295|N>>>16),N=S+(k^j^T)+I[10]+3200236656&4294967295,S=k+(N<<23&4294967295|N>>>9),N=T+(S^k^j)+I[13]+681279174&4294967295,T=S+(N<<4&4294967295|N>>>28),N=j+(T^S^k)+I[0]+3936430074&4294967295,j=T+(N<<11&4294967295|N>>>21),N=k+(j^T^S)+I[3]+3572445317&4294967295,k=j+(N<<16&4294967295|N>>>16),N=S+(k^j^T)+I[6]+76029189&4294967295,S=k+(N<<23&4294967295|N>>>9),N=T+(S^k^j)+I[9]+3654602809&4294967295,T=S+(N<<4&4294967295|N>>>28),N=j+(T^S^k)+I[12]+3873151461&4294967295,j=T+(N<<11&4294967295|N>>>21),N=k+(j^T^S)+I[15]+530742520&4294967295,k=j+(N<<16&4294967295|N>>>16),N=S+(k^j^T)+I[2]+3299628645&4294967295,S=k+(N<<23&4294967295|N>>>9),N=T+(k^(S|~j))+I[0]+4096336452&4294967295,T=S+(N<<6&4294967295|N>>>26),N=j+(S^(T|~k))+I[7]+1126891415&4294967295,j=T+(N<<10&4294967295|N>>>22),N=k+(T^(j|~S))+I[14]+2878612391&4294967295,k=j+(N<<15&4294967295|N>>>17),N=S+(j^(k|~T))+I[5]+4237533241&4294967295,S=k+(N<<21&4294967295|N>>>11),N=T+(k^(S|~j))+I[12]+1700485571&4294967295,T=S+(N<<6&4294967295|N>>>26),N=j+(S^(T|~k))+I[3]+2399980690&4294967295,j=T+(N<<10&4294967295|N>>>22),N=k+(T^(j|~S))+I[10]+4293915773&4294967295,k=j+(N<<15&4294967295|N>>>17),N=S+(j^(k|~T))+I[1]+2240044497&4294967295,S=k+(N<<21&4294967295|N>>>11),N=T+(k^(S|~j))+I[8]+1873313359&4294967295,T=S+(N<<6&4294967295|N>>>26),N=j+(S^(T|~k))+I[15]+4264355552&4294967295,j=T+(N<<10&4294967295|N>>>22),N=k+(T^(j|~S))+I[6]+2734768916&4294967295,k=j+(N<<15&4294967295|N>>>17),N=S+(j^(k|~T))+I[13]+1309151649&4294967295,S=k+(N<<21&4294967295|N>>>11),N=T+(k^(S|~j))+I[4]+4149444226&4294967295,T=S+(N<<6&4294967295|N>>>26),N=j+(S^(T|~k))+I[11]+3174756917&4294967295,j=T+(N<<10&4294967295|N>>>22),N=k+(T^(j|~S))+I[2]+718787259&4294967295,k=j+(N<<15&4294967295|N>>>17),N=S+(j^(k|~T))+I[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,R.g[2]=R.g[2]+k&4294967295,R.g[3]=R.g[3]+j&4294967295}n.prototype.v=function(R,T){T===void 0&&(T=R.length);const S=T-this.blockSize,I=this.C;let k=this.h,j=0;for(;j<T;){if(k==0)for(;j<=S;)s(this,R,j),j+=this.blockSize;if(typeof R=="string"){for(;j<T;)if(I[k++]=R.charCodeAt(j++),k==this.blockSize){s(this,I),k=0;break}}else for(;j<T;)if(I[k++]=R[j++],k==this.blockSize){s(this,I),k=0;break}}this.h=k,this.o+=T},n.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;T=this.o*8;for(var S=R.length-8;S<R.length;++S)R[S]=T&255,T/=256;for(this.v(R),R=Array(16),T=0,S=0;S<4;++S)for(let I=0;I<32;I+=8)R[T++]=this.g[S]>>>I&255;return R};function o(R,T){var S=u;return Object.prototype.hasOwnProperty.call(S,R)?S[R]:S[R]=T(R)}function c(R,T){this.h=T;const S=[];let I=!0;for(let k=R.length-1;k>=0;k--){const j=R[k]|0;I&&j==T||(S[k]=j,I=!1)}this.g=S}var u={};function d(R){return-128<=R&&R<128?o(R,function(T){return new c([T|0],T<0?-1:0)}):new c([R|0],R<0?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return y;if(R<0)return M(f(-R));const T=[];let S=1;for(let I=0;R>=S;I++)T[I]=R/S|0,S*=4294967296;return new c(T,0)}function g(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return M(g(R.substring(1),T));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=f(Math.pow(T,8));let I=y;for(let j=0;j<R.length;j+=8){var k=Math.min(8,R.length-j);const N=parseInt(R.substring(j,j+k),T);k<8?(k=f(Math.pow(T,k)),I=I.j(k).add(f(N))):(I=I.j(S),I=I.add(f(N)))}return I}var y=d(0),v=d(1),w=d(16777216);r=c.prototype,r.m=function(){if(D(this))return-M(this).m();let R=0,T=1;for(let S=0;S<this.g.length;S++){const I=this.i(S);R+=(I>=0?I:4294967296+I)*T,T*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(E(this))return"0";if(D(this))return"-"+M(this).toString(R);const T=f(Math.pow(R,6));var S=this;let I="";for(;;){const k=B(S,T).g;S=V(S,k.j(T));let j=((S.g.length>0?S.g[0]:S.h)>>>0).toString(R);if(S=k,E(S))return j+I;for(;j.length<6;)j="0"+j;I=j+I}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function E(R){if(R.h!=0)return!1;for(let T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function D(R){return R.h==-1}r.l=function(R){return R=V(this,R),D(R)?-1:E(R)?0:1};function M(R){const T=R.g.length,S=[];for(let I=0;I<T;I++)S[I]=~R.g[I];return new c(S,~R.h).add(v)}r.abs=function(){return D(this)?M(this):this},r.add=function(R){const T=Math.max(this.g.length,R.g.length),S=[];let I=0;for(let k=0;k<=T;k++){let j=I+(this.i(k)&65535)+(R.i(k)&65535),N=(j>>>16)+(this.i(k)>>>16)+(R.i(k)>>>16);I=N>>>16,j&=65535,N&=65535,S[k]=N<<16|j}return new c(S,S[S.length-1]&-2147483648?-1:0)};function V(R,T){return R.add(M(T))}r.j=function(R){if(E(this)||E(R))return y;if(D(this))return D(R)?M(this).j(M(R)):M(M(this).j(R));if(D(R))return M(this.j(M(R)));if(this.l(w)<0&&R.l(w)<0)return f(this.m()*R.m());const T=this.g.length+R.g.length,S=[];for(var I=0;I<2*T;I++)S[I]=0;for(I=0;I<this.g.length;I++)for(let k=0;k<R.g.length;k++){const j=this.i(I)>>>16,N=this.i(I)&65535,G=R.i(k)>>>16,J=R.i(k)&65535;S[2*I+2*k]+=N*J,H(S,2*I+2*k),S[2*I+2*k+1]+=j*J,H(S,2*I+2*k+1),S[2*I+2*k+1]+=N*G,H(S,2*I+2*k+1),S[2*I+2*k+2]+=j*G,H(S,2*I+2*k+2)}for(R=0;R<T;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=T;R<2*T;R++)S[R]=0;return new c(S,0)};function H(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function F(R,T){this.g=R,this.h=T}function B(R,T){if(E(T))throw Error("division by zero");if(E(R))return new F(y,y);if(D(R))return T=B(M(R),T),new F(M(T.g),M(T.h));if(D(T))return T=B(R,M(T)),new F(M(T.g),T.h);if(R.g.length>30){if(D(R)||D(T))throw Error("slowDivide_ only works with positive integers.");for(var S=v,I=T;I.l(R)<=0;)S=Y(S),I=Y(I);var k=U(S,1),j=U(I,1);for(I=U(I,2),S=U(S,2);!E(I);){var N=j.add(I);N.l(R)<=0&&(k=k.add(S),j=N),I=U(I,1),S=U(S,1)}return T=V(R,k.j(T)),new F(k,T)}for(k=y;R.l(T)>=0;){for(S=Math.max(1,Math.floor(R.m()/T.m())),I=Math.ceil(Math.log(S)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),j=f(S),N=j.j(T);D(N)||N.l(R)>0;)S-=I,j=f(S),N=j.j(T);E(j)&&(j=v),k=k.add(j),R=V(R,N)}return new F(k,R)}r.B=function(R){return B(this,R).h},r.and=function(R){const T=Math.max(this.g.length,R.g.length),S=[];for(let I=0;I<T;I++)S[I]=this.i(I)&R.i(I);return new c(S,this.h&R.h)},r.or=function(R){const T=Math.max(this.g.length,R.g.length),S=[];for(let I=0;I<T;I++)S[I]=this.i(I)|R.i(I);return new c(S,this.h|R.h)},r.xor=function(R){const T=Math.max(this.g.length,R.g.length),S=[];for(let I=0;I<T;I++)S[I]=this.i(I)^R.i(I);return new c(S,this.h^R.h)};function Y(R){const T=R.g.length+1,S=[];for(let I=0;I<T;I++)S[I]=R.i(I)<<1|R.i(I-1)>>>31;return new c(S,R.h)}function U(R,T){const S=T>>5;T%=32;const I=R.g.length-S,k=[];for(let j=0;j<I;j++)k[j]=T>0?R.i(j+S)>>>T|R.i(j+S+1)<<32-T:R.i(j+S);return new c(k,R.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,gA=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,_a=c}).apply(typeof jx<"u"?jx:typeof self<"u"?self:typeof window<"u"?window:{});var yf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var pA,ju,yA,Of,s0,_A,vA,bA;(function(){var r,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof yf=="object"&&yf];for(var x=0;x<m.length;++x){var C=m[x];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var n=t(this);function s(m,x){if(x)e:{var C=n;m=m.split(".");for(var z=0;z<m.length-1;z++){var ae=m[z];if(!(ae in C))break e;C=C[ae]}m=m[m.length-1],z=C[m],x=x(z),x!=z&&x!=null&&e(C,m,{configurable:!0,writable:!0,value:x})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(x){var C=[],z;for(z in x)Object.prototype.hasOwnProperty.call(x,z)&&C.push([z,x[z]]);return C}});var o=o||{},c=this||self;function u(m){var x=typeof m;return x=="object"&&m!=null||x=="function"}function d(m,x,C){return m.call.apply(m.bind,arguments)}function f(m,x,C){return f=d,f.apply(null,arguments)}function g(m,x){var C=Array.prototype.slice.call(arguments,1);return function(){var z=C.slice();return z.push.apply(z,arguments),m.apply(this,z)}}function y(m,x){function C(){}C.prototype=x.prototype,m.Z=x.prototype,m.prototype=new C,m.prototype.constructor=m,m.Ob=function(z,ae,ue){for(var be=Array(arguments.length-2),He=2;He<arguments.length;He++)be[He-2]=arguments[He];return x.prototype[ae].apply(z,be)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const x=m.length;if(x>0){const C=Array(x);for(let z=0;z<x;z++)C[z]=m[z];return C}return[]}function E(m,x){for(let z=1;z<arguments.length;z++){const ae=arguments[z];var C=typeof ae;if(C=C!="object"?C:ae?Array.isArray(ae)?"array":C:"null",C=="array"||C=="object"&&typeof ae.length=="number"){C=m.length||0;const ue=ae.length||0;m.length=C+ue;for(let be=0;be<ue;be++)m[C+be]=ae[be]}else m.push(ae)}}class D{constructor(x,C){this.i=x,this.j=C,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function M(m){c.setTimeout(()=>{throw m},0)}function V(){var m=R;let x=null;return m.g&&(x=m.g,m.g=m.g.next,m.g||(m.h=null),x.next=null),x}class H{constructor(){this.h=this.g=null}add(x,C){const z=F.get();z.set(x,C),this.h?this.h.next=z:this.g=z,this.h=z}}var F=new D(()=>new B,m=>m.reset());class B{constructor(){this.next=this.g=this.h=null}set(x,C){this.h=x,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,U=!1,R=new H,T=()=>{const m=Promise.resolve(void 0);Y=()=>{m.then(S)}};function S(){for(var m;m=V();){try{m.h.call(m.g)}catch(C){M(C)}var x=F;x.j(m),x.h<100&&(x.h++,m.next=x.g,x.g=m)}U=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(m,x){this.type=m,this.g=this.target=x,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,x=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};c.addEventListener("test",C,x),c.removeEventListener("test",C,x)}catch{}return m})();function N(m){return/^[\s\xa0]*$/.test(m)}function G(m,x){k.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,x)}y(G,k),G.prototype.init=function(m,x){const C=this.type=m.type,z=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=x,x=m.relatedTarget,x||(C=="mouseover"?x=m.fromElement:C=="mouseout"&&(x=m.toElement)),this.relatedTarget=x,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var J="closure_listenable_"+(Math.random()*1e6|0),P=0;function O(m,x,C,z,ae){this.listener=m,this.proxy=null,this.src=x,this.type=C,this.capture=!!z,this.ha=ae,this.key=++P,this.da=this.fa=!1}function ee(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function W(m,x,C){for(const z in m)x.call(C,m[z],z,m)}function Z(m,x){for(const C in m)x.call(void 0,m[C],C,m)}function q(m){const x={};for(const C in m)x[C]=m[C];return x}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(m,x){let C,z;for(let ae=1;ae<arguments.length;ae++){z=arguments[ae];for(C in z)m[C]=z[C];for(let ue=0;ue<Q.length;ue++)C=Q[ue],Object.prototype.hasOwnProperty.call(z,C)&&(m[C]=z[C])}}function se(m){this.src=m,this.g={},this.h=0}se.prototype.add=function(m,x,C,z,ae){const ue=m.toString();m=this.g[ue],m||(m=this.g[ue]=[],this.h++);const be=_e(m,x,z,ae);return be>-1?(x=m[be],C||(x.fa=!1)):(x=new O(x,this.src,ue,!!z,ae),x.fa=C,m.push(x)),x};function ne(m,x){const C=x.type;if(C in m.g){var z=m.g[C],ae=Array.prototype.indexOf.call(z,x,void 0),ue;(ue=ae>=0)&&Array.prototype.splice.call(z,ae,1),ue&&(ee(x),m.g[C].length==0&&(delete m.g[C],m.h--))}}function _e(m,x,C,z){for(let ae=0;ae<m.length;++ae){const ue=m[ae];if(!ue.da&&ue.listener==x&&ue.capture==!!C&&ue.ha==z)return ae}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),Pe={};function Ce(m,x,C,z,ae){if(Array.isArray(x)){for(let ue=0;ue<x.length;ue++)Ce(m,x[ue],C,z,ae);return null}return C=st(C),m&&m[J]?m.J(x,C,u(z)?!!z.capture:!1,ae):et(m,x,C,!1,z,ae)}function et(m,x,C,z,ae,ue){if(!x)throw Error("Invalid event type");const be=u(ae)?!!ae.capture:!!ae;let He=Ct(m);if(He||(m[Ae]=He=new se(m)),C=He.add(x,C,z,be,ue),C.proxy)return C;if(z=at(),C.proxy=z,z.src=m,z.listener=C,m.addEventListener)j||(ae=be),ae===void 0&&(ae=!1),m.addEventListener(x.toString(),z,ae);else if(m.attachEvent)m.attachEvent(Rt(x.toString()),z);else if(m.addListener&&m.removeListener)m.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return C}function at(){function m(C){return x.call(m.src,m.listener,C)}const x=mt;return m}function ot(m,x,C,z,ae){if(Array.isArray(x))for(var ue=0;ue<x.length;ue++)ot(m,x[ue],C,z,ae);else z=u(z)?!!z.capture:!!z,C=st(C),m&&m[J]?(m=m.i,ue=String(x).toString(),ue in m.g&&(x=m.g[ue],C=_e(x,C,z,ae),C>-1&&(ee(x[C]),Array.prototype.splice.call(x,C,1),x.length==0&&(delete m.g[ue],m.h--)))):m&&(m=Ct(m))&&(x=m.g[x.toString()],m=-1,x&&(m=_e(x,C,z,ae)),(C=m>-1?x[m]:null)&&un(C))}function un(m){if(typeof m!="number"&&m&&!m.da){var x=m.src;if(x&&x[J])ne(x.i,m);else{var C=m.type,z=m.proxy;x.removeEventListener?x.removeEventListener(C,z,m.capture):x.detachEvent?x.detachEvent(Rt(C),z):x.addListener&&x.removeListener&&x.removeListener(z),(C=Ct(x))?(ne(C,m),C.h==0&&(C.src=null,x[Ae]=null)):ee(m)}}}function Rt(m){return m in Pe?Pe[m]:Pe[m]="on"+m}function mt(m,x){if(m.da)m=!0;else{x=new G(x,this);const C=m.listener,z=m.ha||m.src;m.fa&&un(m),m=C.call(z,x)}return m}function Ct(m){return m=m[Ae],m instanceof se?m:null}var it="__closure_events_fn_"+(Math.random()*1e9>>>0);function st(m){return typeof m=="function"?m:(m[it]||(m[it]=function(x){return m.handleEvent(x)}),m[it])}function $e(){I.call(this),this.i=new se(this),this.M=this,this.G=null}y($e,I),$e.prototype[J]=!0,$e.prototype.removeEventListener=function(m,x,C,z){ot(this,m,x,C,z)};function pe(m,x){var C,z=m.G;if(z)for(C=[];z;z=z.G)C.push(z);if(m=m.M,z=x.type||x,typeof x=="string")x=new k(x,m);else if(x instanceof k)x.target=x.target||m;else{var ae=x;x=new k(z,m),ie(x,ae)}ae=!0;let ue,be;if(C)for(be=C.length-1;be>=0;be--)ue=x.g=C[be],ae=Ee(ue,z,!0,x)&&ae;if(ue=x.g=m,ae=Ee(ue,z,!0,x)&&ae,ae=Ee(ue,z,!1,x)&&ae,C)for(be=0;be<C.length;be++)ue=x.g=C[be],ae=Ee(ue,z,!1,x)&&ae}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var m=this.i;for(const x in m.g){const C=m.g[x];for(let z=0;z<C.length;z++)ee(C[z]);delete m.g[x],m.h--}}this.G=null},$e.prototype.J=function(m,x,C,z){return this.i.add(String(m),x,!1,C,z)},$e.prototype.K=function(m,x,C,z){return this.i.add(String(m),x,!0,C,z)};function Ee(m,x,C,z){if(x=m.i.g[String(x)],!x)return!0;x=x.concat();let ae=!0;for(let ue=0;ue<x.length;++ue){const be=x[ue];if(be&&!be.da&&be.capture==C){const He=be.listener,Kt=be.ha||be.src;be.fa&&ne(m.i,be),ae=He.call(Kt,z)!==!1&&ae}}return ae&&!z.defaultPrevented}function Be(m,x){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:c.setTimeout(m,x||0)}function Me(m){m.g=Be(()=>{m.g=null,m.i&&(m.i=!1,Me(m))},m.l);const x=m.h;m.h=null,m.m.apply(null,x)}class xe extends I{constructor(x,C){super(),this.m=x,this.l=C,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Me(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tt(m){I.call(this),this.h=m,this.g={}}y(tt,I);var gt=[];function Fn(m){W(m.g,function(x,C){this.g.hasOwnProperty(C)&&un(x)},m),m.g={}}tt.prototype.N=function(){tt.Z.N.call(this),Fn(this)},tt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ut=c.JSON.stringify,Hn=c.JSON.parse,Bt=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function Dn(){}function xn(){}var Gt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Et(){k.call(this,"d")}y(Et,k);function Jt(){k.call(this,"c")}y(Jt,k);var Dt={},Qo=null;function oi(){return Qo=Qo||new $e}Dt.Ia="serverreachability";function Oa(m){k.call(this,Dt.Ia,m)}y(Oa,k);function On(m){const x=oi();pe(x,new Oa(x))}Dt.STAT_EVENT="statevent";function qi(m,x){k.call(this,Dt.STAT_EVENT,m),this.stat=x}y(qi,k);function pt(m){const x=oi();pe(x,new qi(x,m))}Dt.Ja="timingevent";function hn(m,x){k.call(this,Dt.Ja,m),this.size=x}y(hn,k);function En(m,x){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},x)}function Tn(){this.g=!0}Tn.prototype.ua=function(){this.g=!1};function Wo(m,x,C,z,ae,ue){m.info(function(){if(m.g)if(ue){var be="",He=ue.split("&");for(let ht=0;ht<He.length;ht++){var Kt=He[ht].split("=");if(Kt.length>1){const Pt=Kt[0];Kt=Kt[1];const Ar=Pt.split("_");be=Ar.length>=2&&Ar[1]=="type"?be+(Pt+"="+Kt+"&"):be+(Pt+"=redacted&")}}}else be=null;else be=ue;return"XMLHTTP REQ ("+z+") [attempt "+ae+"]: "+x+`
`+C+`
`+be})}function xr(m,x,C,z,ae,ue,be){m.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+ae+"]: "+x+`
`+C+`
`+ue+" "+be})}function pn(m,x,C,z){m.info(function(){return"XMLHTTP TEXT ("+x+"): "+_g(m,C)+(z?" "+z:"")})}function Ma(m,x){m.info(function(){return"TIMEOUT: "+x})}Tn.prototype.info=function(){};function _g(m,x){if(!m.g)return x;if(!x)return null;try{const ue=JSON.parse(x);if(ue){for(m=0;m<ue.length;m++)if(Array.isArray(ue[m])){var C=ue[m];if(!(C.length<2)){var z=C[1];if(Array.isArray(z)&&!(z.length<1)){var ae=z[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let be=1;be<z.length;be++)z[be]=""}}}}return ut(ue)}catch{return x}}var Pa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ac={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ic;function ja(){}y(ja,Dn),ja.prototype.g=function(){return new XMLHttpRequest},Ic=new ja;function $i(m){return encodeURIComponent(String(m))}function $h(m){var x=1;m=m.split(":");const C=[];for(;x>0&&m.length;)C.push(m.shift()),x--;return m.length&&C.push(m.join(":")),C}function Hr(m,x,C,z){this.j=m,this.i=x,this.l=C,this.S=z||1,this.V=new tt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qr}function qr(){this.i=null,this.g="",this.h=!1}var Zt={},yn={};function li(m,x,C){m.M=1,m.A=Va(tn(x)),m.u=C,m.R=!0,Xo(m,null)}function Xo(m,x){m.F=Date.now(),ci(m),m.B=tn(m.A);var C=m.B,z=m.S;Array.isArray(z)||(z=[String(z)]),tl(C.i,"t",z),m.C=0,C=m.j.L,m.h=new qr,m.g=ad(m.j,C?x:null,!m.u),m.P>0&&(m.O=new xe(f(m.Y,m,m.g),m.P)),x=m.V,C=m.g,z=m.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(gt[0]=ae.toString()),ae=gt);for(let ue=0;ue<ae.length;ue++){const be=Ce(C,ae[ue],z||x.handleEvent,!1,x.h||x);if(!be)break;x.g[be.key]=be}x=m.J?q(m.J):{},m.u?(m.v||(m.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,x)):(m.v="GET",m.g.ea(m.B,m.v,null,x)),On(),Wo(m.i,m.v,m.B,m.l,m.S,m.u)}Hr.prototype.ba=function(m){m=m.target;const x=this.O;x&&Kr(m)==3?x.j():this.Y(m)},Hr.prototype.Y=function(m){try{if(m==this.g)e:{const He=Kr(this.g),Kt=this.g.ya(),ht=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||Sn(this.g)))){this.K||He!=4||Kt==7||(Kt==8||ht<=0?On(3):On(2)),ui(this);var x=this.g.ca();this.X=x;var C=vg(this);if(this.o=x==200,xr(this.i,this.v,this.B,this.l,this.S,He,x),this.o){if(this.U&&!this.L){t:{if(this.g){var z,ae=this.g;if((z=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(z)){var ue=z;break t}}ue=null}if(m=ue)pn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hi(this,m);else{this.o=!1,this.m=3,pt(12),or(this),Er(this);break e}}if(this.R){m=!0;let Pt;for(;!this.K&&this.C<C.length;)if(Pt=Kh(this,C),Pt==yn){He==4&&(this.m=4,pt(14),m=!1),pn(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==Zt){this.m=4,pt(15),pn(this.i,this.l,C,"[Invalid Chunk]"),m=!1;break}else pn(this.i,this.l,Pt,null),hi(this,Pt);if(Gh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||C.length!=0||this.h.h||(this.m=1,pt(16),m=!1),this.o=this.o&&m,!m)pn(this.i,this.l,C,"[Invalid Chunked Response]"),or(this),Er(this);else if(C.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Fc(be),be.P=!0,pt(11))}}else pn(this.i,this.l,C,null),hi(this,C);He==4&&or(this),this.o&&!this.K&&(He==4?nd(this.j,this):(this.o=!1,ci(this)))}else Ki(this.g),x==400&&C.indexOf("Unknown SID")>0?(this.m=3,pt(12)):(this.m=0,pt(13)),or(this),Er(this)}}}catch{}finally{}};function vg(m){if(!Gh(m))return m.g.la();const x=Sn(m.g);if(x==="")return"";let C="";const z=x.length,ae=Kr(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return or(m),Er(m),"";m.h.i=new c.TextDecoder}for(let ue=0;ue<z;ue++)m.h.h=!0,C+=m.h.i.decode(x[ue],{stream:!(ae&&ue==z-1)});return x.length=0,m.h.g+=C,m.C=0,m.h.g}function Gh(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Kh(m,x){var C=m.C,z=x.indexOf(`
`,C);return z==-1?yn:(C=Number(x.substring(C,z)),isNaN(C)?Zt:(z+=1,z+C>x.length?yn:(x=x.slice(z,z+C),m.C=z+C,x)))}Hr.prototype.cancel=function(){this.K=!0,or(this)};function ci(m){m.T=Date.now()+m.H,Jo(m,m.H)}function Jo(m,x){if(m.D!=null)throw Error("WatchDog timer not null");m.D=En(f(m.aa,m),x)}function ui(m){m.D&&(c.clearTimeout(m.D),m.D=null)}Hr.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Ma(this.i,this.B),this.M!=2&&(On(),pt(17)),or(this),this.m=2,Er(this)):Jo(this,this.T-m)};function Er(m){m.j.I==0||m.K||nd(m.j,m)}function or(m){ui(m);var x=m.O;x&&typeof x.dispose=="function"&&x.dispose(),m.O=null,Fn(m.V),m.g&&(x=m.g,m.g=null,x.abort(),x.dispose())}function hi(m,x){try{var C=m.j;if(C.I!=0&&(C.g==m||fi(C.h,m))){if(!m.L&&fi(C.h,m)&&C.I==3){try{var z=C.Ba.g.parse(x)}catch{z=null}if(Array.isArray(z)&&z.length==3){var ae=z;if(ae[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<m.F)al(C),Ps(C);else break e;qa(C),pt(18)}}else C.xa=ae[1],0<C.xa-C.K&&ae[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=En(f(C.Va,C),6e3));di(C.h)<=1&&C.ta&&(C.ta=void 0)}else vi(C,11)}else if((m.L||C.g==m)&&al(C),!N(x))for(ae=C.Ba.g.parse(x),x=0;x<ae.length;x++){let ht=ae[x];const Pt=ht[0];if(!(Pt<=C.K))if(C.K=Pt,ht=ht[1],C.I==2)if(ht[0]=="c"){C.M=ht[1],C.ba=ht[2];const Ar=ht[3];Ar!=null&&(C.ka=Ar,C.j.info("VER="+C.ka));const bi=ht[4];bi!=null&&(C.za=bi,C.j.info("SVER="+C.za));const Yr=ht[5];Yr!=null&&typeof Yr=="number"&&Yr>0&&(z=1.5*Yr,C.O=z,C.j.info("backChannelRequestTimeoutMs_="+z)),z=C;const Qr=m.g;if(Qr){const $a=Qr.g?Qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($a){var ue=z.h;ue.g||$a.indexOf("spdy")==-1&&$a.indexOf("quic")==-1&&$a.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Nc(ue,ue.h),ue.h=null))}if(z.G){const ol=Qr.g?Qr.g.getResponseHeader("X-HTTP-Session-Id"):null;ol&&(z.wa=ol,yt(z.J,z.G,ol))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-m.F,C.j.info("Handshake RTT: "+C.T+"ms")),z=C;var be=m;if(z.na=sd(z,z.L?z.ba:null,z.W),be.L){kc(z.h,be);var He=be,Kt=z.O;Kt&&(He.H=Kt),He.D&&(ui(He),ci(He)),z.g=be}else ed(z);C.i.length>0&&_i(C)}else ht[0]!="stop"&&ht[0]!="close"||vi(C,7);else C.I==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?vi(C,7):zc(C):ht[0]!="noop"&&C.l&&C.l.qa(ht),C.A=0)}}On(4)}catch{}}var en=class{constructor(m,x){this.g=m,this.map=x}};function Rc(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function di(m){return m.h?1:m.g?m.g.size:0}function fi(m,x){return m.h?m.h==x:m.g?m.g.has(x):!1}function Nc(m,x){m.g?m.g.add(x):m.h=x}function kc(m,x){m.h&&m.h==x?m.h=null:m.g&&m.g.has(x)&&m.g.delete(x)}Rc.prototype.cancel=function(){if(this.i=Dc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Dc(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let x=m.i;for(const C of m.g.values())x=x.concat(C.G);return x}return w(m.i)}var Yh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zo(m,x){if(m){m=m.split("&");for(let C=0;C<m.length;C++){const z=m[C].indexOf("=");let ae,ue=null;z>=0?(ae=m[C].substring(0,z),ue=m[C].substring(z+1)):ae=m[C],x(ae,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function lr(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;m instanceof lr?(this.l=m.l,_n(this,m.j),this.o=m.o,this.g=m.g,Rs(this,m.u),this.h=m.h,Oc(this,Jh(m.i)),this.m=m.m):m&&(x=String(m).match(Yh))?(this.l=!1,_n(this,x[1]||"",!0),this.o=mi(x[2]||""),this.g=mi(x[3]||"",!0),Rs(this,x[4]),this.h=mi(x[5]||"",!0),Oc(this,x[6]||"",!0),this.m=mi(x[7]||"")):(this.l=!1,this.i=new Ns(null,this.l))}lr.prototype.toString=function(){const m=[];var x=this.j;x&&m.push(La(x,el,!0),":");var C=this.g;return(C||x=="file")&&(m.push("//"),(x=this.o)&&m.push(La(x,el,!0),"@"),m.push($i(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&m.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(La(C,C.charAt(0)=="/"?Mc:Qh,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",La(C,Wh)),m.join("")},lr.prototype.resolve=function(m){const x=tn(this);let C=!!m.j;C?_n(x,m.j):C=!!m.o,C?x.o=m.o:C=!!m.g,C?x.g=m.g:C=m.u!=null;var z=m.h;if(C)Rs(x,m.u);else if(C=!!m.h){if(z.charAt(0)!="/")if(this.g&&!this.h)z="/"+z;else{var ae=x.h.lastIndexOf("/");ae!=-1&&(z=x.h.slice(0,ae+1)+z)}if(ae=z,ae==".."||ae==".")z="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){z=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const ue=[];for(let be=0;be<ae.length;){const He=ae[be++];He=="."?z&&be==ae.length&&ue.push(""):He==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),z&&be==ae.length&&ue.push("")):(ue.push(He),z=!0)}z=ue.join("/")}else z=ae}return C?x.h=z:C=m.i.toString()!=="",C?Oc(x,Jh(m.i)):C=!!m.m,C&&(x.m=m.m),x};function tn(m){return new lr(m)}function _n(m,x,C){m.j=C?mi(x,!0):x,m.j&&(m.j=m.j.replace(/:$/,""))}function Rs(m,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);m.u=x}else m.u=null}function Oc(m,x,C){x instanceof Ns?(m.i=x,nl(m.i,m.l)):(C||(x=La(x,Cs)),m.i=new Ns(x,m.l))}function yt(m,x,C){m.i.set(x,C)}function Va(m){return yt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function mi(m,x){return m?x?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function La(m,x,C){return typeof m=="string"?(m=encodeURI(m).replace(x,Xn),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Xn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var el=/[#\/\?@]/g,Qh=/[#\?:]/g,Mc=/[#\?]/g,Cs=/[#\?@]/g,Wh=/#/g;function Ns(m,x){this.h=this.g=null,this.i=m||null,this.j=!!x}function Jn(m){m.g||(m.g=new Map,m.h=0,m.i&&Zo(m.i,function(x,C){m.add(decodeURIComponent(x.replace(/\+/g," ")),C)}))}r=Ns.prototype,r.add=function(m,x){Jn(this),this.i=null,m=ks(this,m);let C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(x),this.h+=1,this};function Xh(m,x){Jn(m),x=ks(m,x),m.g.has(x)&&(m.i=null,m.h-=m.g.get(x).length,m.g.delete(x))}function Pc(m,x){return Jn(m),x=ks(m,x),m.g.has(x)}r.forEach=function(m,x){Jn(this),this.g.forEach(function(C,z){C.forEach(function(ae){m.call(x,ae,z,this)},this)},this)};function jc(m,x){Jn(m);let C=[];if(typeof x=="string")Pc(m,x)&&(C=C.concat(m.g.get(ks(m,x))));else for(m=Array.from(m.g.values()),x=0;x<m.length;x++)C=C.concat(m[x]);return C}r.set=function(m,x){return Jn(this),this.i=null,m=ks(this,m),Pc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[x]),this.h+=1,this},r.get=function(m,x){return m?(m=jc(this,m),m.length>0?String(m[0]):x):x};function tl(m,x,C){Xh(m,x),C.length>0&&(m.i=null,m.g.set(ks(m,x),w(C)),m.h+=C.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],x=Array.from(this.g.keys());for(let z=0;z<x.length;z++){var C=x[z];const ae=$i(C);C=jc(this,C);for(let ue=0;ue<C.length;ue++){let be=ae;C[ue]!==""&&(be+="="+$i(C[ue])),m.push(be)}}return this.i=m.join("&")};function Jh(m){const x=new Ns;return x.i=m.i,m.g&&(x.g=new Map(m.g),x.h=m.h),x}function ks(m,x){return x=String(x),m.j&&(x=x.toLowerCase()),x}function nl(m,x){x&&!m.j&&(Jn(m),m.i=null,m.g.forEach(function(C,z){const ae=z.toLowerCase();z!=ae&&(Xh(this,z),tl(this,ae,C))},m)),m.j=x}function $r(m,x){const C=new Tn;if(c.Image){const z=new Image;z.onload=g(Tr,C,"TestLoadImage: loaded",!0,x,z),z.onerror=g(Tr,C,"TestLoadImage: error",!1,x,z),z.onabort=g(Tr,C,"TestLoadImage: abort",!1,x,z),z.ontimeout=g(Tr,C,"TestLoadImage: timeout",!1,x,z),c.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=m}else x(!1)}function Vc(m,x){const C=new Tn,z=new AbortController,ae=setTimeout(()=>{z.abort(),Tr(C,"TestPingServer: timeout",!1,x)},1e4);fetch(m,{signal:z.signal}).then(ue=>{clearTimeout(ae),ue.ok?Tr(C,"TestPingServer: ok",!0,x):Tr(C,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(ae),Tr(C,"TestPingServer: error",!1,x)})}function Tr(m,x,C,z,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),z(C)}catch{}}function Ds(){this.g=new Bt}function gi(m){this.i=m.Sb||null,this.h=m.ab||!1}y(gi,Dn),gi.prototype.g=function(){return new Ua(this.i,this.h)};function Ua(m,x){$e.call(this),this.H=m,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Ua,$e),r=Ua.prototype,r.open=function(m,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=x,this.readyState=1,Gr(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(x.body=m),(this.H||c).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Os(this)),this.readyState=0},r.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Gr(this)),this.g&&(this.readyState=3,Gr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;rl(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function rl(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}r.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var x=m.value?m.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!m.done}))&&(this.response=this.responseText+=x)}m.done?Os(this):Gr(this),this.readyState==3&&rl(this)}},r.Oa=function(m){this.g&&(this.response=this.responseText=m,Os(this))},r.Na=function(m){this.g&&(this.response=m,Os(this))},r.ga=function(){this.g&&Os(this)};function Os(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Gr(m)}r.setRequestHeader=function(m,x){this.A.append(m,x)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],x=this.h.entries();for(var C=x.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=x.next();return m.join(`\r
`)};function Gr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ua.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Sr(m){let x="";return W(m,function(C,z){x+=z,x+=":",x+=C,x+=`\r
`}),x}function za(m,x,C){e:{for(z in C){var z=!1;break e}z=!0}z||(C=Sr(C),typeof m=="string"?C!=null&&$i(C):yt(m,x,C))}function Tt(m){$e.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Tt,$e);var pi=/^https?$/i,Lc=["POST","PUT"];r=Tt.prototype,r.Fa=function(m){this.H=m},r.ea=function(m,x,C,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);x=x?x.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ic.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(x,String(m),!0),this.B=!1}catch(ue){Ba(this,ue);return}if(m=C||"",C=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var ae in z)C.set(ae,z[ae]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const ue of z.keys())C.set(ue,z.get(ue));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(C.keys()).find(ue=>ue.toLowerCase()=="content-type"),ae=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Lc,x,void 0)>=0)||z||ae||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,be]of C)this.g.setRequestHeader(ue,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ue){Ba(this,ue)}};function Ba(m,x){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=x,m.o=5,Uc(m),Gi(m)}function Uc(m){m.A||(m.A=!0,pe(m,"complete"),pe(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,pe(this,"complete"),pe(this,"abort"),Gi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),Tt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Fa(this):this.Xa())},r.Xa=function(){Fa(this)};function Fa(m){if(m.h&&typeof o<"u"){if(m.v&&Kr(m)==4)setTimeout(m.Ca.bind(m),0);else if(pe(m,"readystatechange"),Kr(m)==4){m.h=!1;try{const ue=m.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var C;if(!(C=x)){var z;if(z=ue===0){let be=String(m.D).match(Yh)[1]||null;!be&&c.self&&c.self.location&&(be=c.self.location.protocol.slice(0,-1)),z=!pi.test(be?be.toLowerCase():"")}C=z}if(C)pe(m,"complete"),pe(m,"success");else{m.o=6;try{var ae=Kr(m)>2?m.g.statusText:""}catch{ae=""}m.l=ae+" ["+m.ca()+"]",Uc(m)}}finally{Gi(m)}}}}function Gi(m,x){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const C=m.g;m.g=null,x||pe(m,"ready");try{C.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Kr(m){return m.g?m.g.readyState:0}r.ca=function(){try{return Kr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(m){if(this.g){var x=this.g.responseText;return m&&x.indexOf(m)==0&&(x=x.substring(m.length)),Hn(x)}};function Sn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Ki(m){const x={};m=(m.g&&Kr(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<m.length;z++){if(N(m[z]))continue;var C=$h(m[z]);const ae=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ue=x[ae]||[];x[ae]=ue,ue.push(C)}Z(x,function(z){return z.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function yi(m,x,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||x}function Ms(m){this.za=0,this.i=[],this.j=new Tn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=yi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=yi("baseRetryDelayMs",5e3,m),this.Za=yi("retryDelaySeedMs",1e4,m),this.Ta=yi("forwardChannelMaxRetries",2,m),this.va=yi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Rc(m&&m.concurrentRequestLimit),this.Ba=new Ds,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ms.prototype,r.ka=8,r.I=1,r.connect=function(m,x,C,z){pt(0),this.W=m,this.H=x||{},C&&z!==void 0&&(this.H.OSID=C,this.H.OAID=z),this.F=this.X,this.J=sd(this,null,this.W),_i(this)};function zc(m){if(il(m),m.I==3){var x=m.V++,C=tn(m.J);if(yt(C,"SID",m.M),yt(C,"RID",x),yt(C,"TYPE","terminate"),Ha(m,C),x=new Hr(m,m.j,x),x.M=2,x.A=Va(tn(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(x.A.toString(),"")}catch{}!C&&c.Image&&(new Image().src=x.A,C=!0),C||(x.g=ad(x.j,null),x.g.ea(x.A)),x.F=Date.now(),ci(x)}id(m)}function Ps(m){m.g&&(Fc(m),m.g.cancel(),m.g=null)}function il(m){Ps(m),m.v&&(c.clearTimeout(m.v),m.v=null),al(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function _i(m){if(!Cc(m.h)&&!m.m){m.m=!0;var x=m.Ea;Y||T(),U||(Y(),U=!0),R.add(x,m),m.D=0}}function sl(m,x){return di(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=x.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=En(f(m.Ea,m,x),rd(m,m.D)),m.D++,!0)}r.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const ae=new Hr(this,this.j,m);let ue=this.o;if(this.U&&(ue?(ue=q(ue),ie(ue,this.U)):ue=this.U),this.u!==null||this.R||(ae.J=ue,ue=null),this.S)e:{for(var x=0,C=0;C<this.i.length;C++){t:{var z=this.i[C];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(x+=z,x>4096){x=C;break e}if(x===4096||C===this.i.length-1){x=C+1;break e}}x=1e3}else x=1e3;x=Zh(this,ae,x),C=tn(this.J),yt(C,"RID",m),yt(C,"CVER",22),this.G&&yt(C,"X-HTTP-Session-Id",this.G),Ha(this,C),ue&&(this.R?x="headers="+$i(Sr(ue))+"&"+x:this.u&&za(C,this.u,ue)),Nc(this.h,ae),this.Ra&&yt(C,"TYPE","init"),this.S?(yt(C,"$req",x),yt(C,"SID","null"),ae.U=!0,li(ae,C,null)):li(ae,C,x),this.I=2}}else this.I==3&&(m?Bc(this,m):this.i.length==0||Cc(this.h)||Bc(this))};function Bc(m,x){var C;x?C=x.l:C=m.V++;const z=tn(m.J);yt(z,"SID",m.M),yt(z,"RID",C),yt(z,"AID",m.K),Ha(m,z),m.u&&m.o&&za(z,m.u,m.o),C=new Hr(m,m.j,C,m.D+1),m.u===null&&(C.J=m.o),x&&(m.i=x.G.concat(m.i)),x=Zh(m,C,1e3),C.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Nc(m.h,C),li(C,z,x)}function Ha(m,x){m.H&&W(m.H,function(C,z){yt(x,z,C)}),m.l&&W({},function(C,z){yt(x,z,C)})}function Zh(m,x,C){C=Math.min(m.i.length,C);const z=m.l?f(m.l.Ka,m.l,m):null;e:{var ae=m.i;let He=-1;for(;;){const Kt=["count="+C];He==-1?C>0?(He=ae[0].g,Kt.push("ofs="+He)):He=0:Kt.push("ofs="+He);let ht=!0;for(let Pt=0;Pt<C;Pt++){var ue=ae[Pt].g;const Ar=ae[Pt].map;if(ue-=He,ue<0)He=Math.max(0,ae[Pt].g-100),ht=!1;else try{ue="req"+ue+"_"||"";try{var be=Ar instanceof Map?Ar:Object.entries(Ar);for(const[bi,Yr]of be){let Qr=Yr;u(Yr)&&(Qr=ut(Yr)),Kt.push(ue+bi+"="+encodeURIComponent(Qr))}}catch(bi){throw Kt.push(ue+"type="+encodeURIComponent("_badmap")),bi}}catch{z&&z(Ar)}}if(ht){be=Kt.join("&");break e}}be=void 0}return m=m.i.splice(0,C),x.G=m,be}function ed(m){if(!m.g&&!m.v){m.Y=1;var x=m.Da;Y||T(),U||(Y(),U=!0),R.add(x,m),m.A=0}}function qa(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=En(f(m.Da,m),rd(m,m.A)),m.A++,!0)}r.Da=function(){if(this.v=null,td(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=En(f(this.Wa,this),m)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pt(10),Ps(this),td(this))};function Fc(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function td(m){m.g=new Hr(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var x=tn(m.na);yt(x,"RID","rpc"),yt(x,"SID",m.M),yt(x,"AID",m.K),yt(x,"CI",m.F?"0":"1"),!m.F&&m.ia&&yt(x,"TO",m.ia),yt(x,"TYPE","xmlhttp"),Ha(m,x),m.u&&m.o&&za(x,m.u,m.o),m.O&&(m.g.H=m.O);var C=m.g;m=m.ba,C.M=1,C.A=Va(tn(x)),C.u=null,C.R=!0,Xo(C,m)}r.Va=function(){this.C!=null&&(this.C=null,Ps(this),qa(this),pt(19))};function al(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function nd(m,x){var C=null;if(m.g==x){al(m),Fc(m),m.g=null;var z=2}else if(fi(m.h,x))C=x.G,kc(m.h,x),z=1;else return;if(m.I!=0){if(x.o)if(z==1){C=x.u?x.u.length:0,x=Date.now()-x.F;var ae=m.D;z=oi(),pe(z,new hn(z,C)),_i(m)}else ed(m);else if(ae=x.m,ae==3||ae==0&&x.X>0||!(z==1&&sl(m,x)||z==2&&qa(m)))switch(C&&C.length>0&&(x=m.h,x.i=x.i.concat(C)),ae){case 1:vi(m,5);break;case 4:vi(m,10);break;case 3:vi(m,6);break;default:vi(m,2)}}}function rd(m,x){let C=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(C*=2),C*x}function vi(m,x){if(m.j.info("Error code "+x),x==2){var C=f(m.bb,m),z=m.Ua;const ae=!z;z=new lr(z||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||_n(z,"https"),Va(z),ae?$r(z.toString(),C):Vc(z.toString(),C)}else pt(2);m.I=0,m.l&&m.l.pa(x),id(m),il(m)}r.bb=function(m){m?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function id(m){if(m.I=0,m.ja=[],m.l){const x=Dc(m.h);(x.length!=0||m.i.length!=0)&&(E(m.ja,x),E(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function sd(m,x,C){var z=C instanceof lr?tn(C):new lr(C);if(z.g!="")x&&(z.g=x+"."+z.g),Rs(z,z.u);else{var ae=c.location;z=ae.protocol,x=x?x+"."+ae.hostname:ae.hostname,ae=+ae.port;const ue=new lr(null);z&&_n(ue,z),x&&(ue.g=x),ae&&Rs(ue,ae),C&&(ue.h=C),z=ue}return C=m.G,x=m.wa,C&&x&&yt(z,C,x),yt(z,"VER",m.ka),Ha(m,z),z}function ad(m,x,C){if(x&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=m.Aa&&!m.ma?new Tt(new gi({ab:C})):new Tt(m.ma),x.Fa(m.L),x}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function od(){}r=od.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function js(){}js.prototype.g=function(m,x){return new qn(m,x)};function qn(m,x){$e.call(this),this.g=new Ms(x),this.l=m,this.h=x&&x.messageUrlParams||null,m=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(m?m["X-WebChannel-Content-Type"]=x.messageContentType:m={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(m?m["X-WebChannel-Client-Profile"]=x.sa:m={"X-WebChannel-Client-Profile":x.sa}),this.g.U=m,(m=x&&x.Qb)&&!N(m)&&(this.g.u=m),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!N(x)&&(this.g.G=x,m=this.h,m!==null&&x in m&&(m=this.h,x in m&&delete m[x])),this.j=new Yi(this)}y(qn,$e),qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){zc(this.g)},qn.prototype.o=function(m){var x=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.v&&(C={},C.__data__=ut(m),m=C);x.i.push(new en(x.Ya++,m)),x.I==3&&_i(x)},qn.prototype.N=function(){this.g.l=null,delete this.j,zc(this.g),delete this.g,qn.Z.N.call(this)};function ld(m){Et.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var x=m.__sm__;if(x){e:{for(const C in x){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,x=x!==null&&m in x?x[m]:void 0),this.data=x}else this.data=m}y(ld,Et);function cd(){Jt.call(this),this.status=1}y(cd,Jt);function Yi(m){this.g=m}y(Yi,od),Yi.prototype.ra=function(){pe(this.g,"a")},Yi.prototype.qa=function(m){pe(this.g,new ld(m))},Yi.prototype.pa=function(m){pe(this.g,new cd)},Yi.prototype.oa=function(){pe(this.g,"b")},js.prototype.createWebChannel=js.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,bA=function(){return new js},vA=function(){return oi()},_A=Dt,s0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Pa.NO_ERROR=0,Pa.TIMEOUT=8,Pa.HTTP_ERROR=6,Of=Pa,Ac.COMPLETE="complete",yA=Ac,xn.EventType=Gt,Gt.OPEN="a",Gt.CLOSE="b",Gt.ERROR="c",Gt.MESSAGE="d",$e.prototype.listen=$e.prototype.J,ju=xn,Tt.prototype.listenOnce=Tt.prototype.K,Tt.prototype.getLastError=Tt.prototype.Ha,Tt.prototype.getLastErrorCode=Tt.prototype.ya,Tt.prototype.getStatus=Tt.prototype.ca,Tt.prototype.getResponseJson=Tt.prototype.La,Tt.prototype.getResponseText=Tt.prototype.la,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Fa,pA=Tt}).apply(typeof yf<"u"?yf:typeof self<"u"?self:typeof window<"u"?window:{});const Vx="@firebase/firestore",Lx="4.9.2";let Nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");let wc="12.3.0";const Co=new H0("@firebase/firestore");function $l(){return Co.logLevel}function ye(r,...e){if(Co.logLevel<=Je.DEBUG){const t=e.map(e_);Co.debug(`Firestore (${wc}): ${r}`,...t)}}function Kn(r,...e){if(Co.logLevel<=Je.ERROR){const t=e.map(e_);Co.error(`Firestore (${wc}): ${r}`,...t)}}function No(r,...e){if(Co.logLevel<=Je.WARN){const t=e.map(e_);Co.warn(`Firestore (${wc}): ${r}`,...t)}}function e_(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Se(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,wA(r,n,t)}function wA(r,e,t){let n=`FIRESTORE (${wc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Kn(n),new Error(n)}function Re(r,e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,r||wA(e,s,n)}function Ue(r,e){return r}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Bi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Pi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class xA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class E5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Nn.UNAUTHENTICATED)))}shutdown(){}}class T5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class S5{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Re(this.o===void 0,42304);let n=this.i;const s=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let o=new Pi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Pi,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Pi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Re(typeof n.accessToken=="string",31837,{l:n}),new xA(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new Nn(e)}}class A5{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class I5{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new A5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ux{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Re(this.o===void 0,3512);const n=o=>{o.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ye("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>n(o)))};const s=o=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ux(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Re(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ux(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function C5(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}class t_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=C5(40);for(let o=0;o<s.length;++o)n.length<20&&s[o]<t&&(n+=e.charAt(s[o]%62))}return n}}function Le(r,e){return r<e?-1:r>e?1:0}function a0(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const s=r.charAt(n),o=e.charAt(n);if(s!==o)return Dy(s)===Dy(o)?Le(s,o):Dy(s)?1:-1}return Le(r.length,e.length)}const N5=55296,k5=57343;function Dy(r){const e=r.charCodeAt(0);return e>=N5&&e<=k5}function sc(r,e,t){return r.length===e.length&&r.every(((n,s)=>t(n,e[s])))}function EA(r){return r+"\0"}const zx="__name__";class Si{constructor(e,t,n){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&Se(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Si.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Si?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const o=Si.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Le(e.length,t.length)}static compareSegments(e,t){const n=Si.isNumericId(e),s=Si.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?Si.extractNumericId(e).compare(Si.extractNumericId(t)):a0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _a.fromString(e.substring(4,e.length-2))}}class ft extends Si{construct(e,t,n){return new ft(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ve(de.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((s=>s.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const D5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends Si{construct(e,t,n){return new Ut(e,t,n)}static isValidIdentifier(e){return D5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zx}static keyField(){return new Ut([zx])}static fromServerFormat(e){const t=[];let n="",s=0;const o=()=>{if(n.length===0)throw new ve(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new ve(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ve(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(n+=u,s++):(o(),s++)}if(o(),c)throw new ve(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(t)}static emptyPath(){return new Ut([])}}class we{constructor(e){this.path=e}static fromPath(e){return new we(ft.fromString(e))}static fromName(e){return new we(ft.fromString(e).popFirst(5))}static empty(){return new we(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new ft(e.slice()))}}function TA(r,e,t){if(!t)throw new ve(de.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function O5(r,e,t,n){if(e===!0&&n===!0)throw new ve(de.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Bx(r){if(!we.isDocumentKey(r))throw new ve(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Fx(r){if(we.isDocumentKey(r))throw new ve(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function SA(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Um(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Se(12329,{type:typeof r})}function Yn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ve(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Um(r);throw new ve(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function M5(r,e){if(e<=0)throw new ve(de.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}function ln(r,e){const t={typeString:r};return e&&(t.value=e),t}function Dh(r,e){if(!SA(r))throw new ve(de.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const s=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const c=r[n];if(s&&typeof c!==s){t=`JSON field '${n}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${n}' field to equal '${o.value}'`;break}}if(t)throw new ve(de.INVALID_ARGUMENT,t);return!0}const Hx=-62135596800,qx=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*qx);return new bt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Hx)throw new ve(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qx}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dh(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Hx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:ln("string",bt._jsonSchemaVersion),seconds:ln("number"),nanoseconds:ln("number")};class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new bt(0,0))}static max(){return new ke(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ih=-1;class am{constructor(e,t,n,s){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=s}}function o0(r){return r.fields.find((e=>e.kind===2))}function co(r){return r.fields.filter((e=>e.kind!==2))}am.UNKNOWN_ID=-1;class Mf{constructor(e,t){this.fieldPath=e,this.kind=t}}class sh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sh(0,vr.min())}}function P5(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=ke.fromTimestamp(n===1e9?new bt(t+1,0):new bt(t,n));return new vr(s,we.empty(),e)}function AA(r){return new vr(r.readTime,r.key,ih)}class vr{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new vr(ke.min(),we.empty(),ih)}static max(){return new vr(ke.max(),we.empty(),ih)}}function n_(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}const IA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function qo(r){if(r.code!==de.FAILED_PRECONDITION||r.message!==IA)throw r;ye("LocalStore","Unexpectedly lost primary lease")}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((n,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,n)=>{t(e)}))}static reject(e){return new re(((t,n)=>{n(e)}))}static waitFor(e){return new re(((t,n)=>{let s=0,o=0,c=!1;e.forEach((u=>{++s,u.next((()=>{++o,c&&o===s&&t()}),(d=>n(d)))})),c=!0,o===s&&t()}))}static or(e){let t=re.resolve(!1);for(const n of e)t=t.next((s=>s?re.resolve(s):n()));return t}static forEach(e,t){const n=[];return e.forEach(((s,o)=>{n.push(t.call(this,s,o))})),this.waitFor(n)}static mapArray(e,t){return new re(((n,s)=>{const o=e.length,c=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next((g=>{c[f]=g,++u,u===o&&n(c)}),(g=>s(g)))}}))}static doWhile(e,t){return new re(((n,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):n()};o()}))}}const pr="SimpleDb";class zm{static open(e,t,n,s){try{return new zm(t,e.transaction(s,n))}catch(o){throw new $u(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Pi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new $u(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const s=r_(n.target.error);this.S.reject(new $u(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ye(pr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new V5(t)}}class va{static delete(e){return ye(pr,"Removing database:",e),ho(vS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!RS())return!1;if(va.F())return!0;const e=mn(),t=va.M(e),n=0<t&&t<10,s=CA(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,va.M(mn())===12.2&&Kn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ye(pr,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const c=o.target.result;t(c)},s.onblocked=()=>{n(new $u(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;c.name==="VersionError"?n(new ve(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?n(new ve(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):n(new $u(e,c))},s.onupgradeneeded=o=>{ye(pr,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,s.transaction,o.oldVersion,this.version).next((()=>{ye(pr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,s){const o=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const u=zm.open(this.db,e,o?"readonly":"readwrite",n),d=s(u).next((f=>(u.C(),f))).catch((f=>(u.abort(f),re.reject(f)))).toPromise();return d.catch((()=>{})),await u.D,d}catch(u){const d=u,f=d.name!=="FirebaseError"&&c<3;if(ye(pr,"Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function CA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class j5{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ho(this.U.delete())}}class $u extends ve{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ka(r){return r.name==="IndexedDbTransactionError"}class V5{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(ye(pr,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(ye(pr,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ho(n)}add(e){return ye(pr,"ADD",this.store.name,e,e),ho(this.store.add(e))}get(e){return ho(this.store.get(e)).next((t=>(t===void 0&&(t=null),ye(pr,"GET",this.store.name,e,t),t)))}delete(e){return ye(pr,"DELETE",this.store.name,e),ho(this.store.delete(e))}count(){return ye(pr,"COUNT",this.store.name),ho(this.store.count())}J(e,t){const n=this.options(e,t),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(n.range);return new re(((c,u)=>{o.onerror=d=>{u(d.target.error)},o.onsuccess=d=>{c(d.target.result)}}))}{const o=this.cursor(n),c=[];return this.H(o,((u,d)=>{c.push(d)})).next((()=>c))}}Y(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new re(((s,o)=>{n.onerror=c=>{o(c.target.error)},n.onsuccess=c=>{s(c.target.result)}}))}Z(e,t){ye(pr,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const s=this.cursor(n);return this.H(s,((o,c,u)=>u.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);const s=this.cursor(n);return this.H(s,t)}te(e){const t=this.cursor({});return new re(((n,s)=>{t.onerror=o=>{const c=r_(o.target.error);s(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next((u=>{u?c.continue():n()})):n()}}))}H(e,t){const n=[];return new re(((s,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const u=c.target.result;if(!u)return void s();const d=new j5(u),f=t(u.primaryKey,u.value,d);if(f instanceof re){const g=f.catch((y=>(d.done(),re.reject(y))));n.push(g)}d.isDone?s():d.G===null?u.continue():u.continue(d.G)}})).next((()=>re.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ho(r){return new re(((e,t)=>{r.onsuccess=n=>{const s=n.target.result;e(s)},r.onerror=n=>{const s=r_(n.target.error);t(s)}}))}let $x=!1;function r_(r){const e=va.M(mn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $x||($x=!0,setTimeout((()=>{throw n}),0)),n}}return r}const Gu="IndexBackfiller";class L5{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ye(Gu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ye(Gu,`Documents written: ${t}`)}catch(t){ka(t)?ye(Gu,"Ignoring IndexedDB error during index backfill: ",t):await qo(t)}await this.re(6e4)}))}}class U5{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const n=new Set;let s=t,o=!0;return re.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!n.has(c))return ye(Gu,`Processing collection: ${c}`),this.oe(e,c,s).next((u=>{s-=u,n.add(c)}));o=!1})))).next((()=>t-s))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,n).next((o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(s,o))).next((u=>(ye(Gu,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>c.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((s,o)=>{const c=AA(o);n_(c,n)>0&&(n=c)})),new vr(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Lr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Lr.ce=-1;const vo=-1;function Bm(r){return r==null}function ah(r){return r===0&&1/r==-1/0}function z5(r){return typeof r=="number"&&Number.isInteger(r)&&!ah(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const om="";function zn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Gx(e)),e=B5(r.get(t),e);return Gx(e)}function B5(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const o=r.charAt(s);switch(o){case"\0":t+="";break;case om:t+="";break;default:t+=o}}return t}function Gx(r){return r+om+""}function Ni(r){const e=r.length;if(Re(e>=2,64408,{path:r}),e===2)return Re(r.charAt(0)===om&&r.charAt(1)==="",56145,{path:r}),ft.emptyPath();const t=e-2,n=[];let s="";for(let o=0;o<e;){const c=r.indexOf(om,o);switch((c<0||c>t)&&Se(50515,{path:r}),r.charAt(c+1)){case"":const u=r.substring(o,c);let d;s.length===0?d=u:(s+=u,d=s,s=""),n.push(d);break;case"":s+=r.substring(o,c),s+="\0";break;case"":s+=r.substring(o,c+1);break;default:Se(61167,{path:r})}o=c+2}return new ft(n)}const uo="remoteDocuments",Oh="owner",Ll="owner",oh="mutationQueues",F5="userId",ei="mutations",Kx="batchId",yo="userMutationsIndex",Yx=["userId","batchId"];function Pf(r,e){return[r,zn(e)]}function NA(r,e,t){return[r,zn(e),t]}const H5={},ac="documentMutations",lm="remoteDocumentsV14",q5=["prefixPath","collectionGroup","readTime","documentId"],jf="documentKeyIndex",$5=["prefixPath","collectionGroup","documentId"],kA="collectionGroupIndex",G5=["collectionGroup","readTime","prefixPath","documentId"],lh="remoteDocumentGlobal",l0="remoteDocumentGlobalKey",oc="targets",DA="queryTargetsIndex",K5=["canonicalId","targetId"],lc="targetDocuments",Y5=["targetId","path"],i_="documentTargetsIndex",Q5=["path","targetId"],cm="targetGlobalKey",bo="targetGlobal",ch="collectionParents",W5=["collectionId","parent"],cc="clientMetadata",X5="clientId",Fm="bundles",J5="bundleId",Hm="namedQueries",Z5="name",s_="indexConfiguration",eP="indexId",c0="collectionGroupIndex",tP="collectionGroup",Ku="indexState",nP=["indexId","uid"],OA="sequenceNumberIndex",rP=["uid","sequenceNumber"],Yu="indexEntries",iP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],MA="documentKeyIndex",sP=["indexId","uid","orderedDocumentKey"],qm="documentOverlays",aP=["userId","collectionPath","documentId"],u0="collectionPathOverlayIndex",oP=["userId","collectionPath","largestBatchId"],PA="collectionGroupOverlayIndex",lP=["userId","collectionGroup","largestBatchId"],a_="globals",cP="name",jA=[oh,ei,ac,uo,oc,Oh,bo,lc,cc,lh,ch,Fm,Hm],uP=[...jA,qm],VA=[oh,ei,ac,lm,oc,Oh,bo,lc,cc,lh,ch,Fm,Hm,qm],LA=VA,o_=[...LA,s_,Ku,Yu],hP=o_,UA=[...o_,a_],dP=UA;class h0 extends RA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function gn(r,e){const t=Ue(r);return va.O(t.le,e)}function Qx(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Da(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function zA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Lt{constructor(e,t){this.comparator=e,this.root=t||kn.EMPTY}insert(e,t){return new Lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _f(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _f(this.root,e,this.comparator,!1)}getReverseIterator(){return new _f(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _f(this.root,e,this.comparator,!0)}}class _f{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kn{constructor(e,t,n,s,o){this.key=e,this.value=t,this.color=n??kn.RED,this.left=s??kn.EMPTY,this.right=o??kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,o){return new kn(e??this.key,t??this.value,n??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const o=n(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,n),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return kn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return kn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1;kn.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,n,s,o){return this}insert(e,t,n){return new kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xt{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wx(this.data.getIterator())}getIteratorFrom(e){return new Wx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new xt(this.comparator);return t.data=e,t}}class Wx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ul(r){return r.hasNext()?r.getNext():void 0}class ar{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new ar([])}unionWith(e){let t=new xt(Ut.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ar(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sc(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}class BA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new BA("Invalid base64 string: "+o):o}})(e);return new cn(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o})(e);return new cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const fP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(r){if(Re(!!r,39018),typeof r=="string"){let e=0;const t=fP.exec(r);if(Re(!!t,46558,{timestamp:r}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Vt(r.seconds),nanos:Vt(r.nanos)}}function Vt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ws(r){return typeof r=="string"?cn.fromBase64String(r):cn.fromUint8Array(r)}const FA="server_timestamp",HA="__type__",qA="__previous_value__",$A="__local_write_time__";function l_(r){return(r?.mapValue?.fields||{})[HA]?.stringValue===FA}function $m(r){const e=r.mapValue.fields[qA];return l_(e)?$m(e):e}function uh(r){const e=bs(r.mapValue.fields[$A].timestampValue);return new bt(e.seconds,e.nanos)}class mP{constructor(e,t,n,s,o,c,u,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const um="(default)";class ko{constructor(e,t){this.projectId=e,this.database=t||um}static empty(){return new ko("","")}get isDefaultDatabase(){return this.database===um}isEqual(e){return e instanceof ko&&e.projectId===this.projectId&&e.database===this.database}}const c_="__type__",GA="__max__",ga={mapValue:{fields:{__type__:{stringValue:GA}}}},u_="__vector__",uc="value",Vf={nullValue:"NULL_VALUE"};function Ta(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?l_(r)?4:KA(r)?9007199254740991:Gm(r)?10:11:Se(28295,{value:r})}function Li(r,e){if(r===e)return!0;const t=Ta(r);if(t!==Ta(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return uh(r).isEqual(uh(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=bs(s.timestampValue),u=bs(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(s,o){return ws(s.bytesValue).isEqual(ws(o.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(s,o){return Vt(s.geoPointValue.latitude)===Vt(o.geoPointValue.latitude)&&Vt(s.geoPointValue.longitude)===Vt(o.geoPointValue.longitude)})(r,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Vt(s.integerValue)===Vt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=Vt(s.doubleValue),u=Vt(o.doubleValue);return c===u?ah(c)===ah(u):isNaN(c)&&isNaN(u)}return!1})(r,e);case 9:return sc(r.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return(function(s,o){const c=s.mapValue.fields||{},u=o.mapValue.fields||{};if(Qx(c)!==Qx(u))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(u[d]===void 0||!Li(c[d],u[d])))return!1;return!0})(r,e);default:return Se(52216,{left:r})}}function hh(r,e){return(r.values||[]).find((t=>Li(t,e)))!==void 0}function Sa(r,e){if(r===e)return 0;const t=Ta(r),n=Ta(e);if(t!==n)return Le(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return(function(o,c){const u=Vt(o.integerValue||o.doubleValue),d=Vt(c.integerValue||c.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(r,e);case 3:return Xx(r.timestampValue,e.timestampValue);case 4:return Xx(uh(r),uh(e));case 5:return a0(r.stringValue,e.stringValue);case 6:return(function(o,c){const u=ws(o),d=ws(c);return u.compareTo(d)})(r.bytesValue,e.bytesValue);case 7:return(function(o,c){const u=o.split("/"),d=c.split("/");for(let f=0;f<u.length&&f<d.length;f++){const g=Le(u[f],d[f]);if(g!==0)return g}return Le(u.length,d.length)})(r.referenceValue,e.referenceValue);case 8:return(function(o,c){const u=Le(Vt(o.latitude),Vt(c.latitude));return u!==0?u:Le(Vt(o.longitude),Vt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Jx(r.arrayValue,e.arrayValue);case 10:return(function(o,c){const u=o.fields||{},d=c.fields||{},f=u[uc]?.arrayValue,g=d[uc]?.arrayValue,y=Le(f?.values?.length||0,g?.values?.length||0);return y!==0?y:Jx(f,g)})(r.mapValue,e.mapValue);case 11:return(function(o,c){if(o===ga.mapValue&&c===ga.mapValue)return 0;if(o===ga.mapValue)return 1;if(c===ga.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=c.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const v=a0(d[y],g[y]);if(v!==0)return v;const w=Sa(u[d[y]],f[g[y]]);if(w!==0)return w}return Le(d.length,g.length)})(r.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function Xx(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=bs(r),n=bs(e),s=Le(t.seconds,n.seconds);return s!==0?s:Le(t.nanos,n.nanos)}function Jx(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const o=Sa(t[s],n[s]);if(o)return o}return Le(t.length,n.length)}function hc(r){return d0(r)}function d0(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=bs(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ws(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return we.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",s=!0;for(const o of t.values||[])s?s=!1:n+=",",n+=d0(o);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const c of n)o?o=!1:s+=",",s+=`${c}:${d0(t.fields[c])}`;return s+"}"})(r.mapValue):Se(61005,{value:r})}function Lf(r){switch(Ta(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$m(r);return e?16+Lf(e):16;case 5:return 2*r.stringValue.length;case 6:return ws(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((s,o)=>s+Lf(o)),0)})(r.arrayValue);case 10:case 11:return(function(n){let s=0;return Da(n.fields,((o,c)=>{s+=o.length+Lf(c)})),s})(r.mapValue);default:throw Se(13486,{value:r})}}function dh(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function f0(r){return!!r&&"integerValue"in r}function fh(r){return!!r&&"arrayValue"in r}function Zx(r){return!!r&&"nullValue"in r}function eE(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Uf(r){return!!r&&"mapValue"in r}function Gm(r){return(r?.mapValue?.fields||{})[c_]?.stringValue===u_}function Qu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Da(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Qu(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qu(r.arrayValue.values[t]);return e}return{...r}}function KA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===GA}const YA={mapValue:{fields:{[c_]:{stringValue:u_},[uc]:{arrayValue:{}}}}};function gP(r){return"nullValue"in r?Vf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?dh(ko.empty(),we.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Gm(r)?YA:{mapValue:{}}:Se(35942,{value:r})}function pP(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?dh(ko.empty(),we.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?YA:"mapValue"in r?Gm(r)?{mapValue:{}}:ga:Se(61959,{value:r})}function tE(r,e){const t=Sa(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function nE(r,e){const t=Sa(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Uf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qu(t)}setAll(e){let t=Ut.emptyPath(),n={},s=[];e.forEach(((c,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,n,s),n={},s=[],t=u.popLast()}c?n[u.lastSegment()]=Qu(c):s.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,n,s)}delete(e){const t=this.field(e.popLast());Uf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Uf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){Da(t,((s,o)=>e[s]=o));for(const s of n)delete e[s]}clone(){return new Vn(Qu(this.value))}}function QA(r){const e=[];return Da(r.fields,((t,n)=>{const s=new Ut([t]);if(Uf(n)){const o=QA(n.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)})),new ar(e)}class qt{constructor(e,t,n,s,o,c,u){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(e){return new qt(e,0,ke.min(),ke.min(),ke.min(),Vn.empty(),0)}static newFoundDocument(e,t,n,s){return new qt(e,1,t,ke.min(),n,s,0)}static newNoDocument(e,t){return new qt(e,2,t,ke.min(),ke.min(),Vn.empty(),0)}static newUnknownDocument(e,t){return new qt(e,3,t,ke.min(),ke.min(),Vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class dc{constructor(e,t){this.position=e,this.inclusive=t}}function rE(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const o=e[s],c=r.position[s];if(o.field.isKeyField()?n=we.comparator(we.fromName(c.referenceValue),t.key):n=Sa(c,t.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function iE(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Li(r.position[t],e.position[t]))return!1;return!0}class mh{constructor(e,t="asc"){this.field=e,this.dir=t}}function yP(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class WA{}class Ze extends WA{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new _P(e,t,n):t==="array-contains"?new wP(e,n):t==="in"?new n2(e,n):t==="not-in"?new xP(e,n):t==="array-contains-any"?new EP(e,n):new Ze(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new vP(e,n):new bP(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Sa(t,this.value)):t!==null&&Ta(this.value)===Ta(t)&&this.matchesComparison(Sa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wt extends WA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new wt(e,t)}matches(e){return fc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fc(r){return r.op==="and"}function m0(r){return r.op==="or"}function h_(r){return XA(r)&&fc(r)}function XA(r){for(const e of r.filters)if(e instanceof wt)return!1;return!0}function g0(r){if(r instanceof Ze)return r.field.canonicalString()+r.op.toString()+hc(r.value);if(h_(r))return r.filters.map((e=>g0(e))).join(",");{const e=r.filters.map((t=>g0(t))).join(",");return`${r.op}(${e})`}}function JA(r,e){return r instanceof Ze?(function(n,s){return s instanceof Ze&&n.op===s.op&&n.field.isEqual(s.field)&&Li(n.value,s.value)})(r,e):r instanceof wt?(function(n,s){return s instanceof wt&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((o,c,u)=>o&&JA(c,s.filters[u])),!0):!1})(r,e):void Se(19439)}function ZA(r,e){const t=r.filters.concat(e);return wt.create(t,r.op)}function e2(r){return r instanceof Ze?(function(t){return`${t.field.canonicalString()} ${t.op} ${hc(t.value)}`})(r):r instanceof wt?(function(t){return t.op.toString()+" {"+t.getFilters().map(e2).join(" ,")+"}"})(r):"Filter"}class _P extends Ze{constructor(e,t,n){super(e,t,n),this.key=we.fromName(n.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class vP extends Ze{constructor(e,t){super(e,"in",t),this.keys=t2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class bP extends Ze{constructor(e,t){super(e,"not-in",t),this.keys=t2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function t2(r,e){return(e.arrayValue?.values||[]).map((t=>we.fromName(t.referenceValue)))}class wP extends Ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fh(t)&&hh(t.arrayValue,this.value)}}class n2 extends Ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hh(this.value.arrayValue,t)}}class xP extends Ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(hh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hh(this.value.arrayValue,t)}}class EP extends Ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>hh(this.value.arrayValue,n)))}}class TP{constructor(e,t=null,n=[],s=[],o=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=o,this.startAt=c,this.endAt=u,this.Te=null}}function p0(r,e=null,t=[],n=[],s=null,o=null,c=null){return new TP(r,e,t,n,s,o,c)}function Do(r){const e=Ue(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>g0(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(o){return o.field.canonicalString()+o.dir})(n))).join(","),Bm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>hc(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>hc(n))).join(",")),e.Te=t}return e.Te}function Mh(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!yP(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!JA(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!iE(r.startAt,e.startAt)&&iE(r.endAt,e.endAt)}function hm(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function dm(r,e){return r.filters.filter((t=>t instanceof Ze&&t.field.isEqual(e)))}function sE(r,e,t){let n=Vf,s=!0;for(const o of dm(r,e)){let c=Vf,u=!0;switch(o.op){case"<":case"<=":c=gP(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,u=!1;break;case"!=":case"not-in":c=Vf}tE({value:n,inclusive:s},{value:c,inclusive:u})<0&&(n=c,s=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const c=t.position[o];tE({value:n,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(n=c,s=t.inclusive);break}}return{value:n,inclusive:s}}function aE(r,e,t){let n=ga,s=!0;for(const o of dm(r,e)){let c=ga,u=!0;switch(o.op){case">=":case">":c=pP(o.value),u=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,u=!1;break;case"!=":case"not-in":c=ga}nE({value:n,inclusive:s},{value:c,inclusive:u})>0&&(n=c,s=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const c=t.position[o];nE({value:n,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(n=c,s=t.inclusive);break}}return{value:n,inclusive:s}}class xc{constructor(e,t=null,n=[],s=[],o=null,c="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function SP(r,e,t,n,s,o,c,u){return new xc(r,e,t,n,s,o,c,u)}function Ph(r){return new xc(r)}function oE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function r2(r){return r.collectionGroup!==null}function Wu(r){const e=Ue(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new xt(Ut.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new mh(o,n))})),t.has(Ut.keyField().canonicalString())||e.Ie.push(new mh(Ut.keyField(),n))}return e.Ie}function Ur(r){const e=Ue(r);return e.Ee||(e.Ee=AP(e,Wu(r))),e.Ee}function AP(r,e){if(r.limitType==="F")return p0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new mh(s.field,o)}));const t=r.endAt?new dc(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new dc(r.startAt.position,r.startAt.inclusive):null;return p0(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function y0(r,e){const t=r.filters.concat([e]);return new xc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function fm(r,e,t){return new xc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Km(r,e){return Mh(Ur(r),Ur(e))&&r.limitType===e.limitType}function i2(r){return`${Do(Ur(r))}|lt:${r.limitType}`}function Gl(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((s=>e2(s))).join(", ")}]`),Bm(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>hc(s))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>hc(s))).join(",")),`Target(${n})`})(Ur(r))}; limitType=${r.limitType})`}function jh(r,e){return e.isFoundDocument()&&(function(n,s){const o=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):we.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)})(r,e)&&(function(n,s){for(const o of Wu(n))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(r,e)&&(function(n,s){for(const o of n.filters)if(!o.matches(s))return!1;return!0})(r,e)&&(function(n,s){return!(n.startAt&&!(function(c,u,d){const f=rE(c,u,d);return c.inclusive?f<=0:f<0})(n.startAt,Wu(n),s)||n.endAt&&!(function(c,u,d){const f=rE(c,u,d);return c.inclusive?f>=0:f>0})(n.endAt,Wu(n),s))})(r,e)}function IP(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function s2(r){return(e,t)=>{let n=!1;for(const s of Wu(r)){const o=RP(s,e,t);if(o!==0)return o;n=n||s.field.isKeyField()}return 0}}function RP(r,e,t){const n=r.field.isKeyField()?we.comparator(e.key,t.key):(function(o,c,u){const d=c.data.field(o),f=u.data.field(o);return d!==null&&f!==null?Sa(d,f):Se(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Se(19790,{direction:r.dir})}}class Ss{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,o]of n)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Da(this.inner,((t,n)=>{for(const[s,o]of n)e(s,o)}))}isEmpty(){return zA(this.inner)}size(){return this.innerSize}}const CP=new Lt(we.comparator);function _r(){return CP}const a2=new Lt(we.comparator);function Vu(...r){let e=a2;for(const t of r)e=e.insert(t.key,t);return e}function o2(r){let e=a2;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function ki(){return Xu()}function l2(){return Xu()}function Xu(){return new Ss((r=>r.toString()),((r,e)=>r.isEqual(e)))}const NP=new Lt(we.comparator),kP=new xt(we.comparator);function Ke(...r){let e=kP;for(const t of r)e=e.add(t);return e}const DP=new xt(Le);function OP(){return DP}function d_(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ah(e)?"-0":e}}function c2(r){return{integerValue:""+r}}function MP(r,e){return z5(e)?c2(e):d_(r,e)}class Ym{constructor(){this._=void 0}}function PP(r,e,t){return r instanceof mc?(function(s,o){const c={fields:{[HA]:{stringValue:FA},[$A]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&l_(o)&&(o=$m(o)),o&&(c.fields[qA]=o),{mapValue:c}})(t,e):r instanceof Oo?h2(r,e):r instanceof Mo?d2(r,e):(function(s,o){const c=u2(s,o),u=lE(c)+lE(s.Ae);return f0(c)&&f0(s.Ae)?c2(u):d_(s.serializer,u)})(r,e)}function jP(r,e,t){return r instanceof Oo?h2(r,e):r instanceof Mo?d2(r,e):t}function u2(r,e){return r instanceof gh?(function(n){return f0(n)||(function(o){return!!o&&"doubleValue"in o})(n)})(e)?e:{integerValue:0}:null}class mc extends Ym{}class Oo extends Ym{constructor(e){super(),this.elements=e}}function h2(r,e){const t=f2(e);for(const n of r.elements)t.some((s=>Li(s,n)))||t.push(n);return{arrayValue:{values:t}}}class Mo extends Ym{constructor(e){super(),this.elements=e}}function d2(r,e){let t=f2(e);for(const n of r.elements)t=t.filter((s=>!Li(s,n)));return{arrayValue:{values:t}}}class gh extends Ym{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function lE(r){return Vt(r.integerValue||r.doubleValue)}function f2(r){return fh(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Qm{constructor(e,t){this.field=e,this.transform=t}}function VP(r,e){return r.field.isEqual(e.field)&&(function(n,s){return n instanceof Oo&&s instanceof Oo||n instanceof Mo&&s instanceof Mo?sc(n.elements,s.elements,Li):n instanceof gh&&s instanceof gh?Li(n.Ae,s.Ae):n instanceof mc&&s instanceof mc})(r.transform,e.transform)}class LP{constructor(e,t){this.version=e,this.transformResults=t}}class Un{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Wm{}function m2(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Xm(r.key,Un.none()):new Ec(r.key,r.data,Un.none());{const t=r.data,n=Vn.empty();let s=new xt(Ut.comparator);for(let o of e.fields)if(!s.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?n.delete(o):n.set(o,c),s=s.add(o)}return new As(r.key,n,new ar(s.toArray()),Un.none())}}function UP(r,e,t){r instanceof Ec?(function(s,o,c){const u=s.value.clone(),d=uE(s.fieldTransforms,o,c.transformResults);u.setAll(d),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(r,e,t):r instanceof As?(function(s,o,c){if(!zf(s.precondition,o))return void o.convertToUnknownDocument(c.version);const u=uE(s.fieldTransforms,o,c.transformResults),d=o.data;d.setAll(g2(s)),d.setAll(u),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(r,e,t):(function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Ju(r,e,t,n){return r instanceof Ec?(function(o,c,u,d){if(!zf(o.precondition,c))return u;const f=o.value.clone(),g=hE(o.fieldTransforms,d,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(r,e,t,n):r instanceof As?(function(o,c,u,d){if(!zf(o.precondition,c))return u;const f=hE(o.fieldTransforms,d,c),g=c.data;return g.setAll(g2(o)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(r,e,t,n):(function(o,c,u){return zf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(r,e,t)}function zP(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),o=u2(n.transform,s||null);o!=null&&(t===null&&(t=Vn.empty()),t.set(n.field,o))}return t||null}function cE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&sc(n,s,((o,c)=>VP(o,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ec extends Wm{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class As extends Wm{constructor(e,t,n,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function g2(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function uE(r,e,t){const n=new Map;Re(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let s=0;s<t.length;s++){const o=r[s],c=o.transform,u=e.data.field(o.field);n.set(o.field,jP(c,u,t[s]))}return n}function hE(r,e,t){const n=new Map;for(const s of r){const o=s.transform,c=t.data.field(s.field);n.set(s.field,PP(o,c,e))}return n}class Xm extends Wm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class p2 extends Wm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class f_{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&UP(o,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ju(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ju(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=l2();return this.mutations.forEach((s=>{const o=e.get(s.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=t.has(s.key)?null:u;const d=m2(c,u);d!==null&&n.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(ke.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&sc(this.mutations,e.mutations,((t,n)=>cE(t,n)))&&sc(this.baseMutations,e.baseMutations,((t,n)=>cE(t,n)))}}class m_{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){Re(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=(function(){return NP})();const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,n[c].version);return new m_(e,t,n,s)}}class g_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class BP{constructor(e,t){this.count=e,this.unchangedNames=t}}var on,rt;function FP(r){switch(r){case de.OK:return Se(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Se(15467,{code:r})}}function y2(r){if(r===void 0)return Kn("GRPC error has no .code"),de.UNKNOWN;switch(r){case on.OK:return de.OK;case on.CANCELLED:return de.CANCELLED;case on.UNKNOWN:return de.UNKNOWN;case on.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case on.INTERNAL:return de.INTERNAL;case on.UNAVAILABLE:return de.UNAVAILABLE;case on.UNAUTHENTICATED:return de.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case on.NOT_FOUND:return de.NOT_FOUND;case on.ALREADY_EXISTS:return de.ALREADY_EXISTS;case on.PERMISSION_DENIED:return de.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case on.ABORTED:return de.ABORTED;case on.OUT_OF_RANGE:return de.OUT_OF_RANGE;case on.UNIMPLEMENTED:return de.UNIMPLEMENTED;case on.DATA_LOSS:return de.DATA_LOSS;default:return Se(39323,{code:r})}}(rt=on||(on={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";function HP(){return new TextEncoder}const qP=new _a([4294967295,4294967295],0);function dE(r){const e=HP().encode(r),t=new gA;return t.update(e),new Uint8Array(t.digest())}function fE(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new _a([t,n],0),new _a([s,o],0)]}class p_{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Lu(`Invalid padding: ${t}`);if(n<0)throw new Lu(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Lu(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Lu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=_a.fromNumber(this.ge)}ye(e,t,n){let s=e.add(t.multiply(_a.fromNumber(n)));return s.compare(qP)===1&&(s=new _a([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=dE(e),[n,s]=fE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,s,o);if(!this.we(c))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new p_(o,s,t);return n.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const t=dE(e),[n,s]=fE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,s,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Jm{constructor(e,t,n,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,Vh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Jm(ke.min(),s,new Lt(Le),_r(),Ke())}}class Vh{constructor(e,t,n,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Vh(n,t,Ke(),Ke(),Ke())}}class Bf{constructor(e,t,n,s){this.be=e,this.removedTargetIds=t,this.key=n,this.De=s}}class _2{constructor(e,t){this.targetId=e,this.Ce=t}}class v2{constructor(e,t,n=cn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class mE{constructor(){this.ve=0,this.Fe=gE(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ke(),t=Ke(),n=Ke();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:Se(38017,{changeType:o})}})),new Vh(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=gE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $P{constructor(e){this.Ge=e,this.ze=new Map,this.je=_r(),this.Je=vf(),this.He=vf(),this.Ye=new Lt(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,n=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(hm(o))if(n===0){const c=new we(o.path);this.et(t,c,qt.newNoDocument(c,ke.min()))}else Re(n===1,20013,{expectedCount:n});else{const c=this._t(t);if(c!==n){const u=this.ut(e),d=u?this.ct(u,e,c):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:o=0}=t;let c,u;try{c=ws(n).toUint8Array()}catch(d){if(d instanceof BA)return No("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new p_(c,s,o)}catch(d){return No(d instanceof Lu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let s=0;return n.forEach((o=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const u=this.ot(c);if(u){if(o.current&&hm(u.target)){const d=new we(u.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,qt.newNoDocument(d,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let n=Ke();this.He.forEach(((o,c)=>{let u=!0;c.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const s=new Jm(e,t,this.Ye,this.je,n);return this.je=_r(),this.Je=vf(),this.He=vf(),this.Ye=new Lt(Le),s}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new mE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new xt(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new xt(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function vf(){return new Lt(we.comparator)}function gE(){return new Lt(we.comparator)}const GP={asc:"ASCENDING",desc:"DESCENDING"},KP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YP={and:"AND",or:"OR"};class QP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _0(r,e){return r.useProto3Json||Bm(e)?e:{value:e}}function gc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function b2(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function WP(r,e){return gc(r,e.toTimestamp())}function Qn(r){return Re(!!r,49232),ke.fromTimestamp((function(t){const n=bs(t);return new bt(n.seconds,n.nanos)})(r))}function y_(r,e){return v0(r,e).canonicalString()}function v0(r,e){const t=(function(s){return new ft(["projects",s.projectId,"databases",s.database])})(r).child("documents");return e===void 0?t:t.child(e)}function w2(r){const e=ft.fromString(r);return Re(N2(e),10190,{key:e.toString()}),e}function mm(r,e){return y_(r.databaseId,e.path)}function wo(r,e){const t=w2(e);if(t.get(1)!==r.databaseId.projectId)throw new ve(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ve(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new we(T2(t))}function x2(r,e){return y_(r.databaseId,e)}function E2(r){const e=w2(r);return e.length===4?ft.emptyPath():T2(e)}function b0(r){return new ft(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function T2(r){return Re(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function pE(r,e,t){return{name:mm(r,e),fields:t.value.mapValue.fields}}function XP(r,e,t){const n=wo(r,e.name),s=Qn(e.updateTime),o=e.createTime?Qn(e.createTime):ke.min(),c=new Vn({mapValue:{fields:e.fields}}),u=qt.newFoundDocument(n,s,o,c);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function JP(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Se(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Re(g===void 0||typeof g=="string",58123),cn.fromBase64String(g||"")):(Re(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),cn.fromUint8Array(g||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(f){const g=f.code===void 0?de.UNKNOWN:y2(f.code);return new ve(g,f.message||"")})(c);t=new v2(n,s,o,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=wo(r,n.document.name),o=Qn(n.document.updateTime),c=n.document.createTime?Qn(n.document.createTime):ke.min(),u=new Vn({mapValue:{fields:n.document.fields}}),d=qt.newFoundDocument(s,o,c,u),f=n.targetIds||[],g=n.removedTargetIds||[];t=new Bf(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=wo(r,n.document),o=n.readTime?Qn(n.readTime):ke.min(),c=qt.newNoDocument(s,o),u=n.removedTargetIds||[];t=new Bf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=wo(r,n.document),o=n.removedTargetIds||[];t=new Bf([],o,s,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:o}=n,c=new BP(s,o),u=n.targetId;t=new _2(u,c)}}return t}function gm(r,e){let t;if(e instanceof Ec)t={update:pE(r,e.key,e.value)};else if(e instanceof Xm)t={delete:mm(r,e.key)};else if(e instanceof As)t={update:pE(r,e.key,e.data),updateMask:i3(e.fieldMask)};else{if(!(e instanceof p2))return Se(16599,{Vt:e.type});t={verify:mm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(o,c){const u=c.transform;if(u instanceof mc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Oo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Mo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof gh)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw Se(20930,{transform:c.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:WP(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Se(27497)})(r,e.precondition)),t}function w0(r,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?Un.updateTime(Qn(o.updateTime)):o.exists!==void 0?Un.exists(o.exists):Un.none()})(e.currentDocument):Un.none(),n=e.updateTransforms?e.updateTransforms.map((s=>(function(c,u){let d=null;if("setToServerValue"in u)Re(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new mc;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];d=new Oo(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];d=new Mo(g)}else"increment"in u?d=new gh(c,u.increment):Se(16584,{proto:u});const f=Ut.fromServerFormat(u.fieldPath);return new Qm(f,d)})(r,s))):[];if(e.update){e.update.name;const s=wo(r,e.update.name),o=new Vn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(d){const f=d.fieldPaths||[];return new ar(f.map((g=>Ut.fromServerFormat(g))))})(e.updateMask);return new As(s,o,c,t,n)}return new Ec(s,o,t,n)}if(e.delete){const s=wo(r,e.delete);return new Xm(s,t)}if(e.verify){const s=wo(r,e.verify);return new p2(s,t)}return Se(1463,{proto:e})}function ZP(r,e){return r&&r.length>0?(Re(e!==void 0,14353),r.map((t=>(function(s,o){let c=s.updateTime?Qn(s.updateTime):Qn(o);return c.isEqual(ke.min())&&(c=Qn(o)),new LP(c,s.transformResults||[])})(t,e)))):[]}function S2(r,e){return{documents:[x2(r,e.path)]}}function A2(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=x2(r,s);const o=(function(f){if(f.length!==0)return C2(wt.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(f){if(f.length!==0)return f.map((g=>(function(v){return{field:Kl(v.field),direction:t3(v.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=_0(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function I2(r){let e=E2(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){Re(n===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(y){const v=R2(y);return v instanceof wt&&h_(v)?v.getFilters():[v]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((v=>(function(E){return new mh(Yl(E.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let v;return v=typeof y=="object"?y.value:y,Bm(v)?null:v})(t.limit));let d=null;t.startAt&&(d=(function(y){const v=!!y.before,w=y.values||[];return new dc(w,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){const v=!y.before,w=y.values||[];return new dc(w,v)})(t.endAt)),SP(e,s,c,o,u,"F",d,f)}function e3(r,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function R2(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Yl(t.unaryFilter.field);return Ze.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Yl(t.unaryFilter.field);return Ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Yl(t.unaryFilter.field);return Ze.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Yl(t.unaryFilter.field);return Ze.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ze.create(Yl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return wt.create(t.compositeFilter.filters.map((n=>R2(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(r):Se(30097,{filter:r})}function t3(r){return GP[r]}function n3(r){return KP[r]}function r3(r){return YP[r]}function Kl(r){return{fieldPath:r.canonicalString()}}function Yl(r){return Ut.fromServerFormat(r.fieldPath)}function C2(r){return r instanceof Ze?(function(t){if(t.op==="=="){if(eE(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NAN"}};if(Zx(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(eE(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NOT_NAN"}};if(Zx(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kl(t.field),op:n3(t.op),value:t.value}}})(r):r instanceof wt?(function(t){const n=t.getFilters().map((s=>C2(s)));return n.length===1?n[0]:{compositeFilter:{op:r3(t.op),filters:n}}})(r):Se(54877,{filter:r})}function i3(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function N2(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class fs{constructor(e,t,n,s,o=ke.min(),c=ke.min(),u=cn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class k2{constructor(e){this.yt=e}}function s3(r,e){let t;if(e.document)t=XP(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=we.fromSegments(e.noDocument.path),s=jo(e.noDocument.readTime);t=qt.newNoDocument(n,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Se(56709);{const n=we.fromSegments(e.unknownDocument.path),s=jo(e.unknownDocument.version);t=qt.newUnknownDocument(n,s)}}return e.readTime&&t.setReadTime((function(s){const o=new bt(s[0],s[1]);return ke.fromTimestamp(o)})(e.readTime)),t}function yE(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:pm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(o,c){return{name:mm(o,c.key),fields:c.data.value.mapValue.fields,updateTime:gc(o,c.version.toTimestamp()),createTime:gc(o,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:Po(e.version)};else{if(!e.isUnknownDocument())return Se(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:Po(e.version)}}return n}function pm(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Po(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jo(r){const e=new bt(r.seconds,r.nanoseconds);return ke.fromTimestamp(e)}function fo(r,e){const t=(e.baseMutations||[]).map((o=>w0(r.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];c.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const n=e.mutations.map((o=>w0(r.yt,o))),s=bt.fromMillis(e.localWriteTimeMs);return new f_(e.batchId,s,t,n)}function Uu(r){const e=jo(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?jo(r.lastLimboFreeSnapshotVersion):ke.min();let n;return n=(function(o){return o.documents!==void 0})(r.query)?(function(o){const c=o.documents.length;return Re(c===1,1966,{count:c}),Ur(Ph(E2(o.documents[0])))})(r.query):(function(o){return Ur(I2(o))})(r.query),new fs(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,cn.fromBase64String(r.resumeToken))}function D2(r,e){const t=Po(e.snapshotVersion),n=Po(e.lastLimboFreeSnapshotVersion);let s;s=hm(e.target)?S2(r.yt,e.target):A2(r.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Do(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function O2(r){const e=I2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?fm(e,e.limit,"L"):e}function Oy(r,e){return new g_(e.largestBatchId,w0(r.yt,e.overlayMutation))}function _E(r,e){const t=e.path.lastSegment();return[r,zn(e.path.popLast()),t]}function vE(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:Po(n.readTime),documentKey:zn(n.documentKey.path),largestBatchId:n.largestBatchId}}class a3{getBundleMetadata(e,t){return bE(e).get(t).next((n=>{if(n)return(function(o){return{id:o.bundleId,createTime:jo(o.createTime),version:o.version}})(n)}))}saveBundleMetadata(e,t){return bE(e).put((function(s){return{bundleId:s.id,createTime:Po(Qn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return wE(e).get(t).next((n=>{if(n)return(function(o){return{name:o.name,query:O2(o.bundledQuery),readTime:jo(o.readTime)}})(n)}))}saveNamedQuery(e,t){return wE(e).put((function(s){return{name:s.name,readTime:Po(Qn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function bE(r){return gn(r,Fm)}function wE(r){return gn(r,Hm)}class Zm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new Zm(e,n)}getOverlay(e,t){return Cu(e).get(_E(this.userId,t)).next((n=>n?Oy(this.serializer,n):null))}getOverlays(e,t){const n=ki();return re.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&n.set(s,o)})))).next((()=>n))}saveOverlays(e,t,n){const s=[];return n.forEach(((o,c)=>{const u=new g_(t,c);s.push(this.St(e,u))})),re.waitFor(s)}removeOverlaysForBatchId(e,t,n){const s=new Set;t.forEach((c=>s.add(zn(c.getCollectionPath()))));const o=[];return s.forEach((c=>{const u=IDBKeyRange.bound([this.userId,c,n],[this.userId,c,n+1],!1,!0);o.push(Cu(e).Z(u0,u))})),re.waitFor(o)}getOverlaysForCollection(e,t,n){const s=ki(),o=zn(t),c=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Cu(e).J(u0,c).next((u=>{for(const d of u){const f=Oy(this.serializer,d);s.set(f.getKey(),f)}return s}))}getOverlaysForCollectionGroup(e,t,n,s){const o=ki();let c;const u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cu(e).ee({index:PA,range:u},((d,f,g)=>{const y=Oy(this.serializer,f);o.size()<s||y.largestBatchId===c?(o.set(y.getKey(),y),c=y.largestBatchId):g.done()})).next((()=>o))}St(e,t){return Cu(e).put((function(s,o,c){const[u,d,f]=_E(o,c.mutation.key);return{userId:o,collectionPath:d,documentId:f,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:gm(s.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Cu(r){return gn(r,qm)}class o3{bt(e){return gn(e,a_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const n=t?.value;return n?cn.fromUint8Array(n):cn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class mo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Vt(e.integerValue));else if("doubleValue"in e){const n=Vt(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),ah(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=bs(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ws(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?KA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Gm(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Se(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const s of Object.keys(n))this.Ot(s,t),this.Ct(n[s],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const s=uc,o=n[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Vt(o)),this.Ot(s,t),this.Ct(n[s],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const s of n)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),we.fromName(e).path.forEach((n=>{this.Ft(t,60),this.Ut(n,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}mo.Kt=new mo;const zl=255;function l3(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function xE(r){const e=64-(function(n){let s=0;for(let o=0;o<8;++o){const c=l3(255&n[o]);if(s+=c,c!==8)break}return s})(r);return Math.ceil(e/8)}class c3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),n=xE(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),n=xE(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(zl),this.sn(255)}_n(){this.an(zl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let s=1;s<t.length;++s)t[s]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===zl?(this.sn(zl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===zl?(this.an(zl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class u3{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class h3{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Nu{constructor(){this.cn=new c3,this.ln=new u3(this.cn),this.hn=new h3(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class go{constructor(e,t,n,s){this.Tn=e,this.In=t,this.En=n,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new go(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:Ff(this.En),directionalValue:Ff(this.dn),orderedDocumentKey:Ff(t),documentKey:n.path.toArray()}}Vn(e,t,n){const s=this.Rn(e,t,n);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function aa(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=EE(r.En,e.En),t!==0?t:(t=EE(r.dn,e.dn),t!==0?t:we.comparator(r.In,e.In)))}function EE(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}function Ff(r){return IS()?(function(t){let n="";for(let s=0;s<t.length;s++)n+=String.fromCharCode(t[s]);return n})(r):r}function TE(r){return typeof r!="string"?r:(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(r)}class SE{constructor(e){this.mn=new xt(((t,n)=>Ut.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const n=t;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(Re(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=o0(e);if(t!==void 0&&!this.wn(t))return!1;const n=co(e);let s=new Set,o=0,c=0;for(;o<n.length&&this.wn(n[o]);++o)s=s.add(n[o].fieldPath.canonicalString());if(o===n.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!s.has(u.field.canonicalString())){const d=n[o];if(!this.Sn(u,d)||!this.bn(this.fn[c++],d))return!1}++o}for(;o<n.length;++o){const u=n[o];if(c>=this.fn.length||!this.bn(this.fn[c++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new xt(Ut.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new Mf(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Mf(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Mf(n.field,n.dir==="asc"?0:1)));return new am(am.UNKNOWN_ID,this.collectionId,t,sh.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function M2(r){if(Re(r instanceof Ze||r instanceof wt,20012),r instanceof Ze){if(r instanceof n2){const t=r.value.arrayValue?.values?.map((n=>Ze.create(r.field,"==",n)))||[];return wt.create(t,"or")}return r}const e=r.filters.map((t=>M2(t)));return wt.create(e,r.op)}function d3(r){if(r.getFilters().length===0)return[];const e=T0(M2(r));return Re(P2(e),7391),x0(e)||E0(e)?[e]:e.getFilters()}function x0(r){return r instanceof Ze}function E0(r){return r instanceof wt&&h_(r)}function P2(r){return x0(r)||E0(r)||(function(t){if(t instanceof wt&&m0(t)){for(const n of t.getFilters())if(!x0(n)&&!E0(n))return!1;return!0}return!1})(r)}function T0(r){if(Re(r instanceof Ze||r instanceof wt,34018),r instanceof Ze)return r;if(r.filters.length===1)return T0(r.filters[0]);const e=r.filters.map((n=>T0(n)));let t=wt.create(e,r.op);return t=ym(t),P2(t)?t:(Re(t instanceof wt,64498),Re(fc(t),40251),Re(t.filters.length>1,57927),t.filters.reduce(((n,s)=>__(n,s))))}function __(r,e){let t;return Re(r instanceof Ze||r instanceof wt,38388),Re(e instanceof Ze||e instanceof wt,25473),t=r instanceof Ze?e instanceof Ze?(function(s,o){return wt.create([s,o],"and")})(r,e):AE(r,e):e instanceof Ze?AE(e,r):(function(s,o){if(Re(s.filters.length>0&&o.filters.length>0,48005),fc(s)&&fc(o))return ZA(s,o.getFilters());const c=m0(s)?s:o,u=m0(s)?o:s,d=c.filters.map((f=>__(f,u)));return wt.create(d,"or")})(r,e),ym(t)}function AE(r,e){if(fc(e))return ZA(e,r.getFilters());{const t=e.filters.map((n=>__(r,n)));return wt.create(t,"or")}}function ym(r){if(Re(r instanceof Ze||r instanceof wt,11850),r instanceof Ze)return r;const e=r.getFilters();if(e.length===1)return ym(e[0]);if(XA(r))return r;const t=e.map((s=>ym(s))),n=[];return t.forEach((s=>{s instanceof Ze?n.push(s):s instanceof wt&&(s.op===r.op?n.push(...s.filters):n.push(s))})),n.length===1?n[0]:wt.create(n,r.op)}class f3{constructor(){this.Cn=new v_}addToCollectionParentIndex(e,t){return this.Cn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(vr.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(vr.min())}updateCollectionGroup(e,t,n){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class v_{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new xt(ft.comparator),o=!s.has(n);return this.index[t]=s.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new xt(ft.comparator)).toArray()}}const IE="IndexedDbIndexManager",bf=new Uint8Array(0);class m3{constructor(e,t){this.databaseId=t,this.vn=new v_,this.Fn=new Ss((n=>Do(n)),((n,s)=>Mh(n,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:n,parent:zn(s)};return RE(e).put(o)}return re.resolve()}getCollectionParents(e,t){const n=[],s=IDBKeyRange.bound([t,""],[EA(t),""],!1,!0);return RE(e).J(s).next((o=>{for(const c of o){if(c.collectionId!==t)break;n.push(Ni(c.parent))}return n}))}addFieldIndex(e,t){const n=ku(e),s=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=n.add(s);if(t.indexState){const c=Fl(e);return o.next((u=>{c.put(vE(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const n=ku(e),s=Fl(e),o=Bl(e);return n.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=ku(e),n=Bl(e),s=Fl(e);return t.Z().next((()=>n.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return re.forEach(this.Mn(t),(n=>this.getIndexType(e,n).next((s=>{if(s===0||s===1){const o=new SE(n).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const n=Bl(e);let s=!0;const o=new Map;return re.forEach(this.Mn(t),(c=>this.xn(e,c).next((u=>{s&&(s=!!u),o.set(c,u)})))).next((()=>{if(s){let c=Ke();const u=[];return re.forEach(o,((d,f)=>{ye(IE,`Using index ${(function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map((B=>`${B.fieldPath}:${B.kind}`)).join(",")}`})(d)} to execute ${Do(t)}`);const g=(function(F,B){const Y=o0(B);if(Y===void 0)return null;for(const U of dm(F,Y.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null})(f,d),y=(function(F,B){const Y=new Map;for(const U of co(B))for(const R of dm(F,U.fieldPath))switch(R.op){case"==":case"in":Y.set(U.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return Y.set(U.fieldPath.canonicalString(),R.value),Array.from(Y.values())}return null})(f,d),v=(function(F,B){const Y=[];let U=!0;for(const R of co(B)){const T=R.kind===0?sE(F,R.fieldPath,F.startAt):aE(F,R.fieldPath,F.startAt);Y.push(T.value),U&&(U=T.inclusive)}return new dc(Y,U)})(f,d),w=(function(F,B){const Y=[];let U=!0;for(const R of co(B)){const T=R.kind===0?aE(F,R.fieldPath,F.endAt):sE(F,R.fieldPath,F.endAt);Y.push(T.value),U&&(U=T.inclusive)}return new dc(Y,U)})(f,d),E=this.On(d,f,v),D=this.On(d,f,w),M=this.Nn(d,f,y),V=this.Bn(d.indexId,g,E,v.inclusive,D,w.inclusive,M);return re.forEach(V,(H=>n.Y(H,t.limit).next((F=>{F.forEach((B=>{const Y=we.fromSegments(B.documentKey);c.has(Y)||(c=c.add(Y),u.push(Y))}))}))))})).next((()=>u))}return re.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=d3(wt.create(e.filters,"and")).map((n=>p0(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,s,o,c,u){const d=(t!=null?t.length:1)*Math.max(n.length,o.length),f=d/(t!=null?t.length:1),g=[];for(let y=0;y<d;++y){const v=t?this.Ln(t[y/f]):bf,w=this.kn(e,v,n[y%f],s),E=this.qn(e,v,o[y%f],c),D=u.map((M=>this.kn(e,v,M,!0)));g.push(...this.createRange(w,E,D))}return g}kn(e,t,n,s){const o=new go(e,we.empty(),t,n);return s?o:o.An()}qn(e,t,n,s){const o=new go(e,we.empty(),t,n);return s?o.An():o}xn(e,t){const n=new SE(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let c=null;for(const u of o)n.yn(u)&&(!c||u.fields.length>c.fields.length)&&(c=u);return c}))}getIndexType(e,t){let n=2;const s=this.Mn(t);return re.forEach(s,(o=>this.xn(e,o).next((c=>{c?n!==0&&c.fields.length<(function(d){let f=new xt(Ut.comparator),g=!1;for(const y of d.filters)for(const v of y.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?g=!0:f=f.add(v.field));for(const y of d.orderBy)y.field.isKeyField()||(f=f.add(y.field));return f.size+(g?1:0)})(o)&&(n=1):n=0})))).next((()=>(function(c){return c.limit!==null})(t)&&s.length>1&&n===2?1:n))}Qn(e,t){const n=new Nu;for(const s of co(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const c=n.Pn(s.kind);mo.Kt.Dt(o,c)}return n.un()}Ln(e){const t=new Nu;return mo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new Nu;return mo.Kt.Dt(dh(this.databaseId,t),n.Pn((function(o){const c=co(o);return c.length===0?0:c[c.length-1].kind})(e))),n.un()}Nn(e,t,n){if(n===null)return[];let s=[];s.push(new Nu);let o=0;for(const c of co(e)){const u=n[o++];for(const d of s)if(this.Un(t,c.fieldPath)&&fh(u))s=this.Kn(s,c,u);else{const f=d.Pn(c.kind);mo.Kt.Dt(u,f)}}return this.Wn(s)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const s=[...e],o=[];for(const c of n.arrayValue.values||[])for(const u of s){const d=new Nu;d.seed(u.un()),mo.Kt.Dt(c,d.Pn(t.kind)),o.push(d)}return o}Un(e,t){return!!e.filters.find((n=>n instanceof Ze&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=ku(e),s=Fl(e);return(t?n.J(c0,IDBKeyRange.bound(t,t)):n.J()).next((o=>{const c=[];return re.forEach(o,(u=>s.get([u.indexId,this.uid]).next((d=>{c.push((function(g,y){const v=y?new sh(y.sequenceNumber,new vr(jo(y.readTime),new we(Ni(y.documentKey)),y.largestBatchId)):sh.empty(),w=g.fields.map((([E,D])=>new Mf(Ut.fromServerFormat(E),D)));return new am(g.indexId,g.collectionGroup,w,v)})(u,d))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,s)=>{const o=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Le(n.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const s=ku(e),o=Fl(e);return this.Gn(e).next((c=>s.J(c0,IDBKeyRange.bound(t,t)).next((u=>re.forEach(u,(d=>o.put(vE(d.indexId,this.uid,c,n))))))))}updateIndexEntries(e,t){const n=new Map;return re.forEach(t,((s,o)=>{const c=n.get(s.collectionGroup);return(c?re.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next((u=>(n.set(s.collectionGroup,u),re.forEach(u,(d=>this.zn(e,s,d).next((f=>{const g=this.jn(o,d);return f.isEqual(g)?re.resolve():this.Jn(e,o,d,f,g)})))))))}))}Hn(e,t,n,s){return Bl(e).put(s.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,s){return Bl(e).delete(s.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const s=Bl(e);let o=new xt(aa);return s.ee({index:MA,range:IDBKeyRange.only([n.indexId,this.uid,Ff(this.$n(n,t))])},((c,u)=>{o=o.add(new go(n.indexId,t,TE(u.arrayValue),TE(u.directionalValue)))})).next((()=>o))}jn(e,t){let n=new xt(aa);const s=this.Qn(t,e);if(s==null)return n;const o=o0(t);if(o!=null){const c=e.data.field(o.fieldPath);if(fh(c))for(const u of c.arrayValue.values||[])n=n.add(new go(t.indexId,e.key,this.Ln(u),s))}else n=n.add(new go(t.indexId,e.key,bf,s));return n}Jn(e,t,n,s,o){ye(IE,"Updating index entries for document '%s'",t.key);const c=[];return(function(d,f,g,y,v){const w=d.getIterator(),E=f.getIterator();let D=Ul(w),M=Ul(E);for(;D||M;){let V=!1,H=!1;if(D&&M){const F=g(D,M);F<0?H=!0:F>0&&(V=!0)}else D!=null?H=!0:V=!0;V?(y(M),M=Ul(E)):H?(v(D),D=Ul(w)):(D=Ul(w),M=Ul(E))}})(s,o,aa,(u=>{c.push(this.Hn(e,t,n,u))}),(u=>{c.push(this.Yn(e,t,n,u))})),re.waitFor(c)}Gn(e){let t=1;return Fl(e).ee({index:OA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((c,u)=>aa(c,u))).filter(((c,u,d)=>!u||aa(c,d[u-1])!==0));const s=[];s.push(e);for(const c of n){const u=aa(c,e),d=aa(c,t);if(u===0)s[0]=e.An();else if(u>0&&d<0)s.push(c),s.push(c.An());else if(d>0)break}s.push(t);const o=[];for(let c=0;c<s.length;c+=2){if(this.Zn(s[c],s[c+1]))return[];const u=s[c].Vn(this.uid,bf,we.empty()),d=s[c+1].Vn(this.uid,bf,we.empty());o.push(IDBKeyRange.bound(u,d))}return o}Zn(e,t){return aa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(CE)}getMinOffset(e,t){return re.mapArray(this.Mn(t),(n=>this.xn(e,n).next((s=>s||Se(44426))))).next(CE)}}function RE(r){return gn(r,ch)}function Bl(r){return gn(r,Yu)}function ku(r){return gn(r,s_)}function Fl(r){return gn(r,Ku)}function CE(r){Re(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const s=r[n].indexState.offset;n_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new vr(e.readTime,e.documentKey,t)}const NE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},j2=41943040;class jn{static withCacheSize(e){return new jn(e,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function V2(r,e,t){const n=r.store(ei),s=r.store(ac),o=[],c=IDBKeyRange.only(t.batchId);let u=0;const d=n.ee({range:c},((g,y,v)=>(u++,v.delete())));o.push(d.next((()=>{Re(u===1,47070,{batchId:t.batchId})})));const f=[];for(const g of t.mutations){const y=NA(e,g.key.path,t.batchId);o.push(s.delete(y)),f.push(g.key)}return re.waitFor(o).next((()=>f))}function _m(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Se(14731);e=r.noDocument}return JSON.stringify(e).length}jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(j2,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);class eg{constructor(e,t,n,s){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=s,this.Xn={}}static wt(e,t,n,s){Re(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new eg(o,t,n,s)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return oa(e).ee({index:yo,range:n},((s,o,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,n,s){const o=Ql(e),c=oa(e);return c.add({}).next((u=>{Re(typeof u=="number",49019);const d=new f_(u,t,n,s),f=(function(w,E,D){const M=D.baseMutations.map((H=>gm(w.yt,H))),V=D.mutations.map((H=>gm(w.yt,H)));return{userId:E,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:M,mutations:V}})(this.serializer,this.userId,d),g=[];let y=new xt(((v,w)=>Le(v.canonicalString(),w.canonicalString())));for(const v of s){const w=NA(this.userId,v.key.path,u);y=y.add(v.key.path.popLast()),g.push(c.put(f)),g.push(o.put(w,H5))}return y.forEach((v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[u]=d.keys()})),re.waitFor(g).next((()=>d))}))}lookupMutationBatch(e,t){return oa(e).get(t).next((n=>n?(Re(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),fo(this.serializer,n)):null))}er(e,t){return this.Xn[t]?re.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const s=n.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=IDBKeyRange.lowerBound([this.userId,n]);let o=null;return oa(e).ee({index:yo,range:s},((c,u,d)=>{u.userId===this.userId&&(Re(u.batchId>=n,47524,{tr:n}),o=fo(this.serializer,u)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=vo;return oa(e).ee({index:yo,range:t,reverse:!0},((s,o,c)=>{n=o.batchId,c.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,vo],[this.userId,Number.POSITIVE_INFINITY]);return oa(e).J(yo,t).next((n=>n.map((s=>fo(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Pf(this.userId,t.path),s=IDBKeyRange.lowerBound(n),o=[];return Ql(e).ee({range:s},((c,u,d)=>{const[f,g,y]=c,v=Ni(g);if(f===this.userId&&t.path.isEqual(v))return oa(e).get(y).next((w=>{if(!w)throw Se(61480,{nr:c,batchId:y});Re(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:y}),o.push(fo(this.serializer,w))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xt(Le);const s=[];return t.forEach((o=>{const c=Pf(this.userId,o.path),u=IDBKeyRange.lowerBound(c),d=Ql(e).ee({range:u},((f,g,y)=>{const[v,w,E]=f,D=Ni(w);v===this.userId&&o.path.isEqual(D)?n=n.add(E):y.done()}));s.push(d)})),re.waitFor(s).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1,o=Pf(this.userId,n),c=IDBKeyRange.lowerBound(o);let u=new xt(Le);return Ql(e).ee({range:c},((d,f,g)=>{const[y,v,w]=d,E=Ni(v);y===this.userId&&n.isPrefixOf(E)?E.length===s&&(u=u.add(w)):g.done()})).next((()=>this.rr(e,u)))}rr(e,t){const n=[],s=[];return t.forEach((o=>{s.push(oa(e).get(o).next((c=>{if(c===null)throw Se(35274,{batchId:o});Re(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),n.push(fo(this.serializer,c))})))})),re.waitFor(s).next((()=>n))}removeMutationBatch(e,t){return V2(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),re.forEach(n,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return re.resolve();const n=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),s=[];return Ql(e).ee({range:n},((o,c,u)=>{if(o[0]===this.userId){const d=Ni(o[1]);s.push(d)}else u.done()})).next((()=>{Re(s.length===0,56720,{sr:s.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return L2(e,this.userId,t)}_r(e){return U2(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:vo,lastStreamToken:""}))}}function L2(r,e,t){const n=Pf(e,t.path),s=n[1],o=IDBKeyRange.lowerBound(n);let c=!1;return Ql(r).ee({range:o,X:!0},((u,d,f)=>{const[g,y,v]=u;g===e&&y===s&&(c=!0),f.done()})).next((()=>c))}function oa(r){return gn(r,ei)}function Ql(r){return gn(r,ac)}function U2(r){return gn(r,oh)}class Vo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Vo(0)}static cr(){return new Vo(-1)}}class g3{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const n=new Vo(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>ke.fromTimestamp(new bt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Hl(e).delete(t.targetId))).next((()=>this.lr(e))).next((n=>(Re(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n))))}removeTargets(e,t,n){let s=0;const o=[];return Hl(e).ee(((c,u)=>{const d=Uu(u);d.sequenceNumber<=t&&n.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>re.waitFor(o))).next((()=>s))}forEachTarget(e,t){return Hl(e).ee(((n,s)=>{const o=Uu(s);t(o)}))}lr(e){return kE(e).get(cm).next((t=>(Re(t!==null,2888),t)))}hr(e,t){return kE(e).put(cm,t)}Pr(e,t){return Hl(e).put(D2(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const n=Do(t),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let o=null;return Hl(e).ee({range:s,index:DA},((c,u,d)=>{const f=Uu(u);Mh(t,f.target)&&(o=f,d.done())})).next((()=>o))}addMatchingKeys(e,t,n){const s=[],o=ma(e);return t.forEach((c=>{const u=zn(c.path);s.push(o.put({targetId:n,path:u})),s.push(this.referenceDelegate.addReference(e,n,c))})),re.waitFor(s)}removeMatchingKeys(e,t,n){const s=ma(e);return re.forEach(t,(o=>{const c=zn(o.path);return re.waitFor([s.delete([n,c]),this.referenceDelegate.removeReference(e,n,o)])}))}removeMatchingKeysForTargetId(e,t){const n=ma(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),s=ma(e);let o=Ke();return s.ee({range:n,X:!0},((c,u,d)=>{const f=Ni(c[1]),g=new we(f);o=o.add(g)})).next((()=>o))}containsKey(e,t){const n=zn(t.path),s=IDBKeyRange.bound([n],[EA(n)],!1,!0);let o=0;return ma(e).ee({index:i_,X:!0,range:s},(([c,u],d,f)=>{c!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return Hl(e).get(t).next((n=>n?Uu(n):null))}}function Hl(r){return gn(r,oc)}function kE(r){return gn(r,bo)}function ma(r){return gn(r,lc)}const DE="LruGarbageCollector",p3=1048576;function OE([r,e],[t,n]){const s=Le(r,t);return s===0?Le(e,n):s}class y3{constructor(e){this.Ir=e,this.buffer=new xt(OE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();OE(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class z2{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(DE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ka(t)?ye(DE,"Ignoring IndexedDB error during garbage collection: ",t):await qo(t)}await this.Vr(3e5)}))}}class _3{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(Lr.ce);const n=new y3(t);return this.mr.forEachTarget(e,(s=>n.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>n.Ar(s))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(NE)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,s,o,c,u,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(n=y,u=Date.now(),this.removeTargets(e,n,t)))).next((y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((y=>(f=Date.now(),$l()<=Je.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y}))))}}function B2(r,e){return new _3(r,e)}class v3{constructor(e,t){this.db=e,this.garbageCollector=B2(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((n,s)=>t(s)))}addReference(e,t,n){return wf(e,n)}removeReference(e,t,n){return wf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return wf(e,t)}br(e,t){return(function(s,o){let c=!1;return U2(s).te((u=>L2(s,u,o).next((d=>(d&&(c=!0),re.resolve(!d)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Sr(e,((c,u)=>{if(u<=t){const d=this.br(e,c).next((f=>{if(!f)return o++,n.getEntry(e,c).next((()=>(n.removeEntry(c,ke.min()),ma(e).delete((function(y){return[0,zn(y.path)]})(c)))))}));s.push(d)}})).next((()=>re.waitFor(s))).next((()=>n.apply(e))).next((()=>o))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return wf(e,t)}Sr(e,t){const n=ma(e);let s,o=Lr.ce;return n.ee({index:i_},(([c,u],{path:d,sequenceNumber:f})=>{c===0?(o!==Lr.ce&&t(new we(Ni(s)),o),o=f,s=d):o=Lr.ce})).next((()=>{o!==Lr.ce&&t(new we(Ni(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wf(r,e){return ma(r).put((function(n,s){return{targetId:0,path:zn(n.path),sequenceNumber:s}})(e,r.currentSequenceNumber))}class F2{constructor(){this.changes=new Ss((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?re.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class b3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return oo(e).put(n)}removeEntry(e,t,n){return oo(e).delete((function(o,c){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],pm(c),u[u.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=qt.newInvalidDocument(t);return oo(e).ee({index:jf,range:IDBKeyRange.only(Du(t))},((s,o)=>{n=this.Cr(t,o)})).next((()=>n))}vr(e,t){let n={size:0,document:qt.newInvalidDocument(t)};return oo(e).ee({index:jf,range:IDBKeyRange.only(Du(t))},((s,o)=>{n={document:this.Cr(t,o),size:_m(o)}})).next((()=>n))}getEntries(e,t){let n=_r();return this.Fr(e,t,((s,o)=>{const c=this.Cr(s,o);n=n.insert(s,c)})).next((()=>n))}Mr(e,t){let n=_r(),s=new Lt(we.comparator);return this.Fr(e,t,((o,c)=>{const u=this.Cr(o,c);n=n.insert(o,u),s=s.insert(o,_m(c))})).next((()=>({documents:n,Or:s})))}Fr(e,t,n){if(t.isEmpty())return re.resolve();let s=new xt(jE);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound(Du(s.first()),Du(s.last())),c=s.getIterator();let u=c.getNext();return oo(e).ee({index:jf,range:o},((d,f,g)=>{const y=we.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&jE(u,y)<0;)n(u,null),u=c.getNext();u&&u.isEqual(y)&&(n(u,f),u=c.hasNext()?c.getNext():null),u?g.j(Du(u)):g.done()})).next((()=>{for(;u;)n(u,null),u=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,n,s,o){const c=t.path,u=[c.popLast().toArray(),c.lastSegment(),pm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oo(e).J(IDBKeyRange.bound(u,d,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let g=_r();for(const y of f){const v=this.Cr(we.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);v.isFoundDocument()&&(jh(t,v)||s.has(v.key))&&(g=g.insert(v.key,v))}return g}))}getAllFromCollectionGroup(e,t,n,s){let o=_r();const c=PE(t,n),u=PE(t,vr.max());return oo(e).ee({index:kA,range:IDBKeyRange.bound(c,u,!0)},((d,f,g)=>{const y=this.Cr(we.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(y.key,y),o.size===s&&g.done()})).next((()=>o))}newChangeBuffer(e){return new w3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return ME(e).get(l0).next((t=>(Re(!!t,20021),t)))}Dr(e,t){return ME(e).put(l0,t)}Cr(e,t){if(t){const n=s3(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(ke.min())))return n}return qt.newInvalidDocument(e)}}function H2(r){return new b3(r)}class w3 extends F2{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ss((n=>n.toString()),((n,s)=>n.isEqual(s)))}applyChanges(e){const t=[];let n=0,s=new xt(((o,c)=>Le(o.canonicalString(),c.canonicalString())));return this.changes.forEach(((o,c)=>{const u=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,u.readTime)),c.isValidDocument()){const d=yE(this.Nr.serializer,c);s=s.add(o.path.popLast());const f=_m(d);n+=f-u.size,t.push(this.Nr.addEntry(e,o,d))}else if(n-=u.size,this.trackRemovals){const d=yE(this.Nr.serializer,c.convertToNoDocument(ke.min()));t.push(this.Nr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,n)),re.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((n=>(this.Br.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:n,Or:s})=>(s.forEach(((o,c)=>{this.Br.set(o,{size:c,readTime:n.get(o).readTime})})),n)))}}function ME(r){return gn(r,lh)}function oo(r){return gn(r,lm)}function Du(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function PE(r,e){const t=e.documentKey.path.toArray();return[r,pm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function jE(r,e){const t=r.path.toArray(),n=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<n.length-2;++o)if(s=Le(t[o],n[o]),s)return s;return s=Le(t.length,n.length),s||(s=Le(t[t.length-2],n[n.length-2]),s||Le(t[t.length-1],n[n.length-1]))}class x3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class q2{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(n!==null&&Ju(n.mutation,s,ar.empty(),bt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Ke()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Ke()){const s=ki();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,n).next((o=>{let c=Vu();return o.forEach(((u,d)=>{c=c.insert(u,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const n=ki();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ke())))}populateOverlays(e,t,n){const s=[];return n.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((c,u)=>{t.set(c,u)}))}))}computeViews(e,t,n,s){let o=_r();const c=Xu(),u=(function(){return Xu()})();return t.forEach(((d,f)=>{const g=n.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof As)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),Ju(g.mutation,f,g.mutation.getFieldMask(),bt.now())):c.set(f.key,ar.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,g)=>c.set(f,g))),t.forEach(((f,g)=>u.set(f,new x3(g,c.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=Xu();let s=new Lt(((c,u)=>c-u)),o=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const u of c)u.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let g=n.get(d)||ar.empty();g=u.applyToLocalView(f,g),n.set(d,g);const y=(s.get(u.batchId)||Ke()).add(d);s=s.insert(u.batchId,y)}))})).next((()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,g=d.value,y=l2();g.forEach((v=>{if(!o.has(v)){const w=m2(t.get(v),n.get(v));w!==null&&y.set(v,w),o=o.add(v)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return re.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,s){return(function(c){return we.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):r2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next((o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-o.size):re.resolve(ki());let u=ih,d=o;return c.next((f=>re.forEach(f,((g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?re.resolve():this.remoteDocumentCache.getEntry(e,g).next((v=>{d=d.insert(g,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,Ke()))).next((g=>({batchId:u,changes:o2(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((n=>{let s=Vu();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const o=t.collectionGroup;let c=Vu();return this.indexManager.getCollectionParents(e,o).next((u=>re.forEach(u,(d=>{const f=(function(y,v){return new xc(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,n,s).next((g=>{g.forEach(((y,v)=>{c=c.insert(y,v)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,n,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,s)))).next((c=>{o.forEach(((d,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,qt.newInvalidDocument(g)))}));let u=Vu();return c.forEach(((d,f)=>{const g=o.get(d);g!==void 0&&Ju(g.mutation,f,ar.empty(),bt.now()),jh(t,f)&&(u=u.insert(d,f))})),u}))}}class E3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return re.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Qn(s.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:O2(s.bundledQuery),readTime:Qn(s.readTime)}})(t)),re.resolve()}}class T3{constructor(){this.overlays=new Lt(we.comparator),this.qr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ki();return re.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&n.set(s,o)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((s,o)=>{this.St(e,t,o)})),re.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(n)),re.resolve()}getOverlaysForCollection(e,t,n){const s=ki(),o=t.length+1,c=new we(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>n&&s.set(d.getKey(),d)}return re.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let o=new Lt(((f,g)=>f-g));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>n){let g=o.get(f.largestBatchId);g===null&&(g=ki(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=ki(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,g)=>u.set(f,g))),!(u.size()>=s)););return re.resolve(u)}St(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const c=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new g_(t,n));let o=this.qr.get(t);o===void 0&&(o=Ke(),this.qr.set(t,o)),this.qr.set(t,o.add(n.key))}}class S3{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}class b_{constructor(){this.Qr=new xt(bn.$r),this.Ur=new xt(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new bn(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new bn(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new we(new ft([])),n=new bn(t,e),s=new bn(t,e+1),o=[];return this.Ur.forEachInRange([n,s],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new ft([])),n=new bn(t,e),s=new bn(t,e+1);let o=Ke();return this.Ur.forEachInRange([n,s],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new bn(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class bn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}class A3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new xt(bn.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new f_(o,t,n,s);this.mutationQueue.push(c);for(const u of s)this.Zr=this.Zr.add(new bn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.ei(n),o=s<0?0:s;return re.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?vo:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new bn(t,0),s=new bn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,s],(c=>{const u=this.Xr(c.Yr);o.push(u)})),re.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xt(Le);return t.forEach((s=>{const o=new bn(s,0),c=new bn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(u=>{n=n.add(u.Yr)}))})),re.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let o=n;we.isDocumentKey(o)||(o=o.child(""));const c=new bn(new we(o),0);let u=new xt(Le);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!n.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Yr)),!0)}),c),re.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((n=>{const s=this.Xr(n);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Re(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return re.forEach(t.mutations,(s=>{const o=new bn(s.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new bn(t,0),s=this.Zr.firstAfterOrEqual(n);return re.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class I3{constructor(e){this.ri=e,this.docs=(function(){return new Lt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),o=s?s.size:0,c=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return re.resolve(n?n.document.mutableCopy():qt.newInvalidDocument(t))}getEntries(e,t){let n=_r();return t.forEach((s=>{const o=this.docs.get(s);n=n.insert(s,o?o.document.mutableCopy():qt.newInvalidDocument(s))})),re.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let o=_r();const c=t.path,u=new we(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||n_(AA(g),n)<=0||(s.has(g.key)||jh(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return re.resolve(o)}getAllFromCollectionGroup(e,t,n,s){Se(9500)}ii(e,t){return re.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new R3(this)}getSize(e){return re.resolve(this.size)}}class R3 extends F2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)})),re.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class C3{constructor(e){this.persistence=e,this.si=new Ss((t=>Do(t)),Mh),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new b_,this.targetCount=0,this.ai=Vo.ur()}forEachTarget(e,t){return this.si.forEach(((n,s)=>t(s))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),re.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Vo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Pr(t),re.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,n){let s=0;const o=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),re.waitFor(o).next((()=>s))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return re.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),re.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((c=>{o.push(s.markPotentiallyOrphaned(e,c))})),re.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return re.resolve(n)}containsKey(e,t){return re.resolve(this._i.containsKey(t))}}class w_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Lr(0),this.li=!1,this.li=!0,this.hi=new S3,this.referenceDelegate=e(this),this.Pi=new C3(this),this.indexManager=new f3,this.remoteDocumentCache=(function(s){return new I3(s)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new k2(t),this.Ii=new E3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new T3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new A3(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){ye("MemoryPersistence","Starting transaction:",e);const s=new N3(this.ci.next());return this.referenceDelegate.Ei(),n(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return re.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class N3 extends RA{constructor(e){super(),this.currentSequenceNumber=e}}class tg{constructor(e){this.persistence=e,this.Ri=new b_,this.Vi=null}static mi(e){return new tg(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),re.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(n=>{const s=we.fromPath(n);return this.gi(e,s).next((o=>{o||t.removeEntry(s,ke.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class vm{constructor(e,t){this.persistence=e,this.pi=new Ss((n=>zn(n.path)),((n,s)=>n.isEqual(s))),this.garbageCollector=B2(this,t)}static mi(e,t){return new vm(e,t)}Ei(){}di(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return re.forEach(this.pi,((n,s)=>this.br(e,n,s).next((o=>o?re.resolve():t(s)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(c=>this.br(e,c,t).next((u=>{u||(n++,o.removeEntry(c,ke.min()))})))).next((()=>o.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Lf(e.data.value)),t}br(e,t,n){return re.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return re.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class k3{constructor(e){this.serializer=e}k(e,t,n,s){const o=new zm("createOrUpgrade",t);n<1&&s>=1&&((function(d){d.createObjectStore(Oh)})(e),(function(d){d.createObjectStore(oh,{keyPath:F5}),d.createObjectStore(ei,{keyPath:Kx,autoIncrement:!0}).createIndex(yo,Yx,{unique:!0}),d.createObjectStore(ac)})(e),VE(e),(function(d){d.createObjectStore(uo)})(e));let c=re.resolve();return n<3&&s>=3&&(n!==0&&((function(d){d.deleteObjectStore(lc),d.deleteObjectStore(oc),d.deleteObjectStore(bo)})(e),VE(e)),c=c.next((()=>(function(d){const f=d.store(bo),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ke.min().toTimestamp(),targetCount:0};return f.put(cm,g)})(o)))),n<4&&s>=4&&(n!==0&&(c=c.next((()=>(function(d,f){return f.store(ei).J().next((y=>{d.deleteObjectStore(ei),d.createObjectStore(ei,{keyPath:Kx,autoIncrement:!0}).createIndex(yo,Yx,{unique:!0});const v=f.store(ei),w=y.map((E=>v.put(E)));return re.waitFor(w)}))})(e,o)))),c=c.next((()=>{(function(d){d.createObjectStore(cc,{keyPath:X5})})(e)}))),n<5&&s>=5&&(c=c.next((()=>this.yi(o)))),n<6&&s>=6&&(c=c.next((()=>((function(d){d.createObjectStore(lh)})(e),this.wi(o))))),n<7&&s>=7&&(c=c.next((()=>this.Si(o)))),n<8&&s>=8&&(c=c.next((()=>this.bi(e,o)))),n<9&&s>=9&&(c=c.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&s>=10&&(c=c.next((()=>this.Di(o)))),n<11&&s>=11&&(c=c.next((()=>{(function(d){d.createObjectStore(Fm,{keyPath:J5})})(e),(function(d){d.createObjectStore(Hm,{keyPath:Z5})})(e)}))),n<12&&s>=12&&(c=c.next((()=>{(function(d){const f=d.createObjectStore(qm,{keyPath:aP});f.createIndex(u0,oP,{unique:!1}),f.createIndex(PA,lP,{unique:!1})})(e)}))),n<13&&s>=13&&(c=c.next((()=>(function(d){const f=d.createObjectStore(lm,{keyPath:q5});f.createIndex(jf,$5),f.createIndex(kA,G5)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(uo)))),n<14&&s>=14&&(c=c.next((()=>this.Fi(e,o)))),n<15&&s>=15&&(c=c.next((()=>(function(d){d.createObjectStore(s_,{keyPath:eP,autoIncrement:!0}).createIndex(c0,tP,{unique:!1}),d.createObjectStore(Ku,{keyPath:nP}).createIndex(OA,rP,{unique:!1}),d.createObjectStore(Yu,{keyPath:iP}).createIndex(MA,sP,{unique:!1})})(e)))),n<16&&s>=16&&(c=c.next((()=>{t.objectStore(Ku).clear()})).next((()=>{t.objectStore(Yu).clear()}))),n<17&&s>=17&&(c=c.next((()=>{(function(d){d.createObjectStore(a_,{keyPath:cP})})(e)}))),n<18&&s>=18&&IS()&&(c=c.next((()=>{t.objectStore(Ku).clear()})).next((()=>{t.objectStore(Yu).clear()}))),c}wi(e){let t=0;return e.store(uo).ee(((n,s)=>{t+=_m(s)})).next((()=>{const n={byteSize:t};return e.store(lh).put(l0,n)}))}yi(e){const t=e.store(oh),n=e.store(ei);return t.J().next((s=>re.forEach(s,(o=>{const c=IDBKeyRange.bound([o.userId,vo],[o.userId,o.lastAcknowledgedBatchId]);return n.J(yo,c).next((u=>re.forEach(u,(d=>{Re(d.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const f=fo(this.serializer,d);return V2(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(lc),n=e.store(uo);return e.store(bo).get(cm).next((s=>{const o=[];return n.ee(((c,u)=>{const d=new ft(c),f=(function(y){return[0,zn(y)]})(d);o.push(t.get(f).next((g=>g?re.resolve():(y=>t.put({targetId:0,path:zn(y),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>re.waitFor(o)))}))}bi(e,t){e.createObjectStore(ch,{keyPath:W5});const n=t.store(ch),s=new v_,o=c=>{if(s.add(c)){const u=c.lastSegment(),d=c.popLast();return n.put({collectionId:u,parent:zn(d)})}};return t.store(uo).ee({X:!0},((c,u)=>{const d=new ft(c);return o(d.popLast())})).next((()=>t.store(ac).ee({X:!0},(([c,u,d],f)=>{const g=Ni(u);return o(g.popLast())}))))}Di(e){const t=e.store(oc);return t.ee(((n,s)=>{const o=Uu(s),c=D2(this.serializer,o);return t.put(c)}))}Ci(e,t){const n=t.store(uo),s=[];return n.ee(((o,c)=>{const u=t.store(lm),d=(function(y){return y.document?new we(ft.fromString(y.document.name).popFirst(5)):y.noDocument?we.fromSegments(y.noDocument.path):y.unknownDocument?we.fromSegments(y.unknownDocument.path):Se(36783)})(c).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(u.put(f))})).next((()=>re.waitFor(s)))}Fi(e,t){const n=t.store(ei),s=H2(this.serializer),o=new w_(tg.mi,this.serializer.yt);return n.J().next((c=>{const u=new Map;return c.forEach((d=>{let f=u.get(d.userId)??Ke();fo(this.serializer,d).keys().forEach((g=>f=f.add(g))),u.set(d.userId,f)})),re.forEach(u,((d,f)=>{const g=new Nn(f),y=Zm.wt(this.serializer,g),v=o.getIndexManager(g),w=eg.wt(g,this.serializer,v,o.referenceDelegate);return new q2(s,w,y,v).recalculateAndSaveOverlaysForDocumentKeys(new h0(t,Lr.ce),d).next()}))}))}}function VE(r){r.createObjectStore(lc,{keyPath:Y5}).createIndex(i_,Q5,{unique:!0}),r.createObjectStore(oc,{keyPath:"targetId"}).createIndex(DA,K5,{unique:!0}),r.createObjectStore(bo)}const la="IndexedDbPersistence",My=18e5,Py=5e3,jy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",D3="main";class x_{constructor(e,t,n,s,o,c,u,d,f,g,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=o,this.window=c,this.document=u,this.xi=f,this.Oi=g,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!x_.v())throw new ve(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new v3(this,s),this.$i=t+D3,this.serializer=new k2(d),this.Ui=new va(this.$i,this.Ni,new k3(this.serializer)),this.hi=new o3,this.Pi=new g3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=H2(this.serializer),this.Ii=new a3,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Kn(la,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(de.FAILED_PRECONDITION,jy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Lr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>xf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ka(e))return ye(la,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ye(la,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Ou(e).get(Ll).next((t=>re.resolve(this.es(t))))}ts(e){return xf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,My)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=gn(t,cc);return n.J().next((s=>{const o=this.ss(s,My),c=s.filter((u=>o.indexOf(u)===-1));return re.forEach(c,(u=>n.delete(u.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?re.resolve(!0):Ou(e).get(Ll).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Py)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ve(de.FAILED_PRECONDITION,jy);return!1}}return!(!this.networkEnabled||!this.inForeground)||xf(e).J().next((n=>this.ss(n,Py).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,u=this.networkEnabled===s.networkEnabled;if(o||c&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ye(la,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Oh,cc],(e=>{const t=new h0(e,Lr.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((n=>this.rs(n.updateTimeMs,t)&&!this.us(n.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>xf(e).J().next((t=>this.ss(t,My).map((n=>n.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return eg.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new m3(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Zm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){ye(la,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===18?dP:d===17?UA:d===16?hP:d===15?o_:d===14?LA:d===13?VA:d===12?uP:d===11?jA:void Se(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,s,o,(u=>(c=new h0(u,this.ci?this.ci.next():Lr.ce),t==="readwrite-primary"?this.Hi(c).next((d=>!!d||this.Yi(c))).next((d=>{if(!d)throw Kn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ve(de.FAILED_PRECONDITION,IA);return n(c)})).next((d=>this.Xi(c).next((()=>d)))):this.Is(c).next((()=>n(c)))))).then((u=>(c.raiseOnCommittedEvent(),u)))}Is(e){return Ou(e).get(Ll).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Py)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ve(de.FAILED_PRECONDITION,jy)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ou(e).put(Ll,t)}static v(){return va.v()}Zi(e){const t=Ou(e);return t.get(Ll).next((n=>this.es(n)?(ye(la,"Releasing primary lease."),t.delete(Ll)):re.resolve()))}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Kn(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;AS()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ye(la,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Kn(la,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Kn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ou(r){return gn(r,Oh)}function xf(r){return gn(r,cc)}function O3(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class E_{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=s}static As(e,t){let n=Ke(),s=Ke();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new E_(e,t.fromCache,n,s)}}class M3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class $2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return AS()?8:CA(mn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,s){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,s,n).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new M3;return this.Ss(e,t,c).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,c,u.size)}))})).next((()=>o.result))}bs(e,t,n,s){return n.documentReadCount<this.fs?($l()<=Je.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Gl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):($l()<=Je.DEBUG&&ye("QueryEngine","Query:",Gl(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?($l()<=Je.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Gl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ur(t))):re.resolve())}ys(e,t){if(oE(t))return re.resolve(null);let n=Ur(t);return this.indexManager.getIndexType(e,n).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=fm(t,null,"F"),n=Ur(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((o=>{const c=Ke(...o);return this.ps.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,n).next((d=>{const f=this.Ds(t,u);return this.Cs(t,f,c,d.readTime)?this.ys(e,fm(t,null,"F")):this.vs(e,f,t,d)}))))})))))}ws(e,t,n,s){return oE(t)||s.isEqual(ke.min())?re.resolve(null):this.ps.getDocuments(e,n).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,n,s)?re.resolve(null):($l()<=Je.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Gl(t)),this.vs(e,c,t,P5(s,ih)).next((u=>u)))}))}Ds(e,t){let n=new xt(s2(e));return t.forEach(((s,o)=>{jh(e,o)&&(n=n.add(o))})),n}Cs(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,n){return $l()<=Je.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Gl(t)),this.ps.getDocumentsMatchingQuery(e,t,vr.min(),n)}vs(e,t,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const T_="LocalStore",P3=3e8;class j3{constructor(e,t,n,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Lt(Le),this.xs=new Ss((o=>Do(o)),Mh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new q2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function G2(r,e,t,n){return new j3(r,e,t,n)}async function K2(r,e){const t=Ue(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((o=>{const c=[],u=[];let d=Ke();for(const f of s){c.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(n,d).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:u})))}))}))}function V3(r,e){const t=Ue(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,g){const y=f.batch,v=y.keys();let w=re.resolve();return v.forEach((E=>{w=w.next((()=>g.getEntry(d,E))).next((D=>{const M=f.docVersions.get(E);Re(M!==null,48541),D.version.compareTo(M)<0&&(y.applyToRemoteDocument(D,f),D.isValidDocument()&&(D.setReadTime(f.commitVersion),g.addEntry(D)))}))})),w.next((()=>u.mutationQueue.removeMutationBatch(d,y)))})(t,n,e,o).next((()=>o.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let d=Ke();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(n,s)))}))}function Y2(r){const e=Ue(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function L3(r,e){const t=Ue(r),n=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((g,y)=>{const v=s.get(y);if(!v)return;u.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,y))));let w=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(cn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,n)),s=s.insert(y,w),(function(D,M,V){return D.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=P3?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(v,w,g)&&u.push(t.Pi.updateTargetData(o,w))}));let d=_r(),f=Ke();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),u.push(U3(o,c,e.documentUpdates).next((g=>{d=g.ks,f=g.qs}))),!n.isEqual(ke.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n)));u.push(g)}return re.waitFor(u).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function U3(r,e,t){let n=Ke(),s=Ke();return t.forEach((o=>n=n.add(o))),e.getEntries(r,n).next((o=>{let c=_r();return t.forEach(((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(ke.min())?(e.removeEntry(u,d.readTime),c=c.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),c=c.insert(u,d)):ye(T_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)})),{ks:c,qs:s}}))}function z3(r,e){const t=Ue(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=vo),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function B3(r,e){const t=Ue(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return t.Pi.getTargetData(n,e).next((o=>o?(s=o,re.resolve(s)):t.Pi.allocateTargetId(n).next((c=>(s=new fs(e,c,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=t.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function S0(r,e,t){const n=Ue(r),s=n.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",o,(c=>n.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!ka(c))throw c;ye(T_,`Failed to update sequence numbers for target ${e}: ${c}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function LE(r,e,t){const n=Ue(r);let s=ke.min(),o=Ke();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,f,g){const y=Ue(d),v=y.xs.get(g);return v!==void 0?re.resolve(y.Ms.get(v)):y.Pi.getTargetData(f,g)})(n,c,Ur(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(c,u.targetId).next((d=>{o=d}))})).next((()=>n.Fs.getDocumentsMatchingQuery(c,e,t?s:ke.min(),t?o:Ke()))).next((u=>(F3(n,IP(e),u),{documents:u,Qs:o})))))}function F3(r,e,t){let n=r.Os.get(e)||ke.min();t.forEach(((s,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)})),r.Os.set(e,n)}class UE{constructor(){this.activeTargetIds=OP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Q2{constructor(){this.Mo=new UE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new UE,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class H3{Oo(e){}shutdown(){}}const zE="ConnectivityMonitor";class BE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(zE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(zE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ef=null;function A0(){return Ef===null?Ef=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ef++,"0x"+Ef.toString(16)}const Vy="RestConnection",q3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===um?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,t,n,s,o){const c=A0(),u=this.zo(e,t.toUriEncodedString());ye(Vy,`Sending RPC '${e}' ${c}:`,u,n);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:f}=new URL(u),g=Bo(f);return this.Jo(e,u,d,n,g).then((y=>(ye(Vy,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw No(Vy,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",n),y}))}Ho(e,t,n,s,o,c){return this.Go(e,t,n,s,o)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+wc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),n&&n.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const n=q3[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class G3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Pn="WebChannelConnection";class K3 extends $3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,s,o){const c=A0();return new Promise(((u,d)=>{const f=new pA;f.setWithCredentials(!0),f.listenOnce(yA.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Of.NO_ERROR:const y=f.getResponseJson();ye(Pn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case Of.TIMEOUT:ye(Pn,`RPC '${e}' ${c} timed out`),d(new ve(de.DEADLINE_EXCEEDED,"Request time out"));break;case Of.HTTP_ERROR:const v=f.getStatus();if(ye(Pn,`RPC '${e}' ${c} failed with status:`,v,"response text:",f.getResponseText()),v>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const E=w?.error;if(E&&E.status&&E.message){const D=(function(V){const H=V.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(H)>=0?H:de.UNKNOWN})(E.status);d(new ve(D,E.message))}else d(new ve(de.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ve(de.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ye(Pn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(s);ye(Pn,`RPC '${e}' ${c} sending request:`,s),f.send(t,"POST",g,n,15)}))}T_(e,t,n){const s=A0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=bA(),u=vA(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const g=o.join("");ye(Pn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const y=c.createWebChannel(g,d);this.I_(y);let v=!1,w=!1;const E=new G3({Yo:M=>{w?ye(Pn,`Not sending because RPC '${e}' stream ${s} is closed:`,M):(v||(ye(Pn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),ye(Pn,`RPC '${e}' stream ${s} sending:`,M),y.send(M))},Zo:()=>y.close()}),D=(M,V,H)=>{M.listen(V,(F=>{try{H(F)}catch(B){setTimeout((()=>{throw B}),0)}}))};return D(y,ju.EventType.OPEN,(()=>{w||(ye(Pn,`RPC '${e}' stream ${s} transport opened.`),E.o_())})),D(y,ju.EventType.CLOSE,(()=>{w||(w=!0,ye(Pn,`RPC '${e}' stream ${s} transport closed`),E.a_(),this.E_(y))})),D(y,ju.EventType.ERROR,(M=>{w||(w=!0,No(Pn,`RPC '${e}' stream ${s} transport errored. Name:`,M.name,"Message:",M.message),E.a_(new ve(de.UNAVAILABLE,"The operation could not be completed")))})),D(y,ju.EventType.MESSAGE,(M=>{if(!w){const V=M.data[0];Re(!!V,16349);const H=V,F=H?.error||H[0]?.error;if(F){ye(Pn,`RPC '${e}' stream ${s} received error:`,F);const B=F.status;let Y=(function(T){const S=on[T];if(S!==void 0)return y2(S)})(B),U=F.message;Y===void 0&&(Y=de.INTERNAL,U="Unknown error status: "+B+" with message "+F.message),w=!0,E.a_(new ve(Y,U)),y.close()}else ye(Pn,`RPC '${e}' stream ${s} received:`,V),E.u_(V)}})),D(u,_A.STAT_EVENT,(M=>{M.stat===s0.PROXY?ye(Pn,`RPC '${e}' stream ${s} detected buffering proxy`):M.stat===s0.NOPROXY&&ye(Pn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Y3(){return typeof window<"u"?window:null}function Hf(){return typeof document<"u"?document:null}function ng(r){return new QP(r,!0)}class W2{constructor(e,t,n=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-n);s>0&&ye("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const FE="PersistentStream";class X2{constructor(e,t,n,s,o,c,u,d){this.Mi=e,this.S_=n,this.b_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new W2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Kn(t.toString()),Kn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.D_===t&&this.G_(n,s)}),(n=>{e((()=>{const s=new ve(de.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{n((()=>this.z_(s)))})),this.stream.onMessage((s=>{n((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(FE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ye(FE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Q3 extends X2{constructor(e,t,n,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=JP(this.serializer,e),n=(function(o){if(!("targetChange"in o))return ke.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?ke.min():c.readTime?Qn(c.readTime):ke.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=b0(this.serializer),t.addTarget=(function(o,c){let u;const d=c.target;if(u=hm(d)?{documents:S2(o,d)}:{query:A2(o,d).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=b2(o,c.resumeToken);const f=_0(o,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(ke.min())>0){u.readTime=gc(o,c.snapshotVersion.toTimestamp());const f=_0(o,c.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const n=e3(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=b0(this.serializer),t.removeTarget=e,this.q_(t)}}class W3 extends X2{constructor(e,t,n,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ZP(e.writeResults,e.commitTime),n=Qn(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=b0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>gm(this.serializer,n)))};this.q_(t)}}class X3{}class J3 extends X3{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ve(de.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,v0(t,n),s,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(de.UNKNOWN,o.toString())}))}Ho(e,t,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(e,v0(t,n),s,c,u,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(de.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Z3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Kn(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Lo="RemoteStore";class e6{constructor(e,t,n,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{n.enqueueAndForget((async()=>{$o(this)&&(ye(Lo,"Restarting streams for network reachability change."),await(async function(d){const f=Ue(d);f.Ea.add(4),await Lh(f),f.Ra.set("Unknown"),f.Ea.delete(4),await rg(f)})(this))}))})),this.Ra=new Z3(n,s)}}async function rg(r){if($o(r))for(const e of r.da)await e(!0)}async function Lh(r){for(const e of r.da)await e(!1)}function J2(r,e){const t=Ue(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),R_(t)?I_(t):Tc(t).O_()&&A_(t,e))}function S_(r,e){const t=Ue(r),n=Tc(t);t.Ia.delete(e),n.O_()&&Z2(t,e),t.Ia.size===0&&(n.O_()?n.L_():$o(t)&&t.Ra.set("Unknown"))}function A_(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Tc(r).Y_(e)}function Z2(r,e){r.Va.Ue(e),Tc(r).Z_(e)}function I_(r){r.Va=new $P({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Tc(r).start(),r.Ra.ua()}function R_(r){return $o(r)&&!Tc(r).x_()&&r.Ia.size>0}function $o(r){return Ue(r).Ea.size===0}function eI(r){r.Va=void 0}async function t6(r){r.Ra.set("Online")}async function n6(r){r.Ia.forEach(((e,t)=>{A_(r,e)}))}async function r6(r,e){eI(r),R_(r)?(r.Ra.ha(e),I_(r)):r.Ra.set("Unknown")}async function i6(r,e,t){if(r.Ra.set("Online"),e instanceof v2&&e.state===2&&e.cause)try{await(async function(s,o){const c=o.cause;for(const u of o.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ia.delete(u),s.Va.removeTarget(u))})(r,e)}catch(n){ye(Lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await bm(r,n)}else if(e instanceof Bf?r.Va.Ze(e):e instanceof _2?r.Va.st(e):r.Va.tt(e),!t.isEqual(ke.min()))try{const n=await Y2(r.localStore);t.compareTo(n)>=0&&await(function(o,c){const u=o.Va.Tt(c);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(d.resumeToken,c))}})),u.targetMismatches.forEach(((d,f)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(cn.EMPTY_BYTE_STRING,g.snapshotVersion)),Z2(o,d);const y=new fs(g.target,d,f,g.sequenceNumber);A_(o,y)})),o.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(n){ye(Lo,"Failed to raise snapshot:",n),await bm(r,n)}}async function bm(r,e,t){if(!ka(e))throw e;r.Ea.add(1),await Lh(r),r.Ra.set("Offline"),t||(t=()=>Y2(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ye(Lo,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await rg(r)}))}function tI(r,e){return e().catch((t=>bm(r,t,e)))}async function Uh(r){const e=Ue(r),t=Aa(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vo;for(;s6(e);)try{const s=await z3(e.localStore,n);if(s===null){e.Ta.length===0&&t.L_();break}n=s.batchId,a6(e,s)}catch(s){await bm(e,s)}nI(e)&&rI(e)}function s6(r){return $o(r)&&r.Ta.length<10}function a6(r,e){r.Ta.push(e);const t=Aa(r);t.O_()&&t.X_&&t.ea(e.mutations)}function nI(r){return $o(r)&&!Aa(r).x_()&&r.Ta.length>0}function rI(r){Aa(r).start()}async function o6(r){Aa(r).ra()}async function l6(r){const e=Aa(r);for(const t of r.Ta)e.ea(t.mutations)}async function c6(r,e,t){const n=r.Ta.shift(),s=m_.from(n,e,t);await tI(r,(()=>r.remoteSyncer.applySuccessfulWrite(s))),await Uh(r)}async function u6(r,e){e&&Aa(r).X_&&await(async function(n,s){if((function(c){return FP(c)&&c!==de.ABORTED})(s.code)){const o=n.Ta.shift();Aa(n).B_(),await tI(n,(()=>n.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Uh(n)}})(r,e),nI(r)&&rI(r)}async function HE(r,e){const t=Ue(r);t.asyncQueue.verifyOperationInProgress(),ye(Lo,"RemoteStore received new credentials");const n=$o(t);t.Ea.add(3),await Lh(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await rg(t)}async function h6(r,e){const t=Ue(r);e?(t.Ea.delete(2),await rg(t)):e||(t.Ea.add(2),await Lh(t),t.Ra.set("Unknown"))}function Tc(r){return r.ma||(r.ma=(function(t,n,s){const o=Ue(t);return o.sa(),new Q3(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:t6.bind(null,r),t_:n6.bind(null,r),r_:r6.bind(null,r),H_:i6.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),R_(r)?I_(r):r.Ra.set("Unknown")):(await r.ma.stop(),eI(r))}))),r.ma}function Aa(r){return r.fa||(r.fa=(function(t,n,s){const o=Ue(t);return o.sa(),new W3(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:o6.bind(null,r),r_:u6.bind(null,r),ta:l6.bind(null,r),na:c6.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Uh(r)):(await r.fa.stop(),r.Ta.length>0&&(ye(Lo,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class C_{constructor(e,t,n,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=o,this.deferred=new Pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,o){const c=Date.now()+n,u=new C_(e,t,c,s,o);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function N_(r,e){if(Kn("AsyncQueue",`${e}: ${r}`),ka(r))return new ve(de.UNAVAILABLE,`${e}: ${r}`);throw r}class tc{static emptySet(e){return new tc(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||we.comparator(t.key,n.key):(t,n)=>we.comparator(t.key,n.key),this.keyedMap=Vu(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof tc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new tc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class qE{constructor(){this.ga=new Lt(we.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class pc{constructor(e,t,n,s,o,c,u,d,f){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,n,s,o){const c=[];return t.forEach((u=>{c.push({type:0,doc:u})})),new pc(e,t,tc.emptySet(t),c,n,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Km(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}class d6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class f6{constructor(){this.queries=$E(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const s=Ue(t),o=s.queries;s.queries=$E(),o.forEach(((c,u)=>{for(const d of u.Sa)d.onError(n)}))})(this,new ve(de.ABORTED,"Firestore shutting down"))}}function $E(){return new Ss((r=>i2(r)),Km)}async function k_(r,e){const t=Ue(r);let n=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(n=2):(o=new d6,n=e.Da()?0:1);try{switch(n){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const u=N_(c,`Initialization of query '${Gl(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&O_(t)}async function D_(r,e){const t=Ue(r),n=e.query;let s=3;const o=t.queries.get(n);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function m6(r,e){const t=Ue(r);let n=!1;for(const s of e){const o=s.query,c=t.queries.get(o);if(c){for(const u of c.Sa)u.Fa(s)&&(n=!0);c.wa=s}}n&&O_(t)}function g6(r,e,t){const n=Ue(r),s=n.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);n.queries.delete(e)}function O_(r){r.Ca.forEach((e=>{e.next()}))}var I0,GE;(GE=I0||(I0={})).Ma="default",GE.Cache="cache";class M_{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new pc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=pc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==I0.Cache}}class iI{constructor(e){this.key=e}}class sI{constructor(e){this.key=e}}class p6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ke(),this.mutatedKeys=Ke(),this.eu=s2(e),this.tu=new tc(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new qE,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,y)=>{const v=s.get(g),w=jh(this.query,y)?y:null,E=!!v&&this.mutatedKeys.has(v.key),D=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let M=!1;v&&w?v.data.isEqual(w.data)?E!==D&&(n.track({type:3,doc:w}),M=!0):this.su(v,w)||(n.track({type:2,doc:w}),M=!0,(d&&this.eu(w,d)>0||f&&this.eu(w,f)<0)&&(u=!0)):!v&&w?(n.track({type:0,doc:w}),M=!0):v&&!w&&(n.track({type:1,doc:v}),M=!0,(d||f)&&(u=!0)),M&&(w?(c=c.add(w),o=D?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),n.track({type:1,doc:g})}return{tu:c,iu:n,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,y)=>(function(w,E){const D=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:M})}};return D(w)-D(E)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(n),s=s??!1;const u=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,c.length!==0||f?{snapshot:new pc(this.query,e.tu,o,c,e.mutatedKeys,d===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ke(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new sI(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new iI(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return pc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const P_="SyncEngine";class y6{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class _6{constructor(e){this.key=e,this.hu=!1}}class v6{constructor(e,t,n,s,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ss((u=>i2(u)),Km),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(we.comparator),this.Au=new Map,this.Ru=new b_,this.Vu={},this.mu=new Map,this.fu=Vo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function b6(r,e,t=!0){const n=hI(r);let s;const o=n.Tu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await aI(n,e,t,!0),s}async function w6(r,e){const t=hI(r);await aI(t,e,!0,!1)}async function aI(r,e,t,n){const s=await B3(r.localStore,Ur(e)),o=s.targetId,c=r.sharedClientState.addLocalQueryTarget(o,t);let u;return n&&(u=await x6(r,e,o,c==="current",s.resumeToken)),r.isPrimaryClient&&t&&J2(r.remoteStore,s),u}async function x6(r,e,t,n,s){r.pu=(y,v,w)=>(async function(D,M,V,H){let F=M.view.ru(V);F.Cs&&(F=await LE(D.localStore,M.query,!1).then((({documents:R})=>M.view.ru(R,F))));const B=H&&H.targetChanges.get(M.targetId),Y=H&&H.targetMismatches.get(M.targetId)!=null,U=M.view.applyChanges(F,D.isPrimaryClient,B,Y);return YE(D,M.targetId,U.au),U.snapshot})(r,y,v,w);const o=await LE(r.localStore,e,!0),c=new p6(e,o.Qs),u=c.ru(o.documents),d=Vh.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),f=c.applyChanges(u,r.isPrimaryClient,d);YE(r,t,f.au);const g=new y6(e,t,c);return r.Tu.set(e,g),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),f.snapshot}async function E6(r,e,t){const n=Ue(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);if(o.length>1)return n.Iu.set(s.targetId,o.filter((c=>!Km(c,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await S0(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),t&&S_(n.remoteStore,s.targetId),R0(n,s.targetId)})).catch(qo)):(R0(n,s.targetId),await S0(n.localStore,s.targetId,!0))}async function T6(r,e){const t=Ue(r),n=t.Tu.get(e),s=t.Iu.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),S_(t.remoteStore,n.targetId))}async function S6(r,e,t){const n=dI(r);try{const s=await(function(c,u){const d=Ue(c),f=bt.now(),g=u.reduce(((w,E)=>w.add(E.key)),Ke());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let E=_r(),D=Ke();return d.Ns.getEntries(w,g).next((M=>{E=M,E.forEach(((V,H)=>{H.isValidDocument()||(D=D.add(V))}))})).next((()=>d.localDocuments.getOverlayedDocuments(w,E))).next((M=>{y=M;const V=[];for(const H of u){const F=zP(H,y.get(H.key).overlayedDocument);F!=null&&V.push(new As(H.key,F,QA(F.value.mapValue),Un.exists(!0)))}return d.mutationQueue.addMutationBatch(w,f,V,u)})).next((M=>{v=M;const V=M.applyToLocalDocumentSet(y,D);return d.documentOverlayCache.saveOverlays(w,M.batchId,V)}))})).then((()=>({batchId:v.batchId,changes:o2(y)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),(function(c,u,d){let f=c.Vu[c.currentUser.toKey()];f||(f=new Lt(Le)),f=f.insert(u,d),c.Vu[c.currentUser.toKey()]=f})(n,s.batchId,t),await zh(n,s.changes),await Uh(n.remoteStore)}catch(s){const o=N_(s,"Failed to persist write");t.reject(o)}}async function oI(r,e){const t=Ue(r);try{const n=await L3(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const c=t.Au.get(o);c&&(Re(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Re(c.hu,14607):s.removedDocuments.size>0&&(Re(c.hu,42227),c.hu=!1))})),await zh(t,n,e)}catch(n){await qo(n)}}function KE(r,e,t){const n=Ue(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.Tu.forEach(((o,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(c,u){const d=Ue(c);d.onlineState=u;let f=!1;d.queries.forEach(((g,y)=>{for(const v of y.Sa)v.va(u)&&(f=!0)})),f&&O_(d)})(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function A6(r,e,t){const n=Ue(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Au.get(e),o=s&&s.key;if(o){let c=new Lt(we.comparator);c=c.insert(o,qt.newNoDocument(o,ke.min()));const u=Ke().add(o),d=new Jm(ke.min(),new Map,new Lt(Le),c,u);await oI(n,d),n.du=n.du.remove(o),n.Au.delete(e),j_(n)}else await S0(n.localStore,e,!1).then((()=>R0(n,e,t))).catch(qo)}async function I6(r,e){const t=Ue(r),n=e.batch.batchId;try{const s=await V3(t.localStore,e);cI(t,n,null),lI(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await zh(t,s)}catch(s){await qo(s)}}async function R6(r,e,t){const n=Ue(r);try{const s=await(function(c,u){const d=Ue(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return d.mutationQueue.lookupMutationBatch(f,u).next((y=>(Re(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>d.localDocuments.getDocuments(f,g)))}))})(n.localStore,e);cI(n,e,t),lI(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await zh(n,s)}catch(s){await qo(s)}}function lI(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function cI(r,e,t){const n=Ue(r);let s=n.Vu[n.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function R0(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||uI(r,n)}))}function uI(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(S_(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),j_(r))}function YE(r,e,t){for(const n of t)n instanceof iI?(r.Ru.addReference(n.key,e),C6(r,n)):n instanceof sI?(ye(P_,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||uI(r,n.key)):Se(19791,{wu:n})}function C6(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(ye(P_,"New document in limbo: "+t),r.Eu.add(n),j_(r))}function j_(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new we(ft.fromString(e)),n=r.fu.next();r.Au.set(n,new _6(t)),r.du=r.du.insert(t,n),J2(r.remoteStore,new fs(Ur(Ph(t.path)),n,"TargetPurposeLimboResolution",Lr.ce))}}async function zh(r,e,t){const n=Ue(r),s=[],o=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,d)=>{c.push(n.pu(d,e,t).then((f=>{if((f||t)&&n.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(d.targetId)?.current;n.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(f){s.push(f);const g=E_.As(d.targetId,f);o.push(g)}})))})),await Promise.all(c),n.Pu.H_(s),await(async function(d,f){const g=Ue(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>re.forEach(f,(v=>re.forEach(v.Es,(w=>g.persistence.referenceDelegate.addReference(y,v.targetId,w))).next((()=>re.forEach(v.ds,(w=>g.persistence.referenceDelegate.removeReference(y,v.targetId,w)))))))))}catch(y){if(!ka(y))throw y;ye(T_,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const w=g.Ms.get(v),E=w.snapshotVersion,D=w.withLastLimboFreeSnapshotVersion(E);g.Ms=g.Ms.insert(v,D)}}})(n.localStore,o))}async function N6(r,e){const t=Ue(r);if(!t.currentUser.isEqual(e)){ye(P_,"User change. New user:",e.toKey());const n=await K2(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new ve(de.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await zh(t,n.Ls)}}function k6(r,e){const t=Ue(r),n=t.Au.get(e);if(n&&n.hu)return Ke().add(n.key);{let s=Ke();const o=t.Iu.get(e);if(!o)return s;for(const c of o){const u=t.Tu.get(c);s=s.unionWith(u.view.nu)}return s}}function hI(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=oI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=k6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A6.bind(null,e),e.Pu.H_=m6.bind(null,e.eventManager),e.Pu.yu=g6.bind(null,e.eventManager),e}function dI(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R6.bind(null,e),e}class ph{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ng(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return G2(this.persistence,new $2,e.initialUser,this.serializer)}Cu(e){return new w_(tg.mi,this.serializer)}Du(e){return new Q2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ph.provider={build:()=>new ph};class D6 extends ph{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Re(this.persistence.referenceDelegate instanceof vm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new z2(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new w_((n=>vm.mi(n,t)),this.serializer)}}class O6 extends ph{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await dI(this.xu.syncEngine),await Uh(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return G2(this.persistence,new $2,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new z2(n,e.asyncQueue,t)}Mu(e,t){const n=new U5(t,this.persistence);return new L5(e.asyncQueue,n)}Cu(e){const t=O3(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new x_(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Y3(),Hf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Q2}}class wm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>KE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=N6.bind(null,this.syncEngine),await h6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new f6})()}createDatastore(e){const t=ng(e.databaseInfo.databaseId),n=(function(o){return new K3(o)})(e.databaseInfo);return(function(o,c,u,d){return new J3(o,c,u,d)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,s,o,c,u){return new e6(n,s,o,c,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>KE(this.syncEngine,t,0)),(function(){return BE.v()?new BE:new H3})())}createSyncEngine(e,t){return(function(s,o,c,u,d,f,g){const y=new v6(s,o,c,u,d,f);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const n=Ue(t);ye(Lo,"RemoteStore shutting down."),n.Ea.add(5),await Lh(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}wm.provider={build:()=>new wm};class V_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Kn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ia="FirestoreClient";class M6{constructor(e,t,n,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=Nn.UNAUTHENTICATED,this.clientId=t_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,(async c=>{ye(Ia,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>(ye(Ia,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=N_(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Ly(r,e){r.asyncQueue.verifyOperationInProgress(),ye(Ia,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async s=>{n.isEqual(s)||(await K2(e.localStore,s),n=s)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function QE(r,e){r.asyncQueue.verifyOperationInProgress();const t=await P6(r);ye(Ia,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>HE(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,s)=>HE(e.remoteStore,s))),r._onlineComponents=e}async function P6(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ye(Ia,"Using user provided OfflineComponentProvider");try{await Ly(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===de.FAILED_PRECONDITION||s.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;No("Error using user provided cache. Falling back to memory cache: "+t),await Ly(r,new ph)}}else ye(Ia,"Using default OfflineComponentProvider"),await Ly(r,new D6(void 0));return r._offlineComponents}async function fI(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ye(Ia,"Using user provided OnlineComponentProvider"),await QE(r,r._uninitializedComponentsProvider._online)):(ye(Ia,"Using default OnlineComponentProvider"),await QE(r,new wm))),r._onlineComponents}function j6(r){return fI(r).then((e=>e.syncEngine))}async function xm(r){const e=await fI(r),t=e.eventManager;return t.onListen=b6.bind(null,e.syncEngine),t.onUnlisten=E6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=w6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=T6.bind(null,e.syncEngine),t}function V6(r,e,t={}){const n=new Pi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,d,f){const g=new V_({next:v=>{g.Nu(),c.enqueueAndForget((()=>D_(o,y)));const w=v.docs.has(u);!w&&v.fromCache?f.reject(new ve(de.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&d&&d.source==="server"?f.reject(new ve(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new M_(Ph(u.path),g,{includeMetadataChanges:!0,qa:!0});return k_(o,y)})(await xm(r),r.asyncQueue,e,t,n))),n.promise}function L6(r,e,t={}){const n=new Pi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,d,f){const g=new V_({next:v=>{g.Nu(),c.enqueueAndForget((()=>D_(o,y))),v.fromCache&&d.source==="server"?f.reject(new ve(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new M_(u,g,{includeMetadataChanges:!0,qa:!0});return k_(o,y)})(await xm(r),r.asyncQueue,e,t,n))),n.promise}function mI(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const WE=new Map;const gI="firestore.googleapis.com",XE=!0;class JE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gI,this.ssl=XE}else this.host=e.host,this.ssl=e.ssl??XE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=j2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<p3)throw new ve(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}O5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mI(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ig{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new E5;switch(n.type){case"firstParty":return new I5(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ve(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=WE.get(t);n&&(ye("ComponentProvider","Removing Datastore"),WE.delete(t),n.terminate())})(this),Promise.resolve()}}function U6(r,e,t,n={}){r=Yn(r,ig);const s=Bo(e),o=r._getSettings(),c={...o,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${t}`;s&&(B0(`https://${u}`),F0("Firestore",!0)),o.host!==gI&&o.host!==u&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:u,ssl:s,emulatorOptions:n};if(!ys(d,c)&&(r._setSettings(d),n.mockUserToken)){let f,g;if(typeof n.mockUserToken=="string")f=n.mockUserToken,g=Nn.MOCK_USER;else{f=TS(n.mockUserToken,r._app?.options.projectId);const y=n.mockUserToken.sub||n.mockUserToken.user_id;if(!y)throw new ve(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Nn(y)}r._authCredentials=new T5(new xA(f,g))}}class Is{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Is(this.firestore,e,this._query)}}class $t{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ba(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Dh(t,$t._jsonSchema))return new $t(e,n||null,new we(ft.fromString(t.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:ln("string",$t._jsonSchemaVersion),referencePath:ln("string")};class ba extends Is{constructor(e,t,n){super(e,t,Ph(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new we(e))}withConverter(e){return new ba(this.firestore,e,this._path)}}function Bn(r,e,...t){if(r=Xt(r),TA("collection","path",e),r instanceof ig){const n=ft.fromString(e,...t);return Fx(n),new ba(r,null,n)}{if(!(r instanceof $t||r instanceof ba))throw new ve(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ft.fromString(e,...t));return Fx(n),new ba(r.firestore,null,n)}}function kt(r,e,...t){if(r=Xt(r),arguments.length===1&&(e=t_.newId()),TA("doc","path",e),r instanceof ig){const n=ft.fromString(e,...t);return Bx(n),new $t(r,null,new we(n))}{if(!(r instanceof $t||r instanceof ba))throw new ve(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ft.fromString(e,...t));return Bx(n),new $t(r.firestore,r instanceof ba?r.converter:null,new we(n))}}const ZE="AsyncQueue";class eT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new W2(this,"async_queue_retry"),this._c=()=>{const n=Hf();n&&ye(ZE,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=Hf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Hf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Pi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ka(e))throw e;ye(ZE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Kn("INTERNAL UNHANDLED ERROR: ",tT(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=C_.createAndSchedule(this,e,t,n,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Se(47125,{Pc:tT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function tT(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function nT(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of n)if(o in s&&typeof s[o]=="function")return!0;return!1})(r,["next","error","complete"])}class Ui extends ig{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new eT,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new eT(e),this._firestoreClient=void 0,await e}}}function z6(r,e){const t=typeof r=="object"?r:$0(),n=typeof r=="string"?r:um,s=Pm(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const o=wS("firestore");o&&U6(s,...o)}return s}function sg(r){if(r._terminated)throw new ve(de.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||pI(r),r._firestoreClient}function pI(r){const e=r._freezeSettings(),t=(function(s,o,c,u){return new mP(s,o,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,mI(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new M6(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(r._componentsProvider))}function B6(r,e){No("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return F6(r,wm.provider,{build:n=>new O6(n,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function F6(r,e,t){if((r=Yn(r,Ui))._firestoreClient||r._terminated)throw new ve(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new ve(de.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},pI(r)}class Vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vr(cn.fromBase64String(e))}catch(t){throw new ve(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vr(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dh(e,Vr._jsonSchema))return Vr.fromBase64String(e.bytes)}}Vr._jsonSchemaVersion="firestore/bytes/1.0",Vr._jsonSchema={type:ln("string",Vr._jsonSchemaVersion),bytes:ln("string")};class ag{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sc{constructor(e){this._methodName=e}}class ji{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ji._jsonSchemaVersion}}static fromJSON(e){if(Dh(e,ji._jsonSchema))return new ji(e.latitude,e.longitude)}}ji._jsonSchemaVersion="firestore/geoPoint/1.0",ji._jsonSchema={type:ln("string",ji._jsonSchemaVersion),latitude:ln("number"),longitude:ln("number")};class Vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,s){if(n.length!==s.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dh(e,Vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vi(e.vectorValues);throw new ve(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vi._jsonSchemaVersion="firestore/vectorValue/1.0",Vi._jsonSchema={type:ln("string",Vi._jsonSchemaVersion),vectorValues:ln("object")};const H6=/^__.*__$/;class q6{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new As(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ec(e,this.data,t,this.fieldTransforms)}}class yI{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new As(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _I(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:r})}}class og{constructor(e,t,n,s,o,c){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new og({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Em(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(_I(this.Ac)&&H6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $6{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ng(e)}Cc(e,t,n,s=!1){return new og({Ac:e,methodName:t,Dc:n,path:Ut.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lg(r){const e=r._freezeSettings(),t=ng(r._databaseId);return new $6(r._databaseId,!!e.ignoreUndefinedProperties,t)}function vI(r,e,t,n,s,o={}){const c=r.Cc(o.merge||o.mergeFields?2:0,e,t,s);B_("Data must be an object, but it was:",c,n);const u=wI(n,c);let d,f;if(o.merge)d=new ar(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const v=C0(e,y,t);if(!c.contains(v))throw new ve(de.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);EI(g,v)||g.push(v)}d=new ar(g),f=c.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,f=c.fieldTransforms;return new q6(new Vn(u),d,f)}class cg extends Sc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cg}}function bI(r,e,t){return new og({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class L_ extends Sc{_toFieldTransform(e){return new Qm(e.path,new mc)}isEqual(e){return e instanceof L_}}class U_ extends Sc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=bI(this,e,!0),n=this.vc.map((o=>Go(o,t))),s=new Oo(n);return new Qm(e.path,s)}isEqual(e){return e instanceof U_&&ys(this.vc,e.vc)}}class z_ extends Sc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=bI(this,e,!0),n=this.vc.map((o=>Go(o,t))),s=new Mo(n);return new Qm(e.path,s)}isEqual(e){return e instanceof z_&&ys(this.vc,e.vc)}}function G6(r,e,t,n){const s=r.Cc(1,e,t);B_("Data must be an object, but it was:",s,n);const o=[],c=Vn.empty();Da(n,((d,f)=>{const g=F_(e,d,t);f=Xt(f);const y=s.yc(g);if(f instanceof cg)o.push(g);else{const v=Go(f,y);v!=null&&(o.push(g),c.set(g,v))}}));const u=new ar(o);return new yI(c,u,s.fieldTransforms)}function K6(r,e,t,n,s,o){const c=r.Cc(1,e,t),u=[C0(e,n,t)],d=[s];if(o.length%2!=0)throw new ve(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(C0(e,o[v])),d.push(o[v+1]);const f=[],g=Vn.empty();for(let v=u.length-1;v>=0;--v)if(!EI(f,u[v])){const w=u[v];let E=d[v];E=Xt(E);const D=c.yc(w);if(E instanceof cg)f.push(w);else{const M=Go(E,D);M!=null&&(f.push(w),g.set(w,M))}}const y=new ar(f);return new yI(g,y,c.fieldTransforms)}function Y6(r,e,t,n=!1){return Go(t,r.Cc(n?4:3,e))}function Go(r,e){if(xI(r=Xt(r)))return B_("Unsupported field value:",e,r),wI(r,e);if(r instanceof Sc)return(function(n,s){if(!_I(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,s){const o=[];let c=0;for(const u of n){let d=Go(u,s.wc(c));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),c++}return{arrayValue:{values:o}}})(r,e)}return(function(n,s){if((n=Xt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return MP(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=bt.fromDate(n);return{timestampValue:gc(s.serializer,o)}}if(n instanceof bt){const o=new bt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:gc(s.serializer,o)}}if(n instanceof ji)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Vr)return{bytesValue:b2(s.serializer,n._byteString)};if(n instanceof $t){const o=s.databaseId,c=n.firestore._databaseId;if(!c.isEqual(o))throw s.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:y_(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Vi)return(function(c,u){return{mapValue:{fields:{[c_]:{stringValue:u_},[uc]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return d_(u.serializer,f)}))}}}}}})(n,s);throw s.Sc(`Unsupported field value: ${Um(n)}`)})(r,e)}function wI(r,e){const t={};return zA(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Da(r,((n,s)=>{const o=Go(s,e.mc(n));o!=null&&(t[n]=o)})),{mapValue:{fields:t}}}function xI(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof bt||r instanceof ji||r instanceof Vr||r instanceof $t||r instanceof Sc||r instanceof Vi)}function B_(r,e,t){if(!xI(t)||!SA(t)){const n=Um(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function C0(r,e,t){if((e=Xt(e))instanceof ag)return e._internalPath;if(typeof e=="string")return F_(r,e);throw Em("Field path arguments must be of type string or ",r,!1,void 0,t)}const Q6=new RegExp("[~\\*/\\[\\]]");function F_(r,e,t){if(e.search(Q6)>=0)throw Em(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ag(...e.split("."))._internalPath}catch{throw Em(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Em(r,e,t,n,s){const o=n&&!n.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${n}`),c&&(d+=` in document ${s}`),d+=")"),new ve(de.INVALID_ARGUMENT,u+r+d)}function EI(r,e){return r.some((t=>t.isEqual(e)))}class TI{constructor(e,t,n,s,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new W6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ug("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class W6 extends TI{data(){return super.data()}}function ug(r,e){return typeof e=="string"?F_(r,e):e instanceof ag?e._internalPath:e._delegate._internalPath}function SI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ve(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class H_{}class q_ extends H_{}function Ra(r,e,...t){let n=[];e instanceof H_&&n.push(e),n=n.concat(t),(function(o){const c=o.filter((d=>d instanceof $_)).length,u=o.filter((d=>d instanceof hg)).length;if(c>1||c>0&&u>0)throw new ve(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)r=s._apply(r);return r}class hg extends q_{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new hg(e,t,n)}_apply(e){const t=this._parse(e);return AI(e._query,t),new Is(e.firestore,e.converter,y0(e._query,t))}_parse(e){const t=lg(e.firestore);return(function(o,c,u,d,f,g,y){let v;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ve(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){sT(y,g);const E=[];for(const D of y)E.push(iT(d,o,D));v={arrayValue:{values:E}}}else v=iT(d,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||sT(y,g),v=Y6(u,c,y,g==="in"||g==="not-in");return Ze.create(f,g,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ko(r,e,t){const n=e,s=ug("where",r);return hg._create(s,n,t)}class $_ extends H_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $_(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:wt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let c=s;const u=o.getFlattenedFilters();for(const d of u)AI(c,d),c=y0(c,d)})(e._query,t),new Is(e.firestore,e.converter,y0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class G_ extends q_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new G_(e,t)}_apply(e){const t=(function(s,o,c){if(s.startAt!==null)throw new ve(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ve(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mh(o,c)})(e._query,this._field,this._direction);return new Is(e.firestore,e.converter,(function(s,o){const c=s.explicitOrderBy.concat([o]);return new xc(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function X6(r,e="asc"){const t=e,n=ug("orderBy",r);return G_._create(n,t)}class K_ extends q_{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new K_(e,t,n)}_apply(e){return new Is(e.firestore,e.converter,fm(e._query,this._limit,this._limitType))}}function rT(r){return M5("limit",r),K_._create("limit",r,"F")}function iT(r,e,t){if(typeof(t=Xt(t))=="string"){if(t==="")throw new ve(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!r2(e)&&t.indexOf("/")!==-1)throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(ft.fromString(t));if(!we.isDocumentKey(n))throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return dh(r,new we(n))}if(t instanceof $t)return dh(r,t._key);throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Um(t)}.`)}function sT(r,e){if(!Array.isArray(r)||r.length===0)throw new ve(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AI(r,e){const t=(function(s,o){for(const c of s)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ve(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class J6{convertValue(e,t="none"){switch(Ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Da(e,((s,o)=>{n[s]=this.convertValue(o,t)})),n}convertVectorValue(e){const t=e.fields?.[uc].arrayValue?.values?.map((n=>Vt(n.doubleValue)));return new Vi(t)}convertGeoPoint(e){return new ji(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=$m(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(uh(e));default:return null}}convertTimestamp(e){const t=bs(e);return new bt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ft.fromString(e);Re(N2(n),9688,{name:e});const s=new ko(n.get(1),n.get(3)),o=new we(n.popFirst(5));return s.isEqual(t)||Kn(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function II(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class zu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xo extends TI{constructor(e,t,n,s,o,c){super(e,t,n,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(ug("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=xo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",xo._jsonSchema={type:ln("string",xo._jsonSchemaVersion),bundleSource:ln("string","DocumentSnapshot"),bundleName:ln("string"),bundle:ln("string")};class qf extends xo{data(e={}){return super.data(e)}}class Eo{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new zu(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new qf(this._firestore,this._userDataWriter,n.key,n,new zu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((u=>{const d=new qf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new zu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new qf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new zu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:Z6(u.type),doc:d,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=t_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Z6(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:r})}}function xs(r){r=Yn(r,$t);const e=Yn(r.firestore,Ui);return V6(sg(e),r._key).then((t=>RI(e,r,t)))}Eo._jsonSchemaVersion="firestore/querySnapshot/1.0",Eo._jsonSchema={type:ln("string",Eo._jsonSchemaVersion),bundleSource:ln("string","QuerySnapshot"),bundleName:ln("string"),bundle:ln("string")};class Y_ extends J6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}}function yc(r){r=Yn(r,Is);const e=Yn(r.firestore,Ui),t=sg(e),n=new Y_(e);return SI(r._query),L6(t,r._query).then((s=>new Eo(e,n,r,s)))}function N0(r,e,t){r=Yn(r,$t);const n=Yn(r.firestore,Ui),s=II(r.converter,e,t);return fg(n,[vI(lg(n),"setDoc",r._key,s,r.converter!==null,t).toMutation(r._key,Un.none())])}function br(r,e,t,...n){r=Yn(r,$t);const s=Yn(r.firestore,Ui),o=lg(s);let c;return c=typeof(e=Xt(e))=="string"||e instanceof ag?K6(o,"updateDoc",r._key,e,t,n):G6(o,"updateDoc",r._key,e),fg(s,[c.toMutation(r._key,Un.exists(!0))])}function dg(r){return fg(Yn(r.firestore,Ui),[new Xm(r._key,Un.none())])}function Bh(r,e){const t=Yn(r.firestore,Ui),n=kt(r),s=II(r.converter,e);return fg(t,[vI(lg(r.firestore),"addDoc",n._key,s,r.converter!==null,{}).toMutation(n._key,Un.exists(!1))]).then((()=>n))}function To(r,...e){r=Xt(r);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||nT(e[n])||(t=e[n++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(nT(e[n])){const d=e[n];e[n]=d.next?.bind(d),e[n+1]=d.error?.bind(d),e[n+2]=d.complete?.bind(d)}let o,c,u;if(r instanceof $t)c=Yn(r.firestore,Ui),u=Ph(r._key.path),o={next:d=>{e[n]&&e[n](RI(c,r,d))},error:e[n+1],complete:e[n+2]};else{const d=Yn(r,Is);c=Yn(d.firestore,Ui),u=d._query;const f=new Y_(c);o={next:g=>{e[n]&&e[n](new Eo(c,f,d,g))},error:e[n+1],complete:e[n+2]},SI(r._query)}return(function(f,g,y,v){const w=new V_(v),E=new M_(g,w,y);return f.asyncQueue.enqueueAndForget((async()=>k_(await xm(f),E))),()=>{w.Nu(),f.asyncQueue.enqueueAndForget((async()=>D_(await xm(f),E)))}})(sg(c),u,s,o)}function fg(r,e){return(function(n,s){const o=new Pi;return n.asyncQueue.enqueueAndForget((async()=>S6(await j6(n),s,o))),o.promise})(sg(r),e)}function RI(r,e,t){const n=t.docs.get(e._key),s=new Y_(r);return new xo(r,s,e._key,n,new zu(t.hasPendingWrites,t.fromCache),e.converter)}function zr(){return new L_("serverTimestamp")}function Q_(...r){return new U_("arrayUnion",r)}function CI(...r){return new z_("arrayRemove",r)}(function(e,t=!0){(function(s){wc=s})(Fo),Ao(new Ea("firestore",((n,{instanceIdentifier:s,options:o})=>{const c=n.getProvider("app").getImmediate(),u=new Ui(new S5(n.getProvider("auth-internal")),new R5(c,n.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ve(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ko(f.options.projectId,g)})(c,s),c);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Di(Vx,Lx,e),Di(Vx,Lx,"esm2020")})();const NI="firebasestorage.googleapis.com",ej="storageBucket",tj=120*1e3,nj=600*1e3;class Hi extends Bi{constructor(e,t,n=0){super(Uy(e),`Firebase Storage: ${t} (${Uy(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Uy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zi;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zi||(zi={}));function Uy(r){return"storage/"+r}function rj(){const r="An unknown error occurred, please check the error payload for server response.";return new Hi(zi.UNKNOWN,r)}function ij(){return new Hi(zi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function sj(){return new Hi(zi.CANCELED,"User canceled the upload/download.")}function aj(r){return new Hi(zi.INVALID_URL,"Invalid URL '"+r+"'.")}function oj(r){return new Hi(zi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function aT(r){return new Hi(zi.INVALID_ARGUMENT,r)}function kI(){return new Hi(zi.APP_DELETED,"The Firebase app was deleted.")}function lj(r){return new Hi(zi.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class ni{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=ni.makeFromUrl(e,t)}catch{return new ni(e,"")}if(n.path==="")return n;throw oj(e)}static makeFromUrl(e,t){let n=null;const s="([A-Za-z0-9.\\-_]+)";function o(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+s+c,"i"),d={bucket:1,path:3};function f(B){B.path_=decodeURIComponent(B.path)}const g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${y}/${g}/b/${s}/o${v}`,"i"),E={bucket:1,path:3},D=t===NI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",V=new RegExp(`^https?://${D}/${s}/${M}`,"i"),F=[{regex:u,indices:d,postModify:o},{regex:w,indices:E,postModify:f},{regex:V,indices:{bucket:1,path:2},postModify:f}];for(let B=0;B<F.length;B++){const Y=F[B],U=Y.regex.exec(e);if(U){const R=U[Y.indices.bucket];let T=U[Y.indices.path];T||(T=""),n=new ni(R,T),Y.postModify(n);break}}if(n==null)throw aj(e);return n}}class cj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function uj(r,e,t){let n=1,s=null,o=null,c=!1,u=0;function d(){return u===2}let f=!1;function g(...M){f||(f=!0,e.apply(null,M))}function y(M){s=setTimeout(()=>{s=null,r(w,d())},M)}function v(){o&&clearTimeout(o)}function w(M,...V){if(f){v();return}if(M){v(),g.call(null,M,...V);return}if(d()||c){v(),g.call(null,M,...V);return}n<64&&(n*=2);let F;u===1?(u=2,F=0):F=(n+Math.random())*1e3,y(F)}let E=!1;function D(M){E||(E=!0,v(),!f&&(s!==null?(M||(u=2),clearTimeout(s),y(0)):M||(u=1)))}return y(0),o=setTimeout(()=>{c=!0,D(!0)},t),D}function hj(r){r(!1)}function dj(r){return r!==void 0}function oT(r,e,t,n){if(n<e)throw aT(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw aT(`Invalid value for '${r}'. Expected ${t} or less.`)}function fj(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const s=e(n)+"="+e(r[n]);t=t+s+"&"}return t=t.slice(0,-1),t}var Tm;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Tm||(Tm={}));function mj(r,e){const t=r>=500&&r<600,s=[408,429].indexOf(r)!==-1,o=e.indexOf(r)!==-1;return t||s||o}class gj{constructor(e,t,n,s,o,c,u,d,f,g,y,v=!0,w=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,D)=>{this.resolve_=E,this.reject_=D,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new Tf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const d=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===Tm.NO_ERROR,d=o.getStatus();if(!u||mj(d,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===Tm.ABORT;n(!1,new Tf(!1,null,g));return}const f=this.successCodes_.indexOf(d)!==-1;n(!0,new Tf(f,o))})},t=(n,s)=>{const o=this.resolve_,c=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());dj(d)?o(d):o()}catch(d){c(d)}else if(u!==null){const d=rj();d.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,d)):c(d)}else if(s.canceled){const d=this.appDelete_?kI():sj();c(d)}else{const d=ij();c(d)}};this.canceled_?t(!1,new Tf(!1,null,!0)):this.backoffId_=uj(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&hj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Tf{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function pj(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function yj(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _j(r,e){e&&(r["X-Firebase-GMPID"]=e)}function vj(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function bj(r,e,t,n,s,o,c=!0,u=!1){const d=fj(r.urlParams),f=r.url+d,g=Object.assign({},r.headers);return _j(g,e),pj(g,t),yj(g,o),vj(g,n),new gj(f,r.method,g,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s,c,u)}function wj(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function xj(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}class Sm{constructor(e,t){this._service=e,t instanceof ni?this._location=t:this._location=ni.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Sm(e,t)}get root(){const e=new ni(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xj(this._location.path)}get storage(){return this._service}get parent(){const e=wj(this._location.path);if(e===null)return null;const t=new ni(this._location.bucket,e);return new Sm(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw lj(e)}}function lT(r,e){const t=e?.[ej];return t==null?null:ni.makeFromBucketSpec(t,r)}function Ej(r,e,t,n={}){r.host=`${e}:${t}`;const s=Bo(e);s&&(B0(`https://${r.host}/b`),F0("Storage",!0)),r._isUsingEmulator=!0,r._protocol=s?"https":"http";const{mockUserToken:o}=n;o&&(r._overrideAuthToken=typeof o=="string"?o:TS(o,r.app.options.projectId))}class Tj{constructor(e,t,n,s,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=NI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tj,this._maxUploadRetryTime=nj,this._requests=new Set,s!=null?this._bucket=ni.makeFromBucketSpec(s,this._host):this._bucket=lT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ni.makeFromBucketSpec(this._url,e):this._bucket=lT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sm(this,e)}_makeRequest(e,t,n,s,o=!0){if(this._deleted)return new cj(kI());{const c=bj(e,this._appId,n,s,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,s).getPromise()}}const cT="@firebase/storage",uT="0.14.0";const DI="storage";function Sj(r=$0(),e){r=Xt(r);const n=Pm(r,DI).getImmediate({identifier:e}),s=wS("storage");return s&&Aj(n,...s),n}function Aj(r,e,t,n={}){Ej(r,e,t,n)}function Ij(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),s=r.getProvider("app-check-internal");return new Tj(t,n,s,e,Fo)}function Rj(){Ao(new Ea(DI,Ij,"PUBLIC").setMultipleInstances(!0)),Di(cT,uT,""),Di(cT,uT,"esm2020")}Rj();const Cj={apiKey:"AIzaSyAukVlaxbs_YneslsBqTydefDhepXbookU",authDomain:"plantai0.firebaseapp.com",projectId:"plantai0",storageBucket:"plantai0.firebasestorage.app",messagingSenderId:"265722530392",appId:"1:265722530392:web:5e2b3aed63d2597b07d82d",measurementId:"G-LSJ7Q09VS0"},W_=kS(Cj),sr=w5(W_),Fe=z6(W_);Sj(W_);new us;try{B6(Fe).catch(r=>{r.code=="failed-precondition"?console.warn("Firebase persistence failed: multiple tabs"):r.code=="unimplemented"&&console.warn("Firebase persistence not supported")})}catch{}const OI=$.createContext();function ai(){return $.useContext(OI)}function Nj({children:r}){const[e,t]=$.useState(null),[n,s]=$.useState(!0);$.useEffect(()=>uM(sr,async f=>{if(f){t(f);try{const g=await xs(kt(Fe,"users",f.uid));g.exists()&&t(y=>({...y,...g.data()}))}catch(g){console.error("Error fetching user profile:",g)}}else t(null);s(!1)}),[]);const u={currentUser:e,loading:n,logout:async()=>{await sr.signOut(),t(null)},refreshUser:async()=>{if(sr.currentUser){await sr.currentUser.reload();const d=sr.currentUser;let f={};try{const g=await xs(kt(Fe,"users",d.uid));g.exists()&&(f=g.data())}catch(g){console.error("Error refreshing profile:",g)}t({...d,...f})}}};return b.jsx(OI.Provider,{value:u,children:!n&&r})}const kj=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Dj=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),hT=r=>{const e=Dj(r);return e.charAt(0).toUpperCase()+e.slice(1)},MI=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),Oj=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Mj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Pj=$.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:c,...u},d)=>$.createElement("svg",{ref:d,...Mj,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:MI("lucide",s),...!o&&!Oj(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>$.createElement(f,g)),...Array.isArray(o)?o:[o]]));const Oe=(r,e)=>{const t=$.forwardRef(({className:n,...s},o)=>$.createElement(Pj,{ref:o,iconNode:e,className:MI(`lucide-${kj(hT(r))}`,`lucide-${r}`,n),...s}));return t.displayName=hT(r),t};const jj=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],X_=Oe("activity",jj);const Vj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Lj=Oe("arrow-left",Vj);const Uj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],PI=Oe("arrow-right",Uj);const zj=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Bj=Oe("brain",zj);const Fj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],Hj=Oe("calendar-check",Fj);const qj=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],nc=Oe("camera",qj);const $j=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],J_=Oe("chevron-down",$j);const Gj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Kj=Oe("circle-alert",Gj);const Yj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Z_=Oe("circle-check-big",Yj);const Qj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Wj=Oe("circle-check",Qj);const Xj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jI=Oe("clock",Xj);const Jj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Zj=Oe("file-text",Jj);const eV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],dT=Oe("globe",eV);const tV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],nV=Oe("grid-3x3",tV);const rV=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],VI=Oe("heart",rV);const iV=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],LI=Oe("house",iV);const sV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],UI=Oe("image",sV);const aV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],oV=Oe("info",aV);const lV=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],cV=Oe("leaf",lV);const uV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],wa=Oe("loader-circle",uV);const hV=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],fT=Oe("log-in",hV);const dV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],fV=Oe("log-out",dV);const mV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],gV=Oe("mail",mV);const pV=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],yh=Oe("message-circle",pV);const yV=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],_V=Oe("mic",yV);const vV=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],bV=Oe("moon",vV);const wV=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],mT=Oe("paperclip",wV);const xV=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],EV=Oe("pause",xV);const TV=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],zI=Oe("pen",TV);const SV=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],AV=Oe("play",SV);const IV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],RV=Oe("plus",IV);const CV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],BI=Oe("refresh-cw",CV);const NV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],FI=Oe("save",NV);const kV=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],gT=Oe("scan-line",kV);const DV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],HI=Oe("search",DV);const OV=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],_h=Oe("send",OV);const MV=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],k0=Oe("share-2",MV);const PV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],jV=Oe("shield-check",PV);const VV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],LV=Oe("sparkles",VV);const UV=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],Fr=Oe("sprout",UV);const zV=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],pT=Oe("stethoscope",zV);const BV=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],FV=Oe("sun",BV);const HV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],yT=Oe("target",HV);const qV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vh=Oe("trash-2",qV);const $V=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],D0=Oe("triangle-alert",$V);const GV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],KV=Oe("user-plus",GV);const YV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],O0=Oe("user",YV);const QV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],WV=Oe("users",QV);const XV=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],JV=Oe("wand-sparkles",XV);const ZV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ca=Oe("x",ZV);const eL=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],tL=Oe("zap",eL),qI=$.createContext();function Yo(){return $.useContext(qI)}function nL({children:r}){const[e,t]=$.useState([]),n=$.useCallback((o,c="info",u=4e3)=>{const d=Date.now();t(f=>[...f,{id:d,message:o,type:c}]),setTimeout(()=>{s(d)},u)},[]),s=$.useCallback(o=>{t(c=>c.filter(u=>u.id!==o))},[]);return b.jsxs(qI.Provider,{value:{addToast:n,removeToast:s},children:[r,b.jsx("div",{className:"fixed top-6 right-6 z-[9999] flex flex-col gap-3 pointer-events-none",children:e.map(o=>b.jsxs("div",{className:`
                            pointer-events-auto
                            flex items-center gap-3 px-5 py-3 rounded-2xl shadow-lg backdrop-blur-md border
                            transform transition-all duration-500 animate-slide-in hover:scale-102
                            ${o.type==="success"?"bg-emerald-50/90 border-emerald-200 text-emerald-800 dark:bg-emerald-900/40 dark:border-emerald-700/50 dark:text-emerald-100":""}
                            ${o.type==="error"?"bg-rose-50/90 border-rose-200 text-rose-800 dark:bg-rose-900/40 dark:border-rose-700/50 dark:text-rose-100":""}
                            ${o.type==="info"?"bg-indigo-50/90 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:border-indigo-700/50 dark:text-indigo-100":""}
                            ${o.type==="warning"?"bg-amber-50/90 border-amber-200 text-amber-800 dark:bg-amber-900/40 dark:border-amber-700/50 dark:text-amber-100":""}
                            min-w-[300px] max-w-sm
                        `,children:[o.type==="success"&&b.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 shrink-0"}),o.type==="error"&&b.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500 shrink-0"}),o.type==="info"&&b.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center shrink-0 text-xs font-bold text-green-600",children:"AI"}),b.jsx("p",{className:"text-sm font-medium leading-tight flex-1 tracking-tight font-sans",children:o.message})]},o.id))})]})}class $I extends oN.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}handleGoHome=()=>{this.setState({hasError:!1,error:null}),window.location.href="/"};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center animate-fade-in text-gray-900 dark:text-white",children:[b.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-6 rounded-full mb-6",children:b.jsx(D0,{className:"w-12 h-12 text-red-600 dark:text-red-400"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),b.jsx("p",{className:"mb-8 max-w-md text-gray-500 dark:text-gray-400",children:this.state.error?.message||"An unexpected error occurred."}),b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("button",{onClick:this.handleReload,className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-6 py-3 rounded-xl font-bold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[b.jsx(BI,{className:"w-5 h-5"}),"Reload"]}),b.jsxs("button",{onClick:this.handleGoHome,className:"bg-green-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[b.jsx(LI,{className:"w-5 h-5"}),"Go Home"]})]})]}):this.props.children}}function rL(){const{currentUser:r,logout:e}=ai(),{t,i18n:n}=wn(),s=wr(),o=Es(),{addToast:c}=Yo(),u=()=>{n.changeLanguage(n.language==="en"?"tr":"en")},[d,f]=$.useState(localStorage.getItem("theme")||"light");$.useEffect(()=>{d==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",d)},[d]);const[g]=$.useState(()=>new Audio("https://assets.mixkit.co/active_storage/sfx/2573/2573-preview.mp3")),y=()=>{f(E=>E==="dark"?"light":"dark")};$.useEffect(()=>{if(!r)return;const E=async()=>{try{await br(kt(Fe,"users",r.uid),{lastSeen:zr()})}catch(M){console.error("Presence update failed",M)}};E();const D=setInterval(E,60*1e3);return()=>clearInterval(D)},[r]),$.useEffect(()=>{if(!r)return;const E=Ra(Bn(Fe,"chats"),Ko("participants","array-contains",r.uid)),D=To(E,M=>{M.docChanges().forEach(V=>{if(V.type==="modified"){const H=V.doc.data(),F=H.updatedAt?.seconds*1e3;if(Date.now()-F>5e3)return;const B=H.participants.find(U=>U!==r.uid);if(!(s.pathname===`/messages/${V.doc.id}`)&&B){const U=H.participantData?.[B]||{name:"Someone"};g.play().catch(R=>console.log("Audio play failed",R)),c(`New message from ${U.name}: ${H.lastMessage?.substring(0,30)}...`,"info",5e3)}}})});return()=>D()},[r,s.pathname,c,g]);const w=[{path:"/",icon:LI,label:t("app_name"),public:!0},{path:"/community",icon:WV,label:t("community"),public:!0},{path:"/analyses",icon:jI,label:t("analyses"),public:!1},{path:"/messages",icon:yh,label:t("messages"),public:!1},{path:"/profile",icon:O0,label:t("profile"),public:!1},{path:"/about",icon:oV,label:t("about"),public:!0}].filter(E=>E.public||r);return b.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans overflow-hidden",children:[b.jsxs("aside",{className:"hidden md:flex flex-col w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300",children:[b.jsxs(jr,{to:"/",onClick:()=>window.scrollTo(0,0),className:"p-6 flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(Fr,{className:"w-8 h-8 text-green-600"}),b.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("nav",{className:"flex-1 px-4 space-y-2",children:w.map(E=>{const D=E.icon,M=s.pathname===E.path;return b.jsxs(jr,{to:E.path,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${M?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 font-semibold shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:[b.jsx(D,{className:"w-5 h-5"}),b.jsx("span",{children:E.label})]},E.path)})}),b.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[b.jsxs("button",{onClick:u,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[b.jsx("span",{className:"font-bold border border-gray-300 dark:border-gray-600 rounded px-1 text-xs",children:n.language.toUpperCase()}),b.jsx("span",{children:t("language")||"Language"})]}),b.jsxs("button",{onClick:y,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[d==="dark"?b.jsx(FV,{className:"w-5 h-5"}):b.jsx(bV,{className:"w-5 h-5"}),b.jsx("span",{children:t(d==="dark"?"light_mode":"dark_mode")})]}),r?b.jsxs("div",{className:"flex flex-col gap-2",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("img",{src:r.photoURL||r.avatar||`https://ui-avatars.com/api/?name=${r.displayName||"User"}`,alt:"Avatar",className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-gray-600"}),b.jsxs("div",{className:"flex-1 overflow-hidden",children:[b.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase font-bold",children:t("welcome_user")}),b.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",title:r.displayName||r.email,children:r.displayName||r.email})]})]}),b.jsxs("button",{onClick:async()=>{await e(),o("/")},className:"flex items-center gap-3 w-full px-4 py-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 shadow-sm",children:[b.jsx(fV,{className:"w-5 h-5"}),b.jsx("span",{children:t("logout")})]})]}):b.jsxs(jr,{to:"/login",className:"flex items-center gap-3 w-full px-4 py-3 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-xl transition-colors font-semibold",children:[b.jsx(fT,{className:"w-5 h-5"}),b.jsx("span",{children:t("login")})]})]})]}),b.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[b.jsxs("header",{className:"md:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between sticky top-0 z-10",children:[b.jsxs(jr,{to:"/",onClick:()=>window.scrollTo(0,0),className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(Fr,{className:"w-6 h-6 text-green-600"}),b.jsxs("span",{className:"font-bold text-lg",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("button",{onClick:u,className:"text-sm font-bold bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-lg",children:n.language.toUpperCase()})]}),b.jsx("div",{className:"flex-1 overflow-y-auto w-full p-4 md:p-8 pb-24 md:pb-8 scroll-smooth relative",id:"main-scroll",children:b.jsx("div",{className:"w-full h-full flex flex-col",children:b.jsx($I,{children:b.jsx(ok,{})})})}),b.jsxs("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex justify-around p-2 z-50 safe-area-bottom shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:[w.map(E=>{const D=E.icon,M=s.pathname===E.path;return b.jsxs(jr,{to:E.path,className:`flex flex-col items-center justify-center p-2 rounded-lg ${M?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:[b.jsx(D,{className:`w-6 h-6 ${M?"fill-current":""}`}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:E.label})]},E.path)}),!r&&b.jsxs(jr,{to:"/login",className:"flex flex-col items-center justify-center p-2 text-gray-500",children:[b.jsx(fT,{className:"w-6 h-6"}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:t("login")})]})]})]})]})}function iL(){const[r,e]=$.useState(""),[t,n]=$.useState(""),[s,o]=$.useState(""),[c,u]=$.useState(!1),[d,f]=$.useState(!1),[g,y]=$.useState(!1),v=Es(),w=wr(),{t:E}=wn(),{currentUser:D}=ai(),{addToast:M}=Yo();if(D?.emailVerified)return w.state?.returnUrl&&w.state?.pendingResult?v(w.state.returnUrl,{replace:!0,state:{restoredResult:w.state.pendingResult,restoredImages:w.state.pendingImages,restoredPlantType:w.state.pendingPlantType}}):v(w.state?.returnUrl||"/"),null;const V=async()=>{y(!0);try{const F=await Ax(sr,r,t);await iA(F.user),await sr.signOut(),M(E("verification_sent")||"Verification email sent! Check your inbox.","success")}catch(F){console.error("Resend error:",F),F.code==="auth/too-many-requests"?M(E("too_many_requests")||"Too many attempts. Please wait.","error"):M(E("resend_failed")||"Failed to resend email.","error")}finally{y(!1)}},H=async F=>{F.preventDefault(),o(""),f(!1),u(!0);try{if(!(await Ax(sr,r,t)).user.emailVerified){await sr.signOut(),f(!0);return}}catch(B){console.error(B);let Y=E("login_failed")||"Failed to login.";B.code==="auth/user-not-found"||B.code==="auth/wrong-password"||B.code==="auth/invalid-credential"?Y=E("invalid_credentials")||"Invalid email or password.":B.code==="auth/too-many-requests"?Y=E("too_many_requests")||"Too many attempts. Try again later.":B.code==="auth/user-disabled"?Y="Account disabled. Contact support.":B.code==="auth/network-request-failed"&&(Y="Network error. Check your connection."),o(Y)}finally{u(!1)}};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:b.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(Fr,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:E("welcome")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:E("login_prompt")}),s&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:s}),d?b.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-xl animate-fade-in",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-800 rounded-full text-yellow-600 dark:text-yellow-400",children:b.jsx(Fr,{className:"w-5 h-5"})}),b.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:E("verify_email_title")||"Verify your email"})]}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:E("verify_email_desc")||"We've sent a confirmation link to your inbox. Please check your spam folder too."}),b.jsx("button",{onClick:V,disabled:g,className:"w-full py-2 px-4 bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-900/50 dark:hover:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded-lg text-sm font-semibold transition-colors disabled:opacity-50",children:g?"Sending...":E("resend_verification")||"Resend Verification Email"})]}):b.jsxs("form",{onSubmit:H,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:F=>e(F.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:F=>n(F.target.value)})]}),b.jsxs("button",{type:"submit",disabled:c,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c?"Logging in...":E("login"),!c&&b.jsx(PI,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",b.jsx(jr,{to:"/register",state:w.state,className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:E("register")})]})]})})})}function sL({user:r,onClose:e,onVerified:t}){const{t:n}=wn(),[s,o]=$.useState(!1);$.useEffect(()=>{const u=setInterval(async()=>{if(r)try{await r.reload(),r.emailVerified&&(clearInterval(u),t())}catch(d){console.error("Verification check failed",d)}},3e3);return()=>clearInterval(u)},[r,t]);const c=async()=>{o(!0);try{await r.reload(),r.emailVerified&&t()}catch(u){console.error(u)}finally{setTimeout(()=>o(!1),500)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl p-8 flex flex-col items-center text-center relative overflow-hidden",children:[b.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-green-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-blue-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6 text-green-600 dark:text-green-400 animate-pulse",children:b.jsx(gV,{className:"w-10 h-10"})}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:n("verify_email_title")||"Verify Your Email"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:n("verify_email_desc")||`We sent a confirmation link to ${r?.email}. Please check your inbox and click the link to continue.`}),b.jsxs("div",{className:"space-y-4 w-full",children:[b.jsx("button",{onClick:()=>window.open("https://mail.google.com","_blank"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-2",children:n("open_email_app")||"Open Email App"}),b.jsxs("button",{onClick:c,disabled:s,className:"w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-white font-semibold py-3 rounded-xl transition-all flex items-center justify-center gap-2",children:[s?b.jsx(BI,{className:"w-5 h-5 animate-spin"}):b.jsx(Z_,{className:"w-5 h-5"}),n("i_verified_it")||"I Verified the Email"]}),b.jsx("button",{onClick:e,className:"text-sm text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:n("cancel")||"Cancel"})]})]})})}function aL(){const[r,e]=$.useState(""),[t,n]=$.useState(""),[s,o]=$.useState(""),[c,u]=$.useState(""),[d,f]=$.useState(!1),[g,y]=$.useState(!1),[v,w]=$.useState(null),E=Es(),D=wr(),{t:M}=wn(),V=async F=>{F.preventDefault(),u(""),f(!0);try{const B=await aM(sr,r,t);await r0(B.user,{displayName:s}),await iA(B.user),w(B.user),y(!0),f(!1)}catch(B){u(B.message),console.error(B),f(!1)}},H=async()=>{sr.currentUser&&await sr.currentUser.reload(),y(!1),D.state?.returnUrl&&D.state?.pendingResult?E(D.state.returnUrl,{replace:!0,state:{restoredResult:D.state.pendingResult,restoredImages:D.state.pendingImages,restoredPlantType:D.state.pendingPlantType}}):E("/")};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4 animate-fade-in",children:b.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden relative",children:[g&&v&&b.jsx(sL,{user:v,onClose:()=>y(!1),onVerified:H}),b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(Fr,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:M("register")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:M("create_account_desc")||M("join_community")||"Create an account to join the community"}),c&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:c}),b.jsxs("form",{onSubmit:V,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:M("full_name")||"Full Name"}),b.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:s,onChange:F=>o(F.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:M("email")}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:F=>e(F.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:M("password")}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:F=>n(F.target.value)})]}),b.jsxs("button",{type:"submit",disabled:d||g,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d?M("creating_account")||"Creating Account...":M("register"),!d&&b.jsx(KV,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:[M("already_have_account")||"Already have an account?"," "," ",b.jsx(jr,{to:"/login",className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:M("login")})]})]})]})})}var _T;(function(r){r.STRING="string",r.NUMBER="number",r.INTEGER="integer",r.BOOLEAN="boolean",r.ARRAY="array",r.OBJECT="object"})(_T||(_T={}));var vT;(function(r){r.LANGUAGE_UNSPECIFIED="language_unspecified",r.PYTHON="python"})(vT||(vT={}));var bT;(function(r){r.OUTCOME_UNSPECIFIED="outcome_unspecified",r.OUTCOME_OK="outcome_ok",r.OUTCOME_FAILED="outcome_failed",r.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(bT||(bT={}));const wT=["user","model","function","system"];var xT;(function(r){r.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",r.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(xT||(xT={}));var ET;(function(r){r.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE"})(ET||(ET={}));var TT;(function(r){r.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",r.NEGLIGIBLE="NEGLIGIBLE",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH"})(TT||(TT={}));var ST;(function(r){r.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",r.SAFETY="SAFETY",r.OTHER="OTHER"})(ST||(ST={}));var Zu;(function(r){r.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",r.STOP="STOP",r.MAX_TOKENS="MAX_TOKENS",r.SAFETY="SAFETY",r.RECITATION="RECITATION",r.LANGUAGE="LANGUAGE",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.SPII="SPII",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.OTHER="OTHER"})(Zu||(Zu={}));var AT;(function(r){r.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",r.RETRIEVAL_QUERY="RETRIEVAL_QUERY",r.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",r.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",r.CLASSIFICATION="CLASSIFICATION",r.CLUSTERING="CLUSTERING"})(AT||(AT={}));var IT;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.AUTO="AUTO",r.ANY="ANY",r.NONE="NONE"})(IT||(IT={}));var RT;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(RT||(RT={}));class Ln extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class ql extends Ln{constructor(e,t){super(e),this.response=t}}class GI extends Ln{constructor(e,t,n,s){super(e),this.status=t,this.statusText=n,this.errorDetails=s}}class xa extends Ln{}class KI extends Ln{}const oL="https://generativelanguage.googleapis.com",lL="v1beta",cL="0.24.1",uL="genai-js";var Uo;(function(r){r.GENERATE_CONTENT="generateContent",r.STREAM_GENERATE_CONTENT="streamGenerateContent",r.COUNT_TOKENS="countTokens",r.EMBED_CONTENT="embedContent",r.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Uo||(Uo={}));class hL{constructor(e,t,n,s,o){this.model=e,this.task=t,this.apiKey=n,this.stream=s,this.requestOptions=o}toString(){var e,t;const n=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||lL;let o=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||oL}/${n}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function dL(r){const e=[];return r?.apiClient&&e.push(r.apiClient),e.push(`${uL}/${cL}`),e.join(" ")}async function fL(r){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",dL(r.requestOptions)),t.append("x-goog-api-key",r.apiKey);let n=(e=r.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(s){throw new xa(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${s.message}`)}for(const[s,o]of n.entries()){if(s==="x-goog-api-key")throw new xa(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new xa(`Header name ${s} can only be set using the apiClient field`);t.append(s,o)}}return t}async function mL(r,e,t,n,s,o){const c=new hL(r,e,t,n,o);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},_L(o)),{method:"POST",headers:await fL(c),body:s})}}async function Fh(r,e,t,n,s,o={},c=fetch){const{url:u,fetchOptions:d}=await mL(r,e,t,n,s,o);return gL(u,d,c)}async function gL(r,e,t=fetch){let n;try{n=await t(r,e)}catch(s){pL(s,r)}return n.ok||await yL(n,r),n}function pL(r,e){let t=r;throw t.name==="AbortError"?(t=new KI(`Request aborted when fetching ${e.toString()}: ${r.message}`),t.stack=r.stack):r instanceof GI||r instanceof xa||(t=new Ln(`Error fetching from ${e.toString()}: ${r.message}`),t.stack=r.stack),t}async function yL(r,e){let t="",n;try{const s=await r.json();t=s.error.message,s.error.details&&(t+=` ${JSON.stringify(s.error.details)}`,n=s.error.details)}catch{}throw new GI(`Error fetching from ${e.toString()}: [${r.status} ${r.statusText}] ${t}`,r.status,r.statusText,n)}function _L(r){const e={};if(r?.signal!==void 0||r?.timeout>=0){const t=new AbortController;r?.timeout>=0&&setTimeout(()=>t.abort(),r.timeout),r?.signal&&r.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function ev(r){return r.text=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),$f(r.candidates[0]))throw new ql(`${ca(r)}`,r);return vL(r)}else if(r.promptFeedback)throw new ql(`Text not available. ${ca(r)}`,r);return""},r.functionCall=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),$f(r.candidates[0]))throw new ql(`${ca(r)}`,r);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),CT(r)[0]}else if(r.promptFeedback)throw new ql(`Function call not available. ${ca(r)}`,r)},r.functionCalls=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),$f(r.candidates[0]))throw new ql(`${ca(r)}`,r);return CT(r)}else if(r.promptFeedback)throw new ql(`Function call not available. ${ca(r)}`,r)},r}function vL(r){var e,t,n,s;const o=[];if(!((t=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(n=r.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)c.text&&o.push(c.text),c.executableCode&&o.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&o.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function CT(r){var e,t,n,s;const o=[];if(!((t=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(n=r.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)c.functionCall&&o.push(c.functionCall);if(o.length>0)return o}const bL=[Zu.RECITATION,Zu.SAFETY,Zu.LANGUAGE];function $f(r){return!!r.finishReason&&bL.includes(r.finishReason)}function ca(r){var e,t,n;let s="";if((!r.candidates||r.candidates.length===0)&&r.promptFeedback)s+="Response was blocked",!((e=r.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${r.promptFeedback.blockReason}`),!((t=r.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(s+=`: ${r.promptFeedback.blockReasonMessage}`);else if(!((n=r.candidates)===null||n===void 0)&&n[0]){const o=r.candidates[0];$f(o)&&(s+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(s+=`: ${o.finishMessage}`))}return s}function bh(r){return this instanceof bh?(this.v=r,this):new bh(r)}function wL(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),s,o=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(v){n[v]&&(s[v]=function(w){return new Promise(function(E,D){o.push([v,w,E,D])>1||u(v,w)})})}function u(v,w){try{d(n[v](w))}catch(E){y(o[0][3],E)}}function d(v){v.value instanceof bh?Promise.resolve(v.value.v).then(f,g):y(o[0][2],v)}function f(v){u("next",v)}function g(v){u("throw",v)}function y(v,w){v(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}const NT=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function xL(r){const e=r.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=SL(e),[n,s]=t.tee();return{stream:TL(n),response:EL(s)}}async function EL(r){const e=[],t=r.getReader();for(;;){const{done:n,value:s}=await t.read();if(n)return ev(AL(e));e.push(s)}}function TL(r){return wL(this,arguments,function*(){const t=r.getReader();for(;;){const{value:n,done:s}=yield bh(t.read());if(s)break;yield yield bh(ev(n))}})}function SL(r){const e=r.getReader();return new ReadableStream({start(n){let s="";return o();function o(){return e.read().then(({value:c,done:u})=>{if(u){if(s.trim()){n.error(new Ln("Failed to parse stream"));return}n.close();return}s+=c;let d=s.match(NT),f;for(;d;){try{f=JSON.parse(d[1])}catch{n.error(new Ln(`Error parsing JSON response: "${d[1]}"`));return}n.enqueue(f),s=s.substring(d[0].length),d=s.match(NT)}return o()}).catch(c=>{let u=c;throw u.stack=c.stack,u.name==="AbortError"?u=new KI("Request aborted when reading from the stream"):u=new Ln("Error reading from the stream"),u})}}})}function AL(r){const e=r[r.length-1],t={promptFeedback:e?.promptFeedback};for(const n of r){if(n.candidates){let s=0;for(const o of n.candidates)if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:s}),t.candidates[s].citationMetadata=o.citationMetadata,t.candidates[s].groundingMetadata=o.groundingMetadata,t.candidates[s].finishReason=o.finishReason,t.candidates[s].finishMessage=o.finishMessage,t.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){t.candidates[s].content||(t.candidates[s].content={role:o.content.role||"user",parts:[]});const c={};for(const u of o.content.parts)u.text&&(c.text=u.text),u.functionCall&&(c.functionCall=u.functionCall),u.executableCode&&(c.executableCode=u.executableCode),u.codeExecutionResult&&(c.codeExecutionResult=u.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),t.candidates[s].content.parts.push(c)}s++}n.usageMetadata&&(t.usageMetadata=n.usageMetadata)}return t}async function YI(r,e,t,n){const s=await Fh(e,Uo.STREAM_GENERATE_CONTENT,r,!0,JSON.stringify(t),n);return xL(s)}async function QI(r,e,t,n){const o=await(await Fh(e,Uo.GENERATE_CONTENT,r,!1,JSON.stringify(t),n)).json();return{response:ev(o)}}function WI(r){if(r!=null){if(typeof r=="string")return{role:"system",parts:[{text:r}]};if(r.text)return{role:"system",parts:[r]};if(r.parts)return r.role?r:{role:"system",parts:r.parts}}}function wh(r){let e=[];if(typeof r=="string")e=[{text:r}];else for(const t of r)typeof t=="string"?e.push({text:t}):e.push(t);return IL(e)}function IL(r){const e={role:"user",parts:[]},t={role:"function",parts:[]};let n=!1,s=!1;for(const o of r)"functionResponse"in o?(t.parts.push(o),s=!0):(e.parts.push(o),n=!0);if(n&&s)throw new Ln("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!s)throw new Ln("No content is provided for sending chat message.");return n?e:t}function RL(r,e){var t;let n={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const s=r.generateContentRequest!=null;if(r.contents){if(s)throw new xa("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=r.contents}else if(s)n=Object.assign(Object.assign({},n),r.generateContentRequest);else{const o=wh(r);n.contents=[o]}return{generateContentRequest:n}}function kT(r){let e;return r.contents?e=r:e={contents:[wh(r)]},r.systemInstruction&&(e.systemInstruction=WI(r.systemInstruction)),e}function CL(r){return typeof r=="string"||Array.isArray(r)?{content:wh(r)}:r}const DT=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],NL={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function kL(r){let e=!1;for(const t of r){const{role:n,parts:s}=t;if(!e&&n!=="user")throw new Ln(`First content should be with role 'user', got ${n}`);if(!wT.includes(n))throw new Ln(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(wT)}`);if(!Array.isArray(s))throw new Ln("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Ln("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of s)for(const d of DT)d in u&&(o[d]+=1);const c=NL[n];for(const u of DT)if(!c.includes(u)&&o[u]>0)throw new Ln(`Content with role '${n}' can't contain '${u}' part`);e=!0}}function OT(r){var e;if(r.candidates===void 0||r.candidates.length===0)return!1;const t=(e=r.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const n of t.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}const MT="SILENT_ERROR";class DL{constructor(e,t,n,s={}){this.model=t,this.params=n,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n?.history&&(kL(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var n,s,o,c,u,d;await this._sendPromise;const f=wh(e),g={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t);let v;return this._sendPromise=this._sendPromise.then(()=>QI(this._apiKey,this.model,g,y)).then(w=>{var E;if(OT(w.response)){this._history.push(f);const D=Object.assign({parts:[],role:"model"},(E=w.response.candidates)===null||E===void 0?void 0:E[0].content);this._history.push(D)}else{const D=ca(w.response);D&&console.warn(`sendMessage() was unsuccessful. ${D}. Inspect response object for details.`)}v=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,v}async sendMessageStream(e,t={}){var n,s,o,c,u,d;await this._sendPromise;const f=wh(e),g={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t),v=YI(this._apiKey,this.model,g,y);return this._sendPromise=this._sendPromise.then(()=>v).catch(w=>{throw new Error(MT)}).then(w=>w.response).then(w=>{if(OT(w)){this._history.push(f);const E=Object.assign({},w.candidates[0].content);E.role||(E.role="model"),this._history.push(E)}else{const E=ca(w);E&&console.warn(`sendMessageStream() was unsuccessful. ${E}. Inspect response object for details.`)}}).catch(w=>{w.message!==MT&&console.error(w)}),v}}async function OL(r,e,t,n){return(await Fh(e,Uo.COUNT_TOKENS,r,!1,JSON.stringify(t),n)).json()}async function ML(r,e,t,n){return(await Fh(e,Uo.EMBED_CONTENT,r,!1,JSON.stringify(t),n)).json()}async function PL(r,e,t,n){const s=t.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await Fh(e,Uo.BATCH_EMBED_CONTENTS,r,!1,JSON.stringify({requests:s}),n)).json()}class PT{constructor(e,t,n={}){this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=WI(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var n;const s=kT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return QI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),o)}async generateContentStream(e,t={}){var n;const s=kT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return YI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),o)}startChat(e){var t;return new DL(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const n=RL(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return OL(this.apiKey,this.model,n,s)}async embedContent(e,t={}){const n=CL(e),s=Object.assign(Object.assign({},this._requestOptions),t);return ML(this.apiKey,this.model,n,s)}async batchEmbedContents(e,t={}){const n=Object.assign(Object.assign({},this._requestOptions),t);return PL(this.apiKey,this.model,e,n)}}class jL{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Ln("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new PT(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new xa("Cached content must contain a `name` field.");if(!e.model)throw new xa("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const c of s)if(t?.[c]&&e[c]&&t?.[c]!==e[c]){if(c==="model"){const u=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,d=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(u===d)continue}throw new xa(`Different value for "${c}" specified in modelParams (${t[c]}) and cachedContent (${e[c]})`)}const o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new PT(this.apiKey,o,n)}}async function XI(r,e="tr",t=null){const n=Array.isArray(r)?r:[r],s=3,o=2e3;let c;for(let u=0;u<=s;u++)try{return u>0&&(console.log(`Attempt ${u+1} of ${s+1}...`),await new Promise(d=>setTimeout(d,o))),await VL(n,e,t)}catch(d){if(c=d,!(d.message.includes("503")||d.message.includes("429")||d.message.includes("overloaded")||d.message.includes("Server Error")))throw d;console.warn(`Analysis attempt ${u+1} failed:`,d.message)}throw c}async function VL(r,e,t){let n="";t&&t.trim().length>0&&(n=`The user identifies this plant as "${t}". Use this as context but verify visually.`);const s=`
    You are an expert Phytopathologist. Analyze the provided plant image(s).
    ${n}
    OUTPUT MUST BE IN ${e==="en"?"ENGLISH":"TURKISH"}.

    PROTOCOL:
    1. If the image is not a plant, return {"status": "error", "error": "NOT_PLANT"}
    2. If the ailment is unclear, the image is blurry, or you need a closer look (macro shot) to be at least 70% confident, return:
       {"status": "needs_details", "message": "Please take a closer photo of the affected leaf or area."}
    3. If confident, return a valid JSON object:
    {
        "status": "success",
        "disease_name": "Disease Name",
        "latin_name": "Latin Name",
        "confidence": 90,
        "urgency": 50,
        "spread_risk": 40,
        "is_treatable": true, // false if plant is dead, rotten beyond saving, or abiotic stress that cannot be reversed
        "description": "Short description (max 2 sentences).",
        "treatment_steps": ["Step 1", "Step 2", "Step 3"], // Only if is_treatable is true
        "preventive_measures": ["Tip 1", "Tip 2"] // If not treatable or general advice
    }
    
    Return ONLY valid raw JSON (no markdown, no backticks).
  `,o=[{text:s}];r.forEach(u=>{if(!u)return;const d=u.includes(",")?u.split(",")[1]:u;o.push({inline_data:{mime_type:"image/jpeg",data:d}})});const c={contents:[{parts:o}],safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_LOW_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]};try{const u=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!u.ok){const f=await u.text();throw console.error("Backend Error Response:",f),f.trim().startsWith("<")||f.includes("A server error")?new Error("Backend function not available. Please verify server status."):new Error(`Server Error: ${u.status} ${u.statusText}`)}const d=await u.json();if(d.error)throw new Error(d.error.message||"API Connection Error");if(d.plant_name||d.status)return d;if(d.candidates&&d.candidates[0].content){const g=d.candidates[0].content.parts[0].text.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(g)}throw new Error("Invalid response structure from AI")}catch(u){console.warn("Backend analysis failed, attempting client-side fallback...",u);const d="AIzaSyC2aYSoTNOkcmHd-SwQlUI1TNPnZAcAqqE";try{const g=new jL(d).getGenerativeModel({model:"gemini-2.5-flash"}),v=[s];r.forEach(V=>{if(!V)return;const H=V.includes(",")?V.split(",")[1]:V;v.push({inlineData:{data:H,mimeType:"image/jpeg"}})});const M=(await(await g.generateContent(v)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(M)}catch(f){throw console.error("Fallback also failed:",f),new Error(f.message||"AI Diagnosis completely failed.")}}}const _c="analyses";async function JI(r,e,t,n,s=!1){try{const o=t.main||null,c=t.macro||null;return o&&o.length>9e5&&console.warn("Main image is very large for Firestore!"),(await Bh(Bn(Fe,_c),{userId:r,plantType:e,mainImage:o,macroImage:c,result:n,isPublic:s,status:"active",createdAt:zr(),nextCheckup:new Date(Date.now()+10080*60*1e3)})).id}catch(o){throw console.error("Error saving analysis:",o),o}}async function ZI(r){try{const e=Ra(Bn(Fe,_c),Ko("userId","==",r)),n=(await yc(e)).docs.map(async o=>{const c=o.data();let u=[];try{u=(await yc(Bn(Fe,_c,o.id,"updates"))).docs.map(f=>f.data()).sort((f,g)=>(g.createdAt?.seconds||0)-(f.createdAt?.seconds||0))}catch(d){console.log("No updates found or error",d)}return{id:o.id,...c,updates:u}});return(await Promise.all(n)).sort((o,c)=>{const u=o.createdAt?.seconds||0;return(c.createdAt?.seconds||0)-u})}catch(e){return console.error("Error fetching analyses:",e),[]}}async function eR(r){try{return await dg(kt(Fe,_c,r)),!0}catch(e){throw console.error("Error deleting analysis:",e),e}}async function tR(r,e){try{const t=kt(Fe,_c,r);await br(t,{...e,updatedAt:zr()})}catch(t){throw console.error("Error updating analysis:",t),t}}async function nR(r,e,t){try{let n=null;e.image&&(typeof e.image=="string"&&e.image.startsWith("data:")?n=e.image:console.warn("Received File object but Storage is disabled. Skipping image."));const s=Bh(Bn(Fe,"posts"),{userId:r,authorName:e.authorName||"Gardener",title:e.title||"",content:e.content,image:n,plantType:e.plantType||"Unknown",likes:[],comments:[],createdAt:zr()}),o=new Promise(c=>setTimeout(()=>c("timeout"),5e3));return await Promise.race([s,o]),!0}catch(n){throw console.error("Error creating post:",n),n}}async function rR(r,e,t,n="Gardener",s=null){try{const o=`${t} - ${e.result.disease_name}`,c=`Analiz Sonucu: ${e.result.disease_name}

${e.result.description}`;return await Bh(Bn(Fe,"posts"),{userId:e.userId,authorName:n,userAvatar:s,title:o,content:c,image:e.mainImage,plantType:t,likes:[],comments:[],createdAt:zr(),relatedAnalysisId:r}),await tR(r,{isPublic:!0}),!0}catch(o){throw console.error("Error sharing to community:",o),o}}async function iR(r,e,t){try{return await Bh(Bn(Fe,_c,r,"updates"),{imageUrl:e||null,note:t,createdAt:zr()}),!0}catch(n){throw console.error("Error adding feedback:",n),n}}async function sR(r){try{const e=kt(Fe,"posts",r),t=await xs(e);if(!t.exists())return!1;const n=t.data();if(n.relatedAnalysisId)try{const s=kt(Fe,"analyses",n.relatedAnalysisId);await br(s,{isPublic:!1})}catch(s){console.warn("Could not sync analysis status (might be deleted)",s)}return await dg(e),!0}catch(e){throw console.error("Error deleting post:",e),e}}async function aR(r,e){try{const t=kt(Fe,"posts",r),n=await xs(t);if(!n.exists())return;(n.data().likes||[]).includes(e)?await br(t,{likes:CI(e)}):await br(t,{likes:Q_(e)})}catch(t){throw console.error("Error toggling like:",t),t}}async function oR(r,e,t,n){try{const s=kt(Fe,"posts",r),o={userId:e,userName:t,text:n,createdAt:Date.now()};return await br(s,{comments:Q_(o)}),!0}catch(s){throw console.error("Error adding comment:",s),s}}async function lR(r,e){try{const t=kt(Fe,"posts",r);return await br(t,{...e,updatedAt:zr()}),!0}catch(t){throw console.error("Error updating post:",t),t}}async function M0(r,e,t){try{const n=Ra(Bn(Fe,"posts"),Ko("userId","==",r)),o=(await yc(n)).docs.map(c=>br(c.ref,{authorName:e,userAvatar:t}));return await Promise.all(o),!0}catch(n){return console.error("Error syncing user profile to posts:",n),!1}}async function LL(r,e,t,n){try{if(r===e)throw new Error("Cannot start chat with yourself.");const s=[r,e].sort(),o=`${s[0]}_${s[1]}`,c=kt(Fe,"chats",o);return(await xs(c)).exists()?await br(c,{[`participantData.${r}`]:n}):await N0(c,{participants:[r,e],participantData:{[e]:t,[r]:n},createdAt:zr(),updatedAt:zr(),lastMessage:""}),o}catch(s){throw console.error("Error starting chat:",s),s}}const UL=Object.freeze(Object.defineProperty({__proto__:null,addComment:oR,addFeedbackUpdate:iR,createPost:nR,deleteAnalysis:eR,deletePost:sR,getUserAnalyses:ZI,saveAnalysis:JI,shareAnalysisToCommunity:rR,startChat:LL,toggleLike:aR,updateAnalysisStatus:tR,updatePost:lR,updateUserPostsName:M0},Symbol.toStringTag,{value:"Module"}));function zL({result:r,onReset:e}){const{t}=wn();return r?r.error==="NOT_PLANT"?b.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden p-8 text-center",children:[b.jsx("div",{className:"mx-auto bg-red-100 dark:bg-red-900/30 w-16 h-16 rounded-full flex items-center justify-center mb-4",children:b.jsx(D0,{className:"w-8 h-8 text-red-600 dark:text-red-500"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Could not identify plant"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please ensure the photo contains a clear view of a plant leaf or stem."}),b.jsx("button",{onClick:e,className:"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-xl font-medium transition-colors",children:"Try Again"})]}):b.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fade-in",children:[b.jsx("div",{className:"bg-green-600 text-white p-6",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"text-3xl font-bold",children:r.disease_name}),b.jsx("p",{className:"opacity-90 italic text-lg",children:r.latin_name})]}),b.jsxs("div",{className:"flex flex-col items-end",children:[b.jsxs("div",{className:"text-2xl font-bold",children:[r.confidence,"%"]}),b.jsx("div",{className:"text-xs uppercase opacity-75",children:t("confidence")})]})]})}),b.jsxs("div",{className:"p-6 space-y-6",children:[b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4",children:[b.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-xl border border-orange-100 dark:border-orange-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-orange-700 dark:text-orange-500 font-semibold",children:[b.jsx(X_,{className:"w-5 h-5"}),b.jsx("span",{children:t("urgency")})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-orange-600 h-2.5 rounded-full",style:{width:`${r.urgency}%`}})})]}),b.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-blue-700 dark:text-blue-500 font-semibold",children:[b.jsx(Fr,{className:"w-5 h-5"}),b.jsx("span",{children:t("spread_risk")})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${r.spread_risk}%`}})})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t("description")}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:r.description})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:r.is_treatable===!1?t("prevention_tips")||"Koruyucu nlemler & Tavsiyeler":t("treatment")}),r.is_treatable===!1&&b.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-xl text-sm border border-red-100 dark:border-red-900/30 flex gap-3",children:[b.jsx(D0,{className:"w-5 h-5 flex-shrink-0"}),b.jsx("p",{children:t("plant_not_recoverable")||"Bu bitki iin tedavi uygulanamayabilir veya kurtarlmas zor olabilir. Aadaki nlemler ile dier bitkilerinizi koruyabilirsiniz."})]}),b.jsx("ul",{className:"space-y-3",children:(r.is_treatable===!1?r.preventive_measures:r.treatment_steps)?.map((n,s)=>b.jsxs("li",{className:"flex gap-3",children:[b.jsx(Z_,{className:`w-6 h-6 flex-shrink-0 ${r.is_treatable===!1?"text-orange-500":"text-green-600"}`}),b.jsx("span",{className:"text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg flex-1",children:n})]},s))})]}),b.jsx("div",{className:"pt-4 flex gap-4",children:b.jsx("button",{onClick:e,className:"flex-1 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white py-3 rounded-xl font-medium transition-colors",children:t("new_scan")})})]})]}):null}function BL({isOpen:r,onClose:e,onCapture:t}){const n=$.useRef(null),s=$.useRef(null),[o,c]=$.useState(null),[u,d]=$.useState(""),{t:f}=wn();$.useEffect(()=>(r?g():y(),()=>y()),[r]);const g=async()=>{d("");try{const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});c(w),n.current&&(n.current.srcObject=w)}catch(w){console.error("Camera Error:",w),d(f("camera_permission_denied")||"Camera access denied or not available.")}},y=()=>{o&&(o.getTracks().forEach(w=>w.stop()),c(null))},v=()=>{if(n.current&&s.current){const w=n.current,E=s.current;E.width=w.videoWidth,E.height=w.videoHeight,E.getContext("2d").drawImage(w,0,0,E.width,E.height);const M=E.toDataURL("image/jpeg",.9);t(M),e()}};return r?b.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 flex items-center justify-center p-4 animate-fade-in",children:b.jsxs("div",{className:"relative w-full max-w-lg bg-black rounded-3xl overflow-hidden shadow-2xl border border-gray-800",children:[b.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-10 bg-gradient-to-b from-black/60 to-transparent",children:[b.jsx("span",{className:"text-white font-medium",children:f("take_photo")}),b.jsx("button",{onClick:e,className:"p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors",children:b.jsx(Ca,{className:"w-6 h-6"})})]}),b.jsx("div",{className:"relative aspect-[3/4] bg-gray-900 flex items-center justify-center",children:u?b.jsxs("div",{className:"text-center p-6 text-red-400",children:[b.jsx(Kj,{className:"w-12 h-12 mx-auto mb-3 opacity-80"}),b.jsx("p",{children:u}),b.jsx("button",{onClick:g,className:"mt-4 px-4 py-2 bg-gray-800 rounded-lg text-white text-sm hover:bg-gray-700",children:f("retry")||"Retry"})]}):b.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})}),b.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 flex justify-center items-center bg-gradient-to-t from-black/80 to-transparent",children:!u&&b.jsx("button",{onClick:v,className:"group relative",children:b.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-white flex items-center justify-center transition-transform group-active:scale-95",children:b.jsx("div",{className:"w-16 h-16 bg-white rounded-full"})})})}),b.jsx("canvas",{ref:s,className:"hidden"})]})}):null}function FL(){const{t:r,i18n:e}=wn(),{currentUser:t}=ai(),n=Es(),s=wr(),{addToast:o}=Yo(),c=$.useRef(null),[u,d]=$.useState("landing"),[f,g]=$.useState(""),[y,v]=$.useState({main:null,macro:null}),[w,E]=$.useState(!1),[D,M]=$.useState(null),[V,H]=$.useState(!1),[F,B]=$.useState(!1);$.useEffect(()=>{s.state?.restoredResult&&(M(s.state.restoredResult),d("result"),s.state?.restoredImages&&(v(s.state.restoredImages),g(s.state.restoredPlantType||"")))},[s.state]);const Y=()=>{u==="input_type"&&d("capture_main")},U=()=>{g(""),d("capture_main")},R=()=>{c.current&&(c.current.value="",c.current.click())},T=Z=>{Z&&I(Z),B(!1)},S=async Z=>{const q=Z.target.files?.[0];if(!q)return;const Q=new FileReader;Q.onloadend=()=>{const ie=Q.result;I(ie)},Q.readAsDataURL(q)},I=async Z=>{u==="capture_main"?(v(q=>({...q,main:Z})),await k(Z)):u==="capture_macro"&&(v(q=>({...q,macro:Z})),await k([y.main,Z]))},k=async(Z,q)=>{E(!0),d("analyzing"),H(!1);try{const Q=await XI(Z,e.language,f);if(Q.status==="needs_details")o(r("need_macro_photo")||"I need a closer look. Please take a macro photo.","info"),d("capture_macro");else{if(Q.status==="error")throw new Error(Q.error);M(Q),d("result")}}catch(Q){console.error(Q);let ie=Q.message||r("error_diagnosis_failed")||"Diagnosis failed.";ie.includes("NOT_PLANT")?ie=r("error_not_plant"):(ie.includes("503")||ie.includes("overloaded"))&&(ie=r("error_server_busy")),o(ie,"error"),d("capture_main")}finally{E(!1)}},j=async()=>{if(t&&!V)try{const Z=await JI(t.uid,f,y,D);H(!0),o(r("treatment_started")||"Tedavi sreci balatld!","success"),setTimeout(()=>{n("/analyses",{state:{showTreatmentGuide:!0,newAnalysisId:Z}})},500)}catch(Z){console.error("Manual save failed:",Z),o((r("save_fail")||"Failed to save analysis:")+" "+Z.message,"error")}},N=()=>{n("/login",{state:{pendingResult:D,pendingImages:y,pendingPlantType:f,returnUrl:"/"}})},G=()=>{v({main:null,macro:null}),g(""),M(null),H(!1),d("input_type"),c.current&&(c.current.value="")},J=()=>b.jsxs("div",{className:"flex flex-col items-center w-full animate-fade-in relative overflow-hidden",children:[b.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0 opacity-30 dark:opacity-10",children:[b.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-green-400 rounded-full mix-blend-multiply filter blur-[100px] animate-float opacity-70"}),b.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-emerald-300 rounded-full mix-blend-multiply filter blur-[120px] animate-float delay-100 opacity-70"})]}),b.jsxs("div",{className:"text-center max-w-4xl py-20 px-4 z-10",children:[b.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-2 rounded-full bg-white/50 dark:bg-gray-800/50 backdrop-blur-md border border-white/20 dark:border-gray-700/50 shadow-sm mb-8 animate-fade-in",children:[b.jsx(LV,{className:"w-4 h-4 text-amber-500"}),b.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent font-bold text-sm tracking-wide",children:r("ai_powered_v2")||"POWERED BY GEMINI AI"})]}),b.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-gray-900 dark:text-white mb-6 leading-tight tracking-tight animate-slide-up",children:[r("hero_title_1")||"Heal your plants with"," ",b.jsx("br",{}),b.jsx("span",{className:"text-gradient drop-shadow-sm",children:r("hero_title_highlight")||"AI Precision"})]}),b.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-2xl mx-auto leading-relaxed animate-slide-up delay-100",children:r("hero_desc_v2")||"Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo."}),b.jsxs("button",{onClick:()=>d("input_type"),className:"group relative bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-5 px-12 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all text-xl flex items-center justify-center gap-3 mx-auto animate-slide-up delay-200",children:[b.jsx("div",{className:"absolute inset-0 rounded-full bg-white/20 group-hover:scale-110 transition-transform opacity-0 group-hover:opacity-100 duration-500 blur-lg"}),b.jsxs("span",{className:"relative flex items-center gap-3",children:[b.jsx(nc,{className:"w-6 h-6"}),r("start_diagnosis")]})]})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-6xl px-4 z-10 mb-20 animate-slide-up delay-300",children:[{title:r("feature_1_title")||"Instant Analysis",desc:r("feature_1_desc")||"Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",icon:tL,color:"from-yellow-400 to-orange-500"},{title:r("feature_2_title")||"Smart Interactions",desc:r("feature_2_desc")||"The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",icon:Bj,color:"from-blue-400 to-indigo-500"},{title:r("feature_3_title")||"Verified Treatments",desc:r("feature_3_desc")||"Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",icon:jV,color:"from-green-400 to-emerald-500"}].map((Z,q)=>{const Q=Z.icon;return b.jsxs("div",{className:"glass-card p-8 hover:scale-[1.02] transition-transform duration-300 group",children:[b.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 bg-gradient-to-br ${Z.color} shadow-lg text-white transform group-hover:rotate-6 transition-transform`,children:b.jsx(Q,{className:"w-7 h-7"})}),b.jsx("h3",{className:"font-bold text-2xl mb-3 text-gray-900 dark:text-white",children:Z.title}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:Z.desc})]},q)})}),b.jsx("div",{className:"w-full max-w-6xl px-4 z-10 mb-20",children:b.jsxs("div",{className:"glass p-10 rounded-3xl text-center md:text-left flex flex-col md:flex-row items-center gap-10",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:r("summary_title")||"Your Personal Pocket Botanist"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-lg leading-relaxed",children:r("summary_desc")||"Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs."}),b.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start",children:[b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(X_,{className:"w-4 h-4 text-green-500"})," 95% Accuracy"]}),b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(gT,{className:"w-4 h-4 text-blue-500"})," Macro Support"]})]})]}),b.jsx("div",{className:"w-full md:w-1/3 flex justify-center",children:b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full blur-2xl opacity-20 animate-pulse"}),b.jsx("img",{src:"/placeholder-plant.png",onError:Z=>{Z.target.style.display="none"},className:"relative w-48 h-48 object-contain drop-shadow-2xl",alt:""}),b.jsx(Fr,{className:"w-48 h-48 text-green-600 dark:text-green-400 drop-shadow-2xl relative z-10"})]})})]})})]}),P=()=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-4 rounded-full mb-6 text-green-600 dark:text-green-400",children:b.jsx(Fr,{className:"w-12 h-12"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-center",children:r("scan_step_1")}),b.jsx("p",{className:"text-gray-500 mb-6 text-center",children:r("what_plant_question")}),b.jsx("input",{type:"text",value:f,onChange:Z=>g(Z.target.value),placeholder:r("what_plant_placeholder"),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 mb-4 focus:ring-2 focus:ring-green-500 outline-none"}),b.jsxs("button",{onClick:Y,disabled:!f.trim(),className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[r("next_step")," ",b.jsx(PI,{className:"w-4 h-4"})]}),b.jsx("button",{onClick:U,className:"mt-4 text-gray-500 text-sm hover:underline",children:r("skip")})]}),O=Z=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:Z?r("close_up_photo")||"Close-up Photo":r("scan_step_2")}),b.jsxs("div",{className:"w-full space-y-4",children:[b.jsxs("button",{onClick:()=>B(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-5 px-10 rounded-2xl shadow-xl flex items-center justify-center gap-4 text-xl transition-transform active:scale-95",children:[b.jsx(nc,{className:"w-8 h-8"}),b.jsx("span",{children:r("open_camera")||"Open Camera"})]}),b.jsxs("button",{onClick:R,className:"w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-bold py-4 px-10 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-md flex items-center justify-center gap-4 text-lg transition-transform active:scale-95",children:[b.jsx(UI,{className:"w-6 h-6"}),b.jsx("span",{children:r("upload_gallery")||"Select from Gallery"})]})]}),b.jsx("button",{onClick:()=>d("input_type"),className:"mt-6 text-gray-500 underline",children:r("back")})]}),ee=()=>b.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[b.jsxs("div",{className:"relative w-64 h-64 mb-8 rounded-2xl overflow-hidden shadow-2xl border-4 border-green-500",children:[y.main&&b.jsx("img",{src:y.main,alt:"Analyzing",className:"w-full h-full object-cover opacity-50"}),b.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:b.jsx(wa,{className:"w-16 h-16 text-white animate-spin"})})]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white animate-bounce",children:r("analyzing")||"Analyzing..."}),b.jsx("p",{className:"text-gray-500 mt-2",children:r("ai_thinking")||"AI Botanist is thinking..."})]}),W=()=>b.jsxs("div",{className:"w-full flex gap-8 flex-col md:flex-row items-start animate-fade-in relative justify-center",children:[b.jsx("div",{className:"w-full md:w-1/3 flex-shrink-0 z-0",children:b.jsxs("div",{className:"sticky top-4",children:[b.jsx("img",{src:y.main,alt:"Analyzed Plant",className:"w-full rounded-2xl shadow-lg border-2 border-green-100 dark:border-green-900"}),y.macro&&b.jsx("img",{src:y.macro,alt:"Macro Detail",className:"w-24 h-24 rounded-lg shadow border border-white absolute bottom-4 right-4"}),t&&b.jsx("button",{onClick:j,disabled:V,className:`mt-4 w-full font-bold py-4 px-6 rounded-xl border shadow-lg transition-transform hover:-translate-y-0.5 flex items-center justify-center gap-3 ${V?"bg-gray-100 text-gray-500 border-gray-200 cursor-default":"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white border-transparent"}`,children:V?b.jsxs(b.Fragment,{children:[b.jsx(Z_,{className:"w-6 h-6"}),b.jsx("span",{children:r("saved")||"Kaydedildi"})]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"bg-white/20 p-1 rounded-full",children:b.jsx(FI,{className:"w-5 h-5"})}),b.jsx("span",{className:"text-lg",children:D?.is_treatable===!1?r("save_info")||"Bilgiyi Kaydet":r("start_treatment")||"Tedaviye Bala"})]})}),b.jsxs("button",{onClick:G,className:"mt-4 w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-semibold py-3 px-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-all",children:[r("take_photo")," (Reset)"]})]})}),b.jsxs("div",{className:"w-full md:w-2/3 relative",children:[b.jsx("div",{className:`transition-all duration-500 ${t?"":"filter blur-md select-none pointer-events-none opacity-50"}`,children:b.jsx(zL,{result:D,onReset:G})}),!t&&b.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 backdrop-blur-[2px] rounded-2xl",children:b.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 p-8 rounded-3xl shadow-2xl text-center max-w-sm border border-white/20 mx-4 transform transition-all hover:scale-105",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:b.jsx(gT,{className:"w-8 h-8 text-green-600"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:r("login_to_view")}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm",children:r("login_blur_text")}),b.jsx("button",{onClick:N,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg hover:shadow-green-500/25 active:scale-95",children:r("login")})]})})]})]});return b.jsxs("div",{className:`flex flex-col w-full max-w-7xl mx-auto p-4 lg:p-8 ${u==="result"?"items-start":"items-center justify-center min-h-full"}`,children:[b.jsx("input",{type:"file",accept:"image/*",ref:c,onChange:S,className:"hidden"}),b.jsx(BL,{isOpen:F,onClose:()=>B(!1),onCapture:T}),u==="landing"?J():b.jsxs(b.Fragment,{children:[u!=="result"&&b.jsxs("button",{onClick:()=>d("landing"),className:"self-start mb-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 flex items-center gap-2",children:[" ",r("back")]}),u==="input_type"&&P(),u==="capture_main"&&O(!1),u==="capture_macro"&&O(!0),u==="analyzing"&&ee(),u==="result"&&W()]})]})}const Sf=43200,jT=1440,VT=Symbol.for("constructDateFrom");function tv(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&VT in r?r[VT](e):r instanceof Date?new r.constructor(e):new Date(e)}function Na(r,e){return tv(r,r)}let HL={};function qL(){return HL}function LT(r){const e=Na(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function nv(r,...e){const t=tv.bind(null,r||e.find(n=>typeof n=="object"));return e.map(t)}function Gf(r,e){const t=+Na(r)-+Na(e);return t<0?-1:t>0?1:t}function $L(r){return tv(r,Date.now())}function GL(r,e,t){const[n,s]=nv(t?.in,r,e),o=n.getFullYear()-s.getFullYear(),c=n.getMonth()-s.getMonth();return o*12+c}function KL(r){return e=>{const n=(r?Math[r]:Math.trunc)(e);return n===0?0:n}}function YL(r,e){return+Na(r)-+Na(e)}function QL(r,e){const t=Na(r);return t.setHours(23,59,59,999),t}function WL(r,e){const t=Na(r),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function XL(r,e){const t=Na(r);return+QL(t)==+WL(t)}function JL(r,e,t){const[n,s,o]=nv(t?.in,r,r,e),c=Gf(s,o),u=Math.abs(GL(s,o));if(u<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-c*u);let d=Gf(s,o)===-c;XL(n)&&u===1&&Gf(n,o)===1&&(d=!1);const f=c*(u-+d);return f===0?0:f}function ZL(r,e,t){const n=YL(r,e)/1e3;return KL(t?.roundingMethod)(n)}const eU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tU=(r,e,t)=>{let n;const s=eU[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function rc(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const nU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},iU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sU={date:rc({formats:nU,defaultWidth:"full"}),time:rc({formats:rU,defaultWidth:"full"}),dateTime:rc({formats:iU,defaultWidth:"full"})},aU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},oU=(r,e,t,n)=>aU[r];function Ii(r){return(e,t)=>{const n=t?.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const c=r.defaultFormattingWidth||r.defaultWidth,u=t?.width?String(t.width):c;s=r.formattingValues[u]||r.formattingValues[c]}else{const c=r.defaultWidth,u=t?.width?String(t.width):r.defaultWidth;s=r.values[u]||r.values[c]}const o=r.argumentCallback?r.argumentCallback(e):e;return s[o]}}const lU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},uU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},hU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mU=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},gU={ordinalNumber:mU,era:Ii({values:lU,defaultWidth:"wide"}),quarter:Ii({values:cU,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Ii({values:uU,defaultWidth:"wide"}),day:Ii({values:hU,defaultWidth:"wide"}),dayPeriod:Ii({values:dU,defaultWidth:"wide",formattingValues:fU,defaultFormattingWidth:"wide"})};function Ri(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],o=e.match(s);if(!o)return null;const c=o[0],u=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],d=Array.isArray(u)?yU(u,y=>y.test(c)):pU(u,y=>y.test(c));let f;f=r.valueCallback?r.valueCallback(d):d,f=t.valueCallback?t.valueCallback(f):f;const g=e.slice(c.length);return{value:f,rest:g}}}function pU(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function yU(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function cR(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],o=e.match(r.parsePattern);if(!o)return null;let c=r.valueCallback?r.valueCallback(o[0]):o[0];c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(s.length);return{value:c,rest:u}}}const _U=/^(\d+)(th|st|nd|rd)?/i,vU=/\d+/i,bU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},wU={any:[/^b/i,/^(a|c)/i]},xU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},EU={any:[/1/i,/2/i,/3/i,/4/i]},TU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},SU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},AU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},IU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},RU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},CU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},NU={ordinalNumber:cR({matchPattern:_U,parsePattern:vU,valueCallback:r=>parseInt(r,10)}),era:Ri({matchPatterns:bU,defaultMatchWidth:"wide",parsePatterns:wU,defaultParseWidth:"any"}),quarter:Ri({matchPatterns:xU,defaultMatchWidth:"wide",parsePatterns:EU,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Ri({matchPatterns:TU,defaultMatchWidth:"wide",parsePatterns:SU,defaultParseWidth:"any"}),day:Ri({matchPatterns:AU,defaultMatchWidth:"wide",parsePatterns:IU,defaultParseWidth:"any"}),dayPeriod:Ri({matchPatterns:RU,defaultMatchWidth:"any",parsePatterns:CU,defaultParseWidth:"any"})},Hh={code:"en-US",formatDistance:tU,formatLong:sU,formatRelative:oU,localize:gU,match:NU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function kU(r,e,t){const n=qL(),s=t?.locale??n.locale??Hh,o=2520,c=Gf(r,e);if(isNaN(c))throw new RangeError("Invalid time value");const u=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:c}),[d,f]=nv(t?.in,...c>0?[e,r]:[r,e]),g=ZL(f,d),y=(LT(f)-LT(d))/1e3,v=Math.round((g-y)/60);let w;if(v<2)return t?.includeSeconds?g<5?s.formatDistance("lessThanXSeconds",5,u):g<10?s.formatDistance("lessThanXSeconds",10,u):g<20?s.formatDistance("lessThanXSeconds",20,u):g<40?s.formatDistance("halfAMinute",0,u):g<60?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",1,u):v===0?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",v,u);if(v<45)return s.formatDistance("xMinutes",v,u);if(v<90)return s.formatDistance("aboutXHours",1,u);if(v<jT){const E=Math.round(v/60);return s.formatDistance("aboutXHours",E,u)}else{if(v<o)return s.formatDistance("xDays",1,u);if(v<Sf){const E=Math.round(v/jT);return s.formatDistance("xDays",E,u)}else if(v<Sf*2)return w=Math.round(v/Sf),s.formatDistance("aboutXMonths",w,u)}if(w=JL(f,d),w<12){const E=Math.round(v/Sf);return s.formatDistance("xMonths",E,u)}else{const E=w%12,D=Math.trunc(w/12);return E<3?s.formatDistance("aboutXYears",D,u):E<9?s.formatDistance("overXYears",D,u):s.formatDistance("almostXYears",D+1,u)}}function mg(r,e){return kU(r,$L(r),e)}const DU={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},OU=(r,e,t)=>{let n;const s=DU[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?n+" sonra":n+" nce":n},MU={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},PU={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},jU={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},VU={date:rc({formats:MU,defaultWidth:"full"}),time:rc({formats:PU,defaultWidth:"full"}),dateTime:rc({formats:jU,defaultWidth:"full"})},LU={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},UU=(r,e,t,n)=>LU[r],zU={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},BU={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},FU={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},HU={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},qU={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},$U={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},GU=(r,e)=>Number(r)+".",KU={ordinalNumber:GU,era:Ii({values:zU,defaultWidth:"wide"}),quarter:Ii({values:BU,defaultWidth:"wide",argumentCallback:r=>Number(r)-1}),month:Ii({values:FU,defaultWidth:"wide"}),day:Ii({values:HU,defaultWidth:"wide"}),dayPeriod:Ii({values:qU,defaultWidth:"wide",formattingValues:$U,defaultFormattingWidth:"wide"})},YU=/^(\d+)(\.)?/i,QU=/\d+/i,WU={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},XU={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},JU={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},ZU={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},e9={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},t9={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},n9={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},r9={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},i9={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},s9={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},a9={ordinalNumber:cR({matchPattern:YU,parsePattern:QU,valueCallback:function(r){return parseInt(r,10)}}),era:Ri({matchPatterns:WU,defaultMatchWidth:"wide",parsePatterns:XU,defaultParseWidth:"any"}),quarter:Ri({matchPatterns:JU,defaultMatchWidth:"wide",parsePatterns:ZU,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Ri({matchPatterns:e9,defaultMatchWidth:"wide",parsePatterns:t9,defaultParseWidth:"any"}),day:Ri({matchPatterns:n9,defaultMatchWidth:"wide",parsePatterns:r9,defaultParseWidth:"any"}),dayPeriod:Ri({matchPatterns:i9,defaultMatchWidth:"any",parsePatterns:s9,defaultParseWidth:"any"})},gg={code:"tr",formatDistance:OU,formatLong:VU,formatRelative:UU,localize:KU,match:a9,options:{weekStartsOn:1,firstWeekContainsDate:1}};function uR({post:r,onUserClick:e,onViewAnalysis:t}){const{t:n,i18n:s}=wn(),{currentUser:o}=ai(),c=s.language==="tr"?gg:Hh,[u,d]=$.useState(""),[f,g]=$.useState(!1),[y,v]=$.useState(!1),[w,E]=$.useState(!1),[D,M]=$.useState(r?.content||""),V=async()=>{try{await lR(r.id,{content:D}),E(!1)}catch{alert("Failed to update post")}};if(!r)return null;const H=o?.uid===r.userId,F=r.likes&&o&&r.likes.includes(o.uid),B=r.likes?r.likes.length:0,Y=r.comments?r.comments.length:0,[U,R]=$.useState("");$.useEffect(()=>{const N=()=>{if(!r.createdAt?.seconds){R(n("just_now")||"Just now");return}const J=new Date(r.createdAt.seconds*1e3);(new Date-J)/(1e3*60*60)>24?R(J.toLocaleDateString(s.language==="tr"?"tr-TR":"en-US",{day:"numeric",month:"long",year:"numeric"})):R(mg(J,{addSuffix:!0,locale:c,includeSeconds:!1}))};N();const G=setInterval(N,6e4);return()=>clearInterval(G)},[r.createdAt,c,n,s.language]),r.createdAt?.seconds&&new Date(r.createdAt.seconds*1e3);const T=async()=>{if(!(!o||y)){v(!0);try{await aR(r.id,o.uid)}catch(N){console.error(N)}finally{v(!1)}}},S=async()=>{if(window.confirm(n("confirm_delete_post")||"Delete this post?"))try{await sR(r.id)}catch{alert("Failed to delete post")}},I=async N=>{if(N.preventDefault(),!(!u.trim()||!o))try{await oR(r.id,o.uid,o.displayName||"User",u),d("")}catch(G){console.error(G),alert("Failed to post comment")}},k=async()=>{const N={title:`Plant AI - ${r.title||r.authorName}`,text:r.content,url:window.location.href};if(navigator.share)try{await navigator.share(N)}catch{console.log("Share canceled")}else navigator.clipboard.writeText(window.location.href),alert(n("link_copied")||"Link copied!")},j=N=>!N||N==="Unknown"?null:n(`plant_${N.toLowerCase()}`)||n(N)||N;return b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-4 animate-fade-in relative group",children:[H&&b.jsx("button",{onClick:S,className:"absolute top-4 right-4 p-2 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:text-red-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:n("delete")||"Delete",children:b.jsx(vh,{className:"w-4 h-4"})}),!r.hideAuthor&&b.jsx("div",{className:"p-4 flex items-center justify-between",children:b.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e&&e(r.userId),children:[b.jsx("img",{src:H&&(o?.photoURL||o?.avatar)?o.photoURL||o.avatar:r.userAvatar||`https://ui-avatars.com/api/?name=${r.authorName||"Gardener"}&background=random`,alt:r.authorName,className:"w-10 h-10 rounded-full object-cover border border-gray-200"}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 leading-tight hover:underline",children:r.authorName||n("gardener")}),b.jsx("span",{className:"text-xs text-gray-500",children:U})]})]})}),b.jsxs("div",{className:`px-4 pb-2 ${r.hideAuthor?"pt-4":""}`,children:[r.title&&b.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-1",children:r.title}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-3 whitespace-pre-wrap",children:r.content}),r.plantType&&r.plantType!=="Unknown"&&b.jsx("span",{className:"inline-block bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 text-xs px-2 py-1 rounded-md mb-2",children:j(r.plantType)}),r.relatedAnalysisId&&b.jsx("div",{className:"mt-2",children:b.jsxs("button",{onClick:()=>t&&t(r.relatedAnalysisId),className:"w-full py-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:[b.jsx("span",{className:"bg-green-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"AI"}),n("view_analysis_report")||"Analiz Raporunu Gr"]})})]}),r.image&&b.jsxs("div",{className:"w-full h-64 sm:h-80 bg-gray-100 dark:bg-gray-900 overflow-hidden cursor-pointer relative group/image",onClick:()=>window.open(r.image,"_blank"),children:[b.jsx("img",{src:r.image,alt:"Post",className:"w-full h-full object-cover",loading:"lazy"}),b.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 backdrop-blur-sm",children:[b.jsx(yh,{className:"w-3 h-3"}),b.jsxs("span",{children:[20+(r.likes?.length||0)*5," ",n("views")||"Grntlenme"]})]})]}),b.jsxs("div",{className:"p-4 flex items-center justify-between border-t border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("button",{onClick:T,className:`flex items-center gap-1.5 transition-colors ${F?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[b.jsx(VI,{className:`w-5 h-5 ${F?"fill-current":""}`}),b.jsx("span",{className:"text-sm font-medium",children:B||n("like")})]}),b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-blue-500 transition-colors",onClick:()=>g(!f),children:[b.jsx(yh,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:Y||n("comment")})]}),H&&b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-green-500 transition-colors",onClick:()=>E(!0),children:[b.jsx(zI,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:n("edit")})]})]}),b.jsxs("button",{onClick:k,className:"text-gray-500 hover:text-green-600 transition-colors flex items-center gap-1",children:[b.jsx(k0,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm hidden sm:inline",children:n("share")||"Payla"})]})]}),w&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-lg shadow-2xl",children:[b.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white",children:n("edit_post")}),b.jsx("textarea",{className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white mb-4",value:D,onChange:N=>M(N.target.value),rows:4}),b.jsxs("div",{className:"flex justify-end gap-2",children:[b.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg dark:text-gray-300 dark:hover:bg-gray-700",children:n("cancel")}),b.jsx("button",{onClick:V,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:n("save")})]})]})}),f&&b.jsxs("div",{className:"px-4 pb-4 border-t border-gray-50 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/50",children:[b.jsxs("div",{className:"space-y-3 mt-4 max-h-60 overflow-y-auto mb-4 custom-scrollbar",children:[r.comments&&r.comments.map((N,G)=>b.jsxs("div",{className:"flex gap-2 items-start text-sm",children:[b.jsxs("span",{className:"font-bold text-gray-900 dark:text-white shrink-0",children:[N.userName,":"]}),b.jsx("span",{className:"text-gray-700 dark:text-gray-300 break-words",children:N.text})]},G)),(!r.comments||r.comments.length===0)&&b.jsx("p",{className:"text-gray-400 text-center text-sm italic",children:n("no_comments_yet")})]}),o?b.jsxs("form",{onSubmit:I,className:"flex gap-2",children:[b.jsx("input",{type:"text",value:u,onChange:N=>d(N.target.value),placeholder:n("add_comment_placeholder"),className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 dark:bg-gray-700 text-sm outline-none focus:border-green-500"}),b.jsx("button",{type:"submit",disabled:!u.trim(),className:"p-2 bg-green-600 text-white rounded-lg disabled:opacity-50 hover:bg-green-700",children:b.jsx(_h,{className:"w-4 h-4"})})]}):b.jsx("p",{className:"text-center text-sm text-gray-500",children:n("login_to_comment")})]})]})}const Kf=[{value:"tomato",labelKey:"plant_tomato"},{value:"pepper",labelKey:"plant_pepper"},{value:"cucumber",labelKey:"plant_cucumber"},{value:"eggplant",labelKey:"plant_eggplant"},{value:"potato",labelKey:"plant_potato"},{value:"onion",labelKey:"plant_onion"},{value:"garlic",labelKey:"plant_garlic"},{value:"lettuce",labelKey:"plant_lettuce"},{value:"spinach",labelKey:"plant_spinach"},{value:"carrot",labelKey:"plant_carrot"},{value:"bean",labelKey:"plant_bean"},{value:"corn",labelKey:"plant_corn"},{value:"zucchini",labelKey:"plant_zucchini"},{value:"strawberry",labelKey:"plant_strawberry"},{value:"lemon",labelKey:"plant_lemon"},{value:"orange",labelKey:"plant_orange"},{value:"apple",labelKey:"plant_apple"},{value:"grape",labelKey:"plant_grape"},{value:"watermelon",labelKey:"plant_watermelon"},{value:"melon",labelKey:"plant_melon"},{value:"cherry",labelKey:"plant_cherry"},{value:"peach",labelKey:"plant_peach"},{value:"rose",labelKey:"plant_rose"},{value:"orchid",labelKey:"plant_orchid"},{value:"succulent",labelKey:"plant_succulent"},{value:"tulip",labelKey:"plant_tulip"},{value:"sunflower",labelKey:"plant_sunflower"},{value:"daisy",labelKey:"plant_daisy"},{value:"lavender",labelKey:"plant_lavender"},{value:"cactus",labelKey:"plant_cactus"},{value:"olive",labelKey:"plant_olive"},{value:"pine",labelKey:"plant_pine"},{value:"palm",labelKey:"plant_palm"},{value:"mint",labelKey:"plant_mint"},{value:"basil",labelKey:"plant_basil"},{value:"rosemary",labelKey:"plant_rosemary"},{value:"parsley",labelKey:"plant_parsley"},{value:"other",labelKey:"plant_other"}];function o9(r,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if(n!=="default"&&!(n in r)){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(r)}function hR(r,e){return new Promise((function(t,n){let s;return l9(r).then((function(o){try{return s=o,t(new Blob([e.slice(0,2),s,e.slice(2)],{type:"image/jpeg"}))}catch(c){return n(c)}}),n)}))}const l9=r=>new Promise(((e,t)=>{const n=new FileReader;n.addEventListener("load",(({target:{result:s}})=>{const o=new DataView(s);let c=0;if(o.getUint16(c)!==65496)return t("not a valid JPEG");for(c+=2;;){const u=o.getUint16(c);if(u===65498)break;const d=o.getUint16(c+2);if(u===65505&&o.getUint32(c+4)===1165519206){const f=c+10;let g;switch(o.getUint16(f)){case 18761:g=!0;break;case 19789:g=!1;break;default:return t("TIFF header contains invalid endian")}if(o.getUint16(f+2,g)!==42)return t("TIFF header contains invalid version");const y=o.getUint32(f+4,g),v=f+y+2+12*o.getUint16(f+y,g);for(let w=f+y+2;w<v;w+=12)if(o.getUint16(w,g)==274){if(o.getUint16(w+2,g)!==3)return t("Orientation data type is invalid");if(o.getUint32(w+4,g)!==1)return t("Orientation data count is invalid");o.setUint16(w+8,1,g);break}return e(s.slice(c,c+2+d))}c+=2+d}return e(new Blob)})),n.readAsArrayBuffer(r)}));var Am={},c9={get exports(){return Am},set exports(r){Am=r}};(function(r){var e,t,n={};c9.exports=n,n.parse=function(s,o){for(var c=n.bin.readUshort,u=n.bin.readUint,d=0,f={},g=new Uint8Array(s),y=g.length-4;u(g,y)!=101010256;)y--;d=y,d+=4;var v=c(g,d+=4);c(g,d+=2);var w=u(g,d+=2),E=u(g,d+=4);d+=4,d=E;for(var D=0;D<v;D++){u(g,d),d+=4,d+=4,d+=4,u(g,d+=4),w=u(g,d+=4);var M=u(g,d+=4),V=c(g,d+=4),H=c(g,d+2),F=c(g,d+4);d+=6;var B=u(g,d+=8);d+=4,d+=V+H+F,n._readLocal(g,B,f,w,M,o)}return f},n._readLocal=function(s,o,c,u,d,f){var g=n.bin.readUshort,y=n.bin.readUint;y(s,o),g(s,o+=4),g(s,o+=2);var v=g(s,o+=2);y(s,o+=2),y(s,o+=4),o+=4;var w=g(s,o+=8),E=g(s,o+=2);o+=2;var D=n.bin.readUTF8(s,o,w);if(o+=w,o+=E,f)c[D]={size:d,csize:u};else{var M=new Uint8Array(s.buffer,o);if(v==0)c[D]=new Uint8Array(M.buffer.slice(o,o+u));else{if(v!=8)throw"unknown compression method: "+v;var V=new Uint8Array(d);n.inflateRaw(M,V),c[D]=V}}},n.inflateRaw=function(s,o){return n.F.inflate(s,o)},n.inflate=function(s,o){return s[0],s[1],n.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),o)},n.deflate=function(s,o){o==null&&(o={level:6});var c=0,u=new Uint8Array(50+Math.floor(1.1*s.length));u[c]=120,u[c+1]=156,c+=2,c=n.F.deflateRaw(s,u,c,o.level);var d=n.adler(s,0,s.length);return u[c+0]=d>>>24&255,u[c+1]=d>>>16&255,u[c+2]=d>>>8&255,u[c+3]=d>>>0&255,new Uint8Array(u.buffer,0,c+4)},n.deflateRaw=function(s,o){o==null&&(o={level:6});var c=new Uint8Array(50+Math.floor(1.1*s.length)),u=n.F.deflateRaw(s,c,u,o.level);return new Uint8Array(c.buffer,0,u)},n.encode=function(s,o){o==null&&(o=!1);var c=0,u=n.bin.writeUint,d=n.bin.writeUshort,f={};for(var g in s){var y=!n._noNeed(g)&&!o,v=s[g],w=n.crc.crc(v,0,v.length);f[g]={cpr:y,usize:v.length,crc:w,file:y?n.deflateRaw(v):v}}for(var g in f)c+=f[g].file.length+30+46+2*n.bin.sizeUTF8(g);c+=22;var E=new Uint8Array(c),D=0,M=[];for(var g in f){var V=f[g];M.push(D),D=n._writeHeader(E,D,g,V,0)}var H=0,F=D;for(var g in f)V=f[g],M.push(D),D=n._writeHeader(E,D,g,V,1,M[H++]);var B=D-F;return u(E,D,101010256),D+=4,d(E,D+=4,H),d(E,D+=2,H),u(E,D+=2,B),u(E,D+=4,F),D+=4,D+=2,E.buffer},n._noNeed=function(s){var o=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},n._writeHeader=function(s,o,c,u,d,f){var g=n.bin.writeUint,y=n.bin.writeUshort,v=u.file;return g(s,o,d==0?67324752:33639248),o+=4,d==1&&(o+=2),y(s,o,20),y(s,o+=2,0),y(s,o+=2,u.cpr?8:0),g(s,o+=2,0),g(s,o+=4,u.crc),g(s,o+=4,v.length),g(s,o+=4,u.usize),y(s,o+=4,n.bin.sizeUTF8(c)),y(s,o+=2,0),o+=2,d==1&&(o+=2,o+=2,g(s,o+=6,f),o+=4),o+=n.bin.writeUTF8(s,o,c),d==0&&(s.set(v,o),o+=v.length),o},n.crc={table:(function(){for(var s=new Uint32Array(256),o=0;o<256;o++){for(var c=o,u=0;u<8;u++)1&c?c=3988292384^c>>>1:c>>>=1;s[o]=c}return s})(),update:function(s,o,c,u){for(var d=0;d<u;d++)s=n.crc.table[255&(s^o[c+d])]^s>>>8;return s},crc:function(s,o,c){return 4294967295^n.crc.update(4294967295,s,o,c)}},n.adler=function(s,o,c){for(var u=1,d=0,f=o,g=o+c;f<g;){for(var y=Math.min(f+5552,g);f<y;)d+=u+=s[f++];u%=65521,d%=65521}return d<<16|u},n.bin={readUshort:function(s,o){return s[o]|s[o+1]<<8},writeUshort:function(s,o,c){s[o]=255&c,s[o+1]=c>>8&255},readUint:function(s,o){return 16777216*s[o+3]+(s[o+2]<<16|s[o+1]<<8|s[o])},writeUint:function(s,o,c){s[o]=255&c,s[o+1]=c>>8&255,s[o+2]=c>>16&255,s[o+3]=c>>24&255},readASCII:function(s,o,c){for(var u="",d=0;d<c;d++)u+=String.fromCharCode(s[o+d]);return u},writeASCII:function(s,o,c){for(var u=0;u<c.length;u++)s[o+u]=c.charCodeAt(u)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,o,c){for(var u,d="",f=0;f<c;f++)d+="%"+n.bin.pad(s[o+f].toString(16));try{u=decodeURIComponent(d)}catch{return n.bin.readASCII(s,o,c)}return u},writeUTF8:function(s,o,c){for(var u=c.length,d=0,f=0;f<u;f++){var g=c.charCodeAt(f);if((4294967168&g)==0)s[o+d]=g,d++;else if((4294965248&g)==0)s[o+d]=192|g>>6,s[o+d+1]=128|g>>0&63,d+=2;else if((4294901760&g)==0)s[o+d]=224|g>>12,s[o+d+1]=128|g>>6&63,s[o+d+2]=128|g>>0&63,d+=3;else{if((4292870144&g)!=0)throw"e";s[o+d]=240|g>>18,s[o+d+1]=128|g>>12&63,s[o+d+2]=128|g>>6&63,s[o+d+3]=128|g>>0&63,d+=4}}return d},sizeUTF8:function(s){for(var o=s.length,c=0,u=0;u<o;u++){var d=s.charCodeAt(u);if((4294967168&d)==0)c++;else if((4294965248&d)==0)c+=2;else if((4294901760&d)==0)c+=3;else{if((4292870144&d)!=0)throw"e";c+=4}}return c}},n.F={},n.F.deflateRaw=function(s,o,c,u){var d=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],f=n.F.U,g=n.F._goodIndex;n.F._hash;var y=n.F._putsE,v=0,w=c<<3,E=0,D=s.length;if(u==0){for(;v<D;)y(o,w,v+(k=Math.min(65535,D-v))==D?1:0),w=n.F._copyExact(s,v,k,o,w+8),v+=k;return w>>>3}var M=f.lits,V=f.strt,H=f.prev,F=0,B=0,Y=0,U=0,R=0,T=0;for(D>2&&(V[T=n.F._hash(s,0)]=0),v=0;v<D;v++){if(R=T,v+1<D-2){T=n.F._hash(s,v+1);var S=v+1&32767;H[S]=V[T],V[T]=S}if(E<=v){(F>14e3||B>26697)&&D-v>100&&(E<v&&(M[F]=v-E,F+=2,E=v),w=n.F._writeBlock(v==D-1||E==D?1:0,M,F,U,s,Y,v-Y,o,w),F=B=U=0,Y=v);var I=0;v<D-2&&(I=n.F._bestMatch(s,v,H,R,Math.min(d[2],D-v),d[3]));var k=I>>>16,j=65535&I;if(I!=0){j=65535&I;var N=g(k=I>>>16,f.of0);f.lhst[257+N]++;var G=g(j,f.df0);f.dhst[G]++,U+=f.exb[N]+f.dxb[G],M[F]=k<<23|v-E,M[F+1]=j<<16|N<<8|G,F+=2,E=v+k}else f.lhst[s[v]]++;B++}}for(Y==v&&s.length!=0||(E<v&&(M[F]=v-E,F+=2,E=v),w=n.F._writeBlock(1,M,F,U,s,Y,v-Y,o,w),F=0,B=0,F=B=U=0,Y=v);(7&w)!=0;)w++;return w>>>3},n.F._bestMatch=function(s,o,c,u,d,f){var g=32767&o,y=c[g],v=g-y+32768&32767;if(y==g||u!=n.F._hash(s,o-v))return 0;for(var w=0,E=0,D=Math.min(32767,o);v<=D&&--f!=0&&y!=g;){if(w==0||s[o+w]==s[o+w-v]){var M=n.F._howLong(s,o,v);if(M>w){if(E=v,(w=M)>=d)break;v+2<M&&(M=v+2);for(var V=0,H=0;H<M-2;H++){var F=o-v+H+32768&32767,B=F-c[F]+32768&32767;B>V&&(V=B,y=F)}}}v+=(g=y)-(y=c[g])+32768&32767}return w<<16|E},n.F._howLong=function(s,o,c){if(s[o]!=s[o-c]||s[o+1]!=s[o+1-c]||s[o+2]!=s[o+2-c])return 0;var u=o,d=Math.min(s.length,o+258);for(o+=3;o<d&&s[o]==s[o-c];)o++;return o-u},n.F._hash=function(s,o){return(s[o]<<8|s[o+1])+(s[o+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(s,o,c,u,d,f,g,y,v){var w,E,D,M,V,H,F,B,Y,U=n.F.U,R=n.F._putsF,T=n.F._putsE;U.lhst[256]++,E=(w=n.F.getTrees())[0],D=w[1],M=w[2],V=w[3],H=w[4],F=w[5],B=w[6],Y=w[7];var S=32+((v+3&7)==0?0:8-(v+3&7))+(g<<3),I=u+n.F.contSize(U.fltree,U.lhst)+n.F.contSize(U.fdtree,U.dhst),k=u+n.F.contSize(U.ltree,U.lhst)+n.F.contSize(U.dtree,U.dhst);k+=14+3*F+n.F.contSize(U.itree,U.ihst)+(2*U.ihst[16]+3*U.ihst[17]+7*U.ihst[18]);for(var j=0;j<286;j++)U.lhst[j]=0;for(j=0;j<30;j++)U.dhst[j]=0;for(j=0;j<19;j++)U.ihst[j]=0;var N=S<I&&S<k?0:I<k?1:2;if(R(y,v,s),R(y,v+1,N),v+=3,N==0){for(;(7&v)!=0;)v++;v=n.F._copyExact(d,f,g,y,v)}else{var G,J;if(N==1&&(G=U.fltree,J=U.fdtree),N==2){n.F.makeCodes(U.ltree,E),n.F.revCodes(U.ltree,E),n.F.makeCodes(U.dtree,D),n.F.revCodes(U.dtree,D),n.F.makeCodes(U.itree,M),n.F.revCodes(U.itree,M),G=U.ltree,J=U.dtree,T(y,v,V-257),T(y,v+=5,H-1),T(y,v+=5,F-4),v+=4;for(var P=0;P<F;P++)T(y,v+3*P,U.itree[1+(U.ordr[P]<<1)]);v+=3*F,v=n.F._codeTiny(B,U.itree,y,v),v=n.F._codeTiny(Y,U.itree,y,v)}for(var O=f,ee=0;ee<c;ee+=2){for(var W=o[ee],Z=W>>>23,q=O+(8388607&W);O<q;)v=n.F._writeLit(d[O++],G,y,v);if(Z!=0){var Q=o[ee+1],ie=Q>>16,se=Q>>8&255,ne=255&Q;T(y,v=n.F._writeLit(257+se,G,y,v),Z-U.of0[se]),v+=U.exb[se],R(y,v=n.F._writeLit(ne,J,y,v),ie-U.df0[ne]),v+=U.dxb[ne],O+=Z}}v=n.F._writeLit(256,G,y,v)}return v},n.F._copyExact=function(s,o,c,u,d){var f=d>>>3;return u[f]=c,u[f+1]=c>>>8,u[f+2]=255-u[f],u[f+3]=255-u[f+1],f+=4,u.set(new Uint8Array(s.buffer,o,c),f),d+(c+4<<3)},n.F.getTrees=function(){for(var s=n.F.U,o=n.F._hufTree(s.lhst,s.ltree,15),c=n.F._hufTree(s.dhst,s.dtree,15),u=[],d=n.F._lenCodes(s.ltree,u),f=[],g=n.F._lenCodes(s.dtree,f),y=0;y<u.length;y+=2)s.ihst[u[y]]++;for(y=0;y<f.length;y+=2)s.ihst[f[y]]++;for(var v=n.F._hufTree(s.ihst,s.itree,7),w=19;w>4&&s.itree[1+(s.ordr[w-1]<<1)]==0;)w--;return[o,c,v,d,g,w,u,f]},n.F.getSecond=function(s){for(var o=[],c=0;c<s.length;c+=2)o.push(s[c+1]);return o},n.F.nonZero=function(s){for(var o="",c=0;c<s.length;c+=2)s[c+1]!=0&&(o+=(c>>1)+",");return o},n.F.contSize=function(s,o){for(var c=0,u=0;u<o.length;u++)c+=o[u]*s[1+(u<<1)];return c},n.F._codeTiny=function(s,o,c,u){for(var d=0;d<s.length;d+=2){var f=s[d],g=s[d+1];u=n.F._writeLit(f,o,c,u);var y=f==16?2:f==17?3:7;f>15&&(n.F._putsE(c,u,g,y),u+=y)}return u},n.F._lenCodes=function(s,o){for(var c=s.length;c!=2&&s[c-1]==0;)c-=2;for(var u=0;u<c;u+=2){var d=s[u+1],f=u+3<c?s[u+3]:-1,g=u+5<c?s[u+5]:-1,y=u==0?-1:s[u-1];if(d==0&&f==d&&g==d){for(var v=u+5;v+2<c&&s[v+2]==d;)v+=2;(w=Math.min(v+1-u>>>1,138))<11?o.push(17,w-3):o.push(18,w-11),u+=2*w-2}else if(d==y&&f==d&&g==d){for(v=u+5;v+2<c&&s[v+2]==d;)v+=2;var w=Math.min(v+1-u>>>1,6);o.push(16,w-3),u+=2*w-2}else o.push(d,0)}return c>>>1},n.F._hufTree=function(s,o,c){var u=[],d=s.length,f=o.length,g=0;for(g=0;g<f;g+=2)o[g]=0,o[g+1]=0;for(g=0;g<d;g++)s[g]!=0&&u.push({lit:g,f:s[g]});var y=u.length,v=u.slice(0);if(y==0)return 0;if(y==1){var w=u[0].lit;return v=w==0?1:0,o[1+(w<<1)]=1,o[1+(v<<1)]=1,1}u.sort((function(B,Y){return B.f-Y.f}));var E=u[0],D=u[1],M=0,V=1,H=2;for(u[0]={lit:-1,f:E.f+D.f,l:E,r:D,d:0};V!=y-1;)E=M!=V&&(H==y||u[M].f<u[H].f)?u[M++]:u[H++],D=M!=V&&(H==y||u[M].f<u[H].f)?u[M++]:u[H++],u[V++]={lit:-1,f:E.f+D.f,l:E,r:D};var F=n.F.setDepth(u[V-1],0);for(F>c&&(n.F.restrictDepth(v,c,F),F=c),g=0;g<y;g++)o[1+(v[g].lit<<1)]=v[g].d;return F},n.F.setDepth=function(s,o){return s.lit!=-1?(s.d=o,o):Math.max(n.F.setDepth(s.l,o+1),n.F.setDepth(s.r,o+1))},n.F.restrictDepth=function(s,o,c){var u=0,d=1<<c-o,f=0;for(s.sort((function(y,v){return v.d==y.d?y.f-v.f:v.d-y.d})),u=0;u<s.length&&s[u].d>o;u++){var g=s[u].d;s[u].d=o,f+=d-(1<<c-g)}for(f>>>=c-o;f>0;)(g=s[u].d)<o?(s[u].d++,f-=1<<o-g-1):u++;for(;u>=0;u--)s[u].d==o&&f<0&&(s[u].d--,f++);f!=0&&console.log("debt left")},n.F._goodIndex=function(s,o){var c=0;return o[16|c]<=s&&(c|=16),o[8|c]<=s&&(c|=8),o[4|c]<=s&&(c|=4),o[2|c]<=s&&(c|=2),o[1|c]<=s&&(c|=1),c},n.F._writeLit=function(s,o,c,u){return n.F._putsF(c,u,o[s<<1]),u+o[1+(s<<1)]},n.F.inflate=function(s,o){var c=Uint8Array;if(s[0]==3&&s[1]==0)return o||new c(0);var u=n.F,d=u._bitsF,f=u._bitsE,g=u._decodeTiny,y=u.makeCodes,v=u.codes2map,w=u._get17,E=u.U,D=o==null;D&&(o=new c(s.length>>>2<<3));for(var M,V,H=0,F=0,B=0,Y=0,U=0,R=0,T=0,S=0,I=0;H==0;)if(H=d(s,I,1),F=d(s,I+1,2),I+=3,F!=0){if(D&&(o=n.F._check(o,S+(1<<17))),F==1&&(M=E.flmap,V=E.fdmap,R=511,T=31),F==2){B=f(s,I,5)+257,Y=f(s,I+5,5)+1,U=f(s,I+10,4)+4,I+=14;for(var k=0;k<38;k+=2)E.itree[k]=0,E.itree[k+1]=0;var j=1;for(k=0;k<U;k++){var N=f(s,I+3*k,3);E.itree[1+(E.ordr[k]<<1)]=N,N>j&&(j=N)}I+=3*U,y(E.itree,j),v(E.itree,j,E.imap),M=E.lmap,V=E.dmap,I=g(E.imap,(1<<j)-1,B+Y,s,I,E.ttree);var G=u._copyOut(E.ttree,0,B,E.ltree);R=(1<<G)-1;var J=u._copyOut(E.ttree,B,Y,E.dtree);T=(1<<J)-1,y(E.ltree,G),v(E.ltree,G,M),y(E.dtree,J),v(E.dtree,J,V)}for(;;){var P=M[w(s,I)&R];I+=15&P;var O=P>>>4;if(!(O>>>8))o[S++]=O;else{if(O==256)break;var ee=S+O-254;if(O>264){var W=E.ldef[O-257];ee=S+(W>>>3)+f(s,I,7&W),I+=7&W}var Z=V[w(s,I)&T];I+=15&Z;var q=Z>>>4,Q=E.ddef[q],ie=(Q>>>4)+d(s,I,15&Q);for(I+=15&Q,D&&(o=n.F._check(o,S+(1<<17)));S<ee;)o[S]=o[S++-ie],o[S]=o[S++-ie],o[S]=o[S++-ie],o[S]=o[S++-ie];S=ee}}}else{(7&I)!=0&&(I+=8-(7&I));var se=4+(I>>>3),ne=s[se-4]|s[se-3]<<8;D&&(o=n.F._check(o,S+ne)),o.set(new c(s.buffer,s.byteOffset+se,ne),S),I=se+ne<<3,S+=ne}return o.length==S?o:o.slice(0,S)},n.F._check=function(s,o){var c=s.length;if(o<=c)return s;var u=new Uint8Array(Math.max(c<<1,o));return u.set(s,0),u},n.F._decodeTiny=function(s,o,c,u,d,f){for(var g=n.F._bitsE,y=n.F._get17,v=0;v<c;){var w=s[y(u,d)&o];d+=15&w;var E=w>>>4;if(E<=15)f[v]=E,v++;else{var D=0,M=0;E==16?(M=3+g(u,d,2),d+=2,D=f[v-1]):E==17?(M=3+g(u,d,3),d+=3):E==18&&(M=11+g(u,d,7),d+=7);for(var V=v+M;v<V;)f[v]=D,v++}}return d},n.F._copyOut=function(s,o,c,u){for(var d=0,f=0,g=u.length>>>1;f<c;){var y=s[f+o];u[f<<1]=0,u[1+(f<<1)]=y,y>d&&(d=y),f++}for(;f<g;)u[f<<1]=0,u[1+(f<<1)]=0,f++;return d},n.F.makeCodes=function(s,o){for(var c,u,d,f,g=n.F.U,y=s.length,v=g.bl_count,w=0;w<=o;w++)v[w]=0;for(w=1;w<y;w+=2)v[s[w]]++;var E=g.next_code;for(c=0,v[0]=0,u=1;u<=o;u++)c=c+v[u-1]<<1,E[u]=c;for(d=0;d<y;d+=2)(f=s[d+1])!=0&&(s[d]=E[f],E[f]++)},n.F.codes2map=function(s,o,c){for(var u=s.length,d=n.F.U.rev15,f=0;f<u;f+=2)if(s[f+1]!=0)for(var g=f>>1,y=s[f+1],v=g<<4|y,w=o-y,E=s[f]<<w,D=E+(1<<w);E!=D;)c[d[E]>>>15-o]=v,E++},n.F.revCodes=function(s,o){for(var c=n.F.U.rev15,u=15-o,d=0;d<s.length;d+=2){var f=s[d]<<o-s[d+1];s[d]=c[f]>>>u}},n.F._putsE=function(s,o,c){c<<=7&o;var u=o>>>3;s[u]|=c,s[u+1]|=c>>>8},n.F._putsF=function(s,o,c){c<<=7&o;var u=o>>>3;s[u]|=c,s[u+1]|=c>>>8,s[u+2]|=c>>>16},n.F._bitsE=function(s,o,c){return(s[o>>>3]|s[1+(o>>>3)]<<8)>>>(7&o)&(1<<c)-1},n.F._bitsF=function(s,o,c){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16)>>>(7&o)&(1<<c)-1},n.F._get17=function(s,o){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16)>>>(7&o)},n.F._get25=function(s,o){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16|s[3+(o>>>3)]<<24)>>>(7&o)},n.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var s=n.F.U,o=0;o<32768;o++){var c=o;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,s.rev15[o]=(c>>>16|c<<16)>>>17}function u(d,f,g){for(;f--!=0;)d.push(0,g)}for(o=0;o<32;o++)s.ldef[o]=s.of0[o]<<3|s.exb[o],s.ddef[o]=s.df0[o]<<4|s.dxb[o];u(s.fltree,144,8),u(s.fltree,112,9),u(s.fltree,24,7),u(s.fltree,8,8),n.F.makeCodes(s.fltree,9),n.F.codes2map(s.fltree,9,s.flmap),n.F.revCodes(s.fltree,9),u(s.fdtree,32,5),n.F.makeCodes(s.fdtree,5),n.F.codes2map(s.fdtree,5,s.fdmap),n.F.revCodes(s.fdtree,5),u(s.itree,19,0),u(s.ltree,286,0),u(s.dtree,30,0),u(s.ttree,320,0)})()})();var u9=o9({__proto__:null,default:Am},[Am]);const Zr=(function(){var r={nextZero(g,y){for(;g[y]!=0;)y++;return y},readUshort:(g,y)=>g[y]<<8|g[y+1],writeUshort(g,y,v){g[y]=v>>8&255,g[y+1]=255&v},readUint:(g,y)=>16777216*g[y]+(g[y+1]<<16|g[y+2]<<8|g[y+3]),writeUint(g,y,v){g[y]=v>>24&255,g[y+1]=v>>16&255,g[y+2]=v>>8&255,g[y+3]=255&v},readASCII(g,y,v){let w="";for(let E=0;E<v;E++)w+=String.fromCharCode(g[y+E]);return w},writeASCII(g,y,v){for(let w=0;w<v.length;w++)g[y+w]=v.charCodeAt(w)},readBytes(g,y,v){const w=[];for(let E=0;E<v;E++)w.push(g[y+E]);return w},pad:g=>g.length<2?`0${g}`:g,readUTF8(g,y,v){let w,E="";for(let D=0;D<v;D++)E+=`%${r.pad(g[y+D].toString(16))}`;try{w=decodeURIComponent(E)}catch{return r.readASCII(g,y,v)}return w}};function e(g,y,v,w){const E=y*v,D=o(w),M=Math.ceil(y*D/8),V=new Uint8Array(4*E),H=new Uint32Array(V.buffer),{ctype:F}=w,{depth:B}=w,Y=r.readUshort;if(F==6){const W=E<<2;if(B==8)for(var U=0;U<W;U+=4)V[U]=g[U],V[U+1]=g[U+1],V[U+2]=g[U+2],V[U+3]=g[U+3];if(B==16)for(U=0;U<W;U++)V[U]=g[U<<1]}else if(F==2){const W=w.tabs.tRNS;if(W==null){if(B==8)for(U=0;U<E;U++){var R=3*U;H[U]=255<<24|g[R+2]<<16|g[R+1]<<8|g[R]}if(B==16)for(U=0;U<E;U++)R=6*U,H[U]=255<<24|g[R+4]<<16|g[R+2]<<8|g[R]}else{var T=W[0];const Z=W[1],q=W[2];if(B==8)for(U=0;U<E;U++){var S=U<<2;R=3*U,H[U]=255<<24|g[R+2]<<16|g[R+1]<<8|g[R],g[R]==T&&g[R+1]==Z&&g[R+2]==q&&(V[S+3]=0)}if(B==16)for(U=0;U<E;U++)S=U<<2,R=6*U,H[U]=255<<24|g[R+4]<<16|g[R+2]<<8|g[R],Y(g,R)==T&&Y(g,R+2)==Z&&Y(g,R+4)==q&&(V[S+3]=0)}}else if(F==3){const W=w.tabs.PLTE,Z=w.tabs.tRNS,q=Z?Z.length:0;if(B==1)for(var I=0;I<v;I++){var k=I*M,j=I*y;for(U=0;U<y;U++){S=j+U<<2;var N=3*(G=g[k+(U>>3)]>>7-((7&U)<<0)&1);V[S]=W[N],V[S+1]=W[N+1],V[S+2]=W[N+2],V[S+3]=G<q?Z[G]:255}}if(B==2)for(I=0;I<v;I++)for(k=I*M,j=I*y,U=0;U<y;U++)S=j+U<<2,N=3*(G=g[k+(U>>2)]>>6-((3&U)<<1)&3),V[S]=W[N],V[S+1]=W[N+1],V[S+2]=W[N+2],V[S+3]=G<q?Z[G]:255;if(B==4)for(I=0;I<v;I++)for(k=I*M,j=I*y,U=0;U<y;U++)S=j+U<<2,N=3*(G=g[k+(U>>1)]>>4-((1&U)<<2)&15),V[S]=W[N],V[S+1]=W[N+1],V[S+2]=W[N+2],V[S+3]=G<q?Z[G]:255;if(B==8)for(U=0;U<E;U++){var G;S=U<<2,N=3*(G=g[U]),V[S]=W[N],V[S+1]=W[N+1],V[S+2]=W[N+2],V[S+3]=G<q?Z[G]:255}}else if(F==4){if(B==8)for(U=0;U<E;U++){S=U<<2;var J=g[P=U<<1];V[S]=J,V[S+1]=J,V[S+2]=J,V[S+3]=g[P+1]}if(B==16)for(U=0;U<E;U++){var P;S=U<<2,J=g[P=U<<2],V[S]=J,V[S+1]=J,V[S+2]=J,V[S+3]=g[P+2]}}else if(F==0)for(T=w.tabs.tRNS?w.tabs.tRNS:-1,I=0;I<v;I++){const W=I*M,Z=I*y;if(B==1)for(var O=0;O<y;O++){var ee=(J=255*(g[W+(O>>>3)]>>>7-(7&O)&1))==255*T?0:255;H[Z+O]=ee<<24|J<<16|J<<8|J}else if(B==2)for(O=0;O<y;O++)ee=(J=85*(g[W+(O>>>2)]>>>6-((3&O)<<1)&3))==85*T?0:255,H[Z+O]=ee<<24|J<<16|J<<8|J;else if(B==4)for(O=0;O<y;O++)ee=(J=17*(g[W+(O>>>1)]>>>4-((1&O)<<2)&15))==17*T?0:255,H[Z+O]=ee<<24|J<<16|J<<8|J;else if(B==8)for(O=0;O<y;O++)ee=(J=g[W+O])==T?0:255,H[Z+O]=ee<<24|J<<16|J<<8|J;else if(B==16)for(O=0;O<y;O++)J=g[W+(O<<1)],ee=Y(g,W+(O<<1))==T?0:255,H[Z+O]=ee<<24|J<<16|J<<8|J}return V}function t(g,y,v,w){const E=o(g),D=Math.ceil(v*E/8),M=new Uint8Array((D+1+g.interlace)*w);return y=g.tabs.CgBI?s(y,M):n(y,M),g.interlace==0?y=c(y,g,0,v,w):g.interlace==1&&(y=(function(H,F){const B=F.width,Y=F.height,U=o(F),R=U>>3,T=Math.ceil(B*U/8),S=new Uint8Array(Y*T);let I=0;const k=[0,0,4,0,2,0,1],j=[0,4,0,2,0,1,0],N=[8,8,8,4,4,2,2],G=[8,8,4,4,2,2,1];let J=0;for(;J<7;){const O=N[J],ee=G[J];let W=0,Z=0,q=k[J];for(;q<Y;)q+=O,Z++;let Q=j[J];for(;Q<B;)Q+=ee,W++;const ie=Math.ceil(W*U/8);c(H,F,I,W,Z);let se=0,ne=k[J];for(;ne<Y;){let _e=j[J],Ae=I+se*ie<<3;for(;_e<B;){var P;if(U==1&&(P=(P=H[Ae>>3])>>7-(7&Ae)&1,S[ne*T+(_e>>3)]|=P<<7-((7&_e)<<0)),U==2&&(P=(P=H[Ae>>3])>>6-(7&Ae)&3,S[ne*T+(_e>>2)]|=P<<6-((3&_e)<<1)),U==4&&(P=(P=H[Ae>>3])>>4-(7&Ae)&15,S[ne*T+(_e>>1)]|=P<<4-((1&_e)<<2)),U>=8){const Pe=ne*T+_e*R;for(let Ce=0;Ce<R;Ce++)S[Pe+Ce]=H[(Ae>>3)+Ce]}Ae+=U,_e+=ee}se++,ne+=O}W*Z!=0&&(I+=Z*(1+ie)),J+=1}return S})(y,g)),y}function n(g,y){return s(new Uint8Array(g.buffer,2,g.length-6),y)}var s=(function(){const g={H:{}};return g.H.N=function(y,v){const w=Uint8Array;let E,D,M=0,V=0,H=0,F=0,B=0,Y=0,U=0,R=0,T=0;if(y[0]==3&&y[1]==0)return v||new w(0);const S=g.H,I=S.b,k=S.e,j=S.R,N=S.n,G=S.A,J=S.Z,P=S.m,O=v==null;for(O&&(v=new w(y.length>>>2<<5));M==0;)if(M=I(y,T,1),V=I(y,T+1,2),T+=3,V!=0){if(O&&(v=g.H.W(v,R+(1<<17))),V==1&&(E=P.J,D=P.h,Y=511,U=31),V==2){H=k(y,T,5)+257,F=k(y,T+5,5)+1,B=k(y,T+10,4)+4,T+=14;let W=1;for(var ee=0;ee<38;ee+=2)P.Q[ee]=0,P.Q[ee+1]=0;for(ee=0;ee<B;ee++){const Q=k(y,T+3*ee,3);P.Q[1+(P.X[ee]<<1)]=Q,Q>W&&(W=Q)}T+=3*B,N(P.Q,W),G(P.Q,W,P.u),E=P.w,D=P.d,T=j(P.u,(1<<W)-1,H+F,y,T,P.v);const Z=S.V(P.v,0,H,P.C);Y=(1<<Z)-1;const q=S.V(P.v,H,F,P.D);U=(1<<q)-1,N(P.C,Z),G(P.C,Z,E),N(P.D,q),G(P.D,q,D)}for(;;){const W=E[J(y,T)&Y];T+=15&W;const Z=W>>>4;if(!(Z>>>8))v[R++]=Z;else{if(Z==256)break;{let q=R+Z-254;if(Z>264){const _e=P.q[Z-257];q=R+(_e>>>3)+k(y,T,7&_e),T+=7&_e}const Q=D[J(y,T)&U];T+=15&Q;const ie=Q>>>4,se=P.c[ie],ne=(se>>>4)+I(y,T,15&se);for(T+=15&se;R<q;)v[R]=v[R++-ne],v[R]=v[R++-ne],v[R]=v[R++-ne],v[R]=v[R++-ne];R=q}}}}else{(7&T)!=0&&(T+=8-(7&T));const W=4+(T>>>3),Z=y[W-4]|y[W-3]<<8;O&&(v=g.H.W(v,R+Z)),v.set(new w(y.buffer,y.byteOffset+W,Z),R),T=W+Z<<3,R+=Z}return v.length==R?v:v.slice(0,R)},g.H.W=function(y,v){const w=y.length;if(v<=w)return y;const E=new Uint8Array(w<<1);return E.set(y,0),E},g.H.R=function(y,v,w,E,D,M){const V=g.H.e,H=g.H.Z;let F=0;for(;F<w;){const B=y[H(E,D)&v];D+=15&B;const Y=B>>>4;if(Y<=15)M[F]=Y,F++;else{let U=0,R=0;Y==16?(R=3+V(E,D,2),D+=2,U=M[F-1]):Y==17?(R=3+V(E,D,3),D+=3):Y==18&&(R=11+V(E,D,7),D+=7);const T=F+R;for(;F<T;)M[F]=U,F++}}return D},g.H.V=function(y,v,w,E){let D=0,M=0;const V=E.length>>>1;for(;M<w;){const H=y[M+v];E[M<<1]=0,E[1+(M<<1)]=H,H>D&&(D=H),M++}for(;M<V;)E[M<<1]=0,E[1+(M<<1)]=0,M++;return D},g.H.n=function(y,v){const w=g.H.m,E=y.length;let D,M,V,H;const F=w.j;for(var B=0;B<=v;B++)F[B]=0;for(B=1;B<E;B+=2)F[y[B]]++;const Y=w.K;for(D=0,F[0]=0,M=1;M<=v;M++)D=D+F[M-1]<<1,Y[M]=D;for(V=0;V<E;V+=2)H=y[V+1],H!=0&&(y[V]=Y[H],Y[H]++)},g.H.A=function(y,v,w){const E=y.length,D=g.H.m.r;for(let M=0;M<E;M+=2)if(y[M+1]!=0){const V=M>>1,H=y[M+1],F=V<<4|H,B=v-H;let Y=y[M]<<B;const U=Y+(1<<B);for(;Y!=U;)w[D[Y]>>>15-v]=F,Y++}},g.H.l=function(y,v){const w=g.H.m.r,E=15-v;for(let D=0;D<y.length;D+=2){const M=y[D]<<v-y[D+1];y[D]=w[M]>>>E}},g.H.M=function(y,v,w){w<<=7&v;const E=v>>>3;y[E]|=w,y[E+1]|=w>>>8},g.H.I=function(y,v,w){w<<=7&v;const E=v>>>3;y[E]|=w,y[E+1]|=w>>>8,y[E+2]|=w>>>16},g.H.e=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8)>>>(7&v)&(1<<w)-1},g.H.b=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)&(1<<w)-1},g.H.Z=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)},g.H.i=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16|y[3+(v>>>3)]<<24)>>>(7&v)},g.H.m=(function(){const y=Uint16Array,v=Uint32Array;return{K:new y(16),j:new y(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new y(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new v(32),J:new y(512),_:[],h:new y(32),$:[],w:new y(32768),C:[],v:[],d:new y(32768),D:[],u:new y(512),Q:[],r:new y(32768),s:new v(286),Y:new v(30),a:new v(19),t:new v(15e3),k:new y(65536),g:new y(32768)}})(),(function(){const y=g.H.m;for(var v=0;v<32768;v++){let E=v;E=(2863311530&E)>>>1|(1431655765&E)<<1,E=(3435973836&E)>>>2|(858993459&E)<<2,E=(4042322160&E)>>>4|(252645135&E)<<4,E=(4278255360&E)>>>8|(16711935&E)<<8,y.r[v]=(E>>>16|E<<16)>>>17}function w(E,D,M){for(;D--!=0;)E.push(0,M)}for(v=0;v<32;v++)y.q[v]=y.S[v]<<3|y.T[v],y.c[v]=y.p[v]<<4|y.z[v];w(y._,144,8),w(y._,112,9),w(y._,24,7),w(y._,8,8),g.H.n(y._,9),g.H.A(y._,9,y.J),g.H.l(y._,9),w(y.$,32,5),g.H.n(y.$,5),g.H.A(y.$,5,y.h),g.H.l(y.$,5),w(y.Q,19,0),w(y.C,286,0),w(y.D,30,0),w(y.v,320,0)})(),g.H.N})();function o(g){return[1,null,3,1,2,null,4][g.ctype]*g.depth}function c(g,y,v,w,E){let D=o(y);const M=Math.ceil(w*D/8);let V,H;D=Math.ceil(D/8);let F=g[v],B=0;if(F>1&&(g[v]=[0,0,1][F-2]),F==3)for(B=D;B<M;B++)g[B+1]=g[B+1]+(g[B+1-D]>>>1)&255;for(let Y=0;Y<E;Y++)if(V=v+Y*M,H=V+Y+1,F=g[H-1],B=0,F==0)for(;B<M;B++)g[V+B]=g[H+B];else if(F==1){for(;B<D;B++)g[V+B]=g[H+B];for(;B<M;B++)g[V+B]=g[H+B]+g[V+B-D]}else if(F==2)for(;B<M;B++)g[V+B]=g[H+B]+g[V+B-M];else if(F==3){for(;B<D;B++)g[V+B]=g[H+B]+(g[V+B-M]>>>1);for(;B<M;B++)g[V+B]=g[H+B]+(g[V+B-M]+g[V+B-D]>>>1)}else{for(;B<D;B++)g[V+B]=g[H+B]+u(0,g[V+B-M],0);for(;B<M;B++)g[V+B]=g[H+B]+u(g[V+B-D],g[V+B-M],g[V+B-D-M])}return g}function u(g,y,v){const w=g+y-v,E=w-g,D=w-y,M=w-v;return E*E<=D*D&&E*E<=M*M?g:D*D<=M*M?y:v}function d(g,y,v){v.width=r.readUint(g,y),y+=4,v.height=r.readUint(g,y),y+=4,v.depth=g[y],y++,v.ctype=g[y],y++,v.compress=g[y],y++,v.filter=g[y],y++,v.interlace=g[y],y++}function f(g,y,v,w,E,D,M,V,H){const F=Math.min(y,E),B=Math.min(v,D);let Y=0,U=0;for(let J=0;J<B;J++)for(let P=0;P<F;P++)if(M>=0&&V>=0?(Y=J*y+P<<2,U=(V+J)*E+M+P<<2):(Y=(-V+J)*y-M+P<<2,U=J*E+P<<2),H==0)w[U]=g[Y],w[U+1]=g[Y+1],w[U+2]=g[Y+2],w[U+3]=g[Y+3];else if(H==1){var R=g[Y+3]*.00392156862745098,T=g[Y]*R,S=g[Y+1]*R,I=g[Y+2]*R,k=w[U+3]*(1/255),j=w[U]*k,N=w[U+1]*k,G=w[U+2]*k;const O=1-R,ee=R+k*O,W=ee==0?0:1/ee;w[U+3]=255*ee,w[U+0]=(T+j*O)*W,w[U+1]=(S+N*O)*W,w[U+2]=(I+G*O)*W}else if(H==2)R=g[Y+3],T=g[Y],S=g[Y+1],I=g[Y+2],k=w[U+3],j=w[U],N=w[U+1],G=w[U+2],R==k&&T==j&&S==N&&I==G?(w[U]=0,w[U+1]=0,w[U+2]=0,w[U+3]=0):(w[U]=T,w[U+1]=S,w[U+2]=I,w[U+3]=R);else if(H==3){if(R=g[Y+3],T=g[Y],S=g[Y+1],I=g[Y+2],k=w[U+3],j=w[U],N=w[U+1],G=w[U+2],R==k&&T==j&&S==N&&I==G)continue;if(R<220&&k>20)return!1}return!0}return{decode:function(y){const v=new Uint8Array(y);let w=8;const E=r,D=E.readUshort,M=E.readUint,V={tabs:{},frames:[]},H=new Uint8Array(v.length);let F,B=0,Y=0;const U=[137,80,78,71,13,10,26,10];for(var R=0;R<8;R++)if(v[R]!=U[R])throw"The input is not a PNG file!";for(;w<v.length;){const J=E.readUint(v,w);w+=4;const P=E.readASCII(v,w,4);if(w+=4,P=="IHDR")d(v,w,V);else if(P=="iCCP"){for(var T=w;v[T]!=0;)T++;E.readASCII(v,w,T-w),v[T+1];const O=v.slice(T+2,w+J);let ee=null;try{ee=n(O)}catch{ee=s(O)}V.tabs[P]=ee}else if(P=="CgBI")V.tabs[P]=v.slice(w,w+4);else if(P=="IDAT"){for(R=0;R<J;R++)H[B+R]=v[w+R];B+=J}else if(P=="acTL")V.tabs[P]={num_frames:M(v,w),num_plays:M(v,w+4)},F=new Uint8Array(v.length);else if(P=="fcTL"){Y!=0&&((G=V.frames[V.frames.length-1]).data=t(V,F.slice(0,Y),G.rect.width,G.rect.height),Y=0);const O={x:M(v,w+12),y:M(v,w+16),width:M(v,w+4),height:M(v,w+8)};let ee=D(v,w+22);ee=D(v,w+20)/(ee==0?100:ee);const W={rect:O,delay:Math.round(1e3*ee),dispose:v[w+24],blend:v[w+25]};V.frames.push(W)}else if(P=="fdAT"){for(R=0;R<J-4;R++)F[Y+R]=v[w+R+4];Y+=J-4}else if(P=="pHYs")V.tabs[P]=[E.readUint(v,w),E.readUint(v,w+4),v[w+8]];else if(P=="cHRM")for(V.tabs[P]=[],R=0;R<8;R++)V.tabs[P].push(E.readUint(v,w+4*R));else if(P=="tEXt"||P=="zTXt"){V.tabs[P]==null&&(V.tabs[P]={});var S=E.nextZero(v,w),I=E.readASCII(v,w,S-w),k=w+J-S-1;if(P=="tEXt")N=E.readASCII(v,S+1,k);else{var j=n(v.slice(S+2,S+2+k));N=E.readUTF8(j,0,j.length)}V.tabs[P][I]=N}else if(P=="iTXt"){V.tabs[P]==null&&(V.tabs[P]={}),S=0,T=w,S=E.nextZero(v,T),I=E.readASCII(v,T,S-T);const O=v[T=S+1];var N;v[T+1],T+=2,S=E.nextZero(v,T),E.readASCII(v,T,S-T),T=S+1,S=E.nextZero(v,T),E.readUTF8(v,T,S-T),k=J-((T=S+1)-w),O==0?N=E.readUTF8(v,T,k):(j=n(v.slice(T,T+k)),N=E.readUTF8(j,0,j.length)),V.tabs[P][I]=N}else if(P=="PLTE")V.tabs[P]=E.readBytes(v,w,J);else if(P=="hIST"){const O=V.tabs.PLTE.length/3;for(V.tabs[P]=[],R=0;R<O;R++)V.tabs[P].push(D(v,w+2*R))}else if(P=="tRNS")V.ctype==3?V.tabs[P]=E.readBytes(v,w,J):V.ctype==0?V.tabs[P]=D(v,w):V.ctype==2&&(V.tabs[P]=[D(v,w),D(v,w+2),D(v,w+4)]);else if(P=="gAMA")V.tabs[P]=E.readUint(v,w)/1e5;else if(P=="sRGB")V.tabs[P]=v[w];else if(P=="bKGD")V.ctype==0||V.ctype==4?V.tabs[P]=[D(v,w)]:V.ctype==2||V.ctype==6?V.tabs[P]=[D(v,w),D(v,w+2),D(v,w+4)]:V.ctype==3&&(V.tabs[P]=v[w]);else if(P=="IEND")break;w+=J,E.readUint(v,w),w+=4}var G;return Y!=0&&((G=V.frames[V.frames.length-1]).data=t(V,F.slice(0,Y),G.rect.width,G.rect.height)),V.data=t(V,H,V.width,V.height),delete V.compress,delete V.interlace,delete V.filter,V},toRGBA8:function(y){const v=y.width,w=y.height;if(y.tabs.acTL==null)return[e(y.data,v,w,y).buffer];const E=[];y.frames[0].data==null&&(y.frames[0].data=y.data);const D=v*w*4,M=new Uint8Array(D),V=new Uint8Array(D),H=new Uint8Array(D);for(let B=0;B<y.frames.length;B++){const Y=y.frames[B],U=Y.rect.x,R=Y.rect.y,T=Y.rect.width,S=Y.rect.height,I=e(Y.data,T,S,y);if(B!=0)for(var F=0;F<D;F++)H[F]=M[F];if(Y.blend==0?f(I,T,S,M,v,w,U,R,0):Y.blend==1&&f(I,T,S,M,v,w,U,R,1),E.push(M.buffer.slice(0)),Y.dispose!=0){if(Y.dispose==1)f(V,T,S,M,v,w,U,R,0);else if(Y.dispose==2)for(F=0;F<D;F++)M[F]=H[F]}}return E},_paeth:u,_copyTile:f,_bin:r}})();(function(){const{_copyTile:r}=Zr,{_bin:e}=Zr,t=Zr._paeth;var n={table:(function(){const T=new Uint32Array(256);for(let S=0;S<256;S++){let I=S;for(let k=0;k<8;k++)1&I?I=3988292384^I>>>1:I>>>=1;T[S]=I}return T})(),update(T,S,I,k){for(let j=0;j<k;j++)T=n.table[255&(T^S[I+j])]^T>>>8;return T},crc:(T,S,I)=>4294967295^n.update(4294967295,T,S,I)};function s(T,S,I,k){S[I]+=T[0]*k>>4,S[I+1]+=T[1]*k>>4,S[I+2]+=T[2]*k>>4,S[I+3]+=T[3]*k>>4}function o(T){return Math.max(0,Math.min(255,T))}function c(T,S){const I=T[0]-S[0],k=T[1]-S[1],j=T[2]-S[2],N=T[3]-S[3];return I*I+k*k+j*j+N*N}function u(T,S,I,k,j,N,G){G==null&&(G=1);const J=k.length,P=[];for(var O=0;O<J;O++){const ne=k[O];P.push([ne>>>0&255,ne>>>8&255,ne>>>16&255,ne>>>24&255])}for(O=0;O<J;O++){let ne=4294967295;for(var ee=0,W=0;W<J;W++){var Z=c(P[O],P[W]);W!=O&&Z<ne&&(ne=Z,ee=W)}}const q=new Uint32Array(j.buffer),Q=new Int16Array(S*I*4),ie=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(O=0;O<ie.length;O++)ie[O]=255*((ie[O]+.5)/16-.5);for(let ne=0;ne<I;ne++)for(let _e=0;_e<S;_e++){var se;O=4*(ne*S+_e),G!=2?se=[o(T[O]+Q[O]),o(T[O+1]+Q[O+1]),o(T[O+2]+Q[O+2]),o(T[O+3]+Q[O+3])]:(Z=ie[4*(3&ne)+(3&_e)],se=[o(T[O]+Z),o(T[O+1]+Z),o(T[O+2]+Z),o(T[O+3]+Z)]),ee=0;let Ae=16777215;for(W=0;W<J;W++){const et=c(se,P[W]);et<Ae&&(Ae=et,ee=W)}const Pe=P[ee],Ce=[se[0]-Pe[0],se[1]-Pe[1],se[2]-Pe[2],se[3]-Pe[3]];G==1&&(_e!=S-1&&s(Ce,Q,O+4,7),ne!=I-1&&(_e!=0&&s(Ce,Q,O+4*S-4,3),s(Ce,Q,O+4*S,5),_e!=S-1&&s(Ce,Q,O+4*S+4,1))),N[O>>2]=ee,q[O>>2]=k[ee]}}function d(T,S,I,k,j){j==null&&(j={});const{crc:N}=n,G=e.writeUint,J=e.writeUshort,P=e.writeASCII;let O=8;const ee=T.frames.length>1;let W,Z=!1,q=33+(ee?20:0);if(j.sRGB!=null&&(q+=13),j.pHYs!=null&&(q+=21),j.iCCP!=null&&(W=pako.deflate(j.iCCP),q+=21+W.length+4),T.ctype==3){for(var Q=T.plte.length,ie=0;ie<Q;ie++)T.plte[ie]>>>24!=255&&(Z=!0);q+=8+3*Q+4+(Z?8+1*Q+4:0)}for(var se=0;se<T.frames.length;se++)ee&&(q+=38),q+=(Pe=T.frames[se]).cimg.length+12,se!=0&&(q+=4);q+=12;const ne=new Uint8Array(q),_e=[137,80,78,71,13,10,26,10];for(ie=0;ie<8;ie++)ne[ie]=_e[ie];if(G(ne,O,13),O+=4,P(ne,O,"IHDR"),O+=4,G(ne,O,S),O+=4,G(ne,O,I),O+=4,ne[O]=T.depth,O++,ne[O]=T.ctype,O++,ne[O]=0,O++,ne[O]=0,O++,ne[O]=0,O++,G(ne,O,N(ne,O-17,17)),O+=4,j.sRGB!=null&&(G(ne,O,1),O+=4,P(ne,O,"sRGB"),O+=4,ne[O]=j.sRGB,O++,G(ne,O,N(ne,O-5,5)),O+=4),j.iCCP!=null){const Ce=13+W.length;G(ne,O,Ce),O+=4,P(ne,O,"iCCP"),O+=4,P(ne,O,"ICC profile"),O+=11,O+=2,ne.set(W,O),O+=W.length,G(ne,O,N(ne,O-(Ce+4),Ce+4)),O+=4}if(j.pHYs!=null&&(G(ne,O,9),O+=4,P(ne,O,"pHYs"),O+=4,G(ne,O,j.pHYs[0]),O+=4,G(ne,O,j.pHYs[1]),O+=4,ne[O]=j.pHYs[2],O++,G(ne,O,N(ne,O-13,13)),O+=4),ee&&(G(ne,O,8),O+=4,P(ne,O,"acTL"),O+=4,G(ne,O,T.frames.length),O+=4,G(ne,O,j.loop!=null?j.loop:0),O+=4,G(ne,O,N(ne,O-12,12)),O+=4),T.ctype==3){for(G(ne,O,3*(Q=T.plte.length)),O+=4,P(ne,O,"PLTE"),O+=4,ie=0;ie<Q;ie++){const Ce=3*ie,et=T.plte[ie],at=255&et,ot=et>>>8&255,un=et>>>16&255;ne[O+Ce+0]=at,ne[O+Ce+1]=ot,ne[O+Ce+2]=un}if(O+=3*Q,G(ne,O,N(ne,O-3*Q-4,3*Q+4)),O+=4,Z){for(G(ne,O,Q),O+=4,P(ne,O,"tRNS"),O+=4,ie=0;ie<Q;ie++)ne[O+ie]=T.plte[ie]>>>24&255;O+=Q,G(ne,O,N(ne,O-Q-4,Q+4)),O+=4}}let Ae=0;for(se=0;se<T.frames.length;se++){var Pe=T.frames[se];ee&&(G(ne,O,26),O+=4,P(ne,O,"fcTL"),O+=4,G(ne,O,Ae++),O+=4,G(ne,O,Pe.rect.width),O+=4,G(ne,O,Pe.rect.height),O+=4,G(ne,O,Pe.rect.x),O+=4,G(ne,O,Pe.rect.y),O+=4,J(ne,O,k[se]),O+=2,J(ne,O,1e3),O+=2,ne[O]=Pe.dispose,O++,ne[O]=Pe.blend,O++,G(ne,O,N(ne,O-30,30)),O+=4);const Ce=Pe.cimg;G(ne,O,(Q=Ce.length)+(se==0?0:4)),O+=4;const et=O;P(ne,O,se==0?"IDAT":"fdAT"),O+=4,se!=0&&(G(ne,O,Ae++),O+=4),ne.set(Ce,O),O+=Q,G(ne,O,N(ne,et,O-et)),O+=4}return G(ne,O,0),O+=4,P(ne,O,"IEND"),O+=4,G(ne,O,N(ne,O-4,4)),O+=4,ne.buffer}function f(T,S,I){for(let k=0;k<T.frames.length;k++){const j=T.frames[k];j.rect.width;const N=j.rect.height,G=new Uint8Array(N*j.bpl+N);j.cimg=w(j.img,N,j.bpp,j.bpl,G,S,I)}}function g(T,S,I,k,j){const N=j[0],G=j[1],J=j[2],P=j[3],O=j[4],ee=j[5];let W=6,Z=8,q=255;for(var Q=0;Q<T.length;Q++){const Ct=new Uint8Array(T[Q]);for(var ie=Ct.length,se=0;se<ie;se+=4)q&=Ct[se+3]}const ne=q!=255,_e=(function(it,st,$e,pe,Ee,Be){const Me=[];for(var xe=0;xe<it.length;xe++){const Bt=new Uint8Array(it[xe]),Dn=new Uint32Array(Bt.buffer);var tt;let xn=0,Gt=0,Et=st,Jt=$e,Dt=pe?1:0;if(xe!=0){const Qo=Be||pe||xe==1||Me[xe-2].dispose!=0?1:2;let oi=0,Oa=1e9;for(let On=0;On<Qo;On++){var gt=new Uint8Array(it[xe-1-On]);const qi=new Uint32Array(it[xe-1-On]);let pt=st,hn=$e,En=-1,Tn=-1;for(let xr=0;xr<$e;xr++)for(let pn=0;pn<st;pn++)Dn[ut=xr*st+pn]!=qi[ut]&&(pn<pt&&(pt=pn),pn>En&&(En=pn),xr<hn&&(hn=xr),xr>Tn&&(Tn=xr));En==-1&&(pt=hn=En=Tn=0),Ee&&((1&pt)==1&&pt--,(1&hn)==1&&hn--);const Wo=(En-pt+1)*(Tn-hn+1);Wo<Oa&&(Oa=Wo,oi=On,xn=pt,Gt=hn,Et=En-pt+1,Jt=Tn-hn+1)}gt=new Uint8Array(it[xe-1-oi]),oi==1&&(Me[xe-1].dispose=2),tt=new Uint8Array(Et*Jt*4),r(gt,st,$e,tt,Et,Jt,-xn,-Gt,0),Dt=r(Bt,st,$e,tt,Et,Jt,-xn,-Gt,3)?1:0,Dt==1?v(Bt,st,$e,tt,{x:xn,y:Gt,width:Et,height:Jt}):r(Bt,st,$e,tt,Et,Jt,-xn,-Gt,0)}else tt=Bt.slice(0);Me.push({rect:{x:xn,y:Gt,width:Et,height:Jt},img:tt,blend:Dt,dispose:0})}if(pe)for(xe=0;xe<Me.length;xe++){if((Hn=Me[xe]).blend==1)continue;const Bt=Hn.rect,Dn=Me[xe-1].rect,xn=Math.min(Bt.x,Dn.x),Gt=Math.min(Bt.y,Dn.y),Et={x:xn,y:Gt,width:Math.max(Bt.x+Bt.width,Dn.x+Dn.width)-xn,height:Math.max(Bt.y+Bt.height,Dn.y+Dn.height)-Gt};Me[xe-1].dispose=1,xe-1!=0&&y(it,st,$e,Me,xe-1,Et,Ee),y(it,st,$e,Me,xe,Et,Ee)}let Fn=0;if(it.length!=1)for(var ut=0;ut<Me.length;ut++){var Hn;Fn+=(Hn=Me[ut]).rect.width*Hn.rect.height}return Me})(T,S,I,N,G,J),Ae={},Pe=[],Ce=[];if(k!=0){const Ct=[];for(se=0;se<_e.length;se++)Ct.push(_e[se].img.buffer);const it=(function(Ee){let Be=0;for(var Me=0;Me<Ee.length;Me++)Be+=Ee[Me].byteLength;const xe=new Uint8Array(Be);let tt=0;for(Me=0;Me<Ee.length;Me++){const gt=new Uint8Array(Ee[Me]),Fn=gt.length;for(let ut=0;ut<Fn;ut+=4){let Hn=gt[ut],Bt=gt[ut+1],Dn=gt[ut+2];const xn=gt[ut+3];xn==0&&(Hn=Bt=Dn=0),xe[tt+ut]=Hn,xe[tt+ut+1]=Bt,xe[tt+ut+2]=Dn,xe[tt+ut+3]=xn}tt+=Fn}return xe.buffer})(Ct),st=D(it,k);for(se=0;se<st.plte.length;se++)Pe.push(st.plte[se].est.rgba);let $e=0;for(se=0;se<_e.length;se++){const pe=(at=_e[se]).img.length;var et=new Uint8Array(st.inds.buffer,$e>>2,pe>>2);Ce.push(et);const Ee=new Uint8Array(st.abuf,$e,pe);ee&&u(at.img,at.rect.width,at.rect.height,Pe,Ee,et),at.img.set(Ee),$e+=pe}}else for(Q=0;Q<_e.length;Q++){var at=_e[Q];const Ct=new Uint32Array(at.img.buffer);var ot=at.rect.width;for(ie=Ct.length,et=new Uint8Array(ie),Ce.push(et),se=0;se<ie;se++){const it=Ct[se];if(se!=0&&it==Ct[se-1])et[se]=et[se-1];else if(se>ot&&it==Ct[se-ot])et[se]=et[se-ot];else{let st=Ae[it];if(st==null&&(Ae[it]=st=Pe.length,Pe.push(it),Pe.length>=300))break;et[se]=st}}}const un=Pe.length;for(un<=256&&O==0&&(Z=un<=2?1:un<=4?2:un<=16?4:8,Z=Math.max(Z,P)),Q=0;Q<_e.length;Q++){(at=_e[Q]).rect.x,at.rect.y,ot=at.rect.width;const Ct=at.rect.height;let it=at.img;new Uint32Array(it.buffer);let st=4*ot,$e=4;if(un<=256&&O==0){st=Math.ceil(Z*ot/8);var Rt=new Uint8Array(st*Ct);const pe=Ce[Q];for(let Ee=0;Ee<Ct;Ee++){se=Ee*st;const Be=Ee*ot;if(Z==8)for(var mt=0;mt<ot;mt++)Rt[se+mt]=pe[Be+mt];else if(Z==4)for(mt=0;mt<ot;mt++)Rt[se+(mt>>1)]|=pe[Be+mt]<<4-4*(1&mt);else if(Z==2)for(mt=0;mt<ot;mt++)Rt[se+(mt>>2)]|=pe[Be+mt]<<6-2*(3&mt);else if(Z==1)for(mt=0;mt<ot;mt++)Rt[se+(mt>>3)]|=pe[Be+mt]<<7-1*(7&mt)}it=Rt,W=3,$e=1}else if(ne==0&&_e.length==1){Rt=new Uint8Array(ot*Ct*3);const pe=ot*Ct;for(se=0;se<pe;se++){const Ee=3*se,Be=4*se;Rt[Ee]=it[Be],Rt[Ee+1]=it[Be+1],Rt[Ee+2]=it[Be+2]}it=Rt,W=2,$e=3,st=3*ot}at.img=it,at.bpl=st,at.bpp=$e}return{ctype:W,depth:Z,plte:Pe,frames:_e}}function y(T,S,I,k,j,N,G){const J=Uint8Array,P=Uint32Array,O=new J(T[j-1]),ee=new P(T[j-1]),W=j+1<T.length?new J(T[j+1]):null,Z=new J(T[j]),q=new P(Z.buffer);let Q=S,ie=I,se=-1,ne=-1;for(let Ae=0;Ae<N.height;Ae++)for(let Pe=0;Pe<N.width;Pe++){const Ce=N.x+Pe,et=N.y+Ae,at=et*S+Ce,ot=q[at];ot==0||k[j-1].dispose==0&&ee[at]==ot&&(W==null||W[4*at+3]!=0)||(Ce<Q&&(Q=Ce),Ce>se&&(se=Ce),et<ie&&(ie=et),et>ne&&(ne=et))}se==-1&&(Q=ie=se=ne=0),G&&((1&Q)==1&&Q--,(1&ie)==1&&ie--),N={x:Q,y:ie,width:se-Q+1,height:ne-ie+1};const _e=k[j];_e.rect=N,_e.blend=1,_e.img=new Uint8Array(N.width*N.height*4),k[j-1].dispose==0?(r(O,S,I,_e.img,N.width,N.height,-N.x,-N.y,0),v(Z,S,I,_e.img,N)):r(Z,S,I,_e.img,N.width,N.height,-N.x,-N.y,0)}function v(T,S,I,k,j){r(T,S,I,k,j.width,j.height,-j.x,-j.y,2)}function w(T,S,I,k,j,N,G){const J=[];let P,O=[0,1,2,3,4];N!=-1?O=[N]:(S*k>5e5||I==1)&&(O=[0]),G&&(P={level:0});const ee=u9;for(var W=0;W<O.length;W++){for(let Q=0;Q<S;Q++)E(j,T,Q,k,I,O[W]);J.push(ee.deflate(j,P))}let Z,q=1e9;for(W=0;W<J.length;W++)J[W].length<q&&(Z=W,q=J[W].length);return J[Z]}function E(T,S,I,k,j,N){const G=I*k;let J=G+I;if(T[J]=N,J++,N==0)if(k<500)for(var P=0;P<k;P++)T[J+P]=S[G+P];else T.set(new Uint8Array(S.buffer,G,k),J);else if(N==1){for(P=0;P<j;P++)T[J+P]=S[G+P];for(P=j;P<k;P++)T[J+P]=S[G+P]-S[G+P-j]+256&255}else if(I==0){for(P=0;P<j;P++)T[J+P]=S[G+P];if(N==2)for(P=j;P<k;P++)T[J+P]=S[G+P];if(N==3)for(P=j;P<k;P++)T[J+P]=S[G+P]-(S[G+P-j]>>1)+256&255;if(N==4)for(P=j;P<k;P++)T[J+P]=S[G+P]-t(S[G+P-j],0,0)+256&255}else{if(N==2)for(P=0;P<k;P++)T[J+P]=S[G+P]+256-S[G+P-k]&255;if(N==3){for(P=0;P<j;P++)T[J+P]=S[G+P]+256-(S[G+P-k]>>1)&255;for(P=j;P<k;P++)T[J+P]=S[G+P]+256-(S[G+P-k]+S[G+P-j]>>1)&255}if(N==4){for(P=0;P<j;P++)T[J+P]=S[G+P]+256-t(0,S[G+P-k],0)&255;for(P=j;P<k;P++)T[J+P]=S[G+P]+256-t(S[G+P-j],S[G+P-k],S[G+P-j-k])&255}}}function D(T,S){const I=new Uint8Array(T),k=I.slice(0),j=new Uint32Array(k.buffer),N=M(k,S),G=N[0],J=N[1],P=I.length,O=new Uint8Array(P>>2);let ee;if(I.length<2e7)for(var W=0;W<P;W+=4)ee=V(G,Z=I[W]*(1/255),q=I[W+1]*(1/255),Q=I[W+2]*(1/255),ie=I[W+3]*(1/255)),O[W>>2]=ee.ind,j[W>>2]=ee.est.rgba;else for(W=0;W<P;W+=4){var Z=I[W]*.00392156862745098,q=I[W+1]*(1/255),Q=I[W+2]*(1/255),ie=I[W+3]*(1/255);for(ee=G;ee.left;)ee=H(ee.est,Z,q,Q,ie)<=0?ee.left:ee.right;O[W>>2]=ee.ind,j[W>>2]=ee.est.rgba}return{abuf:k.buffer,inds:O,plte:J}}function M(T,S,I){I==null&&(I=1e-4);const k=new Uint32Array(T.buffer),j={i0:0,i1:T.length,bst:null,est:null,tdst:0,left:null,right:null};j.bst=Y(T,j.i0,j.i1),j.est=U(j.bst);const N=[j];for(;N.length<S;){let J=0,P=0;for(var G=0;G<N.length;G++)N[G].est.L>J&&(J=N[G].est.L,P=G);if(J<I)break;const O=N[P],ee=F(T,k,O.i0,O.i1,O.est.e,O.est.eMq255);if(O.i0>=ee||O.i1<=ee){O.est.L=0;continue}const W={i0:O.i0,i1:ee,bst:null,est:null,tdst:0,left:null,right:null};W.bst=Y(T,W.i0,W.i1),W.est=U(W.bst);const Z={i0:ee,i1:O.i1,bst:null,est:null,tdst:0,left:null,right:null};for(Z.bst={R:[],m:[],N:O.bst.N-W.bst.N},G=0;G<16;G++)Z.bst.R[G]=O.bst.R[G]-W.bst.R[G];for(G=0;G<4;G++)Z.bst.m[G]=O.bst.m[G]-W.bst.m[G];Z.est=U(Z.bst),O.left=W,O.right=Z,N[P]=W,N.push(Z)}for(N.sort(((J,P)=>P.bst.N-J.bst.N)),G=0;G<N.length;G++)N[G].ind=G;return[j,N]}function V(T,S,I,k,j){if(T.left==null)return T.tdst=(function(W,Z,q,Q,ie){const se=Z-W[0],ne=q-W[1],_e=Q-W[2],Ae=ie-W[3];return se*se+ne*ne+_e*_e+Ae*Ae})(T.est.q,S,I,k,j),T;const N=H(T.est,S,I,k,j);let G=T.left,J=T.right;N>0&&(G=T.right,J=T.left);const P=V(G,S,I,k,j);if(P.tdst<=N*N)return P;const O=V(J,S,I,k,j);return O.tdst<P.tdst?O:P}function H(T,S,I,k,j){const{e:N}=T;return N[0]*S+N[1]*I+N[2]*k+N[3]*j-T.eMq}function F(T,S,I,k,j,N){for(k-=4;I<k;){for(;B(T,I,j)<=N;)I+=4;for(;B(T,k,j)>N;)k-=4;if(I>=k)break;const G=S[I>>2];S[I>>2]=S[k>>2],S[k>>2]=G,I+=4,k-=4}for(;B(T,I,j)>N;)I-=4;return I+4}function B(T,S,I){return T[S]*I[0]+T[S+1]*I[1]+T[S+2]*I[2]+T[S+3]*I[3]}function Y(T,S,I){const k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=[0,0,0,0],N=I-S>>2;for(let G=S;G<I;G+=4){const J=T[G]*.00392156862745098,P=T[G+1]*(1/255),O=T[G+2]*(1/255),ee=T[G+3]*(1/255);j[0]+=J,j[1]+=P,j[2]+=O,j[3]+=ee,k[0]+=J*J,k[1]+=J*P,k[2]+=J*O,k[3]+=J*ee,k[5]+=P*P,k[6]+=P*O,k[7]+=P*ee,k[10]+=O*O,k[11]+=O*ee,k[15]+=ee*ee}return k[4]=k[1],k[8]=k[2],k[9]=k[6],k[12]=k[3],k[13]=k[7],k[14]=k[11],{R:k,m:j,N}}function U(T){const{R:S}=T,{m:I}=T,{N:k}=T,j=I[0],N=I[1],G=I[2],J=I[3],P=k==0?0:1/k,O=[S[0]-j*j*P,S[1]-j*N*P,S[2]-j*G*P,S[3]-j*J*P,S[4]-N*j*P,S[5]-N*N*P,S[6]-N*G*P,S[7]-N*J*P,S[8]-G*j*P,S[9]-G*N*P,S[10]-G*G*P,S[11]-G*J*P,S[12]-J*j*P,S[13]-J*N*P,S[14]-J*G*P,S[15]-J*J*P],ee=O,W=R;let Z=[Math.random(),Math.random(),Math.random(),Math.random()],q=0,Q=0;if(k!=0)for(let se=0;se<16&&(Z=W.multVec(ee,Z),Q=Math.sqrt(W.dot(Z,Z)),Z=W.sml(1/Q,Z),!(se!=0&&Math.abs(Q-q)<1e-9));se++)q=Q;const ie=[j*P,N*P,G*P,J*P];return{Cov:O,q:ie,e:Z,L:q,eMq255:W.dot(W.sml(255,ie),Z),eMq:W.dot(Z,ie),rgba:(Math.round(255*ie[3])<<24|Math.round(255*ie[2])<<16|Math.round(255*ie[1])<<8|Math.round(255*ie[0])<<0)>>>0}}var R={multVec:(T,S)=>[T[0]*S[0]+T[1]*S[1]+T[2]*S[2]+T[3]*S[3],T[4]*S[0]+T[5]*S[1]+T[6]*S[2]+T[7]*S[3],T[8]*S[0]+T[9]*S[1]+T[10]*S[2]+T[11]*S[3],T[12]*S[0]+T[13]*S[1]+T[14]*S[2]+T[15]*S[3]],dot:(T,S)=>T[0]*S[0]+T[1]*S[1]+T[2]*S[2]+T[3]*S[3],sml:(T,S)=>[T*S[0],T*S[1],T*S[2],T*S[3]]};Zr.encode=function(S,I,k,j,N,G,J){j==null&&(j=0),J==null&&(J=!1);const P=g(S,I,k,j,[!1,!1,!1,0,J,!1]);return f(P,-1),d(P,I,k,N,G)},Zr.encodeLL=function(S,I,k,j,N,G,J,P){const O={ctype:0+(j==1?0:2)+(N==0?0:4),depth:G,frames:[]},ee=(j+N)*G,W=ee*I;for(let Z=0;Z<S.length;Z++)O.frames.push({rect:{x:0,y:0,width:I,height:k},img:new Uint8Array(S[Z]),blend:0,dispose:1,bpp:Math.ceil(ee/8),bpl:Math.ceil(W/8)});return f(O,0,!0),d(O,I,k,J,P)},Zr.encode.compress=g,Zr.encode.dither=u,Zr.quantize=D,Zr.quantize.getKDtree=M,Zr.quantize.getNearest=V})();const dR={toArrayBuffer(r,e){const t=r.width,n=r.height,s=t<<2,o=r.getContext("2d").getImageData(0,0,t,n),c=new Uint32Array(o.data.buffer),u=(32*t+31)/32<<2,d=u*n,f=122+d,g=new ArrayBuffer(f),y=new DataView(g),v=1<<20;let w,E,D,M,V=v,H=0,F=0,B=0;function Y(T){y.setUint16(F,T,!0),F+=2}function U(T){y.setUint32(F,T,!0),F+=4}function R(T){F+=T}Y(19778),U(f),R(4),U(122),U(108),U(t),U(-n>>>0),Y(1),Y(32),U(3),U(d),U(2835),U(2835),R(8),U(16711680),U(65280),U(255),U(4278190080),U(1466527264),(function T(){for(;H<n&&V>0;){for(M=122+H*u,w=0;w<s;)V--,E=c[B++],D=E>>>24,y.setUint32(M+w,E<<8|D),w+=4;H++}B<c.length?(V=v,setTimeout(T,dR._dly)):e(g)})()},toBlob(r,e){this.toArrayBuffer(r,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var ir={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},h9={[ir.CHROME]:16384,[ir.FIREFOX]:11180,[ir.DESKTOP_SAFARI]:16384,[ir.IE]:8192,[ir.IOS]:4096,[ir.ETC]:8192};const rv=typeof window<"u",fR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Im=rv&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),d9=(rv||fR)&&(Im&&Im.getOriginalSymbol(window,"File")||typeof File<"u"&&File),mR=(rv||fR)&&(Im&&Im.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function iv(r,e,t=Date.now()){return new Promise((n=>{const s=r.split(","),o=s[0].match(/:(.*?);/)[1],c=globalThis.atob(s[1]);let u=c.length;const d=new Uint8Array(u);for(;u--;)d[u]=c.charCodeAt(u);const f=new Blob([d],{type:o});f.name=e,f.lastModified=t,n(f)}))}function gR(r){return new Promise(((e,t)=>{const n=new mR;n.onload=()=>e(n.result),n.onerror=s=>t(s),n.readAsDataURL(r)}))}function pR(r){return new Promise(((e,t)=>{const n=new Image;n.onload=()=>e(n),n.onerror=s=>t(s),n.src=r}))}function _o(){if(_o.cachedResult!==void 0)return _o.cachedResult;let r=ir.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?r=ir.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?r=ir.IOS:/Safari/i.test(e)?r=ir.DESKTOP_SAFARI:/Firefox/i.test(e)?r=ir.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(r=ir.IE),_o.cachedResult=r,_o.cachedResult}function yR(r,e){const t=_o(),n=h9[t];let s=r,o=e,c=s*o;const u=s>o?o/s:s/o;for(;c>n*n;){const d=(n+s)/2,f=(n+o)/2;d<f?(o=f,s=f*u):(o=d*u,s=d),c=s*o}return{width:s,height:o}}function pg(r,e){let t,n;try{if(t=new OffscreenCanvas(r,e),n=t.getContext("2d"),n===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),n=t.getContext("2d")}return t.width=r,t.height=e,[t,n]}function _R(r,e){const{width:t,height:n}=yR(r.width,r.height),[s,o]=pg(t,n);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,s.width,s.height)),o.drawImage(r,0,0,s.width,s.height),s}function Yf(){return Yf.cachedResult!==void 0||(Yf.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Yf.cachedResult}function Rm(r,e={}){return new Promise((function(t,n){let s,o;var c=function(){try{return o=_R(s,e.fileType||r.type),t([s,o])}catch(d){return n(d)}},u=function(d){try{var f=function(g){try{throw g}catch(y){return n(y)}};try{let g;return gR(r).then((function(y){try{return g=y,pR(g).then((function(v){try{return s=v,(function(){try{return c()}catch(w){return n(w)}})()}catch(w){return f(w)}}),f)}catch(v){return f(v)}}),f)}catch(g){f(g)}}catch(g){return n(g)}};try{if(Yf()||[ir.DESKTOP_SAFARI,ir.MOBILE_SAFARI].includes(_o()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(r).then((function(d){try{return s=d,c()}catch{return u()}}),u)}catch{u()}}))}function Cm(r,e,t,n,s=1){return new Promise((function(o,c){let u;if(e==="image/png"){let y,v,w;return y=r.getContext("2d"),{data:v}=y.getImageData(0,0,r.width,r.height),w=Zr.encode([v.buffer],r.width,r.height,4096*s),u=new Blob([w],{type:e}),u.name=t,u.lastModified=n,d.call(this)}{let y=function(){return d.call(this)};var f=y;if(e==="image/bmp")return new Promise((v=>dR.toBlob(r,v))).then((function(v){try{return u=v,u.name=t,u.lastModified=n,y.call(this)}catch(w){return c(w)}}).bind(this),c);{let v=function(){return y.call(this)};var g=v;if(typeof OffscreenCanvas=="function"&&r instanceof OffscreenCanvas)return r.convertToBlob({type:e,quality:s}).then((function(w){try{return u=w,u.name=t,u.lastModified=n,v.call(this)}catch(E){return c(E)}}).bind(this),c);{let w;return w=r.toDataURL(e,s),iv(w,t,n).then((function(E){try{return u=E,v.call(this)}catch(D){return c(D)}}).bind(this),c)}}}function d(){return o(u)}}))}function Ai(r){r.width=0,r.height=0}function Xl(){return new Promise((function(r,e){let t,n,s,o;return Xl.cachedResult!==void 0?r(Xl.cachedResult):iv("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return t=c,Rm(t).then((function(u){try{return n=u[1],Cm(n,t.type,t.name,t.lastModified).then((function(d){try{return s=d,Ai(n),Rm(s).then((function(f){try{return o=f[0],Xl.cachedResult=o.width===1&&o.height===2,r(Xl.cachedResult)}catch(g){return e(g)}}),e)}catch(f){return e(f)}}),e)}catch(d){return e(d)}}),e)}catch(u){return e(u)}}),e)}))}function vR(r){return new Promise(((e,t)=>{const n=new mR;n.onload=s=>{const o=new DataView(s.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const c=o.byteLength;let u=2;for(;u<c;){if(o.getUint16(u+2,!1)<=8)return e(-1);const d=o.getUint16(u,!1);if(u+=2,d==65505){if(o.getUint32(u+=2,!1)!=1165519206)return e(-1);const f=o.getUint16(u+=6,!1)==18761;u+=o.getUint32(u+4,f);const g=o.getUint16(u,f);u+=2;for(let y=0;y<g;y++)if(o.getUint16(u+12*y,f)==274)return e(o.getUint16(u+12*y+8,f))}else{if((65280&d)!=65280)break;u+=o.getUint16(u,!1)}}return e(-1)},n.onerror=s=>t(s),n.readAsArrayBuffer(r)}))}function bR(r,e){const{width:t}=r,{height:n}=r,{maxWidthOrHeight:s}=e;let o,c=r;return isFinite(s)&&(t>s||n>s)&&([c,o]=pg(t,n),t>n?(c.width=s,c.height=n/t*s):(c.width=t/n*s,c.height=s),o.drawImage(r,0,0,c.width,c.height),Ai(r)),c}function wR(r,e){const{width:t}=r,{height:n}=r,[s,o]=pg(t,n);switch(e>4&&e<9?(s.width=n,s.height=t):(s.width=t,s.height=n),e){case 2:o.transform(-1,0,0,1,t,0);break;case 3:o.transform(-1,0,0,-1,t,n);break;case 4:o.transform(1,0,0,-1,0,n);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,n,0);break;case 7:o.transform(0,-1,-1,0,n,t);break;case 8:o.transform(0,-1,1,0,0,t)}return o.drawImage(r,0,0,t,n),Ai(r),s}function UT(r,e,t=0){return new Promise((function(n,s){let o,c,u,d,f,g,y,v,w,E,D,M,V,H,F,B,Y,U,R,T;function S(k=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=k,e.onProgress(Math.min(o,100))}function I(k){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(k,o),100),e.onProgress(o)}return o=t,c=e.maxIteration||10,u=1024*e.maxSizeMB*1024,S(),Rm(r,e).then((function(k){try{return[,d]=k,S(),f=bR(d,e),S(),new Promise((function(j,N){var G;if(!(G=e.exifOrientation))return vR(r).then((function(P){try{return G=P,J.call(this)}catch(O){return N(O)}}).bind(this),N);function J(){return j(G)}return J.call(this)})).then((function(j){try{return g=j,S(),Xl().then((function(N){try{return y=N?f:wR(f,g),S(),v=e.initialQuality||1,w=e.fileType||r.type,Cm(y,w,r.name,r.lastModified,v).then((function(G){try{{let ee=function(){if(c--&&(F>u||F>V)){let Z,q;return Z=T?.95*R.width:R.width,q=T?.95*R.height:R.height,[Y,U]=pg(Z,q),U.drawImage(R,0,0,Z,q),v*=w==="image/png"?.85:.95,Cm(Y,w,r.name,r.lastModified,v).then((function(Q){try{return B=Q,Ai(R),R=Y,F=B.size,I(Math.min(99,Math.floor((H-F)/(H-u)*100))),ee}catch(ie){return s(ie)}}),s)}return[1]},W=function(){return Ai(R),Ai(Y),Ai(f),Ai(y),Ai(d),I(100),n(B)};var P=ee,O=W;if(E=G,S(),D=E.size>u,M=E.size>r.size,!D&&!M)return I(100),n(E);var J;return V=r.size,H=E.size,F=H,R=y,T=!e.alwaysKeepResolution&&D,(J=(function(Z){for(;Z;){if(Z.then)return void Z.then(J,s);try{if(Z.pop){if(Z.length)return Z.pop()?W.call(this):Z;Z=ee}else Z=Z.call(this)}catch(q){return s(q)}}}).bind(this))(ee)}}catch(ee){return s(ee)}}).bind(this),s)}catch(G){return s(G)}}).bind(this),s)}catch(N){return s(N)}}).bind(this),s)}catch(j){return s(j)}}).bind(this),s)}))}const f9=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let zy;function m9(r,e){return new Promise(((t,n)=>{zy||(zy=(function(c){const u=[];return u.push(c),URL.createObjectURL(new Blob(u))})(f9));const s=new Worker(zy);s.addEventListener("message",(function(c){if(e.signal&&e.signal.aborted)s.terminate();else if(c.data.progress===void 0){if(c.data.error)return n(new Error(c.data.error)),void s.terminate();t(c.data.file),s.terminate()}else e.onProgress(c.data.progress)})),s.addEventListener("error",n),e.signal&&e.signal.addEventListener("abort",(()=>{n(e.signal.reason),s.terminate()})),s.postMessage({file:r,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function fn(r,e){return new Promise((function(t,n){let s,o,c,u,d,f;if(s={...e},c=0,{onProgress:u}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,d=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=w=>{c=w,typeof u=="function"&&u(c)},!(r instanceof Blob||r instanceof d9))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(r.type))return n(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!d||typeof Worker!="function"||f)return UT(r,s).then((function(w){try{return o=w,v.call(this)}catch(E){return n(E)}}).bind(this),n);var g=(function(){try{return v.call(this)}catch(w){return n(w)}}).bind(this),y=function(w){try{return UT(r,s).then((function(E){try{return o=E,g()}catch(D){return n(D)}}),n)}catch(E){return n(E)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",m9(r,s).then((function(w){try{return o=w,g()}catch{return y()}}),y)}catch{y()}function v(){try{o.name=r.name,o.lastModified=r.lastModified}catch{}try{s.preserveExif&&r.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===r.type)&&(o=hR(r,o))}catch{}return t(o)}}))}fn.getDataUrlFromFile=gR,fn.getFilefromDataUrl=iv,fn.loadImage=pR,fn.drawImageInCanvas=_R,fn.drawFileInCanvas=Rm,fn.canvasToFile=Cm,fn.getExifOrientation=vR,fn.handleMaxWidthOrHeight=bR,fn.followExifOrientation=wR,fn.cleanupCanvasMemory=Ai,fn.isAutoOrientationInBrowser=Xl,fn.approximateBelowMaximumCanvasSizeOfBrowser=yR,fn.copyExifWithoutOrientation=hR,fn.getBrowserName=_o,fn.version="2.0.2";const g9=["badword","ktgz","kfr","hakaret","aptal","salak","idiot","stupid","xxx","porn"];function p9(r){if(!r)return!0;const e=r.toLowerCase();return!g9.some(t=>e.includes(t))}async function y9(r,e){try{const t=kt(Fe,"users",r);return await br(t,{blockedUsers:Q_(e)}),!0}catch(t){throw console.error("Error blocking user:",t),t}}async function _9(r,e){try{const t=kt(Fe,"users",r);return await br(t,{blockedUsers:CI(e)}),!0}catch(t){throw console.error("Error unblocking user:",t),t}}async function v9(r,e){try{const t=kt(Fe,"users",r),n=await xs(t);return n.exists()?(n.data().blockedUsers||[]).includes(e):!1}catch{return!1}}function b9({onClose:r,onPostCreated:e}){const{t}=wn(),{currentUser:n}=ai(),s=$.useRef(null),[o,c]=$.useState(""),[u,d]=$.useState(""),[f,g]=$.useState(""),[y,v]=$.useState(!1),[w,E]=$.useState("none"),[D,M]=$.useState(null),[V,H]=$.useState(null),[F,B]=$.useState(!1),[Y,U]=$.useState(!1),[R,T]=$.useState(""),[S,I]=$.useState(""),[k,j]=$.useState(0);$.useEffect(()=>{if(u){const O=Kf.find(ee=>ee.value===u);O&&g(t(O.labelKey))}},[u,t]);const N=async O=>{const ee=O.target.files[0];if(ee){const W=new FileReader;W.onloadend=()=>H(W.result),W.readAsDataURL(ee),M(ee)}},G=async()=>{if(D){U(!0);try{let O=D;try{O=await fn(D,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0})}catch(W){console.warn("Compression failed for analysis, using original",W)}const ee=new FileReader;ee.readAsDataURL(O),ee.onloadend=async()=>{const W=ee.result,Z=await XI(W,"en"),q=(Z.plant_name+" "+Z.disease_name).toLowerCase();let Q=null;for(const ie of Kf)if(q.includes(ie.value)){Q=ie;break}Q?(d(Q.value),g(t(Q.labelKey)),I(`${t("auto_detect")}: ${t(Q.labelKey)}`)):I("Plant detected but not in our list yet."),setTimeout(()=>I(""),3e3),U(!1)}}catch(O){console.error("Auto detect failed",O),T(t("error_diagnosis_failed")),U(!1)}}},J=async O=>{if(O.preventDefault(),!!o.trim()){if(!p9(o)){T(t("unsafe_content_warning")||"Your post contains inappropriate language.");return}B(!0),T(""),j(0);try{let ee=null;if(D)try{console.log("Compressing for Base64 storage...");const Z=await fn(D,{maxSizeMB:.15,maxWidthOrHeight:800,useWebWorker:!0,initialQuality:.7});ee=await new Promise((q,Q)=>{const ie=new FileReader;ie.readAsDataURL(Z),ie.onload=()=>q(ie.result),ie.onerror=se=>Q(se)}),console.log("Base64 string ready, length:",ee.length)}catch(W){console.error("Compression failed:",W),T("Image is too large and could not be compressed."),B(!1);return}await nR(n.uid,{authorName:n.displayName||"Gardener",content:o,plantType:u||"other",image:ee}),e(),r()}catch(ee){console.error("FULL POST ERROR:",ee),T(ee.message||t("error_diagnosis_failed")||"Failed to share post.")}finally{B(!1)}}},P=Kf.filter(O=>t(O.labelKey).toLowerCase().includes(f.toLowerCase()));return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[b.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:t("ask_question")}),b.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(Ca,{className:"w-5 h-5 text-gray-500"})})]}),b.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[R&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:R}),S&&b.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg text-sm",children:S}),b.jsxs("form",{onSubmit:J,className:"space-y-4",children:[b.jsx("textarea",{className:"w-full p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none resize-none min-h-[120px]",placeholder:t("what_plant_placeholder"),value:o,onChange:O=>c(O.target.value),required:!0}),b.jsxs("div",{className:"relative",children:[b.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1 ml-1 uppercase",children:t("plant_diagnosis")}),b.jsxs("div",{className:"relative",children:[b.jsx(HI,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),b.jsx("input",{type:"text",className:"w-full pl-9 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:t("select_plant"),value:f,onChange:O=>{g(O.target.value),v(!0),O.target.value===""&&d("")},onFocus:()=>v(!0)}),b.jsx(J_,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),y&&b.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar",children:P.length>0?P.map(O=>b.jsx("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200",onClick:()=>{d(O.value),g(t(O.labelKey)),v(!1)},children:t(O.labelKey)},O.value)):b.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:"No Match"})}),y&&b.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>v(!1)})]}),V&&b.jsxs("div",{className:"relative rounded-xl overflow-hidden max-h-48 bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[b.jsx("img",{src:V,alt:"Preview",className:"w-full h-full object-cover"}),b.jsx("button",{type:"button",onClick:()=>{M(null),H(null)},className:"absolute top-2 right-2 p-1 bg-black/50 text-white rounded-full hover:bg-black/70",disabled:F,children:b.jsx(Ca,{className:"w-4 h-4"})}),b.jsxs("button",{type:"button",onClick:G,disabled:Y,className:"absolute bottom-2 right-2 px-3 py-1.5 bg-blue-600/90 text-white rounded-lg text-xs font-bold flex items-center gap-1.5 hover:bg-blue-700 backdrop-blur-sm shadow-lg transition-transform hover:scale-105",children:[Y?b.jsx(wa,{className:"w-3 h-3 animate-spin"}):b.jsx(JV,{className:"w-3 h-3"}),t(Y?"detecting":"auto_detect")]})]}),F&&k>0&&b.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:[b.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${k}%`}}),b.jsxs("p",{className:"text-xs text-center mt-1 text-gray-500",children:[Math.round(k),"%"]})]}),b.jsxs("div",{className:"flex justify-between items-center pt-2",children:[b.jsxs("button",{type:"button",onClick:()=>s.current?.click(),disabled:F,className:"flex items-center gap-2 text-gray-500 hover:text-green-600 transition-colors px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:[b.jsx(UI,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:t("upload_photo")})]}),b.jsx("input",{type:"file",ref:s,onChange:N,accept:"image/*",className:"hidden"}),b.jsxs("button",{type:"submit",disabled:F||!o.trim(),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl active:scale-95",children:[F?b.jsx(wa,{className:"w-4 h-4 animate-spin"}):b.jsx(_h,{className:"w-4 h-4"}),F?"...":t("ask_question")]})]})]})]})]})})}function w9({user:r,onClose:e}){const{currentUser:t}=ai(),n=Es(),[s,o]=$.useState(!1),{t:c}=wn(),{addToast:u}=Yo(),[d,f]=$.useState(r);$.useEffect(()=>{if(!r)return;const M=r.uid||r.id;if(!M)return;const V=To(kt(Fe,"users",M),H=>{H.exists()&&f({uid:H.id,...H.data()})},H=>{console.error("User listener error",H)});return()=>V()},[r]);const g=r?{...r,...d,uid:d?.uid||r.uid||r.id}:null,[y,v]=$.useState(!1);$.useEffect(()=>{t&&g&&v9(t.uid,g.uid).then(v)},[t,g]);const w=async()=>{if(!(!t||!g))try{y?(await _9(t.uid,g.uid),v(!1),u(c("user_unblocked")||"User unblocked","success")):window.confirm(c("confirm_block")||"Block this user? They won't be able to message you.")&&(await y9(t.uid,g.uid),v(!0),u(c("user_blocked")||"User blocked","success"))}catch(M){console.error(M),u("Action failed","error")}},E=M=>!M?.lastSeen||!M.lastSeen.seconds?!1:Date.now()-M.lastSeen.seconds*1e3<180*1e3;if(!r||!g)return null;const D=async()=>{if(!t){u(c("login_to_message"),"info"),n("/login");return}if(t.uid===g.uid){u(c("cannot_message_self"),"warning");return}o(!0);try{e();const M={uid:g.uid,name:g.name||g.displayName||"User",photoURL:g.photoURL||g.avatar||null};n("/messages/new",{state:{targetUser:M}})}catch(M){console.error(M),u("Error","error")}finally{o(!1)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl transform transition-all scale-100",onClick:M=>M.stopPropagation(),children:[b.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/10 hover:bg-black/20 rounded-full transition-colors z-10",children:b.jsx(Ca,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),b.jsxs("div",{className:"flex flex-col items-center relative",children:[b.jsx("img",{src:g.photoURL||g.avatar||`https://ui-avatars.com/api/?name=${g.name}`,alt:g.name,className:"w-24 h-24 rounded-full object-cover mb-4 shadow-lg border-4 border-green-50 dark:border-green-900"}),b.jsxs("div",{className:`absolute top-2 right-2 px-3 py-1 rounded-full text-xs font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 ${E(g)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[b.jsx("div",{className:`w-2 h-2 rounded-full ${E(g)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),E(g)?"Online":"Offline"]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:g.name||"User"}),b.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6 flex items-center gap-1",children:[b.jsx(O0,{className:"w-3 h-3"}),b.jsxs("span",{children:[c("joined")||"Katlma Tarihi",": ",g.createdAt?.seconds?new Date(g.createdAt.seconds*1e3).toLocaleDateString(i18n.language,{day:"numeric",month:"long",year:"numeric"}):c("unknown_date")]})]}),b.jsxs("div",{className:"flex flex-col gap-3 w-full mt-6",children:[b.jsxs("button",{onClick:()=>{e(),n(`/profile/${g.uid}`)},className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-300 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 transition-transform active:scale-95",children:[b.jsx(O0,{className:"w-5 h-5"}),c("view_profile")||"Profili Gr"]}),b.jsx("button",{onClick:D,disabled:s||y,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95 disabled:opacity-70",children:s?c("starting_chat")||"Balatlyor...":b.jsxs(b.Fragment,{children:[" ",b.jsx(yh,{className:"w-5 h-5"})," ",c("send_message")||"Mesaj Gnder"," "]})}),t&&t.uid!==g.uid&&b.jsx("button",{onClick:w,className:`w-full py-2.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors ${y?"bg-gray-200 text-gray-700 hover:bg-gray-300":"text-red-500 hover:bg-red-50 border border-red-100"}`,children:y?c("unblock_user")||"Engeli Kaldr":c("block_user")||"Kullancy Engelle"})]})]})]})})}function yg(){return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white dark:bg-gray-900 transition-opacity duration-300",children:b.jsxs("div",{className:"flex flex-col items-center animate-fade-in",children:[b.jsxs("div",{className:"relative w-24 h-24 flex items-center justify-center",children:[b.jsx("div",{className:"absolute inset-0 border-4 border-green-100 dark:border-green-900 rounded-full"}),b.jsx("div",{className:"absolute inset-0 border-4 border-green-500 rounded-full border-t-transparent animate-spin"}),b.jsx(Fr,{className:"w-10 h-10 text-green-600 dark:text-green-400 animate-pulse"})]}),b.jsx("h3",{className:"mt-6 text-lg font-bold text-gray-800 dark:text-gray-200 animate-pulse tracking-wide",children:"Plant AI"})]})})}function x9({analysisId:r,onClose:e}){const[t,n]=$.useState(null),[s,o]=$.useState(!0);return $.useEffect(()=>{async function c(){try{const u=await xs(kt(Fe,"analyses",r));if(u.exists()){const d=u.data();let f=[];try{f=(await yc(Bn(Fe,"analyses",r,"updates"))).docs.map(y=>y.data()).sort((y,v)=>(v.createdAt?.seconds||0)-(y.createdAt?.seconds||0))}catch(g){console.warn("Could not fetch updates for modal",g)}n({...d,updates:f})}}catch(u){console.error(u)}finally{o(!1)}}c()},[r]),$.useEffect(()=>{const c=u=>{u.key==="Escape"&&e()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[e]),s?b.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:b.jsx(wa,{className:"animate-spin text-white w-8 h-8"})}):t?b.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto custom-scrollbar shadow-2xl p-6 relative",onClick:c=>c.stopPropagation(),children:[b.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-full dark:hover:bg-gray-700 transition-colors z-10",children:b.jsx(Ca,{className:"w-5 h-5 text-gray-500"})}),b.jsx("div",{className:"flex justify-between items-start mb-6 pr-8",children:b.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize flex items-center gap-2",children:[b.jsx("span",{className:"text-green-600",children:t.plantType})," Diagnosis"]})}),b.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("img",{src:t.mainImage,alt:"Main",className:"rounded-xl object-cover w-full h-48 bg-gray-100 border border-gray-200 dark:border-gray-700"}),t.macroImage&&b.jsx("img",{src:t.macroImage,alt:"Macro",className:"rounded-xl object-cover w-20 h-20 bg-gray-100 border border-gray-200 dark:border-gray-700"})]}),b.jsxs("div",{children:[b.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/10 rounded-xl border border-red-100 dark:border-red-900/30",children:[b.jsx("span",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase tracking-wider block mb-1",children:"Detected Issue"}),b.jsx("p",{className:"text-2xl font-bold text-red-700 dark:text-red-400",children:t.result.disease_name})]}),b.jsxs("div",{className:"mb-4",children:[b.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider block mb-1",children:"Confidence"}),b.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:b.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:`${Math.min((t.result.confidence>1?t.result.confidence:t.result.confidence*100)||80,100)}%`}})}),b.jsxs("span",{className:"text-xs text-gray-500 mt-1 block text-right",children:[Math.round((t.result.confidence>1?t.result.confidence:t.result.confidence*100)||80),"% Match"]})]})]})]}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"bg-green-50 dark:bg-green-900/10 p-5 rounded-xl border border-green-100 dark:border-green-900/30",children:[b.jsx("h3",{className:"font-bold text-green-800 dark:text-green-400 mb-2 text-lg",children:"Analysis"}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:t.result.description})]}),t.result.treatment_steps&&b.jsxs("div",{className:"border border-gray-100 dark:border-gray-700 p-5 rounded-xl bg-gray-50 dark:bg-gray-800/50",children:[b.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 text-lg",children:"Treatment Plan"}),b.jsx("ul",{className:"space-y-3",children:t.result.treatment_steps.map((c,u)=>b.jsxs("li",{className:"flex gap-3 text-gray-700 dark:text-gray-300",children:[b.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full flex items-center justify-center font-bold text-xs mt-0.5",children:u+1}),b.jsx("span",{children:c})]},u))})]}),t.updates&&t.updates.length>0&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Progress Updates"}),b.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.updates.map((c,u)=>b.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-100 dark:border-gray-700",children:[c.imageUrl&&b.jsx("img",{src:c.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),b.jsx("p",{className:"text-xs text-gray-500 mb-1",children:c.createdAt?.seconds?new Date(c.createdAt.seconds*1e3).toLocaleDateString():""}),b.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:c.note})]},u))})]})]})]})}):null}function E9(){const{t:r}=wn(),{currentUser:e}=ai(),[t,n]=$.useState([]),[s,o]=$.useState(!0),[c,u]=$.useState(!1),[d,f]=$.useState(null),[g,y]=$.useState(null),[v,w]=$.useState("All"),[E,D]=$.useState(!1),[M,V]=$.useState(""),H=10,[F,B]=$.useState(!0),U=[{value:"All",labelKey:"community"},...Kf].filter(R=>(R.value==="All"?r("community")+" (All)":r(R.labelKey)).toLowerCase().includes(M.toLowerCase()));return $.useEffect(()=>{o(!0);let R;v==="All"?R=Ra(Bn(Fe,"posts"),X6("createdAt","desc"),rT(H)):R=Ra(Bn(Fe,"posts"),Ko("plantType","==",v),rT(50));const T=To(R,S=>{const I=S.docs.map(k=>({id:k.id,...k.data()}));I.sort((k,j)=>{const N=k.createdAt?.seconds||0;return(j.createdAt?.seconds||0)-N}),n(I),o(!1),B(S.docs.length>=H)},S=>{console.error("Error fetching posts:",S),o(!1)});return()=>T()},[v]),b.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 pb-20 p-4",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 sticky top-0 z-20 gap-4",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white shrink-0",children:r("community")}),b.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[b.jsxs("div",{className:"relative w-full sm:w-64",children:[b.jsxs("div",{className:"relative",children:[b.jsx(HI,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),b.jsx("input",{type:"text",className:"w-full pl-9 pr-8 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:r("select_plant"),value:M,onFocus:()=>D(!0),onChange:R=>{V(R.target.value),D(!0)}}),v!=="All"?b.jsx("button",{onClick:()=>{w("All"),V("")},className:"absolute right-2 top-2 p-0.5 hover:bg-gray-200 rounded-full",children:b.jsx(Ca,{className:"w-4 h-4 text-gray-500"})}):b.jsx(J_,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),E&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>D(!1)}),b.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-y-auto custom-scrollbar",children:[U.map(R=>b.jsxs("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200 flex justify-between items-center",onClick:()=>{w(R.value),V(R.value==="All"?"":r(R.labelKey)),D(!1)},children:[b.jsx("span",{children:R.value==="All"?r("community"):r(R.labelKey)}),v===R.value&&b.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]},R.value)),U.length===0&&b.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:r("no_results")||"No results"})]})]})]}),b.jsxs("button",{onClick:()=>{if(!e){alert(r("login_to_post")||"Please login to post.");return}u(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow-md transition-all active:scale-95 shrink-0 whitespace-nowrap",children:[b.jsx(RV,{className:"w-5 h-5"}),b.jsx("span",{className:"hidden sm:inline",children:r("ask_question")}),b.jsx("span",{className:"sm:hidden",children:r("ask_question")})]})]})]}),s?b.jsx(yg,{}):t.length>0?b.jsx("div",{className:"space-y-6",children:t.map(R=>b.jsx(uR,{post:R,onViewAnalysis:T=>y(T),onUserClick:T=>{f({id:T,name:R.authorName||"Gardener",avatar:R.userAvatar})}},R.id))}):b.jsxs("div",{className:"text-center py-20 text-gray-500 bg-white dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700",children:[b.jsx("p",{className:"text-lg mb-2",children:r("no_posts_yet")}),b.jsx("p",{className:"text-sm",children:r("be_the_first")})]}),c&&b.jsx(b9,{onClose:()=>u(!1),onPostCreated:()=>{}}),g&&b.jsx(x9,{analysisId:g,onClose:()=>y(null)}),d&&b.jsx(w9,{user:d,onClose:()=>f(null)})]})}function T9({chat:r,currentUser:e}){const[t,n]=$.useState(null),{t:s}=wn(),{addToast:o}=Yo(),c=r.participants.find(v=>v!==e.uid);$.useEffect(()=>{(async()=>{if(c)try{const w=await xs(kt(Fe,"users",c));if(w.exists())n(w.data());else{const E=r.participantData?.[c];E&&n(E)}}catch(w){console.error("Error fetching user",w)}})()},[c,r.participantData]);const u=t||{name:"Unknown User",photoURL:null},d=async v=>{if(v.preventDefault(),!!window.confirm(s("confirm_delete_chat")||"Delete this chat permanently?"))try{await dg(kt(Fe,"chats",r.id)),o("Chat deleted","success")}catch(w){console.error("Delete Chat Error",w),o("Failed to delete chat","error")}},{i18n:f}=wn(),g=f.language==="tr"?gg:Hh,y=v=>v?v===" Photo"||v.includes(" Photo")?` ${s("photo")||"Photo"}`:v===" Voice Message"||v.includes(" Voice Message")?` ${s("voice_message")||"Voice Message"}`:v:s("new_conversation")||"Yeni Sohbet";return b.jsxs("div",{className:"relative group",children:[b.jsxs(jr,{to:`/messages/${r.id}`,className:"flex items-center gap-4 p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors pr-12",children:[b.jsx("img",{src:u.photoURL||u.avatar||`https://ui-avatars.com/api/?name=${u.name||"User"}`,alt:u.name,className:"w-12 h-12 rounded-full object-cover border border-gray-100 bg-white"}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[b.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:u.name||u.displayName||"Loading..."}),r.updatedAt&&b.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:mg(new Date(r.updatedAt.seconds*1e3),{addSuffix:!0,locale:g})})]}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:y(r.lastMessage)})]})]}),b.jsx("button",{onClick:d,className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full opacity-0 group-hover:opacity-100 transition-all z-10",title:"Delete Chat",children:b.jsx(vh,{className:"w-5 h-5"})})]})}function S9(){const{currentUser:r}=ai(),{t:e}=wn(),[t,n]=$.useState([]),[s,o]=$.useState(!0);return $.useEffect(()=>{if(!r)return;const c=Ra(Bn(Fe,"chats"),Ko("participants","array-contains",r.uid)),u=To(c,d=>{const f=d.docs.map(g=>({id:g.id,...g.data()})).sort((g,y)=>{const v=g.updatedAt?.seconds||0;return(y.updatedAt?.seconds||0)-v});n(f),o(!1)});return()=>u()},[r]),s?b.jsx(yg,{}):b.jsxs("div",{className:"max-w-2xl mx-auto w-full",children:[b.jsx("h1",{className:"text-2xl font-bold mb-6 px-4",children:e("messages")}),b.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 divide-y divide-gray-100 dark:divide-gray-700",children:t.length===0?b.jsx("div",{className:"p-8 text-center text-gray-500",children:e("no_messages")||"No messages yet. Start a conversation!"}):t.map(c=>b.jsx(T9,{chat:c,currentUser:r},c.id))})]})}const A9="modulepreload",I9=function(r){return"/"+r},zT={},R9=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var c=f;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");s=f(t.map(g=>{if(g=I9(g),g in zT)return;zT[g]=!0;const y=g.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":A9,y||(w.as="script"),w.crossOrigin="",w.href=g,d&&w.setAttribute("nonce",d),document.head.appendChild(w),y)return new Promise((E,D)=>{w.addEventListener("load",E),w.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return s.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function Gn(r,e,t,n){return new(t||(t=Promise))((function(s,o){function c(f){try{d(n.next(f))}catch(g){o(g)}}function u(f){try{d(n.throw(f))}catch(g){o(g)}}function d(f){var g;f.done?s(f.value):(g=f.value,g instanceof t?g:new t((function(y){y(g)}))).then(c,u)}d((n=n.apply(r,e||[])).next())}))}class qh{constructor(){this.listeners={}}on(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),n?.once){const s=(...o)=>{this.un(e,s),t(...o)};return this.listeners[e].add(s),()=>this.un(e,s)}return this.listeners[e].add(t),()=>this.un(e,t)}un(e,t){var n;(n=this.listeners[e])===null||n===void 0||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach((n=>n(...t)))}}const Af={decode:function(r,e){return Gn(this,void 0,void 0,(function*(){const t=new AudioContext({sampleRate:e});try{return yield t.decodeAudioData(r)}finally{t.close()}}))},createBuffer:function(r,e){if(!r||r.length===0)throw new Error("channelData must be a non-empty array");if(e<=0)throw new Error("duration must be greater than 0");if(typeof r[0]=="number"&&(r=[r]),!r[0]||r[0].length===0)throw new Error("channelData must contain non-empty channel arrays");(function(n){const s=n[0];if(s.some((o=>o>1||o<-1))){const o=s.length;let c=0;for(let u=0;u<o;u++){const d=Math.abs(s[u]);d>c&&(c=d)}for(const u of n)for(let d=0;d<o;d++)u[d]/=c}})(r);const t=r.map((n=>n instanceof Float32Array?n:Float32Array.from(n)));return{duration:e,length:t[0].length,sampleRate:t[0].length/e,numberOfChannels:t.length,getChannelData:n=>{const s=t[n];if(!s)throw new Error(`Channel ${n} not found`);return s},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function xR(r,e){const t=e.xmlns?document.createElementNS(e.xmlns,r):document.createElement(r);for(const[n,s]of Object.entries(e))if(n==="children"&&s)for(const[o,c]of Object.entries(s))c instanceof Node?t.appendChild(c):typeof c=="string"?t.appendChild(document.createTextNode(c)):t.appendChild(xR(o,c));else n==="style"?Object.assign(t.style,s):n==="textContent"?t.textContent=s:t.setAttribute(n,s.toString());return t}function BT(r,e,t){const n=xR(r,e||{});return t?.appendChild(n),n}var C9=Object.freeze({__proto__:null,createElement:BT,default:BT});const N9={fetchBlob:function(r,e,t){return Gn(this,void 0,void 0,(function*(){const n=yield fetch(r,t);if(n.status>=400)throw new Error(`Failed to fetch ${r}: ${n.status} (${n.statusText})`);return(function(s,o){Gn(this,void 0,void 0,(function*(){if(!s.body||!s.headers)return;const c=s.body.getReader(),u=Number(s.headers.get("Content-Length"))||0;let d=0;const f=g=>{d+=g?.length||0;const y=Math.round(d/u*100);o(y)};try{for(;;){const g=yield c.read();if(g.done)break;f(g.value)}}catch(g){console.warn("Progress tracking error:",g)}}))})(n.clone(),e),n.blob()}))}};function Wt(r){let e=r;const t=new Set;return{get value(){return e},set(n){Object.is(e,n)||(e=n,t.forEach((s=>s(e))))},update(n){this.set(n(e))},subscribe:n=>(t.add(n),()=>t.delete(n))}}function po(r,e){const t=Wt(r());return e.forEach((n=>n.subscribe((()=>{const s=r();Object.is(t.value,s)||t.set(s)})))),{get value(){return t.value},subscribe:n=>t.subscribe(n)}}function ua(r,e){let t;const n=()=>{t&&(t(),t=void 0),t=r()},s=e.map((o=>o.subscribe(n)));return n(),()=>{t&&(t(),t=void 0),s.forEach((o=>o()))}}class k9 extends qh{get isPlayingSignal(){return this._isPlaying}get currentTimeSignal(){return this._currentTime}get durationSignal(){return this._duration}get volumeSignal(){return this._volume}get mutedSignal(){return this._muted}get playbackRateSignal(){return this._playbackRate}get seekingSignal(){return this._seeking}constructor(e){super(),this.isExternalMedia=!1,this.reactiveMediaEventCleanups=[],e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),this._isPlaying=Wt(!1),this._currentTime=Wt(0),this._duration=Wt(0),this._volume=Wt(this.media.volume),this._muted=Wt(this.media.muted),this._playbackRate=Wt(this.media.playbackRate||1),this._seeking=Wt(!1),this.setupReactiveMediaEvents(),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)}),{once:!0})}setupReactiveMediaEvents(){this.reactiveMediaEventCleanups.push(this.onMediaEvent("play",(()=>{this._isPlaying.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("pause",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ended",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("timeupdate",(()=>{this._currentTime.set(this.media.currentTime)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("durationchange",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("loadedmetadata",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeking",(()=>{this._seeking.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeked",(()=>{this._seeking.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("volumechange",(()=>{this._volume.set(this.media.volume),this._muted.set(this.media.muted)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ratechange",(()=>{this._playbackRate.set(this.media.playbackRate)})))}onMediaEvent(e,t,n){return this.media.addEventListener(e,t,n),()=>this.media.removeEventListener(e,t,n)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return this.media.canPlayType(e)!==""}setSrc(e,t){const n=this.getSrc();if(e&&n===e)return;this.revokeSrc();const s=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;if(n&&this.media.removeAttribute("src"),s||e)try{this.media.src=s}catch{this.media.src=e}}destroy(){this.reactiveMediaEventCleanups.forEach((e=>e())),this.reactiveMediaEventCleanups=[],this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(e){this.reactiveMediaEventCleanups.forEach((t=>t())),this.reactiveMediaEventCleanups=[],this.media=e,this.setupReactiveMediaEvents()}play(){return Gn(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(e){if(e instanceof DOMException&&e.name==="AbortError")return;throw e}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}function D9({maxTop:r,maxBottom:e,halfHeight:t,vScale:n,barMinHeight:s=0,barAlign:o}){let c=Math.round(r*t*n),u=c+Math.round(e*t*n)||1;return u<s&&(u=s,o||(c=u/2)),{topHeight:c,totalHeight:u}}function O9({barAlign:r,halfHeight:e,topHeight:t,totalHeight:n,canvasHeight:s}){return r==="top"?0:r==="bottom"?s-n:e-t}function FT(r,e,t){const n=e-r.left,s=t-r.top;return[n/r.width,s/r.height]}function ER(r){return!!(r.barWidth||r.barGap||r.barAlign)}function HT(r,e){if(!ER(e))return r;const t=e.barWidth||.5,n=t+(e.barGap||t/2);return n===0?r:Math.floor(r/n)*n}function qT({scrollLeft:r,totalWidth:e,numCanvases:t}){if(e===0)return[0];const n=r/e,s=Math.floor(n*t);return[s-1,s,s+1]}function TR(r){const e=r._cleanup;typeof e=="function"&&e()}function M9(r){const e=Wt({scrollLeft:r.scrollLeft,scrollWidth:r.scrollWidth,clientWidth:r.clientWidth}),t=po((()=>(function(o){const{scrollLeft:c,scrollWidth:u,clientWidth:d}=o;if(u===0)return{startX:0,endX:1};const f=c/u,g=(c+d)/u;return{startX:Math.max(0,Math.min(1,f)),endX:Math.max(0,Math.min(1,g))}})(e.value)),[e]),n=po((()=>(function(o){return{left:o.scrollLeft,right:o.scrollLeft+o.clientWidth}})(e.value)),[e]),s=()=>{e.set({scrollLeft:r.scrollLeft,scrollWidth:r.scrollWidth,clientWidth:r.clientWidth})};return r.addEventListener("scroll",s,{passive:!0}),{scrollData:e,percentages:t,bounds:n,cleanup:()=>{r.removeEventListener("scroll",s),TR(e)}}}class P9 extends qh{constructor(e,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragStream=null,this.scrollStream=null,this.subscriptions=[],this.options=e;const n=this.parentFromOptionsContainer(e.container);this.parent=n;const[s,o]=this.initHtml();n.appendChild(s),this.container=s,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),t&&o.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e=="string"?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){this.wrapper.addEventListener("click",(t=>{const n=this.wrapper.getBoundingClientRect(),[s,o]=FT(n,t.clientX,t.clientY);this.emit("click",s,o)})),this.wrapper.addEventListener("dblclick",(t=>{const n=this.wrapper.getBoundingClientRect(),[s,o]=FT(n,t.clientX,t.clientY);this.emit("dblclick",s,o)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollStream=M9(this.scrollContainer);const e=ua((()=>{const{startX:t,endX:n}=this.scrollStream.percentages.value,{left:s,right:o}=this.scrollStream.bounds.value;this.emit("scroll",t,n,s,o)}),[this.scrollStream.percentages,this.scrollStream.bounds]);if(this.subscriptions.push(e),typeof ResizeObserver=="function"){const t=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{t().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const e=this.parent.clientWidth;e===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=e,this.reRender(),this.emit("resize"))}initDrag(){if(this.dragStream)return;this.dragStream=(function(t,n={}){const{threshold:s=3,mouseButton:o=0,touchDelay:c=100}=n,u=Wt(null),d=new Map,f=matchMedia("(pointer: coarse)").matches;let g=()=>{};const y=v=>{if(v.button!==o||(d.set(v.pointerId,v),d.size>1))return;let w=v.clientX,E=v.clientY,D=!1;const M=Date.now(),V=t.getBoundingClientRect(),{left:H,top:F}=V,B=S=>{if(S.defaultPrevented||d.size>1||f&&Date.now()-M<c)return;const I=S.clientX,k=S.clientY,j=I-w,N=k-E;(D||Math.abs(j)>s||Math.abs(N)>s)&&(S.preventDefault(),S.stopPropagation(),D||(u.set({type:"start",x:w-H,y:E-F}),D=!0),u.set({type:"move",x:I-H,y:k-F,deltaX:j,deltaY:N}),w=I,E=k)},Y=S=>{if(d.delete(S.pointerId),D){const I=S.clientX,k=S.clientY;u.set({type:"end",x:I-H,y:k-F})}g()},U=S=>{d.delete(S.pointerId),S.relatedTarget&&S.relatedTarget!==document.documentElement||Y(S)},R=S=>{D&&(S.stopPropagation(),S.preventDefault())},T=S=>{S.defaultPrevented||d.size>1||D&&S.preventDefault()};document.addEventListener("pointermove",B),document.addEventListener("pointerup",Y),document.addEventListener("pointerout",U),document.addEventListener("pointercancel",U),document.addEventListener("touchmove",T,{passive:!1}),document.addEventListener("click",R,{capture:!0}),g=()=>{document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",Y),document.removeEventListener("pointerout",U),document.removeEventListener("pointercancel",U),document.removeEventListener("touchmove",T),setTimeout((()=>{document.removeEventListener("click",R,{capture:!0})}),10)}};return t.addEventListener("pointerdown",y),{signal:u,cleanup:()=>{g(),t.removeEventListener("pointerdown",y),d.clear(),TR(u)}}})(this.wrapper);const e=ua((()=>{const t=this.dragStream.signal.value;if(!t)return;const n=this.wrapper.getBoundingClientRect().width,s=(o=t.x/n)<0?0:o>1?1:o;var o;t.type==="start"?(this.isDragging=!0,this.emit("dragstart",s)):t.type==="move"?this.emit("drag",s):t.type==="end"&&(this.isDragging=!1,this.emit("dragend",s))}),[this.dragStream.signal]);this.subscriptions.push(e)}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return t.innerHTML=`
      <style${n?` nonce="${n}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
          pointer-events: none;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}e.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){const{scrollWidth:t}=this.scrollContainer,n=t*e;this.setScroll(n)}destroy(){var e;this.subscriptions.forEach((t=>t())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(e=this.unsubscribeOnScroll)===null||e===void 0||e.forEach((t=>t())),this.unsubscribeOnScroll=[],this.dragStream&&(this.dragStream.cleanup(),this.dragStream=null),this.scrollStream&&(this.scrollStream.cleanup(),this.scrollStream=null)}createDelay(e=10){let t,n;const s=()=>{t&&(clearTimeout(t),t=void 0),n&&(n(),n=void 0)};return this.timeouts.push(s),()=>new Promise(((o,c)=>{s(),n=c,t=setTimeout((()=>{t=void 0,n=void 0,o()}),e)}))}getHeight(e,t){var n;const s=((n=this.audioData)===null||n===void 0?void 0:n.numberOfChannels)||1;return(function({optionsHeight:o,optionsSplitChannels:c,parentHeight:u,numberOfChannels:d,defaultHeight:f=128}){if(o==null)return f;const g=Number(o);if(!isNaN(g))return g;if(o==="auto"){const y=u||f;return c?.every((v=>!v.overlay))?y/d:y}return f})({optionsHeight:e,optionsSplitChannels:t,parentHeight:this.parent.clientHeight,numberOfChannels:s,defaultHeight:128})}convertColorValues(e,t){return(function(n,s,o){if(!Array.isArray(n))return n||"";if(n.length===0)return"#999";if(n.length<2)return n[0]||"";const c=document.createElement("canvas"),u=c.getContext("2d"),d=o??c.height*s,f=u.createLinearGradient(0,0,0,d||s),g=1/(n.length-1);return n.forEach(((y,v)=>{f.addColorStop(v*g,y)})),f})(e,this.getPixelRatio(),t?.canvas.height)}getPixelRatio(){return e=window.devicePixelRatio,Math.max(1,e||1);var e}renderBarWaveform(e,t,n,s){const{width:o,height:c}=n.canvas,{halfHeight:u,barWidth:d,barRadius:f,barIndexScale:g,barSpacing:y,barMinHeight:v}=(function({width:E,height:D,length:M,options:V,pixelRatio:H}){const F=D/2,B=V.barWidth?V.barWidth*H:1,Y=V.barGap?V.barGap*H:V.barWidth?B/2:0,U=B+Y||1;return{halfHeight:F,barWidth:B,barGap:Y,barRadius:V.barRadius||0,barMinHeight:V.barMinHeight?V.barMinHeight*H:0,barIndexScale:M>0?E/U/M:0,barSpacing:U}})({width:o,height:c,length:(e[0]||[]).length,options:t,pixelRatio:this.getPixelRatio()}),w=(function({channelData:E,barIndexScale:D,barSpacing:M,barWidth:V,halfHeight:H,vScale:F,canvasHeight:B,barAlign:Y,barMinHeight:U}){const R=E[0]||[],T=E[1]||R,S=R.length,I=[];let k=0,j=0,N=0;for(let G=0;G<=S;G++){const J=Math.round(G*D);if(J>k){const{topHeight:ee,totalHeight:W}=D9({maxTop:j,maxBottom:N,halfHeight:H,vScale:F,barMinHeight:U,barAlign:Y}),Z=O9({barAlign:Y,halfHeight:H,topHeight:ee,totalHeight:W,canvasHeight:B});I.push({x:k*M,y:Z,width:V,height:W}),k=J,j=0,N=0}const P=Math.abs(R[G]||0),O=Math.abs(T[G]||0);P>j&&(j=P),O>N&&(N=O)}return I})({channelData:e,barIndexScale:g,barSpacing:y,barWidth:d,halfHeight:u,vScale:s,canvasHeight:c,barAlign:t.barAlign,barMinHeight:v});n.beginPath();for(const E of w)f&&"roundRect"in n?n.roundRect(E.x,E.y,E.width,E.height,f):n.rect(E.x,E.y,E.width,E.height);n.fill(),n.closePath()}renderLineWaveform(e,t,n,s){const{width:o,height:c}=n.canvas,u=(function({channelData:d,width:f,height:g,vScale:y}){const v=g/2,w=d[0]||[];return[w,d[1]||w].map(((E,D)=>{const M=E.length,V=M?f/M:0,H=v,F=D===0?-1:1,B=[{x:0,y:H}];let Y=0,U=0;for(let R=0;R<=M;R++){const T=Math.round(R*V);if(T>Y){const I=H+(Math.round(U*v*y)||1)*F;B.push({x:Y,y:I}),Y=T,U=0}const S=Math.abs(E[R]||0);S>U&&(U=S)}return B.push({x:Y,y:H}),B}))})({channelData:e,width:o,height:c,vScale:s});n.beginPath();for(const d of u)if(d.length){n.moveTo(d[0].x,d[0].y);for(let f=1;f<d.length;f++){const g=d[f];n.lineTo(g.x,g.y)}}n.fill(),n.closePath()}renderWaveform(e,t,n){if(n.fillStyle=this.convertColorValues(t.waveColor,n),t.renderFunction)return void t.renderFunction(e,n);const s=(function({channelData:o,barHeight:c,normalize:u,maxPeak:d}){var f;const g=c||1;if(!u)return g;const y=o[0];if(!y||y.length===0)return g;let v=d??0;if(!d)for(let w=0;w<y.length;w++){const E=(f=y[w])!==null&&f!==void 0?f:0,D=Math.abs(E);D>v&&(v=D)}return v?g/v:g})({channelData:e,barHeight:t.barHeight,normalize:t.normalize,maxPeak:t.maxPeak});ER(t)?this.renderBarWaveform(e,t,n,s):this.renderLineWaveform(e,t,n,s)}renderSingleCanvas(e,t,n,s,o,c,u){const d=this.getPixelRatio(),f=document.createElement("canvas");f.width=Math.round(n*d),f.height=Math.round(s*d),f.style.width=`${n}px`,f.style.height=`${s}px`,f.style.left=`${Math.round(o)}px`,c.appendChild(f);const g=f.getContext("2d");if(t.renderFunction?(g.fillStyle=this.convertColorValues(t.waveColor,g),t.renderFunction(e,g)):this.renderWaveform(e,t,g),f.width>0&&f.height>0){const y=f.cloneNode(),v=y.getContext("2d");v.drawImage(f,0,0),v.globalCompositeOperation="source-in",v.fillStyle=this.convertColorValues(t.progressColor,v),v.fillRect(0,0,f.width,f.height),u.appendChild(y)}}renderMultiCanvas(e,t,n,s,o,c){const u=this.getPixelRatio(),{clientWidth:d}=this.scrollContainer,f=n/u,g=(function({clientWidth:E,totalWidth:D,options:M}){return HT(Math.min(8e3,E,D),M)})({clientWidth:d,totalWidth:f,options:t});let y={};if(g===0)return;const v=E=>{if(E<0||E>=w||y[E])return;y[E]=!0;const D=E*g;let M=Math.min(f-D,g);if(M=HT(M,t),M<=0)return;const V=(function({channelData:H,offset:F,clampedWidth:B,totalWidth:Y}){return H.map((U=>{const R=Math.floor(F/Y*U.length),T=Math.floor((F+B)/Y*U.length);return U.slice(R,T)}))})({channelData:e,offset:D,clampedWidth:M,totalWidth:f});this.renderSingleCanvas(V,t,M,s,D,o,c)},w=Math.ceil(f/g);if(!this.isScrollable){for(let E=0;E<w;E++)v(E);return}if(qT({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:f,numCanvases:w}).forEach((E=>v(E))),w>1){const E=this.on("scroll",(()=>{const{scrollLeft:D}=this.scrollContainer;Object.keys(y).length>10&&(o.innerHTML="",c.innerHTML="",y={}),qT({scrollLeft:D,totalWidth:f,numCanvases:w}).forEach((M=>v(M)))}));this.unsubscribeOnScroll.push(E)}}renderChannel(e,t,n,s){var{overlay:o}=t,c=(function(g,y){var v={};for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&y.indexOf(w)<0&&(v[w]=g[w]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function"){var E=0;for(w=Object.getOwnPropertySymbols(g);E<w.length;E++)y.indexOf(w[E])<0&&Object.prototype.propertyIsEnumerable.call(g,w[E])&&(v[w[E]]=g[w[E]])}return v})(t,["overlay"]);const u=document.createElement("div"),d=this.getHeight(c.height,c.splitChannels);u.style.height=`${d}px`,o&&s>0&&(u.style.marginTop=`-${d}px`),this.canvasWrapper.style.minHeight=`${d}px`,this.canvasWrapper.appendChild(u);const f=u.cloneNode();this.progressWrapper.appendChild(f),this.renderMultiCanvas(e,c,n,d,u,f)}render(e){return Gn(this,void 0,void 0,(function*(){var t;this.timeouts.forEach((f=>f())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=this.getPixelRatio(),s=this.scrollContainer.clientWidth,{scrollWidth:o,isScrollable:c,useParentWidth:u,width:d}=(function({duration:f,minPxPerSec:g=0,parentWidth:y,fillParent:v,pixelRatio:w}){const E=Math.ceil(f*g),D=E>y,M=!!(v&&!D);return{scrollWidth:E,isScrollable:D,useParentWidth:M,width:(M?y:E)*w}})({duration:e.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:s,fillParent:this.options.fillParent,pixelRatio:n});if(this.isScrollable=c,this.wrapper.style.width=u?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let f=0;f<e.numberOfChannels;f++){const g=Object.assign(Object.assign({},this.options),(t=this.options.splitChannels)===null||t===void 0?void 0:t[f]);this.renderChannel([e.getChannelData(f)],g,d,f)}else{const f=[e.getChannelData(0)];e.numberOfChannels>1&&f.push(e.getChannelData(1)),this.renderChannel(f,this.options,d,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((n=>n())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:e}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){const{right:n}=this.progressWrapper.getBoundingClientRect(),s=(function(o){const c=2*o;return(c<0?Math.floor(c):Math.ceil(c))/2})(n-t);this.scrollContainer.scrollLeft+=s}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{scrollLeft:n,scrollWidth:s,clientWidth:o}=this.scrollContainer,c=e*s,u=n,d=n+o,f=o/2;if(this.isDragging)c+30>d?this.scrollContainer.scrollLeft+=30:c-30<u&&(this.scrollContainer.scrollLeft-=30);else{(c<u||c>d)&&(this.scrollContainer.scrollLeft=c-(this.options.autoCenter?f:0));const g=c-n-f;t&&this.options.autoCenter&&g>0&&(this.scrollContainer.scrollLeft+=g)}}renderProgress(e,t){if(isNaN(e))return;const n=100*e;this.canvasWrapper.style.clipPath=`polygon(${n}% 0%, 100% 0%, 100% 100%, ${n}% 100%)`,this.progressWrapper.style.width=`${n}%`,this.cursor.style.left=`${n}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${e*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.audioData&&this.audioData.duration>0&&this.scrollIntoView(e,t)}exportImage(e,t,n){return Gn(this,void 0,void 0,(function*(){const s=this.canvasWrapper.querySelectorAll("canvas");if(!s.length)throw new Error("No waveform data");if(n==="dataURL"){const o=Array.from(s).map((c=>c.toDataURL(e,t)));return Promise.resolve(o)}return Promise.all(Array.from(s).map((o=>new Promise(((c,u)=>{o.toBlob((d=>{d?c(d):u(new Error("Could not export image"))}),e,t)})))))}))}}class j9 extends qh{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const e=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(e))};e()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class By extends qh{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Gn(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then((t=>{if(t.status>=400)throw new Error(`Failed to fetch ${e}: ${t.status} (${t.statusText})`);return t.arrayBuffer()})).then((t=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(t))).then((t=>{this.currentSrc===e&&(this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})).catch((t=>{console.error("WebAudioPlayer load error:",t)}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let e=this.playedDuration*this._playbackRate;(e>=this.duration||e<0)&&(e=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,e),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Gn(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){const t=e-this.currentTime,n=this.bufferNode;n?.stop(this.audioContext.currentTime+t),n?.addEventListener("ended",(()=>{n===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(e){return Gn(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){const t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,t;return(e=this._duration)!==null&&e!==void 0?e:((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){const e=[];if(!this.buffer)return e;const t=this.buffer.numberOfChannels;for(let n=0;n<t;n++)e.push(this.buffer.getChannelData(n));return e}removeAttribute(e){switch(e){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const V9={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class xh extends k9{static create(e){return new xh(e)}getState(){return this.wavesurferState}getRenderer(){return this.renderer}constructor(e){const t=e.media||(e.backend==="WebAudio"?new By:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.reactiveCleanups=[],this.options=Object.assign({},V9,e);const{state:n,actions:s}=(function(u){var d,f,g,y,v,w;const E=(d=u?.currentTime)!==null&&d!==void 0?d:Wt(0),D=(f=u?.duration)!==null&&f!==void 0?f:Wt(0),M=(g=u?.isPlaying)!==null&&g!==void 0?g:Wt(!1),V=(y=u?.isSeeking)!==null&&y!==void 0?y:Wt(!1),H=(v=u?.volume)!==null&&v!==void 0?v:Wt(1),F=(w=u?.playbackRate)!==null&&w!==void 0?w:Wt(1),B=Wt(null),Y=Wt(null),U=Wt(""),R=Wt(0),T=Wt(0),S=po((()=>!M.value),[M]),I=po((()=>B.value!==null),[B]),k=po((()=>I.value&&D.value>0),[I,D]),j=po((()=>E.value),[E]),N=po((()=>D.value>0?E.value/D.value:0),[E,D]);return{state:{currentTime:E,duration:D,isPlaying:M,isPaused:S,isSeeking:V,volume:H,playbackRate:F,audioBuffer:B,peaks:Y,url:U,zoom:R,scrollPosition:T,canPlay:I,isReady:k,progress:j,progressPercent:N},actions:{setCurrentTime:G=>{const J=Math.max(0,Math.min(D.value||1/0,G));E.set(J)},setDuration:G=>{D.set(Math.max(0,G))},setPlaying:G=>{M.set(G)},setSeeking:G=>{V.set(G)},setVolume:G=>{const J=Math.max(0,Math.min(1,G));H.set(J)},setPlaybackRate:G=>{const J=Math.max(.1,Math.min(16,G));F.set(J)},setAudioBuffer:G=>{B.set(G),G&&D.set(G.duration)},setPeaks:G=>{Y.set(G)},setUrl:G=>{U.set(G)},setZoom:G=>{R.set(Math.max(0,G))},setScrollPosition:G=>{T.set(Math.max(0,G))}}}})({isPlaying:this.isPlayingSignal,currentTime:this.currentTimeSignal,duration:this.durationSignal,volume:this.volumeSignal,playbackRate:this.playbackRateSignal,isSeeking:this.seekingSignal});this.wavesurferState=n,this.wavesurferActions=s,this.timer=new j9;const o=t?void 0:this.getMediaElement();this.renderer=new P9(this.options,o),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initReactiveState(),this.initPlugins();const c=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:u,duration:d}=this.options;(c||u&&d)&&this.load(c,u,d).catch((f=>{this.emit("error",f instanceof Error?f:new Error(String(f)))}))}))}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const e=this.updateProgress();this.emit("timeupdate",e),this.emit("audioprocess",e),this.stopAtPosition!=null&&this.isPlaying()&&e>=this.stopAtPosition&&this.pause()}})))}initReactiveState(){this.reactiveCleanups.push((function(e,t){const n=[];n.push(ua((()=>{const c=e.isPlaying.value;t.emit(c?"play":"pause")}),[e.isPlaying])),n.push(ua((()=>{const c=e.currentTime.value;t.emit("timeupdate",c),e.isPlaying.value&&t.emit("audioprocess",c)}),[e.currentTime,e.isPlaying])),n.push(ua((()=>{e.isSeeking.value&&t.emit("seeking",e.currentTime.value)}),[e.isSeeking,e.currentTime]));let s=!1;n.push(ua((()=>{e.isReady.value&&!s&&(s=!0,t.emit("ready",e.duration.value))}),[e.isReady,e.duration]));let o=!1;return n.push(ua((()=>{const c=e.isPlaying.value,u=e.currentTime.value,d=e.duration.value,f=d>0&&u>=d;o&&!c&&f&&t.emit("finish"),o=c&&f}),[e.isPlaying,e.currentTime,e.duration])),n.push(ua((()=>{const c=e.zoom.value;c>0&&t.emit("zoom",c)}),[e.zoom])),()=>{n.forEach((c=>c()))}})(this.wavesurferState,{emit:this.emit.bind(this)}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const e=this.updateProgress();this.emit("timeupdate",e)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var e;this.emit("error",(e=this.getMediaElement().error)!==null&&e!==void 0?e:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))})),this.renderer.on("dblclick",((e,t)=>{this.emit("dblclick",e,t)})),this.renderer.on("scroll",((e,t,n,s)=>{const o=this.getDuration();this.emit("scroll",e*o,t*o,n,s)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(e=>{this.emit("dragstart",e)})),this.renderer.on("dragend",(e=>{this.emit("dragend",e)})),this.renderer.on("resize",(()=>{this.emit("resize")})));{let e;const t=this.renderer.on("drag",(n=>{var s;if(!this.options.interact)return;this.renderer.renderProgress(n),clearTimeout(e);let o=0;const c=this.options.dragToSeek;this.isPlaying()?o=0:c===!0?o=200:c&&typeof c=="object"&&(o=(s=c.debounceTime)!==null&&s!==void 0?s:200),e=setTimeout((()=>{this.seekTo(n)}),o),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}));this.subscriptions.push((()=>{clearTimeout(e),t()}))}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach((t=>{this.registerPlugin(t)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((e=>e())),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=Af.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=Af.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){if(this.plugins.includes(e))return e;e._init(this),this.plugins.push(e);const t=e.once("destroy",(()=>{this.plugins=this.plugins.filter((n=>n!==e)),this.subscriptions=this.subscriptions.filter((n=>n!==t))}));return this.subscriptions.push(t),e}unregisterPlugin(e){this.plugins=this.plugins.filter((t=>t!==e)),e.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){const t=e/this.getDuration();this.renderer.setScrollPercentage(t)}getActivePlugins(){return this.plugins}loadAudio(e,t,n,s){return Gn(this,void 0,void 0,(function*(){var o;if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(o=this.abortController)===null||o===void 0||o.abort(),this.abortController=null,!t&&!n){const u=this.options.fetchParams||{};window.AbortController&&!u.signal&&(this.abortController=new AbortController,u.signal=this.abortController.signal);const d=g=>this.emit("loading",g);t=yield N9.fetchBlob(e,d,u);const f=this.options.blobMimeType;f&&(t=new Blob([t],{type:f}))}this.setSrc(e,t);const c=yield new Promise((u=>{const d=s||this.getDuration();d?u(d):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>u(this.getDuration())),{once:!0}))}));if(!e&&!t){const u=this.getMediaElement();u instanceof By&&(u.duration=c)}if(n)this.decodedData=Af.createBuffer(n,c||0);else if(t){const u=yield t.arrayBuffer();this.decodedData=yield Af.decode(u,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(e,t,n){return Gn(this,void 0,void 0,(function*(){try{return yield this.loadAudio(e,void 0,t,n)}catch(s){throw this.emit("error",s),s}}))}loadBlob(e,t,n){return Gn(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",e,t,n)}catch(s){throw this.emit("error",s),s}}))}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:n=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const s=Math.min(e,this.decodedData.numberOfChannels),o=[];for(let c=0;c<s;c++){const u=this.decodedData.getChannelData(c),d=[],f=u.length/t;for(let g=0;g<t;g++){const y=u.slice(Math.floor(g*f),Math.ceil((g+1)*f));let v=0;for(let w=0;w<y.length;w++){const E=y[w];Math.abs(E)>Math.abs(v)&&(v=E)}d.push(Math.round(v*n)/n)}o.push(d)}return o}getDuration(){let e=super.getDuration()||0;return e!==0&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){this.stopAtPosition=null,super.setTime(e),this.updateProgress(e),this.emit("timeupdate",e)}seekTo(e){const t=this.getDuration()*e;this.setTime(t)}play(e,t){const n=Object.create(null,{play:{get:()=>super.play}});return Gn(this,void 0,void 0,(function*(){e!=null&&this.setTime(e);const s=yield n.play.call(this);return t!=null&&(this.media instanceof By?this.media.stopAt(t):this.stopAtPosition=t),s}))}playPause(){return Gn(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return Gn(this,arguments,void 0,(function*(e="image/png",t=1,n="dataURL"){return this.renderer.exportImage(e,t,n)}))}destroy(){var e;this.emit("destroy"),(e=this.abortController)===null||e===void 0||e.abort(),this.plugins.forEach((t=>t.destroy())),this.subscriptions.forEach((t=>t())),this.unsubscribePlayerEvents(),this.reactiveCleanups.forEach((t=>t())),this.reactiveCleanups=[],this.timer.destroy(),this.renderer.destroy(),super.destroy()}}xh.BasePlugin=class extends qh{constructor(r){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=r}onInit(){}_init(r){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=r,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((r=>r())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},xh.dom=C9;const L9=r=>new Promise((e,t)=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.onerror=t,n.readAsDataURL(r)}),U9=({src:r,isMine:e,messageId:t})=>{const n=$.useRef(null),s=$.useRef(null),[o,c]=$.useState(!1),[u,d]=$.useState(0),[f,g]=$.useState(0);$.useEffect(()=>{if(n.current)return s.current&&s.current.destroy(),s.current=xh.create({container:n.current,waveColor:e?"rgba(255, 255, 255, 0.6)":"rgba(75, 85, 99, 0.4)",progressColor:e?"#ffffff":"#16a34a",cursorColor:"transparent",barWidth:3,barRadius:2,cursorWidth:0,height:48,barGap:3,normalize:!0,url:r}),s.current.on("play",()=>c(!0)),s.current.on("pause",()=>c(!1)),s.current.on("timeupdate",w=>g(w)),s.current.on("ready",w=>d(w)),s.current.on("finish",()=>c(!1)),()=>{s.current&&s.current.destroy()}},[r,e]);const y=()=>{s.current&&s.current.playPause()},v=w=>{if(!w)return"0:00";const E=Math.floor(w/60),D=Math.floor(w%60);return`${E}:${D<10?"0":""}${D}`};return b.jsxs("div",{className:"flex items-center gap-3 min-w-[200px] sm:min-w-[240px] pr-2",children:[b.jsx("button",{onClick:y,className:`p-2 rounded-full transition-colors flex-shrink-0 cursor-pointer z-10 ${e?"bg-green-500 text-white hover:bg-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:o?b.jsx(EV,{className:"w-5 h-5 fill-current"}):b.jsx(AV,{className:"w-5 h-5 fill-current ml-0.5"})}),b.jsx("div",{className:"flex-1 overflow-hidden relative",ref:n}),b.jsx("span",{className:`text-[11px] font-medium w-9 text-right tabular-nums ${e?"text-green-100":"text-gray-500"}`,children:v(o?f:u)})]})};function z9(){const{chatId:r}=nS(),{currentUser:e}=ai(),{t,i18n:n}=wn(),s=Es(),o=$.useRef(null),c=$.useRef(null),{addToast:u}=Yo();$.useEffect(()=>{e||s("/login")},[e,s]);const[d,f]=$.useState([]),[g,y]=$.useState(""),[v,w]=$.useState(!0),[E,D]=$.useState(null),[M,V]=$.useState(null),[H,F]=$.useState(null),[B,Y]=$.useState(!1),[U,R]=$.useState(null),[T,S]=$.useState(0),[I,k]=$.useState(null),[j,N]=$.useState(!1),[G,J]=$.useState(null),P=wr(),[O,ee]=$.useState(P.state?.targetUser||null),[W,Z]=$.useState(r==="new"?null:r);$.useEffect(()=>{r!=="new"&&Z(r)},[r]),$.useEffect(()=>{r==="new"&&O&&e&&(async()=>{try{D(O);const Ee=Ra(Bn(Fe,"chats"),Ko("participants","array-contains",e.uid)),Me=(await yc(Ee)).docs.find(xe=>xe.data().participants.includes(O.uid));Me?(Z(Me.id),s(`/messages/${Me.id}`,{replace:!0})):w(!1)}catch(Ee){console.warn("Error checking existing chats:",Ee)}})()},[r,O,e]),$.useEffect(()=>{if(r==="new"){w(!1);return}if(!W||!e)return;w(!0);const pe=To(kt(Fe,"chats",W),Be=>{if(Be.exists()){const Me=Be.data(),xe=Me.participants.find(tt=>tt!==e.uid);if(xe){if(Me.participantData?.[xe]){const tt=Me.participantData[xe];D(gt=>gt?.id===xe?gt:{...tt,id:xe})}V(xe)}}else r!=="new"&&s("/messages")}),Ee=To(Bn(Fe,"chats",W,"messages"),Be=>{const Me=Be.docs.map(xe=>({id:xe.id,...xe.data()})).sort((xe,tt)=>(xe.createdAt?.seconds||0)-(tt.createdAt?.seconds||0));f(Me),w(!1),H||setTimeout(()=>o.current?.scrollIntoView({behavior:"smooth"}),100)});return()=>{Ee(),pe()}},[W,e,H,r,s]),$.useEffect(()=>{if(!M)return;const pe=To(kt(Fe,"users",M),Ee=>{if(Ee.exists()){const Be=Ee.data();D(Me=>({...Me,...Be}))}});return()=>pe()},[M]);const q=async(pe,Ee=null,Be=null,Me="text")=>{N(!0);try{let xe=W;if(!xe&&r==="new"){if(!O)throw new Error("Target user missing");const{startChat:ut}=await R9(async()=>{const{startChat:Hn}=await Promise.resolve().then(()=>UL);return{startChat:Hn}},[]);xe=await ut(e.uid,O.uid,{name:O.name,avatar:O.photoURL},{name:e.displayName,avatar:e.photoURL}),Z(xe),window.history.replaceState(null,"",`/messages/${xe}`)}let tt=null,gt=Me,Fn=Be;if(Ee||I){let ut=Ee||I.file;if(gt==="image"||I?.type==="image"){gt="image",Fn=Fn||I?.file.name;const Hn={maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0};try{ut=await fn(ut,Hn)}catch(Bt){console.warn("Compression failed, using original",Bt)}}else I&&(gt=I.type,Fn=I.file.name);if(tt=await L9(ut),tt.length>95e4)throw new Error("File is too large for database storage even after compression.")}H?(await br(kt(Fe,"chats",xe,"messages",H),{text:pe,editedAt:zr()}),F(null)):(await Bh(Bn(Fe,"chats",xe,"messages"),{text:pe||"",type:gt,fileUrl:tt,fileName:Fn,senderId:e.uid,createdAt:zr()}),await br(kt(Fe,"chats",xe),{lastMessage:gt==="audio"?" Voice Message":gt==="image"?" Photo":pe||" File",updatedAt:zr()})),y(""),k(null)}catch(xe){console.error("Send failed",xe),u(xe.message||"Failed to send message","error")}finally{N(!1)}},Q=async pe=>{pe.preventDefault(),!(!g.trim()&&!I)&&await q(g)},ie=async pe=>{if(window.confirm("Delete this message?"))try{await dg(kt(Fe,"chats",r,"messages",pe)),u("Message deleted","success")}catch(Ee){console.error("Delete failed",Ee),u("Could not delete message","error")}},se=n.language==="tr"?gg:Hh,ne=pe=>{if(!pe?.lastSeen)return"Offline";const Ee=pe.lastSeen.seconds*1e3;return Date.now()-Ee<180*1e3?"Online":`${t("last_seen")||"Last seen"} ${mg(new Date(Ee),{addSuffix:!0,locale:se})}`},_e=pe=>pe?.lastSeen?Date.now()-pe.lastSeen.seconds*1e3<180*1e3:!1,Ae=pe=>pe?new Date(pe.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"...",Pe=pe=>{const Ee=pe.target.files[0];if(!Ee)return;if(Ee.size>10*1024*1024){u("File too large (Max 10MB)","error");return}const Be=Ee.type.startsWith("image/")?"image":"file",Me=Be==="image"?URL.createObjectURL(Ee):null;k({file:Ee,type:Be,previewUrl:Me})},Ce=pe=>{y(pe.text||""),F(pe.id),k(null),c.current&&(c.current.value="")},et=()=>{F(null),y(""),k(null)},at=$.useRef("cancel"),ot=$.useRef(null),un=$.useRef(null),Rt=$.useRef(null),[mt,Ct]=$.useState(0);$.useEffect(()=>{let pe;return B?(S(0),pe=setInterval(()=>S(Ee=>Ee+1),1e3)):(S(0),Ct(0)),()=>{clearInterval(pe),Rt.current&&cancelAnimationFrame(Rt.current),ot.current&&ot.current.close()}},[B]);const it=()=>{if(!un.current)return;const pe=new Uint8Array(un.current.frequencyBinCount);un.current.getByteFrequencyData(pe);let Ee=0;for(let Me=0;Me<pe.length;Me++)Ee+=pe[Me];const Be=Ee/pe.length;Ct(Be),Rt.current=requestAnimationFrame(it)},st=async()=>{try{const pe=await navigator.mediaDevices.getUserMedia({audio:!0}),Ee=new(window.AudioContext||window.webkitAudioContext),Be=Ee.createAnalyser();Ee.createMediaStreamSource(pe).connect(Be),Be.fftSize=256,ot.current=Ee,un.current=Be,it();const xe=new MediaRecorder(pe),tt=[];xe.ondataavailable=gt=>tt.push(gt.data),xe.onstop=async()=>{if(pe.getTracks().forEach(gt=>gt.stop()),ot.current&&ot.current.close(),Rt.current&&cancelAnimationFrame(Rt.current),at.current==="send"){const gt=new Blob(tt,{type:"audio/webm"});await q(null,gt,`voice_${Date.now()}.webm`,"audio")}else console.log("Recording cancelled")},xe.start(),R(xe),Y(!0),at.current="cancel"}catch(pe){console.error("Mic error:",pe),u(t("mic_error")||"Microphone error","error")}},$e=pe=>{!U||U.state==="inactive"||(at.current=pe,U.stop(),Y(!1))};return b.jsxs("div",{className:"flex flex-col h-[calc(100vh-theme(spacing.32))] md:h-[calc(100vh-theme(spacing.16))] max-w-2xl mx-auto w-full bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden relative",children:[v&&b.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-50 flex items-center justify-center",children:b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 bg-white dark:bg-gray-800 z-10 shadow-sm",children:[b.jsx("button",{onClick:()=>s("/messages"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(Lj,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),E?b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("img",{src:E.photoURL||E.avatar||`https://ui-avatars.com/api/?name=${E.name||"User"}`,alt:E.name,className:"w-10 h-10 rounded-full object-cover border border-gray-100"}),b.jsxs("div",{children:[b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100 leading-tight",children:E.name||E.displayName||"User"}),b.jsxs("div",{className:"flex items-center gap-1.5",children:[b.jsx("span",{className:`w-2 h-2 rounded-full ${_e(E)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),b.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:ne(E)})]})]})]}):b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100",children:"Chat"})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 bg-gray-50 dark:bg-gray-900/50",children:[d.map(pe=>{const Ee=pe.senderId===e.uid,Be=pe.type==="audio",Me=pe.type==="image",xe=pe.type==="file";return b.jsxs("div",{className:`flex flex-col ${Ee?"items-end":"items-start"} group`,children:[b.jsxs("div",{className:`flex items-end gap-2 max-w-[85%] ${Ee?"flex-row-reverse":"flex-row"}`,children:[b.jsxs("div",{className:`px-4 py-2.5 shadow-sm text-sm md:text-base relative group-hover:shadow-md transition-all ${Ee?"bg-green-600 text-white rounded-2xl rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-2xl rounded-bl-none border border-gray-100 dark:border-gray-700"} ${Be?"min-w-[150px]":""}`,children:[Me&&b.jsx("a",{href:pe.fileUrl,target:"_blank",rel:"noopener noreferrer",children:b.jsx("img",{src:pe.fileUrl,alt:"attachment",className:"max-w-full h-48 object-cover rounded-lg mb-2"})}),Be&&b.jsx(U9,{src:pe.fileUrl,isMine:Ee,messageId:pe.id}),xe&&b.jsxs("a",{href:pe.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 underline decoration-current",children:[b.jsx(mT,{className:"w-4 h-4"}),b.jsx("span",{className:"truncate max-w-[150px]",children:pe.fileName||"File"})]}),pe.text&&b.jsx("p",{className:"whitespace-pre-wrap",children:pe.text}),pe.editedAt&&b.jsxs("span",{className:`text-[10px] block text-right mt-1 opacity-60 ${Ee?"text-green-100":"text-gray-400"}`,children:["(",t("edited")||"Edited"," ",Ae(pe.editedAt),")"]})]}),Ee&&b.jsxs("div",{className:"flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[b.jsx("button",{onClick:()=>Ce(pe),className:"p-1 text-gray-400 hover:text-blue-500",title:"Edit",children:b.jsx(zI,{className:"w-3 h-3"})}),b.jsx("button",{onClick:()=>ie(pe.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Delete",children:b.jsx(vh,{className:"w-3 h-3"})})]})]}),b.jsx("span",{className:"text-[10px] text-gray-400 mt-1 px-1 font-medium",children:Ae(pe.createdAt)})]},pe.id)}),b.jsx("div",{ref:o})]}),H&&b.jsxs("div",{className:"px-4 py-2 bg-yellow-50 dark:bg-gray-700 flex items-center justify-between text-xs text-yellow-700 dark:text-yellow-300",children:[b.jsx("span",{children:t("editing_message")||"Editing message..."}),b.jsx("button",{onClick:et,children:b.jsx(Ca,{className:"w-4 h-4"})})]}),I&&b.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-100 dark:border-gray-600 flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[I.type==="image"?b.jsx("img",{src:I.previewUrl,alt:"preview",className:"w-10 h-10 rounded object-cover"}):b.jsx(Zj,{className:"w-8 h-8 text-gray-500"}),b.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 truncate max-w-[200px]",children:I.file.name})]}),b.jsx("button",{onClick:()=>k(null),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",children:b.jsx(Ca,{className:"w-4 h-4 text-gray-500"})})]}),b.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700 flex gap-2 items-end",children:B?b.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-gray-50 dark:bg-gray-700 rounded-xl px-2 py-2 animate-fade-in text-red-500",children:[b.jsx("button",{onClick:()=>$e("cancel"),className:"p-3 text-gray-500 hover:text-red-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-colors",children:b.jsx(vh,{className:"w-5 h-5"})}),b.jsxs("div",{className:"flex-1 flex items-center justify-center gap-4",children:[b.jsx("span",{className:"font-mono font-medium text-red-600 dark:text-red-400",children:new Date(T*1e3).toISOString().substr(14,5)}),b.jsx("div",{className:"flex items-center gap-0.5 h-10 items-end",children:[...Array(24)].map((pe,Ee)=>{const Be=Math.min(1,mt/128),Me=Math.pow(Be,.5),xe=Math.max(4,Me*36);return b.jsx("div",{className:"w-1 bg-red-500 rounded-full transition-all duration-75",style:{height:`${Math.max(6,xe*(.8+Math.random()*.4))}px`,opacity:.6+Be*.4}},Ee)})})]}),b.jsx("button",{onClick:()=>$e("send"),className:"p-3 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg transition-transform transform active:scale-95",children:b.jsx(_h,{className:"w-5 h-5"})})]}):b.jsxs(b.Fragment,{children:[b.jsx("input",{type:"file",ref:c,onChange:Pe,className:"hidden",accept:"image/*,.pdf,.doc,.docx,.txt"}),b.jsx("button",{onClick:()=>c.current?.click(),className:"p-3 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition-all",disabled:H,children:b.jsx(mT,{className:"w-5 h-5"})}),b.jsx("div",{className:"flex-1 bg-gray-50 dark:bg-gray-700 rounded-2xl flex items-center min-h-[48px]",children:b.jsx("textarea",{value:g,onChange:pe=>y(pe.target.value),placeholder:H?t("edit_message_placeholder")||"Edit your message...":t("type_message")||"Mesaj yazn...",className:"w-full bg-transparent px-4 py-3 max-h-32 focus:outline-none text-gray-800 dark:text-white resize-none",rows:1,style:{height:"auto",minHeight:"48px"}})}),g.trim()||I?b.jsx("button",{onClick:Q,disabled:j,className:"p-3 bg-green-600 hover:bg-green-700 text-white rounded-xl shadow-lg shadow-green-200 dark:shadow-none transition-all disabled:opacity-50 transform active:scale-95",children:j?b.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):b.jsx(_h,{className:"w-5 h-5"})}):b.jsx("button",{onClick:st,className:"p-3 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl transition-all transform active:scale-95 shadow-lg",children:b.jsx(_V,{className:"w-5 h-5"})})]})})]})}function $T(){const{t:r,i18n:e}=wn(),t=Es(),{currentUser:n,refreshUser:s}=ai(),{addToast:o}=Yo(),{userId:c}=nS(),[u,d]=$.useState(null),[f,g]=$.useState(""),[y,v]=$.useState(""),[w,E]=$.useState(!1),[D,M]=$.useState([]),[V,H]=$.useState(!0),F=$.useRef(null),B=!c||n&&c===n.uid,Y=c||n?.uid;$.useEffect(()=>{(async()=>{if(Y){H(!0);try{const k=kt(Fe,"users",Y),j=await xs(k);let N=null;j.exists()?N={uid:j.id,...j.data()}:(N={uid:Y},B&&n&&(N={...N,...n})),N&&(d(N),B?(g(N.name||N.displayName||n.displayName||""),v(N.avatar||N.photoURL||n.photoURL||"")):(g(N.name||N.displayName||"Gardener"),v(N.avatar||N.photoURL||"")));const G=Ra(Bn(Fe,"posts"),Ko("userId","==",String(Y)));let P=(await yc(G)).docs.map(O=>({id:O.id,...O.data()}));P.sort((O,ee)=>{const W=O.createdAt?.seconds||0;return(ee.createdAt?.seconds||0)-W}),M(P)}catch(k){console.error("Failed to load profile data",k)}finally{H(!1)}}})()},[Y,B,n]);const U=async I=>{if(!B)return;const k=I.target.files[0];if(k){E(!0);try{const N=await fn(k,{maxSizeMB:.1,maxWidthOrHeight:400,useWebWorker:!0}),G=await new Promise(J=>{const P=new FileReader;P.readAsDataURL(N),P.onload=O=>J(O.target.result)});v(G),await N0(kt(Fe,"users",n.uid),{avatar:G,email:n.email,name:f||n.displayName,updatedAt:new Date},{merge:!0});try{await r0(sr.currentUser,{photoURL:G})}catch{}M0(n.uid,f,G),await s(),o(r("profile_updated")||"Profile updated!","success")}catch(j){console.error(j),o("Error updating avatar.","error")}finally{E(!1)}}},R=async I=>{if(I.preventDefault(),!!B&&f.trim()){E(!0);try{await r0(sr.currentUser,{displayName:f}),await N0(kt(Fe,"users",n.uid),{name:f,updatedAt:new Date},{merge:!0}),M0(n.uid,f,y),await s(),o(r("profile_updated")||"Profile updated!","success")}catch{o("Failed to update profile.","error")}finally{E(!1)}}};if(!Y)return b.jsx("div",{className:"p-10 text-center",children:r("login_required")});if(V&&!u)return b.jsx(yg,{});const T=I=>!I?.lastSeen||!I.lastSeen.seconds?!1:Date.now()-I.lastSeen.seconds*1e3<180*1e3,S=I=>I?.lastSeen?mg(new Date(I.lastSeen.seconds*1e3),{addSuffix:!0,locale:e.language==="tr"?gg:Hh}):"Offline";return b.jsx("div",{className:"max-w-4xl mx-auto w-full pb-20 animate-fade-in p-4",children:b.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mt-6",children:[b.jsx("div",{className:"w-full md:w-1/3",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-6 sticky top-24 border border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex flex-col items-center mb-6 relative",children:[b.jsxs("div",{className:`relative ${B?"group cursor-pointer":""} mt-2`,onClick:()=>B&&F.current?.click(),children:[b.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-green-50 dark:border-green-900/30 shadow-xl bg-gray-100 relative z-10",children:(B?y:u?.avatar||u?.photoURL)?b.jsx("img",{src:B?y:u?.avatar||u?.photoURL,className:"w-full h-full object-cover"}):b.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:b.jsx("img",{src:`https://ui-avatars.com/api/?name=${B?f||"Gardener":u?.name||u?.displayName||D.length>0&&D[0].authorName||"Gardener"}&background=random&size=128`,alt:"Avatar",className:"w-full h-full object-cover"})})}),!B&&u&&b.jsxs("div",{className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 whitespace-nowrap px-3 py-1 rounded-full text-[10px] font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 shadow-sm z-20 ${T(u)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[b.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${T(u)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),T(u)?"Online":S(u)]}),B&&b.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:b.jsx(nc,{className:"w-8 h-8 text-white"})}),w&&b.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center rounded-full",children:b.jsx(wa,{className:"animate-spin text-green-600"})})]}),B&&b.jsx("input",{type:"file",ref:F,onChange:U,className:"hidden",accept:"image/*"}),b.jsx("h2",{className:"text-xl font-bold mt-4 text-gray-900 dark:text-white capitalize text-center",children:B?f||r("gardener")||"Bahvan":u?.name||u?.displayName||D.length>0&&D[0].authorName||r("gardener")||"Bahvan"}),B&&b.jsx("p",{className:"text-sm text-gray-500",children:n.email})]}),B?b.jsxs("form",{onSubmit:R,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide ml-1",children:r("display_name")}),b.jsx("input",{type:"text",value:f,onChange:I=>g(I.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-green-500 outline-none"})]}),b.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-3 rounded-xl shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[w?b.jsx(wa,{className:"animate-spin w-4 h-4"}):b.jsx(FI,{className:"w-4 h-4"}),b.jsx("span",{children:r("save_changes")})]})]}):b.jsxs("div",{className:"text-center",children:[b.jsxs("p",{className:"text-sm text-gray-500 italic mb-4",children:[r("joined")||"Katlma Tarihi",": ",u?.createdAt?.seconds?new Date(u.createdAt.seconds*1e3).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):r("unknown_date")]}),b.jsxs("button",{onClick:()=>{if(!n){o(r("login_to_message")||"Please login to send messages","info"),t("/login");return}const I={uid:u.uid||Y,name:u.name||u.displayName||D.length>0&&D[0].authorName||"Gardener",photoURL:u.photoURL||u.avatar||null};t("/messages/new",{state:{targetUser:I}})},className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-green-700 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[b.jsx(yh,{className:"w-5 h-5"}),b.jsx("span",{children:r("send_message")})]})]}),b.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-gray-700",children:b.jsxs("div",{className:"flex justify-between text-center",children:[b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-green-600",children:D.length}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:r("posts")||"Gnderi"})]}),b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-blue-600",children:D.reduce((I,k)=>I+(k.likes?.length||0),0)}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:r("likes")||"Beeni"})]})]})})]})}),b.jsxs("div",{className:"flex-1",children:[b.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[b.jsx(nV,{className:"w-5 h-5 text-gray-400"}),b.jsx("span",{children:B?r("my_posts")||"Gnderilerim":r("user_posts_title",{name:u?.name||"Kullanc"})||`${u?.name||"Kullanc"} Gnderileri`})]}),V?b.jsx("div",{className:"flex justify-center py-20",children:b.jsx(wa,{className:"w-8 h-8 animate-spin text-gray-300"})}):D.length>0?b.jsx("div",{className:"columns-1 gap-6 space-y-6",children:D.map(I=>b.jsx("div",{className:"break-inside-avoid",children:b.jsx(uR,{post:{...I,hideAuthor:B},onViewAnalysis:()=>{}})},I.id))}):b.jsxs("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/50 rounded-3xl border border-dashed border-gray-200 dark:border-gray-700",children:[b.jsx(cV,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),b.jsx("p",{className:"text-gray-500",children:r("no_posts_yet")})]})]})]})})}function B9(){const{t:r,i18n:e}=wn(),t={en:{intro:"This project aims to facilitate the detection and control of agricultural pests using an AI-based system.",sections:[{title:"Global Agriculture Network",text:"PlantAI is an advanced AI assistant developed to increase agricultural productivity and minimize crop losses.",icon:Fr},{title:"Collective Intelligence",text:"Not just a diagnostic tool, but a massive community of farmers.",icon:dT},{title:"Our Mission",text:"We are putting technology in everyone's pocket for sustainable agriculture.",icon:yT}]},tr:{intro:"Bu proje, tarm zararllarnn tespitini ve onlarla mcadeleyi kolaylatrmak amacyla yapay zeka tabanl bir sistem gelitirilmesini kapsamaktadr.",sections:[{title:"Kresel Tarm A",text:"PlantAI, tarmsal verimlilii artrmak ve rn kayplarn en aza indirmek iin gelitirilmi gelimi bir yapay zeka asistandr.",icon:Fr},{title:"Kolektif Bilgi Gc",text:"Sadece bir tehis arac deil, ayn zamanda dev bir ifti topluluudur.",icon:dT},{title:"Misyonumuz",text:"Srdrlebilir tarm iin teknolojiyi herkesin cebine sokuyoruz.",icon:yT}]}},n=t[e.language]||t.en;return b.jsxs("div",{className:"max-w-2xl mx-auto w-full pb-8",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full mb-4",children:b.jsx(VI,{className:"w-8 h-8 text-green-600 dark:text-green-500"})}),b.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:r("about")}),b.jsxs("p",{className:"text-lg text-gray-600 dark:text-gray-300 italic",children:['"',n.intro,'"']})]}),b.jsx("div",{className:"space-y-6",children:n.sections.map((s,o)=>{const c=s.icon;return b.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 flex gap-4 items-start hover:shadow-md transition-shadow",children:[b.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-xl",children:b.jsx(c,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),b.jsxs("div",{children:[b.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white mb-2",children:s.title}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:s.text})]})]},o)})})]})}function F9(){const{t:r}=wn(),{currentUser:e}=ai();Es();const t=wr(),[n,s]=$.useState([]),[o,c]=$.useState(!0),[u,d]=$.useState(null),[f,g]=$.useState(!1),[y,v]=$.useState(null),[w,E]=$.useState(""),[D,M]=$.useState(!1),V=$.useRef(null),H=async(R,T)=>{if(R.stopPropagation(),!!window.confirm(r("confirm_delete")||"Are you sure you want to delete this analysis?"))try{await eR(T),s(S=>S.filter(I=>I.id!==T))}catch(S){console.error("Delete failed",S),alert("Failed to delete analysis.")}};$.useEffect(()=>{e&&F()},[e]),$.useEffect(()=>{t.state?.showTreatmentGuide&&(g(!0),window.history.replaceState({},document.title))},[t]);const F=async()=>{c(!0);const R=await ZI(e.uid);s(R),c(!1),t.state?.newAnalysisId?d(t.state.newAnalysisId):R.length>0&&t.state?.showTreatmentGuide&&d(R[0].id)},B=R=>{d(T=>T===R?null:R),v(null)},Y=async(R,T)=>{if(R.stopPropagation(),!T.isPublic&&window.confirm(r("confirm_share")||"Share this diagnosis with the community?"))try{await rR(T.id,T,T.plantType||"plant",e.displayName||r("gardener")||"Bahvan",e.photoURL),s(S=>S.map(I=>I.id===T.id?{...I,isPublic:!0}:I))}catch(S){console.error("Share failed",S),alert("Failed to share.")}},U=async R=>{if(w.trim()){M(!0);try{let T=null;if(V.current?.files?.[0]){const S=V.current.files[0];T=await new Promise(I=>{const k=new FileReader;k.onload=j=>I(j.target.result),k.readAsDataURL(S)})}await iR(R.id,T,w),v(null),E(""),F()}catch(T){console.error("Feedback failed",T),alert("Failed to save update.")}finally{M(!1)}}};return o?b.jsx(yg,{}):n.length===0?b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center text-gray-500 animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6",children:b.jsx(Fr,{className:"w-12 h-12 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:r("no_analyses_title")||"Henz Bir Analiz Yok"}),b.jsx("p",{className:"mb-8 max-w-md",children:r("no_analyses_desc")||"Bitkilerinizin saln takip etmek iin ilk analizinizi yapn."}),b.jsxs(jr,{to:"/",className:"bg-green-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[b.jsx(nc,{className:"w-5 h-5"}),r("start_diagnosis")||"Analiz Balat"]})]}):b.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-24 px-4 animate-fade-in relative",children:[b.jsxs("div",{className:"flex items-center justify-between mb-8 mt-6",children:[b.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3 text-gray-900 dark:text-white",children:[b.jsx(X_,{className:"w-7 h-7 text-green-600"}),r("treatment_updates")||"Tedavi & Takip"]}),b.jsxs("span",{className:"text-sm font-medium text-gray-500 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:[n.length," ",r("records")||"Kayt"]})]}),b.jsx("div",{className:"grid gap-6",children:n.map(R=>b.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-3xl shadow-sm border transition-all duration-300 overflow-hidden ${u===R.id?"border-green-500 ring-4 ring-green-500/10 shadow-lg":"border-gray-100 dark:border-gray-700 hover:shadow-md"} relative group`,children:[b.jsx("button",{onClick:T=>H(T,R.id),className:"absolute top-4 right-4 z-10 p-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-full text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all opacity-0 group-hover:opacity-100 shadow-sm border border-gray-100 dark:border-gray-700",title:r("delete"),children:b.jsx(vh,{className:"w-5 h-5"})}),b.jsxs("div",{className:"p-5 flex gap-5 cursor-pointer md:items-center relative",onClick:()=>B(R.id),children:[b.jsx("img",{src:R.mainImage,alt:R.plantType,className:"w-24 h-24 md:w-32 md:h-32 rounded-2xl object-cover bg-gray-100 shadow-inner shrink-0"}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex justify-between items-start mb-1",children:[b.jsx("h3",{className:"font-bold text-lg md:text-xl text-gray-900 dark:text-white capitalize truncate",children:R.plantType||"Unknown Plant"}),b.jsxs("span",{className:"text-xs font-medium text-gray-400 flex items-center gap-1 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-lg shrink-0",children:[b.jsx(jI,{className:"w-3 h-3"}),R.createdAt?.seconds?new Date(R.createdAt.seconds*1e3).toLocaleDateString():"Today"]})]}),b.jsxs("p",{className:"text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[b.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),R.result.disease_name]}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 md:line-clamp-1",children:R.result.description}),b.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs font-bold text-gray-400",children:[b.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[b.jsx(Hj,{className:"w-4 h-4"}),b.jsx("span",{children:"7 Gnlk Program"})]}),R.isPublic&&b.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[b.jsx(k0,{className:"w-4 h-4"}),b.jsx("span",{children:"Paylald"})]})]})]}),b.jsx("div",{className:"absolute right-5 bottom-5 md:static md:block hidden",children:b.jsx(J_,{className:`w-6 h-6 text-gray-300 transition-transform ${u===R.id?"rotate-180":""}`})})]}),u===R.id&&b.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 p-6 animate-fade-in-down",children:[b.jsxs("div",{className:"mb-6",children:[b.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[b.jsx(pT,{className:"w-5 h-5 text-green-600"}),R.result.is_treatable===!1?r("preventive_measures")||"Koruyucu nlemler":r("treatment_steps")||"Tedavi Admlar"]}),R.result.is_treatable===!1&&b.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100 dark:bg-red-900/20 dark:text-red-300 dark:border-red-900/30",children:"Bu bitki ne yazk ki kurtarlamayabilir."}),b.jsx("div",{className:"space-y-3",children:(R.result.is_treatable===!1?R.result.preventive_measures:R.result.treatment_steps)?.map((T,S)=>b.jsxs("div",{className:"flex gap-4 p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-100 dark:border-gray-600 shadow-sm",children:[b.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shrink-0 ${R.result.is_treatable===!1?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:S+1}),b.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm leading-relaxed pt-1",children:T})]},S))})]}),R.updates&&R.updates.length>0&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Gelimeler"}),b.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:R.updates.map((T,S)=>b.jsxs("div",{className:"min-w-[200px] bg-white dark:bg-gray-700 p-3 rounded-xl border border-gray-100 shadow-sm",children:[T.imageUrl&&b.jsx("img",{src:T.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),b.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(T.createdAt?.seconds*1e3).toLocaleDateString()}),b.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:T.note})]},S))})]}),b.jsxs("div",{className:"flex flex-wrap gap-3",children:[R.result.is_treatable&&b.jsxs("button",{onClick:()=>v(y===R.id?null:R.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 shadow-lg shadow-green-500/20 transition-all active:scale-95",children:[b.jsx(nc,{className:"w-5 h-5"}),r("add_update")||"Gelime Ekle"]}),b.jsxs("div",{className:"flex flex-col items-center",children:[b.jsxs("button",{onClick:T=>Y(T,R),disabled:R.isPublic,className:`px-6 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all w-full ${R.isPublic?"bg-blue-50 text-blue-400 cursor-default":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[b.jsx(k0,{className:"w-5 h-5"}),R.isPublic?r("shared")||"Paylald":r("share")||"Payla"]}),!R.isPublic&&b.jsx("span",{className:"text-[10px] text-gray-400 mt-1",children:r("share_help_others")||"Toplulukla paylaarak bakalarna yardmc ol!"})]})]}),y===R.id&&b.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-2xl border border-green-200 dark:border-green-800 shadow-inner animate-fade-in",children:[b.jsx("textarea",{value:w,onChange:T=>E(T.target.value),placeholder:"Bitkinin durumu nasl? rnein: 'Yapraklar tekrar yeerdi...'",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-700 dark:bg-gray-900 mb-3 text-sm focus:ring-2 focus:ring-green-500 outline-none resize-none",rows:3}),b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("input",{type:"file",ref:V,className:"text-xs text-gray-500 file:mr-2 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"}),b.jsx("button",{onClick:()=>U(R),disabled:D,className:"bg-green-600 text-white p-2.5 rounded-full hover:bg-green-700 disabled:opacity-50 transition-colors",children:D?b.jsx(wa,{className:"w-5 h-5 animate-spin"}):b.jsx(_h,{className:"w-5 h-5"})})]})]})]})]},R.id))}),f&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl max-w-lg w-full p-8 shadow-2xl relative overflow-hidden",children:[b.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full blur-3xl -mr-10 -mt-10"}),b.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -ml-10 -mb-10"}),b.jsxs("div",{className:"text-center relative z-10",children:[b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm",children:b.jsx(Wj,{className:"w-10 h-10 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-extrabold text-gray-900 dark:text-white mb-2",children:"Tedavi Sreci Balad!"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 leading-relaxed",children:"Bitki analizi baaryla kaydedildi. yileme srecini buradan adm adm takip edebilirsin."}),b.jsxs("div",{className:"space-y-4 text-left mb-8",children:[b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(pT,{className:"w-5 h-5 text-blue-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Uygula"}),b.jsx("p",{className:"text-xs text-gray-500",children:"nerilen tedavi admlarn dzenli olarak uygula."})]})]}),b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(nc,{className:"w-5 h-5 text-purple-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Raporla"}),b.jsx("p",{className:"text-xs text-gray-500",children:"Haftalk yeni fotoraflar ykleyerek geliimi kaydet."})]})]})]}),b.jsx("button",{onClick:()=>g(!1),className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-4 rounded-xl hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Anladm, Bala"})]})]})})]})}var GT={},H9="@vercel/analytics",q9="1.6.1",$9=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function SR(){return typeof window<"u"}function AR(){try{const r="production"}catch{}return"production"}function G9(r="auto"){if(r==="auto"){window.vam=AR();return}window.vam=r}function K9(){return(SR()?window.vam:AR())||"production"}function P0(){return K9()==="development"}function Y9(r){return r.scriptSrc?r.scriptSrc:P0()?"https://va.vercel-scripts.com/v1/script.debug.js":r.basePath?`${r.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function Q9(r={debug:!0}){var e;if(!SR())return;G9(r.mode),$9(),r.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",r.beforeSend));const t=Y9(r);if(document.head.querySelector(`script[src*="${t}"]`))return;const n=document.createElement("script");n.src=t,n.defer=!0,n.dataset.sdkn=H9+(r.framework?`/${r.framework}`:""),n.dataset.sdkv=q9,r.disableAutoTrack&&(n.dataset.disableAutoTrack="1"),r.endpoint?n.dataset.endpoint=r.endpoint:r.basePath&&(n.dataset.endpoint=`${r.basePath}/insights`),r.dsn&&(n.dataset.dsn=r.dsn),n.onerror=()=>{const s=P0()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${t}. ${s}`)},P0()&&r.debug===!1&&(n.dataset.debug="false"),document.head.appendChild(n)}function W9({route:r,path:e}){var t;(t=window.va)==null||t.call(window,"pageview",{route:r,path:e})}function X9(){if(!(typeof process>"u"||typeof GT>"u"))return GT.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function J9(r){return $.useEffect(()=>{var e;r.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",r.beforeSend))},[r.beforeSend]),$.useEffect(()=>{Q9({framework:r.framework||"react",basePath:r.basePath??X9(),...r.route!==void 0&&{disableAutoTrack:!0},...r})},[]),$.useEffect(()=>{r.route&&r.path&&W9({route:r.route,path:r.path})},[r.route,r.path]),null}function Z9(){return b.jsxs(nL,{children:[b.jsxs(ck,{children:[b.jsxs(Pr,{path:"/",element:b.jsx(rL,{}),children:[b.jsx(Pr,{index:!0,element:b.jsx(FL,{})}),b.jsx(Pr,{path:"community",element:b.jsx(E9,{})}),b.jsx(Pr,{path:"messages",element:b.jsx(S9,{})}),b.jsx(Pr,{path:"messages/:chatId",element:b.jsx(z9,{})}),b.jsx(Pr,{path:"analyses",element:b.jsx(F9,{})}),b.jsx(Pr,{path:"profile",element:b.jsx($T,{})}),b.jsx(Pr,{path:"profile/:userId",element:b.jsx($T,{})}),b.jsx(Pr,{path:"about",element:b.jsx(B9,{})})]}),b.jsx(Pr,{path:"/login",element:b.jsx(iL,{})}),b.jsx(Pr,{path:"/register",element:b.jsx(aL,{})})]}),b.jsx(J9,{})]})}const e8="Plant AI",t8="Welcome to Plant AI",n8="Plant Diagnosis",r8="Community",i8="Profile",s8="Login",a8="Messages",o8="Language",l8="Logout",c8="Dark Mode",u8="Light Mode",h8="My Analyses",d8="Register",f8="Upload Photo",m8="Take Photo",g8="Analyzing...",p8="Diagnosis Results",y8="Treatment",_8="Confidence",v8="Save Changes",b8="Saving...",w8="Display Name",x8="Email",E8="Tap to change avatar",T8="Profile updated successfully!",S8="About Project",A8="Do you know the name of this plant?",I8="e.g., Rose, Tomato, Unknown...",R8="1. Plant Name",C8="2. Capture Photo",N8="Next",k8="I don't know",D8="I couldn't identify it clearly. Please take a close-up photo of a leaf.",O8="Take Close-up Photo",M8="Login to view detailed diagnosis and treatment plan.",P8="Login to View Results",j8="Detailed analysis is available for members only.",V8="AI Powered Plant Doctor",L8='Heal Your Plants with <span class="text-green-600">Artificial Intelligence</span>',U8="Take a photo, diagnose diseases instantly, and get expert treatment advice. Join thousands of happy farmers.",z8="Start Diagnosis",B8="Identify",F8="Tell us the plant name or type.",H8="Analyze",q8="Upload photos of the affected area.",$8="Heal",G8="Get instant treatment plan.",K8="Welcome, ",Y8="Diagnosis failed. Please try again.",Q8="Back",W8="Tomato",X8="Pepper",J8="Cucumber",Z8="Rose",ez="Succulent",tz="Orchid",nz="Lemon",rz="Strawberry",iz="Mint",sz="Other",az="Healthy / No Issue",oz="Yellowing Leaves",lz="Leaf Spots",cz="Wilting",uz="Pests / Bugs",hz="Root/Stem Rot",dz="Mold / Fungus",fz="Unknown / Help Needed",mz="Auto-Detect from Image",gz="Detecting...",pz="Ask Question",yz="Please login to post.",_z="Login Required",vz="Are you sure you want to delete this post?",bz="Just now",wz="Failed to delete post",xz="Failed to post comment",Ez="Failed to update post",Tz="Add a comment...",Sz="Please login to comment.",Az="No comments yet. Be the first!",Iz="Edit Post",Rz="Cancel",Cz="Save",Nz="Gardener",kz="Community Member",Dz="Send Message",Oz="Starting...",Mz="Please login to message users.",Pz="You cannot message yourself.",jz="Failed to start chat.",Vz=" No posts yet",Lz="Be the first to share your garden!",Uz="No results",zz="Like",Bz="Comment",Fz="Edit",Hz="Joined",qz="Unknown Date",$z="View Profile",Gz="Block User",Kz="Unblock User",Yz="Posts",Qz="Likes",Wz="My Posts",Xz="{{name}}'s Posts",Jz="New Chat",Zz="View Analysis Report",e7="Type a message...",t7="POWERED BY GEMINI AI",n7="Heal your plants with",r7="AI Precision",i7="Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo.",s7="Instant Analysis",a7="Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",o7="Smart Interactions",l7="The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",c7="Verified Treatments",u7="Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",h7="Your Personal Pocket Botanist",d7="Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs.",f7="Open Camera",m7="Select from Gallery",g7="No plant detected. Please ensure the subject is a clear plant or leaf.",p7="Our AI botanist is currently overwhelmed. Please try again in a few seconds.",y7="Retry",_7="Camera access denied. Please check your browser permissions.",v7={app_name:e8,welcome:t8,plant_diagnosis:n8,community:r8,profile:i8,login:s8,messages:a8,language:o8,logout:l8,dark_mode:c8,light_mode:u8,analyses:h8,register:d8,upload_photo:f8,take_photo:m8,analyzing:g8,results:p8,treatment:y8,confidence:_8,save_changes:v8,saving:b8,display_name:w8,email:x8,change_avatar:E8,profile_updated:T8,about:S8,what_plant_question:A8,what_plant_placeholder:I8,scan_step_1:R8,scan_step_2:C8,next_step:N8,skip:k8,need_macro_photo:D8,take_macro_photo:O8,login_blur_text:M8,login_to_view:P8,guest_limited:j8,hero_badge:V8,hero_title:L8,hero_desc:U8,start_diagnosis:z8,step_1_title:B8,step_1_desc:F8,step_2_title:H8,step_2_desc:q8,step_3_title:$8,step_3_desc:G8,welcome_user:K8,error_diagnosis_failed:Y8,back:Q8,plant_tomato:W8,plant_pepper:X8,plant_cucumber:J8,plant_rose:Z8,plant_succulent:ez,plant_orchid:tz,plant_lemon:nz,plant_strawberry:rz,plant_mint:iz,plant_other:sz,disease_none:az,disease_yellowing:oz,disease_spots:lz,disease_wilting:cz,disease_bugs:uz,disease_rot:hz,disease_mold:dz,disease_unknown:fz,auto_detect:mz,detecting:gz,ask_question:pz,login_to_post:yz,login_required:_z,confirm_delete_post:vz,just_now:bz,failed_delete_post:wz,failed_post_comment:xz,failed_update_post:Ez,add_comment_placeholder:Tz,login_to_comment:Sz,no_comments_yet:Az,edit_post:Iz,cancel:Rz,save:Cz,gardener:Nz,community_member:kz,send_message:Dz,starting_chat:Oz,login_to_message:Mz,cannot_message_self:Pz,failed_start_chat:jz,no_posts_yet:Vz,be_the_first:Lz,no_results:Uz,like:zz,comment:Bz,edit:Fz,delete:"Delete",joined:Hz,unknown_date:qz,view_profile:$z,block_user:Gz,unblock_user:Kz,posts:Yz,likes:Qz,my_posts:Wz,user_posts_title:Xz,new_conversation:Jz,view_analysis_report:Zz,type_message:e7,ai_powered_v2:t7,hero_title_1:n7,hero_title_highlight:r7,hero_desc_v2:i7,feature_1_title:s7,feature_1_desc:a7,feature_2_title:o7,feature_2_desc:l7,feature_3_title:c7,feature_3_desc:u7,summary_title:h7,summary_desc:d7,open_camera:f7,upload_gallery:m7,error_not_plant:g7,error_server_busy:p7,retry:y7,camera_permission_denied:_7},b7="Bitki AI",w7="Bitki AI'ye Hogeldiniz",x7="Bitki Tehisi",E7="Topluluk",T7="Profil",S7="Giri Yap",A7="Mesajlar",I7="Dil",R7="k Yap",C7="Koyu Tema",N7="Aydnlk Tema",k7="Analizlerim",D7="Kayt Ol",O7="Fotoraf Ykle",M7="Fotoraf ek",P7="Analiz ediliyor...",j7="Domates",V7="Biber",L7="Salatalk",U7="Patlcan",z7="Patates",B7="Soan",F7="Sarmsak",H7="Marul",q7="Ispanak",$7="Havu",G7="Fasulye",K7="Msr",Y7="Kabak",Q7="ilek",W7="Limon",X7="Portakal",J7="Elma",Z7="zm",eB="Karpuz",tB="Kavun",nB="Kiraz",rB="eftali",iB="Gl",sB="Orkide",aB="Sukulent",oB="Lale",lB="Ayiei",cB="Papatya",uB="Lavanta",hB="Kakts",dB="Zeytin",fB="am",mB="Palmiye",gB="Nane",pB="Fesleen",yB="Biberiye",_B="Maydanoz",vB="Dier",bB="Salkl / Sorun Yok",wB="Yaprak Sararmas",xB="Yaprak Lekeleri",EB="Solma",TB="Bcek / Haere",SB="Kk/Gvde rmesi",AB="Kf / Mantar",IB="Mildiy",RB="Besin Eksiklii",CB="Bilinmiyor / Yardm Lazm",NB="Fotoraftan Bul",kB="Taranyor...",DB="Bitki Se...",OB="Tehis Sonular",MB="Tedavi",PB="Gven Oran",jB="Deiiklikleri Kaydet",VB="Analizi Kaydet",LB="Kaydedildi",UB="Analiz baaryla kaydedildi!",zB="Bu analiz zaten toplulukla paylald.",BB="Bu analizi toplulukla paylamak istiyor musunuz?",FB="Baaryla paylald!",HB="Analizlerim",qB="Kaydediliyor...",$B="Grnen sim",GB="E-posta",KB="Fotoraf deitirmek iin dokunun",YB="Profil baaryla gncellendi!",QB="Proje Hakknda",WB="Bu bitkinin adn biliyor musunuz?",XB="rn. Gl, Domates, Bilmiyorum...",JB="1. Bitki Ad",ZB="2. Fotoraf ek",eF="Devam Et",tF="Bilmiyorum",nF="Tam olarak tehis edemedim. Ltfen bir yapran yakndan fotorafn ekin.",rF="Yakndan ek",iF="Detayl tehis ve tedavi plann grmek iin giri yapn.",sF="Sonucu Grmek in Giri Yap",aF="Detayl analiz sadece yelere zeldir.",oF="Yapay Zeka Destekli Bitki Doktoru",lF='Bitkilerinizi <span class="text-green-600">Yapay Zeka</span> ile yiletirin',cF="Fotoraf ekin, hastalklar annda tehis edin ve uzman tedavi nerileri aln. Binlerce mutlu iftiye katln.",uF="Tehise Bala",hF="Tanmla",dF="Bitkinin adn veya trn belirtin.",fF="Analiz Et",mF="Etkilenen blgenin fotorafn ykleyin.",gF="yiletir",pF="Annda tedavi planna kavuun.",yF="Hogeldin, ",_F="Tehis baarsz oldu. Ltfen tekrar deneyin.",vF="Geri",bF="Az nce",wF="Bu gnderiyi silmek istediinize emin misiniz?",xF="Gnderi silinemedi",EF="Yorum gnderilemedi",TF="Gnderi gncellenemedi",SF="Yorum yaz...",AF="Yorum yapmak iin giri yapn.",IF="Henz yorum yok. lk yorumu sen yap!",RF="Gnderiyi Dzenle",CF="ptal",NF="Kaydet",kF="Bahvan",DF="Topluluk yesi",OF="Mesaj Gnder",MF="Balatlyor...",PF="Mesaj gndermek iin giri yapn.",jF="Kendinize mesaj atamazsnz.",VF="Sohbet balatlamad.",LF=" Henz gnderi yok",UF="Baheni paylaan ilk kii ol!",zF="Sonu yok",BF="Been",FF="Yorum",HF="Dzenle",qF="Ad Soyad",$F="ifre",GF="Toplulua katlmak iin hesap oluturun.",KF="Dorulama E-postas Gnderildi! Ltfen gelen kutunuzu (ve SPAM klasrn) kontrol edin.",YF="E-postanz Dorulayn",QF="Dorulama balantsn gnderdik. Devam etmek iin ltfen e-postanz kontrol edin.",WF="E-posta Uygulamasn A",XF="Doruladm, Giri Yap",JF="Zaten hesabnz var m?",ZF="Katlma Tarihi",eH="Bilinmiyor",tH="Profili Gr",nH="Kullancy Engelle",rH="Engeli Kaldr",iH="Gnderi",sH="Beeni",aH="Gnderilerim",oH="{{name}} Gnderileri",lH="Yeni Sohbet",cH="Analiz Raporunu Gr",uH="Mesaj yazn...",hH="GEMINI AI DESTEKL",dH="Bitkilerinizi yiletirin",fH="Yapay Zeka Hassasiyeti",mH="Gelimi AI botanikimiz ile hastalklar annda tehis edin, tedavi planlar aln ve bitki saln izleyin. Sadece bir fotoraf ekin.",gH="Annda Analiz",pH="Saniyeler iinde sonu aln. Yapay zekamz hastalk belirtilerini tespit etmek iin yaprak desenlerini analiz eder.",yH="Akll Etkileimler",_H="Yapay zeka ne zaman daha iyi bir baka ihtiyac olduunu bilir. Sorun net deilse makro ekimler ister.",vH="Dorulanm Tedaviler",bH="Uygulanabilir tavsiyeler aln. Organik zmlerden kimyasal tedavilere kadar sizi iyilemeye ynlendiriyoruz.",wH="Kiisel Cep Botanikiniz",xH="Plant AI, Google'n Gemini modellerinin gcn uzman botanik bilgisiyle birletirir. Sadece tahmin etmiyoruz; salk sorunlarn yksek hassasiyetle kategorize etmek iin doku, renk ve leke desenlerini analiz ediyoruz. ster ev bahvan olun ister profesyonel bir ifti, aracmz ihtiyalarnza uyum salar.",EH="Kameray A",TH="Galeriden Se",SH="Bitki tespit edilemedi. Ltfen net bir bitki veya yaprak fotoraf ektiinizden emin olun.",AH="Yapay zeka asistanmz u anda ok youn. Ltfen birka saniye sonra tekrar deneyin.",IH="Tekrar Dene",RH="Kamera eriimi reddedildi. Ltfen tarayc izinlerini kontrol edin.",CH="Yakn ekim Fotoraf",NH="Bitki AI Dnyor...",kH="Analiz kaydedilemedi:",DH="Mikrofon eriimi reddedildi. Ltfen tarayc ayarlarndan izin verin.",OH="Bu cihazda mikrofon bulunamad.",MH="Mikrofon kullanlamyor veya baka bir uygulama tarafndan kullanlyor.",PH="Mikrofona eriilemedi. HTTPS balantsn ve mikrofonunuzu kontrol edin.",jH="Kaydediliyor...",VH="Mesaj dzenleniyor...",LH="Mesajnz dzenleyin...",UH="Tedavi sreci balatld!",zH="Bilgiyi Kaydet",BH="Tedaviye Bala",FH="Henz Bir Analiz Yok",HH="Bitkilerinizin saln takip etmek iin ilk analizinizi yapn.",qH="Tedavi & Takip",$H="Kayt",GH="Bu analizi silmek istediinizden emin misiniz?",KH="Gelime Ekle",YH="Paylald",QH="Payla",WH="Toplulukla paylaarak bakalarna yardmc ol!",XH="Soru Sor",JH="Fotoraf",ZH="Sesli Mesaj",eq="Son grlme {{days}} gn nce",tq="Son grlme {{hours}} saat nce",nq="Son grlme {{minutes}} dakika nce",rq="Az nce grld",iq="Dzenlendi",sq="Payla",aq="Balanty Kopyala",oq="Balant kopyaland!",lq="Sosyal Medyada Payla",cq="Son grlme",uq={app_name:b7,welcome:w7,plant_diagnosis:x7,community:E7,profile:T7,login:S7,messages:A7,language:I7,logout:R7,dark_mode:C7,light_mode:N7,analyses:k7,register:D7,upload_photo:O7,take_photo:M7,analyzing:P7,plant_tomato:j7,plant_pepper:V7,plant_cucumber:L7,plant_eggplant:U7,plant_potato:z7,plant_onion:B7,plant_garlic:F7,plant_lettuce:H7,plant_spinach:q7,plant_carrot:$7,plant_bean:G7,plant_corn:K7,plant_zucchini:Y7,plant_strawberry:Q7,plant_lemon:W7,plant_orange:X7,plant_apple:J7,plant_grape:Z7,plant_watermelon:eB,plant_melon:tB,plant_cherry:nB,plant_peach:rB,plant_rose:iB,plant_orchid:sB,plant_succulent:aB,plant_tulip:oB,plant_sunflower:lB,plant_daisy:cB,plant_lavender:uB,plant_cactus:hB,plant_olive:dB,plant_pine:fB,plant_palm:mB,plant_mint:gB,plant_basil:pB,plant_rosemary:yB,plant_parsley:_B,plant_other:vB,disease_none:bB,disease_yellowing:wB,disease_spots:xB,disease_wilting:EB,disease_bugs:TB,disease_rot:SB,disease_mold:AB,disease_mildew:IB,disease_nutrient:RB,disease_unknown:CB,auto_detect:NB,detecting:kB,select_plant:DB,results:OB,treatment:MB,confidence:PB,save_changes:jB,save_analysis:VB,saved:LB,save_success:UB,already_shared:zB,confirm_share:BB,share_success:FB,my_analyses:HB,saving:qB,display_name:$B,email:GB,change_avatar:KB,profile_updated:YB,about:QB,what_plant_question:WB,what_plant_placeholder:XB,scan_step_1:JB,scan_step_2:ZB,next_step:eF,skip:tF,need_macro_photo:nF,take_macro_photo:rF,login_blur_text:iF,login_to_view:sF,guest_limited:aF,hero_badge:oF,hero_title:lF,hero_desc:cF,start_diagnosis:uF,step_1_title:hF,step_1_desc:dF,step_2_title:fF,step_2_desc:mF,step_3_title:gF,step_3_desc:pF,welcome_user:yF,error_diagnosis_failed:_F,back:vF,just_now:bF,confirm_delete_post:wF,failed_delete_post:xF,failed_post_comment:EF,failed_update_post:TF,add_comment_placeholder:SF,login_to_comment:AF,no_comments_yet:IF,edit_post:RF,cancel:CF,save:NF,gardener:kF,community_member:DF,send_message:OF,starting_chat:MF,login_to_message:PF,cannot_message_self:jF,failed_start_chat:VF,no_posts_yet:LF,be_the_first:UF,no_results:zF,like:BF,comment:FF,edit:HF,delete:"Sil",full_name:qF,password:$F,create_account_desc:GF,verification_email_sent:KF,verify_email_title:YF,verify_email_desc:QF,open_email_app:WF,i_verified_it:XF,already_have_account:JF,joined:ZF,unknown_date:eH,view_profile:tH,block_user:nH,unblock_user:rH,posts:iH,likes:sH,my_posts:aH,user_posts_title:oH,new_conversation:lH,view_analysis_report:cH,type_message:uH,ai_powered_v2:hH,hero_title_1:dH,hero_title_highlight:fH,hero_desc_v2:mH,feature_1_title:gH,feature_1_desc:pH,feature_2_title:yH,feature_2_desc:_H,feature_3_title:vH,feature_3_desc:bH,summary_title:wH,summary_desc:xH,open_camera:EH,upload_gallery:TH,error_not_plant:SH,error_server_busy:AH,retry:IH,camera_permission_denied:RH,close_up_photo:CH,ai_thinking:NH,save_fail:kH,mic_access_denied:DH,mic_not_found:OH,mic_unavailable:MH,mic_generic_error:PH,recording:jH,editing_message:VH,edit_message_placeholder:LH,treatment_started:UH,save_info:zH,start_treatment:BH,no_analyses_title:FH,no_analyses_desc:HH,treatment_updates:qH,records:$H,confirm_delete:GH,add_update:KH,shared:YH,share:QH,share_help_others:WH,ask_question:XH,photo:JH,voice_message:ZH,last_seen_day:eq,last_seen_hour:tq,last_seen_min:nq,last_seen_just_now:rq,edited:iq,share_title:sq,copy_link:aq,link_copied:oq,social_share:lq,last_seen:cq};Wn.use(vD).init({resources:{en:{translation:v7},tr:{translation:uq}},lng:"tr",fallbackLng:"en",interpolation:{escapeValue:!1}});mN.createRoot(document.getElementById("root")).render(b.jsx($.StrictMode,{children:b.jsx($I,{children:b.jsx(Dk,{children:b.jsx(Nj,{children:b.jsx(Z9,{})})})})}));
